// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.9/esri/copyright.txt for details.
//>>built
require({cache:{"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(B,w,q,a,m){return w("dijit.layout.TabContainer",q,{useMenu:!0,useSlider:!0,controllerWidget:"",_makeController:function(a){var h=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");return new ("string"==typeof this.controllerWidget?B.getObject(this.controllerWidget):this.controllerWidget)({id:this.id+"_tablist",
ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":h,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},a)},postMixInProperties:function(){this.inherited(arguments);this.controllerWidget||(this.controllerWidget="top"!=this.tabPosition&&"bottom"!=this.tabPosition||this.nested?a:m)}})})},"dijit/layout/_TabContainerBase":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style ./StackContainer ./utils ../_TemplatedMixin dojo/text!./templates/TabContainer.html".split(" "),
function(B,w,q,a,m,h,p,x){return B("dijit.layout._TabContainerBase",[m,p],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:!1,nested:!1,templateString:x,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&a.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);this.doLayout||
w.add(this.domNode,"dijitTabContainerNoLayout");this.nested?(w.add(this.domNode,"dijitTabContainerNested"),w.add(this.tablist.containerNode,"dijitTabContainerTabListNested"),w.add(this.tablistSpacer,"dijitTabContainerSpacerNested"),w.add(this.containerNode,"dijitTabPaneWrapperNested")):w.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(a){w.add(a.domNode,"dijitTabPane");this.inherited(arguments)},removeChild:function(a){w.remove(a.domNode,"dijitTabPane");this.inherited(arguments)},
startup:function(){this._started||(this.tablist.startup(),this.inherited(arguments))},layout:function(){if(this._contentBox&&"undefined"!=typeof this._contentBox.l){var a=this.selectedChildWidget;if(this.doLayout){var f=this.tabPosition.replace(/-h/,"");this.tablist.region=f;f=[this.tablist,{domNode:this.tablistSpacer,region:f},{domNode:this.containerNode,region:"center"}];h.layoutChildren(this.domNode,this._contentBox,f);this._containerContentBox=h.marginBox2contentBox(this.containerNode,f[2]);a&&
a.resize&&a.resize(this._containerContentBox)}else{if(this.tablist.resize){f=this.tablist.domNode.style;f.width="0";var n=q.getContentBox(this.domNode).w;f.width="";this.tablist.resize({w:n})}a&&a.resize&&a.resize()}}},destroy:function(a){this.tablist&&this.tablist.destroy(a);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t){h("dijit-legacy-requires")&&g(0,function(){require(["dijit/layout/StackController"])});q=q("dijit.layout.StackContainer",t,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);a.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(x(this.domNode,"keydown",p.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var b=this.getChildren();B.forEach(b,this._setupChild,
this);this.persist?this.selectedChildWidget=u.byId(w(this.id+"_selectedChild")):B.some(b,function(b){b.selected&&(this.selectedChildWidget=b);return b.selected},this);var a=this.selectedChildWidget;!a&&b[0]&&(a=this.selectedChildWidget=b[0],a.selected=!0);f.publish(this.id+"-startup",{children:b,selected:a,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var b=this.selectedChildWidget;b&&this._showChild(b)}this.inherited(arguments)},
_setupChild:function(b){var a=b.domNode,f=m.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",b.domNode,"replace"),g=b["aria-label"]||b.title||b.label;g&&f.setAttribute("aria-label",g);m.place(a,f);b._wrapper=f;this.inherited(arguments);"none"==a.style.display&&(a.style.display="block");b.domNode.removeAttribute("title")},addChild:function(b,a){this.inherited(arguments);this._started&&(f.publish(this.id+"-addChild",b,a),this.layout(),this.selectedChildWidget||
this.selectChild(b))},removeChild:function(b){var a=B.indexOf(this.getChildren(),b);this.inherited(arguments);m.destroy(b._wrapper);delete b._wrapper;this._started&&f.publish(this.id+"-removeChild",b);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===b&&(this.selectedChildWidget=void 0,this._started)){var g=this.getChildren();g.length&&this.selectChild(g[Math.max(a-1,0)])}this._started&&this.layout()}},selectChild:function(b,a){var g;b=u.byId(b);this.selectedChildWidget!=b&&(g=this._transition(b,
this.selectedChildWidget,a),this._set("selectedChildWidget",b),f.publish(this.id+"-selectChild",b,this._focused),this.persist&&w(this.id+"_selectedChild",this.selectedChildWidget.id));return n(g||!0)},_transition:function(b,a){a&&this._hideChild(a);a=this._showChild(b);b.resize&&(this.doLayout?b.resize(this._containerContentBox||this._contentBox):b.resize());return a},_adjacent:function(b){var a=this.getChildren(),f=B.indexOf(a,this.selectedChildWidget),f=f+(b?1:a.length-1);return a[f%a.length]},
forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(b){f.publish(this.id+"-containerKeyDown",{e:b,page:this})},layout:function(){var b=this.selectedChildWidget;b&&b.resize&&(this.doLayout?b.resize(this._containerContentBox||this._contentBox):b.resize())},_showChild:function(b){var f=this.getChildren();b.isFirstChild=b==f[0];b.isLastChild=b==f[f.length-1];b._set("selected",!0);b._wrapper&&a.replace(b._wrapper,
"dijitVisible","dijitHidden");return b._onShow&&b._onShow()||!0},_hideChild:function(b){b._set("selected",!1);b._wrapper&&a.replace(b._wrapper,"dijitHidden","dijitVisible");b.onHide&&b.onHide()},closeChild:function(b){if(!b.onClose||b.onClose(this,b))this.removeChild(b),b.destroyRecursive()},destroyDescendants:function(b){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;B.forEach(this.getChildren(),function(a){b||this.removeChild(a);a.destroyRecursive(b)},this);this._descendantsBeingDestroyed=
!1}});q.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};p.extend(b,q.ChildWidgetProperties);return q})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(B,w,q,a,m,h,p,x,g){return h("dijit.layout._LayoutWidget",[w,q,a],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);
p.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();a&&a.isLayoutContainer||(this.resize(),this.own(m.on("resize",B.hitch(this,"resize"))))}},resize:function(a,n){var f=this.domNode;a&&x.setMarginBox(f,a);n=n||{};B.mixin(n,a||{});"h"in n&&"w"in n||(n=B.mixin(x.getMarginBox(f),n));a=g.getComputedStyle(f);var b=x.getMarginExtents(f,a),t=x.getBorderExtents(f,a);n=this._borderBox={w:n.w-(b.w+t.w),h:n.h-(b.h+t.h)};
b=x.getPadExtents(f,a);this._contentBox={l:g.toPixelValue(f,a.paddingLeft),t:g.toPixelValue(f,a.paddingTop),w:n.w-b.w,h:n.h-b.h};this.layout()},layout:function(){},_setupChild:function(a){p.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,g){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){p.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},
"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(B,w){return B("dijit._Contained",null,{_getSibling:function(q){var a=this.getParent();return a&&a._getSiblingOfChild&&a._getSiblingOfChild(this,"previous"==q?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var q=this.getParent();return q&&q.getIndexOfChild?q.getIndexOfChild(this):-1}})})},"dijit/layout/TabController":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/has dojo/i18n dojo/_base/lang ./StackController ../registry ../Menu ../MenuItem dojo/text!./templates/_TabButton.html dojo/i18n!../nls/common".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u){u=B("dijit.layout._TabButton"+(m("dojo-bidi")?"_NoBidi":""),x.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:u,_setNameAttr:"focusNode",scrollOnFocus:!1,buildRendering:function(){this.inherited(arguments);w.setSelectable(this.containerNode,!1)},startup:function(){this.inherited(arguments);var b=this.domNode;this.defer(function(){b.className=b.className},1)},_setCloseButtonAttr:function(b){this._set("closeButton",b);
a.toggle(this.domNode,"dijitClosable",b);this.closeNode.style.display=b?"":"none";b&&(b=h.getLocalization("dijit","common"),this.closeNode&&q.set(this.closeNode,"title",b.itemClose))},_setDisabledAttr:function(b){this.inherited(arguments);if(this.closeNode)if(b)q.remove(this.closeNode,"title");else{var a=h.getLocalization("dijit","common");q.set(this.closeNode,"title",a.itemClose)}},_setLabelAttr:function(b){this.inherited(arguments);this.showLabel||this.params.title||(this.iconNode.alt=p.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}});m("dojo-bidi")&&(u=B("dijit.layout._TabButton",u,{_setLabelAttr:function(b){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}}));B=B("dijit.layout.TabController",x,{baseClass:"dijitTabController",templateString:"\x3cdiv role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown:onkeydown'\x3e\x3c/div\x3e",tabPosition:"top",buttonWidget:u,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var b=
new f({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(b){return a.contains(b,"dijitClosable")&&!a.contains(b,"dijitTabDisabled")}});this.own(b);var u=h.getLocalization("dijit","common"),D=this;b.addChild(new n({label:u.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(b){b=g.byNode(this.getParent().currentTarget);D.onCloseButtonClick(b.page)}}))}});
B.TabButton=u;return B})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(B,w,q,a,m,h,p,x,g,f,n,u,b,t){a=w("dijit.layout._StackButton",t,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(b){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role",
"tab")}});w=w("dijit.layout.StackController",[n,u,b],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:a,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(b){return f.byId(this.id+"_"+b)},postCreate:function(){this.inherited(arguments);this.own(x.subscribe(this.containerId+"-startup",h.hitch(this,"onStartup")),x.subscribe(this.containerId+"-addChild",h.hitch(this,"onAddChild")),
x.subscribe(this.containerId+"-removeChild",h.hitch(this,"onRemoveChild")),x.subscribe(this.containerId+"-selectChild",h.hitch(this,"onSelectChild")),x.subscribe(this.containerId+"-containerKeyDown",h.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(p(this.containerNode,"click",h.hitch(this,function(b){var a=f.getEnclosingWidget(b.target);if(a!=this.containerNode&&!a.disabled&&a.page)for(b=b.target;b!==this.containerNode;b=b.parentNode)if(q.contains(b,this.buttonWidgetCloseClass)){this.onCloseButtonClick(a.page);
break}else if(b==a.domNode){this.onButtonClick(a.page);break}})))},onStartup:function(b){this.textDir=b.textDir;B.forEach(b.children,this.onAddChild,this);if(b.selected)this.onSelectChild(b.selected);var a=f.byId(this.containerId).containerNode,g=h.hitch(this,"pane2button");b={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var A=function(b,f){return p(a,"attrmodified-"+b,function(b){var a=g(b.detail&&b.detail.widget&&
b.detail.widget.id);a&&a.set(f,b.detail.newValue)})},n;for(n in b)this.own(A(n,b[n]))},destroy:function(b){this.destroyDescendants(b);this.inherited(arguments)},onAddChild:function(b,a){var f=new (h.isString(this.buttonWidget)?h.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+b.id,name:this.id+"_"+b.id,label:b.title,disabled:b.disabled,ownerDocument:this.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir||this.textDir,showLabel:b.showTitle,iconClass:b.iconClass,closeButton:b.closable,
title:b.tooltip,page:b});this.addChild(f,a);b.controlButton=f;if(!this._currentChild)this.onSelectChild(b);a=b._wrapper.getAttribute("aria-labelledby")?b._wrapper.getAttribute("aria-labelledby")+" "+f.id:f.id;b._wrapper.removeAttribute("aria-label");b._wrapper.setAttribute("aria-labelledby",a)},onRemoveChild:function(b){this._currentChild===b&&(this._currentChild=null);var a=this.pane2button(b.id);a&&(this.removeChild(a),a.destroy());delete b.controlButton},onSelectChild:function(b){if(b){if(this._currentChild){var a=
this.pane2button(this._currentChild.id);a.set("checked",!1);a.focusNode.setAttribute("tabIndex","-1")}a=this.pane2button(b.id);a.set("checked",!0);this._currentChild=b;a.focusNode.setAttribute("tabIndex","0");f.byId(this.containerId)}},onButtonClick:function(b){var a=this.pane2button(b.id);g.focus(a.focusNode);this._currentChild&&this._currentChild.id===b.id&&a.set("checked",!0);f.byId(this.containerId).selectChild(b)},onCloseButtonClick:function(b){f.byId(this.containerId).closeChild(b);this._currentChild&&
(b=this.pane2button(this._currentChild.id))&&g.focus(b.focusNode||b.domNode)},adjacent:function(b){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(b=!b);var a=this.getChildren(),f=B.indexOf(a,this.pane2button(this._currentChild.id)),g=a[f],n;do f=(f+(b?1:a.length-1))%a.length,n=a[f];while(n.disabled&&n!=g);return n},onkeydown:function(b,a){if(!this.disabled&&!b.altKey&&(a=null,b.ctrlKey||!b._djpage)){switch(b.keyCode){case m.LEFT_ARROW:case m.UP_ARROW:b._djpage||(a=
!1);break;case m.PAGE_UP:b.ctrlKey&&(a=!1);break;case m.RIGHT_ARROW:case m.DOWN_ARROW:b._djpage||(a=!0);break;case m.PAGE_DOWN:b.ctrlKey&&(a=!0);break;case m.HOME:for(var f=this.getChildren(),g=0;g<f.length;g++){var n=f[g];if(!n.disabled){this.onButtonClick(n.page);break}}b.stopPropagation();b.preventDefault();break;case m.END:f=this.getChildren();for(g=f.length-1;0<=g;g--)if(n=f[g],!n.disabled){this.onButtonClick(n.page);break}b.stopPropagation();b.preventDefault();break;case m.DELETE:case 87:this._currentChild.closable&&
(b.keyCode==m.DELETE||b.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),b.stopPropagation(),b.preventDefault());break;case m.TAB:b.ctrlKey&&(this.onButtonClick(this.adjacent(!b.shiftKey).page),b.stopPropagation(),b.preventDefault())}null!==a&&(this.onButtonClick(this.adjacent(a).page),b.stopPropagation(),b.preventDefault())}},onContainerKeyDown:function(b){b.e._djpage=b.page;this.onkeydown(b.e)}});w.StackButton=a;return w})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E){n("dijit-legacy-requires")&&E(0,function(){B(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return q("dijit.Menu",D,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):w.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return b.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(b){return b.contentDocument||b.contentWindow&&b.contentWindow.document||b.name&&document.frames[b.name]&&document.frames[b.name].document||null},bindDomNode:function(b){b=a.byId(b,this.ownerDocument);var n;if("iframe"==b.tagName.toLowerCase()){var C=b;n=this._iframeContentWindow(C);n=u.body(n.document)}else n=b==u.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var t={node:b,
iframe:C};m.set(b,"_dijitMenu"+this.id,this._bindings.push(t));var h=g.hitch(this,function(b){var a=this.selector,g=a?function(b){return f.selector(a,b)}:function(b){return b},n=this;return[f(b,g(this.leftClickToOpen?"click":"contextmenu"),function(b){b.stopPropagation();b.preventDefault();(new Date).getTime()<n._lastKeyDown+500||n._scheduleOpen(this,C,{x:b.pageX,y:b.pageY},b.target)}),f(b,g("keydown"),function(b){if(93==b.keyCode||b.shiftKey&&b.keyCode==x.F10||n.leftClickToOpen&&b.keyCode==x.SPACE)b.stopPropagation(),
b.preventDefault(),n._scheduleOpen(this,C,null,b.target),n._lastKeyDown=(new Date).getTime()})]});t.connects=n?h(n):[];C&&(t.onloadHandler=g.hitch(this,function(){var b=this._iframeContentWindow(C),b=u.body(b.document);t.connects=h(b)}),C.addEventListener?C.addEventListener("load",t.onloadHandler,!1):C.attachEvent("onload",t.onloadHandler))},unBindDomNode:function(b){var f;try{f=a.byId(b,this.ownerDocument)}catch(K){return}b="_dijitMenu"+this.id;if(f&&m.has(f,b)){for(var g=m.get(f,b)-1,n=this._bindings[g],
u;u=n.connects.pop();)u.remove();(u=n.iframe)&&(u.removeEventListener?u.removeEventListener("load",n.onloadHandler,!1):u.detachEvent("onload",n.onloadHandler));m.remove(f,b);delete this._bindings[g]}},_scheduleOpen:function(b,a,f,g){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:g,delegatedTarget:b,iframe:a,coords:f})},1))},_openMyself:function(b){function f(){x.refocus&&q&&q.focus();t.close(x)}var g=b.target,u=b.iframe,C=b.coords,E=!C;this.currentTarget=
b.delegatedTarget;if(C){if(u){b=h.position(u,!0);var g=this._iframeContentWindow(u),g=h.docScroll(g.document),y=p.getComputedStyle(u),m=p.toPixelValue,D=(n("ie"),m(u,y.paddingLeft))+(n("ie"),0),u=(n("ie"),m(u,y.paddingTop))+(n("ie"),0);C.x+=b.x+D-g.x;C.y+=b.y+u-g.y}}else C=h.position(g,!0),C.x+=10,C.y+=10;var x=this,u=this._focusManager.get("prevNode");b=this._focusManager.get("curNode");var q=!b||a.isDescendant(b,this.domNode)?u:b;t.open({popup:this,x:C.x,y:C.y,onExecute:f,onCancel:f,orient:this.isLeftToRight()?
"L":"R"});this.focus();E||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);t.close(this)}},destroy:function(){w.forEach(this._bindings,function(b){b&&this.unBindDomNode(b.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E){function C(){this._popupWrapper&&(h.destroy(this._popupWrapper),delete this._popupWrapper)}q=q(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var b=this._firstAroundPosition,a=p.position(this._firstAroundNode,!0),f=a.x-b.x,b=a.y-b.y;if(f||b)for(this._firstAroundPosition=a,a=0;a<this._stack.length;a++){var g=this._stack[a].wrapper.style;g.top=parseFloat(g.top)+b+"px";"auto"==g.right?g.left=parseFloat(g.left)+f+
"px":g.right=parseFloat(g.right)-f+"px"}this._aroundMoveListener=setTimeout(n.hitch(this,"_repositionAll"),f||b?10:50)}},_createWrapper:function(b){var a=b._popupWrapper,f=b.domNode;a||(a=h.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":b["aria-label"]||b.label||b.name||b.id},b.ownerDocumentBody),a.appendChild(f),f=f.style,f.display="",f.visibility="",f.position="",f.top="0px",b._popupWrapper=a,w.after(b,"destroy",C,!0),"ontouchend"in document&&u(a,"touchend",
function(b){/^(input|button|textarea)$/i.test(b.target.tagName)||b.preventDefault()}),a.dojoClick=!0);return a},moveOffScreen:function(b){var a=this._createWrapper(b);b=p.isBodyLtr(b.ownerDocument);var f={visibility:"hidden",top:"-9999px",display:""};f[b?"left":"right"]="-9999px";f[b?"right":"left"]="auto";x.set(a,f);return a},hide:function(b){var a=this._createWrapper(b);x.set(a,{display:"none",height:"auto",overflowY:"visible",border:""});b=b.domNode;"_originalStyle"in b&&(b.style.cssText=b._originalStyle)},
getTopPopup:function(){for(var b=this._stack,a=b.length-1;0<a&&b[a].parent===b[a-1].widget;a--);return b[a]},open:function(A){for(var C=this._stack,h=A.popup,E=h.domNode,q=A.orient||["below","below-alt","above","above-alt"],y=A.parent?A.parent.isLeftToRight():p.isBodyLtr(h.ownerDocument),I=A.around,M=A.around&&A.around.id?A.around.id+"_dropdown":"popup_"+this._idGen++;C.length&&(!A.parent||!a.isDescendant(A.parent.domNode,C[C.length-1].widget.domNode));)this.close(C[C.length-1].widget);var N=this.moveOffScreen(h);
h.startup&&!h._started&&h.startup();var w,B=p.position(E);if("maxHeight"in A&&-1!=A.maxHeight)w=A.maxHeight||Infinity;else{w=D.getEffectiveBox(this.ownerDocument);var O=I?p.position(I,!1):{y:A.y-(A.padding||0),h:2*(A.padding||0)};w=Math.floor(Math.max(O.y,w.h-(O.y+O.h)))}B.h>w&&(B=x.getComputedStyle(E),x.set(N,{overflowY:"scroll",height:w+"px",border:B.borderLeftWidth+" "+B.borderLeftStyle+" "+B.borderLeftColor}),E._originalStyle=E.style.cssText,E.style.border="none");m.set(N,{id:M,style:{zIndex:this._beginZIndex+
C.length},"class":"dijitPopup "+(h.baseClass||h["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:A.parent?A.parent.id:""});0==C.length&&I&&(this._firstAroundNode=I,this._firstAroundPosition=p.position(I,!0),this._aroundMoveListener=setTimeout(n.hitch(this,"_repositionAll"),50));g("config-bgIframe")&&!h.bgIframe&&(h.bgIframe=new t(N));M=h.orient?n.hitch(h,"orient"):null;q=I?b.around(N,I,q,y,M):b.at(N,A,"R"==q?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],A.padding,M);N.style.visibility="visible";
E.style.visibility="visible";E=[];E.push(u(N,"keydown",n.hitch(this,function(b){if(b.keyCode==f.ESCAPE&&A.onCancel)b.stopPropagation(),b.preventDefault(),A.onCancel();else if(b.keyCode==f.TAB&&(b.stopPropagation(),b.preventDefault(),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));h.onCancel&&A.onCancel&&E.push(h.on("cancel",A.onCancel));E.push(h.on(h.onExecute?"execute":"change",n.hitch(this,function(){var b=this.getTopPopup();if(b&&b.onExecute)b.onExecute()})));C.push({widget:h,wrapper:N,parent:A.parent,
onExecute:A.onExecute,onCancel:A.onCancel,onClose:A.onClose,handlers:E});if(h.onOpen)h.onOpen(q);return q},close:function(b){for(var a=this._stack;b&&B.some(a,function(a){return a.widget==b})||!b&&a.length;){var f=a.pop(),g=f.widget,n=f.onClose;g.bgIframe&&(g.bgIframe.destroy(),delete g.bgIframe);if(g.onClose)g.onClose();for(var u;u=f.handlers.pop();)u.remove();g&&g.domNode&&this.hide(g);n&&n()}0==a.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return E.popup=new q})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(B,w,q,a){return B("dijit.DropDownMenu",a,{templateString:q,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(a){this._moveToPopup(a);a.stopPropagation();a.preventDefault()},_onLeftArrow:function(a){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();
else this.onCancel(!1);else a.stopPropagation(),a.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D){return w("dijit._MenuBase",[u,D,t,b],{selected:null,_setSelectedAttr:function(b){this.selected!=b&&(this.selected&&(this.selected._setSelected(!1),
this._onChildDeselect(this.selected)),b&&b._setSelected(!0),this._set("selected",b))},activated:!1,_setActivatedAttr:function(b){m.toggle(this.domNode,"dijitMenuActive",b);m.toggle(this.domNode,"dijitMenuPassive",!b);this._set("activated",b)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(b){var a=n.byNode(b);return b.parentNode==this.containerNode&&a&&a.focus},postCreate:function(){var b=this,a="string"==typeof this.childSelector?this.childSelector:
h.hitch(this,"childSelector");this.own(x(this.containerNode,x.selector(a,p.enter),function(){b.onItemHover(n.byNode(this))}),x(this.containerNode,x.selector(a,p.leave),function(){b.onItemUnhover(n.byNode(this))}),x(this.containerNode,x.selector(a,f),function(a){b.onItemClick(n.byNode(this),a);a.stopPropagation()}),x(this.containerNode,x.selector(a,"focusin"),function(){b._onItemFocus(n.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(b,a,f,g){this.inherited(arguments);if(b&&(-1==
g||b.popup&&1==g))this.onItemClick(b,a)},_keyboardSearchCompare:function(b,a){return b.shortcutKey?a==b.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(b){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,b);else(b=this._getTopMenu())&&b._isMenuBar&&b.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},
onItemHover:function(b){this.activated?(this.set("selected",b),!b.popup||b.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(b)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(b,{type:"click"})},this.passivePopupDelay));this._hoveredChild=b;b._set("hovering",!0)},_onChildDeselect:function(b){this._stopPopupTimer();this.currentPopupItem==
b&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;b._closePopup()},this.popupDelay))},onItemUnhover:function(b){this._hoveredChild==b&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);b._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&
(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var b=this;b.parentMenu;b=b.parentMenu);return b},onItemClick:function(b,a){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(b);if(b.disabled)return!1;b.popup?(this.set("selected",b),this.set("activated",!0),a=/^key/.test(a._origType||a.type)||0==a.clientX&&0==a.clientY,this._openItemPopup(b,a)):(this.onExecute(),b._onClick?b._onClick(a):b.onClick(a))},_openItemPopup:function(b,a){if(b!=
this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var f=b.popup;f.parentMenu=this;this.own(this._mouseoverHandle=x.once(f.domNode,"mouseover",h.hitch(this,"_onPopupHover")));var g=this;b._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){a&&g.focusChild(b);g._cleanUp()},onExecute:h.hitch(this,"_cleanUp",!0),onClose:function(){g._mouseoverHandle&&(g._mouseoverHandle.remove(),delete g._mouseoverHandle)}},
a);this.currentPopupItem=b}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(a.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(b){if(this._hoveredChild&&this._hoveredChild!=
b)this.onItemUnhover(this._hoveredChild);this.set("selected",b)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(b){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);b&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(B,w,q,a,m,h,p,x,g,f){return w("dijit._KeyNavContainer",
[g,f,x],{connectKeyNavHandlers:function(a,f){var b=this._keyNavCodes={},g=h.hitch(this,"focusPrev"),n=h.hitch(this,"focusNext");B.forEach(a,function(a){b[a]=g});B.forEach(f,function(a){b[a]=n});b[m.HOME]=h.hitch(this,"focusFirstChild");b[m.END]=h.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){a.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);B.forEach(this.getChildren(),h.hitch(this,"_startupChild"))},addChild:function(a,
f){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=p.byNode(a))&&a.getParent()==this}})})},
"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(B,w,q,a,m,h,p,x){return w("dijit._KeyNavMixin",x,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);q.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var g=this._keyNavCodes={};g[a.HOME]=m.hitch(this,"focusFirstChild");g[a.END]=m.hitch(this,"focusLastChild");g[this.isLeftToRight()?
a.LEFT_ARROW:a.RIGHT_ARROW]=m.hitch(this,"_onLeftArrow");g[this.isLeftToRight()?a.RIGHT_ARROW:a.LEFT_ARROW]=m.hitch(this,"_onRightArrow");g[a.UP_ARROW]=m.hitch(this,"_onUpArrow");g[a.DOWN_ARROW]=m.hitch(this,"_onDownArrow")}var f=this,g="string"==typeof this.childSelector?this.childSelector:m.hitch(this,"childSelector");this.own(h(this.domNode,"keypress",m.hitch(this,"_onContainerKeypress")),h(this.domNode,"keydown",m.hitch(this,"_onContainerKeydown")),h(this.domNode,"focus",m.hitch(this,"_onContainerFocus")),
h(this.containerNode,h.selector(g,"focusin"),function(a){f._onChildFocus(p.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},
focusChild:function(a,f){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(f?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){q.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(a){q.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,
this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,f,n,u){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,f){var g=a.domNode;a=(a.label||(g.focusNode?g.focusNode.label:"")||g.innerText||g.textContent||
"").replace(/^\s+/,"").substr(0,f.length).toLowerCase();return f.length&&a==f?-1:0},_isFormElement:function(a){return"INPUT"===a.tagName||"TEXTAREA"===a.tagName||"SELECT"===a.tagName||"BUTTON"===a.tagName},_onContainerKeydown:function(g){if(!this._isFormElement(document.activeElement)){var f=this._keyNavCodes[g.keyCode];f?(f(g,this.focusedChild),g.stopPropagation(),g.preventDefault(),this._searchString=""):g.keyCode!=a.SPACE||!this._searchTimer||g.ctrlKey||g.altKey||g.metaKey||(g.stopImmediatePropagation(),
g.preventDefault(),this._keyboardSearch(g," "))}},_onContainerKeypress:function(g){this._isFormElement(document.activeElement)||g.charCode<=a.SPACE||g.ctrlKey||g.altKey||g.metaKey||(g.preventDefault(),g.stopPropagation(),this._keyboardSearch(g,String.fromCharCode(g.charCode).toLowerCase()))},_keyboardSearch:function(a,f){var g=null,u,b=0;m.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=f;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;
u=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var n=this.focusedChild||null;if(1==a||!n)if(n=this._getNextFocusableChild(n,1),!n)return;a=n;do{var h=this._keyboardSearchCompare(n,u);h&&0==b++&&(g=n);if(-1==h){b=-1;break}n=this._getNextFocusableChild(n,1)}while(n&&n!=a)})();this.onKeyboardSearch(g,a,u,b)},_onChildBlur:function(){},_getNextFocusableChild:function(a,f){var g=a;do{if(a)a=this._getNext(a,
f);else if(a=this[0<f?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=g&&a.isFocusable())return a}while(a!=g);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(a,f){if(a)for(a=a.domNode;a;)if((a=a[0>f?"previousSibling":"nextSibling"])&&"getAttribute"in a){var g=p.byNode(a);if(g)return g}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u){p=B("dijit.MenuItem"+(h("dojo-bidi")?"_NoBidi":""),[x,g,f,n],{templateString:u,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var a="",f;f=b.search(/{\S}/);if(0<=f){var a=b.charAt(f+1),g=b.substr(0,f);b=b.substr(f+3);f=g+a+b;b=g+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+a+"\x3c/span\x3e"+b}else f=b;this.domNode.setAttribute("aria-label",f+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",a)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);q.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&q.set(this.accelKeyNode,"id",this.id+"_accel");w.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==h("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(b){}},_setSelected:function(b){a.toggle(this.domNode,
"dijitMenuItemSelected",b)},setLabel:function(b){m.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},setDisabled:function(b){m.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=
b?"":"none",this.accelKeyNode.innerHTML=b,q.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});h("dojo-bidi")&&(p=B("dijit.MenuItem",p,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return p})},"dijit/layout/ScrollingTabController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/_base/lang dojo/on dojo/query dojo/sniff ../registry dojo/text!./templates/ScrollingTabController.html dojo/text!./templates/_ScrollingTabControllerButton.html ./TabController ./utils ../_WidgetsInTemplateMixin ../Menu ../MenuItem ../form/Button ../_HasDropDown dojo/NodeList-dom ../a11yclick".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H){u=w("dijit.layout.ScrollingTabController",[t,E],{baseClass:"dijitTabController dijitScrollingTabController",templateString:u,useMenu:!0,useSlider:!0,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var b=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();this.tabStripClass||(this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+
this.tabPosition.substr(1).replace(/-.*/,"")+"None",q.add(b,"tabStrip-disabled"));q.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);m.set(this.domNode,"visibility","");this._postStartup=!0;this.own(x(this.containerNode,"attrmodified-label, attrmodified-iconclass",p.hitch(this,function(b){this._dim&&this.resize(this._dim)})))},onAddChild:function(b,a){this.inherited(arguments);m.set(this.containerNode,"width",m.get(this.containerNode,"width")+200+"px")},
onRemoveChild:function(b,a){var f=this.pane2button(b.id);this._selectedTab===f.domNode&&(this._selectedTab=null);this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=g("\x3e .tabStripButton",this.domNode).filter(function(b){if(this.useMenu&&b==this._menuBtn.domNode||this.useSlider&&(b==this._rightBtn.domNode||b==this._leftBtn.domNode))return this._btnWidth+=a.getMarginSize(b).w,!0;m.set(b,"display","none");return!1},this)},_getTabsWidth:function(){var b=this.getChildren();
if(b.length){var a=b[this.isLeftToRight()?0:b.length-1].domNode,b=b[this.isLeftToRight()?b.length-1:0].domNode;return b.offsetLeft+b.offsetWidth-a.offsetLeft}return 0},_enableBtn:function(b){var a=this._getTabsWidth();b=b||m.get(this.scrollNode,"width");return 0<a&&b<a},resize:function(b){this._dim=b;this.scrollNode.style.height="auto";var f=this._contentBox=D.marginBox2contentBox(this.domNode,{h:0,w:b.w});f.h=this.scrollNode.offsetHeight;a.setContentSize(this.domNode,f);f=this._enableBtn(this._contentBox.w);
this._buttons.style("display",f?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";D.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);this._selectedTab&&(this._anim&&"playing"==this._anim.status()&&this._anim.stop(),this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab()));this._setButtonClass(this._getScroll());
this._postResize=!0;return{h:this._contentBox.h,w:b.w}},_getScroll:function(){return this.isLeftToRight()||8>f("ie")||(f("trident"),0)||f("webkit")?this.scrollNode.scrollLeft:m.get(this.containerNode,"width")-m.get(this.scrollNode,"width")+(f("trident")||f("edge")?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(b){if(this.isLeftToRight()||8>f("ie")||(f("trident"),0)||f("webkit"))return b;var a=m.get(this.containerNode,"width")-m.get(this.scrollNode,"width");return(f("trident")||f("edge")?
-1:1)*(b-a)},onSelectChild:function(b,a){var f=this.pane2button(b.id);if(f){var g=f.domNode;if(g!=this._selectedTab&&(this._selectedTab=g,this._postResize)){var n=this._getScroll();n>g.offsetLeft||n+m.get(this.scrollNode,"width")<g.offsetLeft+m.get(g,"width")?(g=this.createSmoothScroll(),a&&(g.onEnd=function(){f.focus()}),g.play()):a&&f.focus()}this.inherited(arguments)}},_getScrollBounds:function(){var b=this.getChildren(),a=m.get(this.scrollNode,"width"),f=m.get(this.containerNode,"width")-a,g=
this._getTabsWidth();if(b.length&&g>a)return{min:this.isLeftToRight()?0:b[b.length-1].domNode.offsetLeft,max:this.isLeftToRight()?b[b.length-1].domNode.offsetLeft+b[b.length-1].domNode.offsetWidth-a:f};b=this.isLeftToRight()?0:f;return{min:b,max:b}},_getScrollForSelectedTab:function(){var b=this._selectedTab,a=m.get(this.scrollNode,"width"),f=this._getScrollBounds(),b=b.offsetLeft+m.get(b,"width")/2-a/2;return b=Math.min(Math.max(b,f.min),f.max)},createSmoothScroll:function(b){if(0<arguments.length){var a=
this._getScrollBounds();b=Math.min(Math.max(b,a.min),a.max)}else b=this._getScrollForSelectedTab();this._anim&&"playing"==this._anim.status()&&this._anim.stop();var f=this,g=this.scrollNode,n=new h.Animation({beforeBegin:function(){this.curve&&delete this.curve;var a=g.scrollLeft,u=f._convertToScrollLeft(b);n.curve=new h._Line(a,u)},onAnimate:function(b){g.scrollLeft=b}});this._anim=n;this._setButtonClass(b);return n},_getBtnNode:function(b){for(b=b.target;b&&!q.contains(b,"tabStripButton");)b=b.parentNode;
return b},doSlideRight:function(b){this.doSlide(1,this._getBtnNode(b))},doSlideLeft:function(b){this.doSlide(-1,this._getBtnNode(b))},doSlide:function(b,a){a&&q.contains(a,"dijitTabDisabled")||(b*=.75*m.get(this.scrollNode,"width"),b=this._getScroll()+b,this._setButtonClass(b),this.createSmoothScroll(b).play())},_setButtonClass:function(b){var a=this._getScrollBounds();this._leftBtn.set("disabled",b<=a.min);this._rightBtn.set("disabled",b>=a.max)}});b=w("dijit.layout._ScrollingTabControllerButtonMixin",
null,{baseClass:"dijitTab tabStripButton",templateString:b,tabIndex:"",isFocusable:function(){return!1}});w("dijit.layout._ScrollingTabControllerButton",[F,b]);w("dijit.layout._ScrollingTabControllerMenuButton",[F,H,b],{containerId:"",tabIndex:"-1",isLoaded:function(){return!1},loadDropDown:function(b){this.dropDown=new C({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var a=n.byId(this.containerId);B.forEach(a.getChildren(),function(b){var f=
new A({id:b.id+"_stcMi",label:b.title,iconClass:b.iconClass,disabled:b.disabled,ownerDocument:this.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir||a.textDir,onClick:function(){a.selectChild(b)}});this.dropDown.addChild(f)},this);b()},closeDropDown:function(b){this.inherited(arguments);this.dropDown&&(this._popupStateNode.removeAttribute("aria-owns"),this.dropDown.destroyRecursive(),delete this.dropDown)}});return u})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E){return B("dijit._HasDropDown",E,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(b){this.disabled||this.readOnly||("MSPointerDown"!=b.type&&b.preventDefault(),this.own(n.once(this.ownerDocument,u.release,f.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var f=
this.dropDown,g=!1;if(a&&this._opened){var n=h.position(this._buttonNode,!0);if(!(a.pageX>=n.x&&a.pageX<=n.x+n.w&&a.pageY>=n.y&&a.pageY<=n.y+n.h)){for(n=a.target;n&&!g;)m.contains(n,"dijitPopup")?g=!0:n=n.parentNode;if(g){n=a.target;if(f.onItemClick){for(var u;n&&!(u=b.byNode(n));)n=n.parentNode;if(u&&u.onClick&&u.getParent)u.getParent().onItemClick(u,a)}return}}}this._opened?f.focus&&(!1!==f.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){f.focus();
delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(b){this._stopClickEvents&&(b.stopPropagation(),b.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var b={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";m.add(this._arrowWrapperNode||this._buttonNode,"dijit"+b+"ArrowButton")},postCreate:function(){this.inherited(arguments);var b=this.focusNode||this.domNode;this.own(n(this._buttonNode,u.press,f.hitch(this,"_onDropDownMouseDown")),n(this._buttonNode,"click",f.hitch(this,"_onDropDownClick")),n(b,"keydown",f.hitch(this,"_onKey")),n(b,"keyup",f.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),
delete this.dropDown);this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var a=this.dropDown,f=b.target;a&&this._opened&&a.handleKey&&!1===a.handleKey(b)?(b.stopPropagation(),b.preventDefault()):a&&this._opened&&b.keyCode==g.ESCAPE?(this.closeDropDown(),b.stopPropagation(),b.preventDefault()):!this._opened&&(b.keyCode==g.DOWN_ARROW||(b.keyCode==g.ENTER||b.keyCode==g.SPACE&&(!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey))&&("input"!==(f.tagName||"").toLowerCase()||
f.type&&"text"!==f.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,b.stopPropagation(),b.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var b=this.dropDown;b&&b.focus&&this.defer(f.hitch(b,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(b){b()},loadAndOpenDropDown:function(){var b=new w,a=f.hitch(this,function(){this.openDropDown();b.resolve(this.dropDown)});
this.isLoaded()?a():this.loadDropDown(a);return b},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var b=this.dropDown,g=b.domNode,n=this._aroundNode||this.domNode,u=this,t=D.open({parent:this,popup:b,around:n,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){u.closeDropDown(!0)},onCancel:function(){u.closeDropDown(!0)},onClose:function(){a.set(u._popupStateNode,"popupActive",
!1);m.remove(u._popupStateNode,"dijitHasDropDownOpen");u._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&n.offsetWidth>b._popupWrapper.offsetWidth){var n=n.offsetWidth-b._popupWrapper.offsetWidth,p={w:b.domNode.offsetWidth+n};this._origStyle=g.style.cssText;f.isFunction(b.resize)?b.resize(p):h.setMarginBox(g,p);"R"==t.corner[1]&&(b._popupWrapper.style.left=b._popupWrapper.style.left.replace("px","")-n+"px")}a.set(this._popupStateNode,"popupActive","true");m.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",b.id);"presentation"===g.getAttribute("role")||g.getAttribute("aria-labelledby")||g.setAttribute("aria-labelledby",this.id);return t},closeDropDown:function(b){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),b&&this.focus&&this.focus(),D.close(this.dropDown),
this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"esri/widgets/Search":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search dojo/keys dojo/query dojo/regexp ../PopupTemplate ../core/Handles ../core/lang ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A){var F=/<[a-z/][\s\S]*>/i;return function(D){function H(b){b=D.call(this)||this;b._handles=new n;b._inputNode=null;b._sourceMenuButtonNode=null;b._sourceListNode=null;b._suggestionListNode=null;b._searchResultRenderer=new E({container:document.createElement("div")});b._suggestPromise=null;b._popupTemplate=new f({title:h.searchResult,content:b._renderSearchResultsContent.bind(b)});b._relatedTarget=null;b.activeMenu="none";b.activeSource=null;b.activeSourceIndex=
null;b.allPlaceholder=null;b.autoNavigate=null;b.autoSelect=null;b.goToOverride=null;b.iconClass="esri-icon-search";b.includeDefaultSources=null;b.label=h.widgetLabel;b.locationEnabled=null;b.locationToAddressDistance=null;b.maxResults=null;b.maxSuggestions=null;b.minSuggestCharacters=null;b.popupEnabled=null;b.popupTemplate=null;b.portal=null;b.resultGraphic=null;b.resultGraphicEnabled=null;b.results=null;b.searchAllEnabled=null;b.searchTerm=null;b.selectedResult=null;b.sources=null;b.suggestions=
null;b.suggestionsEnabled=null;b.view=null;b.viewModel=new C;return b}q(H,D);H.prototype.postInitialize=function(){var a=this;this.viewModel.popupTemplate=this._popupTemplate;this.own(b.watch(this,"searchTerm",function(b){if(b&&"warning"===a.activeMenu||!b&&!a.get("viewModel.selectedSuggestion.location"))a.activeMenu="none"}),b.on(this,"viewModel.allSources","change",function(){return a._watchSourceChanges()}))};H.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();
this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};H.prototype.clear=function(){};H.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};H.prototype.blur=function(b){this._inputNode&&(this._inputNode.blur(),this._inputBlur(b),this.emit("search-blur"))};H.prototype.search=function(b){var a=this;this.activeMenu="none";this._cancelSuggest();
return this.viewModel.search(b).catch(function(b){a.activeMenu="none";return b}).then(function(b){a.activeMenu=b.numResults?"none":"warning";return b})};H.prototype.suggest=function(b){var a=this;this._cancelSuggest();return this._suggestPromise=b=this.viewModel.suggest(b).then(function(b){b.numResults&&(a.activeMenu="suggestion");a._scrollToTopSuggestion();return b}).catch(function(){return null})};H.prototype.render=function(){var b=this,a,f,g=this.viewModel,n=g.activeSourceIndex,t=g.suggestions,
p=g.maxInputLength,D=g.placeholder,E=g.searchTerm,x=g.searchAllEnabled,F=g.allSources,q=this._getSourceName(n),H=(""+E).trim(),w=this.activeMenu,l=this.id,R=this.viewModel.state,z=this.id+"-suggest-menu",p=A.tsx("input",{bind:this,placeholder:D,"aria-label":h.searchButtonTitle,maxlength:p,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:E,"aria-haspopup":"true","aria-owns":z,role:"textbox",onkeydown:this._handleInputKeydown,
onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:A.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:E?"":D}),p=A.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},p),D=E?A.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button",
"esri-widget--button"),tabindex:"0",title:h.clearButtonTitle,onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},A.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,d=this.locationEnabled&&!H?A.tsx("ul",{key:"esri-search__suggestion-list-current-location",class:this.classes("esri-search__suggestions-list","esri-search__suggestions-list--current-location")},A.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,
onkeyup:this._handleSuggestionKeyup,role:"menuitem",tabindex:"-1"},A.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",h.useCurrentLocation)):null,c=1<F.length&&n===C.ALL_INDEX,n=t?t.map(function(e,k){var d=e.sourceIndex,v=e.results.length;k=v&&c?b._getSuggestionHeaderNode(d):null;e=e.results.map(function(c,e){return b._getSuggestionNode(c,e,d)});e=v?A.tsx("ul",{key:"esri-search__suggestion-list-"+d,class:"esri-search__suggestions-list"},e):null;return[k,
e]}):null,z=A.tsx("div",{id:z,"aria-expanded":"suggestion"===w,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:A.storeNode,"data-node-ref":"_suggestionListNode"},d,n),z=A.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},p,z,D),n=A.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:h.searchButtonTitle,class:this.classes("esri-search__submit-button","esri-widget--button"),
tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},A.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-search"}),A.tsx("span",{class:"esri-icon-font-fallback-text"},h.searchButtonTitle)),E=H?u.substitute({value:'"'+E+'"'},h.noResultsFoundForValue):h.noResultsFound,E=g.get("selectedSuggestion.location")||H?A.tsx("div",{key:"esri-search__no_results"},A.tsx("div",{class:"esri-search__warning-header"},h.noResults),A.tsx("div",{class:"esri-search__warning-text"},
E)):null,g=g.get("selectedSuggestion.location")||H?null:A.tsx("div",{key:"esri-search__empty-search"},A.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),A.tsx("span",{class:"esri-search__no-value-text"},h.emptyValue)),g=A.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},A.tsx("div",{class:"esri-search__warning-body"},E,g)),H=1<F.length,F=F&&F.toArray(),x=x?this._getSourceNode(C.ALL_INDEX):null,l=l+"-source-menu",q=H?A.tsx("div",
{key:"esri-search__source-menu-button",bind:this,role:"button",title:h.searchIn,"aria-haspopup":"true","aria-expanded":"source"===w,"aria-controls":l,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:A.storeNode,"data-node-ref":"_sourceMenuButtonNode"},A.tsx("span",{"aria-hidden":"true",role:"presentation",
class:"esri-icon-down-arrow esri-search__sources-button--down"}),A.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),A.tsx("span",{class:"esri-search__source-name"},q)):null,x=H?A.tsx("ul",{bind:this,afterCreate:A.storeNode,"data-node-ref":"_sourceListNode"},x,F.map(function(c,k){return b._getSourceNode(k)})):null,l=A.tsx("div",{id:l,key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu"),role:"menu"},
x),w=(a={},a["esri-search--multiple-sources"]=H,a["esri-search--loading"]="loading"===R,a["esri-search--searching"]="searching"===R,a["esri-search--warning"]="warning"===w,a["esri-search--sources"]="source"===w,a["esri-search--show-suggestions"]="suggestion"===w,a);a=(f={},f["esri-disabled"]="disabled"===R,f);f="loading"===R?A.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},A.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-widget__loader-animation"}),
A.tsx("span",{class:"esri-icon-font-fallback-text"},h.searchButtonTitle),A.tsx("span",{class:"esri-widget__loader-text"},m.loading)):A.tsx("div",{role:"presentation",class:this.classes(w,"esri-search__container"),key:"base-container"},q,l,z,n,g);return A.tsx("div",{class:this.classes("esri-search esri-widget",a)},f)};H.prototype._watchSourceChanges=function(){var a=this,f=this._handles,g=this.viewModel.allSources;f.remove("sources");g.forEach(function(g){return f.add(b.watch(g,"name",function(){return a.scheduleRender()}),
"sources")})};H.prototype._handleSourceMenuButtonKeydown=function(b){var a=b.keyCode;a===p.UP_ARROW||a===p.DOWN_ARROW||a===p.END||a===p.HOME?(b.preventDefault(),b.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(b)};H.prototype._handleSourcesMenuToggleClick=function(b){var a="source"===this.activeMenu;this.activeMenu=a?"none":"source";this.renderNow();a?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(a=this._sourceListNode?x("li",this._sourceListNode):
null)&&(b=b.keyCode===p.END?a[a.length-1]:a[0])&&b.focus()};H.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};H.prototype._handleSearchButtonClick=function(){this.search()};H.prototype._handleSuggestionClick=function(b){if(b=b.currentTarget["data-suggestion"])this._focus(),this.search(b)};H.prototype._handleUseCurrentLocationClick=function(){this._focus("none");this.viewModel.searchNearby()};H.prototype._handleSourceClick=function(b){this.viewModel.activeSourceIndex=
b.currentTarget["data-source-index"];this._focus("none")};H.prototype._sourcesButtonBlur=function(b){this._removeActiveMenu(b&&b.relatedTarget,this._sourceListNode)};H.prototype._inputBlur=function(b){b=b&&b.relatedTarget;this._removeActiveMenu(b?b:this._relatedTarget,this._suggestionListNode)};H.prototype._storeRelatedTarget=function(b){this._relatedTarget=b.relatedTarget};H.prototype._clearButtonFocus=function(){this.activeMenu="none"};H.prototype._removeActiveMenu=function(b,a){b&&a&&a.contains(b)||
(this.activeMenu="none")};H.prototype._cancelSuggest=function(){var b=this._suggestPromise;b&&b.cancel();this._suggestPromise=null};H.prototype._handleInputKeydown=function(b){var a=b.keyCode;(a===p.TAB||a===p.ESCAPE||b.shiftKey&&a===p.TAB)&&this._cancelSuggest()};H.prototype._handleInputKeyup=function(b){var a=b.keyCode,f=b.ctrlKey||b.metaKey||a===p.copyKey||a===p.LEFT_ARROW||a===p.RIGHT_ARROW||a===p.ENTER||a===p.SHIFT,g=this._suggestionListNode?x("li",this._suggestionListNode):null;f||(a===p.TAB||
a===p.ESCAPE||b.shiftKey&&a===p.TAB?(this._cancelSuggest(),a===p.ESCAPE&&(this.activeMenu="none")):a!==p.UP_ARROW&&a!==p.DOWN_ARROW||!g?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",b.stopPropagation(),b.preventDefault(),this._cancelSuggest(),(b=g[a===p.UP_ARROW?g.length-1:0])&&b.focus()))};H.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};H.prototype._handleInputClick=function(b){this.activeMenu="suggestion"};
H.prototype._handleInputPaste=function(b){var a=this.get("viewModel.searchTerm");b=b.target;a!==b.value&&(this.viewModel.searchTerm=b.value);a&&this.suggest()};H.prototype._handleSourceMenuButtonKeyup=function(b){var a=b.keyCode;if(a===p.UP_ARROW||a===p.DOWN_ARROW||a===p.HOME||a===p.END)b.stopPropagation(),b.preventDefault(),(b=this._sourceListNode?x("li",this._sourceListNode):null)&&(a=b[a===p.UP_ARROW||a===p.END?b.length-1:0])&&a.focus()};H.prototype._handleSourceKeyup=function(b){var a=b.target,
f=this._sourceListNode?x("li",this._sourceListNode):null,g=b.keyCode;if(g===p.ESCAPE)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(f){a=f.indexOf(a);if(g===p.HOME||g===p.END||g===p.UP_ARROW||g===p.DOWN_ARROW)b.stopPropagation(),b.preventDefault();g===p.HOME?(f=f[0])&&f.focus():g===p.END?(f=f[f.length-1])&&f.focus():g===p.UP_ARROW?(b=a-1,(f=0>b?this._sourceMenuButtonNode:f[b])&&f.focus()):g===p.DOWN_ARROW&&(b=a+1,(f=b>=f.length?this._sourceMenuButtonNode:
f[b])&&f.focus())}};H.prototype._handleSuggestionKeyup=function(b){var a=b.target,f=this._suggestionListNode?x("li",this._suggestionListNode):null,a=f.indexOf(a),g=b.keyCode;this._cancelSuggest();if(g===p.BACKSPACE||g===p.DELETE)this._focus();else if(g===p.ESCAPE)this._focus("none");else if(f){if(g===p.HOME||g===p.END||g===p.UP_ARROW||g===p.DOWN_ARROW)b.stopPropagation(),b.preventDefault();g===p.HOME&&(b=f[0])&&b.focus();g===p.END&&(b=f[f.length-1])&&b.focus();g===p.UP_ARROW?(--a,(f=0>a?f[f.length-
1]:f[a])&&f.focus()):g===p.DOWN_ARROW&&(a+=1,(f=a>=f.length?f[0]:f[a])&&f.focus())}};H.prototype._focus=function(b){this.focus();b&&(this.activeMenu=b)};H.prototype._formSubmit=function(b){b.preventDefault();this.search()};H.prototype._getSourceName=function(b){var a=this.viewModel.allSources.getItemAt(b);return b===C.ALL_INDEX?h.all:a?a.name||h.untitledSource:h.untitledSource};H.prototype._getSuggestionHeaderNode=function(b){var a=this._getSourceName(b);return A.tsx("div",{key:"esri-search__suggestion-header-"+
b,class:"esri-header"},a)};H.prototype._splitResult=function(b,a){a=g.escapeString(a);return b.replace(new RegExp("(^|)("+a+")(|$)","ig"),"$1|$2|$3").split("|")};H.prototype._getSuggestionNode=function(b,a,f){if(f=this.viewModel.searchTerm){var g=b.text||h.untitledResult,n=[];if(F.test(g))n.push(A.tsx("div",{innerHTML:g}));else{var g=this._splitResult(g,f),u=f.toLowerCase();g.forEach(function(b,a){b&&b.length&&(b.toLowerCase()===u?n.push(A.tsx("strong",{key:a},b)):n.push(b))})}return A.tsx("li",{bind:this,
onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+a,"data-suggestion":b,role:"menuitem",tabindex:"-1"},n)}};H.prototype._getSourceNode=function(b){var a,f=(a={},a["esri-search__source--active"]=b===this.viewModel.activeSourceIndex,a);return A.tsx("li",{bind:this,key:"esri-search__source-"+b,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":b,
role:"menuitem",class:this.classes("esri-search__source",f),tabindex:"-1"},this._getSourceName(b))};H.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};a([t.property(),A.renderable()],H.prototype,"activeMenu",void 0);a([t.aliasOf("viewModel.activeSource"),A.renderable()],H.prototype,"activeSource",void 0);a([t.aliasOf("viewModel.activeSourceIndex"),A.renderable()],
H.prototype,"activeSourceIndex",void 0);a([t.aliasOf("viewModel.allPlaceholder"),A.renderable()],H.prototype,"allPlaceholder",void 0);a([t.aliasOf("viewModel.autoNavigate")],H.prototype,"autoNavigate",void 0);a([t.aliasOf("viewModel.autoSelect")],H.prototype,"autoSelect",void 0);a([t.aliasOf("viewModel.goToOverride")],H.prototype,"goToOverride",void 0);a([t.property()],H.prototype,"iconClass",void 0);a([t.aliasOf("viewModel.includeDefaultSources")],H.prototype,"includeDefaultSources",void 0);a([t.property()],
H.prototype,"label",void 0);a([A.renderable(),t.aliasOf("viewModel.locationEnabled")],H.prototype,"locationEnabled",void 0);a([t.aliasOf("viewModel.locationToAddressDistance")],H.prototype,"locationToAddressDistance",void 0);a([t.aliasOf("viewModel.maxResults")],H.prototype,"maxResults",void 0);a([t.aliasOf("viewModel.maxSuggestions")],H.prototype,"maxSuggestions",void 0);a([t.aliasOf("viewModel.minSuggestCharacters")],H.prototype,"minSuggestCharacters",void 0);a([t.aliasOf("viewModel.popupEnabled")],
H.prototype,"popupEnabled",void 0);a([t.aliasOf("viewModel.popupTemplate")],H.prototype,"popupTemplate",void 0);a([t.aliasOf("viewModel.portal")],H.prototype,"portal",void 0);a([t.aliasOf("viewModel.resultGraphic")],H.prototype,"resultGraphic",void 0);a([t.aliasOf("viewModel.resultGraphicEnabled")],H.prototype,"resultGraphicEnabled",void 0);a([t.aliasOf("viewModel.results"),A.renderable()],H.prototype,"results",void 0);a([t.aliasOf("viewModel.searchAllEnabled"),A.renderable()],H.prototype,"searchAllEnabled",
void 0);a([t.aliasOf("viewModel.searchTerm"),A.renderable()],H.prototype,"searchTerm",void 0);a([t.aliasOf("viewModel.selectedResult")],H.prototype,"selectedResult",void 0);a([t.aliasOf("viewModel.sources")],H.prototype,"sources",void 0);a([t.aliasOf("viewModel.suggestions"),A.renderable()],H.prototype,"suggestions",void 0);a([t.aliasOf("viewModel.suggestionsEnabled")],H.prototype,"suggestionsEnabled",void 0);a([t.aliasOf("viewModel.view"),A.renderable()],H.prototype,"view",void 0);a([A.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),
t.property({type:C}),A.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],H.prototype,"viewModel",void 0);a([t.aliasOf("viewModel.clear")],H.prototype,"clear",null);a([A.accessibleHandler()],H.prototype,"_handleSourcesMenuToggleClick",null);a([A.accessibleHandler()],H.prototype,"_handleClearButtonClick",null);a([A.accessibleHandler()],H.prototype,"_handleSearchButtonClick",null);a([A.accessibleHandler()],H.prototype,"_handleSuggestionClick",
null);a([A.accessibleHandler()],H.prototype,"_handleUseCurrentLocationClick",null);a([A.accessibleHandler()],H.prototype,"_handleSourceClick",null);return H=a([t.subclass("esri.widgets.Search")],H)}(t.declared(D))})},"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(B,
w,q,a,m,h,p,x,g){return function(f){function n(a){a=f.call(this)||this;a.showMoreResultsOpen=!1;a.viewModel=null;return a}q(n,f);n.prototype.render=function(){var a=this,b,f=this.get("viewModel.selectedResult"),n=this.get("viewModel.results"),f=f&&f.name||"",h=1<this._countResults(n),C=h&&n.map(function(b){return a._moreResultsList(b)}),n=h?g.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},g.tsx("a",{class:"esri-widget__anchor",href:"#",
bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults)):null,h=h?g.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},C):null,C=(b={},b["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,b);return g.tsx("div",{class:"esri-search-result-renderer esri-widget"},g.tsx("div",{key:"esri-search-renderer__container",
class:this.classes("esri-search-result-renderer__more-results",C)},g.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},f),g.tsx("div",{key:"esri-search-renderer__more-results"},n,h)))};n.prototype._showMoreResultsClick=function(a){a.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.get("viewModel.view.popup"))&&a.reposition()};n.prototype._selectResultClick=function(a){a.preventDefault();a=a.currentTarget["data-result"];
this.viewModel&&this.viewModel.select(a)};n.prototype._moreResultsList=function(a){var b=this,f=a.results,n=f.length,u=!!n,h=this.get("viewModel.selectedResult"),n=1===n&&f[0]===h,h=this._getSourceName(a.source,a.sourceIndex),h=1<this.get("viewModel.results").length&&!n?g.tsx("div",{key:"esri-search-result-renderer__header-"+a.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},h):null,f=u&&f.map(function(a,f){return b._moreResultsListItem(a,f)}),f=u&&!n?g.tsx("ul",{key:"esri-search-result-renderer__list-"+
a.sourceIndex},f):null;return u?g.tsx("div",{key:"esri-search-result-renderer__results-"+a.sourceIndex},h,f):null};n.prototype._moreResultsListItem=function(a,b){var f=this.get("viewModel.selectedResult");return a!==f?g.tsx("li",{key:"esri-search-result-renderer__list-item-"+b},g.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null};n.prototype._getSourceName=function(a,b){return b===x.ALL_INDEX?
m.all:a.name};n.prototype._countResults=function(a){return a?a.reduce(function(b,a){return b+a.results.length},0):0};a([g.renderable(),h.property()],n.prototype,"showMoreResultsOpen",void 0);a([h.property(),g.renderable(["viewModel.results","viewModel.selectedResult"])],n.prototype,"viewModel",void 0);a([g.accessibleHandler()],n.prototype,"_showMoreResultsClick",null);a([g.accessibleHandler()],n.prototype,"_selectResultClick",null);return n=a([h.subclass("esri.widgets.Search.SearchResultRenderer")],
n)}(h.declared(p))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../styles/basic ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./FeatureLayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I,M,N,P,S,O,W,Z,T,Y,aa){function V(c,e){return c.hasOwnProperty(e)&&null!=c[e]&&""!==c[e]}var l=D.getLogger("esri.widgets.Search.SearchViewModel"),R=g.ofType({key:function(c){return c.featureLayer?"feature-layer":"locator"},base:Z,typeMap:{"feature-layer":O,locator:W}}),z=H.WGS84,d=/<(?:.|\s)*?>/g;return function(c){function e(e){e=c.call(this)||this;e._handles=new b;e._gotoPromise=null;e._searching=null;e._loadingDefaultSources=null;e.activeSourceIndex=
0;e.allPlaceholder=m.allPlaceholder;e.autoNavigate=!0;e.autoSelect=!0;e.defaultSources=new R;e.defaultSymbol=new y({url:B.toUrl(t("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});e.includeDefaultSources=!0;e.locationToAddressDistance=1500;e.maxInputLength=128;e.maxResults=6;e.maxSuggestions=6;e.minSuggestCharacters=1;e.popupEnabled=!0;e.popupTemplate=new p({title:m.searchResult,content:"{Match_addr}"});e.portal=Q.getDefault();
e.resultGraphicEnabled=!0;e.resultGraphic=null;e.results=null;e.selectedSuggestion=null;e.searchAllEnabled=!0;e.selectedResult=null;e.sources=new R;e.suggestionDelay=150;e.suggestions=null;e.suggestionsEnabled=!0;e.view=null;return e}q(e,c);e.prototype.initialize=function(){var c=this;this._handles.add([C.init(this,"searchAllEnabled",function(){return c._setDefaultActiveSourceIndex()}),C.init(this,"portal",function(c){c&&!c.loaded&&c.load()}),C.init(this,["view","portal","includeDefaultSources"],
function(){return c._loadDefaultSources()}),C.on(this,["defaultSources","sources"],"change",function(){return c.notifyChange("allSources")}),C.on(this,"allSources","change",function(e){return c._allSourcesChanged(e)})])};e.prototype.destroy=function(){this.clearGraphics();this._cancelLoadingDefaultSources();this._clearLoadingDefaultSources();this._handles.destroy();this._handles=null};Object.defineProperty(e.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||
null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"allSources",{get:function(){var c=this.sources,e=this.defaultSources,d=this.includeDefaultSources,c="function"===typeof d?d.call(null,{sources:c,defaultSources:e}):d?e.concat(c):c,l=this._get("allSources")||new R;l.removeAll();c.filter(Boolean).forEach(function(c){return l.add(c)});return l},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||
u.supported()},set:function(c){if(void 0===c)this._clearOverride("locationEnabled");else{var e=u.supported();if(c&&!e){var k=new f("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});l.error(k)}this._override("locationEnabled",c&&e)}},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"placeholder",{get:function(){var c=this.activeSourceIndex,e=this.allPlaceholder,e=void 0===e?m.allPlaceholder:e;return-1===c?e:(c=this.allSources.getItemAt(c))?
c.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",c||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===
this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});e.prototype.clear=function(){this.searchTerm=""};e.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};e.prototype.search=function(c){var e=this;this.emit("search-start");this.clearGraphics();var k=this._createSuggestionForSearch(c);this._searching=c=this._whenViewAndPortalLoaded().then(function(){return e._getResultsFromSources(k).then(function(c){var r=
{activeSourceIndex:e.activeSourceIndex,searchTerm:k.text,numResults:0,numErrors:0,errors:[],results:[]};e._formatResponse(r,c,k);c=e._getFirstResult(r.results);var v=(k.location&&c?c.name:k.text).replace(d,"");e._set("searchTerm",v);(k.key&&"number"===typeof k.sourceIndex||k.location)&&e._set("selectedSuggestion",k);e._set("results",r.results);e.emit("search-complete",r);return e._selectFirstResult(c).then(function(){return r})})});this.notifyChange("state");c.then(function(){return e._clearSearching()}).catch(function(){return e._clearSearching()});
return c};e.prototype.searchNearby=function(){var c=this;if(!this.locationEnabled){var e=new f("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});l.error(e);return E.reject(e)}this._searching=e=u.getCurrentPosition().then(function(e){return u.positionToPoint(e,c.view).then(function(e){return c.search(e)})});this.notifyChange("state");e.then(function(){return c._clearSearching()}).catch(function(){return c._clearSearching()});return e};e.prototype.select=
function(c){var e=this;this.clearGraphics();if(!c){var k=new f("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});l.error(k);return E.reject(k)}var d=this.view,J=V(c,"sourceIndex")?c.sourceIndex:this._getSourceIndexOfResult(c),L=this.allSources.getItemAt(J);if(!L)return k=new f("select:missing-source","Cannot select without a source.",{source:L}),l.error(k),E.reject(k);var k=L instanceof O?this._getSourcePopupTemplate(L):null,z=L.resultSymbol||this._getDefaultSymbol(c),
b=V(L,"resultGraphicEnabled")?L.resultGraphicEnabled:this.resultGraphicEnabled,a=V(L,"autoNavigate")?L.autoNavigate:this.autoNavigate,g=V(L,"popupEnabled")?L.popupEnabled:this.popupEnabled,n=g?k||this.popupTemplate:null,u=c.feature;if(!u)return k=new f("select:missing-feature","Cannot select without a feature.",{feature:u}),l.error(k),E.reject(k);var A=u.attributes,t=u.geometry,C=u.layer,y=u.sourceLayer,m=T.getPointFromGeometry(t),k={layerViewQuery:this._getHighlightLayerView(u),elevationQuery:d&&
m?T.getPointWithElevation(m,d).catch(function(){return m}):E.resolve(m)};return E.eachAlways(k).then(function(k){var r=k.layerViewQuery.value,v=k.elevationQuery.value;z instanceof P&&(z.text=c.name);k=d&&a?e._getGoToTarget(c,L):null;return(k?e._goToSearchResult(k):E.resolve()).then(function(){e._gotoPromise=null;var k=r?u:new h({geometry:t,symbol:z,attributes:A,layer:C,sourceLayer:y,popupTemplate:n});r?e._highlightFeature({graphic:k,layerView:r}):b&&d&&d.graphics.push(k);g&&e.get("view.popup")&&k.getEffectivePopupTemplate()&&
d.popup.open({features:[k],location:v});e._set("selectedResult",c);e._set("resultGraphic",k);e.emit("select-result",{result:c,source:L,sourceIndex:J});return c})})};e.prototype.suggest=function(c,e){var k=this,d=c||this.searchTerm;this.emit("suggest-start",{searchTerm:d});return this._suggestTimer(e).then(function(){return k._suggestImmediate(d).then(function(c){k._set("suggestions",c.results);k.emit("suggest-complete",c);return c})})};e.prototype._cancelLoadingDefaultSources=function(){var c=this._loadingDefaultSources;
c&&c.cancel()};e.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};e.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};e.prototype._convertHelperServices=function(){var c=this.get("portal.helperServices.geocode");return c?c.map(function(c){if(!1!==c.placefinding&&(c=W.fromJSON(c),Y.isArcGISWorldGeocoder(c.get("locator.url"))&&c.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr",
"City"],localSearchOptions:{minScale:3E5,distance:5E4},placeholder:m.placeholder}),c.singleLineFieldName))return c}).filter(Boolean):[]};e.prototype._convertApplicationProperties=function(){var c=this,e=this.get("view.map.applicationProperties.viewing.search"),d=this.get("view.map");if(!d||!e)return[];var l=e.hintText;return e.enabled?e.layers.map(function(e){var k=d.findLayerById(e.id);if(k){e=c._getLayerJSON(e);var r=O.fromJSON(e);r.placeholder=l;c._getFeatureLayer(k,e).then(function(c){r.featureLayer=
c});return r}}).filter(Boolean):[]};e.prototype._getSubFeatureLayer=function(c,e){return c&&c.allSublayers?(c=c.allSublayers.getItemAt(e.subLayer))?E.resolve(c.createFeatureLayer()):E.reject():E.reject()};e.prototype._getFeatureLayer=function(c,e){var k=this;if("feature"===c.type||"scene"===c.type)return E.resolve(c);if("map-image"===c.type)return c.load().then(function(){return k._getSubFeatureLayer(c,e).catch(function(){var e=new f("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",
{layer:c});l.error(e);return null})})};e.prototype._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};e.prototype._updateDefaultSources=function(){var c=this.defaultSources,e=this.includeDefaultSources;c.removeAll();e&&c.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));this.notifyChange("allSources")};e.prototype._clear=function(){this._gotoPromise&&(this._gotoPromise.cancel(),this._gotoPromise=null);this._set("results",null);this._set("suggestions",
null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};e.prototype._closePopup=function(){var c=this.get("view.popup"),e=this.resultGraphic;if(c&&e){var d=c.selectedFeature;d&&d===e&&c.close()}};e.prototype._suggestTimer=function(c){return E.after(null!=c?c:this.suggestionDelay)};e.prototype._createLocationForSearch=function(c){if(c instanceof h)return T.getPointFromGeometry(c.geometry);if(c instanceof F)return c;if(Array.isArray(c)&&2===c.length)return new F({longitude:c[0],
latitude:c[1]})};e.prototype._createSuggestionForSearch=function(c){if(c&&V(c,"key")&&V(c,"text")&&V(c,"sourceIndex"))return c;var e=this._createLocationForSearch(c)||null,k="string"===typeof c?c:this.searchTerm,d=this.selectedSuggestion,l=this.selectedResult,L=(c=!c&&d&&l)&&d.location;return c&&d.key===l.key&&d.sourceIndex===l.sourceIndex||L?d:{location:e,text:e?"":k,sourceIndex:null,key:null}};e.prototype._getFirstResult=function(c){var e=null;c&&c.some(function(c){c=c.results[0];var k=!!c;k&&(e=
c);return k});return e};e.prototype._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):E.resolve()};e.prototype._suggestImmediate=function(c){var e=this;return this._whenViewAndPortalLoaded().then(function(){return e._getSuggestionsFromSources(c)}).then(function(k){var d={activeSourceIndex:e.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};e._formatResponse(d,k);return d})};e.prototype._formatSourceResponse=function(c,e,d){var k=e&&e.value||[];e=e&&
e.error;var r=this.allSources.getItemAt(d);e?(c.errors.push({sourceIndex:d,source:r,error:e}),c.numErrors++):(c.results.push({sourceIndex:d,source:r,results:k}),c.numResults+=k.length)};e.prototype._formatResponse=function(c,e,d){var k=this;if(e)if(-1===c.activeSourceIndex){var r=d&&V(d,"sourceIndex")&&-1!==d.sourceIndex?d.sourceIndex:void 0;e.forEach(function(e,d){k._formatSourceResponse(c,e,void 0!==r?r:d)})}else this._formatSourceResponse(c,e[0],c.activeSourceIndex)};e.prototype._getResultsFromSources=
function(c){var e=this,k=this.allSources,d=!c.location&&V(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,J=[];if(!k.length)return k=new f("search:no-sources-defined","At least one source is required.",{allSources:k}),l.error(k),E.reject(k);-1===d?k.forEach(function(k,d){J.push(e._getResultsFromSource(c,d))}):J.push(this._getResultsFromSource(c,d));return E.eachAlways(J)};e.prototype._getSuggestionsFromSources=function(c){var e=this,k=this.allSources,d=this.activeSourceIndex,J=[];if(!k.length)return k=
new f("suggest:no-sources-defined","At least one source is required.",{allSources:k}),l.error(k),E.reject(k);-1===d?k.forEach(function(k,d){J.push(e._getSuggestionsFromSource(c,d))}):J.push(this._getSuggestionsFromSource(c,d));return E.eachAlways(J)};e.prototype._getResultsFromSource=function(c,e){var k=this.allSources.getItemAt(e),d=c.location,d=void 0===d?null:d,r=this.get("view.spatialReference")||z,l=V(k,"maxResults")?k.maxResults:this.maxResults,b=k instanceof O&&V(k,"exactMatch")?k.exactMatch:
!1,a=k instanceof W&&V(k,"locationToAddressDistance")?k.locationToAddressDistance:this.locationToAddressDistance;return k.getResults({view:this.view,sourceIndex:e,location:d,suggestResult:c,spatialReference:r,exactMatch:b,maxResults:l,distance:a})};e.prototype._getSuggestionsFromSource=function(c,e){var k=this.allSources.getItemAt(e),d=V(k,"suggestionsEnabled")?k.suggestionsEnabled:this.suggestionsEnabled,r=c.trim().length,l=V(k,"minSuggestCharacters")?k.minSuggestCharacters:this.minSuggestCharacters;
return d&&r>=l?(d=this.get("view.spatialReference")||z,r=V(k,"maxSuggestions")?k.maxSuggestions:this.maxSuggestions,k.getSuggestions({view:this.view,sourceIndex:e,suggestTerm:c,spatialReference:d,maxSuggestions:r})):E.resolve()};e.prototype.createDefaultSymbol=function(c,e){if("point"===e)return new N({color:c.color,size:c.size,outline:{color:c.outline.color,width:c.outline.width}});if("polyline"===e)return new M({color:c.color,width:c.width});if("polygon"===e)return new I({color:c.color,outline:{color:c.outline.color,
width:c.outline.width}})};e.prototype._setDefaultActiveSourceIndex=function(){this.activeSourceIndex=1!==this.allSources.length&&this.searchAllEnabled?-1:0;this.notifyChange("activeSource")};e.prototype._getSourcePopupTemplate=function(c){var e=c.featureLayer;if(e)return V(c,"popupTemplate")?c.popupTemplate:e.popupTemplate};e.prototype._getSourceIndexOfResult=function(c){var e=null;this.results.some(function(k){return k.results.some(function(d){if(d===c)return e=k.sourceIndex,!0})});return e};e.prototype._getGoToTarget=
function(c,e){var k=c.extent;c=c.feature;return e instanceof O?c||k:k||c};e.prototype._goToSearchResult=function(c){var e=!!c;c=this.callGoTo({target:{target:c},options:{animate:e}});e&&(this._gotoPromise=c);return c};e.prototype._whenViewAndPortalLoaded=function(){var c=this.portal,e=this.view,e=e?e.when():E.resolve(),c=c?c.when():E.resolve();return E.eachAlways([e,c]).then(function(){})};e.prototype._loadDefaultSources=function(){var c=this,e=this.includeDefaultSources;this._cancelLoadingDefaultSources();
this._clearLoadingDefaultSources();var e=e?this._whenViewAndPortalLoaded():E.resolve(),d=!1;e.catch(function(){}).then(function(){d=!0;c._clearLoadingDefaultSources();c._updateDefaultSources()});d||(this._loadingDefaultSources=e,this.notifyChange("state"));return e};e.prototype._getDefaultSymbol=function(c){var e=this.get("view.map.basemap.id");if(c=c&&c.feature&&c.feature.geometry&&c.feature.geometry.type)if(e=(e=K.getSchemes({theme:"default",basemap:e||"topo",geometryType:c}))&&e.primaryScheme)return e.color&&
V(e,"opacity")&&(e.color.a=e.opacity),this.createDefaultSymbol(e,c);return this.defaultSymbol};e.prototype._allSourcesChanged=function(c){var e=c.target.length;c=e-c.added.length+c.removed.length;c!==e&&(1>=c&&1<e||1>=e&&1<c||this._setDefaultActiveSourceIndex())};e.prototype._removeHighlight=function(){this._handles.remove("highlight")};e.prototype._getHighlightLayerView=function(c){var e=this.view;if(!c||!e)return E.resolve(null);var k=c.layer;return e.when(function(){return e.whenLayerView(k).then(function(c){return S.hasHighlight(c)?
c:null})})};e.prototype._highlightFeature=function(c){var e=c.graphic,k=e.attributes,d=e.layer.objectIdField;c=c.layerView.highlight(k&&k[d]||e,{});this._handles.add(c,"highlight")};e.ALL_INDEX=-1;a([A.property({readOnly:!0,dependsOn:["activeSourceIndex","allSources.length"],value:null})],e.prototype,"activeSource",null);a([A.property()],e.prototype,"activeSourceIndex",void 0);a([A.property()],e.prototype,"allPlaceholder",void 0);a([A.property({dependsOn:["defaultSources.length","sources.length",
"includeDefaultSources"],readOnly:!0})],e.prototype,"allSources",null);a([A.property()],e.prototype,"autoNavigate",void 0);a([A.property()],e.prototype,"autoSelect",void 0);a([A.property({readOnly:!0})],e.prototype,"defaultSources",void 0);a([A.property()],e.prototype,"defaultSymbol",void 0);a([A.property()],e.prototype,"includeDefaultSources",void 0);a([A.property()],e.prototype,"locationEnabled",null);a([A.property()],e.prototype,"locationToAddressDistance",void 0);a([A.property()],e.prototype,
"maxInputLength",void 0);a([A.property()],e.prototype,"maxResults",void 0);a([A.property()],e.prototype,"maxSuggestions",void 0);a([A.property()],e.prototype,"minSuggestCharacters",void 0);a([A.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],e.prototype,"placeholder",null);a([A.property()],e.prototype,"popupEnabled",void 0);a([A.property({type:p})],e.prototype,"popupTemplate",void 0);a([A.property({type:Q})],e.prototype,"portal",void 0);
a([A.property()],e.prototype,"resultGraphicEnabled",void 0);a([A.property({readOnly:!0})],e.prototype,"resultGraphic",void 0);a([A.property({readOnly:!0})],e.prototype,"results",void 0);a([A.property({readOnly:!0})],e.prototype,"selectedSuggestion",void 0);a([A.property()],e.prototype,"searchAllEnabled",void 0);a([A.property({readOnly:!0})],e.prototype,"selectedResult",void 0);a([A.property()],e.prototype,"searchTerm",null);a([A.property({type:R})],e.prototype,"sources",void 0);a([A.property({readOnly:!0,
dependsOn:["allSources.length"]})],e.prototype,"state",null);a([A.property()],e.prototype,"suggestionDelay",void 0);a([A.property({readOnly:!0})],e.prototype,"suggestions",void 0);a([A.property()],e.prototype,"suggestionsEnabled",void 0);a([A.property()],e.prototype,"view",void 0);a([A.property()],e.prototype,"clear",null);return e=a([A.subclass("esri.widgets.Search.SearchViewModel")],e)}(A.declared(x,n,aa))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){function t(a,g){var n=g.spatialReference;return n.isWGS84?x.resolve(a):n.isWebMercator?x.resolve(f.geographicToWebMercator(a)):D().then(function(f){if(!f)return x.reject(new m("geometry-service:missing-url","Geometry service URL is missing"));f=new u({url:f});var g=new b({geometries:[a],outSR:n});return f.project(g).then(function(b){return b[0]})})}function D(){if(a.geometryServiceUrl)return x.resolve(a.geometryServiceUrl);var b=n.getDefault();return b.load().always(function(){return b.get("helperServices.geometry.url")})}
Object.defineProperty(w,"__esModule",{value:!0});var E=p.getLogger("esri.core.geolocationUtils"),C={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};w.supported=function(){var b=h("esri-geolocation");b||E.warn("geolocation-unsupported","Geolocation unsupported.");b&&((b=h("esri-secure-context"))||E.warn("insecure-context","Geolocation requires a secure origin."));return b};w.getCurrentPosition=function(b){b||(b=C);var a=x.create(function(a,f){navigator.geolocation.getCurrentPosition(a,f,b)});return x.timeout(a,
15E3,void 0)};w.positionToPoint=function(b,a){var f=b&&b.coords||{},f={accuracy:f.accuracy,altitude:f.altitude,altitudeAccuracy:f.altitudeAccuracy,heading:f.heading,latitude:f.latitude,longitude:f.longitude,speed:f.speed};b=b?{coords:f,timestamp:b.timestamp}:b;b=(b=b&&b.coords)?new g({longitude:b.longitude,latitude:b.latitude,z:b.altitude||null,spatialReference:{wkid:4326}}):null;return t(b,a)}})},"esri/styles/basic":function(){define(["../core/lang","../Color"],function(B,w){function q(a,m){var h;
if(a)switch(h={},h.color=new w(a.color),m){case "point":h.outline={color:new w(a.outline.color),width:a.outline.width};h.size=a.size;break;case "polyline":h.width=a.width;break;case "polygon":h.outline={color:new w(a.outline.color),width:a.outline.width}}return h}var a={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,
26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,.8],outline:{color:[255,255,255,1],width:1}},secondary:[{color:[128,128,128,.8],outline:{color:[255,255,255,1],width:1}},{color:[255,255,255,
.8],outline:{color:[128,128,128,1],width:1}}]},dark:{primary:{color:[227,139,79,.8],outline:{color:[51,51,51,1],width:1}},secondary:[{color:[178,178,178,.8],outline:{color:[51,51,51,1],width:1}},{color:[26,26,26,.8],outline:{color:[128,128,128,1],width:1}}]}}}},m={};(function(){var h,p,x,g,f,n,u,b;for(h in a)for(g in p=a[h],x=p.basemapGroups,f=m[h]={basemaps:[].concat(x.light).concat(x.dark),point:{},polyline:{},polygon:{}},x)for(n=x[g],u=0;u<n.length;u++)b=n[u],p.pointSchemes&&(f.point[b]=p.pointSchemes[g]),
p.lineSchemes&&(f.polyline[b]=p.lineSchemes[g]),p.polygonSchemes&&(f.polygon[b]=p.polygonSchemes[g])})();return{getAvailableThemes:function(h){var p=[],x,g,f;for(x in a)g=a[x],f=m[x],h&&f.basemaps&&-1===f.basemaps.indexOf(h)||p.push({name:g.name,label:g.label,description:g.description,basemaps:f.basemaps.slice(0)});return p},getSchemes:function(a){var h=a.basemap,x=a.geometryType;a=m[a.theme];var g;(a=(a=a&&a[x])&&a[h])&&(g={primaryScheme:q(a.primary,x),secondarySchemes:a.secondary.map(function(a){return q(a,
x)})});return g},cloneScheme:function(a){var h;a&&(h=B.mixin({},a),h.color&&(h.color=new w(h.color)),h.outline&&(h.outline={color:h.outline.color&&new w(h.outline.color),width:h.outline.width}));return h}}})},"esri/widgets/Search/FeatureLayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../layers/CSVLayer ../../layers/FeatureLayer ../../layers/Layer ../../layers/SceneLayer ./SearchSource ./support/featureLayerUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){return function(u){function t(){var b=null!==u&&u.apply(this,arguments)||this;b.displayField=null;b.exactMatch=null;b.searchFields=null;b.searchQueryParams=null;b.searchTemplate=null;b.suggestionTemplate=null;b.suggestQueryParams=null;return b}q(t,u);E=t;Object.defineProperty(t.prototype,"featureLayer",{set:function(b){this._set("featureLayer",b);b&&b.load()},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"name",{get:function(){return this._getFeatureLayerTitle()||
""},set:function(b){void 0===b?this._clearOverride("name"):this._override("name",b)},enumerable:!0,configurable:!0});t.prototype.clone=function(){return new E({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?h.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?
this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,featureLayer:this.featureLayer,searchFields:this.searchFields?h.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?h.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?
h.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};t.prototype.getResults=function(a){return b.getResults(m({source:this},a))};t.prototype.getSuggestions=function(a){return b.getSuggestions(m({source:this},a))};t.prototype._getFirstStringField=function(){var b=this.featureLayer,a="";b&&b.fields&&b.fields.some(function(b){if("string"===b.type)return a=b.name,!0});return a};t.prototype._getDisplayField=function(){return this.displayField||this.featureLayer.displayField||this._getFirstStringField()};
t.prototype._getFeatureLayerTitle=function(){var b=this.featureLayer;if(b){var a=b.title;if(a){var f="";(this.searchFields||[this._getDisplayField()]).forEach(function(a,g){f+=0===g?": ":", ";g=b.getField(a);f+=g&&g.alias||a});return""+a+f}}};var E;a([p.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],t.prototype,"displayField",void 0);a([p.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],t.prototype,"exactMatch",void 0);a([p.property({types:{key:"type",
base:f,defaultKeyValue:"feature",typeMap:{feature:g,csv:x,scene:n}},value:null})],t.prototype,"featureLayer",null);a([p.property({dependsOn:["featureLayer.title"]})],t.prototype,"name",null);a([p.property()],t.prototype,"searchFields",void 0);a([p.property()],t.prototype,"searchQueryParams",void 0);a([p.property()],t.prototype,"searchTemplate",void 0);a([p.property()],t.prototype,"suggestionTemplate",void 0);a([p.property()],t.prototype,"suggestQueryParams",void 0);return t=E=a([p.subclass("esri.widgets.Search.FeatureLayerSearchSource")],
t)}(p.declared(u))})},"esri/layers/CSVLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/paramHelper ../geometry ../core/urlUtils ../core/accessorSupport/decorators ./FeatureLayer ./graphics/data/QueryEngineCapabilities ./graphics/sources/CSVSource ../tasks/support/Query".split(" "),function(B,w,q,a,m,h,p,x,g,f,n,u,b){return function(f){function t(b,a){b=f.call(this)||this;b.delimiter=null;
b.fields=null;b.latitudeField=null;b.locationType="coordinates";b.longitudeField=null;b.operationalLayerType="CSV";b.outFields=["*"];b.portalItem=null;b.spatialReference=p.SpatialReference.WGS84;b.source=null;b.type="csv";return b}q(t,f);t.prototype.normalizeCtorArgs=function(b,a){return"string"===typeof b?m({url:b},a):b};Object.defineProperty(t.prototype,"capabilities",{get:function(){return{data:{supportsAttachment:!1,supportsM:!1,supportsZ:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,
supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsQuery:!0,supportsResizeAttachments:!1,supportsUpdate:!1},query:n.queryCapabilities,queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},editing:{supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}},enumerable:!0,
configurable:!0});Object.defineProperty(t.prototype,"hasService",{get:function(){return!1},enumerable:!0,configurable:!0});t.prototype.readWebMapLabelsVisible=function(b,a){return null!=a.showLabels?a.showLabels:!!(a.layerDefinition&&a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.labelingInfo)};Object.defineProperty(t.prototype,"url",{set:function(b){this._set("url",b)},enumerable:!0,configurable:!0});t.prototype.readUrl=function(b,a,f){return x.read(b,f)};t.prototype.writeUrl=function(b,
a,f,g){b=x.write(b,g);a.url=b?x.normalize(b):b};t.prototype.createGraphicsSource=function(){var b=this,a=new u.default({delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField,longitudeField:this.longitudeField,spatialReference:this.spatialReference,url:this.url});this._set("source",a);return a.load().then(function(){b.read({locationInfo:a.locationInfo,columnDelimiter:a.columnDelimiter},{origin:"service",url:b.parsedUrl});return a})};t.prototype.queryFeatures=function(b,a){var f=
this;return this.load().then(function(){return f.source.queryFeatures(b||f.createQuery())}).then(function(b){if(b&&b.features)for(var a=0,g=b.features;a<g.length;a++){var n=g[a];n.layer=n.sourceLayer=f}return b})};t.prototype.queryFeaturesJSON=function(b,a){var f=this;return this.load().then(function(){return f.source.queryFeaturesJSON(b||f.createQuery())})};t.prototype.queryObjectIds=function(b,a){var f=this;return this.load().then(function(){return f.source.queryObjectIds(b||f.createQuery())})};
t.prototype.queryFeatureCount=function(b,a){var f=this;return this.load().then(function(){return f.source.queryFeatureCount(b||f.createQuery())})};t.prototype.queryExtent=function(b,a){var f=this;return this.load().then(function(){return f.source.queryExtent(b||f.createQuery())})};t.prototype._verifyFields=function(){};t.prototype._verifySource=function(){};t.prototype._hasMemorySource=function(){return!0};a([g.property({readOnly:!0,dependsOn:["loaded"],json:{read:!1,write:!1}})],t.prototype,"capabilities",
null);a([g.property({type:String,json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],t.prototype,"delimiter",void 0);a([g.property({json:{read:{source:"layerDefinition.fields"}}})],t.prototype,"fields",void 0);a([g.property({readOnly:!0})],t.prototype,"hasService",null);a([g.reader("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],t.prototype,"readWebMapLabelsVisible",null);a([g.property({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},
write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],t.prototype,"latitudeField",void 0);a([g.property({type:String,json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],t.prototype,"locationType",void 0);a([g.property({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],t.prototype,"longitudeField",void 0);a([g.property()],t.prototype,
"operationalLayerType",void 0);a([g.property()],t.prototype,"outFields",void 0);a([g.property({json:{read:!1,write:!1}})],t.prototype,"portalItem",void 0);a([g.property({json:{read:!1},cast:null,type:u.default,readOnly:!0})],t.prototype,"source",void 0);a([g.property({json:{read:!1},value:"csv",readOnly:!0})],t.prototype,"type",void 0);a([g.property({json:{write:!0}})],t.prototype,"url",null);a([g.reader("url")],t.prototype,"readUrl",null);a([g.writer("url")],t.prototype,"writeUrl",null);a([h(0,g.cast(b))],
t.prototype,"queryFeatures",null);a([h(0,g.cast(b))],t.prototype,"queryFeaturesJSON",null);a([h(0,g.cast(b))],t.prototype,"queryObjectIds",null);a([h(0,g.cast(b))],t.prototype,"queryFeatureCount",null);a([h(0,g.cast(b))],t.prototype,"queryExtent",null);return t=a([g.subclass("esri.layers.CSVLayer")],t)}(g.declared(f))})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require","exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});w.queryCapabilities={supportsAttachments:!1,
supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1}})},"esri/layers/graphics/sources/CSVSource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../geometry ../../../core/Accessor ../../../core/has ../../../core/Loadable ../../../core/requireUtils ../../../core/workers ../../../core/accessorSupport/decorators ../../../tasks/support/FeatureSet module".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){Object.defineProperty(w,"__esModule",{value:!0});p.add("esri-workers-for-memory-layers",!1);h=function(t){function h(b){return t.call(this,b)||this}q(h,t);h.prototype.load=function(){var a=this;this.addResolvingPromise(f.open(g.getAbsMid("./support/CSVSourceWorker",B,b),{client:this,strategy:p("esri-workers-for-memory-layers")?"dedicated":"local"}).then(function(b){a._connection=b;return b.invoke("load",{url:a.url,parsing:{columnDelimiter:a.delimiter,fields:a.fields&&
a.fields.map(function(b){return b.toJSON()}),latitudeField:a.latitudeField,longitudeField:a.longitudeField,spatialReference:a.spatialReference&&a.spatialReference.toJSON()}})}).then(function(b){a.locationInfo=b.locationInfo;a.layerDefinition=b.layerDefinition;a.columnDelimiter=b.columnDelimiter}));return this.when()};h.prototype.destroy=function(){this._connection&&this._connection.close()};h.prototype.openPorts=function(){var b=this;return this.load().then(function(){return b._connection.openPorts()})};
h.prototype.queryFeatures=function(b){return this.queryFeaturesJSON(b).then(function(b){return u.fromJSON(b)})};h.prototype.queryFeaturesJSON=function(b){var a=this;return this.load().then(function(){return a._connection.invoke("queryFeatures",b?b.toJSON():null)})};h.prototype.queryFeatureCount=function(b){var a=this;return this.load().then(function(){return a._connection.invoke("queryFeatureCount",b?b.toJSON():null)})};h.prototype.queryObjectIds=function(b){var a=this;return this.load().then(function(){return a._connection.invoke("queryObjectIds",
b?b.toJSON():null)})};h.prototype.queryExtent=function(b){var a=this;return this.load().then(function(){return a._connection.invoke("queryExtent",b?b.toJSON():null)}).then(function(b){return{count:b.count,extent:m.Extent.fromJSON(b.extent)}})};a([n.property()],h.prototype,"url",void 0);a([n.property()],h.prototype,"delimiter",void 0);a([n.property()],h.prototype,"fields",void 0);a([n.property()],h.prototype,"latitudeField",void 0);a([n.property()],h.prototype,"longitudeField",void 0);a([n.property()],
h.prototype,"spatialReference",void 0);a([n.property()],h.prototype,"locationInfo",void 0);a([n.property()],h.prototype,"layerDefinition",void 0);a([n.property()],h.prototype,"columnDelimiter",void 0);return h=a([n.subclass("esri.layers.graphics.sources.CSVSource")],h)}(n.declared(h,x));w.default=h})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(B,w,q,a,m,h,p){return function(h){function g(a){a=h.call(this)||this;a.autoNavigate=null;a.filter=null;a.maxResults=null;a.maxSuggestions=null;a.minSuggestCharacters=null;a.outFields=null;a.placeholder="";a.popupEnabled=null;a.popupTemplate=null;a.prefix="";a.resultGraphicEnabled=null;a.resultSymbol=null;a.searchExtent=null;a.suggestionsEnabled=null;a.suffix="";a.withinViewEnabled=!1;a.zoomScale=null;return a}q(g,h);a([p.property()],g.prototype,"autoNavigate",void 0);a([p.property()],g.prototype,
"filter",void 0);a([p.property()],g.prototype,"maxResults",void 0);a([p.property()],g.prototype,"maxSuggestions",void 0);a([p.property()],g.prototype,"minSuggestCharacters",void 0);a([p.property()],g.prototype,"outFields",void 0);a([p.property()],g.prototype,"placeholder",void 0);a([p.property()],g.prototype,"popupEnabled",void 0);a([p.property()],g.prototype,"popupTemplate",void 0);a([p.property()],g.prototype,"prefix",void 0);a([p.property()],g.prototype,"resultGraphicEnabled",void 0);a([p.property()],
g.prototype,"resultSymbol",void 0);a([p.property()],g.prototype,"searchExtent",void 0);a([p.property()],g.prototype,"suggestionsEnabled",void 0);a([p.property()],g.prototype,"suffix",void 0);a([p.property()],g.prototype,"withinViewEnabled",void 0);a([p.property()],g.prototype,"zoomScale",void 0);return g=a([p.subclass("esri.widgets.Search.SearchSource")],g)}(p.declared(h,m))})},"esri/widgets/Search/support/featureLayerUtils":function(){define("require exports dojo/date/locale ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../geometry/support/scaleUtils ./geometryUtils".split(" "),
function(B,w,q,a,m,h,p,x,g){function f(b,a){var f=b.filter,g=b.searchExtent;a=a&&a.extent;b=b.withinViewEnabled&&a?a:void 0;return f&&f.geometry||g||b}function n(b){return b?b.load().then(p.resolve).catch(p.reject):p.resolve()}function u(b){return b&&!!b.get("capabilities.query.supportsPagination")}function b(b){var a="";b&&(b=b.fields)&&b.some(function(b){if("string"===b.type)return a=b.name,!0});return a}function t(b,a){return b&&a?a.every(function(a){return!!b.getField(a)}):!1}function D(b){for(var a=
0;a<b.length;a++)if(255<b.charCodeAt(a))return!0;return!1}function E(b,a,f){var g=null;(b=b.codedValues)&&b.some(function(b){var n=b.name,n=f?n:n.toLowerCase();if((f?a:a.toLowerCase())===n)return g=b.code.toString(),!0});return g}function C(b,a){return(a=a&&a.where)?"("+b+") AND ("+a+")":b}function A(b,a,f,g,n){var u=a.definitionExpression,t="";if(b){var h=y.test(a.url)&&D(b)?"N":"";f&&f.forEach(function(f){var u=a.getField(f);f=((f="function"===typeof a.getFieldDomain&&a.getFieldDomain(f))&&"coded-value"===
f.type?E(f,b,n):null)||b||null;if(null!==f){var l=u.type,u=u.name;"string"===l||"date"===l?n?u=C(u+" \x3d "+h+"'"+f+"'",g):(f=f.toUpperCase(),u=C("UPPER("+u+") LIKE "+h+"'%"+f+"%'",g)):"oid"===l||"small-integer"===l||"integer"===l||"single"===l||"double"===l?(f=parseFloat(f),u=isNaN(f)?null:C(u+" \x3d "+f,g)):u=C(u+" \x3d "+f,g);u&&(t+=t?" OR ("+u+")":"("+u+")")}})}return u?"("+u+") AND ("+t+")":t}function F(b,a){var f=null;(b=b.codedValues)&&b.length&&b.some(function(b){if(b.code===a)return f=b.name,
!0});return f}function H(b,a,f){var g=b.layer,n=b.attributes,u="function"===typeof g.getFieldDomain&&g.getFieldDomain(f);return a?m.substitute(n,a):f&&b.hasOwnProperty("attributes")&&n.hasOwnProperty(f)?(b=n[f],f=g.getField(f),u&&"coded-value"===u.type?F(u,b):f&&"date"===f.type?q.format(new Date(b)):f&&"integer"===f.type?b.toString():b):""}function Q(b,a,f,g){return b.features.map(function(b){var n=b.attributes[b.layer.objectIdField];return{text:H(b,a.suggestionTemplate,g),key:n,sourceIndex:f}})}
function K(b,a,f,n,u,t,h){return b.features.map(function(b){var A=b.clone(),y=b.layer,y=(y=y&&y.objectIdField)&&b.attributes[y];b=H(b,f.searchTemplate,u);var l=g.createExtentFromGeometry(A.geometry,a,t);return{extent:h?g.scaleExtent(l.clone(),a,h):l,feature:A,key:y,name:b,sourceIndex:n}})}Object.defineProperty(w,"__esModule",{value:!0});var y=/https?:\/\/services.*\.arcgis\.com/i,I=/(?:\{([^}]+)\})/g,M=h.getLogger("esri.widgets.Search.support.featureLayerUtils");w.getResults=function(g){var h=g.exactMatch,
y=void 0===h?!1:h,C=g.location,m=g.maxResults,E=g.spatialReference,D=g.source,F=g.sourceIndex,I=g.suggestResult,q=g.view,l=D.featureLayer,R=D.filter,z=D.zoomScale,d=q&&q.scale,c=f(D,q);return n(l).then(function(){var e=l.objectIdField,k=l.returnZ,r=D.displayField||D.featureLayer.displayField||b(D.featureLayer);if(!l.getField(r))return M.error("invalid-field: displayField is invalid."),p.reject(new a("searchfeaturelayerutils:invalid-field","displayField is invalid."));var v=l.get("popupTemplate.requiredFields"),
v=v&&v.length?v:null,G=(v=D.outFields||v||[r],-1!==v.indexOf("*"));-1!==v.indexOf(e)||G||v.push(e);if(!G&&!t(l,v))return M.error("invalid-field: outField is invalid."),p.reject(new a("searchfeaturelayerutils:invalid-field","outField is invalid."));e=l.createQuery();(G=D.searchQueryParams)&&e.set(G);E&&(e.outSpatialReference=E,G=x.getMetersPerUnitForSR(E))&&(e.maxAllowableOffset=G);G=!!l.get("capabilities.data.supportsZ");e.returnZ=G&&!1!==k;e.returnGeometry=!0;v&&(e.outFields=v);if(C)e.geometry=C;
else if(I.key)e.objectIds=[parseInt(I.key,10)];else{k=D.searchFields||[r];if(!t(l,k))return M.error("invalid-field: search field is invalid."),p.reject(new a("searchfeaturelayerutils:invalid-field","search field is invalid."));u(l)&&(e.num=m);c&&(e.geometry=c);v=I.text.trim();if(!v)return p.resolve();var G=D.prefix,J=D.suffix,v=(""+(void 0===G?"":G)+v+(void 0===J?"":J)).replace(/\'/g,"''"),k=A(v,l,k,R,y);if(!k)return p.resolve();e.where=k}return l.queryFeatures(e).then(function(c){return K(c,q,D,
F,r,d,z)})})};w.getSuggestions=function(g){var h=g.source,y=g.spatialReference,C=g.suggestTerm,m=g.maxSuggestions,E=g.sourceIndex,D=h.featureLayer,x=h.filter,F=f(h,g.view);return n(D).then(function(){if(!u(D))return p.resolve();var f=h.displayField||h.featureLayer.displayField||b(h.featureLayer),l=h.searchFields||[f],g=[];h.suggestionTemplate?h.suggestionTemplate.replace(I,function(c,e){g.push(e);return c}):g.push(f);var z=g&&-1!==g.indexOf("*");-1!==g.indexOf(D.objectIdField)||z||g.push(D.objectIdField);
var d=!!D.getField(f),z=z||t(D,g),c=t(D,l);if(!d)return M.error("invalid-field: displayField is invalid."),p.reject(new a("searchfeaturelayerutils:invalid-field","displayField is invalid."));if(!z)return M.error("invalid-field: outField is invalid."),p.reject(new a("searchfeaturelayerutils:invalid-field","outField is invalid."));if(!c)return M.error("invalid-field: search field is invalid."),p.reject(new a("searchfeaturelayerutils:invalid-field","search field is invalid."));d=D.createQuery();(z=h.suggestQueryParams)&&
d.set(z);d.outSpatialReference=y;d.returnGeometry=!1;d.num=m;d.outFields=g;F&&(d.geometry=F);z=C.trim();if(!z)return p.resolve();var c=h.prefix,e=h.suffix,z=(""+(void 0===c?"":c)+z+(void 0===e?"":e)).replace(/\'/g,"''"),l=A(z,D,l,x,!1);if(!l)return p.resolve();d.where=l;return D.queryFeatures(d).then(function(c){return Q(c,h,E,f)})})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),
function(B,w,q,a,m,h,p,x){function g(a,f,b){var g=a.hasZ?a.z:void 0;return f&&f.map?(b?p.getExtentForScale(f,b):f.extent).clone().centerAt(a).set({zmax:g,zmin:g}):new q.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:g,zmax:g})}Object.defineProperty(w,"__esModule",{value:!0});var f=m.getLogger("esri.widgets.Search.support.geometryUtils");w.getPointWithElevation=function(g,u){return u?g?g.hasZ||u instanceof x?h.resolve(g):(u=u.get("map.ground"))&&
u.layers.length?u.queryElevation(g).then(function(b){return b.geometry}):h.resolve(g):(f.error("missing-parameter: point is missing."),h.reject(new a("searchgeometryutils:missing-parameter","point is missing."))):(f.error("missing-parameter: view is missing."),h.reject(new a("searchgeometryutils:missing-parameter","view is missing.")))};w.getPointFromGeometry=function(a){if(a instanceof q.Point)return a;if(a instanceof q.Extent)return a.center;if(a instanceof q.Polygon)return a.centroid;if(a instanceof
q.Multipoint)return a.getPoint(0);if(a instanceof q.Polyline)return a.getPoint(0,0)};w.createExtentFromGeometry=function(a,f,b){if(a){if(a instanceof q.Extent)return a;if(a instanceof q.Multipoint||a instanceof q.Polygon||a instanceof q.Polyline)return a.extent;if(a instanceof q.Point)return g(a,f,b)}};w.scaleExtent=function(a,f,b){if(a&&f)return g(a.center,f,b)}})},"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/Handles ../core/promiseUtils ../core/workers ../core/accessorSupport/decorators ../geometry/ScreenPoint ./BreakpointsOwner ./MapViewBase ./2d/LabelManager ./2d/engine/Stage ./2d/input/MapViewInputManager ./2d/layers/support/GraphicsView2D ./2d/navigation/MapViewNavigation ./2d/support/HighlightOptions ./support/screenshotUtils ./ui/2d/DefaultUI2D".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H){return function(n){function u(b){b=n.call(this,b)||this;b._graphicsView=null;b._mapViewHandles=new h;b._stage=null;b.highlightOptions=new A;b.inputManager=new D({view:b});b.mapViewNavigation=null;b.ui=new H;b.rendering=!1;x.initialize();return b}q(u,n);Object.defineProperty(u.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,
"resolution",{get:function(){return this.state?this.state.resolution:null},enumerable:!0,configurable:!0});u.prototype.hitTest=function(b,a){var g;g=null!=b&&b.x?b:new f({x:b,y:a});if(!this._setup||isNaN(g.x)||isNaN(g.y))return p.resolve({screenPoint:g,results:[]});var n=this.toMap(g);b=[this._graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());return m(b.map(function(b){return b&&b.hitTest?b.hitTest(g.x,g.y):null})).then(function(b){return{screenPoint:g,results:b.filter(function(b){return null!=
b}).map(function(b){return{mapPoint:n,graphic:b}})}})};u.prototype.takeScreenshot=function(b){return this._setup?this._stage.takeScreenshot(F.toRenderSettings(b,this)):p.reject("Map view cannot be used before it is ready")};u.prototype.on=function(b,a,f){var g=this.inputManager&&this.inputManager.viewEvents.register(b,a,f);return g?g:this.inherited(arguments)};u.prototype.hasEventListener=function(b){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(b)};
u.prototype.destroyLayerViews=function(){this.inherited(arguments);this._stage&&(this._stage.destroy(),this._stage=null)};u.prototype._startup=function(){var a=this;this.inherited(arguments);var f=new t(this.surface),g=new E({view:this,graphics:this.graphics}),n=new C({view:this,animationManager:this.animationManager}),u=new b.default({view:this});this._stage=f;this._graphicsView=g;this._set("mapViewNavigation",n);this._set("labelManager",u);this._mapViewHandles.add([this.allLayerViews.on("change",
function(){return a._updateStageChildren()}),f.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(b){return!0===b.rendering}))}),this.watch("stationary",function(b){return f.stationary=b},!0),this.watch("state.viewpoint",function(b){return f.state=a.state},!0)]);f.state=this.state;this._updateStageChildren()};u.prototype._tearDown=function(){this._setup&&(this._graphicsView.destroy(),this._mapViewHandles.removeAll(),this._stage.destroy(),this.mapViewNavigation.destroy(),
this._graphicsView=this._stage=null,this.labelManager.destroy(),this._set("labelManager",null),this._set("mapViewNavigation",null),this.inherited(arguments))};u.prototype._updateStageChildren=function(){var b=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(b){return null!=b.container}).forEach(function(a,f){b._stage.addChildAt(a.container,f)});this._stage.addChild(this._graphicsView.container)};a([g.property({type:A})],u.prototype,"highlightOptions",void 0);a([g.property({readOnly:!0})],
u.prototype,"inputManager",void 0);a([g.property({readOnly:!0})],u.prototype,"mapViewNavigation",void 0);a([g.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],u.prototype,"interacting",null);a([g.property({type:H})],u.prototype,"ui",void 0);a([g.property({readOnly:!0})],u.prototype,"rendering",void 0);a([g.property({dependsOn:["state.resolution"],readOnly:!0})],u.prototype,"resolution",null);return u=a([g.subclass("esri.views.MapView")],u)}(g.declared(u,n))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Handles ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/viewpointUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H){var Q=f.getLogger("esri.views.MapView");return function(f){function t(b){var a=f.call(this,b)||this;a._frameTask=new C.default(a);a._mapViewBaseHandles=new g;a._setup=!1;a.fullOpacity=1;a.interacting=!1;a.initialExtent=null;a.labelManager=null;a.resizeAlign="center";a.type="2d";a.constraints=new A;a.padding={top:0,right:0,bottom:0,left:0};var n=function(){this._set("updating",!this.layerViewManager||this.layerViewManager.factory.working||this.allLayerViews.some(function(b){return!0===
b.updating})||this.labelManager&&!0===this.labelManager.updating)}.bind(a),u=a._mapViewBaseHandles;u.add([a.watch("viewpoint",function(b){return a._flipStationary()},!0),a.on("resize",function(b){return a._resizeHandler(b)}),a.watch("animationManager.animation",function(b){a.animation=b}),a.watch("labelManager.updating",n),a.allLayerViews.on("change",function(){n();u.remove("layerViewsUpdating");u.add(a.allLayerViews.map(function(b){return b.watch("updating",n)}).toArray(),"layerViewsUpdating")})]);
n();a.watch("ready",function(b){b?(a._startup(),a._frameTask.start()):(a._frameTask.stop(),a._tearDown())});return a}a(t,f);t.prototype.destroy=function(){this.destroyed||(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this.layerViewManager.clear(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(t.prototype,"animation",{set:function(b){var a=this,f=this._get("animation");b!==f&&(f&&f.stop(),!b||b.isFulfilled()?
this._set("animation",null):(this._set("animation",b),f=function(){b===a._get("animation")&&(a._set("animation",null),a._frameTask.requestFrame())},b.when(f,f,function(b){a.state&&(a.state.viewpoint=b.clone())})))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"center",{get:function(){if(!this._setup)return this._get("center");var b=this.content.center;return new h.Point({x:b[0],y:b[1],spatialReference:this.content.spatialReference})},set:function(b){if(null!=b)if(this._normalizeInput(b))if(this._setup){var a=
this.viewpoint;H.centerAt(a,a,b);this.viewpoint=a}else this._set("center",b),this.notifyChange("initialExtentRequired");else Q.error("#center","incompatible spatialReference "+JSON.stringify(b.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"constraints",{set:function(b){var a=this,f=this._get("constraints");f&&(this._mapViewBaseHandles.remove("constraints"),f.destroy());this._set("constraints",
b);b&&(this._setup&&(b.view=this,this.state.viewpoint=b.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(b.on("update",function(){a._setup&&a.state&&(a.state.viewpoint=b.fit(a.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"extent",{get:function(){return this._setup?this.content.extent.clone():this._get("extent")},set:function(b){if(null!=b){var a=this._normalizeInput(b);a?a.width&&a.height?this._setup?(b=this.viewpoint,H.setExtent(b,
b,a,this.size,{constraints:this.constraints}),this.viewpoint=b):(this._set("extent",a),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):Q.error("#extent","invalid extent size"):Q.error("#center","incompatible spatialReference "+JSON.stringify(b.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"initialExtentRequired",
{get:function(){var b=this.extent,a=this.center,f=this.scale,g=this.viewpoint,n=this.zoom;return this.get("map.initialViewProperties.viewpoint")||b||a&&(0!==f||-1!==n)||g?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"padding",{get:function(){return this._setup?this.state.padding:this._get("padding")},set:function(b){this._setup?(this.state.padding=b,this._set("padding",this.state.padding)):this._set("padding",b)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,
"rotation",{get:function(){return this._setup?this.content.rotation:this._get("rotation")},set:function(b){if(!isNaN(b))if(this._setup){var a=this.viewpoint;H.rotateTo(a,a,b);this.viewpoint=a}else this._set("rotation",b)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"scale",{get:function(){return this._setup?this.content.scale:this._get("scale")},set:function(b){if(b&&!isNaN(b))if(this._setup){var a=this.viewpoint;H.scaleTo(a,a,b);this.viewpoint=a}else{this._set("scale",b);this._set("zoom",
-1);if(b=this._get("extent"))this._set("extent",null),this._set("center",b.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"viewpoint",{get:function(){if(!this._setup)return this._get("viewpoint");var b=this.content;return b&&b.viewpoint.clone()},
set:function(b){if(null!=b){var a=this._normalizeInput(b);a?this._setup?(b=H.create(),H.copy(b,a),this.constraints.constrain(b,this.content.viewpoint),this.state.viewpoint=b,this._frameTask.requestFrame(),this._set("viewpoint",b)):(this._set("viewpoint",a),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!b.scale||isNaN(b.scale)?Q.error("#viewpoint","invalid scale value of "+b.scale):b.targetGeometry?Q.error("#viewpoint",
"incompatible spatialReference "+JSON.stringify(b.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):Q.error("#viewpoint","geometry not defined")}},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"zoom",{get:function(){return this._setup?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(b){if(null!=b){if(!this._setup){this.notifyChange("initialExtentRequired");this._set("zoom",b);this._set("scale",0);var a=
this._get("extent");a&&(this._set("extent",null),this._set("center",a.center))}this.constraints.effectiveLODs&&(a=this.viewpoint,H.scaleTo(a,a,this.constraints.zoomToScale(b)),this.viewpoint=a,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});t.prototype.goTo=function(b,a){this.animation&&(this.animation=null);if(this._setup)return a=q({animate:!0},a),b=H.createAsync(b,this),this._gotoTask={},a.animate?this._gotoAnimated(b,a):this._gotoImmediate(b,a);Q.error("#goTo()",
"MapView cannot be used before it is ready")};t.prototype.hitTest=function(b,a){return n.reject("Should be implemented by subclasses")};t.prototype.toMap=function(b,a,f){if(!this._setup)return null;b&&null!=b.x&&(f=a,a=b.y,b=b.x);var g=[0,0];this.state.toMap(g,[b,a]);f=f||new h.Point;f.x=g[0];f.y=g[1];f.spatialReference=this.spatialReference;return f};t.prototype.isTileInfoRequired=function(){return!0};t.prototype.toScreen=function(b,a,f,g){if(!this._setup)return null;b&&"object"===typeof b?(g=a||
new h.ScreenPoint,b=this._normalizeInput(b),a=b.y,b=b.x):g="number"===typeof f||null==f?g||new h.ScreenPoint:f||new h.ScreenPoint;b=[b,a];this.state.toScreen(b,b);g.x=b[0];g.y=b[1];return g};t.prototype.pixelSizeAt=function(b,a){if(!this._setup)return NaN;b&&null!=b.x&&(a=b.y,b=b.x);return this.content.pixelSizeAt([b,a])};t.prototype.requestLayerViewUpdate=function(b){this._setup&&this._frameTask.requestLayerViewUpdate(b)};t.prototype.requestUpdate=function(b){this._setup&&this._frameTask.requestUpdate(b)};
t.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};t.prototype.isSpatialReferenceSupported=function(b,a){if(a||this._get("ready"))return!0;a=this._normalizeInput(this._get("center"),b);var f=this._normalizeInput(this._get("extent"),b),g=this._normalizeInput(this._get("viewpoint"),b),n=this._userSpatialReference,u=null,t=null;(g=g&&g.targetGeometry)&&("extent"===g.type?u=g:"point"===g.type&&
(t=g));g=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"),b);b=this._normalizeInput(this.initialExtent,b);b=f||u||g||b;return a||t||b&&b.center?!0:(n&&Q.error("The view could not be initialized with the spatialReference "+n.wkid+".","Try specifying an extent or a center and scale"),!1)};t.prototype._createOrReplaceAnimation=function(b){if(!this.animation||this.animation.done)this.animation=new D;this.animation.update(b);return this.animation};t.prototype._cancellableGoTo=
function(b,a,f){var g=this,u=f.then(function(){b===g._gotoTask&&(g.animation=null)}).catch(function(f){b===g._gotoTask&&(g.animation=null,a.done||a.stop());throw f;}),t=n.create(function(b){return b(u)},function(){b!==g._gotoTask||a.done||a.stop()});a.catch(function(){b===g._gotoTask&&t.cancel()});return t};t.prototype._gotoImmediate=function(b,a){var f=this,g=this._gotoTask,n=this._createOrReplaceAnimation(b);b=b.then(function(b){if(g!==f._gotoTask)throw new x("view:goto-interrupted","Goto was interrupted");
f.viewpoint=n.target=b;n.finish()});return this._cancellableGoTo(g,n,b)};t.prototype._gotoAnimated=function(b,a){var f=this,g=this._gotoTask,n=this._createOrReplaceAnimation(b);b=b.then(function(b){if(g!==f._gotoTask)throw new x("view:goto-interrupted","Goto was interrupted");n.update(b);f.animationManager.animate(n,f.viewpoint,a);return n.when().then(function(){})});return this._cancellableGoTo(g,n,b)};t.prototype._resizeHandler=function(b){var a=this.state;if(a){var f=this.content.viewpoint,g=this.content.size.concat();
a.size=[b.width,b.height];H.resize(f,f,g,this.content.size,this.resizeAlign);f=this.constraints.constrain(f,null);this.state.viewpoint=f}};t.prototype._startup=function(){if(!this._setup){var b=this.constraints,a=this._get("zoom"),f=this._get("scale"),g=this._normalizeInput(this._get("center")),n=this._normalizeInput(this._get("extent")),u=this._get("rotation"),t=this._normalizeInput(this._get("viewpoint"));b.view=this;b.effectiveLODs?-1!==a&&(f=b.zoomToScale(a)):a=-1;var h=null,A=null,C=0,a=t&&t.rotation,
m=t&&t.targetGeometry;m&&("extent"===m.type?h=m:"point"===m.type&&(A=m,C=t.scale));t=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));m=this._normalizeInput(this.initialExtent);n=n||h||t||m;g=g||A||n&&n.center;f=f||C||n&&H.extentToScale(n,this.size);u=new p({targetGeometry:g,scale:f,rotation:u||a||0});b.fit(u);this._set("animationManager",new E);this._set("state",new F({padding:this._get("padding"),size:this.size,viewpoint:u}));this._set("content",this.state.content);
this._setup=!0}};t.prototype._tearDown=function(){if(this._setup){this._setup=!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var b=this._get("content"),a=b.center,f=b.spatialReference,a=new h.Point({x:a[0],y:a[1],spatialReference:f});this._set("viewpoint",null);this._set("extent",null);this._set("center",a);this._set("zoom",-1);this._set("rotation",b.rotation);this._set("scale",b.scale);this._set("spatialReference",f);this.constraints.view=
null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null}};t.prototype._flipStationary=function(){var b=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){b._stationaryTimer=null;b.notifyChange("stationary")},160);this.notifyChange("stationary")};t.prototype._normalizeInput=function(a,f){void 0===f&&(f=this.spatialReference);var g=a&&a.targetGeometry||a;return f?
g?f.equals(g.spatialReference)?a:b.canProject(g,f)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=b.project(g,f),a):b.project(g,f):null:null:a};m([u.property()],t.prototype,"animation",null);m([u.property({readOnly:!0})],t.prototype,"animationManager",void 0);m([u.property({value:null,type:h.Point,dependsOn:["content.center"]})],t.prototype,"center",null);m([u.property({type:A})],t.prototype,"constraints",null);m([u.property({readOnly:!0})],t.prototype,"content",void 0);m([u.property({value:null,
type:h.Extent,dependsOn:["content.extent"]})],t.prototype,"extent",null);m([u.property()],t.prototype,"fullOpacity",void 0);m([u.property({readOnly:!0})],t.prototype,"interacting",void 0);m([u.property({type:h.Extent})],t.prototype,"initialExtent",void 0);m([u.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],t.prototype,"initialExtentRequired",null);m([u.property()],t.prototype,"labelManager",void 0);m([u.property({value:{top:0,right:0,bottom:0,left:0},cast:function(b){return q({top:0,
right:0,bottom:0,left:0},b)}})],t.prototype,"padding",null);m([u.property()],t.prototype,"resizeAlign",void 0);m([u.property({value:0,type:Number,dependsOn:["content.rotation"]})],t.prototype,"rotation",null);m([u.property({value:0,type:Number,dependsOn:["content.scale"]})],t.prototype,"scale",null);m([u.property({type:h.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],t.prototype,"spatialReference",void 0);m([u.property({readOnly:!0})],
t.prototype,"state",void 0);m([u.property()],t.prototype,"stationary",null);m([u.property({readOnly:!0})],t.prototype,"type",void 0);m([u.property({value:null,type:p,dependsOn:["content.viewpoint"]})],t.prototype,"viewpoint",null);m([u.property({value:-1,dependsOn:["content.scale"]})],t.prototype,"zoom",null);return t=m([u.subclass("esri.views.MapViewBase")],t)}(u.declared(t))})},"esri/views/2d/AnimationManager":function(){define("../../core/Accessor ../../core/scheduling ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),
function(B,w,q,a,m,h){var p=function(a,g,f,n){var u=a.targetGeometry,b=g.targetGeometry;n?"string"===typeof n&&(n=m.parse(n)||m.ease):n=m.ease;this.easing=n;this.duration=f;this.sCenterX=u.x;this.sCenterY=u.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=b.x;this.tCenterY=b.y;this.tScale=g.scale;this.tRotation=g.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;
180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};p.prototype.applyRatio=function(a,g){var f=this.easing(g),n,u;1<=g?(g=this.tCenterX,n=this.tCenterY,u=this.tRotation,f=this.tScale):(g=this.sCenterX+f*this.dCenterX,n=this.sCenterY+f*this.dCenterY,u=this.sRotation+f*this.dRotation,f=this.sScale+f*this.dScale);a.targetGeometry.x=g;a.targetGeometry.y=n;a.scale=f;a.rotation=u};return B.createSubclass({constructor:function(){this._updateTask=w.addFrameTask({postRender:this._postRender.bind(this)});
this._updateTask.pause()},getDefaults:function(){return{viewpoint:h.create()}},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:m.ease},viewpoint:null},animate:function(a,g,f){this.stop();h.copy(this.viewpoint,g);this.transition=new p(this.viewpoint,a.target,f&&f.duration||this.duration,f&&f.easing||this.easing);g=function(){this.animation===a&&this._updateTask&&("finished"===a.state&&(this.transition.applyRatio(this.viewpoint,1),this.animation._dfd.progress(this.viewpoint)),
this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);a.when(g,g);this._startTime=q();this._updateTask.resume();return this.animation=a},animateContinous:function(h,g){this.stop();this.updateFunction=g;this.viewpoint=h;var f=new a({target:h.clone()});h=function(){this.animation===f&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);f.when(h,h);this._startTime=q();this._updateTask.resume();return this.animation=f},stop:function(){this.animation&&
(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(h){var g=this.animation;g&&g.state!==a.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,h.deltaTime):(h=(q()-this._startTime)/this.transition.duration,g=1<=h,this.transition.applyRatio(this.viewpoint,h),g&&this.animation.finish()),this.animation._dfd.progress(this.viewpoint)):this._updateTask.pause()}})})},"esri/views/2d/unitBezier":function(){define([],function(){var B=function(q,a,m,h){function p(b,
a){var n,u,t,h;a=null==a?1E-6:a;t=b;for(u=0;8>u;u++){h=((f*t+g)*t+x)*t-b;if(Math.abs(h)<a)return t;n=(3*f*t+2*g)*t+x;if(1E-6>Math.abs(n))break;t-=h/n}n=0;u=1;t=b;if(t<n)return n;if(t>u)return u;for(;n<u;){h=((f*t+g)*t+x)*t;if(Math.abs(h-b)<a)break;b>h?n=t:u=t;t=.5*(u-n)+n}return t}var x=3*q,g=3*(m-q)-x,f=1-x-g,n=3*a,u=3*(h-a)-n,b=1-n-u;return function(a,f){a=p(a,f);return((b*a+u)*a+n)*a}},w=/^cubic-bezier\((.*)\)/;B.parse=function(q){var a=B[q]||null;!a&&(q=w.exec(q))&&(q=q[1].split(",").map(function(a){return parseFloat(a.trim())}),
4!==q.length||q.some(function(a){return isNaN(a)})||(a=B.apply(B,q)));return a};B.ease=B(.25,.1,.25,1);B.linear=B(0,0,1,1);B.easeIn=B["ease-in"]=B(.42,0,1,1);B.easeOut=B["ease-out"]=B(0,0,.58,1);B.easeInOut=B["ease-in-out"]=B(.42,0,.58,1);return B})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../Viewpoint ../../core/Error ../../core/promiseUtils ../../core/wgs84Constants ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C){function A(a,l,f,z){return z&&f&&!z.equals(f)&&b.canProject(z,f)&&z.isWebMercator?(z.isWebMercator?(f=l[1],89.99999<f?f=89.99999:-89.99999>f&&(f=-89.99999),f=Math.sin(D.toRadian(f)),a=C.set(a,D.toRadian(l[0])*T,.5*T*Math.log((1+f)/(1-f)))):(f=D.toDegree(l[0]/T),a=C.set(a,f-360*Math.floor((f+180)/360),D.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*l[1]/T))))),a):C.copy(a,l)}function F(b){return b.wkid?b:b.spatialReference||f.WGS84}function H(b,l){return l.type?
C.set(b,l.x,l.y):C.copy(b,l)}function Q(b,l){return Math.max(b.width/l[0],b.height/l[1])*O(b.spatialReference)}function K(a,l,f){var z;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new g(a);if(a.reduce)return a.reduce(function(d,c){return K(c,l,d)},f);a instanceof x?z=a:a.geometry&&(z=a.geometry);if(!z)return null;a="point"===z.type?new p({xmin:z.x,ymin:z.y,xmax:z.x,ymax:z.y,spatialReference:z.spatialReference}):z.extent;if(!a)return null;
z=b.canProject(a,l);if(!a.spatialReference.equals(l)&&z)a=b.project(a,l);else if(!z)return null;return f=f?f.union(a):a.clone()}function y(a,l){if(!a)return new q({targetGeometry:new g,scale:0,rotation:0});var f=l.spatialReference,z=l.size,d=l.viewpoint,c=l.constraints,e=null;"esri.Viewpoint"===a.declaredClass?e=a:a.viewpoint?e=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(e=a.target);var k=null;if(e&&e.targetGeometry)k=e.targetGeometry;else if(a instanceof p)k=a;else if(a||a&&
(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))k=K(a.center,f)||K(a.extent,f)||K(a.target,f)||K(a,f);!k&&d&&d.targetGeometry?k=d.targetGeometry:!k&&l.extent&&(k=l.extent);var r=F(k);f||(f=F(l.spatialReference||l.extent||k));if(!t.canProject(k,f)&&r&&!r.equals(f))return null;var v=H(C.create(),k.center?k.center:k),r=new g(A(v,v,r,f),f),v=null,v=e&&e.targetGeometry&&"point"===e.targetGeometry.type?e.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&
-1!==a.zoom&&c&&c.effectiveLODs?c.zoomToScale(a.zoom):Array.isArray(k)||"point"===k.type||"extent"===k.type&&0===k.width&&0===k.height?l.extent&&b.canProject(l.extent,f)?Q(b.project(l.extent,f),z):l.extent?Q(l.extent,z):d.scale:b.canProject(k.extent,f)?Q(b.project(k.extent,f),z):Q(k.extent,z);l=0;e?l=e.rotation:a.hasOwnProperty("rotation")?l=a.rotation:d&&(l=d.rotation);a=new q({targetGeometry:r,scale:v,rotation:l});c&&(a=c.fit(a),c.rotationEnabled||(a.rotation=l));return a}function I(b,l){var a=
b.targetGeometry,z=l.targetGeometry;a.x=z.x;a.y=z.y;a.spatialReference=z.spatialReference;b.scale=l.scale;b.rotation=l.rotation;return b}function M(b,l,a){return a?C.set(b,.5*(l[0]-a.right+a.left),.5*(l[1]-a.bottom+a.top)):C.scale(b,l,.5)}function N(b,l,a,z){w.getTransform(b,l,a,z);return E.invert(b,b)}function P(b,l,a){var z=D.toRadian(l.rotation)||0;l=Math.abs(Math.cos(z));z=Math.abs(Math.sin(z));return C.set(b,Math.round(a[1]*z+a[0]*l),Math.round(a[1]*l+a[0]*z))}function S(b){return b.scale*(1/
(39.37*n.getMetersPerUnitForSR(b.targetGeometry.spatialReference)*96))}function O(b){return 39.37*n.getMetersPerUnitForSR(b)*96}function W(b){return b.isWrappable?(b=u.getInfo(b),b.valid[1]-b.valid[0]):0}function Z(b,l){return Math.round(W(b)/l)}Object.defineProperty(w,"__esModule",{value:!0});var T=h.wgs84Radius,Y=180/Math.PI;w.extentToScale=Q;w.create=y;w.copy=I;w.getAnchor=M;w.getExtent=function(){var b=C.create();return function(l,a,z){var d=a.targetGeometry;H(b,d);a=.5*S(a);l.xmin=b[0]-a*z[0];
l.ymin=b[1]-a*z[1];l.xmax=b[0]+a*z[0];l.ymax=b[1]+a*z[1];l.spatialReference=d.spatialReference;return l}}();w.setExtent=function(b,l,a,z,d){w.centerAt(b,l,a.center);b.scale=Q(a,z);d&&d.constraints&&d.constraints.constrain(b);return b};w.getOuterExtent=function(){var b=C.create(),l=C.create();return function(a,z,d){H(b,z.targetGeometry);P(l,z,d);d=.5*S(z);a.set({xmin:b[0]-d*l[0],ymin:b[1]-d*l[1],xmax:b[0]+d*l[0],ymax:b[1]+d*l[1],spatialReference:z.targetGeometry.spatialReference});return a}}();w.getClippedExtent=
function(){var b=C.create(),l=C.create();return function(a,z,d){var c=S(z),e=z.targetGeometry.spatialReference,k=Z(e,c);H(b,z.targetGeometry);P(l,z,d);e.isWrappable&&l[0]>k&&(l[0]=k);z=.5*c;a.set({xmin:b[0]-z*l[0],ymin:b[1]-z*l[1],xmax:b[0]+z*l[0],ymax:b[1]+z*l[1],spatialReference:e});return a}}();w.getOuterSize=P;w.getPaddingScreenTranslation=function(){var b=C.create();return function(l,a,z){return C.sub(l,C.scale(l,a,.5),M(b,a,z))}}();var aa=function(){var b=E.create(),l=C.create();return function(a,
z,d,c){var e=S(z);z=D.toRadian(z.rotation)||0;C.set(l,e,e);E.fromScaling(b,l);E.rotate(b,b,z);E.translate(b,b,w.getPaddingScreenTranslation(l,d,c));E.translate(b,b,[0,c.top-c.bottom]);return C.set(a,b[4],b[5])}}();w.getResolution=S;w.getResolutionToScaleFactor=O;w.getMatrix=function(){var b=C.create(),l=C.create(),a=C.create();return function(z,d,c,e,k,r){C.negate(b,d);C.scale(l,c,.5*r);C.set(a,1/e*r,-1/e*r);E.identity(z);E.translate(z,z,l);k&&E.rotate(z,z,k);E.scale(z,z,a);E.translate(z,z,b);return z}}();
w.getTransform=function(){var b=C.create();return function(l,a,z,d){var c=S(a),e=D.toRadian(a.rotation)||0;H(b,a.targetGeometry);return w.getMatrix(l,b,z,c,e,d)}}();w.getTransformNoRotation=function(){var b=C.create();return function(l,a,z,d){var c=S(a);H(b,a.targetGeometry);return w.getMatrix(l,b,z,c,0,d)}}();w.getWorldWidth=W;w.getWorldScreenWidth=Z;w.createAsync=function(b,l){if(b=y(b,l))return m.resolve(b);b=new a("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return m.reject(b)};w.angleBetween=function(){var b=C.create(),l=C.create(),a=C.create();return function(z,d,c){C.subtract(b,z,d);C.normalize(b,b);C.subtract(l,z,c);C.normalize(l,l);C.cross(a,b,l);z=Math.acos(C.dot(b,l)/(C.length(b)*C.length(l)))*Y;0>a[2]&&(z=-z);isNaN(z)&&(z=0);return z}}();w.addPadding=function(){var b=C.create();return function(l,a,z,d){var c=l.targetGeometry;I(l,a);aa(b,a,z,d);c.x+=b[0];c.y+=b[1];return l}}();w.removePadding=function(){var b=C.create();return function(l,a,z,d){var c=
l.targetGeometry;I(l,a);aa(b,a,z,d);c.x-=b[0];c.y-=b[1];return l}}();w.centerAt=function(){var b=C.create();return function(l,a,z){I(l,a);a=l.targetGeometry;var d=F(z),c=F(a);H(b,z);A(b,b,d,c);a.x=b[0];a.y=b[1];return l}}();w.pixelSizeAt=function(b,l,a){return S(l)};w.resize=function(){var b=C.create();return function(l,a,z,d,c){c||(c="center");C.sub(b,z,d);C.scale(b,b,.5);z=b[0];d=b[1];switch(c){case "center":C.set(b,0,0);break;case "left":C.set(b,-z,0);break;case "top":C.set(b,0,d);break;case "right":C.set(b,
z,0);break;case "bottom":C.set(b,0,-d);break;case "top-left":C.set(b,-z,d);break;case "bottom-left":C.set(b,-z,-d);break;case "top-right":C.set(b,z,d);break;case "bottom-right":C.set(b,z,-d)}w.translateBy(l,a,b);return l}}();w.rotateBy=function(b,l,a){I(b,l);b.rotation+=a;return b};w.rotateTo=function(b,l,a){I(b,l);b.rotation=a;return b};w.scaleBy=function(){var b=C.create();return function(l,a,z,d,c){I(l,a);isNaN(z)||0===z||(w.toMap(b,d,a,c),l.scale=a.scale*z,w.toScreen(b,b,l,c),w.translateBy(l,
l,C.set(b,b[0]-d[0],d[1]-b[1])));return l}}();w.scaleTo=function(b,l,a){I(b,l);b.scale=a;return b};w.scaleAndRotateBy=function(){var b=C.create();return function(l,a,z,d,c,e){I(l,a);isNaN(z)||0===z||(w.toMap(b,c,a,e),l.scale=a.scale*z,l.rotation+=d,w.toScreen(b,b,l,e),w.translateBy(l,l,C.set(b,b[0]-c[0],c[1]-b[1])));return l}}();w.padAndScaleAndRotateBy=function(){var b=C.create(),l=C.create();return function(a,z,d,c,e,k,r){w.getPaddingScreenTranslation(l,k,r);C.add(b,e,l);return c?w.scaleAndRotateBy(a,
z,d,c,b,k):w.scaleBy(a,z,d,b,k)}}();w.toMap=function(){var b=E.create();return function(l,a,z,d){return C.transformMat2d(l,a,N(b,z,d,1))}}();w.toScreen=function(){var b=E.create();return function(l,a,z,d){return C.transformMat2d(l,a,w.getTransform(b,z,d,1))}}();w.translateBy=function(){var b=C.create(),l=E.create();return function(a,z,d){I(a,z);var c=S(z),e=a.targetGeometry;E.fromRotation(l,D.toRadian(z.rotation)||0);E.scale(l,l,C.fromValues(c,c));C.transformMat2d(b,d,l);e.x+=b[0];e.y+=b[1];return a}}()})},
"esri/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!B)var B=1E-6;if(!w)var w="undefined"!==typeof Float32Array?Float32Array:Array;if(!q)var q=Math.random;var a={GLMAT_EPSILON:B,GLMAT_ARRAY_TYPE:w,GLMAT_RANDOM:q,setMatrixArrayType:function(h){a.GLMAT_ARRAY_TYPE=h}},m=Math.PI/180,h=180/Math.PI;a.toRadian=function(a){return a*m};a.toDegree=function(a){return a*h};a.setMatrixArrayType(Array);return a})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(B){var w=
B.GLMAT_ARRAY_TYPE;B={create:function(){var q=new w(6);q[0]=1;q[1]=0;q[2]=0;q[3]=1;q[4]=0;q[5]=0;return q},clone:function(q){var a=new w(6);a[0]=q[0];a[1]=q[1];a[2]=q[2];a[3]=q[3];a[4]=q[4];a[5]=q[5];return a},copy:function(q,a){q[0]=a[0];q[1]=a[1];q[2]=a[2];q[3]=a[3];q[4]=a[4];q[5]=a[5];return q},identity:function(q){q[0]=1;q[1]=0;q[2]=0;q[3]=1;q[4]=0;q[5]=0;return q},invert:function(q,a){var m=a[0],h=a[1],p=a[2],x=a[3],g=a[4];a=a[5];var f=m*x-h*p;if(!f)return null;f=1/f;q[0]=x*f;q[1]=-h*f;q[2]=
-p*f;q[3]=m*f;q[4]=(p*a-x*g)*f;q[5]=(h*g-m*a)*f;return q},determinant:function(q){return q[0]*q[3]-q[1]*q[2]},multiply:function(q,a,m){var h=a[0],p=a[1],x=a[2],g=a[3],f=a[4];a=a[5];var n=m[0],u=m[1],b=m[2],t=m[3],D=m[4];m=m[5];q[0]=h*n+x*u;q[1]=p*n+g*u;q[2]=h*b+x*t;q[3]=p*b+g*t;q[4]=h*D+x*m+f;q[5]=p*D+g*m+a;return q}};B.mul=B.multiply;B.rotate=function(q,a,m){var h=a[0],p=a[1],x=a[2],g=a[3],f=a[4];a=a[5];var n=Math.sin(m);m=Math.cos(m);q[0]=h*m+x*n;q[1]=p*m+g*n;q[2]=h*-n+x*m;q[3]=p*-n+g*m;q[4]=f;
q[5]=a;return q};B.scale=function(q,a,m){var h=a[1],p=a[2],x=a[3],g=a[4],f=a[5],n=m[0];m=m[1];q[0]=a[0]*n;q[1]=h*n;q[2]=p*m;q[3]=x*m;q[4]=g;q[5]=f;return q};B.translate=function(q,a,m){var h=a[0],p=a[1],x=a[2],g=a[3],f=a[4];a=a[5];var n=m[0];m=m[1];q[0]=h;q[1]=p;q[2]=x;q[3]=g;q[4]=h*n+x*m+f;q[5]=p*n+g*m+a;return q};B.fromRotation=function(q,a){var m=Math.sin(a);a=Math.cos(a);q[0]=a;q[1]=m;q[2]=-m;q[3]=a;q[4]=0;q[5]=0;return q};B.fromScaling=function(q,a){q[0]=a[0];q[1]=0;q[2]=0;q[3]=a[1];q[4]=0;q[5]=
0;return q};B.fromTranslation=function(q,a){q[0]=1;q[1]=0;q[2]=0;q[3]=1;q[4]=a[0];q[5]=a[1];return q};B.str=function(q){return"mat2d("+q[0]+", "+q[1]+", "+q[2]+", "+q[3]+", "+q[4]+", "+q[5]+")"};B.frob=function(q){return Math.sqrt(Math.pow(q[0],2)+Math.pow(q[1],2)+Math.pow(q[2],2)+Math.pow(q[3],2)+Math.pow(q[4],2)+Math.pow(q[5],2)+1)};return B})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(B){var w=B.GLMAT_ARRAY_TYPE,q=B.GLMAT_RANDOM,a={create:function(){var a=new w(2);
a[0]=0;a[1]=0;return a},clone:function(a){var h=new w(2);h[0]=a[0];h[1]=a[1];return h},fromValues:function(a,h){var m=new w(2);m[0]=a;m[1]=h;return m},copy:function(a,h){a[0]=h[0];a[1]=h[1];return a},set:function(a,h,p){a[0]=h;a[1]=p;return a},add:function(a,h,p){a[0]=h[0]+p[0];a[1]=h[1]+p[1];return a},subtract:function(a,h,p){a[0]=h[0]-p[0];a[1]=h[1]-p[1];return a}};a.sub=a.subtract;a.multiply=function(a,h,p){a[0]=h[0]*p[0];a[1]=h[1]*p[1];return a};a.mul=a.multiply;a.divide=function(a,h,p){a[0]=
h[0]/p[0];a[1]=h[1]/p[1];return a};a.div=a.divide;a.min=function(a,h,p){a[0]=Math.min(h[0],p[0]);a[1]=Math.min(h[1],p[1]);return a};a.max=function(a,h,p){a[0]=Math.max(h[0],p[0]);a[1]=Math.max(h[1],p[1]);return a};a.scale=function(a,h,p){a[0]=h[0]*p;a[1]=h[1]*p;return a};a.scaleAndAdd=function(a,h,p,x){a[0]=h[0]+p[0]*x;a[1]=h[1]+p[1]*x;return a};a.distance=function(a,h){var p=h[0]-a[0];a=h[1]-a[1];return Math.sqrt(p*p+a*a)};a.dist=a.distance;a.squaredDistance=function(a,h){var p=h[0]-a[0];a=h[1]-
a[1];return p*p+a*a};a.sqrDist=a.squaredDistance;a.length=function(a){var h=a[0];a=a[1];return Math.sqrt(h*h+a*a)};a.len=a.length;a.squaredLength=function(a){var h=a[0];a=a[1];return h*h+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,h){a[0]=-h[0];a[1]=-h[1];return a};a.inverse=function(a,h){a[0]=1/h[0];a[1]=1/h[1];return a};a.normalize=function(a,h){var p=h[0],m=h[1],p=p*p+m*m;0<p&&(p=1/Math.sqrt(p),a[0]=h[0]*p,a[1]=h[1]*p);return a};a.dot=function(a,h){return a[0]*h[0]+a[1]*h[1]};a.cross=function(a,
h,p){h=h[0]*p[1]-h[1]*p[0];a[0]=a[1]=0;a[2]=h;return a};a.lerp=function(a,h,p,x){var g=h[0];h=h[1];a[0]=g+x*(p[0]-g);a[1]=h+x*(p[1]-h);return a};a.random=function(a,h){h=h||1;var p=2*q()*Math.PI;a[0]=Math.cos(p)*h;a[1]=Math.sin(p)*h;return a};a.transformMat2=function(a,h,p){var m=h[0];h=h[1];a[0]=p[0]*m+p[2]*h;a[1]=p[1]*m+p[3]*h;return a};a.transformMat2d=function(a,h,p){var m=h[0];h=h[1];a[0]=p[0]*m+p[2]*h+p[4];a[1]=p[1]*m+p[3]*h+p[5];return a};a.transformMat3=function(a,h,p){var m=h[0];h=h[1];a[0]=
p[0]*m+p[3]*h+p[6];a[1]=p[1]*m+p[4]*h+p[7];return a};a.transformMat4=function(a,h,p){var m=h[0];h=h[1];a[0]=p[0]*m+p[4]*h+p[12];a[1]=p[1]*m+p[5]*h+p[13];return a};a.forEach=function(){var m=a.create();return function(a,p,x,g,f,n){p||(p=2);x||(x=0);for(g=g?Math.min(g*p+x,a.length):a.length;x<g;x+=p)m[0]=a[x],m[1]=a[x+1],f(m,m,n),a[x]=m[0],a[x+1]=m[1];return a}}();a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return a})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],
function(B,w,q){Object.defineProperty(w,"__esModule",{value:!0});B=function(){function a(a){var h=this;this.view=a;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.prepare=function(){h._updateParameters.state=h.view.state;h._updateParameters.stationary=h.view.stationary;h._updateParameters.pixelRatio=window.devicePixelRatio};this.update=function(){if(h.updateEnabled){for(var a=h.view,m=a.labelManager,g=a.allLayerViews.toArray().filter(function(b){return b.isFulfilled()&&null==
b.layerViews}),f=g.length,n=a.state,u=0;u<g.length;u++)if(a=g[u],a.attached){var b=a.lastUpdateId;if(null==b||!h.stationary&&!a.moving)a.moving=!0,a.moveStart();b!==n.id&&a.viewChange();h.stationary&&a.moving&&(a.moving=!1,a.moveEnd());a.lastUpdateId=n.id}m&&m.lastUpdateId!==n.id&&(m.viewChange(),m.lastUpdateId=n.id);m=h._layerViewsTrash;for(n=0;n<m.length;n++)a=m[n],h._detachLayerView(a);for(n=m.length=0;n<f;n++)a=g[n],a.isFulfilled()&&!a.attached&&h._attachLayerView(a);g=h._updateParameters;f=h._layerViewsToUpdate;
a=f.slice();f=f.length=0;for(n=a;f<n.length;f++)a=n[f],a.processUpdate(g);f=h._updatablesToUpdate;a=f.slice();for(f=f.length=0;f<a.length;f++)a[f].processUpdate(g);0===h._layerViewsToUpdate.length&&0===h._updatablesToUpdate.length&&0===m.length&&h._frameTaskHandle.pause()}}}a.prototype.destroy=function(){this.stop()};a.prototype.start=function(){var a=this;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=
[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(h){Array.prototype.push.apply(a._layerViewsTrash,h.removed);a.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(h){a.stationary=h;a.requestFrame()});this._frameTaskHandle=q.addFrameTask(this)};a.prototype.stop=function(){var a=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(h){return a._detachLayerView(h)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),
this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0)};a.prototype.requestLayerViewUpdate=function(a){this._layerViewsToUpdate.push(a);this.requestFrame()};a.prototype.requestUpdate=function(a){this._updatablesToUpdate.push(a);this.requestFrame()};a.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};a.prototype._attachLayerView=
function(a){a.attached||(a.attached=!0,a.moving=!1,a.attach())};a.prototype._detachLayerView=function(a){a.attached&&(a.detach(),a.attached=!1,a.moving=!1)};return a}();w.default=B})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(n){function u(){var b=null!==n&&n.apply(this,arguments)||this;b.enabled=!0;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}q(u,n);u.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};u.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(u.prototype,"_rotation",{get:function(){return new g({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"_defaultLODs",{get:function(){var b=this.get("view.defaultsFromMap.tileInfo"),a=this.get("view.spatialReference");return b&&a&&b.spatialReference.equals(a)?b.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"_zoom",{get:function(){return new f({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});u.prototype.canZoomInTo=function(b){var a=this.effectiveMaxScale;return 0===a||b>=a};u.prototype.canZoomOutTo=function(b){var a=this.effectiveMinScale;return 0===a||b<=a};u.prototype.constrain=function(b,a){if(!this.enabled)return b;this._zoom.constrain(b,a);this._rotation.constrain(b,a);return b};u.prototype.fit=function(b){if(!this.enabled||!this.snapToZoom)return b;this._zoom.fit(b);return b};u.prototype.zoomToScale=function(b){return this._zoom.zoomToScale(b)};u.prototype.scaleToZoom=
function(b){return this._zoom.scaleToZoom(b)};u.prototype.snapScale=function(b){return this._zoom.snapToClosestScale(b)};u.prototype.snapToNextScale=function(b){return this._zoom.snapToNextScale(b)};u.prototype.snapToPreviousScale=function(b){return this._zoom.snapToPreviousScale(b)};a([p.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],u.prototype,"effectiveLODs",void 0);a([p.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],u.prototype,"effectiveMinScale",void 0);a([p.property({readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"})],u.prototype,"effectiveMaxScale",void 0);a([p.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],u.prototype,"effectiveMinZoom",void 0);a([p.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],u.prototype,"effectiveMaxZoom",void 0);a([p.property()],u.prototype,"enabled",void 0);a([p.property({type:[x]})],u.prototype,"lods",void 0);a([p.property()],u.prototype,"minScale",void 0);a([p.property()],u.prototype,"maxScale",void 0);a([p.property()],u.prototype,
"minZoom",void 0);a([p.property()],u.prototype,"maxZoom",void 0);a([p.property()],u.prototype,"rotationEnabled",void 0);a([p.property()],u.prototype,"snapToZoom",void 0);a([p.property()],u.prototype,"view",void 0);a([p.property({type:g,dependsOn:["rotationEnabled"]})],u.prototype,"_rotation",null);a([p.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],u.prototype,"_defaultLODs",null);a([p.property({readOnly:!0,type:f,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
u.prototype,"_zoom",null);return u=a([p.subclass("esri.views.2d.MapViewConstraints")],u)}(p.declared(m,h))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(B,w,q,a,m,h){return function(p){function m(){var a=null!==p&&p.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}q(m,p);
g=m;m.prototype.constrain=function(a,g){if(!this.enabled||!g)return a;this.rotationEnabled||(a.rotation=g.rotation);return a};m.prototype.clone=function(){return new g({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var g;a([h.property()],m.prototype,"enabled",void 0);a([h.property()],m.prototype,"rotationEnabled",void 0);return m=g=a([h.subclass("esri.views.2d.constraints.RotationConstraint")],m)}(h.declared(m))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(B,w,q,a,m,h,p){return function(m){function g(){var a=null!==m&&m.apply(this,arguments)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.enabled=!0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}q(g,m);f=g;g.prototype.initialize=function(){var a=this,f,b,g=this.lods;b=this.minScale;f=this.maxScale;var h=this.minZoom,p=this.maxZoom,C=-1,A=-1,m=!1,x=!1;
0!==b&&0!==f&&b<f&&(f=[f,b],b=f[0],f=f[1]);if(g&&g.length){g=g.map(function(b){return b.clone()});g.sort(function(b,a){return a.scale-b.scale});g.forEach(function(b,a){return b.level=a});for(var q,w=0,y=g;w<y.length;w++){var I=y[w];!m&&0<b&&b>=I.scale&&(C=I.level,m=!0);!x&&0<f&&f>=I.scale&&(A=q?q.level:-1,x=!0);q=I}-1===h&&(h=0===b?0:C);-1===p&&(p=0===f?g.length-1:A);h=Math.max(h,0);h=Math.min(h,g.length-1);p=Math.max(p,0);p=Math.min(p,g.length-1);h>p&&(b=[p,h],h=b[0],p=b[1]);b=g[h].scale;f=g[p].scale;
g.splice(0,h);g.splice(p-h+1,g.length);g.forEach(function(b,f){a._lodByScale[b.scale]=b;a._scales[f]=b.scale});this._set("effectiveLODs",g);this._set("effectiveMinZoom",h);this._set("effectiveMaxZoom",p)}this._set("effectiveMinScale",b);this._set("effectiveMaxScale",f)};g.prototype.constrain=function(a,f){if(!this.enabled||f&&a.scale===f.scale)return a;var b=this.effectiveMinScale,g=this.effectiveMaxScale,n=a.targetGeometry,u=f&&f.targetGeometry,h=0!==b&&a.scale>b;if(0!==g&&a.scale<g||h)b=h?b:g,u&&
(f=(b-f.scale)/(a.scale-f.scale),n.x=u.x+(n.x-u.x)*f,n.y=u.y+(n.y-u.y)*f),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};g.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var f=a.scale,b=this.scaleToZoom(f);a.scale=.99<Math.abs(b-Math.round(b))?this.snapToPreviousScale(f):this.zoomToScale(Math.round(b));return a};g.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,
a);var f=this._scales;if(0>=a)return f[0];if(a>=f.length)return f[f.length-1];var b=Math.round(a);return f[b]+(b-a)*(f[Math.round(a-.5)]-f[b])};g.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var f=this._scales,b=0,g=f.length-1,n,h;for(b;b<g;b++){n=f[b];h=f[b+1];if(n<=a)return b+this.effectiveMinZoom;if(h===a)return b+1+this.effectiveMinZoom;if(n>a&&h<a)return b+1-(a-h)/(n-h)+this.effectiveMinZoom}return b};g.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;
a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};g.prototype.snapToNextScale=function(a,f){void 0===f&&(f=.5);if(!this.effectiveLODs)return a*f;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};g.prototype.snapToPreviousScale=function(a,f){void 0===f&&(f=2);if(!this.effectiveLODs)return a*f;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};g.prototype.clone=function(){return new f({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,
minScale:this.minScale,maxScale:this.maxScale})};g.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(f,b,g,n){return Math.abs(b-a)<=Math.abs(f-a)?b:f},this._scales[0]);return this._lodByScale[a].scale};var f;a([h.property({readOnly:!0})],g.prototype,"effectiveLODs",void 0);a([h.property({readOnly:!0})],g.prototype,"effectiveMinZoom",void 0);a([h.property({readOnly:!0})],g.prototype,"effectiveMaxZoom",void 0);a([h.property({readOnly:!0})],
g.prototype,"effectiveMinScale",void 0);a([h.property({readOnly:!0})],g.prototype,"effectiveMaxScale",void 0);a([h.property()],g.prototype,"enabled",void 0);a([h.property({type:[p]})],g.prototype,"lods",void 0);a([h.property()],g.prototype,"minZoom",void 0);a([h.property()],g.prototype,"maxZoom",void 0);a([h.property()],g.prototype,"minScale",void 0);a([h.property()],g.prototype,"maxScale",void 0);a([h.property()],g.prototype,"snapToZoom",void 0);return g=f=a([h.subclass("esri.views.2d.constraints.ZoomConstraint")],
g)}(h.declared(m))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),function(B,w,q,a,m,h,p,x,g,f,n){var u=function(b){function f(){var a=null!==b&&b.apply(this,arguments)||this;a.left=0;a.top=0;a.right=0;a.bottom=0;return a}q(f,b);a([h.property()],
f.prototype,"left",void 0);a([h.property()],f.prototype,"top",void 0);a([h.property()],f.prototype,"right",void 0);a([h.property()],f.prototype,"bottom",void 0);return f=a([h.subclass("esri.views.2d.PaddedViewState.Padding")],f)}(h.declared(m));return function(b){function t(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];a=b.apply(this,a)||this;a.content=new x;a.padding=new u;a.size=n.fromValues(0,0);return a}q(t,b);Object.defineProperty(t.prototype,"clipRect",{get:function(){var b=this.worldScreenWidth;
if(!b)return null;var a=g.toRadian(this.rotation),u=this.width*Math.abs(Math.cos(a))+this.height*Math.abs(Math.sin(a));if(b>u)return null;var h=n.clone(this.screenCenter),t=f.fromTranslation(f.create(),h);f.rotate(t,t,a);n.negate(h,h);f.translate(t,t,h);n.transformMat2d(h,this.paddedScreenCenter,t);return{top:-Math.round(u),left:Math.round(h[0]-.5*b),right:Math.round(h[0]+.5*b),bottom:+Math.round(u)}},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"padding",{set:function(b){this._set("padding",
b||new u);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"size",{set:function(b){this._set("size",b);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"paddedScreenCenter",{get:function(){var b=this.content.size,a=this.padding,b=n.scale(n.create(),b,.5);b[0]+=a.left;b[1]+=a.top;return b},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"viewpoint",{set:function(b){var a=b.clone();this.content.viewpoint=
b;p.addPadding(a,b,this._get("size"),this._get("padding"));this._set("viewpoint",p.addPadding(a.clone(),b,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0});t.prototype._updateContent=function(){var b=n.create(),a=this._get("size"),f=this._get("padding");if(a&&f){var g=this.content;n.set(b,f.left+f.right,f.top+f.bottom);n.subtract(b,a,b);g.size=b;if(b=g.viewpoint)this.viewpoint=b}};a([h.shared({transform:{dependsOn:["padding"]}})],t.prototype,"properties",void 0);a([h.property({dependsOn:["worldScreenWidth",
"rotation","paddedScreenCenter","screenCenter"],readOnly:!0})],t.prototype,"clipRect",null);a([h.property()],t.prototype,"content",void 0);a([h.property({type:u})],t.prototype,"padding",null);a([h.property()],t.prototype,"size",null);a([h.property({dependsOn:["size","padding"],readOnly:!0})],t.prototype,"paddedScreenCenter",null);a([h.property()],t.prototype,"viewpoint",null);return t=a([h.subclass("esri.views.2d.PaddedViewState")],t)}(h.declared(x))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n){var u=[0,0];return function(b){function h(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];a=b.apply(this,a)||this;a.pixelRatio=1;a.size=[0,0];return a}q(h,b);D=h;Object.defineProperty(h.prototype,"center",{get:function(){var b=this.viewpoint.targetGeometry;return n.set(n.create(),b.x,b.y)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"extent",{get:function(){return g.getExtent(new x,this.viewpoint,this.size)},enumerable:!0,configurable:!0});
Object.defineProperty(h.prototype,"height",{get:function(){return this.size?this.size[1]:0},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"inverseTransform",{get:function(){return f.invert(f.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"resolution",{get:function(){return g.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"scale",{get:function(){return this.viewpoint.scale},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"screenCenter",{get:function(){return n.scale(n.create(),this.size,.5)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"transform",{get:function(){return g.getTransform(f.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"transformNoRotation",{get:function(){return g.getTransformNoRotation(f.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"clippedExtent",{get:function(){return g.getClippedExtent(new x,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"worldScreenWidth",{get:function(){return g.getWorldScreenWidth(this.spatialReference,
this.resolution)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"worldWidth",{get:function(){return g.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"y",{get:function(){return this.center[1]},
enumerable:!0,configurable:!0});h.prototype.copy=function(b){var a=this.size,f=this.viewpoint;this.viewpoint=null;this._set("size",null);f&&a?(this.viewpoint=g.copy(f,b.viewpoint),this._set("size",n.copy(a,b.size))):(this.viewpoint=b.viewpoint.clone(),this._set("size",[b.size[0],b.size[1]]));this._set("pixelRatio",b.pixelRatio);return this};h.prototype.clone=function(){return new D({viewpoint:this.viewpoint.clone(),size:n.clone(this.size)})};h.prototype.toMap=function(b,a,f){if(Array.isArray(a))return n.transformMat2d(b,
a,this.inverseTransform);u[0]=a;u[1]=f;return n.transformMat2d(b,u,this.inverseTransform)};h.prototype.toScreen=function(b,a,f){if(Array.isArray(a))return n.transformMat2d(b,a,this.transform);u[0]=a;u[1]=f;return n.transformMat2d(b,u,this.transform)};h.prototype.toScreenNoRotation=function(b,a,f){if(Array.isArray(a))return n.transformMat2d(b,a,this.transformNoRotation);u[0]=a;u[1]=f;return n.transformMat2d(b,u,this.transformNoRotation)};h.prototype.pixelSizeAt=function(b){return g.pixelSizeAt(b,this.viewpoint,
this.size)};var D;a([p.property({dependsOn:["viewpoint.targetGeometry.x","viewpoint.targetGeometry.y"]})],h.prototype,"center",null);a([p.property({readOnly:!0,dependsOn:["viewpoint.scale","viewpoint.targetGeometry.x","viewpoint.targetGeometry.y","viewpoint.targetGeometry.spatialReference","size"]})],h.prototype,"extent",null);a([p.property({readOnly:!0,dependsOn:["size"]})],h.prototype,"height",null);a([p.property({value:0,readOnly:!0,dependsOn:["transform"]})],h.prototype,"id",null);a([p.property({readOnly:!0,
dependsOn:["transform"]})],h.prototype,"inverseTransform",null);a([p.property({readOnly:!0,dependsOn:["viewpoint.targetGeometry.latitude"]})],h.prototype,"latitude",null);a([p.property({readOnly:!0,dependsOn:["viewpoint.targetGeometry.longitude"]})],h.prototype,"longitude",null);a([p.property({type:Number,json:{write:!0}})],h.prototype,"pixelRatio",void 0);a([p.property({readOnly:!0,dependsOn:["viewpoint.scale","viewpoint.targetGeometry.spatialReference"]})],h.prototype,"resolution",null);a([p.property({readOnly:!0,
dependsOn:["viewpoint.rotation"]})],h.prototype,"rotation",null);a([p.property({readOnly:!0,dependsOn:["viewpoint.scale"]})],h.prototype,"scale",null);a([p.property({readOnly:!0,dependsOn:["size"]})],h.prototype,"screenCenter",null);a([p.property({json:{write:!0}})],h.prototype,"size",void 0);a([p.property({readOnly:!0,dependsOn:["viewpoint.targetGeometry.spatialReference"]})],h.prototype,"spatialReference",null);a([p.property({readOnly:!0,dependsOn:"viewpoint.rotation viewpoint.scale viewpoint.targetGeometry.x viewpoint.targetGeometry.y viewpoint.targetGeometry.spatialReference size pixelRatio".split(" ")})],
h.prototype,"transform",null);a([p.property({readOnly:!0,dependsOn:"viewpoint.scale viewpoint.targetGeometry.x viewpoint.targetGeometry.y viewpoint.targetGeometry.spatialReference size pixelRatio".split(" ")})],h.prototype,"transformNoRotation",null);a([p.property({type:m,json:{write:!0}})],h.prototype,"viewpoint",void 0);a([p.property({readOnly:!0,dependsOn:"viewpoint.rotation viewpoint.scale viewpoint.targetGeometry.x viewpoint.targetGeometry.y viewpoint.targetGeometry.spatialReference size".split(" ")})],
h.prototype,"clippedExtent",null);a([p.property({readOnly:!0,dependsOn:["size"]})],h.prototype,"width",null);a([p.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],h.prototype,"worldScreenWidth",null);a([p.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"worldWidth",null);a([p.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"wrappable",null);a([p.property({readOnly:!0,dependsOn:["center"]})],h.prototype,"x",null);a([p.property({readOnly:!0,dependsOn:["center"]})],
h.prototype,"y",null);return h=D=a([p.subclass("esri.views.2d.ViewState")],h)}(p.declared(h))})},"esri/views/2d/LabelManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/HandleOwner ../../core/throttle ../../core/accessorSupport/decorators ../../layers/support/TileInfo ./engine/webgl/definitions ./engine/webgl/collisions/CollisionEngine ./engine/webgl/collisions/LayerViewSorter ./tiling/TileInfoView".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){Object.defineProperty(w,"__esModule",{value:!0});B=function(h){function t(b){b=h.call(this)||this;b._applyVisivilityPassThrottled=p.throttle(b._applyVisivilityPass,64,b);b._previousResolution=Number.POSITIVE_INFINITY;b.lastUpdateId=-1;b.updateRequested=!1;b.view=null;return b}q(t,h);t.prototype.initialize=function(){var a=this,h=g.create({spatialReference:this.view.spatialReference,size:f.TILE_SIZE});this._tileInfoView=new b(h);this._collisionEngine=new n.default(h);
this._layerViewSorter=new u.default(function(b,f){a._collisionEngine.registerLayer(b.layer,f);(f=b.tileRenderer)&&f.forEachTile(function(f){f.isDirty=!0;a.addTile(b.layer.uid,f)});a.requestUpdate()},function(b){a._collisionEngine.unregisterLayer(b.layer);a.requestUpdate()},function(b){(b=b.get("tileRenderer.featuresView"))&&b.fadeInLabels()});this.handles.add(this.view.allLayerViews.on("change",function(b){a._layerViewSorter.update(b)}))};t.prototype.destroy=function(){this._layerViewSorter.destroy();
this._collisionEngine=this._layerViewSorter=null;this._applyVisivilityPassThrottled.remove()};Object.defineProperty(t.prototype,"updating",{get:function(){return this.updateRequested},enumerable:!0,configurable:!0});t.prototype.update=function(b){var a=this._previousResolution,f=b.state.resolution;this._previousResolution=f;f===a&&this._applyVisivilityPassThrottled(b)};t.prototype.viewChange=function(){this.requestUpdate()};t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=
!0,this.view.requestUpdate(this))};t.prototype.processUpdate=function(b){this._set("updateParameters",b);this.updateRequested&&(this.update(b),this.updateRequested=!1)};t.prototype.addTile=function(b,a){this._collisionEngine.addTile(b,a)};t.prototype.removeTile=function(b,a){this._collisionEngine.removeTile(b,a)};t.prototype._applyVisivilityPass=function(b){var a=this._tileInfoView.getClosestInfoForScale(b.state.scale).level;this._collisionEngine.run(b,a)};a([x.property()],t.prototype,"updateRequested",
void 0);a([x.property({readOnly:!0})],t.prototype,"updateParameters",void 0);a([x.property({dependsOn:["updateRequested"]})],t.prototype,"updating",null);a([x.property()],t.prototype,"view",void 0);return t=a([x.subclass("esri.views.2d.layers.labels.LabelManager")],t)}(x.declared(m,h));w.default=B})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),function(B,
w,q,a,m,h,p){return function(m){function g(){var a=m.call(this)||this;a.handles=new h;return a}q(g,m);g.prototype.destroy=function(){this.handles.destroy()};a([p.property({readOnly:!0})],g.prototype,"handles",void 0);return g=a([p.subclass("esri.core.HandleOwner")],g)}(p.declared(m))})},"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});w.EXTRUDE_SCALE=64;w.PICTURE_FILL_COLOR=4294967295;w.TILE_SIZE=512;w.ANGLE_FACTOR_256=
256/360;w.COLLISION_BUCKET_SIZE=128;w.COLLISION_MAX_ZOOM_DELTA=4;w.COLLISION_EARLY_REJECT_BUCKET_SIZE=32})},"esri/views/2d/engine/webgl/collisions/CollisionEngine":function(){define("require exports ../../../../../core/tsSupport/assignHelper @dojo/framework/shim/Map ../../../../../core/Logger ../../../../../core/libs/gl-matrix/mat2d ../../../../../core/libs/gl-matrix/vec2 ../definitions ./CollisionBucket ../util/iterator ../../../tiling/TileKey ../../../../3d/support/mathUtils ../../../../vectorTiles/GeometryUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){Object.defineProperty(w,"__esModule",{value:!0});var t=m.getLogger("esri/views/2d/engine/webgl/collisions/CollisionEngine"),D=x.TILE_SIZE/x.COLLISION_BUCKET_SIZE;B=function(){function m(b){this._layers=new a.default;this._collisionBuckets=new a.default;this._v3Buf1=p.create();this._v3Buf2=p.create();this._mat2dBuf=h.create();this._tileInfo=b}m.prototype.registerLayer=function(b,a){if(b&&!this._layers.has(b.uid)){var f=this._createInfo(a,b.labelingInfo);this._layers.set(b.uid,
f);this._collisionBuckets.forEach(function(b){return b.onRegisterLayer(f.index)})}};m.prototype.unregisterLayer=function(b){var a=this;if(b&&this._layers.has(b.uid)){var f=this._layers.get(b.uid);this._deleteInfo(f);this._layers.delete(b.uid);this._collisionBuckets.forEach(function(b,g){var h=b.getTile(f.index);h&&(h.dirty=!1,b.onUnregisterLayer(f.index),b.canDelete()&&a._collisionBuckets.delete(g))})}};m.prototype.addTile=function(b,a){var f=a.key.id;this._layers.has(b)&&(this._collisionBuckets.has(f)||
this._collisionBuckets.set(f,new g.default(this._layers.size)),this._collisionBuckets.get(f).getTile(this._getIndex(b)).reference=a)};m.prototype.removeTile=function(b,a){this._layers.has(b)&&this._collisionBuckets.has(a)&&(this._collisionBuckets.get(a).getTile(this._getIndex(b)).reference=null)};m.prototype.run=function(b,a){var g=[],h=n.pool.acquire(0,0,0,0);f.forEachIter(this._collisionBuckets.keys(),function(b){h.set(b);h.level===a&&g.push(b)});n.pool.release(h);for(var g=n.sort(g),u=b.state.rotation,
t=this._checkRotation(u),A=0,p=g;A<p.length;A++){var C=p[A];this._computeNeighbors(C)}for(var p=0,m=g;p<m.length;p++)for(C=m[p],t=t||this._collisionBuckets.get(C).isDirty,A=0;A<this._layers.size;A++){var D=this._getCollisionInfo(A);this._resetCollisionBucket(D,C,b,t)}b=0;for(t=g;b<t.length;b++)for(C=t[b],A=0;A<this._layers.size;A++)p=this._getCollisionInfo(A).zoomRanges,this._runCollisionBucket(A,C,a,!!u,p);u=0;for(A=g;u<A.length;u++)C=A[u],this._cleanCollisionBucket(C)};m.prototype._computeNeighbors=
function(b){var a=this._collisionBuckets.get(b);b=n.from(b);a.neighbors=[this._getNeighboringBucket(b,-1,-1),this._getNeighboringBucket(b,0,-1),this._getNeighboringBucket(b,1,-1),this._getNeighboringBucket(b,-1,0),a,this._getNeighboringBucket(b,1,0),this._getNeighboringBucket(b,-1,1),this._getNeighboringBucket(b,0,1),this._getNeighboringBucket(b,1,1)]};m.prototype._getNeighboringBucket=function(b,a,f){b=n.getId(b.level,b.row+f,b.col+a,b.world);return this._collisionBuckets.has(b)?this._collisionBuckets.get(b):
null};m.prototype._checkRotation=function(b){if(!this._lastRotation)return this._lastRotation=b,!1;var a=b!==this._lastRotation;this._lastRotation=b;return a};m.prototype._collectCollisionInfos=function(){var b=[];f.forEachIter(this._layers.values(),function(a){return b.push(a)});return b};m.prototype._createInfo=function(b,a){for(var f=this,g=this._collectCollisionInfos().sort(function(b,a){return b.order-a.order}),h=!1,n=-1,u=0;u<g.length;u++){var t=g[u];!h&&t.order>b&&(n=t.index,h=!0);h&&t.index++}h||
(n=g.length);a=a.map(function(b){return f._convertLabelClass(b)});return{index:n,order:b,zoomRanges:a}};m.prototype._convertLabelClass=function(b){var a=!!b.maxScale,f=!!b.minScale&&this._tileInfo.scaleToZoom(b.minScale)||0;b=a&&this._tileInfo.scaleToZoom(b.maxScale)||255;return{minZoom:Math.floor(10*f),maxZoom:Math.floor(10*b)}};m.prototype._deleteInfo=function(b){var a=b.index;b=this._collectCollisionInfos().sort(function(b,a){return b.index-a.index});for(a+=1;a<b.length;a++)b[a].index--};m.prototype._resetCollisionBucket=
function(a,f,g,n){a=this._collisionBuckets.get(f).getTile(a.index);if(!a)return!1;a=a.reference;if(!a||!a.hasData)return!1;f=this._v3Buf1;var u=this._mat2dBuf;g=g.state;g.toScreen(f,a.coords);a.tileTransform.screenCoord[0]=f[0];a.tileTransform.screenCoord[1]=f[1];h.identity(u);h.rotate(u,u,g.rotation*b.C_DEG_TO_RAD);a.tileTransform.screenTransform.set(u);n&&(a.isDirty=!0);if(!a.isDirty)return!1;n=0;for(g=a.displayObjects;n<g.length;n++)for(a=0,f=g[n].metrics;a<f.length;a++)f[a].maxZoom=0;return!0};
m.prototype._runCollisionBucket=function(b,a,f,g,h){a=this._collisionBuckets.get(a);var n=a.getTile(b);if(n){var u=n.reference;if(u&&u.isDirty)for(var t=0;t<u.displayObjects.length;t++)for(var A=u.displayObjects[t],p=A.id,m=0;m<A.metrics.length;m++){var C=A.metrics[m],D=h[C.index],x=this._computeLabelVisibility(b,t,m,p,a,n,A,A.anchor,C,f,u,g,D);C.minZoom=x;C.maxZoom=D.maxZoom;u.setVisibilityRange(p,m,C.minZoom,C.maxZoom)}}};m.prototype._cleanCollisionBucket=function(b){this._collisionBuckets.get(b).clean()};
m.prototype._computeLabelVisibility=function(b,a,f,g,h,n,u,t,m,x,E,q,w){a=w.minZoom;f=E.tileTransform.screenTransform;f=q?p.transformMat2d(this._v3Buf1,t,f):t;n=m.bounds.center;var A=E.tileTransform.screenCoord;t=f[0]+n[0]+A[0];f=f[1]+n[1]+A[1];n=u.xBucket;var y=u.yBucket,A=u.xOverflow,C=u.yOverflow;u=n-A;n=n+A+1;A=y+C+1;for(y-=C;y<A;y++)for(C=u;C<n;C++)if(!(C<-D||y<-D||C>D||y>D))for(var F=0;F<=b;F++){var I=b===F,H=this._getRelativeSubBucket(F,h,E,C,y);if(H)for(var l=H.neighborTile,R=0,H=H.bucket;R<
H.length;R++){var z=H[R];I&&z.id===g||(a=Math.max(this._compareLabelToDisplayObject(g,m,t,f,z,x,l,q,w),a))}}return a};m.prototype._getRelativeSubBucket=function(b,a,f,g,h){var n=u.sign(Math.floor(g/4)),t=u.sign(Math.floor(h/4));return(b=this._getNeighboringTile(b,a,f,n,t))&&b.index?{bucket:b.index[h-4*t][g-4*n],neighborTile:b.reference}:null};m.prototype._getNeighboringTile=function(b,a,f,g,h){return(b=(a=a.neighbors[3*(1+h)+(1+g)])&&a.getTile(b))&&b.reference&&b.reference.hasData?b:null};m.prototype._compareLabelToDisplayObject=
function(b,a,f,g,h,n,u,t,m){b=m.minZoom;m=10*(n+x.COLLISION_MAX_ZOOM_DELTA);var A=u.tileTransform.screenTransform;t=t?p.transformMat2d(this._v3Buf2,h.anchor,A):h.anchor;A=0;for(h=h.metrics;A<h.length;A++){var y=h[A];if(y.maxZoom&&!(y.minZoom>m||b>=y.maxZoom)){var C=y.bounds.center,D=u.tileTransform.screenCoord,C=this._updateMinZoom(f,g,a.bounds,t[0]+C[0]+D[0],t[1]+C[1]+D[1],y.bounds),C=Math.min(Math.max(Math.ceil(10*(C+n)),0),255);if(!(y.minZoom>=C)){if(255<=C){b=255;break}b=Math.max(b,C)}}}return b};
m.prototype._updateMinZoom=function(b,a,f,g,h,n){return u.log2(Math.min((n.width+f.width)/2/Math.abs(g-b),(n.height+f.height)/2/Math.abs(h-a)))};m.prototype.onLabelsRendered=function(){this._collisionBuckets.forEach(function(b){b.onLabelsRendered()})};m.prototype._getIndex=function(b){return this._layers.get(b).index};m.prototype._getCollisionInfo=function(b){for(var a=0,f=this._collectCollisionInfos();a<f.length;a++){var g=f[a];if(g.index===b)return g}t.error("Tried to get a LayerCollisionInfo for an index that doesn't exist!");
return null};return m}();w.default=B})},"@dojo/framework/shim/Map":function(){(function(B){"object"===typeof module&&"object"===typeof module.exports?(B=B(require,exports),void 0!==B&&(module.exports=B)):"function"===typeof define&&define.amd&&define("require exports tslib ./iterator ./global ./object ./support/has ./Symbol".split(" "),B)})(function(B,w){Object.defineProperty(w,"__esModule",{value:!0});var q=B("tslib"),a=B("./iterator"),m=B("./global"),h=B("./object"),p=B("./support/has");B("./Symbol");
w.Map=m.default.Map;p.default("es6-map")||(w.Map=(x=function(){function g(f){this._keys=[];this._values=[];this[Symbol.toStringTag]="Map";if(f)if(a.isArrayLike(f))for(var g=0;g<f.length;g++){var h=f[g];this.set(h[0],h[1])}else try{for(var g=q.__values(f),b=g.next();!b.done;b=g.next())h=b.value,this.set(h[0],h[1])}catch(E){t={error:E}}finally{try{b&&!b.done&&(p=g.return)&&p.call(g)}finally{if(t)throw t.error;}}var t,p}g.prototype._indexOfKey=function(a,g){for(var f=0,b=a.length;f<b;f++)if(h.is(a[f],
g))return f;return-1};Object.defineProperty(g.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0});g.prototype.clear=function(){this._keys.length=this._values.length=0};g.prototype.delete=function(a){a=this._indexOfKey(this._keys,a);if(0>a)return!1;this._keys.splice(a,1);this._values.splice(a,1);return!0};g.prototype.entries=function(){var f=this,g=this._keys.map(function(a,b){return[a,f._values[b]]});return new a.ShimIterator(g)};g.prototype.forEach=function(a,
g){for(var f=this._keys,b=this._values,h=0,n=f.length;h<n;h++)a.call(g,b[h],f[h],this)};g.prototype.get=function(a){a=this._indexOfKey(this._keys,a);return 0>a?void 0:this._values[a]};g.prototype.has=function(a){return-1<this._indexOfKey(this._keys,a)};g.prototype.keys=function(){return new a.ShimIterator(this._keys)};g.prototype.set=function(a,g){var f=this._indexOfKey(this._keys,a),f=0>f?this._keys.length:f;this._keys[f]=a;this._values[f]=g;return this};g.prototype.values=function(){return new a.ShimIterator(this._values)};
g.prototype[Symbol.iterator]=function(){return this.entries()};return g}(),x[Symbol.species]=x,x));w.default=w.Map;var x})},"@dojo/framework/shim/object":function(){(function(B){"object"===typeof module&&"object"===typeof module.exports?(B=B(require,exports),void 0!==B&&(module.exports=B)):"function"===typeof define&&define.amd&&define(["require","exports","./global","./support/has","./Symbol"],B)})(function(B,w){Object.defineProperty(w,"__esModule",{value:!0});var q=B("./global"),a=B("./support/has"),
m=B("./Symbol");a.default("es6-object")?(B=q.default.Object,w.assign=B.assign,w.getOwnPropertyDescriptor=B.getOwnPropertyDescriptor,w.getOwnPropertyNames=B.getOwnPropertyNames,w.getOwnPropertySymbols=B.getOwnPropertySymbols,w.is=B.is,w.keys=B.keys):(w.keys=function(a){return Object.keys(a).filter(function(a){return!a.match(/^@@.+/)})},w.assign=function(a){for(var h=[],m=1;m<arguments.length;m++)h[m-1]=arguments[m];if(null==a)throw new TypeError("Cannot convert undefined or null to object");var g=
Object(a);h.forEach(function(a){a&&w.keys(a).forEach(function(f){g[f]=a[f]})});return g},w.getOwnPropertyDescriptor=function(a,p){m.isSymbol(p);return Object.getOwnPropertyDescriptor(a,p)},w.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!a.match(/^@@.+/)})},w.getOwnPropertySymbols=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!!a.match(/^@@.+/)}).map(function(a){return Symbol.for(a.substring(2))})},w.is=function(a,m){return a===
m?0!==a||1/a===1/m:a!==a&&m!==m});a.default("es2017-object")?(B=q.default.Object,w.getOwnPropertyDescriptors=B.getOwnPropertyDescriptors,w.entries=B.entries,w.values=B.values):(w.getOwnPropertyDescriptors=function(a){return w.getOwnPropertyNames(a).reduce(function(h,m){h[m]=w.getOwnPropertyDescriptor(a,m);return h},{})},w.entries=function(a){return w.keys(a).map(function(h){return[h,a[h]]})},w.values=function(a){return w.keys(a).map(function(h){return a[h]})})})},"esri/core/libs/gl-matrix/mat2d":function(){define(["./common"],
function(B){var w={create:function(){var q=new B.ARRAY_TYPE(6);q[0]=1;q[1]=0;q[2]=0;q[3]=1;q[4]=0;q[5]=0;return q},clone:function(q){var a=new B.ARRAY_TYPE(6);a[0]=q[0];a[1]=q[1];a[2]=q[2];a[3]=q[3];a[4]=q[4];a[5]=q[5];return a},copy:function(q,a){q[0]=a[0];q[1]=a[1];q[2]=a[2];q[3]=a[3];q[4]=a[4];q[5]=a[5];return q},identity:function(q){q[0]=1;q[1]=0;q[2]=0;q[3]=1;q[4]=0;q[5]=0;return q},fromValues:function(q,a,m,h,p,x){var g=new B.ARRAY_TYPE(6);g[0]=q;g[1]=a;g[2]=m;g[3]=h;g[4]=p;g[5]=x;return g},
set:function(q,a,m,h,p,x,g){q[0]=a;q[1]=m;q[2]=h;q[3]=p;q[4]=x;q[5]=g;return q},invert:function(q,a){var m=a[0],h=a[1],p=a[2],x=a[3],g=a[4];a=a[5];var f=m*x-h*p;if(!f)return null;f=1/f;q[0]=x*f;q[1]=-h*f;q[2]=-p*f;q[3]=m*f;q[4]=(p*a-x*g)*f;q[5]=(h*g-m*a)*f;return q},determinant:function(q){return q[0]*q[3]-q[1]*q[2]},multiply:function(q,a,m){var h=a[0],p=a[1],x=a[2],g=a[3],f=a[4];a=a[5];var n=m[0],u=m[1],b=m[2],t=m[3],D=m[4];m=m[5];q[0]=h*n+x*u;q[1]=p*n+g*u;q[2]=h*b+x*t;q[3]=p*b+g*t;q[4]=h*D+x*m+
f;q[5]=p*D+g*m+a;return q}};w.mul=w.multiply;w.rotate=function(q,a,m){var h=a[0],p=a[1],x=a[2],g=a[3],f=a[4];a=a[5];var n=Math.sin(m);m=Math.cos(m);q[0]=h*m+x*n;q[1]=p*m+g*n;q[2]=h*-n+x*m;q[3]=p*-n+g*m;q[4]=f;q[5]=a;return q};w.scale=function(q,a,m){var h=a[1],p=a[2],x=a[3],g=a[4],f=a[5],n=m[0];m=m[1];q[0]=a[0]*n;q[1]=h*n;q[2]=p*m;q[3]=x*m;q[4]=g;q[5]=f;return q};w.translate=function(q,a,m){var h=a[0],p=a[1],x=a[2],g=a[3],f=a[4];a=a[5];var n=m[0];m=m[1];q[0]=h;q[1]=p;q[2]=x;q[3]=g;q[4]=h*n+x*m+f;
q[5]=p*n+g*m+a;return q};w.fromRotation=function(q,a){var m=Math.sin(a);a=Math.cos(a);q[0]=a;q[1]=m;q[2]=-m;q[3]=a;q[4]=0;q[5]=0;return q};w.fromScaling=function(q,a){q[0]=a[0];q[1]=0;q[2]=0;q[3]=a[1];q[4]=0;q[5]=0;return q};w.fromTranslation=function(q,a){q[0]=1;q[1]=0;q[2]=0;q[3]=1;q[4]=a[0];q[5]=a[1];return q};w.str=function(q){return"mat2d("+q[0]+", "+q[1]+", "+q[2]+", "+q[3]+", "+q[4]+", "+q[5]+")"};w.frob=function(q){return Math.sqrt(Math.pow(q[0],2)+Math.pow(q[1],2)+Math.pow(q[2],2)+Math.pow(q[3],
2)+Math.pow(q[4],2)+Math.pow(q[5],2)+1)};w.add=function(q,a,m){q[0]=a[0]+m[0];q[1]=a[1]+m[1];q[2]=a[2]+m[2];q[3]=a[3]+m[3];q[4]=a[4]+m[4];q[5]=a[5]+m[5];return q};w.subtract=function(q,a,m){q[0]=a[0]-m[0];q[1]=a[1]-m[1];q[2]=a[2]-m[2];q[3]=a[3]-m[3];q[4]=a[4]-m[4];q[5]=a[5]-m[5];return q};w.sub=w.subtract;w.multiplyScalar=function(q,a,m){q[0]=a[0]*m;q[1]=a[1]*m;q[2]=a[2]*m;q[3]=a[3]*m;q[4]=a[4]*m;q[5]=a[5]*m;return q};w.multiplyScalarAndAdd=function(q,a,m,h){q[0]=a[0]+m[0]*h;q[1]=a[1]+m[1]*h;q[2]=
a[2]+m[2]*h;q[3]=a[3]+m[3]*h;q[4]=a[4]+m[4]*h;q[5]=a[5]+m[5]*h;return q};w.exactEquals=function(q,a){return q[0]===a[0]&&q[1]===a[1]&&q[2]===a[2]&&q[3]===a[3]&&q[4]===a[4]&&q[5]===a[5]};w.equals=function(q,a){var m=q[0],h=q[1],p=q[2],x=q[3],g=q[4];q=q[5];var f=a[0],n=a[1],u=a[2],b=a[3],t=a[4];a=a[5];return Math.abs(m-f)<=B.EPSILON*Math.max(1,Math.abs(m),Math.abs(f))&&Math.abs(h-n)<=B.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(p-u)<=B.EPSILON*Math.max(1,Math.abs(p),Math.abs(u))&&Math.abs(x-
b)<=B.EPSILON*Math.max(1,Math.abs(x),Math.abs(b))&&Math.abs(g-t)<=B.EPSILON*Math.max(1,Math.abs(g),Math.abs(t))&&Math.abs(q-a)<=B.EPSILON*Math.max(1,Math.abs(q),Math.abs(a))};return w})},"esri/views/2d/engine/webgl/collisions/CollisionBucket":function(){define(["require","exports","./CollisionBucketEntry"],function(B,w,q){Object.defineProperty(w,"__esModule",{value:!0});B=function(){function a(a){this.neighbors=null;this._tiles=Array(a);for(var h=0;h<a;h++)this._tiles[h]=new q.default}Object.defineProperty(a.prototype,
"isDirty",{get:function(){for(var a=0,h=this._tiles;a<h.length;a++)if(h[a].dirty)return!0;return!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._tiles.length},enumerable:!0,configurable:!0});a.prototype.getTile=function(a){return this._tiles[a]};a.prototype.onRegisterLayer=function(a){this.invalidateRange(a);this._add(a)};a.prototype.onUnregisterLayer=function(a){this.invalidateRange(a);this._remove(a)};a.prototype.onLabelsRendered=function(){};
a.prototype.invalidateRange=function(a){for(;a<this._tiles.length;a++)this._tiles[a].dirty=!0};a.prototype.add=function(a){this._add(a)};a.prototype.remove=function(a){this._remove(a)};a.prototype.canDelete=function(){return 0===this._tiles.length};a.prototype.clean=function(){for(var a=0,h=this._tiles;a<h.length;a++)h[a].dirty=!1};a.prototype._add=function(a){var h=[];if(a>=this._tiles.length)this._tiles.push(new q.default);else{for(var p=0;p<this._tiles.length;p++)p===a&&h.push(new q.default),h.push(this._tiles[p]);
this._tiles=h}};a.prototype._remove=function(a){for(var h=[],p=0;p<this._tiles.length;p++)p!==a&&h.push(this._tiles[p]);this._tiles=h};return a}();w.default=B})},"esri/views/2d/engine/webgl/collisions/CollisionBucketEntry":function(){define(["require","exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});B=function(){function q(){this._reference=null}Object.defineProperty(q.prototype,"dirty",{get:function(){return this.reference&&this.reference.isDirty},set:function(a){this.reference&&
(this.reference.isDirty=a)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"index",{get:function(){return this._reference.labelIndex},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"reference",{get:function(){return this._reference},set:function(a){this._reference=a},enumerable:!0,configurable:!0});return q}();w.default=B})},"esri/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});
w.forEachIter=function(q,a){for(;;){var m=q.next();if(m.done)break;a(m.value)}}})},"esri/views/2d/engine/webgl/collisions/LayerViewSorter":function(){define(["require","exports","@dojo/framework/shim/Map"],function(B,w,q){function a(a){return"esri.views.2d.layers.FeatureLayerView2D"===a.declaredClass||"esri.views.2d.layers.StreamLayerView2D"===a.declaredClass}Object.defineProperty(w,"__esModule",{value:!0});B=function(){function m(a,p,m){void 0===m&&(m=null);this.registerLayer=a;this.unregisterLayer=
p;this.onLabelsVisible=m;this._layerViewState=new q.default;this._priorityCounter=4294967295}m.prototype.update=function(h){for(var p=h.removed,m=0,g=h.added;m<g.length;m++){h=g[m];var f;if(f=a(h))a:switch(h.get("layer.renderer.type")){case "class-breaks":case "simple":case "unique-value":f=!0;break a;default:f=!1}f&&!this._layerViewState.has(h)&&this._createState(h)}for(m=0;m<p.length;m++)h=p[m],a(h)&&this._layerViewState.has(h)&&this._deleteState(h);this._recomputeOrder()};m.prototype.destroy=function(){var a=
this;this._layerViewState.forEach(function(h,m){return a._deleteState(m)})};m.prototype._createState=function(a){var h=this,m={enabled:a.labelsVisible,priority:this._priorityCounter--,order:null,handle:null};m.handle=a.watch("labelsVisible",function(a){m.enabled=a;h._recomputeOrder();h.onLabelsVisible&&h._layerViewState.forEach(function(a,g){return h.onLabelsVisible(g)})});this._layerViewState.set(a,m);return m};m.prototype._deleteState=function(a){var h=this._layerViewState.get(a);h.handle.remove();
h.enabled&&this.unregisterLayer(a);this._layerViewState.delete(a)};m.prototype._recomputeOrder=function(){var a=[];this._layerViewState.forEach(function(f,g){a.push({layerView:g,state:f})});a.sort(function(a,g){return a.state.priority-g.state.priority});for(var m=0,x=0;x<a.length;x++){var g=a[x];g.state.order!==m&&(g.state.order=m,this.unregisterLayer(g.layerView));g.state.enabled?this.registerLayer(g.layerView,m):this.unregisterLayer(g.layerView);++m}};return m}();w.default=B})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(B,w,q,a,m,h,p){var x=new h("0/0/0/0"),g=function(){function a(a,b,f,g,h,n,A,m){this.x=a;this.ymin=b;this.ymax=f;this.invM=g;this.leftAdjust=h;this.rightAdjust=n;this.leftBound=A;this.rightBound=m}a.create=function(f,b){var g;f[1]>b[1]&&(g=[b,f],f=g[0],b=g[1]);g=f[0];f=f[1];var h=b[0];b=b[1];var n=h-g,u=b-f,u=0!==u?n/u:0,A=(Math.ceil(f)-f)*u,m=(Math.floor(f)-f)*u;return new a(g,Math.floor(f),Math.ceil(b),u,0>n?A:m,0>n?m:A,0>n?h:g,0>n?g:h)};a.prototype.incrRow=function(){this.x+=this.invM};
a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),f=[[0,0],[0,0],[0,0],[0,0]];return function(){function n(f,b){var g=this;this.tileInfo=f;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var h=f.lods.slice();h.sort(function(b,a){return a.scale-b.scale});var n=this._lodInfos=h.map(function(g){return a.create(f,
g,b)});h.forEach(function(b,a){g._infoByLevel[b.level]=n[a];g._infoByScale[b.scale]=n[a];g.scales[a]=b.scale},this);this._wrap=f.isWrappable}n.prototype.getLODInfoAt=function(a){return this._infoByLevel[a.level]};n.prototype.getTileBounds=function(a,b,f){void 0===f&&(f=!1);x.set(b);return(b=this._infoByLevel[x.level])?b.getTileBounds(a,x,f):a};n.prototype.getTileCoords=function(a,b,f){void 0===f&&(f=!1);x.set(b);return(b=this._infoByLevel[x.level])?b.getTileCoords(a,x,f):a};n.prototype.getTileCoverage=
function(a,b){void 0===b&&(b=192);var h=this.getClosestInfoForScale(a.scale),n=m.pool.acquire(h),u=this._wrap,C;C=Infinity;var A=-Infinity,x,q,w=n.spans;f[0][0]=f[0][1]=f[1][1]=f[3][0]=-b;f[1][0]=f[2][0]=a.size[0]+b;f[2][1]=f[3][1]=a.size[1]+b;for(b=0;b<f.length;b++){var K=f[b];a.toMap(K,K);K[0]=h.getColumnForX(K[0]);K[1]=h.getRowForY(K[1])}a=[];K=3;for(b=0;4>b;b++){if(f[b][1]!==f[K][1]){var y=g.create(f[b],f[K]);C=Math.min(y.ymin,C);A=Math.max(y.ymax,A);void 0===a[y.ymin]&&(a[y.ymin]=[]);a[y.ymin].push(y)}K=
b}if(null==C||null==A||100<A-C)return null;for(K=[];C<A;){null!=a[C]&&(K=K.concat(a[C]));x=Infinity;q=-Infinity;for(b=K.length-1;0<=b;b--)y=K[b],x=Math.min(x,y.getLeftCol()),q=Math.max(q,y.getRightCol());x=Math.floor(x);q=Math.floor(q);if(C>=h.first[1]&&C<=h.last[1])if(u)if(h.size[0]<h.worldSize[0])for(y=Math.floor(q/h.worldSize[0]),b=Math.floor(x/h.worldSize[0]);b<=y;b++)w.push(new p(C,Math.max(h.getFirstColumnForWorld(b),x),Math.min(h.getLastColumnForWorld(b),q)));else w.push(new p(C,x,q));else x>
h.last[0]||q<h.first[0]||(x=Math.max(x,h.first[0]),q=Math.min(q,h.last[0]),w.push(new p(C,x,q)));C+=1;for(b=K.length-1;0<=b;b--)y=K[b],y.ymax>=C?y.incrRow():K.splice(b,1)}return n};n.prototype.getTileIdAtParent=function(a,b){b=h.pool.acquire(b);var f=this._infoByLevel[b.level];if(a.resolution<f.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+f.resolution);return a.resolution===f.resolution?b.id:h.getId(a.level,Math.floor(b.row*
f.resolution/a.resolution+.01),Math.floor(b.col*f.resolution/a.resolution+.01),b.world)};n.prototype.getTileParentId=function(a){a=h.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return h.pool.release(a),null;b=this.getTileIdAtParent(this._lodInfos[b],a);h.pool.release(a);return b};n.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};n.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};n.prototype.intersects=function(a,b){var f=h.pool.acquire(b);b=this._infoByLevel[f.level];var g=a.lodInfo;if(g.resolution>b.resolution){var n=h.pool.acquire(this.getTileIdAtParent(g,f)),u=g.denormalizeCol(n.col,n.world);b=a.spans.some(function(b){return b.row===n.row&&b.colFrom<=u&&b.colTo>=u});h.pool.release(f);h.pool.release(n);return b}if(g.resolution<b.resolution){var A=a.spans.reduce(function(b,a){b[0]=Math.min(b[0],a.row);b[1]=Math.max(b[1],a.row);b[2]=Math.min(b[2],a.colFrom);b[3]=
Math.max(b[3],a.colTo);return b},[Infinity,-Infinity,Infinity,-Infinity]);a=A[0];var m=A[1],p=A[2],A=A[3],x=b.denormalizeCol(f.col,f.world),q=g.getColumnForX(b.getXForColumn(x)),y=g.getRowForY(b.getYForRow(f.row)),x=g.getColumnForX(b.getXForColumn(x+1))-1;b=g.getRowForY(b.getYForRow(f.row+1))-1;h.pool.release(f);return!(q>A||x<p||y>m||b<a)}var I=g.denormalizeCol(f.col,f.world);b=a.spans.some(function(b){return b.row===f.row&&b.colFrom<=I&&b.colTo>=I});h.pool.release(f);return b};n.prototype.normalizeBounds=
function(a,b,f){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=q.getInfo(this.tileInfo.spatialReference),f=-f*(b.valid[1]-b.valid[0]),a[0]+=f,a[2]+=f);return a};n.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,f,g,h){return Math.abs(f-a)<Math.abs(b-a)?f:b},b[0]));return this._infoByScale[a]};n.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var f=b.length-1;0<=f;f--)if(a<
b[f])return f===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[f]].level+(b[f]-a)/(b[f]-b[f+1]);return this._infoByScale[b[0]].level};return n}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(B,w,q,a){function m(a,h,g){a[0]=h;a[1]=g;return a}var h=new a("0/0/0/0");return function(){function a(a,g,f,h,u,b,t,m,p,C,A,F){this.level=a;this.resolution=g;this.scale=f;this.origin=h;this.first=
u;this.last=b;this.size=t;this.norm=m;this.worldStart=p;this.worldEnd=C;this.worldSize=A;this.wrap=F}a.create=function(h,g,f){var n=q.getInfo(h.spatialReference),u=[h.origin.x,h.origin.y],b=[h.size[0]*g.resolution,h.size[1]*g.resolution],t=[-Infinity,-Infinity],p=[Infinity,Infinity],x=[Infinity,Infinity];f&&(m(t,Math.max(0,Math.floor((f.xmin-u[0])/b[0])),Math.max(0,Math.floor((u[1]-f.ymax)/b[1]))),m(p,Math.max(0,Math.floor((f.xmax-u[0])/b[0])),Math.max(0,Math.floor((u[1]-f.ymin)/b[1]))),m(x,p[0]-
t[0]+1,p[1]-t[1]+1));var C;h.isWrappable?(h=[Math.ceil(Math.round(2*n.origin[1]/g.resolution)/h.size[0]),x[1]],n=[Math.floor((n.origin[0]-u[0])/b[0]),t[1]],f=[h[0]+n[0]-1,p[1]],C=!0):(n=t,f=p,h=x,C=!1);return new a(g.level,g.resolution,g.scale,u,t,p,x,b,n,f,h,C)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var g=this.worldSize[0];return 0>a?g-1-Math.abs((a+1)%g):a%g};a.prototype.denormalizeCol=function(a,g){return this.wrap?this.worldSize[0]*g+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?
Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-
a*this.norm[1]};a.prototype.getTileBounds=function(a,g,f){void 0===f&&(f=!1);h.set(g);var n=f?h.col:this.denormalizeCol(h.col,h.world),u=h.row;g=this.getXForColumn(n);f=this.getYForRow(u+1);n=this.getXForColumn(n+1);u=this.getYForRow(u);a[0]=g;a[1]=f;a[2]=n;a[3]=u;return a};a.prototype.getTileCoords=function(a,g,f){void 0===f&&(f=!1);h.set(g);g=f?h.col:this.denormalizeCol(h.col,h.world);Array.isArray(a)?m(a,this.getXForColumn(g),this.getYForRow(h.row)):(a.x=this.getXForColumn(g),a.y=this.getYForRow(h.row));
return a};return a}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(B,w,q,a,m){return function(){function h(a){this.lodInfo=a;this.spans=q.acquire()}h.prototype.release=function(){for(var a=0,h=this.spans;a<h.length;a++)m.pool.release(h[a]);q.release(this.spans)};h.prototype.forEach=function(a,h){var g=this.spans,f=this.lodInfo,n=f.level;if(0!==g.length)for(var u=0;u<g.length;u++)for(var b=
g[u],t=b.row,m=b.colTo,b=b.colFrom;b<=m;b++)a.call(h,n,t,f.normalizeCol(b),f.getWorldForColumn(b))};h.pool=new a(h,!0);return h}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(B,w,q){return function(){function a(a,h,p){this.row=a;this.colFrom=h;this.colTo=p}a.pool=new q(a,!0);return a}()})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/Error ../../../core/promiseUtils ../../../core/scheduling ./DOMContainer ../../support/screenshotUtils".split(" "),
function(B,w,q,a,m,h,p,x){function g(a,h){for(var f=0;f<h.length;f++){var b=h[f];"takeScreenshot"in b?a.push(b):"children"in b&&g(a,b.children)}return a}return function(f){function n(a){var b=f.call(this)||this;b.element=a;b._renderParameters={state:b.state,pixelRatio:window.devicePixelRatio,stationary:!1};b._renderRequested=!1;b._taskHandle=h.addFrameTask({render:function(){return b.renderFrame()}});b._stationary=!0;b.attached=!0;b._taskHandle.pause();return b}q(n,f);n.prototype.destroy=function(){this.removeAllChildren();
this.renderFrame();this._taskHandle.remove();this._taskHandle=null};Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});n.prototype.start=function(){this._taskHandle.resume()};n.prototype.stop=
function(){this._taskHandle.pause()};n.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle&&this._taskHandle.resume()};n.prototype.takeScreenshot=function(f){var b=g([],this.children);if(!b)return m.reject(new a("mapview:take-screenshot-unavailable"));var h=f.region,n=h.width,u=h.height;return m.eachAlways(b.map(function(a){return a.takeScreenshot(f)})).then(function(a){var b=document.createElement("canvas"),g=b.getContext("2d"),h=document.createElement("canvas"),t=h.getContext("2d");
b.width=n;b.height=u;h.width=n;h.height=u;a.forEach(function(a){if(a=a.value)t.putImageData(a.data,0,0),g.drawImage(h,0,0)});return{dataUrl:x.toDataUrl(b,f),data:g.getImageData(0,0,n,u)}})};n.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this.processRender(this._renderParameters));this._renderRequested||this._taskHandle.pause()};
return n}(p)})},"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(B,w,q,a){return function(a){function h(){return null!==a&&a.apply(this,arguments)||this}q(h,a);h.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};h.prototype.setElement=function(a){this.element=a};h.prototype.doRender=function(h){var m=this.element.style;this.visible?
(m.display="block",a.prototype.doRender.call(this,h)):m.display="none"};h.prototype.prepareChildrenRenderParameters=function(a){return a};h.prototype.attachChild=function(a,h){var g=a.element;g||(g=a.createElement(),a.setElement(g));return a.attach(h)};h.prototype.detachChild=function(a,h){a.detach(h);this.element.contains(a.element)&&this.element.removeChild(a.element);a.setElement(null)};h.prototype.renderChildren=function(h){for(var m=this.children,g=this.element.childNodes,f=0,n=m.length,u=0;u<
n;u++)if(m[u].attached){var b=m[u].element;g[f]!==b&&(null!=g[f+1]?this.element.insertBefore(b,g[f]):this.element.appendChild(b));f+=1}a.prototype.renderChildren.call(this,h)};return h}(a)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(B,w,q,a){var m;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]=
"DONE"})(m||(m={}));return function(a){function h(){var h=null!==a&&a.apply(this,arguments)||this;h._childrenSet=new Set;h._childrenToAttach=[];h._childrenToDetach=[];h._renderPhase=m.DONE;h.children=[];return h}q(h,a);Object.defineProperty(h.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});h.prototype.detach=function(a){var g=this.children.concat(this._childrenToDetach);a=this.prepareChildrenRenderParameters(a);for(var f=0;f<g.length;f++){var h=
g[f];h.attached&&(this.detachChild(h,a),h.attached=!1,h.parent=null)}};h.prototype.doRender=function(a){var g=this.prepareChildrenRenderParameters(a);this._renderPhase=m.BEFORE;this.beforeRenderChildren(a,g);this._renderPhase=m.ATTACHING;this.attachChildren(g);this._renderPhase=m.DETACHING;for(var f=this._childrenToDetach;0<f.length;){var h=f.shift();this.detachChild(h,g);h.attached=!1;h.parent=null}this._renderPhase=m.RENDERING;this.renderChildren(g);this._renderPhase=m.AFTER;this.afterRenderChildren(a,
g);this._renderPhase=m.DONE};h.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};h.prototype.addChildAt=function(a,g){void 0===g&&(g=this.numChildren);if(!a||this.contains(a))return a;var f=a.parent;f&&f!==this&&f.removeChild(a);g>=this.numChildren?this.children.push(a):this.children.splice(g,0,a);this._childrenSet.add(a);g=this._childrenToDetach.indexOf(a);-1<g&&this._childrenToDetach.splice(g,1);this._childrenToAttach.push(a);this._renderPhase>=m.RENDERING&&this.requestRender();
return a};h.prototype.contains=function(a){return this._childrenSet.has(a)};h.prototype.getChildIndex=function(a){return this.children.indexOf(a)};h.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};h.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};h.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};h.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;
a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=m.RENDERING&&this.requestRender();else{var g=this._childrenToAttach.indexOf(a);-1<g&&this._childrenToAttach.splice(g,1)}return a};h.prototype.requestChildRender=function(a){a&&a.parent===this&&this._renderPhase>=m.RENDERING&&this.requestRender()};h.prototype.setChildIndex=function(a,g){var f=this.getChildIndex(a);-1<f&&(this.children.splice(f,1),this.children.splice(g,0,a),
this._renderPhase>=m.RENDERING&&this.requestRender())};h.prototype.sortChildren=function(a){this._renderPhase>m.RENDERING&&this.requestRender();return this.children.sort(a)};h.prototype.attachChildren=function(a){var g=this._childrenToAttach;if(0!==g.length)for(var f=0,h=!1;!h;)h=g[f],this.attachChild(h,a)?(h.attached=!0,h.parent=this,g.splice(f,1)):++f,h=g.length===f};h.prototype.renderChildren=function(a){for(var g=this.children,f=g.length,h=0;h<f;h++){var u=g[h];u.attached&&this.renderChild(u,
a)}};h.prototype.beforeRenderChildren=function(a,g){};h.prototype.attachChild=function(a,g){return a.attach(g)};h.prototype.detachChild=function(a,g){a.detach(g)};h.prototype.renderChild=function(a,g){a.processRender(g)};h.prototype.afterRenderChildren=function(a,g){};return h}(a)})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q){var K={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},y={zoomIn:["\x3d","+"],zoomOut:["-","_"]},I={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(m){function w(){var a=null!==m&&m.apply(this,arguments)||this;a._handles=new h;return a}q(w,m);w.prototype.initialize=function(){var a=this;this.viewEvents=new H.ViewEvents(this.view);
this._handles.add([p.whenNot(this.view,"ready",function(){return a._disconnect()}),p.when(this.view,"ready",function(){return a._connect()})])};w.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};w.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};w.prototype._connect=
function(){var a=new A.BrowserEventSource(this.view.surface,this.view.input),h=new F.InputManager(a);h.installHandlers("prevent-context-menu",[new Q.PreventContextMenu]);h.installHandlers("navigation",[new C.PinchRotateAndZoom(this.view),new u.GamepadNavigation(this.view),new E.MouseWheelZoom(this.view),new g.DoubleClickZoom(this.view),new f.DragPan(this.view,"primary"),new b.KeyPan(this.view,K),new D.KeyZoom(this.view,y),new t.KeyRotate(this.view,I),new n.DragRotate(this.view,"secondary"),new g.DoubleClickZoom(this.view,
["Ctrl"])]);this.viewEvents.connect(h);this._source=a;this._inputManager=h};a([x.property()],w.prototype,"view",void 0);return w=a([x.subclass("esri.views.2d.input.MapViewInputManager")],w)}(x.declared(m))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(B,w,q,a,m){Object.defineProperty(w,"__esModule",{value:!0});B=function(a){function h(h,g){var f=
a.call(this,!0)||this;f.view=h;f.registerIncoming("double-click",g,function(a){return f._handleDoubleClick(a,g)});return f}q(h,a);h.prototype._handleDoubleClick=function(a,g){m.eventMatchesPointerAction(a.data,"primary")&&(a.stopPropagation(),g?this.view.mapViewNavigation.zoomOut([a.data.x,a.data.y]):this.view.mapViewNavigation.zoomIn([a.data.x,a.data.y]))};return h}(a.InputHandler);w.DoubleClickZoom=B})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(B,w,q,a,m,h){Object.defineProperty(w,"__esModule",{value:!0});B=function(m){function p(g,f,n){var u=m.call(this,!0)||this;u.view=g;u.pointerAction=f;u.registerIncoming("drag",n,function(a){return u._handleDrag(a)});u.registerIncoming("pointer-down",function(a){return u.stopMomentumNavigation()});var b=u.view.mapViewNavigation;u.dragEventSeparator=new a.DragEventSeparator({start:function(a,f){b.pan.begin(u.view,f.data);f.stopPropagation()},update:function(a,f){b.pan.update(u.view,f.data);
f.stopPropagation()},end:function(a,f){b.pan.end(u.view,f.data);f.stopPropagation()},condition:function(a,b){return 1===a&&h.eventMatchesPointerAction(b.data,u.pointerAction)}});return u}q(p,m);p.prototype._handleDrag=function(a){var f=this.view.mapViewNavigation;f.pinch.zoomMomentum||f.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(a)};p.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return p}(m.InputHandler);
w.DragPan=B})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(B,w,q,a,m,h){Object.defineProperty(w,"__esModule",{value:!0});B=function(m){function p(g,f,n){var u=m.call(this,!0)||this;u.view=g;u.pointerAction=f;var b=u.view.mapViewNavigation;u.dragEventSeparator=new a.DragEventSeparator({start:function(a,f){b.rotate.begin(u.view,
f.data);f.stopPropagation()},update:function(a,f){b.rotate.update(u.view,f.data);f.stopPropagation()},end:function(a,f){b.rotate.end(u.view,f.data);f.stopPropagation()},condition:function(a,b){return 1===a&&h.eventMatchesPointerAction(b.data,u.pointerAction)}});u.registerIncoming("drag",n,function(a){return u.dragEventSeparator.handle(a)});return u}q(p,m);return p}(m.InputHandler);w.DragRotate=B})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadUtils".split(" "),
function(B,w,q,a,m,h,p,x,g){Object.defineProperty(w,"__esModule",{value:!0});B=function(b){function t(f){var g=b.call(this,!0)||this;g.view=f;g.frameTask=null;g.watchHandles=new a;g.currentDevice=null;g.transformation={translation:[0,0,0],heading:0,tilt:0};g.handle=g.registerIncoming("gamepad",function(a){return g.handleEvent(a)});g.handle.pause();return g}q(t,b);t.prototype.onInstall=function(a){var f=this;b.prototype.onInstall.call(this,a);this.watchHandles.add([h.init(this.view.navigation.gamepad,
"enabled",function(a){a?(f.handle.resume(),f.frameTask||(f.frameTask=m.addFrameTask({update:function(a){return f.frameUpdate(a.deltaTime)}}))):(f.handle.pause(),f.frameTask&&(f.frameTask.remove(),f.frameTask=null))})])};t.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);b.prototype.onUninstall.call(this)};t.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&
this.currentDevice!==a.data.device||("end"===a.data.action?(this.currentDevice=null,g.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,g.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};t.prototype.frameUpdate=function(a){var b=this.transformation;if(!g.isZeroTransformation(b)){var h=this.view.viewpoint.clone(),t=n*this.view.navigation.gamepad.velocityFactor*a;p.translateBy(h,h,[b.translation[0]*t,-b.translation[1]*t]);t=this.view.size;p.scaleAndRotateBy(h,
h,1+b.translation[2]*u*a,this.view.constraints.rotationEnabled?-b.heading*f*a:0,[t[0]/2,t[1]],t);a=this.view.constraints.constrain(h,this.view.viewpoint);this.view.viewpoint=a}};return t}(x.InputHandler);w.GamepadNavigation=B;var f=.06,n=.7,u=6E-4})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(B,w,q,a){Object.defineProperty(w,"__esModule",{value:!0});B=function(a){function h(h,m,g){var f,
n=a.call(this,!0)||this;n.view=h;n.keys=m;n._keyMap=(f={},f[m.left]="left",f[m.right]="right",f[m.up]="up",f[m.down]="down",f);n.registerIncoming("key-down",g,function(a){return n._handleKeyDown(a)});n.registerIncoming("key-up",g,function(a){return n._handleKeyUp(a)});return n}q(h,a);h.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};h.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};h.prototype._handleKey=function(a,h){var g=this._keyMap[a.data.key];if(null!=g){if(h)switch(g){case "left":this.view.mapViewNavigation.continousPanLeft();
break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this.view.mapViewNavigation.stop();a.stopPropagation()}};return h}(a.InputHandler);w.KeyPan=B})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(B,w,q,a){Object.defineProperty(w,"__esModule",
{value:!0});B=function(a){function h(h,m,g){var f,n=a.call(this,!0)||this;n.view=h;n.keys=m;n._keyToDirection=(f={},f[m.clockwiseOption1]="clockwise",f[m.clockwiseOption2]="clockwise",f[m.counterClockwiseOption1]="counterClockwise",f[m.counterClockwiseOption2]="counterClockwise",f[m.resetOption1]="reset",f[m.resetOption2]="reset",f);n.registerIncoming("key-down",g,function(a){return n._handleKeyDown(a)});n.registerIncoming("key-up",g,function(a){return n._handleKeyUp(a)});return n}q(h,a);h.prototype._handleKeyDown=
function(a){a.data.repeat||this._handleKey(a,!0)};h.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};h.prototype._handleKey=function(a,h){var g=a.modifiers;0<g.size&&!g.has("Shift")||!this.view.constraints.rotationEnabled||!(g=this._keyToDirection[a.data.key])||(h?"clockwise"===g?this.view.mapViewNavigation.continousRotateClockwise():"counterClockwise"===g?this.view.mapViewNavigation.continousRotateCounterclockwise():this.view.mapViewNavigation.resetRotation():this.view.mapViewNavigation.stop(),
a.stopPropagation())};return h}(a.InputHandler);w.KeyRotate=B})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(B,w,q,a){Object.defineProperty(w,"__esModule",{value:!0});var m;(function(a){a[a.IN=0]="IN";a[a.OUT=1]="OUT"})(m||(m={}));B=function(a){function h(h,g,f){var n=a.call(this,!0)||this;n.view=h;n.keys=g;n._keysToZoomAction={};n.registerIncoming("key-down",f,function(a){return n._handleKeyDown(a)});
g.zoomIn.forEach(function(a){return n._keysToZoomAction[a]=m.IN});g.zoomOut.forEach(function(a){return n._keysToZoomAction[a]=m.OUT});return n}q(h,a);h.prototype._handleKeyDown=function(a){this._handleKey(a)};h.prototype._handleKey=function(a){var g=a.modifiers;0<g.size&&!g.has("Shift")||(g=this._keysToZoomAction[a.data.key],g===m.IN?(this.view.mapViewNavigation.zoomIn(),a.stopPropagation()):g===m.OUT&&(this.view.mapViewNavigation.zoomOut(),a.stopPropagation()))};return h}(a.InputHandler);w.KeyZoom=
B})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(B,w,q,a){Object.defineProperty(w,"__esModule",{value:!0});B=function(a){function h(h,m){var g=a.call(this,!0)||this;g.view=h;g._canZoom=!0;g.registerIncoming("mouse-wheel",m,function(a){return g._handleMouseWheel(a)});return g}q(h,a);h.prototype._handleMouseWheel=function(a){var h=this;if(this._canZoom){var g=this.view.mapViewNavigation,
f=a.data;if(f=g.zoom(1/Math.pow(.6,1/60*f.deltaY),[f.x,f.y]))this._canZoom=!1,f.always(function(){h._canZoom=!0;g.end()});a.stopPropagation()}};return h}(a.InputHandler);w.MouseWheelZoom=B})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(B,w,q,a,m){Object.defineProperty(w,"__esModule",{value:!0});B=function(h){function m(m){var g=h.call(this,!0)||
this;g.view=m;g.registerIncoming("drag",function(a){return g._handleDrag(a)});g.registerIncoming("pointer-down",function(a){return g.stopMomentumNavigation()});var f=g.view.mapViewNavigation;g.dragEventSeparator=new a.DragEventSeparator({start:function(a,h){f.pinch.begin(g.view,h.data);h.stopPropagation()},update:function(a,h){f.pinch.update(g.view,h.data);h.stopPropagation()},end:function(a,h){f.pinch.end(g.view,h.data);h.stopPropagation()},condition:function(a){return 2<=a}});return g}q(m,h);m.prototype._handleDrag=
function(a){this.dragEventSeparator.handle(a)};m.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return m}(m.InputHandler);w.PinchRotateAndZoom=B})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../Graphic ../../../../core/Collection ../../../../core/Handles ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject ../../engine/graphics/GFXSurface ../../../layers/GraphicsView".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){return function(b){function t(){for(var a=[],g=0;g<arguments.length;g++)a[g]=arguments[g];var h=b.apply(this,a)||this;h._frontGroup=new f;h._handles=new p;h._objects=new Map;h.container=new u;h.container.addChild(h._frontGroup);h.watch("graphics",function(){return h._reset()},!0);return h}q(t,b);t.prototype.hitTest=function(a,b){if(!this.view||!this.view.position)return null;a+=this.view.position[0]-window.pageXOffset;b+=this.view.position[1]-window.pageYOffset;
return(a=this.container.hitTest(a,b))?x.resolve(a.graphic):null};t.prototype.graphicUpdateHandler=function(a){var b=a.graphic,f=a.property;a=a.newValue;if(this._objects.has(b)){var g=this._objects.get(b);switch(f){case "geometry":g.graphic=b;break;case "symbol":g.renderingInfo={symbol:a};break;case "visible":g.visible=a}}};t.prototype._reset=function(){var a=this;this._handles.remove("graphics");this._objects.forEach(function(b,f){a._frontGroup.removeChild(b)});this._objects.clear();this.graphics&&
(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};t.prototype._add=function(a){if(a&&!this._objects.has(a)){var b=new n;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}};t.prototype._remove=function(a){var b=this._objects.get(a);b&&(this._objects.delete(a),this._frontGroup.removeChild(b))};t.prototype._graphicsChangeHandler=function(a){var b=a.added,f=a.removed;
a.moved.length&&this._reset();for(var g=0;g<b.length;g++)a=b[g],this._add(a);for(b=0;b<f.length;b++)a=f[b],this._remove(a)};a([g.property(),g.cast(h.ofType(m))],t.prototype,"graphics",void 0);a([g.property()],t.prototype,"view",void 0);return t=a([g.subclass("esri.views.2d.layers.support.GraphicsView2D")],t)}(g.declared(b))})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/tsSupport/extendsHelper","../Container"],
function(B,w,q,a,m){return function(h){function m(){return null!==h&&h.apply(this,arguments)||this}a(m,h);m.prototype.attach=function(a){this.g=a.surface.createGroup();return h.prototype.attach.call(this,a)};m.prototype.detach=function(a){h.prototype.detach.call(this,a);this.g.destroy();this.g=null};m.prototype.prepareChildrenRenderParameters=function(a){return q({},a,{surface:this.g})};m.prototype.detachChild=function(a,g){return a.detach(g)};m.prototype.attachChild=function(a,g){return a.attach(g)};
m.prototype.renderChild=function(a,g){return a.processRender(g)};return m}(m)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../DisplayObject ./gfxUtils".split(" "),function(B,w,q,a,m,h,p,x){var g=new Set,f=[];return function(n){function u(){var a=null!==n&&n.apply(this,arguments)||this;a._prevStateId=null;a.visible=
!0;return a}q(u,n);Object.defineProperty(u.prototype,"graphic",{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"isPolygonMarkerSymbol",{get:function(){var a=this.renderingInfo.symbol.type,f=this.geometry;return f&&"polygon"===
f.type&&("simple-marker"===a||"picture-marker"===a||"text"===a)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0});u.prototype.detach=function(){this._revokeShapeUrl();this._removeShape();this._drawInfo=this._projected=null};u.prototype.doRender=function(a){var b=this,f=a.surface,g=a.state,h=a.projector,n=this._prevStateId!==g.id;if(this.renderRequested||
n)if(n&&a.stationary&&(this._prevStateId=g.id),this.visible)if(n=this._projectGeometry(this.geometry,a.state.spatialReference),a=this._getScreenOffsets([],a.state),x.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape(),a.length){var u=this._shape,m=n.type,p=this._shapePromise;p&&!p.isFulfilled()&&p.cancel();if(!u||this._showRedraw(a,g))p="point"===m?x.drawPoint(h,f,n,u,this.renderingInfo,g.rotation,a).then(function(a){x.stylePoint(a,b.renderingInfo);return a}):"multipoint"===
m?x.drawMarkers(h,f,n,u,this.renderingInfo,g.rotation,a,this).then(function(a){x.styleMarkers(a,b.renderingInfo);return a}):x.drawShape(h,f,n,u,a).then(function(a){x.styleShape(a,b.renderingInfo);return a});this._shapePromise=p.then(function(a){b._shape=a;a.getNode().gfxObject=b;return a})}else this._removeShape();else this._removeShape()};u.prototype._getScreenOffsets=function(a,h){var b=h.clippedExtent,n=this._projected.outExtent,u=h.spatialReference;a.length=0;if(!n)return a;if(u.isWrappable){var u=
m.getInfo(u),t=n.cache._partwise,b=b._getParts(u);f.length=0;if(t&&t.length)for(n=0;n<t.length;n++)f.push.apply(f,t[n]._getParts(u));else f.push.apply(f,n._getParts(u));h=h.worldScreenWidth;a.length=0;g.clear();n=f.length;for(u=0;u<n;u++)for(var p=f[u],t=p.extent,p=p.frameIds,q=p.length,x=b.length,w=0;w<x;w++){var y=b[w];if(y.extent.intersects(t))for(var I=q,M=0;M<I;M++){var N=(y.frameIds[0]-p[M])*h;g.has(N)||(a.push(N),g.add(N))}}a.sort()}else b.intersects(n)&&a.push(0);return a};u.prototype._projectGeometry=
function(a,f){var b=this._projected;a=this.isPolygonMarkerSymbol?a.centroid:a;if(b&&b.inGeometry===a&&b.outSpatialReference===f)return b.outGeometry;a&&a.spatialReference.equals(f)?this._projected={inGeometry:a,outGeometry:a,outSpatialReference:f,outExtent:this._getExtent(a)}:h.canProject(a,f)?this._projected={inGeometry:a,outGeometry:h.project(a,f),outSpatialReference:f,outExtent:this._getExtent(a)}:this._projected={inGeometry:a,outGeometry:null,outSpatialReference:f,outExtent:null};return this._projected.outGeometry};
u.prototype._getExtent=function(b){var f=b.extent;if(!f){var g=f=void 0;"esri.geometry.Point"===b.declaredClass?(f=b.x,g=b.y):"esri.geometry.Multipoint"===b.declaredClass&&(f=b.points[0][0],g=b.points[0][1]);f=new a.Extent(f,g,f,g,b.spatialReference)}return f};u.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null};u.prototype._revokeShapeUrl=function(){var a=this._shape;a&&(a=a.shape)&&"image"===a.type&&x.revokeBlobUrl(a.src)};
u.prototype._showRedraw=function(a,f){return!0};return u}(p)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper @dojo/framework/shim/array @dojo/framework/shim/Map ../../../../Color ../../../../request ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../core/urlUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/mat2dExtras".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D){function E(a,b){if(!b)return null;b.toRgba?(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a):(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]);return a}function C(a,b,f){null!=f&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=f);return a}function A(a,b,f){var g=b[0]/b[1];a[0]=a[1]=1;isNaN(f)||(1<g?(a[0]=f/b[0],a[1]=f/g/b[1]):(a[1]=f/b[1],a[0]=f*g/b[0]));return a}function F(a,h,n,m,l,C,z){var d=l.symbol;n=a.toScreenPoint(S,n,z[0]);a=[n.x,n.y];var c=n.x,e=n.y;z=l.heading;n=l.size&&l.size[0];
var k,r;t.identity(O);"number"===typeof n&&(k=isFinite(n)&&n);k=(n=k&&isFinite(k)&&!isNaN(k))?g.pt2px(k):NaN;C&&D.rotategAt(O,O,C,a);z&&D.rotategAt(O,O,z,a);C=g.pt2px(d.xoffset);z=g.pt2px(d.yoffset);var v;if(0!==C||0!==z)v=[C,-z];var G=null;0!==d.angle&&(G=t.create(),D.rotategAt(G,G,d.angle,a));var J;if("simple-marker"===d.type){C=d.style;z=Math.round;k=n?k:g.pt2px(d.size);r=r=void 0;switch(C){case u.STYLE_SQUARE:case u.STYLE_CROSS:case u.STYLE_X:case u.STYLE_DIAMOND:r=isNaN(k)?16:.5*k;r=K(h,m,M(C,
c,e,z(c-r),z(c+r),z(e-r),z(e+r)));break;case u.STYLE_PATH:r=d=K(h,m,d.path);d=d.getBoundingBox();k=A(t.create(),[d.width,d.height],k);1===k[0]&&1===k[3]||D.scaleAt(O,O,k,a);J=[-(d.x+.5*d.width)+c,-(d.y+.5*d.height)+e];break;default:r=isNaN(k)?16:.5*k,r=Q(h,m,{cx:c,cy:e,r:r})}r=x.resolve(r)}else if("picture-marker"===d.type){var L=null,U=null;a=g.pt2px(d.width);r=g.pt2px(d.height);n?(U=k,L=a/r*U):(L=a,U=r);v&&(null!=v[0]&&(v[0]=v[0]/a*L),null!=v[1]&&(v[1]=v[1]/r*U));var X=d.url,d=void 0,d=f.isDataProtocol(X)?
x.resolve(X):f.isBlobProtocol(X)?x.resolve(URL.createObjectURL(X)):P.has(X)?x.resolve(P.get(X)):p(X,{responseType:"blob"}).then(function(c){if(P.has(X))return P.get(X);c=URL.createObjectURL(c.data);P.set(X,c);return c}).catch(function(c){if("cancel"!==c.dojoType)return X;x.reject(c)});r=d.then(function(k){k=H(h,m,{x:c-.5*L,y:e-.5*U,width:L,height:U,src:k});var d=k.getNode();d&&(null!=l.opacity?d.setAttribute("opacity",l.opacity.toString()):d.setAttribute("opacity","1"));return k})}else if("text"===
d.type){if(a=d.font&&d.font.clone())a.size=n?k:g.pt2px(a.size);r=y(h,m,{type:"text",text:d.text,x:c,y:e,align:b.getSVGAlign(d),decoration:d.decoration||a&&a.decoration,rotated:d.rotated,kerning:d.kerning});a&&r.setFont(a);k=r.getNode();a=b.getSVGBaseline(d);d=b.getSVGBaselineShift(d);k&&(k.setAttribute("dominant-baseline",a),d&&k.setAttribute("baseline-shift",d));r=x.resolve(r)}return r.then(function(c){v&&t.translate(O,O,v);G&&t.multiply(O,O,G);J&&t.translate(O,O,J);c.setTransform(O);return c})}
function H(a,b,f){return b?b.setShape(f):a.createImage(f)}function Q(a,b,f){return b?b.setShape(f):a.createCircle(f)}function K(a,b,f){f=Array.isArray(f)?f.join(" "):f;return b?b.setShape(f):a.createPath(f)}function y(a,b,f){return b?b.setShape(f):a.createText(f)}function I(a,b){b=b&&b.shape&&b.shape.type;var f=a&&a.type;a=a&&a.style;f&&(a=W[f]||a);Z[a]&&(a="path");return!(!b||!a||b===a)}function M(a,b,f,g,l,h,z,d){switch(a){case u.STYLE_SQUARE:return["M",g+","+h,l+","+h,l+","+z,g+","+z,"Z"];case u.STYLE_CROSS:return["M",
b+","+h,b+","+z,"M",g+","+f,l+","+f];case u.STYLE_X:return["M",g+","+h,l+","+z,"M",g+","+z,l+","+h];case u.STYLE_DIAMOND:return["M",b+","+h,l+","+f,b+","+z,g+","+f,"Z"];case u.STYLE_TARGET:return["M",g+","+h,l+","+h,l+","+z,g+","+z,g+","+h,"M",g-d+","+f,g+","+f,"M",b+","+(h-d),b+","+h,"M",l+d+","+f,l+","+f,"M",b+","+(z+d),b+","+z]}}function N(a,f){var g=f.symbol;if("picture-marker"!==g.type){var h=b.getFill(g);if("simple-marker"===g.type){var l=g.style,n=(g=b.getStroke(g))&&g.color,l=l===u.STYLE_X||
l===u.STYLE_CROSS,z=f.opacity;(f=f.color||E([0,0,0,0],l?n:h))&&null!=z&&(f=C([0,0,0,0],f,z));f&&(l?f!==n&&(g=q({},g),g.color=f):f!==h&&(h=f));a.setFill(h).setStroke(g)}else"text"===g.type&&(z=f.opacity,(f=f.color||E([0,0,0,0],h))&&null!=z&&(f=C([0,0,0,0],f,z)),f&&f!==h&&(h=f),a.setFill(h))}}Object.defineProperty(w,"__esModule",{value:!0});var P=new m.default;w.getScalingVector=A;var S={x:0,y:0},O=t.create();w.drawPoint=F;w.drawMarkers=function(a,b,f,g,l,h,z,d){var c=l.symbol,e=f.points,k=g||b.createGroup();
b=[0];k.children[0]&&I(c,k.children[0])&&k.clear();c=0;f=[];g=e.length;for(var r=0;r<g;r++)for(var v=e[r],G=z.length,J=0;J<G;J++)b[0]=z[J],f.push(F(a,k,{x:v[0],y:v[1]},k.children[c++],l,h,b));return x.all(f).then(function(c){c.forEach(function(c){c.getNode().gfxObject=d;k.add(c)});var r=k.children.length;if(e.length*z.length<r)for(c=e.length*z.length,--r;r>=c;r--)k.children[r].removeShape();return k})};w.drawShape=function(a,b,f,g,l){var h=[];"extent"===f.type&&(f=n.fromExtent(f));if("polyline"===
f.type||"polygon"===f.type){for(var z=l.length,d=0;d<z;d++)h=h.concat(a.toScreenPath(f,l[d]));g=K(b,g,h)}return x.resolve(g)};w.drawRect=function(a,b,f){return b?b.setShape(f):a.createRect(f)};w.drawImage=H;w.drawCircle=Q;w.drawPath=K;w.drawText=y;var W={"picture-marker":"image","picture-fill":"path","simple-fill":"path","simple-line":"path",text:"text"},Z={square:1,cross:1,x:1,diamond:1,target:1};w.isShapeInvalid=I;w.smsToPath=M;w.stylePoint=N;w.styleMarkers=function(a,b){for(var f=a.children.length,
g=0;g<f;g++)N(a.children[g],b)};w.styleShape=function(a,f){var n=f.symbol,u=f.size,l=f.color,t=f.opacity,z=f.outlineSize;f=b.getStroke(n);var d=b.getFill(n),c=!1,e;"simple-line"===n.type?(c=!0,e="none"!==n.style):e=n.outline&&"none"!==n.outline.style;var k,r,v;if(null!=u||null!=z)if(u=u&&isFinite(u[0])&&u[0],z=c?null:z,null!=u||null!=z)v=g.pt2px(z||u);u="picture-fill"===n.type;!l&&null==t||u||(c?(k=l||f&&f.color&&E([0,0,0,0],f.color))&&null!=t&&(k=C(k,k,t)):d&&(r=l||E([0,0,0,0],d))&&null!=t&&(r=C(r,
r,t)));!e||null==v&&!k?a.setStroke(f):a.setStroke(q({},f,null!=v?{width:v}:null,k&&{color:k}));n=l&&new h(l)||n.color;d&&"pattern"===d.type&&n&&!u?b.getPatternUrlWithColor(d.src,n.toCss(!0)).then(function(c){d.src=c;a.setFill(d)}):a.setFill(r||d);a.rawNode.setAttribute("vector-effect","non-scaling-stroke")};w.revokeBlobUrl=function(b){if(b&&f.isBlobProtocol(b)){for(var g=0,h=a.from(P);g<h.length;g++){var n=h[g],l=n[0];if(n[1]===b){P.delete(l);break}}URL.revokeObjectURL(b)}}})},"@dojo/framework/shim/array":function(){(function(B){"object"===
typeof module&&"object"===typeof module.exports?(B=B(require,exports),void 0!==B&&(module.exports=B)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./number ./support/has ./support/util".split(" "),B)})(function(B,w){Object.defineProperty(w,"__esModule",{value:!0});var q=B("tslib"),a=B("./global"),m=B("./iterator"),h=B("./number"),p=B("./support/has");B=B("./support/util");if(p.default("es6-array")&&p.default("es6-array-fill"))w.from=a.default.Array.from,
w.of=a.default.Array.of,w.copyWithin=B.wrapNative(a.default.Array.prototype.copyWithin),w.fill=B.wrapNative(a.default.Array.prototype.fill),w.find=B.wrapNative(a.default.Array.prototype.find),w.findIndex=B.wrapNative(a.default.Array.prototype.findIndex);else{var x=function(a){if(isNaN(a))return 0;a=Number(a);isFinite(a)&&(a=Math.floor(a));return Math.min(Math.max(a,0),h.MAX_SAFE_INTEGER)},g=function(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a},f=function(a,
f){return 0>a?Math.max(f+a,0):Math.min(a,f)};w.from=function(a,f,b){if(null==a)throw new TypeError("from: requires an array-like object");f&&b&&(f=f.bind(b));b=x(a.length);var g="function"===typeof this?Object(new this(b)):Array(b);if(!m.isArrayLike(a)&&!m.isIterable(a))return g;if(m.isArrayLike(a)){if(0===b)return[];for(var h=0;h<a.length;h++)g[h]=f?f(a[h],h):a[h]}else{h=0;try{for(var n=q.__values(a),u=n.next();!u.done;u=n.next()){var A=u.value;g[h]=f?f(A,h):A;h++}}catch(Q){p={error:Q}}finally{try{u&&
!u.done&&(H=n.return)&&H.call(n)}finally{if(p)throw p.error;}}}void 0!==a.length&&(g.length=b);return g;var p,H};w.of=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return Array.prototype.slice.call(a)};w.copyWithin=function(a,h,b,t){if(null==a)throw new TypeError("copyWithin: target must be an array-like object");var n=x(a.length);h=f(g(h),n);b=f(g(b),n);t=f(void 0===t?n:g(t),n);t=Math.min(t-b,n-h);n=1;h>b&&h<b+t&&(n=-1,b+=t-1,h+=t-1);for(;0<t;)b in a?a[h]=a[b]:delete a[h],
h+=n,b+=n,t--;return a};w.fill=function(a,h,b,t){var n=x(a.length);b=f(g(b),n);for(t=f(void 0===t?n:g(t),n);b<t;)a[b++]=h;return a};w.find=function(a,f,b){f=w.findIndex(a,f,b);return-1!==f?a[f]:void 0};w.findIndex=function(a,f,b){var g=x(a.length);if(!f)throw new TypeError("find: second argument must be a function");b&&(f=f.bind(b));for(b=0;b<g;b++)if(f(a[b],b,a))return b;return-1}}p.default("es7-array")?w.includes=B.wrapNative(a.default.Array.prototype.includes):w.includes=function(a,f,b){void 0===
b&&(b=0);var g;g=a.length;g=Number(g);isNaN(g)?g=0:(isFinite(g)&&(g=Math.floor(g)),g=Math.min(Math.max(g,0),h.MAX_SAFE_INTEGER));for(;b<g;++b){var n=a[b];if(f===n||f!==f&&n!==n)return!0}return!1}})},"@dojo/framework/shim/number":function(){(function(B){"object"===typeof module&&"object"===typeof module.exports?(B=B(require,exports),void 0!==B&&(module.exports=B)):"function"===typeof define&&define.amd&&define(["require","exports","./global"],B)})(function(B,w){function q(a){return"number"===typeof a&&
m.default.isFinite(a)}function a(a){return q(a)&&Math.floor(a)===a}Object.defineProperty(w,"__esModule",{value:!0});var m=B("./global");w.EPSILON=1;w.MAX_SAFE_INTEGER=Math.pow(2,53)-1;w.MIN_SAFE_INTEGER=-w.MAX_SAFE_INTEGER;w.isNaN=function(a){return"number"===typeof a&&m.default.isNaN(a)};w.isFinite=q;w.isInteger=a;w.isSafeInteger=function(h){return a(h)&&Math.abs(h)<=w.MAX_SAFE_INTEGER}})},"esri/symbols/support/gfxUtils":function(){define("require exports ../../core/tsSupport/assignHelper dojox/gfx/_base ../../Color ../../request ../../core/LRUMap ../../core/promiseUtils ../../core/screenUtils".split(" "),
function(B,w,q,a,m,h,p,x,g){function f(a){if(!a)return null;var b,h=a.constructor,n=g.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=f(a.outline);break;case "simple-line":a.style!==h.STYLE_NULL&&0!==n&&(b={color:a.color,style:D(a.style),width:n,cap:a.cap,join:a.join===h.JOIN_MITER?g.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(w,"__esModule",{value:!0});var n=B.toUrl("../../symbols/patterns/"),u={left:"start",center:"middle",
right:"end",justify:"start"},b={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},t=new p(1E3);w.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&u[a.toLowerCase()]||"middle"};w.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&b[a.toLowerCase()]||"alphabetic"};w.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};w.getFill=function(b){var f=b.style,h=null;if(b){var u=b.constructor;switch(b.type){case "simple-marker":f!==
u.STYLE_CROSS&&f!==u.STYLE_X&&(h=b.color);break;case "simple-fill":f===u.STYLE_SOLID?h=b.color:f!==u.STYLE_NULL&&(h=q({},a.defaultPattern,{src:n+f+".png",width:8,height:8}));break;case "picture-fill":h=q({},a.defaultPattern,{src:b.url,width:g.pt2px(b.width)*b.xscale,height:g.pt2px(b.height)*b.yscale,x:g.pt2px(b.xoffset),y:g.pt2px(b.yoffset)});break;case "text":h=b.color}}return h};w.getPatternUrlWithColor=function(a,b){var f=a+"-"+b;return t.has(f)?x.resolve(t.get(f)):h(a,{responseType:"image"}).then(function(a){a=
a.data;var g=a.naturalWidth,h=a.naturalHeight,n=document.createElement("canvas");n.width=g;n.height=h;var u=n.getContext("2d");u.fillStyle=b;u.fillRect(0,0,g,h);u.globalCompositeOperation="destination-in";u.drawImage(a,0,0);a=n.toDataURL();t.set(f,a);return a})};w.getStroke=f;w.create2DColorRamp=function(a){var b=a.colors,f=a.numClasses,g=a.size;a=a.surface.createGroup();for(var g=(g||75)/f,h=0;h<f;h++)for(var n=h*g,u=0;u<f;u++){var t=b[h][u];a.createRect({x:u*g,y:n,width:g,height:g}).setFill(t).setStroke(null)}return a};
var D=function(){var a={};return function(b){if(a[b])return a[b];var f=b.replace(/-/g,"");return a[b]=f}}();w.defaultThematicColor=new m([128,128,128])})},"esri/views/2d/libs/gl-matrix/mat2dExtras":function(){define(["require","exports","./common","./mat2d","./vec2"],function(B,w,q,a,m){Object.defineProperty(w,"__esModule",{value:!0});var h=function(){var h=a.create(),q=m.create();return function(g,f,n){a.fromTranslation(h,n);a.multiply(g,h,f);m.negate(q,n);a.translate(g,g,q);return g}}();w.rotategAt=
function(){var m=a.create();return function(p,g,f,n){a.fromRotation(m,q.toRadian(f));h(m,m,n);a.multiply(p,m,g);return p}}();w.scaleAt=function(){var m=a.create();return function(p,g,f,n){a.fromScaling(m,f);h(m,m,n);a.multiply(p,m,g);return p}}()})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../viewpointUtils ../Container ../cssUtils ./Projector ../../libs/gfx ../../libs/gl-matrix/common ../../libs/gl-matrix/mat2d".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n){var u=n.identity(n.create());return function(b){function h(){var a=null!==b&&b.apply(this,arguments)||this;a._transform=n.create();a._projector=new x;a._prevStateId=null;return a}q(h,b);h.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};h.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);if(this.element=a)this.surface=g.createSurface(this.element,400,
400)};h.prototype.doRender=function(a){var g=this.element.style;if(this.visible){g.display="block";g.opacity=""+Math.min(this.opacity,this.parent.opacity);var h=this._transform,t=a.state,F=this._prevStateId!==t.id;if(this.renderRequested||F){if(a.stationary)F&&(this._prevStateId=t.id),m.getMatrix(h,t.center,t.size,t.resolution,f.toRadian(t.rotation),1),this.surface.setDimensions(t.size[0],t.size[1]),this._projector.update(h,t.resolution),this.children.forEach(function(a){a.g&&a.g.setTransform(u)}),
b.prototype.doRender.call(this,a);else{var D=n.invert(n.create(),h);n.multiply(D,t.transform,D);this.children.forEach(function(a){a.g&&a.g.setTransform(D)})}p.clip(g,t.clipRect);g.transform=p.cssMatrix3d(n.fromRotation(n.create(),f.toRadian(t.rotation)));this.surface.rawNode.style.transform=p.cssMatrix(n.fromRotation(n.create(),f.toRadian(-t.rotation)))}}else g.display="none"};h.prototype.hitTest=function(a,b){if(!this.attached)return null;var f=this.surface.rawNode,f=f.parentElement||f.parentNode;
f.style.zIndex="9000";a=document.elementFromPoint(a,b);f.style.zIndex="";return a&&a.gfxObject||null};h.prototype.prepareChildrenRenderParameters=function(b){return a({},b,{projector:this._projector,surface:this.surface})};h.prototype.beforeRenderChildren=function(a,b){this.surface.openBatch()};h.prototype.attachChild=function(a,b){return a.attach(b)};h.prototype.detachChild=function(a,b){return a.detach()};h.prototype.renderChild=function(a,b){return a.processRender(b)};h.prototype.afterRenderChildren=
function(a,b){this.surface.closeBatch()};return h}(h)})},"esri/views/2d/engine/cssUtils":function(){define(["require","exports","../../../core/has"],function(B,w,q){function a(a){return"matrix3d(\n                    "+a[0].toFixed(10)+", "+a[1].toFixed(10)+", 0, 0,\n                    "+a[2].toFixed(10)+", "+a[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+Math.round(a[4]).toFixed(10)+", "+Math.round(a[5]).toFixed(10)+", 0, 1\n                  )"}function m(a){return"translate("+
Math.round(a[0])+"px, "+Math.round(a[1])+"px)"}function h(a){return"rotateZ( "+a+" deg)"}Object.defineProperty(w,"__esModule",{value:!0});B=q("ff");var p=q("ie"),x=q("webkit");q=q("opera");var g=x&&"-webkit-transform"||B&&"-moz-transform"||q&&"-o-transform"||p&&"-ms-transform"||"transform";w.clip=function(a,g){a.clip=g?"rect( "+g.top+"px, "+g.right+"px, "+g.bottom+"px, "+g.left+"px)":""};w.setTransform=function(f,h){var n=null;2===h.length&&(n=m(h));6===h.length&&(n=a(h));f.transform=f[g]=n};w.setOrigin=
function(a,g){a.transformOrigin=g[0]+"px "+g[1]+"px 0"};w.cssMatrix=function(a){return"matrix(\n                  "+a[0].toFixed(10)+", "+a[1].toFixed(10)+",\n                  "+a[2].toFixed(10)+", "+a[3].toFixed(10)+",\n                  "+a[4]+", "+a[5]+"\n                )"};w.cssMatrix3d=a;w.translate=m;w.rotate=function(a){return h(a.toFixed(3))};w.rotateZ=h})},"esri/views/2d/engine/graphics/Projector":function(){define(["require","exports"],function(B,w){function q(a,x,g,f,n){void 0===f&&(f=
0);void 0===n&&(n=a.length);for(var u=a[f],b=a[n-1],t=0,p=0,E,C=f+1;C<n-1;C++){var A=a[C];E=A[0];var A=A[1],F=u[0],H=u[1],w=b[0],K=b[1];F===w?E=m(E-F):(w=(K-H)/(w-F),E=m(w*E-A+(H-w*F))/h(w*w+1));E>t&&(p=C,t=E)}t>x?(q(a,x,g,f,p+1),q(a,x,g,p,n)):(g(u[0],u[1]),g(b[0],b[1]))}var a=Math.round,m=Math.abs,h=Math.sqrt;return function(){function h(){this._transform=null}h.prototype.update=function(a,g){this._transform=a;this._resolution=g};h.prototype.toScreenPoint=function(a,g,f){this.transformPoint(g.x+
f*this._resolution,g.y,function(f,g){a.x=f;a.y=g});return a};h.prototype.toScreenPath=function(a,g){var f=this,h=null!=a.paths;a=h?a.paths:a.rings;var u="",b=function(a,b){a+=g*f._resolution;f.transformPoint(a,b,function(a,b){isNaN(a)||isNaN(b)||(u+=a,u+=",",u+=b,u+=" ")})};if(a)for(var t=a.length,m=0;m<t;m++)u+="M ",q(a[m],this._resolution,b),h||(u+="Z ");return u};h.prototype.transformPoint=function(h,g,f){var n=this._transform,u=n[1],b=n[3],t=n[5];f(a(n[0]*h+n[2]*g+n[4]),a(u*h+b*g+t))};return h}()})},
"esri/views/2d/libs/gfx":function(){define("require exports ./gfx/Circle ./gfx/Group ./gfx/Image ./gfx/Path ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/svgSurface ./gfx/Text".split(" "),function(B,w,q,a,m,h,p,x,g,f,n){Object.defineProperty(w,"__esModule",{value:!0});w.Circle=q.default;w.Group=a.default;w.Image=m.default;w.Path=h.default;w.Rect=p.default;w.Shape=x.default;w.Surface=g.default;w.createSurface=f.createSurface;w.Text=n.default})},"esri/views/2d/libs/gfx/Circle":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(B,w,q,a,m){Object.defineProperty(w,"__esModule",{value:!0});B=function(h){function m(m){var g=h.call(this)||this;g.shape=a.getDefault("Circle");g.rawNode=m;return g}q(m,h);m.prototype.getBoundingBox=function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox};m.nodeType="circle";return m}(m.default);w.default=B})},"esri/views/2d/libs/gfx/Shape":function(){define("require exports dojo/dom dojo/dom-attr dojo/_base/Color dojox/gfx/_base ./svg ../gl-matrix/mat2d".split(" "),
function(B,w,q,a,m,h,p,x){Object.defineProperty(w,"__esModule",{value:!0});B=function(){function g(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null}g.prototype.destroy=function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=p.getRef(a))&&a.parentNode.removeChild(a)}this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null};g.prototype.getNode=function(){return this.rawNode};
g.prototype.getShape=function(){return this.shape};g.prototype.getTransform=function(){return this.matrix};g.prototype.getFill=function(){return this.fillStyle};g.prototype.getStroke=function(){return this.strokeStyle};g.prototype.getParent=function(){return this.parent};g.prototype.getBoundingBox=function(){return this.bbox};g.prototype.setTransform=function(a){this.matrix=this.matrix?x.copy(this.matrix,a):x.clone(a);return this._applyTransform()};g.prototype.setFill=function(a){if(!a)return this.fillStyle=
null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var f;if("object"===typeof a&&"type"in a){switch(a.type){case "linear":f=h.makeParameters(h.defaultLinearGradient,a);a=this._setFillObject(f,"linearGradient");a.setAttribute("x1",f.x1.toFixed(8));a.setAttribute("y1",f.y1.toFixed(8));a.setAttribute("x2",f.x2.toFixed(8));a.setAttribute("y2",f.y2.toFixed(8));break;case "radial":f=h.makeParameters(h.defaultRadialGradient,a);a=this._setFillObject(f,"radialGradient");
a.setAttribute("cx",f.cx.toFixed(8));a.setAttribute("cy",f.cy.toFixed(8));a.setAttribute("r",f.r.toFixed(8));break;case "pattern":f=h.makeParameters(h.defaultPattern,a),a=this._setFillObject(f,"pattern"),a.setAttribute("x",f.x.toFixed(8)),a.setAttribute("y",f.y.toFixed(8)),a.setAttribute("width",f.width.toFixed(8)),a.setAttribute("height",f.height.toFixed(8))}this.fillStyle=f;return this}this.fillStyle=f=h.normalizeColor(a);this.rawNode.setAttribute("fill",f.toCss());this.rawNode.setAttribute("fill-opacity",
f.a);this.rawNode.setAttribute("fill-rule","evenodd");return this};g.prototype.setStroke=function(a){var f=this.rawNode;if(!a)return this.strokeStyle=null,f.setAttribute("stroke","none"),f.setAttribute("stroke-opacity",0),this;if("string"===typeof a||Array.isArray(a)||a instanceof m)a={color:a};a=this.strokeStyle=h.makeParameters(h.defaultStroke,a);a.color=h.normalizeColor(a.color);if(a){var g=0>a.width?0:a.width;f.setAttribute("stroke",a.color.toCss());f.setAttribute("stroke-opacity",a.color.a);
f.setAttribute("stroke-width",g);f.setAttribute("stroke-linecap",a.cap);"number"===typeof a.join?(f.setAttribute("stroke-linejoin","miter"),f.setAttribute("stroke-miterlimit",a.join)):f.setAttribute("stroke-linejoin",a.join);var b=a.style.toLowerCase();b in p.dasharray&&(b=p.dasharray[b]);if(Array.isArray(b)){for(var b=b.slice(0),t=0;t<b.length;++t)b[t]*=g;if("butt"!==a.cap){for(t=0;t<b.length;t+=2)b[t]-=g,1>b[t]&&(b[t]=1);for(t=1;t<b.length;t+=2)b[t]+=g}b=b.join(",")}f.setAttribute("stroke-dasharray",
b);f.setAttribute("dojoGfxStrokeStyle",a.style)}return this};g.prototype._getParentSurface=function(){for(var a=this.parent;a&&!a.defNode;a=a.parent);return a};g.prototype._setFillObject=function(a,g){var f=p.xmlns.svg;this.fillStyle=a;var b=this._getParentSurface().defNode,n=this.rawNode.getAttribute("fill");if(n=p.getRef(n))if(n.tagName.toLowerCase()!==g.toLowerCase()){var m=n.id;n.parentNode.removeChild(n);n=p._createElementNS(f,g);n.setAttribute("id",m);b.appendChild(n)}else for(;n.childNodes.length;)n.removeChild(n.lastChild);
else n=p._createElementNS(f,g),n.setAttribute("id",h._base._getUniqueId()),b.appendChild(n);if("pattern"===g)n.setAttribute("patternUnits","userSpaceOnUse"),f=p._createElementNS(f,"image"),f.setAttribute("x",0),f.setAttribute("y",0),f.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),f.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),p._setAttributeNS(f,p.xmlns.xlink,"xlink:href",a.src),n.appendChild(f);else for(n.setAttribute("gradientUnits","userSpaceOnUse"),g=0;g<a.colors.length;++g){var b=
a.colors[g],m=p._createElementNS(f,"stop"),q=b.color=h.normalizeColor(b.color);m.setAttribute("offset",b.offset.toFixed(8));m.setAttribute("stop-color",q.toCss());m.setAttribute("stop-opacity",q.a);n.appendChild(m)}this.rawNode.setAttribute("fill","url(#"+n.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return n};g.prototype._applyTransform=function(){var a=this.matrix;a?this.rawNode.setAttribute("transform","matrix("+a[0].toFixed(8)+
","+a[1].toFixed(8)+","+a[2].toFixed(8)+","+a[3].toFixed(8)+","+a[4].toFixed(8)+","+a[5].toFixed(8)+")"):this.rawNode.removeAttribute("transform");return this};g.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",
4);a.__gfxObject__=this};g.prototype.setShape=function(a){this.shape=h.makeParameters(this.shape,a);for(var f in this.shape)if("type"!==f){a=this.shape[f];if("width"===f||"height"===f)a=0>a?0:a;this.rawNode.setAttribute(f,a)}this.bbox=null;return this};g.prototype._moveToFront=function(){this.rawNode.parentNode.appendChild(this.rawNode);return this};g.prototype._moveToBack=function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this};g.prototype._removeClipNode=
function(){var f,g=a.get(this.rawNode,"clip-path");g&&(f=q.byId(g.match(/gfx_clip[\d]+/)[0]))&&f.parentNode.removeChild(f);return f};g.prototype.moveToFront=function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this};g.prototype.moveToBack=function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this};g.prototype.removeShape=function(a){this.parent&&this.parent.remove(this,a);return this};g.prototype._setParent=function(a,g){this.parent=
a;return this._updateParentMatrix(g)};g.prototype._updateParentMatrix=function(a){this.parentMatrix=a?x.clone(a):null;return this._applyTransform()};g.prototype._getRealMatrix=function(){for(var a=x.clone(this.matrix||x.create()),g=this.parent;g;)g.matrix&&a&&x.multiply(a,g.matrix,a),g=g.parent;return a};return g}();w.default=B})},"esri/views/2d/libs/gfx/svg":function(){define(["require","exports","dojo/dom"],function(B,w,q){Object.defineProperty(w,"__esModule",{value:!0});w.xmlns={xlink:"http://www.w3.org/1999/xlink",
svg:"http://www.w3.org/2000/svg"};w.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};w._createElementNS=function(a,m){return document.createElementNS?document.createElementNS(a,m):document.createElement(m)};w._setAttributeNS=function(a,m,h,p){return a.setAttributeNS?a.setAttributeNS(m,h,p):a.setAttribute(h,p)};w._createTextNode=function(a){return document.createTextNode(a)};
w._createFragment=function(){return document.createDocumentFragment()};w.getRef=function(a){return a&&"none"!==a?a.match(/^url\(#.+\)$/)?q.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?q.byId(a.slice(1)):null:null}})},"esri/views/2d/libs/gfx/Group":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Circle ./Container ./Image ./Path ./Rect ./svg ./Text".split(" "),function(B,w,q,a,m,h,p,x,g,f,n){Object.defineProperty(w,"__esModule",{value:!0});B=function(h){function b(){return null!==
h&&h.apply(this,arguments)||this}q(b,h);b.prototype.setRawNode=function(a){this.rawNode=a;this.rawNode.__gfxObject__=this};b.prototype.destroy=function(){h.prototype.clear.call(this,!0);h.prototype.destroy.call(this)};b.prototype.createShape=function(b){switch(b.type){case a.defaultPath.type:return this.createPath(b);case a.defaultRect.type:return this.createRect(b);case a.defaultCircle.type:return this.createCircle(b);case a.defaultImage.type:return this.createImage(b);case a.defaultText.type:return this.createText(b)}console.error("[gfx] unknown shape",
b);return null};b.prototype.createGroup=function(){return this.createObject(b)};b.prototype.createRect=function(a){return this.createObject(g.default,a)};b.prototype.createCircle=function(a){return this.createObject(m.default,a)};b.prototype.createImage=function(a){return this.createObject(p.default,a)};b.prototype.createText=function(a){return this.createObject(n.default,a)};b.prototype.createPath=function(a){return this.createObject(x.default,a)};b.prototype.createObject=function(a,b){if(!this.rawNode)return null;
var g=new a;a=f._createElementNS(f.xmlns.svg,a.nodeType);g.setRawNode(a);g.setShape(b);this.add(g);return g};b.nodeType="g";return b}(h.default);w.default=B})},"esri/views/2d/libs/gfx/Container":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(B,w,q,a,m,h){Object.defineProperty(w,"__esModule",{value:!0});B=function(m){function p(){var a=null!==m&&m.apply(this,arguments)||this;a.children=[];a._batch=0;return a}q(p,m);p.prototype.openBatch=
function(){this._batch||(this.fragment=h._createFragment());++this._batch;return this};p.prototype.closeBatch=function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null);return this};p.prototype.add=function(a){if(this===a.getParent())return this;this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode);var f=a.getParent();f&&f.remove(a,!0);this.children.push(a);a._setParent(this,this._getRealMatrix());
return this};p.prototype.remove=function(a,f){void 0===f&&(f=!1);if(this!==a.getParent())return this;this.rawNode===a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode);this.fragment&&this.fragment===a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode);for(var g=0;g<this.children.length;++g)if(this.children[g]===a){f||(a.parent=null,a.parentMatrix=null);this.children.splice(g,1);break}return this};p.prototype.clear=function(a){void 0===a&&(a=!1);for(var f=this.rawNode;f.lastChild;)f.removeChild(f.lastChild);
var g=this.defNode;if(g){for(;g.lastChild;)g.removeChild(g.lastChild);f.appendChild(g)}for(g=0;g<this.children.length;++g)f=this.children[g],f.parent=null,f.parentMatrix=null,a&&f.destroy();this.children=[];return this};p.prototype.getBoundingBox=function(){if(!this.children)return null;var g=null;this.children.forEach(function(f){var h=f.getBoundingBox();h&&((f=f.getTransform())&&(h=a.multiplyRectangle(f,h)),g?(g.x=Math.min(g.x,h.x),g.y=Math.min(g.y,h.y),g.endX=Math.max(g.endX,h.x+h.width),g.endY=
Math.max(g.endY,h.y+h.height)):g={x:h.x,y:h.y,endX:h.x+h.width,endY:h.y+h.height,width:0,height:0})});g&&(g.width=g.endX-g.x,g.height=g.endY-g.y);return g};p.prototype._moveChildToFront=function(a){for(var f=0;f<this.children.length;++f)if(this.children[f]===a){this.children.splice(f,1);this.children.push(a);break}return this};p.prototype._moveChildToBack=function(a){for(var f=0;f<this.children.length;++f)if(this.children[f]===a){this.children.splice(f,1);this.children.unshift(a);break}return this};
return p}(m.default);w.default=B})},"esri/views/2d/libs/gfx/Image":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),function(B,w,q,a,m,h){Object.defineProperty(w,"__esModule",{value:!0});B=function(m){function p(g){var f=m.call(this)||this;f.shape=a.getDefault("Image");f.rawNode=g;return f}q(p,m);p.prototype.setShape=function(g){this.shape=a.makeParameters(this.shape,g);this.bbox=null;g=this.rawNode;for(var f in this.shape)if("type"!==
f&&"src"!==f){var n=this.shape[f];if("width"===f||"height"===f)n=0>n?0:n;g.setAttribute(f,n)}g.setAttribute("preserveAspectRatio","none");h._setAttributeNS(g,h.xmlns.xlink,"xlink:href",this.shape.src);g.__gfxObject__=this;return this};p.prototype.getBoundingBox=function(){return this.shape};p.prototype.setStroke=function(){return this};p.prototype.setFill=function(){return this};p.nodeType="image";return p}(m.default);w.default=B})},"esri/views/2d/libs/gfx/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base dojox/gfx/matrix ../../../../core/lang ./Shape".split(" "),
function(B,w,q,a,m,h,p){Object.defineProperty(w,"__esModule",{value:!0});B=function(p){function g(f){var g=p.call(this)||this;g.segments=[];g.tbbox=null;g.absolute=!0;g.last={};g.segmented=!1;g._validSegments={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0};g._2PI=2*Math.PI;g.rawNode=f;g.shape=h.clone(a.defaultPath);return g}q(g,p);g.prototype.setAbsoluteMode=function(a){this._confirmSegmented();this.absolute="string"===typeof a?"absolute"===a:a;return this};g.prototype.getAbsoluteMode=function(){this._confirmSegmented();
return this.absolute};g.prototype.getBoundingBox=function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null};g.prototype._getRealBBox=function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,g=this._getRealMatrix();this.bbox=null;for(var h=this.segments.length,b=0;b<h;++b)this._updateWithSegment(this.segments[b],g);g=this.bbox;this.bbox=a;return this.tbbox=g?[{x:g.l,
y:g.t},{x:g.r,y:g.t},{x:g.r,y:g.b},{x:g.l,y:g.b}]:null};g.prototype.getLastPosition=function(){this._confirmSegmented();return"x"in this.last?this.last:null};g.prototype._applyTransform=function(){this.tbbox=null;p.prototype._applyTransform.call(this);return this};g.prototype._updateBBox=function(a,g,h){h&&(g=m.multiplyPoint(h,a,g),a=g.x,g=g.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>g&&(this.bbox.t=g),this.bbox.b<g&&(this.bbox.b=g)):this.bbox=
{l:a,b:g,r:a,t:g}};g.prototype._updateWithSegment=function(f,g){var h=f.args,b=h.length,n;switch(f.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(n=0;n<b;n+=2)this._updateBBox(h[n],h[n+1],g);this.last.x=h[b-2];this.last.y=h[b-1];this.absolute=!0;break;case "H":for(n=0;n<b;++n)this._updateBBox(h[n],this.last.y,g);this.last.x=h[b-1];this.absolute=!0;break;case "V":for(n=0;n<b;++n)this._updateBBox(this.last.x,h[n],g);this.last.y=h[b-1];this.absolute=!0;break;case "m":n=0;"x"in this.last||
(this._updateBBox(this.last.x=h[0],this.last.y=h[1],g),n=2);for(;n<b;n+=2)this._updateBBox(this.last.x+=h[n],this.last.y+=h[n+1],g);this.absolute=!1;break;case "l":case "t":for(n=0;n<b;n+=2)this._updateBBox(this.last.x+=h[n],this.last.y+=h[n+1],g);this.absolute=!1;break;case "h":for(n=0;n<b;++n)this._updateBBox(this.last.x+=h[n],this.last.y,g);this.absolute=!1;break;case "v":for(n=0;n<b;++n)this._updateBBox(this.last.x,this.last.y+=h[n],g);this.absolute=!1;break;case "c":for(n=0;n<b;n+=6)this._updateBBox(this.last.x+
h[n],this.last.y+h[n+1],g),this._updateBBox(this.last.x+h[n+2],this.last.y+h[n+3],g),this._updateBBox(this.last.x+=h[n+4],this.last.y+=h[n+5],g);this.absolute=!1;break;case "s":case "q":for(n=0;n<b;n+=4)this._updateBBox(this.last.x+h[n],this.last.y+h[n+1],g),this._updateBBox(this.last.x+=h[n+2],this.last.y+=h[n+3],g);this.absolute=!1;break;case "A":for(n=0;n<b;n+=7)this._updateBBox(h[n+5],h[n+6],g);this.last.x=h[b-2];this.last.y=h[b-1];this.absolute=!0;break;case "a":for(n=0;n<b;n+=7)this._updateBBox(this.last.x+=
h[n+5],this.last.y+=h[n+6],g);this.absolute=!1}f=[f.action];for(n=0;n<b;++n)f.push(a.formatNumber(h[n],!0));if("string"===typeof this.shape.path)this.shape.path+=f.join("");else for(n=0,b=f.length;n<b;++n)this.shape.path.push(f[n]);"string"===typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)};g.prototype._pushSegment=function(a,g){this.tbbox=null;var f=this._validSegments[a.toLowerCase()];"number"===typeof f&&(f?g.length>=f&&(a={action:a,args:g.slice(0,g.length-g.length%f)},this.segments.push(a),
this._updateWithSegment(a)):(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))};g.prototype._collectArgs=function(a,g){for(var f=0;f<g.length;++f){var b=g[f];"boolean"===typeof b?a.push(b?1:0):"number"===typeof b?a.push(b):b instanceof Array?this._collectArgs(a,b):"x"in b&&"y"in b&&a.push(b.x,b.y)}};g.prototype._confirmSegmented=function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}};
g.prototype._setPath=function(f){f=Array.isArray(f)?f:f.match(a.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(f){for(var g="",h=[],b=f.length,m=0;m<b;++m){var p=f[m],q=parseFloat(p);isNaN(q)?(g&&this._pushSegment(g,h),h=[],g=p):h.push(q)}this._pushSegment(g,h)}};g.prototype.setShape=function(a){p.prototype.setShape.call(this,"string"===typeof a?{path:a}:a);this.segmented=!1;this.segments=[];this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");
return this};g.nodeType="path";return g}(p.default);w.default=B})},"esri/views/2d/libs/gfx/Rect":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(B,w,q,a,m){Object.defineProperty(w,"__esModule",{value:!0});B=function(h){function m(m){var g=h.call(this)||this;g.shape=a.getDefault("Rect");g.rawNode=m;return g}q(m,h);m.prototype.getBoundingBox=function(){return this.shape};m.prototype.setShape=function(h){this.shape=a.makeParameters(this.shape,
h);this.bbox=null;for(var g in this.shape)if("type"!==g&&"r"!==g){h=this.shape[g];if("width"===g||"height"===g)h=0>h?0:h;this.rawNode.setAttribute(g,h)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this};m.nodeType="rect";return m}(m.default);w.default=B})},"esri/views/2d/libs/gfx/Text":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ../../../../core/has ./Shape ./svg".split(" "),function(B,
w,q,a,m,h,p){Object.defineProperty(w,"__esModule",{value:!0});var x=m("chrome")?"auto":"optimizeLegibility";B=function(g){function f(f){var h=g.call(this)||this;h.fontStyle=null;h.shape=a.getDefault("Text");h.rawNode=f;return h}q(f,g);f.prototype.getFont=function(){return this.fontStyle};f.prototype.setFont=function(f){this.fontStyle="string"===typeof f?a.splitFontString(f):a.makeParameters(a.defaultFont,f);this._setFont();return this};f.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",
a.style);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)};f.prototype.setShape=function(f){this.shape=a.makeParameters(this.shape,f);this.bbox=null;f=this.rawNode;var g=this.shape;f.setAttribute("x",g.x);f.setAttribute("y",g.y);f.setAttribute("text-anchor",g.align);f.setAttribute("text-decoration",g.decoration);f.setAttribute("rotate",g.rotated?90:0);f.setAttribute("kerning",g.kerning?"auto":0);f.setAttribute("text-rendering",
x);f.firstChild?f.firstChild.nodeValue=g.text:f.appendChild(p._createTextNode(g.text));return this};f.prototype.getTextWidth=function(){var a=this.rawNode,f=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var b=0,g=a.firstChild.nodeValue;f.appendChild(a);if(""!==g)for(;!b;)b=a.getBBox?parseInt(a.getBBox().width,10):68;f.removeChild(a);return b};f.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(u){a={x:0,y:0,width:0,height:0}}return a};
f.nodeType="text";return f}(h.default);w.default=B})},"esri/views/2d/libs/gfx/Surface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/dom-construct dojox/gfx/_base ../../../../core/has ./Circle ./Container ./Group ./Image ./Path ./Rect ./svg ./Text".split(" "),function(B,w,q,a,m,h,p,x,g,f,n,u,b,t){Object.defineProperty(w,"__esModule",{value:!0});var D=navigator.userAgent,E=534<function(){var a=/WebKit\/(\d*)/.exec(D);return a?parseInt(a[1],10):0}();B=function(C){function A(){var a=
null!==C&&C.apply(this,arguments)||this;a.rawNode=null;a._parent=null;a._nodes=[];a._events=[];return a}q(A,C);A.prototype.destroy=function(){this._nodes.forEach(a.destroy);this._nodes=[];this._events.forEach(function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(h("ie"))for(;this._parent.lastChild;)a.destroy(this._parent.lastChild);else this._parent.innerHTML="";this.defNode=this._parent=null};A.prototype.setDimensions=function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;this.rawNode.setAttribute("width",
a);this.rawNode.setAttribute("height",b);E&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this};A.prototype.getDimensions=function(){return this.rawNode?{width:m.normalizedLength(this.rawNode.getAttribute("width")),height:m.normalizedLength(this.rawNode.getAttribute("height"))}:null};A.prototype.getEventSource=function(){return this.rawNode};A.prototype._getRealMatrix=function(){return null};A.prototype.createShape=function(a){switch(a.type){case m.defaultPath.type:return this.createPath(a);
case m.defaultRect.type:return this.createRect(a);case m.defaultCircle.type:return this.createCircle(a);case m.defaultImage.type:return this.createImage(a);case m.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};A.prototype.createGroup=function(){return this.createObject(g.default)};A.prototype.createRect=function(a){return this.createObject(u.default,a)};A.prototype.createCircle=function(a){return this.createObject(p.default,a)};A.prototype.createImage=
function(a){return this.createObject(f.default,a)};A.prototype.createText=function(a){return this.createObject(t.default,a)};A.prototype.createPath=function(a){return this.createObject(n.default,a)};A.prototype.createObject=function(a,f){if(!this.rawNode)return null;var g=new a;a=b._createElementNS(b.xmlns.svg,a.nodeType);g.setRawNode(a);g.setShape(f);this.add(g);return g};return A}(x.default);w.default=B})},"esri/views/2d/libs/gfx/svgSurface":function(){define(["require","exports","dojo/dom","./Surface",
"./svg"],function(B,w,q,a,m){Object.defineProperty(w,"__esModule",{value:!0});w.createSurface=function(h,p,x){var g=new a.default;g.rawNode=m._createElementNS(m.xmlns.svg,"svg");g.rawNode.setAttribute("overflow","hidden");p&&g.rawNode.setAttribute("width",0>p?0:p);x&&g.rawNode.setAttribute("height",0>x?0:x);p=m._createElementNS(m.xmlns.svg,"defs");g.rawNode.appendChild(p);g.defNode=p;g._parent=q.byId(h);g._parent.appendChild(g.rawNode);return g}})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(B,w,q,a,m,h){return function(m){function p(){var a=null!==m&&m.apply(this,arguments)||this;a.graphics=null;a.renderer=null;a.view=null;return a}q(p,m);a([h.property()],p.prototype,"graphics",void 0);a([h.property()],p.prototype,"renderer",void 0);a([h.property()],p.prototype,"view",void 0);return p=a([h.subclass("esri.views.layers.GraphicsView")],p)}(h.declared(m))})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Viewpoint ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){var t=new m({targetGeometry:new x}),D=[0,0];return function(h){function m(a){a=h.call(this)||this;a._endTimer=null;a.animationManager=null;return a}q(m,h);m.prototype.initialize=function(){this.pan=new n({navigation:this});this.rotate=new b({navigation:this});this.pinch=new u({navigation:this});this.zoomBox=new f({view:this.view,navigation:this})};m.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=this.zoomBox=null};m.prototype.begin=function(){this._set("interacting",
!0)};m.prototype.end=function(){var a=this;this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=0);this._endTimer=setTimeout(function(){a._set("interacting",!1)},0)};m.prototype.zoom=function(a,b){void 0===b&&(b=this._getDefaultAnchor());this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?this.zoomIn(b):this.zoomOut(b);this.setViewpoint(b,a,0,[0,0])};m.prototype.zoomIn=function(a){void 0===a&&(a=this._getDefaultAnchor());var b=this.view,
f=b.scale,g=b.constraints.snapToNextScale(f);return b.goTo(this._scaleAndRotateViewpoint(t,a,g/f,0))};m.prototype.zoomOut=function(a){void 0===a&&(a=this._getDefaultAnchor());var b=this.view,f=b.scale,g=b.constraints.snapToPreviousScale(f);return b.goTo(this._scaleAndRotateViewpoint(t,a,g/f,0))};m.prototype.setViewpoint=function(a,b,f,g){this.begin();this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,a,b,f,g);this.end()};m.prototype.animateViewpoint=function(a,b,f){return this.view.goTo(this._scaleAndRotateViewpoint(t,
a,b,f))};m.prototype.continousRotateClockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.rotateBy(a,a,-1)})};m.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.rotateBy(a,a,1)})};m.prototype.resetRotation=function(){this.view.rotation=0};m.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,
a,[-10,0])})};m.prototype.continousPanRight=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,a,[10,0])})};m.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,a,[0,10])})};m.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){g.translateBy(a,a,[0,-10])})};m.prototype.stop=function(){this.pan.stopMomentumNavigation();
this.animationManager.stop();this.end();this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=0)};m.prototype._getDefaultAnchor=function(){var a=this.view.size;D[0]=.5*a[0];D[1]=.5*a[1];return D};m.prototype._scaleAndRotateViewpoint=function(a,b,f,h){var n=this.view,m=n.size,u=n.padding,t=n.constraints,A=n.viewpoint,p=n.scale*f,n=t.canZoomInTo(p),t=t.canZoomOutTo(p);return 1>f&&!n||1<f&&!t?A:g.padAndScaleAndRotateBy(a,A,f,h,b,m,u)};m.prototype._scaleRotateTranslateViewpoint=function(a,b,f,
h,n){var m=this.view,u=m.size,t=m.padding,A=m.constraints,p=m.viewpoint,C=m.scale*f,m=A.canZoomInTo(C),A=A.canZoomOutTo(C);if(1>f&&!m||1<f&&!A)f=1;g.translateBy(p,p,n);return g.padAndScaleAndRotateBy(a,p,f,h,b,u,t)};a([p.property()],m.prototype,"animationManager",void 0);a([p.property({type:Boolean,readOnly:!0})],m.prototype,"interacting",void 0);a([p.property()],m.prototype,"pan",void 0);a([p.property()],m.prototype,"pinch",void 0);a([p.property()],m.prototype,"rotate",void 0);a([p.property()],m.prototype,
"view",void 0);a([p.property()],m.prototype,"zoomBox",void 0);return m=a([p.subclass("esri.views.2d.navigation.MapViewNavigation")],m)}(p.declared(h))})},"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(B,w,q,a,m,h){return function(m){function p(a){a=m.call(this,a)||this;a._container=null;a._overlay=null;a._backgroundShape=
null;a._boxShape=null;a._box={x:0,y:0,width:0,height:0};a._redraw=a._redraw.bind(a);return a}q(p,m);p.prototype.destroy=function(){this.view=null};Object.defineProperty(p.prototype,"view",{set:function(a){var f=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return f._handleDrag(a,1)}),a.on("drag",["Shift","Ctrl"],function(a){return f._handleDrag(a,-1)}))},enumerable:!0,configurable:!0});
p.prototype._start=function(a,f,h,m){this._createContainer();this._createOverlay();this.navigation.begin()};p.prototype._update=function(a,f,h,m){this._box.x=a;this._box.y=f;this._box.width=h;this._box.height=m;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};p.prototype._end=function(a,f,h,m,b){var g=this.view;a=g.toMap(a+.5*h,f+.5*m);h=Math.max(h/g.width,m/g.height);-1===b&&(h=1/h);this._destroyOverlay();this.navigation.end();g.goTo({center:a,scale:g.scale*h})};p.prototype._updateBox=
function(a,f,h,m){var b=this._boxShape;b.setAttributeNS(null,"x",""+a);b.setAttributeNS(null,"y",""+f);b.setAttributeNS(null,"width",""+h);b.setAttributeNS(null,"height",""+m);b.setAttributeNS(null,"class","esri-zoom-box__outline")};p.prototype._updateBackground=function(a,f,h,m){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,f,h,m,this.view.width,this.view.height))};p.prototype._createContainer=function(){var a=document.createElement("div");a.className="esri-zoom-box__container";
this.view.root.appendChild(a);this._container=a};p.prototype._createOverlay=function(){var a=this.view.width,f=this.view.height,h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+f+" L 0 "+f+" Z");h.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg","rect");f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS("http://www.w3.org/2000/xmlns/",
"xmlns:xlink","http://www.w3.org/1999/xlink");f.setAttributeNS(null,"class","esri-zoom-box__overlay");f.appendChild(h);f.appendChild(a);this._container.appendChild(f);this._backgroundShape=h;this._boxShape=a;this._overlay=f};p.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null};p.prototype._toSVGPath=function(a,f,h,m,b,t){h=a+h;m=f+m;return"M 0 0 L "+
b+" 0 L "+b+" "+t+" L 0 "+t+" ZM "+a+" "+f+" L "+a+" "+m+" L "+h+" "+m+" L "+h+" "+f+" Z"};p.prototype._handleDrag=function(a,f){var g=a.x,h=a.y,b=a.origin.x,m=a.origin.y,p;g>b?(p=b,b=g-b):(p=g,b-=g);h>m?(g=m,h-=m):(g=h,h=m-h);switch(a.action){case "start":this._start(p,g,b,h);break;case "update":this._update(p,g,b,h);break;case "end":this._end(p,g,b,h,f)}a.stopPropagation()};p.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=this._box,f=a.x,h=a.y,m=a.width,a=a.height;
this._updateBox(f,h,m,a);this._updateBackground(f,h,m,a);this._rafId=requestAnimationFrame(this._redraw)}};a([h.property()],p.prototype,"navigation",void 0);a([h.property()],p.prototype,"view",null);return p=a([h.subclass("esri.views.2d.navigation.ZoomBox")],p)}(h.declared(m))})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../viewpointUtils ../../../3d/lib/gl-matrix ../../../navigation/PanPlanarMomentumEstimator".split(" "),
function(B,w,q,a,m,h,p,x,g){return function(f){function n(a){var b=f.call(this)||this;b.animationTime=0;b.momentumEstimator=new g.PanPlanarMomentumEstimator(500,6,.92);b.momentum=null;b.tmpMomentum=x.vec3d.create();b.momentumFinished=!1;b.viewpoint=p.create();b.watch("momentumFinished",function(a){a&&b.navigation.stop()});return b}q(n,f);n.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b);this.previousDrag=b};n.prototype.update=function(a,
b){this.addToEstimator(b);var f=b.center.x,g=b.center.y,h=this.previousDrag,f=h?h.center.x-f:-f,g=h?g-h.center.y:g;a.viewpoint=p.translateBy(this.viewpoint,a.viewpoint,[f||0,g||0]);this.previousDrag=b};n.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=this.momentumEstimator.evaluateMomentum();this.animationTime=0;if(this.momentum)this.onAnimationUpdate(a);this.previousDrag=null;this.navigation.end()};n.prototype.addToEstimator=function(a){var b=x.vec3d.createFrom(-a.center.x,a.center.y,
0);this.momentumEstimator.add(b,b,.001*a.timestamp)};n.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(f,g){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);g*=.001;if(!b.momentumFinished){var h=b.momentum.valueDelta(b.animationTime,g);x.vec3d.scale(b.momentum.direction,h,b.tmpMomentum);a.viewpoint=p.translateBy(f,f,b.tmpMomentum)}b.animationTime+=g})};n.prototype.stopMomentumNavigation=function(){this.momentum&&
(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};a([h.property()],n.prototype,"momentumFinished",void 0);a([h.property()],n.prototype,"viewpoint",void 0);a([h.property()],n.prototype,"navigation",void 0);return n=a([h.subclass("esri.views.2d.navigation.actions.Pan")],n)}(h.declared(m))})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../viewpointUtils ../../libs/gl-matrix/vec2 ../../../navigation/RotationMomentumEstimator ../../../navigation/ZoomMomentumEstimator".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(n){function m(a){var b=n.call(this,a)||this;b._animationTime=0;b._momentumFinished=!1;b._rotationMomentumEstimator=new g.RotationMomentumEstimator(.6,.15,.95);b._rotationDirection=1;b._startCenter=null;b._zoomDirection=1;b._zoomMomentumEstimator=new f.ZoomMomentumEstimator;b._zoomOnly=null;b.zoomMomentum=null;b.rotateMomentum=null;b.viewpoint=p.create();b.watch("_momentumFinished",function(a){a&&b.navigation.stop()});return b}q(m,n);m.prototype.begin=
function(a,f){this.navigation.begin();this._rotationMomentumEstimator.reset();this._zoomMomentumEstimator.reset();this._zoomOnly=null;this._previousAngle=this._startAngle=f.angle;this._previousRadius=this._startRadius=f.radius;this._previousCenter=this._startCenter=f.center;this._updateTimestamp=null;a.constraints.rotationEnabled&&this.addToRotateEstimator(0,f.timestamp);this.addToZoomEstimator(f,1)};m.prototype.update=function(a,f){null===this._updateTimestamp&&(this._updateTimestamp=f.timestamp);
var b=f.angle,g=f.radius,h=f.center,m=Math.abs(180*(b-this._startAngle)/Math.PI),n=Math.abs(g-this._startRadius),u=this._startRadius/g;if(this._previousRadius){var t=g/this._previousRadius,p=180*(b-this._previousAngle)/Math.PI;this._rotationDirection=0<=p?1:-1;this._zoomDirection=1<=t?1:-1;a.constraints.rotationEnabled?(null===this._zoomOnly&&200<f.timestamp-this._updateTimestamp&&(this._zoomOnly=0<n-m),null===this._zoomOnly||this._zoomOnly?p=0:this.addToRotateEstimator(b-this._startAngle,f.timestamp)):
p=0;this.addToZoomEstimator(f,u);this.navigation.setViewpoint([h.x,h.y],1/t,p,[this._previousCenter.x-h.x,h.y-this._previousCenter.y])}this._previousAngle=b;this._previousRadius=g;this._previousCenter=h};m.prototype.end=function(a,f){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum();this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum();this._animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(a);this.navigation.end()};m.prototype.addToRotateEstimator=
function(a,f){this._rotationMomentumEstimator.add(a,.001*f)};m.prototype.addToZoomEstimator=function(a,f){this._zoomMomentumEstimator.add(f,.001*a.timestamp)};m.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a};m.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||b<a};m.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(f,g){var h=!b.canZoomIn(a)&&
1<b._zoomDirection||!b.canZoomOut(a)&&1>b._zoomDirection,m=!b.rotateMomentum||b.rotateMomentum.isFinished(b._animationTime),h=h||!b.zoomMomentum||b.zoomMomentum.isFinished(b._animationTime);g*=.001;b._momentumFinished=m&&h;if(!b._momentumFinished){var m=b.rotateMomentum?Math.abs(b.rotateMomentum.valueDelta(b._animationTime,g))*b._rotationDirection*180/Math.PI:0,h=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b._animationTime,g)):1,n=x.create(),u=x.create();if(b._previousCenter){x.set(n,b._previousCenter.x,
b._previousCenter.y);p.getPaddingScreenTranslation(u,a.size,a.padding);x.add(n,n,u);var u=a.constraints,t=a.scale,q=t*h;1>h&&!u.canZoomInTo(q)?(h=t/u.effectiveMaxScale,b.zoomMomentum=null,b.rotateMomentum=null):1<h&&!u.canZoomOutTo(q)&&(h=t/u.effectiveMinScale,b.zoomMomentum=null,b.rotateMomentum=null);p.scaleAndRotateBy(f,a.viewpoint,h,m,n,a.size)}}b._animationTime+=g})};m.prototype.stopMomentumNavigation=function(){if(this.rotateMomentum||this.zoomMomentum)this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),
this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};a([h.property()],m.prototype,"_momentumFinished",void 0);a([h.property()],m.prototype,"viewpoint",void 0);a([h.property()],m.prototype,"navigation",void 0);return m=a([h.subclass("esri.views.2d.navigation.actions.Pinch")],m)}(h.declared(m))})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../viewpointUtils ../../libs/gl-matrix/vec2".split(" "),
function(B,w,q,a,m,h,p,x){return function(g){function f(a){a=g.call(this)||this;a.animationTime=0;a.viewpoint=p.create();return a}q(f,g);f.prototype.begin=function(a,f){this.navigation.begin();this.previousCenter=f.center};f.prototype.update=function(a,f){var b=x.create();x.set(b,f.center.x+a.padding.left-a.padding.right,a.height-f.center.y+a.padding.top-a.padding.bottom);var g=x.create();x.set(g,this.previousCenter.x+a.padding.left-a.padding.right,a.height-this.previousCenter.y+a.padding.top-a.padding.bottom);
b=p.angleBetween([a.state.paddedScreenCenter[0]+a.padding.left-a.padding.right,a.state.paddedScreenCenter[1]],b,g);a.viewpoint=p.rotateBy(this.viewpoint,a.content.viewpoint,b);this.previousCenter=f.center};f.prototype.end=function(a,f){this.navigation.end()};a([h.property()],f.prototype,"viewpoint",void 0);a([h.property()],f.prototype,"navigation",void 0);return f=a([h.subclass("esri.views.2d.actions.Rotate")],f)}(h.declared(m))})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(B,w,q,a,m,h,p){return function(h){function g(){var a=null!==h&&h.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=.5;return a}q(g,h);a([p.property({type:m})],g.prototype,"color",void 0);a([p.property()],g.prototype,"haloOpacity",void 0);a([p.property()],g.prototype,"fillOpacity",void 0);return g=a([p.subclass("esri.views.2d.support.HighlightOptions")],g)}(p.declared(h))})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(B,w,q,a,m,h){return function(h){function p(a){a=h.call(this)||this;a.components=["attribution","zoom"];return a}q(p,h);a([m.property()],p.prototype,"components",void 0);return p=a([m.subclass("esri.views.ui.2d.DefaultUI2D")],p)}(m.declared(h))})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(g){function n(){var a=null!==g&&g.apply(this,arguments)||this;a.categories=null;a.countryCode=null;a.localSearchOptions=null;a.locationToAddressDistance=1500;a.locator=null;a.name="";a.placeholder="";a.searchTemplate="";a.singleLineFieldName=null;a.suggestionsEnabled=null;a.zoomScale=null;return a}q(n,g);b=n;n.prototype.readLocator=function(a,b){return(a=b.url)?new x({url:a}):null};n.prototype.writeLocator=function(a,b){b.url=a?a.url:null};n.prototype.clone=
function(){return new b({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?h.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,
suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?h.clone(this.categories):null,countryCode:this.countryCode,localSearchOptions:this.localSearchOptions?h.clone(this.localSearchOptions):null,locationToAddressDistance:this.locationToAddressDistance,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};n.prototype.getResults=function(a){return f.getResults(m({source:this},a))};n.prototype.getSuggestions=
function(a){return f.getSuggestions(m({source:this},a))};var b;a([p.property()],n.prototype,"categories",void 0);a([p.property()],n.prototype,"countryCode",void 0);a([p.property()],n.prototype,"localSearchOptions",void 0);a([p.property()],n.prototype,"locationToAddressDistance",void 0);a([p.property({type:x})],n.prototype,"locator",void 0);a([p.reader("locator",["url"])],n.prototype,"readLocator",null);a([p.writer("locator")],n.prototype,"writeLocator",null);a([p.property({json:{write:!0}})],n.prototype,
"name",void 0);a([p.property({json:{write:!0}})],n.prototype,"placeholder",void 0);a([p.property()],n.prototype,"searchTemplate",void 0);a([p.property({json:{write:!0}})],n.prototype,"singleLineFieldName",void 0);a([p.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],n.prototype,"suggestionsEnabled",void 0);a([p.property({json:{write:!0}})],n.prototype,"zoomScale",void 0);return n=b=a([p.subclass("esri.widgets.Search.LocatorSearchSource")],n)}(p.declared(g))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(g){function n(a){a=g.call(this,a)||this;a.categories=null;a.countryCode=null;a.outSpatialReference=null;a.url=null;return a}q(n,g);n.prototype.addressToLocations=function(a,f){var b=a.address,g=a.categories,n=a.countryCode,u=a.distance,t=a.forStorage,p=a.location,q=a.magicKey,x=a.maxLocations,y=a.outFields;a=a.searchExtent;var I=p?p.clone().normalize():null,w=a?a.shiftCentralMeridian():null,N=this.outSpatialReference,p=this.parsedUrl;a=this.requestOptions;
g={f:"json",outSR:N?JSON.stringify(N.toJSON()):null,outFields:y?y.join(","):null,searchExtent:w?JSON.stringify(w.toJSON()):null,category:g?g.join(","):null,countryCode:n||null,magicKey:q||null,distance:u||null,location:I,maxLocations:x||null,forStorage:t||null};b={query:this._encode(m({},p.query,b,g))};f=m({},a,f,b);return h(p.path+"/findAddressCandidates",f).then(this._handleAddressToLocationsResponse)};n.prototype.suggestLocations=function(a,f){var b=this.parsedUrl,g=this.requestOptions,n=a.location,
u=a.searchExtent,n=n?n.clone().normalize():null,u=u?u.shiftCentralMeridian():null;a={f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:u?JSON.stringify(u.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:n,distance:a.distance||null};a={query:this._encode(m({},b.query,a))};f=m({},g,f,a);return h(b.path+"/suggest",f).then(this._handleSuggestLocationsResponse)};n.prototype.addressesToLocations=function(a,f){var b=this.outSpatialReference,
g=this.parsedUrl,n=this.requestOptions,u=a.addresses,p=a.categories;a=a.countryCode;var t=[];Array.isArray(u)&&u.forEach(function(a){t.push({attributes:a})});b={category:p?p.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:t}),f:"json",outSR:b?JSON.stringify(b):null};b={query:this._encode(m({},g.query,b))};f=m({},n,f,b);return h(g.path+"/geocodeAddresses",f).then(this._handleAddressesToLocationsResponse)};n.prototype.locationToAddress=function(a,f,g){var b=a?a.clone().normalize():
null,n="undefined"!==typeof b,u="undefined"!==typeof f&&n,p=this.outSpatialReference;a=this.parsedUrl;var t=this.requestOptions;f={outSR:p?JSON.stringify(p.toJSON()):null,location:n?JSON.stringify(b.toJSON()):null,distance:u?f:null,f:"json"};f={query:this._encode(m({},a.query,f))};g=m({},t,g,f);return h(a.path+"/reverseGeocode",g).then(this._handleLocationToAddressResponse)};n.prototype._handleAddressToLocationsResponse=function(a){a=a.data;if(!a)return[];var b=a.candidates,g=a.spatialReference;return b?
b.map(function(a){if(a){var b=a.extent,h=a.location,n=b?b&&"number"===typeof b.xmin&&"number"===typeof b.ymin&&"number"===typeof b.xmax&&"number"===typeof b.ymax:!0;if(h&&"number"===typeof h.x&&"number"===typeof h.x&&n)return b&&(b.spatialReference=g),h.spatialReference=g,f.fromJSON(a)}}):[]};n.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};n.prototype._handleAddressesToLocationsResponse=function(a){a=a.data;if(!a)return[];var b=a.locations,g=a.spatialReference;
return b?b.map(function(a){var b=a.location;b&&(b.spatialReference=g);return f.fromJSON(a)}):[]};n.prototype._handleLocationToAddressResponse=function(a){if(a=a.data){var b=a.address;return f.fromJSON({address:b&&b.Match_addr||"",attributes:b||{},location:a.location,score:100})}};a([p.property()],n.prototype,"categories",void 0);a([p.property()],n.prototype,"countryCode",void 0);a([p.property({type:x})],n.prototype,"outSpatialReference",void 0);a([p.property()],n.prototype,"url",void 0);return n=
a([p.subclass("esri.tasks.Locator")],n)}(p.declared(g))})},"esri/tasks/support/AddressCandidate":function(){define(["../../core/JSONSupport","../../geometry/Extent","../../geometry/Point"],function(B,w,q){return B.createSubclass({declaredClass:"esri.tasks.support.AddressCandidate",properties:{address:{value:null,json:{write:!0}},attributes:{value:null,json:{write:!0}},extent:{value:null,type:w,json:{write:!0}},location:{value:null,type:q,json:{write:!0}},score:{value:null,json:{write:!0}}}})})},"esri/widgets/Search/support/locatorUtils":function(){define(["require",
"exports","../../../Graphic","../../../core/promiseUtils","./geometryUtils"],function(B,w,q,a,m){function h(a){var b=a.source,g=a.spatialReference,h=a.location,n=a.distance,m=a.sourceIndex,u=a.view;a=b.locator;var p=b.zoomScale,q=u&&u.scale;g&&(a.outSpatialReference=g);return a.locationToAddress(h,n).then(function(a){return f([a],{sourceIndex:m,scale:q,view:u,zoomScale:p})})}function p(a,b){var f=a.filter,g=a.searchExtent;a=a.withinViewEnabled;var h=b&&b.extent;return(b=m.createExtentFromGeometry(f&&
f.geometry,b,b&&b.scale))||g||(a&&h?h:void 0)}function x(g){var b=g.source,h=g.suggestResult,m=g.spatialReference,u=g.view,C=g.maxResults,A=g.sourceIndex,q=b&&b.zoomScale;g=h.text.trim();if(!g)return a.resolve();g=""+(!h.key&&b.prefix?b.prefix:"")+g+(!h.key&&b.suffix?b.suffix:"");var x={},w=b.locator,K=u&&u.scale,y=p(b,u);if(!w)return a.resolve();b.categories&&(x.categories=b.categories);m&&(w.outSpatialReference=m);if(m=n(u,b,K))x.location=m.location,x.distance=m.distance;x.maxLocations=C;y&&(x.searchExtent=
y);b.countryCode&&(x.countryCode=b.countryCode);var I=h.key;I&&(x.magicKey=I);x.address={};x.address[b.singleLineFieldName||"Single Line Input"]=g;b.outFields&&(x.outFields=b.outFields);return w.addressToLocations(x).then(function(a){return f(a,{key:I,scale:K,sourceIndex:A,view:u,zoomScale:q})})}function g(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function f(a,b){return a.map(function(a){var f=b.key,g=b.scale,h=b.sourceIndex,n=b.view,u=b.zoomScale,p=a.extent,
t=a.location,x=a.address;a=new q({geometry:t,attributes:a.attributes});g=m.createExtentFromGeometry(p||t,n,g);n=u?m.scaleExtent(g,n,u):g;t=t?t.x+","+t.y:"";return{extent:n,feature:a,key:f,name:x||t,sourceIndex:h}})}function n(a,b,f){var g=b.localSearchOptions;if(a&&g&&g.hasOwnProperty("distance")&&g.hasOwnProperty("minScale")&&(b=g.minScale,g=g.distance,!b||f&&f<=b))return{location:a.get("extent.center"),distance:g}}Object.defineProperty(w,"__esModule",{value:!0});w.getResults=function(a){return a.location?
h(a):x(a)};w.getSuggestions=function(f){var b=f.source,h=f.spatialReference,m=f.view,u=f.suggestTerm,C=f.maxSuggestions,A=f.sourceIndex;f={};var q=b.locator,x=m&&m.scale,w=p(b,m);if(!q)return a.resolve();b.categories&&(f.categories=b.categories);q.outSpatialReference=h;if(h=n(m,b,x))f.location=h.location,f.distance=h.distance;u=u.trim();if(!u)return a.resolve();h=b.prefix;m=b.suffix;f.text=""+(void 0===h?"":h)+u+(void 0===m?"":m);w&&(f.searchExtent=w);f.maxSuggestions=C;b.countryCode&&(f.countryCode=
b.countryCode);return q.suggestLocations(f).then(function(a){return g(a,A)})};w.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):!1}})},"esri/widgets/Legend":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Legend/nls/Legend ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ../core/accessorSupport/decorators/cast ./Widget ./Legend/LegendViewModel ./Legend/styles/Card ./Legend/styles/Classic ./support/widget".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D){return function(n){function C(a){a=n.call(this)||this;a._handles=new p;a.activeLayerInfos=null;a.basemapLegendVisible=!1;a.groundLegendVisible=!1;a.iconClass="esri-icon-layer-list";a.label=h.widgetLabel;a.layerInfos=null;a.style=new t;a.view=null;a.viewModel=new u;return a}a(C,n);C.prototype.postInitialize=function(){var a=this;this.own(x.on(this,"activeLayerInfos","change",function(){return a._refreshActiveLayerInfos(a.activeLayerInfos)}),x.init(this,"style",
function(b,f){f&&f.destroy();b&&(b.activeLayerInfos=a.activeLayerInfos,"card"===b.type&&(b.view=a.view))}))};C.prototype.destroy=function(){this._handles.destroy();this._handles=null};C.prototype.castStyle=function(a){if(a instanceof b||a instanceof t)return a;if("string"===typeof a)return"card"===a?new b:new t;if(a&&"string"===typeof a.type){var f=q({},a);delete f.type;return new ("card"===a.type?b:t)(f)}return new t};C.prototype.render=function(){return this.style.render()};C.prototype._refreshActiveLayerInfos=
function(a){var b=this;this._handles.removeAll();a.forEach(function(a){return b._renderOnActiveLayerInfoChange(a)});this.scheduleRender()};C.prototype._renderOnActiveLayerInfoChange=function(a){var b=this,f=x.init(a,"version",function(){return b.scheduleRender()});this._handles.add(f,"version_"+a.layer.uid);a.children.forEach(function(a){return b._renderOnActiveLayerInfoChange(a)})};m([g.aliasOf("viewModel.activeLayerInfos"),D.renderable()],C.prototype,"activeLayerInfos",void 0);m([g.aliasOf("viewModel.basemapLegendVisible"),
D.renderable()],C.prototype,"basemapLegendVisible",void 0);m([g.aliasOf("viewModel.groundLegendVisible"),D.renderable()],C.prototype,"groundLegendVisible",void 0);m([g.property()],C.prototype,"iconClass",void 0);m([g.property()],C.prototype,"label",void 0);m([g.aliasOf("viewModel.layerInfos"),D.renderable()],C.prototype,"layerInfos",void 0);m([g.property(),D.renderable()],C.prototype,"style",void 0);m([f.cast("style")],C.prototype,"castStyle",null);m([g.aliasOf("viewModel.view"),D.renderable()],C.prototype,
"view",void 0);m([g.property(),D.renderable(["view.size"])],C.prototype,"viewModel",void 0);return C=m([g.subclass("esri.widgets.Legend")],C)}(g.declared(n))})},"esri/widgets/Legend/LegendViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./support/ActiveLayerInfo".split(" "),function(B,w,q,a,m,h,p,x,g,f){var n=
h.ofType(f),u="esri.layers.CSVLayer esri.layers.FeatureLayer esri.layers.HeatmapLayer esri.layers.MapImageLayer esri.layers.MapNotesLayer esri.layers.PointCloudLayer esri.layers.TileLayer esri.layers.StreamLayer esri.layers.SceneLayer esri.layers.GeoRSSLayer esri.layers.GroupLayer esri.layers.ImageryLayer esri.layers.WMSLayer esri.layers.WMTSLayer".split(" "),b=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];return function(h){function m(a){a=
h.call(this,a)||this;a._handles=new p;a._layerViewByLayerId={};a._layerInfosByLayerViewId={};a._activeLayerInfosByLayerViewId={};a.activeLayerInfos=new n;a.basemapLegendVisible=!1;a.groundLegendVisible=!1;a.layerInfos=[];a.view=null;return a}q(m,h);m.prototype.initialize=function(){this._handles.add(x.init(this,"view",this._viewHandles),"view")};m.prototype.destroy=function(){this._destroyViewActiveLayerInfos();this._handles.destroy();this.view=this._handles=null};Object.defineProperty(m.prototype,
"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});m.prototype._viewHandles=function(){this._handles.remove("state");this.view&&this._handles.add(x.init(this,"state",this._stateHandles),"state")};m.prototype._stateHandles=function(){this._resetAll();"ready"===this.state&&this._watchPropertiesAndAllLayerViews()};m.prototype._resetAll=function(){this._handles.remove(["all-layer-views","legend-properties"]);this._destroyViewActiveLayerInfos();this.activeLayerInfos.removeAll()};
m.prototype._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)};m.prototype._destroyViewActiveLayerInfo=function(a){this._handles.remove(a);delete this._activeLayerInfosByLayerViewId[a]};m.prototype._watchPropertiesAndAllLayerViews=function(){var a=this.view.allLayerViews;a.length&&this._refresh();this._handles.add(a.on("change",this._allLayerViewsChangeHandle.bind(this)),"all-layer-views");this._handles.add(x.watch(this,
"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),"legend-properties")};m.prototype._allLayerViewsChangeHandle=function(a){var b=this;a.removed.forEach(function(a){return b._destroyViewActiveLayerInfo(a.uid)});this._refresh()};m.prototype._propertiesChangeHandle=function(){this._destroyViewActiveLayerInfos();this._refresh()};m.prototype._refresh=function(){this._layerInfosByLayerViewId={};this.activeLayerInfos.removeAll();this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,
this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this);this._sortActiveLayerInfos(this.activeLayerInfos)};m.prototype._sortActiveLayerInfos=function(a){var b={};this.view.allLayerViews.forEach(function(a,f){return b[a.layer.uid]=f});a.sort(function(a,f){return(b[f.layer.uid]||0)-(b[a.layer.uid]||0)})};m.prototype._generateLayerViews=function(){var a=[];b.filter(this._filterLayerViews,this).map(this.get,this).filter(function(a){return null!=a}).forEach(this._collectLayerViews("layerViews",
a));return a};m.prototype._filterLayerViews=function(a){var b=!this.groundLegendVisible&&"view.groundView.layerViews"===a;return!(!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===a||"view.basemapView.referenceLayerViews"===a))&&!b};m.prototype._collectLayerViews=function(a,b){var f=function(g){g&&g.forEach(function(g){b.push(g);f(g[a])});return b};return f};m.prototype._filterLayerViewsByLayerInfos=function(a){var b=this,f=this.layerInfos;return f&&f.length?f.some(function(f){return b._hasLayerInfo(f,
a)}):!0};m.prototype._hasLayerInfo=function(a,b){var f=this._isLayerUIDMatching(a.layer,b.layer.uid);f&&(this._layerInfosByLayerViewId[b.uid]=a);return f};m.prototype._isLayerUIDMatching=function(a,b){return a&&(a.uid===b||this._hasLayerUID(a.layers,b))};m.prototype._hasLayerUID=function(a,b){var f=this;return a&&a.some(function(a){return f._isLayerUIDMatching(a,b)})};m.prototype._isLayerViewSupported=function(a){return-1<u.indexOf(a.layer.declaredClass)?(this._layerViewByLayerId[a.layer.uid]=a,!0):
!1};m.prototype._generateActiveLayerInfo=function(a){var b=this;this._isLayerActive(a)?this._buildActiveLayerInfo(a):(this._handles.remove(a.uid),this._handles.add(x.watch(a,"suspended, layer.legendEnabled",function(){return b._layerActiveHandle(a)}),a.uid))};m.prototype._layerActiveHandle=function(a){this._isLayerActive(a)&&(this._handles.remove(a.uid),this._buildActiveLayerInfo(a))};m.prototype._isLayerActive=function(a){return!a.suspended&&a.get("layer.legendEnabled")};m.prototype._buildActiveLayerInfo=
function(a){var b=this,g=a.layer,h=a.uid,m=this._layerInfosByLayerViewId[h],n=this._activeLayerInfosByLayerViewId[h];n||(n=new f({layer:g,title:m&&void 0!==m.title?m.title:g.title}),this._activeLayerInfosByLayerViewId[h]=n);n.parent||(m=(m=g.parent)&&this._layerViewByLayerId[m.uid],n.parent=m&&this._activeLayerInfosByLayerViewId[m.uid]);if(!this._handles.has(h)){var m=x.watch(g,"title",function(f){return b._titleHandle(f,n,a)}),u=x.watch(g,"legendEnabled",function(f){return b._legendEnabledHandle(f,
n,a)}),g=x.watch(g,"renderer, opacity",function(){return b._constructLegendElements(n,a)}),y=x.watch(a,"suspended",function(f){return b._suspendedHandle(f,n,a)}),p=x.whenTrue(this.view,"stationary",function(){return b._scaleHandle(n,a)});this._handles.add([m,u,g,y,p],h);this._constructLegendElements(n,a)}this._addActiveLayerInfo(n,a)};m.prototype._titleHandle=function(a,b,f){b.title=a;this._constructLegendElements(b,f)};m.prototype._legendEnabledHandle=function(a,b,f){a?this._addActiveLayerInfo(b,
f):this._removeActiveLayerInfo(b)};m.prototype._suspendedHandle=function(a,b,f){a?this._removeActiveLayerInfo(b):this._addActiveLayerInfo(b,f)};m.prototype._scaleHandle=function(a,b){a.scale!==this.view.scale&&a.isScaleDriven&&this._constructLegendElements(a,b)};m.prototype._addActiveLayerInfo=function(a,b){this._isLayerActive(b)&&-1===this.activeLayerInfos.indexOf(a)&&((b=a.parent,b)?-1===b.children.indexOf(a)&&(b.children.push(a),this._sortActiveLayerInfos(b.children)):(this.activeLayerInfos.add(a),
this._sortActiveLayerInfos(this.activeLayerInfos)))};m.prototype._removeActiveLayerInfo=function(a){var b=a.parent;b?(a=b.children.indexOf(a),-1!==a&&b.children.splice(a,1)):this.activeLayerInfos.remove(a)};m.prototype._constructLegendElements=function(a,b){b=b.layer;a.scale=this.view.scale;b.featureCollections?a.buildLegendElementsForFeatureCollections(b.featureCollections):b.renderer?a.buildLegendElementsForRenderer():b.url&&a.buildLegendElementsForTools()};a([g.property({type:n})],m.prototype,
"activeLayerInfos",void 0);a([g.property()],m.prototype,"basemapLegendVisible",void 0);a([g.property()],m.prototype,"groundLegendVisible",void 0);a([g.property()],m.prototype,"layerInfos",void 0);a([g.property({dependsOn:["view.ready"],readOnly:!0})],m.prototype,"state",null);a([g.property()],m.prototype,"view",void 0);return m=a([g.subclass("esri.widgets.Legend.LegendViewModel")],m)}(g.declared(m))})},"esri/widgets/Legend/support/ActiveLayerInfo":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/io-query ../../../Color ../../../request ../../../symbols ../../../core/Accessor ../../../core/arrayUtils ../../../core/Collection ../../../core/Handles ../../../core/Logger ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/support/ExportImageParameters ../../../renderers/support/jsonUtils ../../../symbols/support/gfxUtils ../../../symbols/support/symbolPreview ../../../symbols/support/symbolUtils ./colorRampUtils ./heatmapRampUtils ./relationshipRampUtils ./sizeRampUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I,M,N){function P(l){return"esri.renderers.SimpleRenderer"===l.declaredClass}function S(l){return"esri.renderers.ClassBreaksRenderer"===l.declaredClass}function O(l){return"esri.renderers.UniqueValueRenderer"===l.declaredClass}function W(l){return"esri.renderers.HeatmapRenderer"===l.declaredClass}function Z(l){return"esri.renderers.PointCloudClassBreaksRenderer"===l.declaredClass}function T(l){return"esri.renderers.PointCloudStretchRenderer"===
l.declaredClass}function Y(l){return"esri.renderers.PointCloudUniqueValueRenderer"===l.declaredClass}var aa=t.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),V=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,l=new g.SimpleMarkerSymbol({size:6,outline:{color:[128,128,128,.5],width:.5}}),R=new g.SimpleMarkerSymbol({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",outline:{width:1,color:[85,85,85,1]}});return function(f){function d(c){c=f.call(this,c)||this;c._handles=new b;c._hasColorRamp=!1;c._hasOpacityRamp=
!1;c._hasSizeRamp=!1;c._legendResponse={};c._webStyleSymbolCache=new Map;c.children=new u;c.layer=null;c.legendElements=[];c.parent=null;c.scale=null;c.title=null;return c}a(d,f);d.prototype.initialize=function(){var c=this,e=function(){return c.notifyChange("ready")};this._handles.add([E.on(this,"children","change",function(k){var d=k.removed,v=c._handles;k.added.map(function(c){var k="activeLayerInfo-ready-watcher-"+c.layer.uid;v.add(E.init(c,"ready",e),k)});d.forEach(function(c){return v.remove(c.layer.uid)});
e()})])};d.prototype.destroy=function(){this._handles.destroy();this._webStyleSymbolCache=this._legendResponse=this._handles=null};Object.defineProperty(d.prototype,"ready",{get:function(){return null===this.layer?!0:0<this.children.length?this._isGroupActive():0<this.legendElements.length},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"isScaleDriven",{get:function(){var c=this,e=this.layer;if(null===e)return!1;if(e.renderer){var k=e.get("renderer.valueExpression");return V.test(k)?
!0:(e=e.get("renderer.visualVariables"))&&e.some(function(e){return c._isScaleDrivenSizeVariable(e)})}return!0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"version",{get:function(){return this._get("version")+1},enumerable:!0,configurable:!0});d.prototype.buildLegendElementsForFeatureCollections=function(c){var e=this;this.legendElements=[];c.forEach(function(c){if("esri.layers.FeatureLayer"===c.declaredClass)e._buildRendererLegendElements(c.renderer,c.title,"append");else if(c.featureSet&&
c.featureSet.features.length){var k=c.layerDefinition;(k=(k=k&&k.drawingInfo)&&F.fromJSON(k.renderer))?e._buildRendererLegendElements(k,c.name,"append"):aa.warn("drawingInfo not available!")}})};d.prototype.buildLegendElementsForRenderer=function(){this._buildRendererLegendElements(this.layer.renderer,null,"replace")};d.prototype.buildLegendElementsForTools=function(){var c=this,e=this.layer;"esri.layers.WMTSLayer"===e.declaredClass?this._constructLegendElementsForWMTSlayer():"esri.layers.WMSLayer"===
e.declaredClass?this._constructLegendElementsForWMSSublayers():"esri.layers.MapImageLayer"===e.declaredClass?this._constructLegendElementsForSublayers():(this._handles.remove("imageryLayers-watcher"),this._getLegendLayers().then(function(k){c.legendElements=[];k.forEach(function(k){if("esri.layers.ImageryLayer"===c.layer.declaredClass){var d=e.watch("renderingRule, bandIds",function(){c._legendResponse["default"]=null;c.buildLegendElementsForTools()});c._handles.add(d,"imageryLayers-watcher")}(k=
c._generateSymbolTableElementForLegendLayer(k))&&k.infos.length&&c.legendElements.push(k);c.notifyChange("ready")});c.notifyChange("ready")}).catch(function(c){aa.warn("Request to server for legend has failed!",c)}))};d.prototype._isGroupActive=function(){var c=this.children;return c.length?c.some(function(c){return c.ready}):!1};d.prototype._isScaleDrivenSizeVariable=function(c){if(c&&"size"!==c.type)return!1;var e=c.minSize,k=c.maxSize;return"object"===typeof e&&e?this._isScaleDrivenSizeVariable(e):
"object"===typeof k&&k?this._isScaleDrivenSizeVariable(k):!!c.expression||V.test(c.valueExpression)};d.prototype._buildRendererLegendElements=function(c,e,k){var d=this;this._getRendererLegendElements(c,e).then(function(c){"append"===k?Array.prototype.push.apply(d.legendElements,c):d.legendElements=c;d.notifyChange("ready")}).catch(function(c){aa.warn("error while building legend for layer!",c)})};d.prototype._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");
var c=this.layer,e=c.activeLayer;this._handles.add(E.watch(this.layer,"activeLayer",this._constructLegendElementsForWMTSlayer.bind(this)),"wmts-activeLayer-watcher");if(e.styleId&&e.styles){var k=null;e.styles.some(function(c){if(e.styleId===c.id)return k=c.legendUrl,!0});k&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:k,opacity:c.opacity}]}])}this.notifyChange("ready")};d.prototype._constructLegendElementsForWMSSublayers=function(){this.legendElements=[];this._handles.remove("wms-sublayers-watcher");
var c=this.layer,e=null;if(c.customParameters||c.customLayerParameters)e=q({},c.customParameters,c.customLayerParameters);this._handles.add(E.watch(this.layer,"sublayers",this._constructLegendElementsForWMSSublayers.bind(this)),"wms-sublayers-watcher");this.legendElements=this._generateLegendElementsForWMSSublayers(c.sublayers,e);this.notifyChange("ready")};d.prototype._generateLegendElementsForWMSSublayers=function(c,e){var k=this,d=[];this._handles.add(c.on("change",this._constructLegendElementsForWMSSublayers.bind(this)),
"wms-sublayers-watcher");c.forEach(function(c){var r=c.watch("title, visible, legendEnabled",function(){return k._constructLegendElementsForWMSSublayers()});k._handles.add(r,"wms-sublayers-watcher");c.visible&&c.legendEnabled&&(c=k._generateSymbolTableElementForWMSSublayer(c,e))&&c.infos.length&&d.unshift(c)});return d};d.prototype._generateSymbolTableElementForWMSSublayer=function(c,e){return!c.legendUrl&&c.sublayers?(e=this._generateLegendElementsForWMSSublayers(c.sublayers,e).filter(function(c){return c}),
{type:"symbol-table",title:c.title,infos:e}):this._generateSymbolTableElementForLegendUrl(c,e)};d.prototype._generateSymbolTableElementForLegendUrl=function(c,e){var k=c.legendUrl;if(k){var d={type:"symbol-table",title:c.title||c.name||c.id&&c.id+"",infos:[]};e&&(k+="?"+h.objectToQuery(e));d.infos.push({src:k,opacity:c.layer&&c.layer.opacity});return d}};d.prototype._getLegendLayers=function(c){var e=this,k=(c=c&&c.hasDynamicLayers?c.dynamicLayers:null)||"default",d=this._legendResponse&&this._legendResponse[k];
return d?D.resolve(d):this._legendRequest(c).then(function(c){c=c.layers;return e._legendResponse[k]=c})};d.prototype._legendRequest=function(c){var e=this.layer;c={f:"json",dynamicLayers:c};"esri.layers.ImageryLayer"===e.declaredClass&&(e.renderingRule&&(c.renderingRule=JSON.stringify(e.renderingRule.toJSON())),e.bandIds&&(c.bandIds=e.bandIds.join()));var k=e.url.replace(/(\/)+$/,"");if(10.01<=e.version){var d=k.indexOf("?"),k=-1<d?k.substring(0,d)+"/legend"+k.substring(d):k+"/legend";e.token&&(k+=
"?token\x3d"+e.token)}else e=k.toLowerCase().indexOf("/rest/"),e=k.substring(0,e)+k.substring(e+5,k.length),k="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(e)+"\x26returnbytes\x3dtrue";return x(k,{query:c}).then(function(c){return c.data})};d.prototype._constructLegendElementsForSublayers=function(){var c=this;this.legendElements=[];this._handles.remove("sublayers-watcher");var e=this.layer,k=new A({layer:e});this._getLegendLayers(k).then(function(k){var d={};k.forEach(function(c){d[c.layerId]=
c});c._handles.add(E.watch(e,"sublayers",c._constructLegendElementsForSublayers.bind(c)),"sublayers-watcher");c.legendElements=c._generateLegendElementsForSublayers(e.sublayers,d,e.opacity);c.notifyChange("ready")}).catch(function(c){aa.warn("Request to server for legend has failed!",c)}).then(function(){return k.destroy()});this.notifyChange("ready")};d.prototype._generateLegendElementsForSublayers=function(c,e,k){var d=this,v=[];this._handles.add(c.on("change",this._constructLegendElementsForSublayers.bind(this)),
"sublayers-watcher");c.forEach(function(c){var r=c.watch("renderer, opacity, title, visible",function(){return d._constructLegendElementsForSublayers()});d._handles.add(r,"sublayers-watcher");c.visible&&c.legendEnabled&&(r=c&&null!=c.opacity?c.opacity:null,(c=d._generateSymbolTableElementForSublayer(c,e,null!=r?r*k:k))&&c.infos.length&&v.unshift(c))});return v};d.prototype._generateSymbolTableElementForSublayer=function(c,e,k){var d=e[c.id];return!d&&c.sublayers?(e=this._generateLegendElementsForSublayers(c.sublayers,
e,k).filter(function(c){return c}),{type:"symbol-table",title:c.title,infos:e}):this._generateSymbolTableElementForLegendLayer(d,c,k)};d.prototype._generateSymbolTableElementForLegendLayer=function(c,e,k){var d=this;if(c){var v=e&&e.renderer,l=e&&e.title||c.layerName;v&&(v=e&&e.title||this._getRendererTitle(v,e))&&(l&&(v.title=l),l=v);l={type:"symbol-table",title:l,infos:[]};c.legendType&&(l.legendType=c.legendType);c.legend&&this._isLegendLayerInScale(c,e)&&(e=e?this._sanitizeLegendForSublayer(c.legend.slice(),
e):c.legend,l.infos=e.map(function(e){var r=e.url;if(e.imageData&&0<e.imageData.length)r="data:image/png;base64,"+e.imageData;else if(0!==r.indexOf("http")){var r=d.layer.url+"/"+c.layerId+"/images/"+r,v=d.layer.token;v&&(r+="?token\x3d"+v)}else return null;return{label:e.label,src:r,opacity:k,width:e.width,height:e.height}}).filter(function(c){return!!c}));return l.infos.length?l:null}};d.prototype._isLegendLayerInScale=function(c,e){e=e||this.layer;var k=null,d=null,v=!0;!e.minScale&&0!==e.minScale||
!e.maxScale&&0!==e.maxScale?(0===c.minScale&&e.tileInfo&&(k=e.tileInfo.lods[0].scale),0===c.maxScale&&e.tileInfo&&(d=e.tileInfo.lods[e.tileInfo.lods.length-1].scale)):(k=Math.min(e.minScale,c.minScale)||e.minScale||c.minScale,d=Math.max(e.maxScale,c.maxScale));if(0<k&&k<this.scale||d>this.scale)v=!1;return v};d.prototype._sanitizeLegendForSublayer=function(c,e){if(10.1>this.layer.version||0===c.length)return c;e=e.renderer;var k=null,d=null;c.some(function(c){return c.values})&&c.some(function(c,
e){c.values||(k=e,d=c,d.label||(d.label="others"));return null!=d});e?"unique-value"===e.type?d&&(c.splice(k,1),c.push(d)):"class-breaks"===e.type&&(d&&c.splice(k,1),c.reverse(),d&&c.push(d)):d&&(c.splice(k,1),c.push(d));return c};d.prototype._getRendererLegendElements=function(c,e){return P(c)||S(c)||O(c)||W(c)||Z(c)||T(c)||Y(c)?Z(c)||T(c)||Y(c)||"esri.renderers.PointCloudRGBRenderer"===c.declaredClass?this._constructPointCloudRendererLegendElements(c,e):this._constructRendererLegendElements(c,e):
(aa.warn("Renderer not supported!"),D.resolve([]))};d.prototype._getPointCloudRendererTitle=function(c){return c.legendOptions&&c.legendOptions.title||c.field};d.prototype._constructPointCloudRendererLegendElements=function(c,e){var k=this,d=this.layer.opacity,v=[],a=null,b=null;if(Z(c))a={type:"symbol-table",title:e||this._getPointCloudRendererTitle(c),infos:[]},c.colorClassBreakInfos.forEach(function(c){a.infos.unshift({label:c.label||c.minValue+" - "+c.maxValue,value:[c.minValue,c.maxValue],symbol:k._getAppliedCloneSymbol(l,
c.color,d)})});else if(T(c)){var b=c.stops,L=null;if(b.length&&(1===b.length&&(L=b[0].color),!L)){var f=b[0].value,z=b[b.length-1].value;null!=f&&null!=z&&(L=y.getColorFromPointCloudStops(f+(z-f)/2,b))}a={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(l,L||l.color,d)}]};b={type:"color-ramp",title:e||this._getPointCloudRendererTitle(c),borderColor:H.getStroke(l).color,overlayColor:y.getRampOverlayColor(d),infos:y.getRampStopsForPointCloud(c.stops)}}else Y(c)&&
(a={type:"symbol-table",title:e||this._getPointCloudRendererTitle(c),infos:[]},c.colorUniqueValueInfos.forEach(function(c){a.infos.push({label:c.label||c.values.join(", "),value:c.values.join(", "),symbol:k._getAppliedCloneSymbol(l,c.color,d)})}));a&&a.infos.length&&v.push(a);b&&b.infos.length&&v.push(b);c=v.reduce(function(c,e){return c.concat(e.infos)},[]).filter(function(c){return!!c.symbol}).map(function(c){return k._getSymbolPreview(c)});return D.eachAlways(c).then(function(){return v})};d.prototype._constructRendererLegendElements=
function(c,e){var k=this;return this._loadRenderer(c).then(function(c){k._hasColorRamp=!1;k._hasOpacityRamp=!1;k._hasSizeRamp=!1;var d=k._getVisualVariableLegendElements(c)||[],r={type:"symbol-table",title:e||k._getRendererTitle(c),infos:[]},l=null,a=!1;if(W(c))d.push({type:"heatmap-ramp",title:e,infos:I.getHeatmapRampStops(c)});else if(O(c)){var b=c&&c.authoringInfo;if(b&&"relationship"===b.type){var f=b.focus,z=b.numClasses,g=b.field1,h=b.field2;if(z&&g&&h){for(var b=k.layer,g=[g,h],h=M.getRotationAngleForFocus(f)||
0,m=0;m<g.length;m++){var n=g[m],u=n.normalizationField,n={field:k._getFieldAlias(n.field,b),normField:u&&k._getFieldAlias(u,b)},u=R.clone();u.angle=h;r.infos.push({label:n,symbol:u});h+=90}f=M.getRelationshipRampElement({focus:f,numClasses:z,infos:c.uniqueValueInfos});d.unshift(f)}}else{var y=c.field;c.uniqueValueInfos.forEach(function(c){c.symbol&&r.infos.push({label:c.label||k._getDomainName(y,c.value)||c.value,value:c.value,symbol:c.symbol})})}c.defaultSymbol&&(r.infos.push({label:c.defaultLabel||
"others",symbol:c.defaultSymbol}),a=!0)}else S(c)?(l=k._isUnclassedRenderer(c),l&&k._hasSizeRamp||(c.classBreakInfos.forEach(function(c){c.symbol&&r.infos.unshift({label:c.label||(l?null:c.minValue+" - "+c.maxValue),value:[c.minValue,c.maxValue],symbol:c.symbol})}),l&&(r.title=null),k._updateInfosforClassedSizeRenderer(c,r.infos)),c.defaultSymbol&&!l&&(r.infos.push({label:c.defaultLabel||"others",symbol:c.defaultSymbol}),a=!0)):P(c)&&c.symbol&&!k._hasSizeRamp&&r.infos.push({label:c.label,symbol:c.symbol});
f=c.defaultSymbol;!f||a||P(c)||l&&!k._hasColorRamp&&!k._hasSizeRamp&&!k._hasOpacityRamp||d.push({type:"symbol-table",infos:[{label:c.defaultLabel||"others",symbol:f}]});r.infos.length&&d.unshift(r);var p=k._getSymbolConfig(c.visualVariables),a=d.reduce(function(c,e){return c.concat(e.infos)},[]).filter(function(c){return!(!c||!c.symbol)}).map(function(c){return k._getSymbolPreview(c,p)});c=null;return D.eachAlways(a).then(function(){return d})})};d.prototype._updateInfosforClassedSizeRenderer=function(c,
e){var k=c.authoringInfo&&"class-breaks-size"===c.authoringInfo.type,d=c.classBreakInfos.some(function(c){return K.isVolumetricSymbol(c.symbol)});if(k&&d){var v=N.REAL_WORLD_MAX_SIZE;c=c.classBreakInfos.length;var l=(v-N.REAL_WORLD_MIN_SIZE)/(1<c?c-1:c);e.forEach(function(c,e){c.size=v-l*e})}};d.prototype._getSymbolConfig=function(c){var e=!1,k=!1;if(c)for(var d=0;d<c.length&&(!e||!k);d++){var v=c[d];"size"===v.type&&("height"===v.axis&&(e=!0),"width-and-depth"===v.axis&&(k=!0))}return e&&k?"tall":
null};d.prototype._getSymbolPreview=function(c,e){return Q.renderPreviewHTML(c.symbol,{size:c.size,opacity:this.layer.opacity,symbolConfig:e,rotation:c.symbol.angle}).then(function(e){c.preview=e;return c}).catch(function(){c.preview=null;return c})};d.prototype._loadRenderer=function(c){var e=this,k=[];c=c.clone();var d=this._getMedianColor(c),v=this.layer.opacity;if(S(c)||O(c)){var l=(c.classBreakInfos||c.uniqueValueInfos).map(function(c){return e._fetchSymbol(c.symbol,d,v).then(function(e){c.symbol=
e}).catch(function(){c.symbol=null})});Array.prototype.push.apply(k,l)}k.push(this._fetchSymbol(c.symbol||c.defaultSymbol,c.defaultSymbol?null:d,v).then(function(k){e._applySymbolToRenderer(c,k,P(c))}).catch(function(){e._applySymbolToRenderer(c,null,P(c))}));return D.eachAlways(k).then(function(){return c})};d.prototype._applySymbolToRenderer=function(c,e,k){k?c.symbol=e:c.defaultSymbol=e};d.prototype._getMedianColor=function(c){if(!c.visualVariables)return null;var e=n.find(c.visualVariables,function(c){return"color"===
c.type});if(!e)return null;var k=null,d=null;if(e.colors)k=e.minDataValue,d=e.maxDataValue;else if(e.stops){if(1===e.stops.length)return e.stops[0].color;k=e.stops[0].value;d=e.stops[e.stops.length-1].value}if(null!=k&&null!=d)return c.getColor(k+(d-k)/2,{colorInfo:e})};d.prototype._fetchSymbol=function(c,e,k){var d=this;if(!c)return D.reject();if("web-style"===c.type){var v=c.portal,v=c.name+"-"+c.styleName+"-"+c.styleUrl+"-"+(v&&v.url)+"-"+(v&&v.user&&v.user.username),l=this._webStyleSymbolCache;
l.has(v)||l.set(v,c.fetchSymbol());return l.get(v).then(function(c){return d._getAppliedCloneSymbol(c,e,k)}).catch(function(){aa.warn("Fetching web-style failed!");return D.reject()})}return D.resolve(this._getAppliedCloneSymbol(c,e,k))};d.prototype._getAppliedCloneSymbol=function(c,e,k){if(!c)return c;c=c.clone();var d=-1<c.type.indexOf("3d");e=e&&e.toRgba();d?this._applyColorTo3dSymbol(c,e,k):(c.color&&(c.color=this._getOpacityAppliedColor(e||c.color.toRgba(),k)),(e=c.outline)&&e.color&&(e.color=
this._getOpacityAppliedColor(e.color.toRgba(),k)));return c};d.prototype._applyColorTo3dSymbol=function(c,e,k){var d=this;c.symbolLayers.forEach(function(c){c&&(e&&(c.material||(c.material={}),c.material.color=new p(e)),null!=k&&(c.material&&c.material.color&&(c.material.color=d._getOpacityAppliedColor(c.material.color.toRgba(),k)),c.outline&&c.outline.color&&(c.outline.color=d._getOpacityAppliedColor(c.outline.color.toRgba(),k))))})};d.prototype._getOpacityAppliedColor=function(c,e){c[3]*=e;return c};
d.prototype._getVisualVariableLegendElements=function(c){var e=this,k=c.visualVariables,d=[],v=[],l=[],a=this.layer.opacity;if(!k)return null;k.forEach(function(c){"color"===c.type?d.push(c):"size"===c.type?v.push(c):"opacity"===c.type&&l.push(c)});var k=d.concat(v,l),b,f;0===d.length&&S(c)&&c.classBreakInfos&&1===c.classBreakInfos.length&&(b=(b=c.classBreakInfos[0])&&b.symbol);0===d.length&&P(c)&&(b=c.symbol);b&&(-1<b.type.indexOf("3d")?(b=b.symbolLayers.getItemAt(0),b.get("material.color")&&(f=
b.material.color)):b.url||(f=b.color),f&&(f=f.toRgba()));return k.map(function(k){if(!k.legendOptions||!1!==k.legendOptions.showLegend){var d=e._getRampTitle(k,e.layer),r=y.getRampBorderColor(c),v=y.getRampOverlayColor(a),l=null;"color"===k.type?(l={type:"color-ramp",title:d,borderColor:r,overlayColor:v,infos:y.getRampStops(c,k)},e._hasColorRamp||(e._hasColorRamp=!(null==l.infos||!l.infos.length))):"size"===k.type?(l={type:"size-ramp",title:d,infos:N.getRampStops(c,k,e._getMedianColor(c),e.scale)},
e._hasSizeRamp||(e._hasSizeRamp=!(null==l.infos||!l.infos.length))):"opacity"===k.type&&(l={type:"opacity-ramp",title:d,borderColor:r,overlayColor:v,infos:y.getRampStops(c,k,f)},e._hasOpacityRamp||(e._hasOpacityRamp=!(null==l.infos||!l.infos.length)));return l.infos&&l}}).filter(function(c){return!!c})};d.prototype._getDomainName=function(c,e){if(c&&"function"!==typeof c){var k=this.layer;return(k=(c=k.getField&&k.getField(c))&&k.getFieldDomain?k.getFieldDomain(c.name):null)&&k.codedValues?k.getName(e):
null}return null};d.prototype._getRampTitle=function(c,e){var k=c.field,d=c.normalizationField,v=!1,l=!1,a=!1,b=null,k="function"===typeof k?null:k,d="function"===typeof d?null:d;if(void 0!==(c.legendOptions&&c.legendOptions.title))b=c.legendOptions.title;else if(c.valueExpressionTitle)b=c.valueExpressionTitle;else{if(e.renderer.authoringInfo&&e.renderer.authoringInfo.visualVariables)for(c=e.renderer.authoringInfo.visualVariables,b=0;b<c.length;b++){var f=c[b];if("color"===f.type)if("ratio"===f.style){v=
!0;break}else if("percent"===f.style){l=!0;break}else if("percentTotal"===f.style){a=!0;break}}b={field:k&&this._getFieldAlias(k,e),normField:d&&this._getFieldAlias(d,e),ratio:v,ratioPercent:l,ratioPercentTotal:a}}return b};d.prototype._getRendererTitle=function(c,e){if(c.legendOptions&&c.legendOptions.title)return c.legendOptions.title;if(c.valueExpressionTitle)return c.valueExpressionTitle;var k=this.layer,d=c.field,v=null,l=null;S(c)&&(v=c.normalizationField,l="percent-of-total"===c.normalizationType);
d="function"===typeof d?null:d;v="function"===typeof v?null:v;c=null;if(d||v)c={field:e?d:d&&this._getFieldAlias(d,k),normField:e?v:v&&this._getFieldAlias(v,k),normByPct:l};return c};d.prototype._getFieldAlias=function(c,e){var k=e.popupTemplate,k=k&&k.fieldInfos;e="function"===typeof c?null:e.getField&&e.getField(c);var d=null;k&&k.some(function(e){if(c===e.fieldName)return d=e,!0});var k=d||e,v=null;k&&(v=d&&d.label||e&&e.alias||k.name||k.fieldName);return v};d.prototype._isUnclassedRenderer=function(c){var e=
c.visualVariables,k=!1;S(c)&&c.classBreakInfos&&1===c.classBreakInfos.length&&e&&(k=c.field?e.some(function(e){return!(!e||c.field!==e.field||(c.normalizationField||e.normalizationField)&&c.normalizationField!==e.normalizationField)}):!!e.length);return k};m([C.property()],d.prototype,"children",void 0);m([C.property()],d.prototype,"layer",void 0);m([C.property()],d.prototype,"legendElements",void 0);m([C.property()],d.prototype,"parent",void 0);m([C.property({readOnly:!0})],d.prototype,"ready",null);
m([C.property()],d.prototype,"scale",void 0);m([C.property({dependsOn:["layer.renderer.valueExpression","layer.renderer.visualVariables"],readOnly:!0})],d.prototype,"isScaleDriven",null);m([C.property()],d.prototype,"title",void 0);m([C.property({dependsOn:["ready"],readOnly:!0,value:0})],d.prototype,"version",null);return d=m([C.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],d)}(C.declared(f))})},"esri/symbols/support/symbolPreview":function(){define(["require","exports","./previewSymbol2D",
"./previewSymbol3D","./previewWebStyleSymbol"],function(B,w,q,a,m){function h(p,x){switch(p.type){case "web-style":return m.previewWebStyleSymbol(p,h,x);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return a.previewSymbol3D(p,x);default:return q.previewSymbol2D(p,x)}}Object.defineProperty(w,"__esModule",{value:!0});w.renderPreviewHTML=h})},"esri/symbols/support/previewSymbol2D":function(){define("require exports dojox/gfx/_base ../../core/Error ../../core/promiseUtils ../../core/screenUtils ../SimpleMarkerSymbol ./gfxUtils ./previewUtils ./renderUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f){function n(a,f){var b=u.getContext("2d"),g=[];f&&(f.weight&&g.push(f.weight),f.size&&g.push(f.size+"px"),f.family&&g.push(f.family));b.font=g.join(" ");return b.measureText(a).width}Object.defineProperty(w,"__esModule",{value:!0});var u=document.createElement("canvas");w.previewSymbol2D=function(b,u){var t=u&&u.size?h.pt2px(u.size):null,E=u&&u.maxSize?h.pt2px(u.maxSize):null,C=u&&null!=u.opacity?u.opacity:null,A=u&&null!=u.rotation?u.rotation:null,F=x.getStroke(b),w=
{shape:null,fill:null,stroke:F};F&&F.width&&(F.width=Math.min(F.width,80));var B=0,K=0,y=F&&F.width||0,I=!1,M=null;switch(b.type){case "simple-marker":F=p.defaultProps;C=b.style;K=B=t=Math.min(t||h.pt2px(b.size||F.size),E||120);switch(C){case p.STYLE_CIRCLE:w.shape={type:"circle",cx:0,cy:0,r:.5*t};break;case p.STYLE_CROSS:w.shape={type:"path",path:[{command:"M",values:[0,.5*K]},{command:"L",values:[B,.5*K]},{command:"M",values:[.5*B,0]},{command:"L",values:[.5*B,K]},{command:"E",values:[]}]};break;
case p.STYLE_DIAMOND:w.shape={type:"path",path:[{command:"M",values:[0,.5*K]},{command:"L",values:[.5*B,0]},{command:"L",values:[B,.5*K]},{command:"L",values:[.5*B,K]},{command:"Z",values:[]}]};break;case p.STYLE_SQUARE:w.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[B,K]},{command:"L",values:[0,K]},{command:"Z",values:[]}]};break;case p.STYLE_X:w.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,K]},{command:"M",values:[B,
0]},{command:"L",values:[0,K]},{command:"E",values:[]}]};break;case p.STYLE_PATH:I=!0,w.shape={type:"path",path:b.path||""}}break;case "simple-line":y=Math.min(t||y,E||80);B=22<y?2*y:40;K=y;F.width=y;y=0;w.shape={type:"path",path:[{command:"M",values:[0,.5*K]},{command:"L",values:[B,.5*K]},{command:"E",values:[]}]};break;case "picture-fill":case "simple-fill":K=B=t=Math.min(t,E||120);I=!0;w.shape=g.shapes.fill[0];break;case "picture-marker":var N=E||120,E=h.pt2px(b.width),F=h.pt2px(b.height),t=Math.min(t||
Math.max(E,F),N),F=E/F,E=1>=F?Math.ceil(t*F):t,F=1>=F?t:Math.ceil(t/F),B=E,K=F,M=C;w.shape={type:"image",x:-Math.round(E/2),y:-Math.round(F/2),width:E,height:F,src:b.url||""};break;case "text":C=b.text||"Aa",F=b.font,t=Math.min(t||h.pt2px(F.size),E||120),N=n(C,{weight:F.weight,size:t,family:F.family}),B=(E=/[\uE600-\uE6FF]/.test(C))?t:N,K=t,N=.25*q.normalizedLength((F?t:0).toString()),E&&(N+=5),w.shape={type:"text",text:C,x:0,y:N,align:"middle",decoration:b.decoration||F&&F.decoration,rotated:b.rotated,
kerning:b.kerning},w.font=F&&{size:t,style:F.style,decoration:F.decoration,weight:F.weight,family:F.family}}if(!w.shape)return m.reject(new a("symbolPreview: renderPreviewHTML2D","symbol not supported."));var B=(B||22)+2*y,K=(K||22)+2*y,P=x.getFill(b),y=b.color,t=null;P&&"pattern"===P.type&&y&&"picture-fill"!==b.type?t=x.getPatternUrlWithColor(P.src,y.toCss(!0)).then(function(a){P.src=a;w.fill=P;return w}):(w.fill=P,t=m.resolve(w));return t.then(function(a){return f.renderSymbol([[a]],[B,K],{node:u&&
u.node,scale:I,opacity:M,rotation:A})})}})},"esri/symbols/support/previewUtils":function(){define(["require","exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});w.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},
{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},
{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},
{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};w.getExtrudeSymbolShapes=function(q){q*=.5;return[{type:"path",path:[{command:"M",
values:[0,.7*11]},{command:"L",values:[6.6,22*.7]},{command:"L",values:[6.6,22*.7+q]},{command:"L",values:[0,22*.7+q-.7*11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,22*.7]},{command:"L",values:[6.6,22*.7+q]},{command:"L",values:[22,q]},{command:"L",values:[22,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[22,0]},{command:"L",values:[6.6,22*.7]},{command:"L",values:[0,.7*11]},{command:"Z",values:[]}]}]};w.getCubeShapes=
function(q,a){var m=a?20:q,h=a?4:6,h=m=22>=m?m-.5*h:m-h;a=a?.35*m:.5*m;return[{type:"path",path:[{command:"M",values:[.5*h,0]},{command:"L",values:[h,.5*a]},{command:"L",values:[.5*h,a]},{command:"L",values:[0,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*h,a]},{command:"L",values:[.5*h,q]},{command:"L",values:[0,q-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*h,a]},{command:"L",values:[.5*h,q]},{command:"L",
values:[h,q-.5*a]},{command:"L",values:[h,.5*a]},{command:"Z",values:[]}]}]};w.getCylinderShapes=function(q,a){var m=a?20:q;a=a?4:6;m=22>=m?m-.5*a:m-a;a=.5*m;var h=.15*m;q-=h;return[{type:"ellipse",cx:.5*m,cy:q,rx:a,ry:h},{type:"path",path:[{command:"M",values:[0,h]},{command:"L",values:[0,q]},{command:"L",values:[m,q]},{command:"L",values:[m,h]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*m,cy:h,rx:a,ry:h}]};w.getConeShapes=function(q,a){var m=a?20:q;a=a?4:6;m=22>=m?m-.5*a:m-a;a=.15*m;var h=
m;q-=a;return[{type:"ellipse",cx:.5*m,cy:q,rx:.5*m,ry:a},{type:"path",path:[{command:"M",values:[.5*h,0]},{command:"L",values:[h,q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]}]};w.getInvertedConeShapes=function(q){var a=q,a=22>a?a-3:a-6,m=.15*a,h=a;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[h,0]},{command:"L",values:[.5*h,q-m]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*a,cy:0,rx:.5*a,ry:m}]};w.getDiamondShapes=function(q){var a=q,a=22>a?a-2:a-4,m=Math.floor(q/
10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*a,0]},{command:"L",values:[a,.5*q-m]},{command:"L",values:[.45*a-m,.5*q+m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,0]},{command:"L",values:[.45*a-m,.5*q+m]},{command:"L",values:[0,.5*q-m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*q-m]},{command:"L",values:[.45*a-m,.5*q+m]},{command:"L",values:[.45*a,q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,q]},
{command:"L",values:[a,.5*q-m]},{command:"L",values:[.45*a-m,.5*q+m]},{command:"Z",values:[]}]}]};w.getTetrahedronShapes=function(q){var a=q,a=22>a?a-1:a-2;return[{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",values:[q,a]},{command:"L",values:[.45*q,.6*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",values:[.45*q,.6*a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.45*
q,.6*a]},{command:"L",values:[q,a]},{command:"Z",values:[]}]}]}})},"esri/symbols/support/renderUtils":function(){define("require exports dojox/gfx dojox/gfx/matrix ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../core/promiseUtils".split(" "),function(B,w,q,a,m,h,p,x,g,f){function n(a){return a.map(function(a){return a.command+" "+a.values.join(",")}).join(" ").trim()}function u(b,f,g,h){var m=h&&h.node||document.createElement("div"),u=q.createSurface(m,f,g);
null!=h.opacity&&(m.style.opacity=h.opacity.toString());try{b.forEach(function(b){var m=u.createGroup(),p=0;b.forEach(function(a){var b=a.shape,f=a.fill,g=a.stroke;p+=g&&g.width||0;var h=null;b&&("path"===b.type&&"string"!==typeof b.path&&(b.path=n(b.path)),h=m.createShape(b).setFill(f).setStroke(g?g:{width:0}),"text"===b.type&&h.setFont(a.font))});b=f/2;var y=g/2,t=m.getBoundingBox(),A=t.width,q=t.height,C=!1;if(h.scale&&0!==t.width&&0!==t.height){var F=t.width/t.height,C=(f>g?f:g)-2*p,x=1,D=1;isNaN(C)||
(1<F?(x=C/t.width,D=C/F/t.height):(D=C/t.height,x=C*F/t.width));m.applyTransform(a.scaleAt(x,D,b,y));C=!0}F=t.x+A/2;t=t.y+q/2;m.applyTransform(a.translate(b-F,y-t));!C&&(A>f||q>g)&&(C=A/f>q/g,A=((C?f:g)-5)/(C?A:q),m.applyTransform(a.scaleAt(A,A,b,y)));h.rotation&&m.applyTransform(a.rotategAt(h.rotation,F,t))})}catch(H){return u.clear(),u.destroy(),null}return m}function b(a,b,g){return a?h(a,{responseType:"image"}).then(function(a){a=a.data;var f=a.width,h=a.height,m=f/h,n=b;g&&(n=Math.min(n,Math.max(f,
h)));return{image:a,width:1>=m?Math.ceil(n*m):n,height:1>=m?n:Math.ceil(n/m)}}):f.reject(new x("renderUtils: imageDataSize","href not provided."))}Object.defineProperty(w,"__esModule",{value:!0});w.renderSymbol=function(a,b,f){var g=Math.ceil(b[0]);b=Math.ceil(b[1]);return a.some(function(a){return!!a.length})?u(a,g,b,f):null};w.tintImageWithColor=function(a,f,h,n,u){return b(a,f,u).then(function(b){var u=b.width?b.width:f,t=b.height?b.height:f,A;if(A=b.image)A=h&&"ignore"!==n?"multiply"===n&&255===
h.r&&255===h.g&&255===h.b&&1===h.a?!1:!0:!1;if(A){var y=b.image.width,q=b.image.height;(g("edge")||g("ie"))&&/\.svg$/i.test(a)&&(--y,--q);var C,F;C=Math.ceil(u);F=Math.ceil(t);A=document.createElement("canvas");A.width=C;A.height=F;A.style.width=C+"px";A.style.height=F+"px";A=A.getContext("2d");A.clearRect(0,0,C,F);A.drawImage(b.image,0,0,y,q,0,0,u,t);b=A.getImageData(0,0,u,t);y=[h.r/255,h.g/255,h.b/255,h.a];q=p.toHSV(h);for(C=0;C<b.data.length;C+=4){F=b.data;var x=C,D=y,E=q;switch(n){case "multiply":F[x+
0]*=D[0];F[x+1]*=D[1];F[x+2]*=D[2];F[x+3]*=D[3];break;default:var w=p.toHSV({r:F[x+0],g:F[x+1],b:F[x+2]});w.h=E.h;w.s=E.s;w.v=w.v/100*E.v;E=p.toRGB(w);F[x+0]=E.r;F[x+1]=E.g;F[x+2]=E.b;F[x+3]*=D[3]}}A.putImageData(b,0,0);a=A.canvas.toDataURL("image/png")}else(A=m.id&&m.id.findCredential(a))&&A.token&&(b=-1===a.indexOf("?")?"?":"\x26",a=""+a+b+"token\x3d"+A.token);return{url:a,width:u,height:t}}).catch(function(){return{url:a,width:f,height:f}})}})},"esri/core/colorUtils":function(){define([],function(){var B=
{COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(q,a){var m=[],h,p;if(q[0].length!==a.length)throw"dimensions do not match";var x=q.length,g=q[0].length,f=0;for(h=0;h<x;h++){for(p=f=0;p<g;p++)f+=q[h][p]*a[p];m.push(f)}return m},rgb2xyz:function(q){q=[q.r/255,q.g/255,q.b/255].map(function(a){return.04045>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)});q=this.matrixProduct(this.COEF_RGB2XYZ,
q);return{x:100*q[0],y:100*q[1],z:100*q[2]}},xyz2rgb:function(q){q=this.matrixProduct(this.COEF_XYZ2RGB,[q.x/100,q.y/100,q.z/100]).map(function(a){return Math.min(1,Math.max(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055,0))});return{r:Math.round(255*q[0]),g:Math.round(255*q[1]),b:Math.round(255*q[2])}},xyz2lab:function(q){q=[q.x/95.047,q.y/100,q.z/108.883].map(function(a){return a>Math.pow(6/29,3)?Math.pow(a,1/3):1/3*Math.pow(29/6,2)*a+4/29});return{l:116*q[1]-16,a:500*(q[0]-q[1]),b:200*(q[1]-
q[2])}},lab2xyz:function(q){var a=q.l;q=[(a+16)/116+q.a/500,(a+16)/116,(a+16)/116-q.b/200].map(function(a){return a>6/29?Math.pow(a,3):3*Math.pow(6/29,2)*(a-4/29)});return{x:95.047*q[0],y:100*q[1],z:108.883*q[2]}},lab2lch:function(q){var a=q.l,m=q.a,h=q.b;q=Math.sqrt(m*m+h*h);m=Math.atan2(h,m);m=0<m?m:m+2*Math.PI;return{l:a,c:q,h:m}},lch2lab:function(q){var a=q.c,m=q.h;return{l:q.l,a:a*Math.cos(m),b:a*Math.sin(m)}},rgb2lab:function(q){return this.xyz2lab(this.rgb2xyz(q))},lab2rgb:function(q){return this.xyz2rgb(this.lab2xyz(q))},
rgb2lch:function(q){return this.lab2lch(this.xyz2lab(this.rgb2xyz(q)))},lch2rgb:function(q){return this.xyz2rgb(this.lab2xyz(this.lch2lab(q)))}},w={rgb2hsv:function(q){var a=q.r,m=q.g;q=q.b;var h=Math.max(a,m,q),p=h-Math.min(a,m,q),x;0===p?x=0:h===a?x=(m-q)/p%6:h===m?x=(q-a)/p+2:h===q&&(x=(a-m)/p+4);0>x&&(x+=6);return{h:60*x,s:100*(0===p?0:p/h),v:100/255*h}},hsv2rgb:function(q){var a=q.h/60,m=q.v/100*255;q=q.s/100*m;var h=q*(1-Math.abs(a%2-1)),p;switch(Math.floor(a)){case 0:p={r:q,g:h,b:0};break;
case 1:p={r:h,g:q,b:0};break;case 2:p={r:0,g:q,b:h};break;case 3:p={r:0,g:h,b:q};break;case 4:p={r:h,g:0,b:q};break;case 5:case 6:p={r:q,g:0,b:h}}p.r=Math.round(p.r+m-q);p.g=Math.round(p.g+m-q);p.b=Math.round(p.b+m-q);return p}};return{toRGB:function(q){var a;void 0!==q.r&&void 0!==q.g&&void 0!==q.b?a=q:void 0!==q.l&&void 0!==q.c&&void 0!==q.h?a=B.lch2rgb(q):void 0!==q.l&&void 0!==q.a&&void 0!==q.b?a=B.lab2rgb(q):void 0!==q.x&&void 0!==q.y&&void 0!==q.z?a=B.xyz2rgb(q):void 0!==q.h&&void 0!==q.s&&
void 0!==q.v&&(a=w.hsv2rgb(q));return a},toHSV:function(q){if(void 0!==q.h&&void 0!==q.s&&void 0!==q.v)return q;q=this.toRGB(q);return w.rgb2hsv(q)},toLAB:function(q){return void 0!==q.l&&void 0!==q.a&&void 0!==q.b?q:B.rgb2lab(this.toRGB(q))},toLCH:function(q){return void 0!==q.l&&void 0!==q.c&&void 0!==q.h?q:B.rgb2lch(this.toRGB(q))},toXYZ:function(q){return void 0!==q.x&&void 0!==q.y&&void 0!==q.z?q:B.rgb2xyz(this.toRGB(q))}}})},"esri/symbols/support/previewSymbol3D":function(){define("require exports ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./previewUtils ./renderUtils ./styleUtils ./symbolUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n){function u(a){var b=a.outline,f=a.get("material.color"),f=f&&f.toRgba().toString();if(!b)return"fill"===a.type&&"255,255,255,1"===f?{color:"#bdc3c7",width:.75}:null;a=h.pt2px(b.size)||0;return{color:"rgba("+(null!=b.color?b.color.toRgba():"255,255,255,1")+")",width:Math.min(a,80)}}function b(a,b){var g=b&&b.resource,g=g&&g.href;return a.thumbnail&&a.thumbnail.url?m.resolve(a.thumbnail.url):g&&"object"!==b.type?m.resolve(n.getIconHref(a,b)):a.styleOrigin&&(a.styleOrigin.styleName||
a.styleOrigin.styleUrl)?f.resolveWebStyleSymbol(a.styleOrigin,{portal:a.styleOrigin.portal}).always(function(a){return a&&a.thumbnail&&a.thumbnail.url||K}):m.resolve(K)}function t(a,b){void 0===b&&(b=0);if(!a.material||!a.material.color)return a=Math.min(Math.max(p.defaultThematicColor.r+191.25*b,0),255),[a,a,a,100];for(var f=a.material.color.toRgb(),g=0;3>g;g++)f[g]=Math.min(Math.max(f[g]+191.25*b,0),255);f.push(a.material.color.a);return f}function D(a){return a.outline?u(a):{color:"rgba(0, 0, 0, 1)",
width:1.5}}function E(a,b){if(!a.material)return{};for(var f=a.material.color.toRgb(),g="rgba(",m=0;3>m;m++)g+=Math.min(Math.max(f[m]+191.25*b,0),255)+",";g+=a.material.color.a+");";a=a.size?h.pt2px(a.size):.75;return{color:g,width:Math.min(a,80)}}function C(a,b,f){f*=.75;return{type:"linear",x1:f?.25*f:0,y1:f?.5*f:0,x2:f||4,y2:f?.5*f:4,colors:[{color:a,offset:0},{color:b,offset:1}]}}function A(a){var b=a.depth,f=a.height;return(a=a.width)&&b&&f&&a===b&&a<f}function F(a,b,f,g){var h=a&&a.type,m="object"===
h,n=[];if("icon"===h)switch(b){case "circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*f},fill:t(a,0),stroke:u(a)});break;case "square":n.push({shape:{type:"path",path:[{command:"M",values:[0,f]},{command:"L",values:[0,0]},{command:"L",values:[f,0]},{command:"L",values:[f,f]},{command:"Z",values:[]}]},fill:t(a,0),stroke:u(a)});break;case "cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*f,0]},{command:"L",values:[.5*f,f]},{command:"M",values:[0,.5*f]},{command:"L",values:[f,.5*f]},
{command:"E",values:[]}]},stroke:D(a)});break;case "x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[f,f]},{command:"M",values:[f,0]},{command:"L",values:[0,f]},{command:"E",values:[]}]},stroke:D(a)});break;case "kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*f]},{command:"L",values:[.5*f,0]},{command:"L",values:[f,.5*f]},{command:"L",values:[.5*f,f]},{command:"Z",values:[]}]},fill:t(a,0),stroke:u(a)})}else if(m)switch(b){case "cone":b=t(a,0);a=
t(a,-.6);a=C(b,a,g?20:f);f=x.getConeShapes(f,g);n.push({shape:f[0],fill:a});n.push({shape:f[1],fill:a});break;case "inverted-cone":g=t(a,0);a=t(a,-.6);a=C(g,a,f);f=x.getInvertedConeShapes(f);n.push({shape:f[0],fill:a});n.push({shape:f[1],fill:g});break;case "cube":f=x.getCubeShapes(f,g);n.push({shape:f[0],fill:t(a,0)});n.push({shape:f[1],fill:t(a,-.3)});n.push({shape:f[2],fill:t(a,-.5)});break;case "cylinder":b=t(a,0);h=t(a,-.6);b=C(b,h,g?20:f);f=x.getCylinderShapes(f,g);n.push({shape:f[0],fill:b});
n.push({shape:f[1],fill:b});n.push({shape:f[2],fill:t(a,0)});break;case "diamond":f=x.getDiamondShapes(f);n.push({shape:f[0],fill:t(a,-.3)});n.push({shape:f[1],fill:t(a,0)});n.push({shape:f[2],fill:t(a,-.3)});n.push({shape:f[3],fill:t(a,-.7)});break;case "sphere":g=t(a,0);a=t(a,-.6);a=C(g,a);a.x1=0;a.y1=0;a.x2=.25*f;a.y2=.25*f;n.push({shape:{type:"circle",cx:0,cy:0,r:.5*f},fill:a});break;case "tetrahedron":f=x.getTetrahedronShapes(f),n.push({shape:f[0],fill:t(a,-.3)}),n.push({shape:f[1],fill:t(a,
0)}),n.push({shape:f[2],fill:t(a,-.6)})}return n}function H(a,f){var n=f&&f.size?h.pt2px(f.size):null,p=f&&f.maxSize?h.pt2px(f.maxSize):null,t=f&&f.disableUpsampling,q=a.symbolLayers,C=[],x=0,D=0,E=q.getItemAt(q.length-1),w;E&&"icon"===E.type&&(w=E.size&&h.pt2px(E.size));q.forEach(function(y,l){if("icon"===y.type||"object"===y.type){l="icon"===y.type?y.size&&h.pt2px(y.size):0;var q=n||l?Math.ceil(Math.min(n||l,p||120)):22,z=u(y),d=z?z.width:0;if(y&&y.resource&&y.resource.href)l=b(a,y).then(function(c){var e=
y.get("material.color"),d;d="icon"===y.type?"multiply":"tint";return g.tintImageWithColor(c,q,e,d,t)}).then(function(c){var e=c.width,r=c.height;x=Math.max(x,e+2*d);D=Math.max(D,r+2*d);return[{shape:{type:"image",width:e,height:r,src:c.url},fill:null,stroke:null}]}),C.unshift(l);else{(z=y.get("resource.primitive"))||(z="icon"===y.type?"circle":"sphere");var c=q;"icon"===y.type&&w&&n&&(c=l/w*q);l=f&&"tall"===f.symbolConfig||("object"===y.type?A(y):!1);x=Math.max(x,l?20:c+2*d);D=Math.max(D,c+2*d);C.unshift(m.resolve(F(y,
z,c,l)))}}});return m.eachAlways(C).then(function(a){var l=[];a.forEach(function(a){a.value?l.push(a.value):a.error&&y.warn("error while building swatchInfo!",a.error)});return g.renderSymbol(l,[x,D],{node:f&&f.node,scale:!1})})}function Q(a,b){var f=a.symbolLayers,u=[];a=n.isVolumetricSymbol(a);var y=b&&b.size?h.pt2px(b.size):null,p=(b&&b.maxSize?h.pt2px(b.maxSize):null)||80,A=0,q=0,C;f.forEach(function(a,b){var f=a&&a.type,l="line"===f;if(l||"path"===f){var g=E(a,0),z=g&&g.width||0,f=[];l?(0===
b&&(C=z),a=Math.min(y||z,p),a=0===b?a:y?z/C*a:a,q=Math.max(q,a),A=Math.max(A,22<a?2*a:40),g.width=a,f.push({shape:{type:"path",path:[{command:"M",values:[0,.5*q]},{command:"L",values:[A,.5*q]},{command:"E",values:[]}]},stroke:g})):(b=Math.min(y||22,p),g=t(a,0),l=t(a,-.2),a=E(a,-.4),a.width=1,f.push({shape:x.shapes.pathSymbol3DLayer[0],fill:l,stroke:a}),f.push({shape:x.shapes.pathSymbol3DLayer[1],fill:g,stroke:a}),A=q=Math.max(q,b+2));u.push(f)}});return m.resolve(g.renderSymbol(u,[A,q],{node:b&&b.node,
scale:a}))}Object.defineProperty(w,"__esModule",{value:!0});var K=B.toUrl("../../images/Legend/legend3dsymboldefault.png"),y=a.getLogger("esri.symbols.support.previewSymbol3D");w.getSymbolLayerFill=t;w.previewSymbol3D=function(a,b){if(0===a.symbolLayers.length)return m.reject(new q("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var f=null;switch(a.type){case "point-3d":f=H(a,b);break;case "line-3d":f=Q(a,b);break;case "polygon-3d":case "mesh-3d":a:{f="mesh-3d"===a.type;a=
a.symbolLayers;for(var n=b&&b.size?h.pt2px(b.size):null,y=b&&b.maxSize?h.pt2px(b.maxSize):null,n=n||22,p=[],A=0,C=0,F=!1,D=0;D<a.length;D++){var w=a.getItemAt(D),I=w.type,l="fill"===I,R="line"===I,z="extrude"===w.type,I=[];if(f&&!l){f=void 0;break a}var d=x.shapes.fill[0];l?(F=(l=u(w))&&l.width||0,A=Math.max(A,n+F),C=Math.max(C,n+F),F=!0,I.push({shape:d,fill:t(w,0),stroke:l})):R?(w=(l=E(w,0))&&l.width||0,d={stroke:l,shape:d},A=Math.max(A,22+w),C=Math.max(C,22+w),I.push(d)):z&&(d=E(w,-.4),l=t(w,0),
w=t(w,-.2),R=Math.min(n,y||120),z=x.getExtrudeSymbolShapes(R),d.width=1,I.push({shape:z[0],fill:w,stroke:d}),I.push({shape:z[1],fill:w,stroke:d}),I.push({shape:z[2],fill:l,stroke:d}),w=22*.7+.5*R,A=Math.max(A,22+2*d.width),C=Math.max(C,w+2*d.width));p.push(I)}f=m.resolve(g.renderSymbol(p,[A,C],{node:b&&b.node,scale:F}))}}return f?f:m.reject(new q("symbolPreview: swatchInfo3D","symbol not supported."))}})},"esri/symbols/support/previewWebStyleSymbol":function(){define(["require","exports","../../request",
"../../core/screenUtils"],function(B,w,q,a){Object.defineProperty(w,"__esModule",{value:!0});w.previewWebStyleSymbol=function(m,h,p){var x=m.thumbnail&&m.thumbnail.url;return x?q(x,{responseType:"image"}).then(function(g){g=g.data;var f=!/\\.svg$/i.test(g.src)&&p&&p.disableUpsampling,h=Math.max(g.width,g.height),m=p&&null!=p.maxSize?a.pt2px(p.maxSize):120;f&&(m=Math.min(h,m));f=Math.min(m,p&&null!=p.size?a.pt2px(p.size):h);f!==h&&(h=0!==g.width&&0!==g.height?g.width/g.height:1,1<=h?(g.width=f,g.height=
f/h):(g.width=f*h,g.height=f));return p&&p.node?(p.node.appendChild(g),p.node):g}):m.fetchSymbol().then(function(a){return h(a,p)})}})},"esri/widgets/Legend/support/colorRampUtils":function(){define("require exports ../../../Color ../../../core/numberUtils ../../../symbols/support/gfxUtils ./utils".split(" "),function(B,w,q,a,m,h){function p(a,f){var b=f-a;f=[0,.25,.5,.75,1].map(function(f){return Number((a+f*b).toFixed(6))});x(0,4,f);return f}function x(a,f,g){var b=a+(f-a)/2,h=g[0],m=g[1],n=g[2],
u=Math.floor(h),p=Math.floor(m),t=Math.floor(n);u===h&&t===n&&p!==m&&u!==p&&t!==p&&(g[b]=p);a+1!==b&&x(a,b,g);b+1!==f&&x(b,f,g)}function g(a,g){a=f(a,g);var b=a.startIndex,h=a.endIndex;if(b===h)return g[b].color;g=q.blendColors(g[b].color,g[h].color,a.weight);return new q(g)}function f(a,f){var b=0,g=f.length-1;f.some(function(f,h){if(a<f.value)return g=h,!0;b=h;return!1});return{startIndex:b,endIndex:g,weight:(a-f[b].value)/(f[g].value-f[b].value)}}Object.defineProperty(w,"__esModule",{value:!0});
var n=[64,64,64],u=[255,255,255];w.getRampBorderColor=function(a){var b=null;if("simple"===a.type)b=a.symbol;else if("unique-value"===a.type||"class-breaks"===a.type)b=(a=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&a.symbol;return(a=(a=b&&-1===b.type.indexOf("line-symbol")?m.getStroke(b):null)&&a.color)&&0<a.a&&!(240<=a.r&&240<=a.g&&240<=a.b)?a:null};w.getRampOverlayColor=function(a){var b=new q(u);b.a=1-a;return b};w.getRampStops=function(b,f,g){var m=!1,u=[],A=[];if(f.colors||f.opacityValues)u=
p(f.minDataValue,f.maxDataValue);else if(f.stops){var t=f.stops,u=t.map(function(a){return a.value});(m=t.some(function(a){return!!a.label}))&&(A=t.map(function(a){return a.label}))}var x=u[0],t=u[u.length-1];if(null==x&&null==t)return null;var D=t-x;return u.map(function(p,y){var t;if("opacity"===f.type){t=g;void 0===t&&(t=n);t=new q(t);var C=b.getOpacity(p,{opacityInfo:f});null!=C&&(t.a=C)}else t=b.getColor(p,{colorInfo:f});y=m?A[y]:h.getLabelPrefix(y,u.length-1)+a.format(p);return{value:p,color:t,
label:y,offset:D?1-(p-x)/D:1}}).reverse()};w.getRampStopsForPointCloud=function(b){var f=!1,m=[],n=[],m=b.map(function(a){return a.value});(f=b.some(function(a){return!!a.label}))&&(n=b.map(function(a){return a.label}));var u=m[0],p=m[m.length-1];if(null==u&&null==p)return null;var q=p-u;return m.map(function(p,t){var A=g(p,b);t=f?n[t]:h.getLabelPrefix(t,m.length-1)+a.format(p);return{value:p,color:A,label:t,offset:q?1-(p-u)/q:1}}).reverse()};w.getColorFromPointCloudStops=g})},"esri/widgets/Legend/support/utils":function(){define(["require",
"exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});w.getLabelPrefix=function(q,a){return 0===q?"\x3c ":q===a?"\x3e ":""}})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["require","exports","../../../renderers/support/HeatmapColorStop"],function(B,w,q){Object.defineProperty(w,"__esModule",{value:!0});w.getHeatmapRampStops=function(a){a=a.colorStops;var m=a.length-1;if(a&&a[0]){var h=a[m];h&&1!==h.ratio&&(a=a.slice(0),a.push(new q.HeatmapColorStop({ratio:1,
color:h.color})),m++)}return a.map(function(a,h){var g="";0===h?g="low":h===m&&(g="high");return{color:a.color,label:g,ratio:a.ratio,offset:1-a.ratio}}).reverse()}})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define("require exports dojox/gfx dojox/gfx/matrix ../../../symbols ../../../symbols/support/gfxUtils ../../../symbols/support/previewSymbol3D".split(" "),function(B,w,q,a,m,h,p){function x(a){if(a){var b=a.type;return-1<b.indexOf("3d")?p.getSymbolLayerFill(a.symbolLayers.getItemAt(0)):
"simple-line"===b||"simple-marker"===a.type&&(a.style===m.SimpleMarkerSymbol.STYLE_X||a.style===m.SimpleMarkerSymbol.STYLE_CROSS)?(a=h.getStroke(a))&&a.color:h.getFill(a)}}function g(a,b){var f=b.HH.label,g=b.LL.label,h=b.HL.label;b=b.LH.label;switch(a){case "HH":return{top:f,bottom:g,left:h,right:b};case "HL":return{top:h,bottom:b,left:g,right:f};case "LL":return{top:g,bottom:f,left:b,right:h};case "LH":return{top:b,bottom:h,left:f,right:g};default:return{top:f,bottom:g,left:h,right:b}}}function f(a){var f=
b[a];a&&null==f&&(f=b.HH);return f||0}function n(a,b,f,g){var h=g+"_arrowStart";g+="_arrowEnd";b="left"===b;switch(f){case "HL":a.setAttribute(b?"marker-start":"marker-end","url(#"+(b?g:h)+")");break;case "LL":a.setAttribute("marker-start","url(#"+g+")");break;case "LH":a.setAttribute(b?"marker-end":"marker-start","url(#"+(b?h:g)+")");break;default:a.setAttribute("marker-end","url(#"+h+")")}}function u(a,b,f){var g="start"===b;b=g?f+"_arrowStart":f+"_arrowEnd";f=g?"0,0 5,5 0,10":"5,0 0,5 5,10";var h=
g?"5":"0",g=document.createElementNS("http://www.w3.org/2000/svg","marker");g.setAttribute("id",b);g.setAttribute("markerWidth","10");g.setAttribute("markerHeight","10");g.setAttribute("refX",h);g.setAttribute("refY","5");g.setAttribute("markerUnits","strokeWidth");g.setAttribute("orient","auto");b=document.createElementNS("http://www.w3.org/2000/svg","polyline");b.setAttribute("points",f);b.setAttribute("fill","none");b.setAttribute("stroke","#555555");b.setAttribute("stroke-width","1");g.appendChild(b);
a.appendChild(g)}Object.defineProperty(w,"__esModule",{value:!0});var b={HH:315,HL:45,LL:135,LH:225},t={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};w.getRelationshipRampElement=function(a){var b=a.focus,h=a.numClasses,m=t[h],n={};a.infos.forEach(function(a){n[a.value]={label:a.label,fill:x(a.symbol)}});a=[];for(var u=0;u<h;u++){for(var p=[],q=0;q<h;q++)p.push(n[m[u][q]].fill);
a.push(p)}m=g(b,n);return{type:"relationship-ramp",numClasses:h,focus:b,colors:a,labels:m,rotation:f(b)}};w.getRotationAngleForFocus=f;w.renderRamp=function(b,f,g){void 0===g&&(g=60);var m=b.focus,p=b.numClasses,t=b.colors,C=b.rotation;b=!!m;var x=Math.sqrt(Math.pow(g,2)+Math.pow(g,2))+(b?0:5),y=document.createElement("div"),D=q.createSurface(y,x,x),w=h.create2DColorRamp({surface:D,colors:t,numClasses:p,size:g}),p=(x-g)/2,x=(x-g)/2;w.applyTransform(a.translate(p,x));var t=g/2,E=g/2;w.applyTransform(a.rotategAt(C,
t,E));var C=D.createGroup(),w={width:1,color:"#555555"},B=D.defNode;u(B,"start",f);u(B,"end",f);B=C.createLine({x1:-10,y1:g-15,x2:-10,y2:15}).setStroke(w);g=C.createLine({x1:15,y1:g+10,x2:g-15,y2:g+10}).setStroke(w);n(B.rawNode,"left",m,f);n(g.rawNode,"right",m,f);C.applyTransform(a.translate(p,x));b?C.applyTransform(a.rotategAt(-45,t,E)):D.rawNode.style.margin="-15px -15px -18px -15px";return y}})},"esri/widgets/Legend/support/sizeRampUtils":function(){define("require exports ../../../symbols ../../../core/numberUtils ../../../symbols/support/symbolUtils ./utils".split(" "),
function(B,w,q,a,m,h){function p(a,b){var f=null,h=null;if("simple"===a.type)f=a.symbol;else if("unique-value"===a.type||"class-breaks"===a.type)f=(f=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&f.symbol,h=1<a.length;if(!f||x(f))return null;f=f.clone();if(b||h)-1<f.type.indexOf("3d")?g(f):(b=f,-1!==b.type.indexOf("line")?b.color=C:(b.color=D,"simple-marker"===b.type&&(b.outline={color:C,width:1.5})));return f}function x(a){if(a)return q.isSymbol3D(a)?a.symbolLayers?a.symbolLayers.some(function(a){return a&&
"fill"===a.type}):!1:-1!==a.type.indexOf("fill")}function g(a){m.isVolumetricSymbol(a)||("line-3d"===a.type?a.symbolLayers.forEach(function(a){a.material={color:C}}):a.symbolLayers.forEach(function(a){"icon"!==a.type||a.resource&&a.resource.href?a.material={color:E}:(a.material={color:D},a.outline={color:C,size:1.5})}))}function f(b,f,g,h){var m=b.getSizeRangeAtScale(f,h),y=m&&n(m);if(m||y){for(var p=y.map(function(a){var b=m.minSize,g=m.maxSize,h=f.minDataValue,n=f.maxDataValue;return a<=b?h:a>=
g?n:(a-b)/(g-b)*(n-h)+h}),p=a.round(p),t=1;t<p.length-1;t++){var A=u(b,f,g,p[t],p[t-1],h);A&&(p[t]=A[0],y[t]=A[1])}return p}}function n(a){var b=a.minSize;a=(a.maxSize-b)/4;for(var f=[],g=0;5>g;g++)f.push(b+a*g);return f}function u(f,g,h,m,n,u){var y,p=b(f,g,h,m,u);n=b(f,g,h,n,u);var t=a.numDigits(m),A=t.fractional,q=t.integer,C=t=null;0<m&&1>m&&(t=Math.pow(10,A),m*=t,q=a.numDigits(m).integer);for(A=q-1;0<=A;A--){var x=Math.pow(10,A),q=Math.floor(m/x)*x,x=Math.ceil(m/x)*x;null!=t&&(q/=t,x/=t);y=(q+
x)/2;y=a.round([q,y,x],{indexes:[1]});y=y[1];var F=b(f,g,h,q,u),D=b(f,g,h,x,u),w=b(f,g,h,y,u),E=a.percentChange(p,F,n,null),H=a.percentChange(p,D,n,null),l=a.percentChange(p,w,n,null),R=20>=E.previous,z=20>=H.previous;R&&z&&(E.previous<=H.previous?(R=!0,z=!1):(z=!0,R=!1));R?C=[q,F]:z?C=[x,D]:20>=l.previous&&(C=[y,w]);if(C)break}return C}function b(a,b,f,g,h){return a.getSize(g,{sizeInfo:b,scale:h,shape:-1!==f.type.indexOf("marker-symbol")?f.style:null})}function t(a,b){a=a.clone();if(q.isSymbol3D(a))m.isVolumetricSymbol(a)||
a.symbolLayers.forEach(function(a){"fill"!==a.type&&(a.size=b)});else if("esri.symbols.SimpleMarkerSymbol"===a.declaredClass)a.size=b;else if("esri.symbols.PictureMarkerSymbol"===a.declaredClass){var f=a.width,g=a.height;a.height=b;a.width=f/g*b}else"esri.symbols.SimpleLineSymbol"===a.declaredClass?a.width=b:"esri.symbols.TextSymbol"===a.declaredClass&&a.font&&(a.font.size=b);return a}Object.defineProperty(w,"__esModule",{value:!0});w.REAL_WORLD_MAX_SIZE=30;w.REAL_WORLD_MIN_SIZE=12;var D=[255,255,
255],E=[200,200,200],C=[128,128,128];w.getRampStops=function(g,n,u,q){var A=n.legendOptions,A=A&&A.customValues,y=p(g,u);u=null!=n.minSize&&null!=n.maxSize;var C=n.stops&&1<n.stops.length,x=!!n.target;if(y&&(A||u||C&&!x)){var F=m.isVolumetricSymbol(y),D=null,E=null,H=null,E=F&&!C?a.round([n.minDataValue,n.maxDataValue]):A||f(g,n,y,q);!E&&C&&(E=n.stops.map(function(a){return a.value}),(D=n.stops.some(function(a){return!!a.label}))&&(H=n.stops.map(function(a){return a.label})));A=!F||E&&2===E.length;
if(!E||!A)return null;var B=[w.REAL_WORLD_MIN_SIZE,w.REAL_WORLD_MAX_SIZE];return E.map(function(f,m){var u=F?B[m]:b(g,n,y,f,q),p=t(y,u);m=D?H[m]:h.getLabelPrefix(m,E.length-1)+a.format(f);return{value:f,symbol:p,label:m,size:u}}).reverse()}}})},"esri/widgets/Legend/styles/Card":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/i18n!../../../nls/common dojo/i18n!../../Legend/nls/Legend dojox/gfx ../../../core/lang ../../../core/screenUtils ../../../core/accessorSupport/decorators ../../Widget ./common ../support/styleUtils ../../support/colorUtils ../../support/widget".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D){var E;(function(a){a.Auto="auto";a.Stack="stack";a.SideBySide="side-by-side"})(E||(E={}));var C=function(a){return{width:g.pt2px(a.width),height:g.pt2px(a.height)}};return function(n){function A(a){a=n.call(this)||this;a._hasIndicators=!1;a._selectedSectionName=null;a._sectionNames=[];a._sectionMap=new Map;a.activeLayerInfos=null;a.layout=E.Stack;a.type="card";a.view=null;return a}q(A,n);A.prototype.render=function(){var a=this,b;this._sectionNames.length=0;
this._hasIndicators=this.layout===E.Auto&&768>=this.view.container.clientWidth||this.layout===E.Stack;var f=this.activeLayerInfos,g=f&&f.toArray().map(function(b){return a._renderLegendForLayer(b)}).filter(function(a){return!!a});this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;var n=this._sectionNames.length,f=this._sectionNames.map(function(b,
f){var g;f=x.substitute({index:f+1,total:n},m.pagination.pageText);return D.tsx("div",{key:b,"aria-label":f,title:f,tabIndex:0,onclick:a._selectSection,onkeydown:a._selectSection,bind:a,class:a.classes("esri-legend--card__carousel-indicator",(g={},g["esri-legend--card__carousel-indicator--activated"]=a._selectedSectionName===b,g)),"data-section-name":b})}),f=this._hasIndicators?D.tsx("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation"},f):null,g=this._hasIndicators?
this._sectionMap.get(this._selectedSectionName):g&&g.length?g:null,u=(b={},b["esri-legend--stacked"]=this._hasIndicators,b);return D.tsx("div",{class:this.classes("esri-legend--card esri-widget",u)},f,g?g:D.tsx("div",{class:"esri-legend--card__message"},h.noLegend))};A.prototype._selectSection=function(a){if(a=a.target.getAttribute("data-section-name"))this._selectedSectionName=a};A.prototype._renderLegendForLayer=function(a){var b=this,f;if(!a.ready)return null;var g="esri-legend--card__"+a.layer.uid+
"-version-"+a.version;if(a.children.length)return f=a.children.map(function(a){return b._renderLegendForLayer(a)}).toArray(),this._sectionNames.push(g),D.tsx("div",{key:a.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},D.tsx("div",{class:"esri-legend--card__service-caption-container"},a.title),f);if((g=a.legendElements)&&!g.length)return null;var h=g.some(function(a){return"relationship-ramp"===a.type}),g=g.map(function(f){return b._renderLegendForElement(f,
a.layer,h)}).filter(function(a){return!!a});if(!g.length)return null;var m=(f={},f["esri-legend--card__group-layer-child"]=!!a.parent,f);return D.tsx("div",{key:a.layer.uid,class:this.classes("esri-legend--card__service",m)},D.tsx("div",{class:"esri-legend--card__service-caption-container"},D.tsx("div",{class:"esri-legend--card__service-caption-text"},a.title)),D.tsx("div",{class:"esri-legend--card__service-content"},g))};A.prototype._renderLegendForElement=function(a,f,g){var h=this;void 0===g&&
(g=!1);var m,n="color-ramp"===a.type,p="opacity-ramp"===a.type,t="size-ramp"===a.type,A=a.title,q=null;"string"===typeof A?q=A:A&&(q=b.getTitle(A,n||p),q=A.title?A.title+" ("+q+")":q);A="esri-legend--card__"+f.uid+"-type-"+a.type;q=this._hasIndicators?D.tsx("div",null,D.tsx("h3",{class:this.classes("esri-widget__heading","esri-legend--card__carousel-title")},f.title),D.tsx("h4",{class:this.classes("esri-widget__heading","esri-legend--card__layer-caption")},q)):q?D.tsx("h4",{class:this.classes("esri-widget__heading",
"esri-legend--card__layer-caption")},q):null;n=null;"symbol-table"===a.type?(t=a.infos.map(function(b){return h._renderLegendForElementInfo(b,f,a.legendType)}).filter(function(a){return!!a}),t.length&&(n=t[0].properties.classes&&t[0].properties.classes["esri-legend--card__symbol-row"],g=(m={},m["esri-legend--card__label-container"]=!n&&!g,m["esri-legend--card__relationship-label-container"]=g,m),n=D.tsx("div",{key:A,class:"esri-legend--card__section"},q,D.tsx("div",{class:this.classes(g)},t)))):"color-ramp"===
a.type||"opacity-ramp"===a.type||"heatmap-ramp"===a.type?n=D.tsx("div",{key:A,class:"esri-legend--card__section"},q,this._renderLegendForRamp(a)):t?n=D.tsx("div",{key:A,class:"esri-legend--card__section"},q,this._renderSizeRamps(a.infos)):"relationship-ramp"===a.type&&(n=D.tsx("div",{key:A,class:this.classes("esri-legend--card__section","esri-legend--card__relationship-section")},q,u.renderRelationshipRamp(a,this.id)));if(!n)return null;this._sectionNames.push(A);this._sectionMap.set(A,n);return n};
A.prototype._renderLegendForElementInfo=function(a,f,g){var h,m,n;if(a.type)return this._renderLegendForElement(a,f);g=b.isImageryStretchedLegend(f,g);if(a.symbol&&a.preview){if(-1===a.symbol.type.indexOf("simple-fill")){if(!a.label)return D.tsx("div",{bind:a.preview,afterCreate:b.attachToNode});f=(h={},h["esri-legend--card__symbol-cell"]=this._hasIndicators,h);return D.tsx("div",{class:this.classes("esri-legend--card__layer-row",(m={},m["esri-legend--card__symbol-row"]=this._hasIndicators,m))},D.tsx("div",
{class:this.classes(f),bind:a.preview,afterCreate:b.attachToNode}),D.tsx("div",{class:this.classes("esri-legend--card__image-label",(n={},n["esri-legend--card__label-cell"]=this._hasIndicators,n))},b.getTitle(a.label,!1)||""))}n=m=h=255;f=0;var u=g=255,p=255,A=0,q=a.symbol.color&&a.symbol.color.a,C=a.symbol.outline&&a.symbol.outline.color.a;q&&(h=a.symbol.color.r,m=a.symbol.color.g,n=a.symbol.color.b,f=a.symbol.color.a);C&&(g=a.symbol.outline.color.r,u=a.symbol.outline.color.g,p=a.symbol.outline.color.b,
A=a.symbol.outline.color.a);var x=t.isBright(a.symbol.color),F=x?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return D.tsx("div",{class:"esri-legend--card__layer-row"},D.tsx("div",{key:a.label,class:"esri-legend--card__label-element",styles:{background:q?"rgba("+h+", "+m+", "+n+", "+f+")":"none",color:x?"black":"white",textShadow:"-1px -1px 0 "+F+",\n                                              1px -1px 0 "+F+",\n                                              -1px 1px 0 "+F+",\n                                              1px 1px 0 "+
F,border:C?"1px solid rgba("+g+", "+u+", "+p+", "+A+")":"none"}}," ",a.label," "))}if(a.src)return h=this._renderImage(a,f,g),D.tsx("div",{class:"esri-legend--card__layer-row"},h,D.tsx("div",{class:"esri-legend--card__image-label"},a.label||""))};A.prototype._renderImage=function(a,b,f){var g,h=a.label,m=a.src,n=a.opacity;f=(g={},g["esri-legend--card__imagery-layer-image--stretched"]=f,g["esri-legend--card__symbol"]=!f,g);b={opacity:""+(null!=n?n:b.opacity)};return D.tsx("img",{alt:h,src:m,border:0,
width:a.width,height:a.height,class:this.classes(f),styles:b})};A.prototype._renderSizeRamps=function(a){var f,h=document.createElement("div"),m,n=a[a.length-1].symbol.color,u,t,A=a[0].label,q=a[a.length-1].label,x=a[0].symbol.style&&"circle"===a[0].symbol.style;try{if(this._hasIndicators)if(t=100,x){var F=g.pt2px(a[0].symbol.size),w=g.pt2px(a[a.length-1].symbol.size),E=F/2,H=w/2;u=2*E+2;var B=t-E-H,V=Math.sqrt(Math.pow(B,2)-Math.pow(E-H,2)),l=E*V/B,R=E+l,z=E+Math.sqrt(Math.pow(E,2)-Math.pow(l,2)),
d=H*l/E,c=E+d,e=t-(H-Math.sqrt(Math.pow(H,2)-Math.pow(d,2))),l=E-l,d=E-d;m=p.createSurface(h,u,t);m.createCircle({cx:E,cy:E,r:E}).setFill(n).setStroke({color:"#ddd",width:1});m.createCircle({cx:E,cy:t-H,r:H}).setFill(n).setStroke({color:"#ddd",width:1});m.createLine({x1:R,y1:z,x2:c,y2:e}).setStroke({color:"#ddd",width:1});m.createLine({x1:l,y1:z,x2:d,y2:e}).setStroke({color:"#ddd",width:1})}else{var k=C(a[0].symbol),r=k.width,v=k.height,G=C(a[a.length-1].symbol),J=G.width,L=G.height,U=Math.max(r,
v),X=Math.max(J,L);u=U;m=p.createSurface(h,u,t);m.createRect({x:0,y:0,height:U,width:U}).setStroke({color:"#ddd",width:1});m.createRect({x:U/2-X/2,y:t-X,height:X,width:X}).setStroke({color:"#ddd",width:1});m.createImage({src:a[0].symbol.url,height:U,width:U});m.createImage({src:a[a.length-1].symbol.url,height:X,width:X,y:t-X,x:U/2-X/2});m.createLine({x1:0,y1:U,x2:U/2-X/2,y2:t-X}).setStroke({color:"#ddd",width:1});m.createLine({x1:u,y1:U,x2:U/2+X/2,y2:t-X}).setStroke({color:"#ddd",width:1})}else{u=
180;if(x)F=g.pt2px(a[0].symbol.size),w=g.pt2px(a[a.length-1].symbol.size),E=F/2,H=w/2,t=2*E,B=u-E-H,V=Math.sqrt(Math.pow(B,2)-Math.pow(E-H,2)),l=E*V/B,z=E-l,R=u-(E+Math.sqrt(Math.pow(E,2)-Math.pow(l,2))),d=H*l/E,e=E-d,c=H-Math.sqrt(Math.pow(H,2)-Math.pow(d,2)),l=E+l,d=E+d,m=p.createSurface(h,u,t),m.createCircle({cx:u-E,cy:E,r:E}).setFill(n).setStroke({color:"#ddd",width:1}),m.createCircle({cx:H,cy:E,r:H}).setFill(n).setStroke({color:"#ddd",width:1}),m.createLine({x1:R,y1:z,x2:c,y2:e}).setStroke({color:"#ddd",
width:1}),m.createLine({x1:R,y1:l,x2:c,y2:d}).setStroke({color:"#ddd",width:1});else{var ca=C(a[0].symbol),r=ca.width,v=ca.height,ba=C(a[a.length-1].symbol),J=ba.width,L=ba.height,U=Math.max(r,v),X=Math.max(J,L);m=p.createSurface(h,u,U);m.createRect({x:0,y:U/2-X/2,height:X,width:X}).setStroke({color:"#ddd",width:1});m.createRect({x:u-U,y:0,height:U,width:U}).setStroke({color:"#ddd",width:1});m.createImage({src:a[a.length-1].symbol.url,height:X,width:X,y:U/2-X/2});m.createImage({src:a[0].symbol.url,
height:U,width:U,x:u-U});m.createLine({x1:X,y1:U/2-X/2,x2:u-U,y2:0}).setStroke({color:"#ddd",width:1});m.createLine({x1:X,y1:U/2+X/2,x2:u-U,y2:U}).setStroke({color:"#ddd",width:1})}n=A;A=q;q=n}}catch(ga){m.clear(),m.destroy()}return m?D.tsx("div",{class:this.classes("esri-legend--card__layer-row",(f={},f["esri-legend--card__size-ramp-row"]=this._hasIndicators,f))},D.tsx("div",{class:"esri-legend--card__ramp-label"},A),D.tsx("div",{class:"esri-legend--card__size-ramp-container"},D.tsx("div",{bind:h,
afterCreate:b.attachToNode})),D.tsx("div",{class:"esri-legend--card__ramp-label"},q)):null};A.prototype._renderLegendForRamp=function(a){var f=a.infos,g="heatmap-ramp"===a.type,m=f.length-1,n=2<m&&!g?25*m:100,u=n+20;a=document.createElement("div");a.style.width=u+"px";var t=p.createSurface(a,u,25),A=f.slice(0).reverse();try{A.forEach(function(a,b){a.offset=g?a.ratio:b/m}),g||t.createPath("M0 12.5 L10 0 L10 25 Z").setFill(A[0].color).setStroke(null),t.createRect({x:10,y:0,width:n,height:25}).setFill({type:"linear",
x1:10,y1:0,x2:n+10,y2:0,colors:A}).setStroke(null),g||t.createPath("M"+(n+10)+" 0 L"+u+" 12.5 L"+(n+10)+" 25 Z").setFill(A[A.length-1].color).setStroke(null)}catch(S){t.clear(),t.destroy()}if(!t)return null;n=A.filter(function(a,b){return!!a.label&&0!==b&&b!==A.length-1}).map(function(a){return D.tsx("div",{class:"esri-legend--card__interval-separators-container"},D.tsx("div",{class:"esri-legend--card__interval-separator"},"|"),D.tsx("div",{class:"esri-legend--card__ramp-label"},a.label))});u=f[f.length-
1].label;f=f[0].label;return D.tsx("div",{class:"esri-legend--card__layer-row"},D.tsx("div",{class:"esri-legend--card__ramp-label"},g?h[u]:u),D.tsx("div",{class:"esri-legend--card__symbol-container"},D.tsx("div",{bind:a,afterCreate:b.attachToNode}),n),D.tsx("div",{class:"esri-legend--card__ramp-label"},g?h[f]:f))};a([D.renderable(),f.property()],A.prototype,"activeLayerInfos",void 0);a([f.property()],A.prototype,"layout",void 0);a([f.property({readOnly:!0})],A.prototype,"type",void 0);a([f.property()],
A.prototype,"view",void 0);a([D.accessibleHandler()],A.prototype,"_selectSection",null);return A=a([f.subclass("esri.widgets.Legend.styles.Card")],A)}(f.declared(n))})},"esri/widgets/Legend/styles/common":function(){define(["require","exports","../support/relationshipRampUtils","../support/styleUtils","../../support/widget"],function(B,w,q,a,m){Object.defineProperty(w,"__esModule",{value:!0});w.renderRelationshipRamp=function(h,p){var x=h.labels,g=!!h.focus;h=q.renderRamp(h,p);return g?m.tsx("div",
{class:"esri-relationship-ramp--diamond__container"},m.tsx("div",{class:"esri-relationship-ramp--diamond__left-column"},x.left),m.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column"},m.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},x.top),m.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column--ramp",bind:h,afterCreate:a.attachToNode}),m.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},x.bottom)),m.tsx("div",{class:"esri-relationship-ramp--diamond__right-column"},
x.right)):m.tsx("div",{class:"esri-relationship-ramp--square__table"},m.tsx("div",{class:"esri-relationship-ramp--square__table-row"},m.tsx("div",{class:m.classes("esri-relationship-ramp--square__table-cell","esri-relationship-ramp--square__table-label","esri-relationship-ramp--square__table-label--right-bottom")},x.left),m.tsx("div",{class:"esri-relationship-ramp--square__table-cell"}),m.tsx("div",{class:m.classes("esri-relationship-ramp--square__table-cell","esri-relationship-ramp--square__table-label",
"esri-relationship-ramp--square__table-label--left-bottom")},x.top)),m.tsx("div",{class:"esri-relationship-ramp--square__table-row"},m.tsx("div",{class:"esri-relationship-ramp--square__table-cell"}),m.tsx("div",{class:"esri-relationship-ramp--square__table-cell",bind:h,afterCreate:a.attachToNode}),m.tsx("div",{class:"esri-relationship-ramp--square__table-cell"})),m.tsx("div",{class:"esri-relationship-ramp--square__table-row"},m.tsx("div",{class:m.classes("esri-relationship-ramp--square__table-cell",
"esri-relationship-ramp--square__table-label","esri-relationship-ramp--square__table-label--right-top")},x.bottom),m.tsx("div",{class:"esri-relationship-ramp--square__table-cell"}),m.tsx("div",{class:m.classes("esri-relationship-ramp--square__table-cell","esri-relationship-ramp--square__table-label","esri-relationship-ramp--square__table-label--left-top")},x.right)))}})},"esri/widgets/Legend/support/styleUtils":function(){define(["require","exports","dojo/i18n!../../Legend/nls/Legend","../../../core/lang"],
function(B,w,q,a){Object.defineProperty(w,"__esModule",{value:!0});w.attachToNode=function(a){a.appendChild(this)};w.getTitle=function(m,h){if(m){if("string"===typeof m)return m;var p=null;h?p=m.ratioPercentTotal?"showRatioPercentTotal":m.ratioPercent?"showRatioPercent":m.ratio?"showRatio":m.normField?"showNormField":m.field?"showField":null:h||(p=m.normField?"showNormField":m.normByPct?"showNormPct":m.field?"showField":null);return p?a.substitute({field:m.field,normField:m.normField},"showField"===
p?"{field}":q[p]):null}};w.isRendererTitle=function(a,h){return!h};w.isImageryStretchedLegend=function(a,h){return!!(h&&"Stretched"===h&&10.3<=a.version&&"esri.layers.ImageryLayer"===a.declaredClass)}})},"esri/widgets/support/colorUtils":function(){define(["require","exports","../../Color"],function(B,w,q){function a(a){return new q(a)}function m(a){return!!a&&4===a.length&&f.test(a)}function h(a){return!!a&&7===a.length&&n.test(a)}function p(a){return 127<=.299*a.r+.587*a.g+.114*a.b}function x(a,
b){void 0===b&&(b=1);b=Math.pow(.7,b);return new q([Math.round(a.r*b),Math.round(a.g*b),Math.round(a.b*b),a.a])}function g(a,b){void 0===b&&(b=1);b=Math.pow(.7,b);var f=a.r,g=a.g,h=a.b;30>f&&(f=30);30>g&&(g=30);30>h&&(h=30);return new q([Math.min(255,Math.round(f/b)),Math.min(255,Math.round(g/b)),Math.min(255,Math.round(h/b)),a.a])}Object.defineProperty(w,"__esModule",{value:!0});var f=/^#[0-9A-F]{3}$/i,n=/^#[0-9A-F]{6}$/i;w.equal=function(a,b){return a&&b&&a.r===b.r&&a.g===b.g&&a.b===b.b&&a.a===
b.a};w.normalizeHex=function(a){return a?"#"+a.trim().replace(/#/g,"").substr(0,6):""};w.normalizeColor=a;w.isValidHex=function(a){return m(a)||h(a)};w.isShorthandHex=m;w.isLonghandHex=h;w.toHex=function(f){return a(f).toHex()};w.getContrastingColor=function(a){return p(a)?x(a):g(a,3)};w.isBright=p;w.darker=x;w.brighter=g})},"esri/widgets/Legend/styles/Classic":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper dojo/i18n!../../Legend/nls/Legend dojox/gfx ../../../core/accessorSupport/decorators ../../Widget ./common ../support/styleUtils ../../support/widget".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n){return function(u){function b(a){a=u.call(this)||this;a.activeLayerInfos=null;a.type="classic";return a}q(b,u);b.prototype.render=function(){var a=this,b=this.activeLayerInfos,f=this.classes("esri-legend esri-widget--panel","esri-widget"),b=b&&b.toArray().map(function(b){return a._renderLegendForLayer(b)}).filter(function(a){return!!a});return n.tsx("div",{class:f},b&&b.length?b:n.tsx("div",{class:"esri-legend__message"},m.noLegend))};b.prototype._renderLegendForLayer=
function(a){var b=this,f;if(!a.ready)return null;var g=!!a.children.length,h="esri-legend__"+a.layer.uid+"-version-"+a.version,m=a.title?n.tsx("h3",{class:this.classes("esri-widget__heading","esri-legend__service-label")},a.title):null;if(g)return f=a.children.map(function(a){return b._renderLegendForLayer(a)}).toArray(),n.tsx("div",{key:h,class:this.classes("esri-legend__service","esri-legend__group-layer")},m,f);if((g=a.legendElements)&&!g.length)return null;g=g.map(function(f){return b._renderLegendForElement(f,
a.layer)}).filter(function(a){return!!a});if(!g.length)return null;var u=(f={},f["esri-legend__group-layer-child"]=!!a.parent,f);return n.tsx("div",{key:h,class:this.classes("esri-legend__service",u)},m,n.tsx("div",{class:"esri-legend__layer"},g))};b.prototype._renderLegendForElement=function(a,b,h){var m=this,u,p="color-ramp"===a.type,t="opacity-ramp"===a.type,q="size-ramp"===a.type,x=null;if("symbol-table"===a.type||q){var y=a.infos.map(function(f){return m._renderLegendForElementInfo(f,b,q,a.legendType)}).filter(function(a){return!!a});
y.length&&(x=n.tsx("div",{class:"esri-legend__layer-body"},y))}else"color-ramp"===a.type||"opacity-ramp"===a.type||"heatmap-ramp"===a.type?x=this._renderLegendForRamp(a):"relationship-ramp"===a.type&&(x=g.renderRelationshipRamp(a,this.id));if(!x)return null;var y=a.title,D=null;"string"===typeof y?D=y:y&&(D=f.getTitle(y,p||t),D=f.isRendererTitle(y,p||t)&&y.title?y.title+" ("+D+")":D);p=h?"esri-legend__layer-child-table":"esri-legend__layer-table";t=D?n.tsx("div",{class:"esri-legend__layer-caption"},
D):null;h=(u={},u["esri-legend__layer-table--size-ramp"]=q||!h,u);return n.tsx("div",{class:this.classes(p,h)},t,x)};b.prototype._renderLegendForRamp=function(a){var b=a.infos,g="opacity-ramp"===a.type,u="heatmap-ramp"===a.type,p=b.length-1,t=null;2<p&&!u?t=25*p:t=u?75:50;var q=document.createElement("div");q.className="esri-legend__color-ramp "+(g?"esri-legend__opacity-ramp":"");q.style.height=t+"px";g=h.createSurface(q,"100%",t);try{if(u||b.forEach(function(a,b){a.offset=b/p}),g.createRect({x:0,
y:0,width:"100%",height:t}).setFill({type:"linear",x1:0,y1:0,x2:0,y2:t,colors:b}).setStroke(null),"color-ramp"===a.type||"opacity-ramp"===a.type){var x=a.overlayColor;x&&0<x.a&&g.createRect({x:0,y:0,width:"100%",height:t}).setFill(x).setStroke(null)}}catch(K){g.clear(),g.destroy()}if(!g)return null;a=b.filter(function(a){return!!a.label}).map(function(a){return n.tsx("div",{class:"esri-legend__ramp-label"},u?m[a.label]:a.label)});t={height:t+"px"};return n.tsx("div",{class:"esri-legend__layer-row"},
n.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--symbols",styles:{width:"24px"}},n.tsx("div",{class:"esri-legend__ramps",bind:q,afterCreate:f.attachToNode})),n.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},n.tsx("div",{class:"esri-legend__ramp-labels",styles:t},a)))};b.prototype._renderLegendForElementInfo=function(a,b,g,h){var m,u;if(a.type)return this._renderLegendForElement(a,b,!0);var p=null;h=f.isImageryStretchedLegend(b,h);a.symbol&&a.preview?
p=n.tsx("div",{class:"esri-legend__symbol",bind:a.preview,afterCreate:f.attachToNode}):a.src&&(p=this._renderImage(a,b,h));if(!p)return null;b=(m={},m["esri-legend__imagery-layer-info--stretched"]=h,m);g=(u={},u["esri-legend__imagery-layer-info--stretched"]=h,u["esri-legend__size-ramp"]=!h&&g,u);return n.tsx("div",{class:"esri-legend__layer-row"},n.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--symbols",g)},p),n.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--info",
b)},f.getTitle(a.label,!1)||""))};b.prototype._renderImage=function(a,b,f){var g,h=a.label,m=a.src,u=a.opacity;f=(g={},g["esri-legend__imagery-layer-image--stretched"]=f,g["esri-legend__symbol"]=!f,g);b={opacity:""+(null!=u?u:b.opacity)};return n.tsx("img",{alt:h,src:m,border:0,width:a.width,height:a.height,class:this.classes(f),styles:b})};a([n.renderable(),p.property()],b.prototype,"activeLayerInfos",void 0);a([p.property({readOnly:!0})],b.prototype,"type",void 0);return b=a([p.subclass("esri.widgets.Legend.styles.Classic")],
b)}(p.declared(x))})},"esri/widgets/DirectLineMeasurement3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./DirectLineMeasurement3D/nls/DirectLineMeasurement3D ../core/accessorSupport/decorators ./Widget ./DirectLineMeasurement3D/DirectLineMeasurement3DViewModel ./support/widget".split(" "),function(B,w,q,a,m,h,p,x,g){return function(f){function n(a){a=f.call(this)||this;a.view=null;a.visible=null;a.viewModel=new x;a.unitOptions=
null;a.unit=null;return a}q(n,f);n.prototype.clearMeasurement=function(){};n.prototype.render=function(){var a=this,b=!this.viewModel.isSupported,f="measuring"===this.viewModel.state,h=this.viewModel.measurement,n="ready"===this.viewModel.state?g.tsx("section",{key:"esri-direct-line-measurement-3d__hint",class:"esri-direct-line-measurement-3d__hint"},g.tsx("p",null,m.hint)):null,b=b?g.tsx("section",{key:"esri-direct-line-measurement-3d__unsupported",class:"esri-direct-line-measurement-3d__panel--error"},
g.tsx("p",null,m.unsupported)):null,p=function(b,f,h){switch(f.state){case "available":return g.tsx("div",{key:h+"-enabled",class:"esri-direct-line-measurement-3d__measurement-item"},g.tsx("span",{class:"esri-direct-line-measurement-3d__measurement-item-title"},b),g.tsx("span",{class:"esri-direct-line-measurement-3d__measurement-item-value"},f.text));case "unavailable":return g.tsx("div",{key:h+"-disabled",class:a.classes("esri-direct-line-measurement-3d__measurement-item","esri-direct-line-measurement-3d__measurement-item--disabled")},
g.tsx("span",{class:"esri-direct-line-measurement-3d__measurement-item-title"},b))}},h=f?g.tsx("section",{key:"esri-direct-line-measurement-3d__measurement",class:"esri-direct-line-measurement-3d__measurement"},p(m.direct,h.directDistance,"direct"),p(m.horizontal,h.horizontalDistance,"horizontal"),p(m.vertical,h.verticalDistance,"vertical")):null,A=this.id+"__units",p=g.tsx("label",{class:"esri-direct-line-measurement-3d__units-label",for:A},m.unit),A=g.tsx("div",{class:"esri-direct-line-measurement-3d__units-select-wrapper"},
g.tsx("select",{class:"esri-direct-line-measurement-3d__units-select esri-select",id:A,onchange:this._changeUnit,bind:this},this.viewModel.unitOptions.map(function(b){return b===a.viewModel.unit?g.tsx("option",{key:b,value:b,selected:!0},m.units[b]):g.tsx("option",{key:b,value:b},m.units[b])}))),p=f?g.tsx("section",{key:"esri-direct-line-measurement-3d__units",class:"esri-direct-line-measurement-3d__units"},p,A):null,f=f?g.tsx("button",{class:this.classes("esri-button esri-button--secondary","esri-direct-line-measurement-3d__clear-button"),
bind:this,onclick:this._newMeasurement},m.newMeasurement):null,n=this.visible?g.tsx("div",{class:"esri-direct-line-measurement-3d__container"},b,n,h,p,f):null;return g.tsx("div",{key:"",class:"esri-direct-line-measurement-3d esri-widget esri-widget--panel",role:"presentation"},n)};n.prototype._newMeasurement=function(){this.clearMeasurement()};n.prototype._changeUnit=function(a){a=a.target;if(a=a.options[a.selectedIndex])this.unit=a.value};a([h.aliasOf("viewModel.view")],n.prototype,"view",void 0);
a([h.aliasOf("viewModel.visible"),g.renderable()],n.prototype,"visible",void 0);a([h.property({type:x}),g.renderable(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurement"])],n.prototype,"viewModel",void 0);a([h.aliasOf("viewModel.unitOptions")],n.prototype,"unitOptions",void 0);a([h.aliasOf("viewModel.unit")],n.prototype,"unit",void 0);a([h.aliasOf("viewModel.clearMeasurement")],n.prototype,"clearMeasurement",null);a([g.accessibleHandler()],n.prototype,"_newMeasurement",
null);a([g.accessibleHandler()],n.prototype,"_changeUnit",null);return n=a([h.subclass("esri.widgets.DirectLineMeasurement3D")],n)}(h.declared(p))})},"esri/widgets/DirectLineMeasurement3D/DirectLineMeasurement3DViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/scaleUtils ../../views/3d/interactive/interactiveToolUtils ../../views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u){var b="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),t=p.getLogger("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel");return function(m){function p(a){a=m.call(this,a)||this;a._handles=new h;a._userUnitOptions=null;a._userUnit=null;a.view=null;a.visible=!0;a.tool=null;return a}q(p,m);p.prototype.initialize=function(){var a=this;this._handles.add([x.init(this,["view.ready","visible"],function(){var b=
a.view&&a.view.ready;b&&!a.tool&&a._set("tool",new u({view:a.view,unit:a.unit}));a._toggleTool();b||a._set("tool",null)}),x.init(this,"unit",function(b){a.tool&&(a.tool.unit=b)})])};p.prototype.destroy=function(){n.toggle(this.view,this.tool,!1);this._set("tool",null);this.view=null;this._handles.destroy();this._handles=null};Object.defineProperty(p.prototype,"state",{get:function(){var a=!!this.get("view.ready"),b=this.get("view.type");if(a&&"3d"===b)return this.get("tool.isMeasuring")?"measuring":
"ready";a&&"3d"!==b&&t.error("DirectLineMeasurement3D widget is not implemented for MapView");return"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"isSupported",{get:function(){return"3d"===this.get("view.type")},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"measurement",{get:function(){if(!this.tool)return null;var a=this.tool.model,b=a.measurementMode,f="geodesic"===b,a=a.validMeasurement;return{mode:b,directDistance:{text:f?null:this.tool.triangleView.directLabel,
state:a&&!f?"available":"unavailable"},horizontalDistance:{text:this.tool.triangleView.horizontalLabel,state:a?"available":"unavailable"},verticalDistance:{text:this.tool.triangleView.verticalLabel,state:a?"available":"unavailable"}}},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"defaultUnit",{get:function(){return this.defaultUnitFromPortal||this.defaultUnitFromSpatialReference||"metric"},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"defaultUnitFromSpatialReference",
{get:function(){return f.getDefaultUnitSystem(this.view&&this.view.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"defaultUnitFromPortal",{get:function(){var a=this.get("view.map.portalItem.portal");if(!a)return null;switch(a.user&&a.user.units||a.units){case "metric":return"metric";case "english":return"imperial";default:return null}},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"unitOptions",{get:function(){return this._filteredOrAllUnits(this._userUnitOptions)},
set:function(a){this._userUnitOptions=a;this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"unit",{get:function(){return this._userUnit?this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit):this._findSelectableUnit(this.defaultUnit)},set:function(a){this._userUnit=a?this._findSelectableUnit(a,this._userUnit):null;this.notifyChange("unit")},enumerable:!0,configurable:!0});p.prototype.clearMeasurement=
function(){this.tool&&this.tool.clearMeasurement()};p.prototype._toggleTool=function(){n.toggle(this.view,this.tool,this.visible)||this.tool&&"measured"!==this.tool.model.state&&this.clearMeasurement()};p.prototype._findSelectableUnit=function(a,b){var f=this.unitOptions;return-1!==f.indexOf(a)?a:b?this._findSelectableUnit(b):f[0]};p.prototype._filteredOrAllUnits=function(a){if(!a)return b.slice();a=a.filter(function(a){return-1!==b.indexOf(a)});return 0===a.length?b.slice():a};a([g.property({dependsOn:["view.ready",
"tool.isMeasuring"],readOnly:!0})],p.prototype,"state",null);a([g.property({dependsOn:["view.type"],readOnly:!0})],p.prototype,"isSupported",null);a([g.property()],p.prototype,"view",void 0);a([g.property({dependsOn:"view.ready tool.triangleView tool.model.directDistance tool.model.horizontalDistance tool.model.verticalDistance tool.model.geodesicDistance tool.model.measurementMode".split(" "),readOnly:!0})],p.prototype,"measurement",null);a([g.property()],p.prototype,"visible",void 0);a([g.property({readOnly:!0})],
p.prototype,"tool",void 0);a([g.property({readOnly:!0,dependsOn:["defaultUnitFromPortal","defaultUnitFromSpatialReference"]})],p.prototype,"defaultUnit",null);a([g.property({readOnly:!0,dependsOn:["view.spatialReference"]})],p.prototype,"defaultUnitFromSpatialReference",null);a([g.property({readOnly:!0,dependsOn:["view.map.portalItem.portal.units","view.map.portalItem.portal.user.units"]})],p.prototype,"defaultUnitFromPortal",null);a([g.property({dependsOn:["view.spatialReference"]})],p.prototype,
"unitOptions",null);a([g.property({dependsOn:["unitOptions","defaultUnit"]})],p.prototype,"unit",null);a([g.property()],p.prototype,"clearMeasurement",null);return p=a([g.subclass("esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel")],p)}(g.declared(m))})},"esri/views/3d/interactive/interactiveToolUtils":function(){define(["require","exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});w.toggle=function(q,a,m){if(q){if(q.ready&&a&&(q.activeTool!==a&&!1!==m||
!0===m))return q.activeTool=a,!0;q.activeTool===a&&(q.activeTool=null)}return!1}})},"esri/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/restHelper ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators ./DirectLineMeasurement3DController ./DirectLineMeasurement3DModel ./DirectLineMeasurement3DView".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(h){function n(a){var b=h.call(this)||this;b.model=new g({sceneView:a.view});return b}q(n,h);n.prototype.normalizeCtorArgs=function(a){return m(a,["view"])};n.prototype.initialize=function(){this._view=new f(this.model);this._controller=new x(this.model,this._view)};n.prototype.activate=function(){this._controller.activate(this.model.sceneView);this._view.show()};n.prototype.deactivate=function(){this._controller.deactivate();this._view.hide()};n.prototype.reset=
function(){this.model.reset()};n.prototype.clearMeasurement=function(){this.model.clearMeasurement()};a([p.property({constructOnly:!0})],n.prototype,"model",void 0);a([p.aliasOf("model.mode")],n.prototype,"mode",void 0);a([p.aliasOf("model.unit")],n.prototype,"unit",void 0);a([p.aliasOf("model.directDistance")],n.prototype,"directDistance",void 0);a([p.aliasOf("model.isMeasuring")],n.prototype,"isMeasuring",void 0);a([p.aliasOf("model.validMeasurement")],n.prototype,"validMeasurement",void 0);a([p.aliasOf("model.horizontalDistance")],
n.prototype,"horizontalDistance",void 0);a([p.aliasOf("model.verticalDistance")],n.prototype,"verticalDistance",void 0);a([p.aliasOf("model.geodesicDistance")],n.prototype,"geodesicDistance",void 0);a([p.aliasOf("model.geodesicAngle")],n.prototype,"geodesicAngle",void 0);a([p.aliasOf("model.triangleView")],n.prototype,"triangleView",void 0);return n=a([p.subclass("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool")],n)}(p.declared(h))})},"esri/core/tsSupport/restHelper":function(){define([],
function(){return function(B,w){var q={},a;for(a in B)Object.prototype.hasOwnProperty.call(B,a)&&0>w.indexOf(a)&&(q[a]=B[a]);if(null!=B&&"function"===typeof Object.getOwnPropertySymbols){var m=0;for(a=Object.getOwnPropertySymbols(B);m<a.length;m++)0>w.indexOf(a[m])&&(q[a[m]]=B[a[m]])}return q}})},"esri/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../geometry ../../../../../core/Handles ./DirectLineMeasurement3DView".split(" "),
function(B,w,q,a,m,h,p){function x(a){return"mouse"!==a.pointerType||0===a.button}return function(){function a(a,g){this._dragHandles={};this._viewEventHandles=new h;this._cachedPickRequest=new p.PickRequest;this._cachedPickResult=new p.PickResult;this._isAnyPointerDown=!1;this.model=a;this.view=g;this.model.reset()}a.prototype.activate=function(a){var f=this,g=this._viewEventHandles;g.add(a.on("immediate-click",function(a){return f._handleImmediateClick(a)}));g.add(a.on("click",function(a){return f._handleClick(a)}));
g.add(a.on("double-click",function(a){return f._handleDoubleClick(a)}));g.add(a.on("drag",function(a){return f._handleDrag(a)}));g.add(a.on("pointer-move",function(a){return f._handlePointerMove(a)}));g.add(a.on("pointer-down",function(a){return f._handlePointerDown(a)}));g.add(a.on("pointer-up",function(a){return f._handlePointerUp(a)}));g.add(a.on("pointer-drag",function(a){return f._handlePointerDrag(a)}));g.add(a.on("key-down",function(a){return f._handleKeyDown(a)}))};a.prototype.deactivate=
function(){this._viewEventHandles.removeAll()};a.prototype._handleDrag=function(a){0!==this.model.draggedHandles.length&&a.stopPropagation()};a.prototype._handlePointerMove=function(a){this._clearCachedPickRequest();var f=new m.ScreenPoint({x:a.x,y:a.y});"mouse"===a.pointerType&&(this._hoverAt(f),"drawing"===this.model.state&&(this._endAt(f,a.pointerType),a.stopPropagation()))};a.prototype._handlePointerDown=function(a){this._clearCachedPickRequest();this._isAnyPointerDown=!0;if(x(a)){var f=new m.ScreenPoint({x:a.x,
y:a.y}),f=this.view.handleAt(f,a.pointerType);"drawing"===this.model.state||!f||f in this._dragHandles||(this._dragHandles[a.pointerId]=f,this.model.draggedHandles.push(f));0<this.model.draggedHandles.length&&"measured"===this.model.state&&(this.model.state="editing")}};a.prototype._handlePointerUp=function(a){this._clearCachedPickRequest();this._isAnyPointerDown=!1;if(x(a)){var f=new m.ScreenPoint({x:a.x,y:a.y}),g=this._dragHandles[a.pointerId];g&&(delete this._dragHandles[a.pointerId],this.model.draggedHandles.remove(g),
0===this.model.draggedHandles.length&&this.model.finishedMeasurement({cameraAboveGround:this.view.cameraAboveGround}),this._updateHoveredHandle(f,a.pointerType));0===this.model.draggedHandles.length&&"editing"===this.model.state&&(this.model.state="measured")}};a.prototype._handlePointerDrag=function(a){this._clearCachedPickRequest();if(x(a)){var f=new m.ScreenPoint({x:a.x,y:a.y}),g=this._dragHandles[a.pointerId];if(null!=g){switch(a.action){case "update":this._moveHandleTo(g,f,a.pointerType);break;
case "end":delete this._dragHandles[a.pointerId],this.model.draggedHandles.remove(g)}a.stopPropagation()}}};a.prototype._handleImmediateClick=function(a){this._clearCachedPickRequest();if(x(a)){var f=new m.ScreenPoint({x:a.x,y:a.y});switch(this.model.state){case "initial":if(this._startAt(f,a.pointerType)){this.model.state="drawing";a.stopPropagation();return}break;case "drawing":if(this._endAt(f,a.pointerType)){this.model.finishedMeasurement({cameraAboveGround:this.view.cameraAboveGround});a.stopPropagation();
return}break;case "measured":if(null===this.view.handleAt(f,a.pointerType)&&(this.model.clearMeasurement(),this._startAt(f,a.pointerType))){this.model.state="drawing";a.stopPropagation();return}}"mouse"===a.pointerType&&this._hoverAt(f)}};a.prototype._handleClick=function(a){x(a)&&a.stopPropagation()};a.prototype._handleDoubleClick=function(a){x(a)&&a.stopPropagation()};a.prototype._handleKeyDown=function(a){"Escape"===a.key&&"drawing"===this.model.state&&(this.model.clearMeasurement(),a.stopPropagation())};
a.prototype._hoverAt=function(a){this._updateHoveredHandle(a,"mouse");var f=this._isAnyPointerDown&&"drawing"!==this.model.state&&"editing"!==this.model.state;this.view.requiresCursorPoint&&!f?(a=this._pick(a),a.mapPoint&&(this.model.cursorPoint=a.mapPoint)):this.model.cursorPoint=null};a.prototype._startAt=function(a,g){var f=this._pick(a);if(f.mapPoint)return this.model.startPoint=f.mapPoint,this.model.startPointSurfaceLocation=this._surfaceLocation(f.mapPoint,f.type),this.model.hoveredHandle="touch"!==
g?"start":null,!0;this._updateHoveredHandle(a,g);return!1};a.prototype._endAt=function(a,g){var f=this._pick(a);if(f.mapPoint&&!this.view.overlappingHandles(f.mapPoint,this.model.startPoint))return this.model.endPoint=f.mapPoint,this.model.endPointSurfaceLocation=this._surfaceLocation(f.mapPoint,f.type),this.model.hoveredHandle="touch"!==g?"end":null,!0;this._updateHoveredHandle(a,g);return!1};a.prototype._moveHandleTo=function(a,g,h){g=this._clipToScreen(g);var b=this._pick(g);if(b.mapPoint)if("start"===
a){if(!this.view.overlappingHandles(b.mapPoint,this.model.endPoint))return this.model.startPoint=b.mapPoint,this.model.startPointSurfaceLocation=this._surfaceLocation(b.mapPoint,b.type),this.model.hoveredHandle="touch"!==h?"start":null,!0}else if("end"===a&&!this.view.overlappingHandles(b.mapPoint,this.model.startPoint))return this.model.endPoint=b.mapPoint,this.model.endPointSurfaceLocation=this._surfaceLocation(b.mapPoint,b.type),this.model.hoveredHandle="touch"!==h?"end":null,!0;this._updateHoveredHandle(g,
h);return!1};a.prototype._pick=function(a){var f=this._cachedPickRequest.screenPoint;if(f&&f.x===a.x&&f.y===a.y)return this._cachedPickResult;this._cachedPickRequest.screenPoint=a;return this._cachedPickResult=this.view.pick(this._cachedPickRequest)};a.prototype._clearCachedPickRequest=function(){this._cachedPickRequest.screenPoint=null};a.prototype._clipToScreen=function(a){return new m.ScreenPoint({x:Math.max(0,Math.min(this.model.sceneView.width,a.x)),y:Math.max(0,Math.min(this.model.sceneView.height,
a.y))})};a.prototype._updateHoveredHandle=function(a,g){this.model.hoveredHandle="touch"!==g?this.view.handleAt(a,g):null};a.prototype._surfaceLocation=function(a,g){return"surface"===g?"on-the-surface":a.z>=this.view.getElevation(a)?"above-the-surface":"below-the-surface"};return a}()})},"esri/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DView":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Handles ../../../../../core/StackedObjectPool ./LaserLineRenderer ../support/Label ../support/LabelSegment ../support/labelUtils ../support/PathSegmentInterpolator ../support/viewUtils ../../../lib/gl-matrix ../../../support/mathUtils ../../../webgl-engine/lib/Geometry ../../../webgl-engine/lib/GeometryData ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Layer ../../../webgl-engine/lib/Object3D ../../../webgl-engine/lib/Selector ../../../webgl-engine/materials/ColorMaterial ../../../webgl-engine/materials/DefaultMaterial ../../../webgl-engine/materials/MeasurementArrowMaterial ../../../webgl-engine/materials/RibbonLineMaterial ../../../webgl-engine/parts/Model".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I,M){var N=new h(function(){return b.vec3d.create()});B=[1,.5,0,.75];var P={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,triangleColor:B,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,
.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:B,guideLineWidth:2,guideLineColor:B,guideStippleLengthPixels:6,labelDistance:25},S;(function(a){a[a.Small=12]="Small";a[a.Large=16]="Large"})(S||(S={}));B=function(){function a(a,f){void 0===f&&(f={});this._visible=!1;this._laserLineRenderer=null;this._handleGeometry=new D(C.createSphereGeometry(1,32,32),"handle");
this._directDistanceLabel=new x;this._horizontalDistanceLabel=new x;this._verticalDistanceLabel=new x;this._listenerHandles=null;this._cursorPosition=b.vec3d.create();this._startPosition=b.vec3d.create();this._endPosition=b.vec3d.create();this._centerPosition=b.vec3d.create();this._cornerPosition=b.vec3d.create();this._arrowLabelSegment=new g;this._horizontalLabelSegment=new g;this._verticalLabelSegment=new g;this._geodesicProjectionLabelSegment=new g;this._origin=b.vec3d.create();this._originTransform=
b.mat4d.create();this._tempMat4=b.mat4d.create();this._model=a;this._sceneView=a.sceneView;this._params=u.copyParameter(P,f);this._layer=new A("point-to-point-measurement",{},"point-to-point-measurement");this._createMaterials();this._createObjects();this._selector=new H(this._sceneView.viewingMode)}a.prototype.destroy=function(){this.hide()};Object.defineProperty(a.prototype,"requiresCursorPoint",{get:function(){return"initial"===this._model.state},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"cameraAboveGround",{get:function(){return this._sceneView.state.camera.aboveGround},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){a?this.show():this.hide()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"testData",{get:function(){return{labels:{direct:this._directDistanceLabel,horizontal:this._horizontalDistanceLabel,vertical:this._verticalDistanceLabel},laserLineRenderer:this._laserLineRenderer}},
enumerable:!0,configurable:!0});a.prototype.show=function(){if(!this._visible){this._visible=!0;var a=this._sceneView._stage;this._laserLineRenderer=new p(this._sceneView.renderCoordsHelper,{glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,globalAlpha:this._params.laserLineGlobalAlpha});a.addRenderPlugin(this._laserLineRenderer.renderSlots,this._laserLineRenderer);this._addToStage(a);
this._directDistanceLabel.addToView(this._sceneView);this._horizontalDistanceLabel.addToView(this._sceneView);this._verticalDistanceLabel.addToView(this._sceneView);this._initializeListeners();this._updateCursorPosition();this._updateStartPosition();this._updateEndPosition();this._updateMouseCursor();this._updateView()}};a.prototype.hide=function(){if(this._visible){this._visible=!1;var a=this._sceneView._stage;a.removeRenderPlugin(this._laserLineRenderer);this._laserLineRenderer=null;this._removeFromStage(a);
this._directDistanceLabel.removeFromView(this._sceneView);this._horizontalDistanceLabel.removeFromView(this._sceneView);this._verticalDistanceLabel.removeFromView(this._sceneView);this._destroyListeners();this._sceneView.cursor=null}};a.prototype.handleAt=function(a,b){a=a.toArray();b="touch"===b?this._params.handleRadiusTouch:this._params.handleRadiusMouse;return this._model.endPoint&&u.pointToScreenPositionDistance(this._model.endPoint,a,this._sceneView)<b?"end":this._model.startPoint&&u.pointToScreenPositionDistance(this._model.startPoint,
a,this._sceneView)<b?"start":null};a.prototype.pick=function(f){for(var g=new Set,h=this._sceneView._stage.getViewContent(),m=this._sceneView._stage.getAll(M.ContentType.LAYER),n=0;n<h.length;n++){var l=m[h[n]];l&&l!==this._layer&&l.isPickable&&g.add(l.id)}h=this._sceneView.spatialReference;f=[f.screenPoint.x,this._sceneView.height-f.screenPoint.y];m=this._sceneView.sceneIntersectionHelper.pickSelectorInScreen(f,this._selector,g,!0);m=m.minResult;g=b.vec3d.create();this._sceneView.basemapTerrain.isSeeThrough()&&
!m.getIntersectionPoint(g)&&(m=this._sceneView.sceneIntersectionHelper.pickSelectorInScreen(f,this._selector,null,!1),m=m.minResult);if(!m.getIntersectionPoint(g))return new a.PickResult;f=this._sceneView.renderCoordsHelper.fromRenderCoords(g,h);return new a.PickResult("TerrainRenderer"===m.intersector?"surface":"feature",g,f)};a.prototype.getElevation=function(a){return this._sceneView.basemapTerrain.ready?this._sceneView.basemapTerrain.getElevation(a)||0:0};a.prototype.overlappingHandles=function(a,
b){return u.pointToPointScreenDistance(a,b,this._sceneView)<=this._params.handleRadius};a.prototype._createMaterials=function(){this._handleMaterial=new K({diffuse:this._params.handleColor,transparent:1!==this._params.handleOpacity,opacity:this._params.handleOpacity,castShadows:!1},"handle");this._handleMaterial.renderOccluded=!0;this._triangleLineMaterial=new I({width:this._params.triangleLineWidth,color:this._params.triangleColor,polygonOffset:!0},"triangle-line");this._triangleLineMaterial.renderOccluded=
!0;this._triangleCornerMaterial=new Q({color:this._params.triangleColor,transparent:!0,polygonOffset:!0},"triangle-corner");this._triangleCornerMaterial.renderOccluded=!0;this._arrowMaterial=new y({outlineColor:this._params.arrowOutlineColor,stripeEvenColor:this._params.arrowStripeEvenColor,stripeOddColor:this._params.arrowStripeOddColor,polygonOffset:!0},"arrow");this._arrowMaterial.renderOccluded=!0;this._geodesicProjectionLineMaterial=new I({width:this._params.geodesicProjectionLineWidth,color:this._params.geodesicProjectionLineColor,
polygonOffset:!0},"geodesic-line");this._geodesicProjectionLineMaterial.renderOccluded=!0;this._geodesicGuideLineMaterial=new I({width:this._params.guideLineWidth,color:this._params.geodesicProjectionLineColor,polygonOffset:!0,stippleLength:0},"geodesic-guide");this._geodesicGuideLineMaterial.renderOccluded=!0};a.prototype._createObjects=function(){this._startHandleObject=new F;this._startHandleObject.addGeometry(this._handleGeometry,[this._handleMaterial],b.mat4d.identity());this._layer.addObject(this._startHandleObject);
this._endHandleObject=new F;this._endHandleObject.addGeometry(this._handleGeometry,[this._handleMaterial],b.mat4d.identity());this._layer.addObject(this._endHandleObject);this._triangleLineObject=new F;this._layer.addObject(this._triangleLineObject);this._triangleCornerObject=new F;this._layer.addObject(this._triangleCornerObject);this._arrowObject=new F;this._layer.addObject(this._arrowObject);this._geodesicProjectionLineObject=new F;this._layer.addObject(this._geodesicProjectionLineObject);this._geodesicProjectionStartGuideObject=
new F;this._layer.addObject(this._geodesicProjectionStartGuideObject);this._geodesicProjectionEndGuideObject=new F;this._layer.addObject(this._geodesicProjectionEndGuideObject)};a.prototype._addToStage=function(a){a.add(M.ContentType.LAYER,this._layer);a.add(M.ContentType.MATERIAL,this._handleMaterial);a.add(M.ContentType.MATERIAL,this._triangleLineMaterial);a.add(M.ContentType.MATERIAL,this._triangleCornerMaterial);a.add(M.ContentType.MATERIAL,this._arrowMaterial);a.add(M.ContentType.MATERIAL,this._geodesicProjectionLineMaterial);
a.add(M.ContentType.MATERIAL,this._geodesicGuideLineMaterial);a.add(M.ContentType.OBJECT,this._startHandleObject);a.add(M.ContentType.OBJECT,this._endHandleObject);a.add(M.ContentType.OBJECT,this._triangleLineObject);a.add(M.ContentType.OBJECT,this._triangleCornerObject);a.add(M.ContentType.OBJECT,this._arrowObject);a.add(M.ContentType.OBJECT,this._geodesicProjectionLineObject);a.add(M.ContentType.OBJECT,this._geodesicProjectionStartGuideObject);a.add(M.ContentType.OBJECT,this._geodesicProjectionEndGuideObject);
a.addToViewContent([this._layer.id])};a.prototype._removeFromStage=function(a){a.removeFromViewContent([this._layer.id]);a.remove(M.ContentType.LAYER,this._layer.id);a.remove(M.ContentType.MATERIAL,this._handleMaterial.id);a.remove(M.ContentType.MATERIAL,this._triangleLineMaterial.id);a.remove(M.ContentType.MATERIAL,this._triangleCornerMaterial.id);a.remove(M.ContentType.MATERIAL,this._arrowMaterial.id);a.remove(M.ContentType.MATERIAL,this._geodesicProjectionLineMaterial.id);a.remove(M.ContentType.MATERIAL,
this._geodesicGuideLineMaterial.id);a.remove(M.ContentType.OBJECT,this._startHandleObject.id);a.remove(M.ContentType.OBJECT,this._endHandleObject.id);a.remove(M.ContentType.OBJECT,this._triangleLineObject.id);a.remove(M.ContentType.OBJECT,this._triangleCornerObject.id);a.remove(M.ContentType.OBJECT,this._arrowObject.id);a.remove(M.ContentType.OBJECT,this._geodesicProjectionLineObject.id);a.remove(M.ContentType.OBJECT,this._geodesicProjectionStartGuideObject.id);a.remove(M.ContentType.OBJECT,this._geodesicProjectionEndGuideObject.id)};
a.prototype._getLabelPositions=function(a,g,h,m,n){var l=this._model.triangleView.collapsed;N.push();var p=N.allocate(),z=N.allocate();n.projectPoint(h,p);n.projectPoint(g,z);p={direct:l?"top":"bottom",horizontal:"top",vertical:p[0]<z[0]?"left":"right"};l||(z=N.allocate(),l=N.allocate(),u.screenSpaceTangent(a,h,z,n),u.screenSpaceTangent(a,g,l,n),b.vec2d.dot(z,l)>=O?p.direct=t.sign(z[1])===t.sign(l[1])?f.mirrorPosition(p.vertical):p.vertical:(a=N.allocate(),u.screenSpaceTangent(h,g,a,n),b.vec2d.dot(a,
l)>=O&&(p.direct=t.sign(a[0])===t.sign(l[0])?f.mirrorPosition(p.horizontal):p.horizontal)));"below-the-surface"===m&&(g=function(d){return"top"===d?"bottom":"top"},p.direct=g(p.direct),p.horizontal=g(p.horizontal),p.vertical=g(p.vertical));N.pop();return p};a.prototype._updateView=function(){var a;if(this._sceneView.ready){var f=this._sceneView._stage.getCamera(),g=this._sceneView.renderCoordsHelper;this._updateHandleObject(this._startHandleObject,this._startPosition,null!==this._model.startPoint,
"start"===this._model.hoveredHandle,this._model.draggedHandles.includes("start"),f);this._updateHandleObject(this._endHandleObject,this._endPosition,null!==this._model.endPoint,"end"===this._model.hoveredHandle,this._model.draggedHandles.includes("end"),f);var h=this._model.triangleView;if(h.visible){var m="camera-dependent"===this._model.measurementSurfaceLocation?this._sceneView.state.camera.aboveGround?"above-the-surface":"below-the-surface":this._model.measurementSurfaceLocation,l=this._startPosition;
a=this._endPosition;var n="above-the-surface"===m?1:-1,z=n*(g.getAltitude(a)-g.getAltitude(l));0>z&&(a=[a,l],l=a[0],a=a[1]);var d=this._cornerPosition;g.worldUpAtPosition(l,d);b.vec3d.scale(d,n*Math.abs(z));b.vec3d.add(d,l);g=this._centerPosition;u.midpoint([l,a,d],g);b.vec3d.set(g,this._origin);b.mat4d.identity(this._originTransform);b.mat4d.translate(this._originTransform,this._origin);h.collapsed?(this._triangleLineObject.removeAllGeometries(),this._triangleCornerObject.removeAllGeometries()):
this._updateTriangleObjects(this._triangleLineObject,this._triangleCornerObject,l,a,d,this._origin,this._originTransform,f,h.mode,this._horizontalLabelSegment,this._verticalLabelSegment);this._updateArrowObject(this._arrowObject,this._startPosition,this._endPosition,this._origin,this._originTransform,h.stripeLength,f,h.mode,this._arrowLabelSegment);g=this._requiresGeodesicGuides(this._startPosition,this._endPosition,f,h.mode);this._updateGeodesicProjectionLineObject(this._geodesicProjectionLineObject,
this._startPosition,this._endPosition,this._origin,this._originTransform,g,this._geodesicProjectionLabelSegment);this._updateGeodesicProjectionGuideObjects(f,g);n=this._params.labelDistance;m=this._getLabelPositions(l,a,d,m,f);this._updateAuxiliaryMeasureLabels(h,f,m);"geodesic"!==h.mode?this._updateLabel(this._directDistanceLabel,this._arrowLabelSegment,n,m.direct,h.directLabel,h.visible,S.Large,f):(this._updateLabel(this._horizontalDistanceLabel,g?this._geodesicProjectionLabelSegment:this._arrowLabelSegment,
n,m.horizontal,h.horizontalLabel,h.visible,S.Large,f),this._directDistanceLabel.visible=!1)}else this._triangleLineObject.removeAllGeometries(),this._triangleCornerObject.removeAllGeometries(),this._arrowObject.removeAllGeometries(),this._geodesicProjectionLineObject.removeAllGeometries(),this._geodesicProjectionStartGuideObject.removeAllGeometries(),this._geodesicProjectionEndGuideObject.removeAllGeometries(),this._directDistanceLabel.visible=!1,this._horizontalDistanceLabel.visible=!1,this._verticalDistanceLabel.visible=
!1}};a.prototype._updateAuxiliaryMeasureLabels=function(a,b,f){if(a.collapsed)this._horizontalDistanceLabel.visible=!1,this._verticalDistanceLabel.visible=!1;else{var g=this._params.labelDistance;this._updateLabel(this._horizontalDistanceLabel,this._horizontalLabelSegment,g,f.horizontal,a.horizontalLabel,!0,S.Small,b);this._updateLabel(this._verticalDistanceLabel,this._verticalLabelSegment,g,f.vertical,a.verticalLabel,!0,S.Small,b)}};a.prototype._updateHandleObject=function(a,b,f,g,h,l){a.removeAllGeometries();
f&&!h&&(u.scaleTranslateMatrix((g?this._params.handleRadiusHovered:this._params.handleRadius)*l.computePixelSizeAt(b),b,this._tempMat4),a.addGeometry(this._handleGeometry,[this._handleMaterial],this._tempMat4))};a.prototype._updateTriangleObjects=function(a,f,g,h,m,l,n,z,d,c,e){N.push();d=[b.vec3d.subtract(g,l,N.allocate()),b.vec3d.subtract(m,l,N.allocate()),b.vec3d.subtract(h,l,N.allocate())];c.update(m,h);e.update(g,m);c=new D(C.createPolylineGeometry(d),"triangle-line");a.removeAllGeometries();
a.addGeometry(c,[this._triangleLineMaterial],n);a=N.allocate();c=N.allocate();b.vec3d.subtract(m,g,a);b.vec3d.normalize(a,a);b.vec3d.subtract(h,m,c);b.vec3d.normalize(c,c);g=.33*Math.min(b.vec3d.dist(m,g),b.vec3d.dist(m,h));z=this._params.triangleCornerSize*z.computePixelSizeAt(m);m=new D(this._quadGeometryData(m,a,c,Math.min(g,z),l),"triangle-corner");f.removeAllGeometries();f.addGeometry(m,[this._triangleCornerMaterial],n);N.pop()};a.prototype._updateArrowObject=function(a,b,f,g,h,l,m,z,d){this._createInterpolatedLineGeometry(a,
this._arrowMaterial,"arrow",b,f,g,h,z,this._arrowLabelSegment);a=m.computePixelSizeAt(d.origin);this._arrowMaterial.setParameterValues({width:this._params.arrowWidth*a,stripeLength:l})};a.prototype._getSegmentInterpolator=function(a,b){var f=this._sceneView.spatialReference,g=this._sceneView.renderCoordsHelper.spatialReference;return f.isWebMercator||f.isWGS84?new n.Spherical(a,b,g,g):new n.Linear(a,b)};a.prototype._updateGeodesicProjectionLineObject=function(a,f,g,h,m,l,n){l?(N.push(),l=this._sceneView.renderCoordsHelper,
f=b.vec3d.set(f,N.allocate()),g=b.vec3d.set(g,N.allocate()),l.setAltitude(0,f),l.setAltitude(0,g),this._createInterpolatedLineGeometry(a,this._geodesicProjectionLineMaterial,"geodesicProjectionLine",f,g,h,m,"geodesic",n),N.pop()):a.removeAllGeometries()};a.prototype._requiresGeodesicGuides=function(a,b,f,g){return"geodesic"===g&&this._model.geodesicDistanceExceeded?this._requiresGeodesicGuideAt(a,f)||this._requiresGeodesicGuideAt(b,f):!1};a.prototype._requiresGeodesicGuideAt=function(a,b){var f=this._sceneView.renderCoordsHelper;
b=b.computePixelSizeAt(a);return 10<=f.getAltitude(a)/b};a.prototype._updateGeodesicProjectionGuideObjects=function(a,f){if(f){N.push();f=this._sceneView.renderCoordsHelper;var g=b.vec3d.set(this._startPosition,N.allocate()),h=b.vec3d.set(this._endPosition,N.allocate());f.setAltitude(0,g);f.setAltitude(0,h);this._createInterpolatedLineGeometry(this._geodesicProjectionStartGuideObject,this._geodesicGuideLineMaterial,"geodesicGuideLine",g,this._startPosition,this._origin,this._originTransform,"euclidean");
this._createInterpolatedLineGeometry(this._geodesicProjectionEndGuideObject,this._geodesicGuideLineMaterial,"geodesicGuideLine",h,this._endPosition,this._origin,this._originTransform,"euclidean");a=Math.min(a.computePixelSizeAt(this._startPosition),a.computePixelSizeAt(g),a.computePixelSizeAt(this._endPosition),a.computePixelSizeAt(h));this._geodesicGuideLineMaterial.setParameterValues({stippleLength:this._params.guideStippleLengthPixels*a});N.pop()}else this._geodesicProjectionStartGuideObject.removeAllGeometries(),
this._geodesicProjectionEndGuideObject.removeAllGeometries()};a.prototype._createInterpolatedLineGeometry=function(a,f,g,h,m,l,n,z,d){N.push();var c=this._sceneView.renderCoordsHelper,e=[],k=[],r=function(c,d){var r=N.allocate();b.vec3d.subtract(c,l,r);e.push(r);k.push(d)};if("euclidean"===z){var v=N.allocate();u.midpoint([h,m],v);z=N.allocate();c.worldUpAtPosition(v,z);r(h,z);r(m,z);d&&d.update(h,m)}else{h=this._getSegmentInterpolator(h,m);m=this._params.arrowSubdivisions+1&-2;for(var G=v=null,J=
0;J<m;++J){var L=J/(m-1),U=N.allocate();z=N.allocate();h.eval(L,U);c.worldUpAtPosition(U,z);J===m/2-1?v=U:J===m/2&&(G=U);r(U,z)}d&&d.update(v,G)}g=new D(C.createPolylineGeometry(e,k),g);a.removeAllGeometries();a.addGeometry(g,[f],n);N.pop()};a.prototype._quadGeometryData=function(a,f,g,h,m){N.push();var l=N.allocate(),n=[],z=N.allocate();b.vec3d.scale(g,h,z);g=N.allocate();b.vec3d.scale(f,-h,g);for(f=0;4>f;++f)b.vec3d.set(a,l),b.vec3d.subtract(l,m),f&1&&b.vec3d.add(l,z),f&2&&b.vec3d.add(l,g),n.push(l[0],
l[1],l[2]);a=new E({position:{size:3,data:n}},{position:new Uint32Array([0,1,2,1,2,3])});N.pop();return a};a.prototype._updateLabel=function(a,b,g,h,m,l,n,z){N.push();var d=N.allocate(),c=N.allocate();b=f.computeLabelPositionFromSegment(z,b,g,h,d,c);a.updatePosition(d,c);a.text=m;a.visible=b&&l;a.fontSize=n;N.pop()};a.prototype._updateMouseCursor=function(){if("drawing"===this._model.state||"initial"===this._model.state)this._sceneView.cursor="crosshair";else if("editing"===this._model.state||"measured"===
this._model.state)this._sceneView.cursor=0<this._model.draggedHandles.length?"grabbing":this._model.hoveredHandle?"pointer":"crosshair"};a.prototype._updateCursorPosition=function(){this._model.cursorPoint&&this._sceneView.renderCoordsHelper.toRenderCoords(this._model.cursorPoint,this._cursorPosition);this._updateLaserLine()};a.prototype._updateStartPosition=function(){this._model.startPoint&&this._sceneView.renderCoordsHelper.toRenderCoords(this._model.startPoint,this._startPosition);this._updateLaserLine()};
a.prototype._updateEndPosition=function(){this._model.endPoint&&this._sceneView.renderCoordsHelper.toRenderCoords(this._model.endPoint,this._endPosition);this._updateLaserLine()};a.prototype._lastAddedDraggedHandle=function(){return 0<this._model.draggedHandles.length?this._model.draggedHandles.items[this._model.draggedHandles.length-1]:null};a.prototype._getFocusPosition=function(){var a=this._model,b=a.triangleView.visible&&a.triangleView.collapsed&&"euclidean"===a.measurementMode;switch(a.state){case "drawing":return b?
this._startPosition:a.endPoint?this._endPosition:this._startPosition;case "editing":return b?"start"===this._lastAddedDraggedHandle()?this._endPosition:this._startPosition:"start"===this._lastAddedDraggedHandle()?this._startPosition:this._endPosition;default:return a.cursorPoint?this._cursorPosition:null}};a.prototype._getFocusSpherePosition=function(){return"drawing"===this._model.state||"end"===this._lastAddedDraggedHandle()?this._startPosition:this._endPosition};a.prototype._updateLaserLine=function(){var a=
this._model,b=this._getFocusPosition(),f=this._params.laserLineEnabled&&!!b&&"measured"!==a.state;f?(this._laserLineRenderer.focusPlaneActive=f&&"euclidean"===a.measurementMode,this._laserLineRenderer.focusSphereActive=f&&!!a.startPoint&&"geodesic"===a.measurementMode,this._laserLineRenderer.focusPosition=b,this._laserLineRenderer.focusSpherePosition=this._getFocusSpherePosition(),this._laserLineRenderer.segmentActive=f&&a.triangleView.visible&&!a.triangleView.collapsed,this._laserLineRenderer.segmentStartPosition=
this._startPosition,this._laserLineRenderer.segmentEndPosition=this._endPosition):(this._laserLineRenderer.focusPlaneActive=!1,this._laserLineRenderer.focusSphereActive=!1,this._laserLineRenderer.segmentActive=!1)};a.prototype._initializeListeners=function(){var a=this;this._listenerHandles=new m;this._listenerHandles.add(this._model.watch("state",function(){a._updateMouseCursor();a._updateLaserLine()}));this._listenerHandles.add(this._model.watch("measurementMode",function(){a._updateLaserLine()}));
this._listenerHandles.add(this._model.watch("hoveredHandle",function(){a._updateMouseCursor();a._updateView()}));this._listenerHandles.add(this._model.draggedHandles.on("change",function(){a._updateMouseCursor();a._updateView()}));this._listenerHandles.add(this._model.watch("cursorPoint",function(){a._updateCursorPosition()}));this._listenerHandles.add(this._model.watch("startPoint",function(){a._updateStartPosition();a._updateView()}));this._listenerHandles.add(this._model.watch("endPoint",function(){a._updateEndPosition();
a._updateView()}));this._listenerHandles.add(this._model.watch("unit",function(){a._updateView()}));this._listenerHandles.add(this._sceneView.state.watch("camera",function(){a._updateView()}))};a.prototype._destroyListeners=function(){this._listenerHandles.destroy();this._listenerHandles=null};return a}();(function(a){var b=function(){return function(){}}();a.PickRequest=b;b=function(){return function(a,b,f){void 0===a&&(a=null);void 0===b&&(b=null);void 0===f&&(f=null);this.type=a;this.scenePoint=
b;this.mapPoint=f}}();a.PickResult=b})(B||(B={}));var O=Math.cos(t.deg2rad(12));return B})},"esri/core/StackedObjectPool":function(){define(["require","exports"],function(B,w){return function(){function q(a,m){void 0===m&&(m=0);this._pool=[];this._stack=[];this._index=0;this._factory=a;for(a=0;a<m;++a)this._pool.push(this._factory())}Object.defineProperty(q.prototype,"size",{get:function(){return this._pool.length},enumerable:!0,configurable:!0});q.prototype.push=function(){this._stack.push(this._index)};
q.prototype.pop=function(){if(0===this._stack.length)throw Error("cannot pop empty stack");this._index=this._stack.pop()};q.prototype.allocate=function(){if(0===this._stack.length)throw Error("cannot allocate with empty stack");this._index>=this._pool.length&&this._pool.push(this._factory());return this._pool[this._index++]};return q}()})},"esri/views/3d/interactive/measurementTools/directLineMeasurement3D/LaserLineRenderer":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../lib/gl-matrix ../../../webgl-engine/lib/glUtil3D ../../../webgl-engine/lib/RenderSlot ../../../webgl-engine/lib/Util ../../../webgl-engine/materials/internal/MaterialUtil ../../../webgl-engine/shaders/LaserLinePrograms ../../../../webgl/programUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f){function n(f,g,h,m){var n=u,p=b;a.mat4d.multiplyVec3(m,g,n);a.vec3d.set(h,p);p[3]=0;a.mat4d.multiplyVec4(m,p);a.vec4d.set4(p[0],p[1],p[2],-a.vec3d.dot(p,n),f)}var u=a.vec3d.create(),b=a.vec4d.create(),t={glowColor:[1,.5,0],glowWidth:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75};return function(){function b(b,f){void 0===f&&(f={});this._projInfo=a.vec4d.create();this._zScale=a.vec2d.create();this._segmentActive=this._focusSphereActive=this._focusPlaneActive=!1;this._focusPosition=
a.vec3d.create();this._focusSpherePosition=a.vec3d.create();this._segmentStartPosition=a.vec3d.create();this._segmentEndPosition=a.vec3d.create();this._needsRender=!1;this._tempNormal=a.vec3d.create();this._tempDir=a.vec3d.create();this._tempUp=a.vec3d.create();this._tempVec3=a.vec3d.create();this._tempVec4=a.vec4d.create();this.didRender=!1;this._renderCoordsHelper=b;this._params=x.copyParameters(f,t)}Object.defineProperty(b.prototype,"needsRender",{get:function(){return this._needsRender},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"renderSlots",{get:function(){return[h.POSTPROCESSING_EXTERNAL]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"needsLinearDepth",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"focusPlaneActive",{get:function(){return this._focusPlaneActive},set:function(a){a!==this._focusPlaneActive&&(this._focusPlaneActive=a,this._needsRender=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"focusSphereActive",{get:function(){return this._focusSphereActive},set:function(a){a!==this._focusSphereActive&&(this._focusSphereActive=a,this._needsRender=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"segmentActive",{get:function(){return this._segmentActive},set:function(a){a!==this._segmentActive&&(this._segmentActive=a,this._needsRender=!0)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"focusPosition",{get:function(){return this._focusPosition},
set:function(b){a.vec3d.set(b,this._focusPosition);this._needsRender=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"focusSpherePosition",{get:function(){return this._focusSpherePosition},set:function(b){a.vec3d.set(b,this._focusSpherePosition);this._needsRender=!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"segmentStartPosition",{get:function(){return this._segmentStartPosition},set:function(b){a.vec3d.set(b,this._segmentStartPosition);this._needsRender=
!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"segmentEndPosition",{get:function(){return this._segmentEndPosition},set:function(b){a.vec3d.set(b,this._segmentEndPosition);this._needsRender=!0},enumerable:!0,configurable:!0});b.prototype.setParameterValues=function(a){x.updateParameters(this._params,a)&&(this._needsRender=!0)};b.prototype.initializeRenderContext=function(a){a=a.rctx;this._quadVAO=m.createQuadVAO(a);this._laserLineProgram=f.createProgram(a,g.program)};b.prototype.uninitializeRenderContext=
function(a){this._quadVAO.dispose();this._quadVAO=null;this._laserLineProgram.dispose();this._projInfo=this._laserLineProgram=null};b.prototype.resetNeedsRender=function(){this.didRender&&(this._needsRender=this.didRender=!1)};b.prototype.render=function(b){var f=b.rctx,g=b.camera,h=this._renderCoordsHelper,m=this._laserLineProgram,t=this._projInfo,q=this._zScale;f.bindProgram(m);p.inverseProjectionInfo(g.projectionMatrix,g.fullWidth,g.fullHeight,t,q);m.setUniform4fv("projInfo",t);m.setUniform2fv("zScale",
q);m.setUniform2f("nearFar",g.near,g.far);m.setUniform1f("maxPixelDistance",2*g.computePixelSizeAt(this._focusPosition));if(this._focusPlaneActive){var t=this._focusPosition,q=this._tempVec3,y=this._tempVec4;h.worldUpAtPosition(t,q);n(y,t,q,g.viewMatrix);m.setUniform4fv("focusPlane",y)}else m.setUniform4fv("focusPlane",[0,0,0,1E10]);this._focusSphereActive?(q=this._tempVec4,t=this._tempVec3,a.vec3d.set(this._focusSpherePosition,q),a.mat4d.multiplyVec3(g.viewMatrix,q),a.vec3d.set(this._focusPosition,
t),a.mat4d.multiplyVec3(g.viewMatrix,t),q[3]=a.vec3d.dist(q,t),m.setUniform4fv("focusSphere",q)):m.setUniform4fv("focusSphere",[0,0,0,1E10]);if(this._segmentActive){var t=this._tempVec4,q=this._tempVec3,y=this._tempUp,x=this._tempDir,w=this._tempNormal;a.vec3d.lerp(this._segmentStartPosition,this._segmentEndPosition,.5,q);h.worldUpAtPosition(q,y);a.vec3d.subtract(this._segmentEndPosition,this._segmentStartPosition,x);a.vec3d.normalize(x);a.vec3d.cross(y,x,w);a.vec3d.normalize(w);n(t,this._segmentStartPosition,
w,g.viewMatrix);m.setUniform4fv("segmentPlane",t)}else m.setUniform4fv("segmentPlane",[0,0,0,1E10]);t=u;a.vec3d.set(this._segmentStartPosition,t);h.setAltitude(0,t);a.mat4d.multiplyVec3(g.viewMatrix,t);m.setUniform3fv("segmentStart",t);t=u;a.vec3d.set(this._segmentEndPosition,t);h.setAltitude(0,t);a.mat4d.multiplyVec3(g.viewMatrix,t);m.setUniform3fv("segmentEnd",t);m.setUniform1i("depthMap",0);f.bindTexture(b.depth.colorTexture,0);m.setUniform3fv("innerColor",this._params.innerColor);m.setUniform1f("innerWidth",
this._params.innerWidth);m.setUniform3fv("glowColor",this._params.glowColor);m.setUniform1f("glowWidth",this._params.glowWidth);m.setUniform1f("globalAlpha",this._params.globalAlpha);f.bindVAO(this._quadVAO);f.setDepthTestEnabled(!1);f.setDepthWriteEnabled(!1);f.setBlendFunctionSeparate(1,771,770,771);f.setBlendingEnabled(!0);f.drawArrays(5,0,4);f.setDepthTestEnabled(!0);f.setDepthWriteEnabled(!0);f.setBlendingEnabled(!1);return!0};return b}()})},"esri/views/3d/webgl-engine/shaders/LaserLinePrograms":function(){define(["require",
"exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(B,w,q,a){Object.defineProperty(w,"__esModule",{value:!0});w.program={name:"laserline",shaders:{vertexShader:a.resolveIncludes("util/quad.vert"),fragmentShader:a.resolveIncludes("renderer/laserLine/laserLine.frag")},attributes:q.Default3D}})},"esri/views/3d/interactive/measurementTools/support/Label":function(){define(["require","exports","../../../../overlay/LineOverlayItem","../../../../overlay/TextOverlayItem"],function(B,
w,q,a){return function(){function m(h){this._textItem=new a({visible:!1});this._calloutItem=new q({visible:!1,width:2});this._visible=!1;this._calloutVisible=!0;h&&(this.fontSize=h)}Object.defineProperty(m.prototype,"textItem",{get:function(){return this._textItem},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"calloutItem",{get:function(){return this._calloutItem},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"text",{get:function(){return this._textItem.text},
set:function(a){this._textItem.text=a},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"fontSize",{get:function(){return this._textItem.fontSize},set:function(a){this._textItem.fontSize=a},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible=a;this._updateVisibility()},enumerable:!0,configurable:!0});m.prototype.addToView=function(a){a.overlay.items.addMany([this._textItem,this._calloutItem])};
m.prototype.removeFromView=function(a){a.overlay.items.removeMany([this._textItem,this._calloutItem])};m.prototype.updatePosition=function(a,m){if(m){var h=m[0]-a[0],g=m[1]-a[1];this._textItem.position=[m[0],m[1]];this._textItem.anchor=Math.abs(h)>Math.abs(g)?0<h?"left":"right":0<g?"top":"bottom";this._calloutItem.startPosition=[a[0],a[1]];this._calloutItem.endPosition=[m[0],m[1]];this._calloutVisible=!0}else this._textItem.position=[a[0],a[1]],this._textItem.anchor="center",this._calloutVisible=
!1};m.prototype._updateVisibility=function(){this._textItem.visible=this._visible;this._calloutItem.visible=this._visible&&this._calloutVisible};return m}()})},"esri/views/overlay/LineOverlayItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ViewOverlayItem maquette".split(" "),function(B,w,q,a,m,h,p,x){return function(g){function f(){var a=null!==g&&g.apply(this,arguments)||
this;a.startX=0;a.startY=0;a.endX=0;a.endY=0;a.width=1;a.color=[0,0,0,1];a.visible=!0;return a}q(f,g);Object.defineProperty(f.prototype,"startPosition",{get:function(){return[this.startX,this.startY]},set:function(a){this._set("startX",a[0]);this._set("startY",a[1])},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"endPosition",{get:function(){return[this.endX,this.endY]},set:function(a){this._set("endX",a[0]);this._set("endY",a[1])},enumerable:!0,configurable:!0});f.prototype.render=
function(){var a=Math.min(this.startX,this.endX),f=Math.min(this.startY,this.endY),b=this.width,g=Math.max(this.startX,this.endX)-a+2*b,h=Math.max(20,Math.max(this.startY,this.endY)-f+2*b);return x.h("div",{classes:{"esri-line-overlay-item":!0},styles:{left:a-b+"px",top:f-b+"px",width:g+"px",height:h+"px",visibility:this.visible?"visible":"hidden"},innerHTML:"\x3csvg width\x3d"+g+" height\x3d"+h+"\x3e"+("\x3cline x1\x3d"+(this.startX-a+b)+" y1\x3d"+(this.startY-f+b)+" x2\x3d"+(this.endX-a+b)+" y2\x3d"+
(this.endY-f+b)+' style\x3d"stroke: rgba(0, 0, 0, 0.5); stroke-width: '+this.width+'; stroke-linecap: round;"\x3e\x3c/line\x3e')+"\x3c/svg\x3e"})};a([h.property()],f.prototype,"startX",void 0);a([h.property()],f.prototype,"startY",void 0);a([h.property()],f.prototype,"endX",void 0);a([h.property()],f.prototype,"endY",void 0);a([h.property({dependsOn:["startX","startY"]})],f.prototype,"startPosition",null);a([h.property({dependsOn:["endX","endY"]})],f.prototype,"endPosition",null);a([h.property()],
f.prototype,"width",void 0);a([h.property()],f.prototype,"color",void 0);a([h.property()],f.prototype,"visible",void 0);return f=a([h.subclass("esri.views.overlay.LineOverlayItem")],f)}(h.declared(m,p))})},"esri/views/overlay/ViewOverlayItem":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper"],function(B,w,q,a){return function(){return function(){}}()})},"esri/views/overlay/TextOverlayItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ViewOverlayItem maquette".split(" "),
function(B,w,q,a,m,h,p,x){var g={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};return function(f){function m(){var a=
null!==f&&f.apply(this,arguments)||this;a.x=0;a.y=0;a.text="-";a.fontSize=14;a.anchor="center";a.visible=!0;return a}q(m,f);Object.defineProperty(m.prototype,"position",{get:function(){return[this.x,this.y]},set:function(a){this._set("x",a[0]);this._set("y",a[1])},enumerable:!0,configurable:!0});m.prototype.render=function(){return x.h("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+
"px"}},[this.text])};m.prototype._cssClasses=function(){var a={"esri-text-overlay-item":!0},b;for(b in g)a[g[b]]=this.anchor===b;return a};a([h.property()],m.prototype,"x",void 0);a([h.property()],m.prototype,"y",void 0);a([h.property({dependsOn:["x","y"]})],m.prototype,"position",null);a([h.property()],m.prototype,"text",void 0);a([h.property()],m.prototype,"fontSize",void 0);a([h.property()],m.prototype,"anchor",void 0);a([h.property()],m.prototype,"visible",void 0);return m=a([h.subclass("esri.views.overlay.TextOverlayItem")],
m)}(h.declared(m,p))})},"esri/views/3d/interactive/measurementTools/support/LabelSegment":function(){define(["require","exports","./viewUtils","../../../lib/gl-matrix"],function(B,w,q,a){return function(){function m(){this.origin=a.vec3d.create();this.start=a.vec3d.create();this.end=a.vec3d.create()}m.prototype.update=function(h,m,x){a.vec3d.set(h,this.start);a.vec3d.set(m,this.end);if(x)switch(x){case "start":a.vec3d.set(this.start,this.origin);break;case "center":q.midpoint([h,m],this.origin);break;
case "end":a.vec3d.set(this.end,this.origin);break;default:a.vec3d.set(x,this.origin)}else q.midpoint([h,m],this.origin)};return m}()})},"esri/views/3d/interactive/measurementTools/support/viewUtils":function(){define(["require","exports","../../../../../core/lang","../../../lib/gl-matrix"],function(B,w,q,a){function m(f,g,b){var h=b._stage.getCamera();b.renderCoordsHelper.toRenderCoords(f,p);h.projectPoint(p,x);a.vec2d.set2(x[0],h.fullHeight-x[1],g)}Object.defineProperty(w,"__esModule",{value:!0});
var h=a.vec3d.create();w.copyParameter=function(a,f){a=q.mixin({},a);f=q.clone(f);q.mixin(a,f);return a};w.resizeArray=function(a,f,b,g){for(;a.length<f;)a.push(b());if(g)for(;a.length>f;)b=a.pop(),g(b);else a.length=f};w.scaleTranslateMatrix=function(f,g,b){a.mat4d.identity(b);a.mat4d.translate(b,g);a.vec3d.set3(f,f,f,h);a.mat4d.scale(b,h)};w.midpoint=function(f,g){a.vec3d.set3(0,0,0,g);for(var b=0;b<f.length;++b)a.vec3d.add(g,f[b]);a.vec3d.scale(g,1/f.length)};w.screenSpaceTangent=function(h,m,
b,p){p.projectPoint(h,g);p.projectPoint(m,f);a.vec2d.subtract(f,g,b);a.vec2d.normalize(b)};w.projectPoint=m;w.pointToPointScreenDistance=function(h,p,b){m(h,g,b);m(p,f,b);return a.vec2d.dist(g,f)};w.pointToScreenPositionDistance=function(f,g,b){m(f,x,b);return a.vec2d.dist(x,g)};var p=a.vec3d.create(),x=a.vec3d.create(),g=a.vec2d.create(),f=a.vec2d.create()})},"esri/views/3d/interactive/measurementTools/support/labelUtils":function(){define(["require","exports","./viewUtils","../../../lib/gl-matrix"],
function(B,w,q,a){function m(a,f,h){a.projectPoint(f,b);if(0>b[2]||1<b[2])return!1;h[0]=b[0];h[1]=b[1];g(a,h);return!0}function h(h,m,n,p,t,y){if(!m)return!1;q.screenSpaceTangent(m.start,m.end,f,h);a.vec2d.set2(-f[1],f[0],u);var A=!1;switch(p){case "top":A=0>u[1];break;case "bottom":A=0<u[1];break;case "left":A=0<u[0];break;case "right":A=0>u[0]}A&&a.vec2d.negate(u);if(0===a.vec2d.length(u))switch(p){case "top":u[1]=1;break;case "bottom":u[1]=-1;break;case "left":u[0]=-1;break;case "right":u[0]=1}h.projectPoint(m.origin,
b);if(0>b[2]||1<b[2])return!1;t[0]=b[0];t[1]=b[1];a.vec2d.scale(u,n,y);a.vec2d.add(y,t,y);g(h,t);g(h,y);return!0}function p(h,m,p,t,x,y){if(!m||!p)return!1;q.screenSpaceTangent(m.end,m.start,f,h);q.screenSpaceTangent(p.start,p.end,n,h);a.vec2d.add(f,n,u);a.vec2d.negate(u);a.vec2d.normalize(u);h.projectPoint(m.end,b);if(0>b[2]||1<b[2])return!1;x[0]=b[0];x[1]=b[1];a.vec2d.scale(u,t,y);a.vec2d.add(y,x,y);g(h,x);g(h,y);return!0}function x(f,h,m,n,p,y){f.projectPoint(h,b);a.vec3d.add(h,m,D);f.projectPoint(D,
t);if(0>b[2]||1<b[2]||0>t[2]||1<t[2])return!1;a.vec2d.subtract(t,b,u);a.vec2d.normalize(u);a.vec2d.set(b,p);a.vec2d.scale(u,n,y);a.vec2d.add(y,p,y);g(f,p);g(f,y);return!0}function g(a,b){b[1]=a.fullHeight-b[1]}Object.defineProperty(w,"__esModule",{value:!0});w.mirrorPosition=function(a){switch(a){case "top":return"bottom";case "right":return"left";case "bottom":return"top";case "left":return"right"}};w.computeLabelPositionFromPoint=m;w.positionLabelOnPoint=function(a,b,f){(b=m(f,b,E))&&a.updatePosition(E,
null);return b};w.computeLabelPositionFromSegment=h;w.positionLabelOnSegment=function(a,b,f,g,m){(b=h(m,b,f,g,E,C))&&a.updatePosition(E,C);return b};w.computeLabelPositionFromCorner=p;w.computeLabelPositionFromPlane=x;w.positionLabelOnCorner=function(a,b,f,g,h){(b=p(h,b,f,g,E,C))&&a.updatePosition(E,C);return b};w.positionLabelOnPlane=function(a,b,f,g,h,m){(b=x(m,b,f,g,E,C))&&a.updatePosition(E,C);return b};var f=a.vec2d.create(),n=a.vec2d.create(),u=a.vec2d.create(),b=a.vec3d.create(),t=a.vec3d.create(),
D=a.vec3d.create(),E=a.vec2d.create(),C=a.vec2d.create()})},"esri/views/3d/interactive/measurementTools/support/PathSegmentInterpolator":function(){define("require exports ../../../../../geometry/SpatialReference ../../../../../geometry/support/geodesicUtils ../../../lib/gl-matrix ../../../support/mathUtils ../../../support/projectionUtils".split(" "),function(B,w,q,a,m,h,p){function x(a){a.x=f.normalize(a.x);a.y=n.normalize(a.y)}function g(a,f,g){p.vectorToVector(a,f,g,q.WGS84);g[0]=h.deg2rad(g[0]);
g[1]=h.deg2rad(g[1])}var f=new h.Cyclical(-180,180),n=new h.Cyclical(-90,90),u;(function(b){var f=function(){function a(a,b){this._startPosition=m.vec3d.create();this._endPosition=m.vec3d.create();m.vec3d.set(a,this._startPosition);m.vec3d.set(b,this._endPosition)}a.prototype.eval=function(a,b){m.vec3d.lerp(this._startPosition,this._endPosition,a,b)};return a}();b.Linear=f;f=function(){function b(b,f,h,n){this._startCoords=m.vec3d.create();this._endCoords=m.vec3d.create();g(b,h,this._startCoords);
g(f,h,this._endCoords);this._destSR=n;this._startToEnd=a.inverseGeodeticSolver(this._startCoords[1],this._startCoords[0],this._endCoords[1],this._endCoords[0]);this._endToStart=a.inverseGeodeticSolver(this._endCoords[1],this._endCoords[0],this._startCoords[1],this._startCoords[0])}b.prototype.eval=function(b,f){var g=a.directGeodeticSolver(this._startCoords[1],this._startCoords[0],this._startToEnd.azimuth,this._startToEnd.geodesicDistance*b),m=a.directGeodeticSolver(this._endCoords[1],this._endCoords[0],
this._endToStart.azimuth,this._endToStart.geodesicDistance*(1-b));x(g);x(m);f[0]=h.lerp(g.x,m.x,b);f[1]=h.lerp(g.y,m.y,b);f[2]=h.lerp(this._startCoords[2],this._endCoords[2],b);p.vectorToVector(f,q.WGS84,f,this._destSR)};return b}();b.Geodesic=f;f=function(){function a(a,b,f,g){this._startPosition=m.vec3d.create();this._endPosition=m.vec3d.create();p.vectorToVector(a,f,this._startPosition,p.SphericalECEFSpatialReference);p.vectorToVector(b,f,this._endPosition,p.SphericalECEFSpatialReference);this._destSR=
g}a.prototype.eval=function(a,b){h.slerp(this._startPosition,this._endPosition,a,b);p.vectorToVector(b,p.SphericalECEFSpatialReference,b,this._destSR)};return a}();b.Spherical=f})(u||(u={}));return u})},"esri/geometry/support/geodesicUtils":function(){define("require exports ../../core/unitUtils ../../core/wgs84Constants ../Point ../Polygon ../Polyline ../SpatialReference".split(" "),function(B,w,q,a,m,h,p,x){function g(b,f,g,h){var n=a.wgs84Radius,p=a.wgs84PolarRadius,u=a.wgs84Flattening,t=Math.sin(g);
g=Math.cos(g);var y=(1-u)*Math.tan(b);b=1/Math.sqrt(1+y*y);for(var q=y*b,A=Math.atan2(y,g),y=b*t*b*t,C=1-y,n=C*(n*n-p*p)/(p*p),w=1+n/16384*(4096+n*(-768+n*(320-175*n))),D=n/1024*(256+n*(-128+n*(74-47*n))),n=h/(p*w),E=2*Math.PI,B,Z,T,Y;1E-12<Math.abs(n-E);)T=Math.cos(2*A+n),B=Math.sin(n),Z=Math.cos(n),Y=D*B*(T+D/4*(Z*(-1+2*T*T)-D/6*T*(-3+4*B*B)*(-3+4*T*T))),E=n,n=h/(p*w)+Y;h=q*B-b*Z*g;p=u/16*C*(4+u*(4-3*C));return new m((f+(Math.atan2(B*t,b*Z-q*B*g)-(1-p)*u*Math.sqrt(y)*(n+p*B*(T+p*Z*(-1+2*T*T)))))/
(Math.PI/180),Math.atan2(q*Z+b*B*g,(1-u)*Math.sqrt(y+h*h))/(Math.PI/180),new x({wkid:4326}))}function f(b,f,g,h){var m=a.wgs84Radius,n=a.wgs84PolarRadius,p=a.wgs84Flattening,u=h-f,y=Math.atan((1-p)*Math.tan(b)),t=Math.atan((1-p)*Math.tan(g)),q=Math.sin(y),y=Math.cos(y),A=Math.sin(t),t=Math.cos(t),x=1E3,C=u,w,D,E,B,Y,aa,V,l;do{B=Math.sin(C);Y=Math.cos(C);E=Math.sqrt(t*B*t*B+(y*A-q*t*Y)*(y*A-q*t*Y));if(0===E)return{geodesicDistance:0};Y=q*A+y*t*Y;aa=Math.atan2(E,Y);V=y*t*B/E;D=1-V*V;B=Y-2*q*A/D;isNaN(B)&&
(B=0);l=p/16*D*(4+p*(4-3*D));w=C;C=u+(1-l)*p*V*(aa+l*E*(B+l*Y*(-1+2*B*B)))}while(1E-12<Math.abs(C-w)&&0<--x);if(0===x)return n=h-f,{geodesicDistance:6371009*Math.acos(Math.sin(b)*Math.sin(g)+Math.cos(b)*Math.cos(g)*Math.cos(h-f)),azimuth:Math.atan2(Math.sin(n)*Math.cos(g),Math.cos(b)*Math.sin(g)-Math.sin(b)*Math.cos(g)*Math.cos(n))};b=D*(m*m-n*n)/(n*n);f=b/1024*(256+b*(-128+b*(74-47*b)));return{geodesicDistance:n*(1+b/16384*(4096+b*(-768+b*(320-175*b))))*(aa-f*E*(B+f/4*(Y*(-1+2*B*B)-f/6*B*(-3+4*E*
E)*(-3+4*B*B)))),azimuth:Math.atan2(t*Math.sin(C),y*A-q*t*Math.cos(C)),reverseAzimuth:Math.atan2(y*Math.sin(C),y*A*Math.cos(C)-q*t)}}function n(a,b){if("polyline"!==a.type&&"polygon"!==a.type)throw a="geodesicDensify: the input geometry is neither polyline nor polygon",console.error(a),Error(a);if(!a.spatialReference.isWGS84)throw a="geodesicDensify: the input geometry must use the WGS84 spatial reference",console.error(a),Error(a);var m=Math.PI/180;637.100877151506>b&&(b=637.100877151506);for(var n=
[],u=0,t="polyline"===a.type?a.paths:a.rings;u<t.length;u++){var q=t[u],x=[];n.push(x);x.push([q[0][0],q[0][1]]);for(var y=q[0][0]*m,w=q[0][1]*m,D=void 0,E=void 0,B=0;B<q.length-1;B++)if(D=q[B+1][0]*m,E=q[B+1][1]*m,y!==D||w!==E){var E=f(w,y,E,D),D=E.azimuth,E=E.geodesicDistance,S=E/b;if(1<S){for(var O=1;O<=S-1;O++){var W=g(w,y,D,O*b);x.push([W.x,W.y])}S=g(w,y,D,(E+Math.floor(S-1)*b)/2);x.push([S.x,S.y])}w=g(w,y,D,E);x.push([w.x,w.y]);y=w.x*m;w=w.y*m}}return"polyline"===a.type?new p({paths:n,spatialReference:a.spatialReference}):
new h({rings:n,spatialReference:a.spatialReference})}function u(b,f){var g=Math.PI/180,h=a.wgs84Radius,m=Math.sin(f[1]*g),m=.9933056200098026*(m/(1-.006694379990197414*m*m)-6.111035746609262*Math.log((1-.0818191908429643*m)/(1+.0818191908429643*m)));b[0]=h*f[0]*g;b[1]=h*m*.5;return b}Object.defineProperty(w,"__esModule",{value:!0});w.directGeodeticSolver=g;w.inverseGeodeticSolver=f;w.geodesicDensify=n;w.geodesicLengths=function(a,b){if(a.some(function(a){return!a.spatialReference.isWGS84}))throw console.error("geodesicLengths: the input geometries must use the WGS84 spatial reference"),
Error("geodesicLengths: the input geometries must use the WGS84 spatial reference");for(var g=Math.PI/180,h=[],m=0;m<a.length;m++){for(var n=a[m].paths,p=0,u=0;u<n.length;u++){for(var y=n[u],t=0,x=1;x<y.length;x++){var w=y[x-1][0]*g,D=y[x][0]*g,E=y[x-1][1]*g,B=y[x][1]*g;if(E!==B||w!==D)w=f(E,w,B,D),t+=w.geodesicDistance}p+=t}p=q.convertUnit(p,"meters",b);h.push(p)}return h};var b=[0,0],t=[0,0];w.geodesicAreas=function(a,f){if(a.some(function(a){return!a.spatialReference.isWGS84}))throw console.error("geodesicAreas: the input geometries must use the WGS84 spatial reference"),
Error("geodesicAreas: the input geometries must use the WGS84 spatial reference");for(var g=[],h=0;h<a.length;h++){var m=n(a[h],1E4);g.push(m)}a=[];for(h=0;h<g.length;h++){for(var m=g[h].rings,p=0,x=0;x<m.length;x++){var w=m[x];u(b,w[0]);u(t,w[w.length-1]);for(var y=t[0]*b[1]-b[0]*t[1],D=0;D<w.length-1;D++)u(b,w[D+1]),u(t,w[D]),y+=t[0]*b[1]-b[0]*t[1];p+=y}p=q.convertUnit(p,"square-meters",f);a.push(p/-2)}return a}})},"esri/views/3d/webgl-engine/materials/MeasurementArrowMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../lib/gl-matrix ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/Util ./internal/MaterialUtil ../shaders/MeasurementArrowPrograms".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n){B=function(a){function g(g,h){h=a.call(this,h)||this;h.bufferWriter=new H;h.params=f.copyParameters(g,b);return h}q(g,a);g.prototype.dispose=function(){};g.prototype.getParameterValues=function(){var a=this.params;return{width:a.width,outlineSize:a.outlineSize,outlineColor:a.outlineColor,stripeLength:a.stripeLength,stripeEvenColor:a.stripeEvenColor,stripeOddColor:a.stripeOddColor,polygonOffset:a.polygonOffset}};g.prototype.setParameterValues=function(a){f.updateParameters(this.params,
a)&&this.notifyDirty("matChanged")};g.prototype.getParams=function(){return this.params};g.prototype.intersect=function(a,b,f,g,h,m,n,p){};g.prototype.getGLMaterials=function(){return{color:u,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:void 0}};g.prototype.getAllTextureIds=function(){return[]};return g}(p);var u=function(a){function b(b,g,h){g=a.call(this,b,g)||this;g.params=f.copyParameters(b.getParams());g.selectProgram();return g}q(b,a);b.prototype.selectProgram=function(){this.program=
this.programRep.getProgram(n.colorPass)};b.prototype.updateParameters=function(){this.params=this.material.getParameterValues();this.selectProgram()};b.prototype.beginSlot=function(a){return a===x.OPAQUE_MATERIAL};b.prototype.getProgram=function(){return this.program};b.prototype.getDrawMode=function(a){return 5};b.prototype.bind=function(a,b){b=this.program;a.setDepthTestEnabled(!0);a.setDepthWriteEnabled(!0);a.setFaceCullingEnabled(!1);a.setBlendingEnabled(!1);this.params.polygonOffset&&(a.setPolygonOffsetFillEnabled(!0),
a.setPolygonOffset(0,-4));a.bindProgram(b);b.setUniform1f("width",this.params.width);b.setUniform1f("outlineSize",this.params.outlineSize);b.setUniform4fv("outlineColor",this.params.outlineColor);b.setUniform1f("stripeLength",this.params.stripeLength);b.setUniform4fv("stripeEvenColor",this.params.stripeEvenColor);b.setUniform4fv("stripeOddColor",this.params.stripeOddColor)};b.prototype.bindView=function(a,b){a=b.origin;var g=this.getProgram();f.bindView(a,b.view,g)};b.prototype.bindInstance=function(a,
b){this.getProgram().setUniformMatrix4fv("model",b.transformation)};b.prototype.release=function(a){a.setDepthTestEnabled(!0);a.setDepthWriteEnabled(!0);a.setBlendingEnabled(!1);this.params.polygonOffset&&a.setPolygonOffsetFillEnabled(!1)};return b}(h),b={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1},t=m.newLayout().vec3f(g.VertexAttrConstants.POSITION).vec3f(g.VertexAttrConstants.NORMAL).vec2f(g.VertexAttrConstants.UV0).f32(g.VertexAttrConstants.AUXPOS1),
D=a.vec3d.create(),E=a.vec3d.create(),C=a.vec3d.create(),A=a.vec3d.create(),F=a.vec3d.create(),H=function(){function b(){this.vertexBufferLayout=t}b.prototype.allocate=function(a){return this.vertexBufferLayout.createBuffer(a)};b.prototype.elementCount=function(a){return 2*(a.indices[g.VertexAttrConstants.POSITION].length/2+1)};b.prototype.write=function(b,f,h,m,n){var p=f.vertexAttr[g.VertexAttrConstants.POSITION].data,u=f.vertexAttr[g.VertexAttrConstants.NORMAL].data;h=p.length/3;(f=f&&f.indices&&
f.indices.position)&&f.length!==2*(h-1)&&console.warn("MeasurementArrowMaterial does not support indices");f=b.transformation;for(var t=b.invTranspTransformation,y=m.position,q=m.normal,x=m.uv0,w=b=0;w<h;++w){var I=3*w;a.vec3d.set3(p[I],p[I+1],p[I+2],D);w<h-1&&(I=3*(w+1),a.vec3d.set3(p[I],p[I+1],p[I+2],E),a.vec3d.set3(u[I],u[I+1],u[I+2],F),a.vec3d.normalize(F),a.vec3d.subtract(E,D,C),a.vec3d.normalize(C),a.vec3d.cross(F,C,A),a.vec3d.normalize(A));I=a.vec3d.dist(D,E);f&&t&&(a.mat4d.multiplyVec3(f,
D),a.mat4d.multiplyVec3(f,E),a.mat4d.multiplyVec3(t,A));var B=n+2*w,l=B+1;y.setVec(B,D);y.setVec(l,D);q.setVec(B,A);q.setVec(l,A);x.set(B,0,b);x.set(B,1,-1);x.set(l,0,b);x.set(l,1,1);w<h-1&&(b+=I)}m=m.auxpos1;for(w=0;w<2*h;++w)m.set(n+w,b)};return b}();return B})},"esri/views/3d/webgl-engine/shaders/MeasurementArrowPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(B,w,q,a){Object.defineProperty(w,"__esModule",{value:!0});w.colorPass=
{name:"measurement-arrow-color",shaders:{vertexShader:a.resolveIncludes("materials/measurementArrow/measurementArrow.vert"),fragmentShader:a.resolveIncludes("materials/measurementArrow/measurementArrow.frag")},attributes:q.Default3D}})},"esri/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DModel":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/Collection ../../../../../core/Handles ../../../../../core/Quantity ../../../../../core/quantityUtils ../../../../../core/unitUtils ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/SpatialReference ../../../../../geometry/support/geodesicUtils ../support/UnitNormalizer ../../../lib/gl-matrix ../../../support/earthUtils ../../../support/mathUtils ../../../support/projectionUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F){var H=C.earthRadius*Math.PI/180;return function(m){function C(){var a=null!==m&&m.apply(this,arguments)||this;a._tempStartPosition=E.vec3d.create();a._tempEndPosition=E.vec3d.create();a._tempCornerPosition=E.vec3d.create();a._unitNormalizer=new D;a._handles=new p;a.cursorPoint=null;a.hoveredHandle=null;a.draggedHandles=new h;a.state="initial";a.mode="auto";a.unit="metric";a.directDistance=null;a.horizontalDistance=null;a.verticalDistance=null;a.geodesicDistance=
null;a.geodesicAngle=null;a.triangleCollapseRatioThreshold=.03;a.geodesicMeasurementDistanceThreshold=1E5;return a}q(C,m);C.prototype.initialize=function(){var a=this;this._handles.add(n.init(this.sceneView,"spatialReference",function(f){a._unitNormalizer.spatialReference=f;a._unitNormalizer.ignoredSpatialReferences=[b.WGS84,b.WebMercator]}),"scene-view");this.reset()};C.prototype.destroy=function(){this._handles.destroy();this._handles=null};Object.defineProperty(C.prototype,"startPoint",{set:function(a){this._set("startPoint",
a);this._updateMeasurement()},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"startPointSurfaceLocation",{set:function(a){this._set("startPointSurfaceLocation",a);this._updateMeasurement()},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"endPoint",{set:function(a){this._set("endPoint",a);this._updateMeasurement()},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"endPointSurfaceLocation",{set:function(a){this._set("endPointSurfaceLocation",a);
this._updateMeasurement()},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"measurementSurfaceLocation",{get:function(){var a=this.startPointSurfaceLocation,b=this.endPointSurfaceLocation;return null==a||null==b?"camera-dependent":"above-the-surface"===a&&"below-the-surface"===b||"below-the-surface"===a&&"above-the-surface"===b||"on-the-surface"===a&&"on-the-surface"===b?"camera-dependent":"above-the-surface"===a||"above-the-surface"===b?"above-the-surface":"below-the-surface"},
enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"validMeasurement",{get:function(){return!!this.startPoint&&!!this.endPoint},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"isMeasuring",{get:function(){return!!this.startPoint},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"geodesicDistanceExceeded",{get:function(){return this.horizontalDistance&&this.horizontalDistance.value>this.geodesicMeasurementDistanceThreshold},enumerable:!0,configurable:!0});
Object.defineProperty(C.prototype,"measurementMode",{get:function(){var a=this.mode;if("auto"===a){a="euclidean";if("degrees"===this.unit||"degrees-minutes-seconds"===this.unit)a="geodesic";this.geodesicDistanceExceeded&&(a="geodesic")}return a},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"triangleView",{get:function(){var a=this._collapseTriangle(),b=null,h=null,m=null,n=this.directDistance,h="geodesic"===this.measurementMode?this.geodesicDistance:this.horizontalDistance,p=
this.verticalDistance,u=null;switch(this.unit){case "metric":b=n&&g.formatMetricLength(n);h=h&&g.formatMetricLength(h);m=p&&g.formatMetricVerticalLength(p);u=n&&n.toUnit("meters");break;case "imperial":b=n&&g.formatImperialLength(n);h=h&&g.formatImperialLength(h);m=p&&g.formatImperialVerticalLength(p);u=n&&n.toUnit(f.preferredImperialLengthUnit(n.value,n.unit));break;case "degrees":h=this.geodesicAngle&&g.formatDecimal(this.geodesicAngle,"degrees");u=this.geodesicAngle&&this.geodesicAngle.toUnit("degrees");
break;case "degrees-minutes-seconds":h=this.geodesicAngle&&g.formatDMS(this.geodesicAngle);u=this.geodesicAngle&&this.geodesicAngle.toUnit("degrees");break;default:b=n&&g.formatDecimal(n,this.unit),h=h&&g.formatDecimal(h,this.unit),m=p&&g.formatDecimal(p,this.unit),u=n&&n.toUnit(this.unit)}n=1;u&&(n=A.nextHighestPowerOfTen(u.value/30),n*="degrees"===u.unit?H:f.convertUnit(1,u.unit,"meters"),n/=this._unitNormalizer.normalizeDistance(1));return{visible:this.validMeasurement&&!this.startPoint.equals(this.endPoint),
mode:this.measurementMode,collapsed:a,directLabel:b,horizontalLabel:h,verticalLabel:m,stripeLength:n}},enumerable:!0,configurable:!0});C.prototype.reset=function(){this.clearMeasurement()};C.prototype.clearMeasurement=function(){this.state="initial";this.cursorPoint=this.endPoint=this.startPoint=null;this._clearOverride("measurementSurfaceLocation");this._updateMeasurement()};C.prototype.finishedMeasurement=function(a){if(!this._isOverridden("measurementSurfaceLocation")){var b=this.measurementSurfaceLocation;
this._override("measurementSurfaceLocation","camera-dependent"===b?a.cameraAboveGround?"above-the-surface":"below-the-surface":b)}this.state="measured"};C.prototype._collapseTriangle=function(){return!this.validMeasurement||this.startPoint.equals(this.endPoint)||"geodesic"===this.measurementMode?!0:Math.min(this.verticalDistance.value/this.horizontalDistance.value,this.horizontalDistance.value/this.verticalDistance.value)<this.triangleCollapseRatioThreshold};C.prototype._exactGeodesicDistanceAndAngle=
function(a,b){var f=A.deg2rad(a.longitude);a=A.deg2rad(a.latitude);var g=A.deg2rad(b.longitude),h=A.deg2rad(b.latitude);b=A.rad2deg(Math.acos(Math.sin(a)*Math.sin(h)+Math.cos(a)*Math.cos(h)*Math.cos(Math.abs(g-f))));f=t.inverseGeodeticSolver(a,f,h,g).geodesicDistance;return{distance:new x(f,"meters"),angle:new x(b,"degrees")}};C.prototype._approximateGeodesicDistanceAndAngle=function(a){return{distance:new x(a,"meters"),angle:new x(a/H,"degrees")}};C.prototype._euclideanDistances=function(a,b){a.z>
b.z&&(a=[a,a=b][0]);var f=a.clone();f.z=b.z;var g=this._tempStartPosition,h=this._tempEndPosition,m=this._tempCornerPosition,n=this.sceneView.spatialReference,n=n.isWGS84||n.isWebMercator?F.WGS84ECEFSpatialReference:n;F.pointToVector(a,g,n);F.pointToVector(b,h,n);F.pointToVector(f,m,n);f=E.vec3d.dist(g,h);h=E.vec3d.dist(m,h);a=Math.abs(b.z-a.z);f=this._unitNormalizer.normalizeDistance(f);h=this._unitNormalizer.normalizeDistance(h);a=this._unitNormalizer.normalizeElevation(a);return{direct:new x(f,
"meters"),horizontal:new x(h,"meters"),vertical:new x(a,"meters")}};C.prototype._updateMeasurement=function(){if(this.startPoint&&this.endPoint){var a=this._euclideanDistances(this.startPoint,this.endPoint),b=this.sceneView.spatialReference,b=b.isWGS84||b.isWebMercator?this._exactGeodesicDistanceAndAngle(this.startPoint,this.endPoint):this._approximateGeodesicDistanceAndAngle(a.horizontal.value);this._set("directDistance",a.direct);this._set("horizontalDistance",a.horizontal);this._set("verticalDistance",
a.vertical);this._set("geodesicDistance",b.distance);this._set("geodesicAngle",b.angle)}else this._set("directDistance",null),this._set("horizontalDistance",null),this._set("verticalDistance",null),this._set("geodesicDistance",null),this._set("geodesicAngle",null)};a([u.property({constructOnly:!0})],C.prototype,"sceneView",void 0);a([u.property({value:null})],C.prototype,"startPoint",null);a([u.property({value:null})],C.prototype,"startPointSurfaceLocation",null);a([u.property({value:null})],C.prototype,
"endPoint",null);a([u.property({value:null})],C.prototype,"endPointSurfaceLocation",null);a([u.property({dependsOn:["startPointSurfaceLocation","endPointSurfaceLocation"]})],C.prototype,"measurementSurfaceLocation",null);a([u.property()],C.prototype,"cursorPoint",void 0);a([u.property()],C.prototype,"hoveredHandle",void 0);a([u.property({readOnly:!0})],C.prototype,"draggedHandles",void 0);a([u.property()],C.prototype,"state",void 0);a([u.property()],C.prototype,"mode",void 0);a([u.property()],C.prototype,
"unit",void 0);a([u.property({readOnly:!0,dependsOn:["startPoint","endPoint"]})],C.prototype,"validMeasurement",null);a([u.property({readOnly:!0,dependsOn:["startPoint"]})],C.prototype,"isMeasuring",null);a([u.property({readOnly:!0})],C.prototype,"directDistance",void 0);a([u.property({readOnly:!0})],C.prototype,"horizontalDistance",void 0);a([u.property({readOnly:!0})],C.prototype,"verticalDistance",void 0);a([u.property({readOnly:!0})],C.prototype,"geodesicDistance",void 0);a([u.property({readOnly:!0})],
C.prototype,"geodesicAngle",void 0);a([u.property({readOnly:!0,dependsOn:["horizontalDistance","geodesicMeasurementDistanceThreshold"]})],C.prototype,"geodesicDistanceExceeded",null);a([u.property({readOnly:!0,dependsOn:["horizontalDistance","unit","geodesicDistanceExceeded"]})],C.prototype,"measurementMode",null);a([u.property({readOnly:!0,dependsOn:["unit","measurementMode","startPoint","endPoint","triangleCollapseRatioThreshold"]})],C.prototype,"triangleView",null);a([u.property()],C.prototype,
"triangleCollapseRatioThreshold",void 0);a([u.property()],C.prototype,"geodesicMeasurementDistanceThreshold",void 0);return C=a([u.subclass("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DModel")],C)}(u.declared(m))})},"esri/core/Quantity":function(){define(["require","exports","./unitUtils"],function(B,w,q){return function(){function a(a,h){this.measure=q.measureForUnit(h);this.value=a;this.unit=h}Object.defineProperty(a.prototype,"isBaseUnit",{get:function(){return q.isBaseUnit(this.unit)},
enumerable:!0,configurable:!0});a.prototype.toUnit=function(m){return new a(q.convertUnit(this.value,this.unit,m),m)};a.prototype.toBaseUnit=function(){return this.toUnit(q.baseUnitForUnit(this.unit))};a.prototype.toDecimalString=function(a,h){void 0===a&&(a=2);return q.formatDecimal(this.value,this.unit,a,h)};return a}()})},"esri/core/quantityUtils":function(){define(["require","exports","./unitUtils"],function(B,w,q){var a;(function(a){a.formatDecimal=function(a,m,x,g){void 0===x&&(x=2);void 0===
g&&(g="abbr");return q.formatDecimal(a.toUnit(m).value,m,x,g)};a.formatMetricLength=function(a,m,x){void 0===m&&(m=2);void 0===x&&(x="abbr");if("length"!==a.measure)throw Error("quantity is not a length");return q.formatMetricLength(a.value,a.unit,m,x)};a.formatMetricVerticalLength=function(a,m,x){void 0===m&&(m=2);void 0===x&&(x="abbr");if("length"!==a.measure)throw Error("quantity is not a length");return q.formatMetricVerticalLength(a.value,a.unit,m,x)};a.formatMetricArea=function(a,m,x){void 0===
m&&(m=2);void 0===x&&(x="abbr");if("area"!==a.measure)throw Error("quantity is not an area");return q.formatMetricArea(a.value,a.unit,m,x)};a.formatImperialLength=function(a,m,x){void 0===m&&(m=2);void 0===x&&(x="abbr");if("length"!==a.measure)throw Error("quantity is not a length");return q.formatImperialLength(a.value,a.unit,m,x)};a.formatImperialVerticalLength=function(a,m,x){void 0===m&&(m=2);void 0===x&&(x="abbr");if("length"!==a.measure)throw Error("quantity is not a length");return q.formatImperialVerticalLength(a.value,
a.unit,m,x)};a.formatImperialArea=function(a,m,x){void 0===m&&(m=2);void 0===x&&(x="abbr");if("area"!==a.measure)throw Error("quantity is not an area");return q.formatImperialArea(a.value,a.unit,m,x)};a.formatDMS=function(a){if("angle"!==a.measure)throw Error("quantity is not an angle");return q.formatDMS(a.value,a.unit)}})(a||(a={}));return a})},"esri/views/3d/interactive/measurementTools/support/UnitNormalizer":function(){define(["require","exports","../../../../../geometry/support/scaleUtils"],
function(B,w,q){return function(){function a(a,h){void 0===a&&(a=null);void 0===h&&(h=null);this.spatialReference=a;this.ignoredSpatialReferences=h;this._updateNormalizationFactors}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this._spatialReference},set:function(a){a!==this._spatialReference&&(this._spatialReference=a,this._updateNormalizationFactors())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ignoredSpatialReferences",{get:function(){return this._ignoredSpatialReferences},
set:function(a){this._ignoredSpatialReferences=a;this._updateNormalizationFactors()},enumerable:!0,configurable:!0});a.prototype.normalizeDistance=function(a){return a*this._metersPerDistanceUnit};a.prototype.normalizeElevation=function(a){return a*this._metersPerElevationUnit};a.prototype.normalizeArea=function(a){return a*this._squareMetersPerAreaUnit};a.prototype._updateNormalizationFactors=function(){var a=this;!this._spatialReference||this._ignoredSpatialReferences&&0!==this._ignoredSpatialReferences.filter(function(h){return h.equals(a._spatialReference)}).length?
this._squareMetersPerAreaUnit=this._metersPerDistanceUnit=this._metersPerDistanceUnit=1:(this._metersPerDistanceUnit=q.getMetersPerUnitForSR(this._spatialReference),this._metersPerElevationUnit=q.getMetersPerVerticalUnitForSR(this._spatialReference),this._squareMetersPerAreaUnit=this._metersPerDistanceUnit*this._metersPerDistanceUnit)};return a}()})},"esri/widgets/AreaMeasurement3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./AreaMeasurement3D/nls/AreaMeasurement3D ../core/accessorSupport/decorators ./Widget ./AreaMeasurement3D/AreaMeasurement3DViewModel ./support/widget".split(" "),
function(B,w,q,a,m,h,p,x,g){return function(f){function n(a){a=f.call(this)||this;a.view=null;a.visible=null;a.viewModel=new x;a.unitOptions=null;a.unit=null;return a}q(n,f);n.prototype.clearMeasurement=function(){};n.prototype.render=function(){var a=this,b=!this.viewModel.isSupported,f="measuring"===this.viewModel.state,h=this.viewModel.measurement,n="ready"===this.viewModel.state?g.tsx("section",{key:"esri-area-measurement-3d__hint",class:"esri-area-measurement-3d__hint"},g.tsx("p",null,m.hint)):
null,b=b?g.tsx("section",{key:"esri-area-measurement-3d__unsupported",class:"esri-area-measurement-3d__panel--error"},g.tsx("p",null,m.unsupported)):null,p=function(b,f,h){switch(f.state){case "available":return g.tsx("div",{key:h+"-enabled",class:"esri-area-measurement-3d__measurement-item"},g.tsx("span",{class:"esri-area-measurement-3d__measurement-item-title"},b),g.tsx("span",{class:"esri-area-measurement-3d__measurement-item-value"},f.text));case "unavailable":return g.tsx("div",{key:h+"-disabled",
class:a.classes("esri-area-measurement-3d__measurement-item","esri-area-measurement-3d__measurement-item--disabled")},g.tsx("span",{class:"esri-area-measurement-3d__measurement-item-title"},b));case "invalid":return g.tsx("div",{key:h+"-enabled",class:"esri-area-measurement-3d__measurement-item"},g.tsx("span",{class:"esri-area-measurement-3d__measurement-item-title"},b),g.tsx("span",{class:"esri-area-measurement-3d__measurement-item-value"},m.notApplicable))}},h=f?g.tsx("section",{key:"esri-area-measurement-3d__measurement",
class:"esri-area-measurement-3d__measurement"},p(m.area,h.area,"area"),p(m.perimeterLength,h.perimeterLength,"perimeter-length")):null,q=this.id+"__units",p=g.tsx("label",{class:"esri-area-measurement-3d__units-label",for:q},m.unit),q=g.tsx("div",{class:"esri-area-measurement-3d__units-select-wrapper"},g.tsx("select",{class:"esri-area-measurement-3d__units-select esri-select",id:q,onchange:this._changeUnit,bind:this},this.viewModel.unitOptions.map(function(b){return b===a.viewModel.unit?g.tsx("option",
{key:b,value:b,selected:!0},m.units[b]):g.tsx("option",{key:b,value:b},m.units[b])}))),p=f?g.tsx("section",{key:"esri-area-measurement-3d__units",class:"esri-area-measurement-3d__units"},p,q):null,f=f?g.tsx("button",{class:this.classes("esri-button esri-button--secondary","esri-area-measurement-3d__clear-button"),bind:this,onclick:this._newMeasurement},m.newMeasurement):null,n=this.visible?g.tsx("div",{class:"esri-area-measurement-3d__container"},b,n,h,p,f):null;return g.tsx("div",{key:"",class:"esri-area-measurement-3d esri-widget esri-widget--panel",
role:"presentation"},n)};n.prototype._newMeasurement=function(){this.clearMeasurement()};n.prototype._changeUnit=function(a){a=a.target;if(a=a.options[a.selectedIndex])this.unit=a.value};a([h.aliasOf("viewModel.view")],n.prototype,"view",void 0);a([h.aliasOf("viewModel.visible"),g.renderable()],n.prototype,"visible",void 0);a([h.property({type:x}),g.renderable(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurement"])],n.prototype,"viewModel",void 0);a([h.aliasOf("viewModel.unitOptions")],
n.prototype,"unitOptions",void 0);a([h.aliasOf("viewModel.unit")],n.prototype,"unit",void 0);a([h.aliasOf("viewModel.clearMeasurement")],n.prototype,"clearMeasurement",null);a([g.accessibleHandler()],n.prototype,"_newMeasurement",null);a([g.accessibleHandler()],n.prototype,"_changeUnit",null);return n=a([h.subclass("esri.widgets.AreaMeasurement3D")],n)}(h.declared(p))})},"esri/widgets/AreaMeasurement3D/AreaMeasurement3DViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/scaleUtils ../../views/3d/interactive/interactiveToolUtils ../../views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DTool".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u){var b="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" "),t=p.getLogger("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel");return function(m){function p(a){a=m.call(this,a)||this;a._handles=new h;a._userUnitOptions=null;a._userUnit=null;a.view=null;a.visible=!0;a.tool=null;return a}q(p,m);p.prototype.initialize=function(){var a=this;this._handles.add([x.init(this,
["view.ready","visible"],function(){var b=a.view&&a.view.ready;b&&!a.tool&&a._set("tool",new u({view:a.view,unit:a.unit}));a._toggleTool();b||a._set("tool",null)}),x.init(this,"unit",function(b){a.tool&&(a.tool.unit=b)})])};p.prototype.destroy=function(){n.toggle(this.view,this.tool,!1);this._set("tool",null);this.view=null;this._handles.destroy();this._handles=null};Object.defineProperty(p.prototype,"state",{get:function(){var a=!!this.get("view.ready"),b=this.get("view.type");if(a&&"3d"===b)return this.get("tool.isMeasuring")?
"measuring":"ready";a&&"3d"!==b&&t.error("AreaMeasurement3D widget is not implemented for MapView");return"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"isSupported",{get:function(){return"3d"===this.get("view.type")},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"measurement",{get:function(){if(!this.tool)return null;var a=this.tool.model,b=a.measurementMode,f=a.measurementData,g=a.validMeasurement,h=(f=0===("euclidean"===b?f.intersectingSegments:
f.geodesicIntersectingSegments).size)?g?"available":"unavailable":"invalid";return{mode:b,area:{text:f&&g?a.areaLabel:null,state:h},perimeterLength:{text:f&&g?a.perimeterLengthLabel:null,state:h}}},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"defaultUnit",{get:function(){return this.defaultUnitFromPortal||this.defaultUnitFromSpatialReference||"metric"},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"defaultUnitFromSpatialReference",{get:function(){return f.getDefaultUnitSystem(this.view&&
this.view.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"defaultUnitFromPortal",{get:function(){var a=this.get("view.map.portalItem.portal");if(!a)return null;switch(a.user&&a.user.units||a.units){case "metric":return"metric";case "english":return"imperial";default:return null}},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"unitOptions",{get:function(){return this._filteredOrAllUnits(this._userUnitOptions)},set:function(a){this._userUnitOptions=
a;this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"unit",{get:function(){return this._userUnit?this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit):this._findSelectableUnit(this.defaultUnit)},set:function(a){this._userUnit=a?this._findSelectableUnit(a,this._userUnit):null;this.notifyChange("unit")},enumerable:!0,configurable:!0});p.prototype.clearMeasurement=function(){this.tool&&this.tool.clearMeasurement()};
p.prototype._toggleTool=function(){n.toggle(this.view,this.tool,this.visible)||this.tool&&"measured"!==this.tool.model.state&&this.clearMeasurement()};p.prototype._findSelectableUnit=function(a,b){var f=this.unitOptions;return-1!==f.indexOf(a)?a:b?this._findSelectableUnit(b):f[0]};p.prototype._filteredOrAllUnits=function(a){if(!a)return b.slice();a=a.filter(function(a){return-1!==b.indexOf(a)});return 0===a.length?b.slice():a};a([g.property({dependsOn:["view.ready","tool.isMeasuring"],readOnly:!0})],
p.prototype,"state",null);a([g.property({dependsOn:["view.type"],readOnly:!0})],p.prototype,"isSupported",null);a([g.property()],p.prototype,"view",void 0);a([g.property({dependsOn:"view.ready tool.area tool.geodesicArea tool.areaLabel tool.perimeterLength tool.geodesicPerimeterLength tool.model.perimeterLengthLabel tool.model.measurementMode tool.model.measurementData".split(" "),readOnly:!0})],p.prototype,"measurement",null);a([g.property()],p.prototype,"visible",void 0);a([g.property({readOnly:!0})],
p.prototype,"tool",void 0);a([g.property({readOnly:!0,dependsOn:["defaultUnitFromPortal","defaultUnitFromSpatialReference"]})],p.prototype,"defaultUnit",null);a([g.property({readOnly:!0,dependsOn:["view.spatialReference"]})],p.prototype,"defaultUnitFromSpatialReference",null);a([g.property({readOnly:!0,dependsOn:["view.map.portalItem.portal.units","view.map.portalItem.portal.user.units"]})],p.prototype,"defaultUnitFromPortal",null);a([g.property({dependsOn:["view.spatialReference"]})],p.prototype,
"unitOptions",null);a([g.property({dependsOn:["unitOptions","defaultUnit"]})],p.prototype,"unit",null);a([g.property()],p.prototype,"clearMeasurement",null);return p=a([g.subclass("esri.widgets.AreaMeasurement3D.AreaMeasurement3DViewModel")],p)}(g.declared(m))})},"esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DTool":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/restHelper ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators ./AreaMeasurement3DController ./AreaMeasurement3DModel ./AreaMeasurement3DView".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(h){function n(a){var b=h.call(this)||this;b.model=new g({sceneView:a.view});return b}q(n,h);n.prototype.normalizeCtorArgs=function(a){return m(a,["view"])};n.prototype.initialize=function(){this._view=new f(this.model);this._controller=new x(this.model,this._view)};n.prototype.activate=function(){this._controller.activate(this.model.sceneView);this._view.show()};n.prototype.deactivate=function(){this._controller.deactivate();this._view.hide()};n.prototype.reset=
function(){this.model.reset()};n.prototype.clearMeasurement=function(){this.model.clearMeasurement()};a([p.property({constructOnly:!0})],n.prototype,"model",void 0);a([p.aliasOf("model.mode")],n.prototype,"mode",void 0);a([p.aliasOf("model.unit")],n.prototype,"unit",void 0);a([p.aliasOf("model.areaLabel")],n.prototype,"areaLabel",void 0);a([p.aliasOf("model.area")],n.prototype,"area",void 0);a([p.aliasOf("model.geodesicArea")],n.prototype,"geodesicArea",void 0);a([p.aliasOf("model.pathLengthLabel")],
n.prototype,"pathLengthLabel",void 0);a([p.aliasOf("model.pathLength")],n.prototype,"pathLength",void 0);a([p.aliasOf("model.geodesicPathLength")],n.prototype,"geodesicPathLength",void 0);a([p.aliasOf("model.perimeterLengthLabel")],n.prototype,"perimeterLengthLabel",void 0);a([p.aliasOf("model.perimeterLength")],n.prototype,"perimeterLength",void 0);a([p.aliasOf("model.geodesicPerimeterLength")],n.prototype,"geodesicPerimeterLength",void 0);a([p.aliasOf("model.isMeasuring")],n.prototype,"isMeasuring",
void 0);a([p.aliasOf("model.validMeasurement")],n.prototype,"validMeasurement",void 0);a([p.aliasOf("model.viewData")],n.prototype,"viewData",void 0);return n=a([p.subclass("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DTool")],n)}(p.declared(h))})},"esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Handles ../../../../../geometry/ScreenPoint ./AreaMeasurement3DView".split(" "),
function(B,w,q,a,m,h,p){function x(a){return"mouse"!==a.pointerType||0===a.button}return function(){function a(a,g){this._dragVertices={};this._viewEventHandles=new m;this._tempPickRequest=new p.PickRequest;this.model=a;this.view=g;this.model.reset()}a.prototype.activate=function(a){var f=this,g=this._viewEventHandles;g.add(a.on("immediate-click",function(a){return f._handleImmediateClick(a)}));g.add(a.on("click",function(a){return f._handleClick(a)}));g.add(a.on("double-click",function(a){return f._handleDoubleClick(a)}));
g.add(a.on("drag",function(a){return f._handleDrag(a)}));g.add(a.on("pointer-move",function(a){return f._handlePointerMove(a)}));g.add(a.on("pointer-down",function(a){return f._handlePointerDown(a)}));g.add(a.on("pointer-up",function(a){return f._handlePointerUp(a)}));g.add(a.on("pointer-drag",function(a){return f._handlePointerDrag(a)}));g.add(a.on("key-down",function(a){return f._handleKeyDown(a)}))};a.prototype.deactivate=function(){this._viewEventHandles.removeAll()};a.prototype._handleDrag=function(a){0!==
this.model.draggedVertices.length&&a.stopPropagation()};a.prototype._handlePointerMove=function(a){var f=new h({x:a.x,y:a.y});"mouse"===a.pointerType&&this._hoverAt(f,a.pointerType)&&a.stopPropagation()};a.prototype._handlePointerDown=function(a){if(x(a)){var f=new h({x:a.x,y:a.y}),f=this.view.vertexHandleAt(f,a.pointerType);null==f||f in this._dragVertices||(this._dragVertices[a.pointerId]=f,this.model.draggedVertices.push(f));0<this.model.draggedVertices.length&&"measured"===this.model.state&&(this.model.state=
"editing");"mouse"!==a.pointerType&&this._removeHover()}};a.prototype._handlePointerUp=function(a){if(x(a)){var f=this._dragVertices[a.pointerId];null!=f&&(delete this._dragVertices[a.pointerId],this.model.draggedVertices.remove(f));0===this.model.draggedVertices.length&&"editing"===this.model.state&&(this.model.state="measured")}};a.prototype._handlePointerDrag=function(a){if(x(a)){var f=new h({x:a.x,y:a.y}),g=this._dragVertices[a.pointerId];if(null!=g){switch(a.action){case "update":this._moveVertexTo(g,
f,a.pointerType);break;case "end":delete this._dragVertices[a.pointerId],this.model.draggedVertices.remove(g)}a.stopPropagation()}}};a.prototype._handleImmediateClick=function(a){if(x(a)){var f=new h({x:a.x,y:a.y});switch(this.model.state){case "initial":if(this._addVertexAt(f,a.pointerType)){this.model.state="drawing";a.stopPropagation();return}break;case "drawing":var g=this.view.vertexHandleAt(f,a.pointerType);if(null===g){if(this._addVertexAt(f,a.pointerType)){a.stopPropagation();return}}else if(0===
g){this._updateHoveredHandle(f,a.pointerType);this.model.finishMeasurement();a.stopPropagation();return}break;case "measured":if(null===this.view.vertexHandleAt(f,a.pointerType)&&(this.model.clearMeasurement(),this._addVertexAt(f,a.pointerType))){this.model.state="drawing";a.stopPropagation();return}}"mouse"===a.pointerType&&this._hoverAt(f,a.pointerType)}};a.prototype._handleClick=function(a){x(a)&&a.stopPropagation()};a.prototype._handleDoubleClick=function(a){if(x(a)){var f=new h({x:a.x,y:a.y});
"drawing"===this.model.state&&null!=this.view.vertexHandleAt(f,a.pointerType)&&(this.model.finishMeasurement(),a.stopPropagation())}};a.prototype._handleKeyDown=function(a){"Escape"===a.key&&"drawing"===this.model.state&&(this.model.clearMeasurement(),a.stopPropagation());"Enter"===a.key&&"drawing"===this.model.state&&(this.model.finishMeasurement(),a.stopPropagation())};a.prototype._hoverAt=function(a,g){this._updateHoveredHandle(a,"mouse");this.view.requiresCursorPoint?(a=this._pick(a),a.mapPoint&&
(this.model.cursorPoint=a.mapPoint)):this.model.cursorPoint=null};a.prototype._removeHover=function(){this.model.cursorPoint=null;this.model.hoveredVertexHandle=null};a.prototype._addVertexAt=function(a,g){var f=this._pick(a);if(f.mapPoint)return this.model.path.add(f.mapPoint),this.model.hoveredVertexHandle="touch"!==g?this.model.path.length-1:null,!0;this._updateHoveredHandle(a,g);return!1};a.prototype._moveVertexTo=function(a,g,h){g=this._clipToScreen(g);if(null!=a){var b=this._pick(g);if(b.mapPoint&&
!this.view.overlapsAnyHandles(b.mapPoint,[a]))return this.model.path.update(a,b.mapPoint),this.model.hoveredVertexHandle="touch"!==h?a:null,!0}this._updateHoveredHandle(g,h);return!1};a.prototype._pick=function(a){var f=this._tempPickRequest;f.screenPoint=a;return this.view.pick(f)};a.prototype._clipToScreen=function(a){return new h({x:Math.max(0,Math.min(this.model.sceneView.width,a.x)),y:Math.max(0,Math.min(this.model.sceneView.height,a.y))})};a.prototype._updateHoveredHandle=function(a,g){this.model.hoveredVertexHandle=
"touch"!==g?this.view.vertexHandleAt(a,g):null};return a}()})},"esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DView":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Handles ../../../../../core/StackedObjectPool ../directLineMeasurement3D/LaserLineRenderer ../support/Label ../support/LabelSegment ../support/labelUtils ../support/PathSegmentInterpolator ../support/viewUtils ../../../lib/gl-matrix ../../../webgl-engine/lib/Geometry ../../../webgl-engine/lib/GeometryData ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Layer ../../../webgl-engine/lib/Object3D ../../../webgl-engine/lib/Selector ../../../webgl-engine/materials/CheckerBoardMaterial ../../../webgl-engine/materials/ColorMaterial ../../../webgl-engine/materials/DefaultMaterial ../../../webgl-engine/materials/RibbonLineMaterial ../../../webgl-engine/parts/Model".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I){var M=new h(function(){return b.vec3d.create()}),N;(function(a){a[a.Small=12]="Small";a[a.Large=16]="Large"})(N||(N={}));var P={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,
.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25};B=function(){function a(a,f){void 0===f&&(f={});this._visible=!1;this._laserLineRenderer=null;this._pathSegmentObjects=[];this._perimeterSegmentObjects=[];this._vertexHandleObjects=[];this._projectionLineObjects=[];this._areaLabel=new x(N.Large);this._pathLengthLabel=
new x(N.Small);this._cursorSegmentLengthLabel=new x(N.Small);this._perimeterLengthLabel=new x(N.Small);this._pathLabelSegments=[];this._perimeterLabelSegments=[];this._cursorSegmentLengthLabelSegment=new g;this._listenerHandles=null;this._origin=b.vec3d.create();this._originTransform=b.mat4d.create();this._tempStartPosition=b.vec3d.create();this._tempEndPosition=b.vec3d.create();this._tempHandlePosition=b.vec3d.create();this._tempMat4=b.mat4d.create();this._model=a;this._sceneView=a.sceneView;this._params=
u.copyParameter(P,f);this._layer=new C("path-measurement-tool",{},"path-measurement-tool");this._createMaterials();this._createObjects();this._selector=new F(this._sceneView.viewingMode)}a.prototype.destroy=function(){this.hide()};Object.defineProperty(a.prototype,"requiresCursorPoint",{get:function(){return"initial"===this._model.state||"drawing"===this._model.state},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){a?
this.show():this.hide()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"testData",{get:function(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel},laserLineRenderer:this._laserLineRenderer}},enumerable:!0,configurable:!0});a.prototype.show=function(){if(!this._visible){this._visible=!0;var a=this._sceneView._stage;this._laserLineRenderer=new p(this._sceneView.renderCoordsHelper,
{glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,globalAlpha:this._params.laserLineGlobalAlpha});a.addRenderPlugin(this._laserLineRenderer.renderSlots,this._laserLineRenderer);this._addToStage(a);this._areaLabel.addToView(this._sceneView);this._pathLengthLabel.addToView(this._sceneView);this._cursorSegmentLengthLabel.addToView(this._sceneView);this._perimeterLengthLabel.addToView(this._sceneView);
this._initializeListeners();this._updateAll(this._model.viewData)}};a.prototype.hide=function(){if(this._visible){this._visible=!1;var a=this._sceneView._stage;a.removeRenderPlugin(this._laserLineRenderer);this._laserLineRenderer=null;this._destroyListeners();this._updatePathLength(0);this._removeFromStage(a);this._areaLabel.removeFromView(this._sceneView);this._pathLengthLabel.removeFromView(this._sceneView);this._cursorSegmentLengthLabel.removeFromView(this._sceneView);this._perimeterLengthLabel.removeFromView(this._sceneView);
this._sceneView.cursor=null}};a.prototype.vertexHandleAt=function(a,b){a=a.toArray();b="touch"===b?this._params.handleRadiusTouch:this._params.handleRadiusMouse;for(var f=this._model.path,g=0;g<f.length;++g)if(u.pointToScreenPositionDistance(f.vertex(g),a,this._sceneView)<b)return g;return null};a.prototype.pick=function(f){for(var g=new Set,h=this._sceneView._stage.getViewContent(),m=this._sceneView._stage.getAll(I.ContentType.LAYER),n=0;n<h.length;n++){var p=m[h[n]];p&&p!==this._layer&&p.isPickable&&
g.add(p.id)}h=this._sceneView.spatialReference;f=[f.screenPoint.x,this._sceneView.height-f.screenPoint.y];m=this._sceneView.sceneIntersectionHelper.pickSelectorInScreen(f,this._selector,g,!0);m=m.minResult;g=b.vec3d.create();this._sceneView.basemapTerrain.isSeeThrough()&&!m.getIntersectionPoint(g)&&(m=this._sceneView.sceneIntersectionHelper.pickSelectorInScreen(f,this._selector,null,!1),m=m.minResult);if(!m.getIntersectionPoint(g))return new a.PickResult;f=this._sceneView.renderCoordsHelper.fromRenderCoords(g,
h);return new a.PickResult("TerrainRenderer"===m.intersector?"surface":"feature",g,f)};a.prototype.overlappingHandles=function(a,b){return u.pointToPointScreenDistance(a,b,this._sceneView)<=this._params.handleRadius};a.prototype.overlapsAnyHandles=function(a,b){void 0===b&&(b=[]);for(var f=this._model.path,g=0;g<f.length;++g)if(!(0<=b.indexOf(g))&&this.overlappingHandles(a,f.vertex(g)))return!0;return!1};a.prototype._createMaterials=function(){this._handleMaterial=new K({diffuse:this._params.handleColor,
transparent:1!==this._params.handleOpacity,opacity:this._params.handleOpacity,castShadows:!1},"handle");this._handleMaterial.renderOccluded=!0;this._pathLineMaterial=new y({width:this._params.pathLineWidth,color:this._params.pathLineColor,polygonOffset:!0},"path-line");this._pathLineMaterial.renderOccluded=!0;this._intersectingPathLineMaterial=new y({width:this._params.pathLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0},"intersecting-path-line");this._intersectingPathLineMaterial.renderOccluded=
!0;this._perimeterLineMaterial=new y({width:this._params.perimeterLineWidth,color:this._params.perimeterLineColor,polygonOffset:!0},"perimeter-line");this._perimeterLineMaterial.renderOccluded=!0;this._intersectingPerimeterLineMaterial=new y({width:this._params.perimeterLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0},"intersecting-perimeter-line");this._intersectingPerimeterLineMaterial.renderOccluded=!0;this._projectionLineMaterial=new y({width:this._params.projectionLineWidth,
color:this._params.projectionLineColor,polygonOffset:!0,stippleLength:0},"projection-line");this._projectionLineMaterial.renderOccluded=!0;this._fillMaterial=new Q({color:this._params.fillColor,transparent:1!==this._params.fillColor[3],polygonOffset:!1},"fill");this._fillMaterial.renderOccluded=!0;this._checkerBoardMaterial=new H({color1:this._params.areaColor1,color2:this._params.areaColor2,transparent:!0,polygonOffset:!0},"checker-board");this._checkerBoardMaterial.renderOccluded=!0};a.prototype._createObjects=
function(){this._cursorHandleObject=new A;this._cursorSegmentObject=new A;this._areaObject=new A};a.prototype._addToStage=function(a){a.add(I.ContentType.LAYER,this._layer);a.add(I.ContentType.MATERIAL,this._handleMaterial);a.add(I.ContentType.MATERIAL,this._pathLineMaterial);a.add(I.ContentType.MATERIAL,this._intersectingPathLineMaterial);a.add(I.ContentType.MATERIAL,this._perimeterLineMaterial);a.add(I.ContentType.MATERIAL,this._intersectingPerimeterLineMaterial);a.add(I.ContentType.MATERIAL,this._projectionLineMaterial);
a.add(I.ContentType.MATERIAL,this._fillMaterial);a.add(I.ContentType.MATERIAL,this._checkerBoardMaterial);a.addToViewContent([this._layer.id])};a.prototype._removeFromStage=function(a){a.removeFromViewContent([this._layer.id]);a.remove(I.ContentType.LAYER,this._layer.id);a.remove(I.ContentType.MATERIAL,this._handleMaterial.id);a.remove(I.ContentType.MATERIAL,this._pathLineMaterial.id);a.remove(I.ContentType.MATERIAL,this._intersectingPathLineMaterial.id);a.remove(I.ContentType.MATERIAL,this._perimeterLineMaterial.id);
a.remove(I.ContentType.MATERIAL,this._intersectingPerimeterLineMaterial.id);a.remove(I.ContentType.MATERIAL,this._projectionLineMaterial.id);a.remove(I.ContentType.MATERIAL,this._fillMaterial.id);a.remove(I.ContentType.MATERIAL,this._checkerBoardMaterial.id)};a.prototype._updateMouseCursor=function(){if("drawing"===this._model.state||"initial"===this._model.state)this._sceneView.cursor="crosshair";else if("editing"===this._model.state||"measured"===this._model.state)this._sceneView.cursor=0<this._model.draggedVertices.length?
"grabbing":null!=this._model.hoveredVertexHandle?"pointer":"crosshair"};a.prototype._syncViewData=function(a){var b=this,f=a.pathChanges;"full"===f.change?this._updateAll(a):"incremental"===f.change&&(f.updatedVertices.forEach(function(f){var g=(f-1+b._model.path.length)%b._model.path.length;b._updatePathSegment(a,f);b._updatePathSegment(a,g);b._updateVertexHandle(a,f);b._updateArea(a);b._updatePerimeterSegments(a);b._updateProjectionLines(a);b._updateLaserLine();b._updateLabels(a)}),f.updatedVertices.has(this._model.path.length-
1)&&this._updateCursorSegment(a));var g=f.change;f.clear();return g};a.prototype._updateAfterSyncViewData=function(a){var b=this._model.viewData;"full"!==this._syncViewData(b)&&a&&a(b)};a.prototype._updateOrigin=function(a){u.midpoint(a.positionsRenderCoords,this._origin);b.mat4d.identity(this._originTransform);b.mat4d.translate(this._originTransform,this._origin)};a.prototype._updateAll=function(a){this._updateOrigin(a);this._updatePathLength(a.path.length);this._updatePathSegments(a);this._updatePerimeterSegments(a);
this._updateHandles(a);this._updateMouseCursor();this._updateArea(a);this._updateProjectionLines(a);this._updateLabels(a);this._updateLaserLine()};a.prototype._updateCameraDependent=function(a){this._updateHandles(a);this._updateProjectionLines(a);this._updateLabels(a)};a.prototype._updatePathLength=function(a){this._resizeObject3DArray(this._pathSegmentObjects,a);this._resizeObject3DArray(this._perimeterSegmentObjects,a);this._resizeObject3DArray(this._vertexHandleObjects,a);u.resizeArray(this._pathLabelSegments,
a,function(){return new g});u.resizeArray(this._perimeterLabelSegments,a,function(){return new g})};a.prototype._updatePathSegments=function(a){for(var b=0;b<this._pathSegmentObjects.length;++b)this._updatePathSegment(a,b);this._updateCursorSegment(a)};a.prototype._updatePathSegment=function(a,b){var f=a.path,g=this._pathSegmentObjects[b];a.validMeasurement||b<f.length-1?(this._updatePathSegmentObject(g,a.positionsRenderCoords[b],a.positionsRenderCoords[(b+1)%f.length],this._origin,this._originTransform,
a.intersectingSegments.has(b),this._pathLabelSegments[b],a.validMeasurement?"center":"end"),this._addObject3D(g)):(g.removeAllGeometries(),this._removeObject3D(g))};a.prototype._updateCursorSegment=function(a){a=this._sceneView.renderCoordsHelper;var b=this._model.path,f=this._cursorSegmentObject;0<b.length&&"drawing"===this._model.state&&this._model.cursorPoint?(a.toRenderCoords(b.back,this._tempStartPosition),a.toRenderCoords(this._model.cursorPoint,this._tempEndPosition),this._updatePathSegmentObject(f,
this._tempStartPosition,this._tempEndPosition,this._origin,this._originTransform,!1,this._cursorSegmentLengthLabelSegment,"end"),this._addObject3D(f)):(f.removeAllGeometries(),this._removeObject3D(f))};a.prototype._updatePathSegmentObject=function(a,b,f,g,h,m,n,l){this._createInterpolatedLineGeometry(a,m?this._intersectingPathLineMaterial:this._pathLineMaterial,"path-segment",b,f,g,h,this._model.measurementMode,n,l)};a.prototype._updatePerimeterSegments=function(a){for(var b=0;b<this._perimeterSegmentObjects.length;++b)this._updatePerimeterSegment(a,
b)};a.prototype._updatePerimeterSegment=function(a,b){var f=a.path,g=this._perimeterSegmentObjects[b];a.validMeasurement&&"geodesic"!==this._model.measurementMode?(this._updatePerimeterSegmentObject(g,a.positionsFittedRenderCoords[b],a.positionsFittedRenderCoords[(b+1)%f.length],this._origin,this._originTransform,a.intersectingSegments.has(b),this._perimeterLabelSegments[b]),this._addObject3D(g)):(g.removeAllGeometries(),this._removeObject3D(g))};a.prototype._updatePerimeterSegmentObject=function(a,
b,f,g,h,m,n){this._createInterpolatedLineGeometry(a,m?this._intersectingPerimeterLineMaterial:this._perimeterLineMaterial,"perimeter-segment",b,f,g,h,this._model.measurementMode,n)};a.prototype._updateHandles=function(a){for(var b=0;b<this._vertexHandleObjects.length;++b)this._updateVertexHandle(a,b);this._updateCursorHandle(a)};a.prototype._updateVertexHandle=function(a,b){var f=this._sceneView._stage.getCamera(),g=this._vertexHandleObjects[b];this._updateHandleObject(g,a.positionsRenderCoords[b],
!0,this._model.hoveredVertexHandle===b,this._model.draggedVertices.includes(b),f);this._addObject3D(g)};a.prototype._updateCursorHandle=function(a){a=this._cursorHandleObject;if("drawing"===this._model.state&&this._model.cursorPoint){var b=this._sceneView._stage.getCamera(),f=this._tempHandlePosition;this._sceneView.renderCoordsHelper.toRenderCoords(this._model.cursorPoint,f);this._updateHandleObject(a,f,!0,!1,!1,b);this._addObject3D(a)}else a.removeAllGeometries(),this._removeObject3D(a)};a.prototype._updateHandleObject=
function(b,f,g,h,m,n){b.removeAllGeometries();g&&!m&&(u.scaleTranslateMatrix((h?this._params.handleRadiusHovered:this._params.handleRadius)*n.computePixelSizeAt(f),f,this._tempMat4),b.addGeometry(a._handleGeometry,[this._handleMaterial],this._tempMat4))};a.prototype._updateArea=function(a){switch(this._model.measurementMode){case "euclidean":this._updateAreaEuclidean(a);break;case "geodesic":this._updateAreaGeodesic(a)}};a.prototype._updateAreaEuclidean=function(a){var f=this,g=this._areaObject;if(a.validMeasurement&&
0===a.intersectingSegments.size&&a.triangleIndices){var h=[],m=b.vec3d.create();a.positionsFittedRenderCoords.forEach(function(a){b.vec3d.subtract(a,f._origin,m);h.push(m[0],m[1],m[2])});var n=[];a.positionsProjected.forEach(function(a){n.push(a[0],a[1])});var p=new D({position:{size:3,data:h},uv0:{size:2,data:n}},{position:a.triangleIndices,uv0:a.triangleIndices}),p=new t(p,"area");g.removeAllGeometries();g.addGeometry(p,[this._checkerBoardMaterial],this._originTransform);this._addObject3D(g);this._checkerBoardMaterial.setParameterValues({size:[a.checkerSize,
a.checkerSize]})}else g.removeAllGeometries(),this._removeObject3D(g)};a.prototype._updateAreaGeodesic=function(a){a=this._areaObject;a.removeAllGeometries();this._removeObject3D(a)};a.prototype._updateProjectionLines=function(a){var b=a.path;this._resizeObject3DArray(this._projectionLineObjects,b.length);for(var f=0;f<b.length;++f)this._updateProjectionLine(a,f);for(var g=Infinity,f=0;f<b.length;++f)g=Math.max(this._sceneView._stage.getCamera().computePixelSizeAt(a.positionsRenderCoords[f])),g=Math.max(this._sceneView._stage.getCamera().computePixelSizeAt(a.positionsFittedRenderCoords[f]));
this._projectionLineMaterial.setParameterValues({stippleLength:this._params.projectionLineStippleSize*g})};a.prototype._updateProjectionLine=function(a,f){var g=this._projectionLineObjects[f];g.removeAllGeometries();if(a.validMeasurement&&"euclidean"===this._model.measurementMode){a=b.vec3d.create();b.vec3d.subtract(this._model.viewData.positionsRenderCoords[f],this._origin,a);var h=b.vec3d.create();b.vec3d.subtract(this._model.viewData.positionsFittedRenderCoords[f],this._origin,h);f=new t(E.createPolylineGeometry([a,
h]),"projected-line");g.addGeometry(f,[this._projectionLineMaterial],this._originTransform);this._addObject3D(g)}else this._removeObject3D(g)};a.prototype._updateLabels=function(a){var b=this,g=this._sceneView._stage.getCamera(),h=this._params.labelDistance,m=this._model,n="geodesic"===m.measurementMode,p="drawing"===m.state,l=function(d,c){return d.visible&&c.visible&&b._sceneView.overlay.overlaps(d.textItem,c.textItem)},u=this._areaLabel,z=f.positionLabelOnPoint(u,a.areaCentroid,g);u.text=m.areaLabel;
u.visible=z&&a.validMeasurement&&0===a.intersectingSegments.size&&null!=m.areaLabel;u=this._pathLengthLabel;z=f.positionLabelOnCorner(u,this._pathLabelSegments[a.pathLengthLabelSegmentIndex],this._cursorSegmentLengthLabelSegment,h,g);u.text=m.pathLengthLabel;u.visible=z&&p&&0<m.path.length;u=this._cursorSegmentLengthLabel;z=this._cursorSegmentLengthLabelSegment;z=f.positionLabelOnSegment(u,z,h,"bottom",g);u.text=m.cursorSegmentLengthLabel;u.visible=z&&p&&m.cursorSegmentLength&&0!==m.cursorSegmentLength.value;
l(this._cursorSegmentLengthLabel,this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1);l(this._pathLengthLabel,this._areaLabel)&&(this._pathLengthLabel.visible=!1);u=this._perimeterLengthLabel;if(m.validMeasurement&&0===a.intersectingSegments.size)for(p=0;p<a.path.length;++p)if(z=(a.perimeterLengthLabelSegmentIndex+p)%a.path.length,z=n?this._pathLabelSegments[z]:this._perimeterLabelSegments[z],z=f.positionLabelOnSegment(u,z,h,"top",g),u.text=m.perimeterLengthLabel,u.visible=z,l(u,this._areaLabel))u.visible=
!1;else break;else u.visible=!1};a.prototype._lastAddedDraggedVertex=function(){var a=this._model.draggedVertices;return 0<a.length?a.items[a.length-1]:null};a.prototype._getFocusPoint=function(){var a=this._model,b=this._lastAddedDraggedVertex();switch(a.state){case "drawing":return a.cursorPoint?a.cursorPoint:a.path.vertex(null!=b?b:a.path.length-1);case "editing":return null!=b?a.path.vertex(b):null;default:return a.cursorPoint}};a.prototype._updateLaserLine=function(){var a=this._model,b=this._params.laserLineEnabled&&
"measured"!==a.state;this._laserLineRenderer.focusSphereActive=!1;this._laserLineRenderer.segmentActive=!1;a=this._getFocusPoint();b&&a?(b=this._tempHandlePosition,this._sceneView.renderCoordsHelper.toRenderCoords(a,b),this._laserLineRenderer.focusPosition=b,this._laserLineRenderer.focusPlaneActive=!0):this._laserLineRenderer.focusPlaneActive=!1};a.prototype._addObject3D=function(a){a.parentLayer||(this._layer.addObject(a),this._sceneView._stage.add(I.ContentType.OBJECT,a))};a.prototype._removeObject3D=
function(a){a.parentLayer&&(this._layer.removeObject(a),this._sceneView._stage.remove(I.ContentType.OBJECT,a.id))};a.prototype._resizeObject3DArray=function(a,b){var f=this;u.resizeArray(a,b,function(){return new A},function(a){f._removeObject3D(a)})};a.prototype._createInterpolatedLineGeometry=function(a,f,g,h,m,n,p,l,q,z){M.push();var d=this._sceneView.renderCoordsHelper,c=[],e=[],k=function(k,d){var a=M.allocate();b.vec3d.subtract(k,n,a);c.push(a);e.push(d)};if("euclidean"===l){var r=M.allocate();
u.midpoint([h,m],r);l=M.allocate();d.worldUpAtPosition(r,l);k(h,l);k(m,l);q&&q.update(h,m,z)}else{h=this._getSegmentInterpolator(h,m);m=this._params.lineSubdivisions+1&-2;var v=r=null,G=m/2-1,J=m/2;"start"===z?(G=0,J=1):"end"===z&&(G=m-2,J=m-1);for(var L=0;L<m;++L){var U=L/(m-1),X=M.allocate();l=M.allocate();h.eval(U,X);d.worldUpAtPosition(X,l);L===G&&(r=X);L===J&&(v=X);k(X,l)}q&&q.update(r,v,z)}g=new t(E.createPolylineGeometry(c,e),g);a.removeAllGeometries();a.addGeometry(g,[f],p);M.pop()};a.prototype._getSegmentInterpolator=
function(a,b){var f=this._sceneView.spatialReference,g=this._sceneView.renderCoordsHelper.spatialReference;return f.isWebMercator||f.isWGS84?new n.Spherical(a,b,g,g):new n.Linear(a,b)};a.prototype._initializeListeners=function(){var a=this;this._listenerHandles=new m;this._listenerHandles.add(this._model.watch("state",function(){a._updateMouseCursor();a._updateLaserLine()}));this._listenerHandles.add(this._model.draggedVertices.on("change",function(){a._updateLaserLine()}));this._listenerHandles.add(this._model.watch("hoveredVertexHandle",
function(){a._updateMouseCursor();a._updateAfterSyncViewData(function(b){a._updateHandles(b)})}));this._listenerHandles.add(this._model.draggedVertices.on("change",function(){a._updateMouseCursor();a._updateAfterSyncViewData(function(b){a._updateHandles(a._model.viewData)})}));this._listenerHandles.add(this._model.watch("cursorPoint",function(){a._updateAfterSyncViewData(function(b){a._updateCursorSegment(b);a._updateCursorHandle(b);"drawing"===a._model.state&&a._updateLabels(b);a._updateLaserLine()})}));
this._listenerHandles.add(this._sceneView.state.watch("camera",function(){a._updateAfterSyncViewData(function(b){a._updateCameraDependent(a._model.viewData)})}));this._listenerHandles.add(this._model.watch(["unit","measurementMode"],function(){a._updateAll(a._model.viewData)}));this._listenerHandles.add(this._model.watch("viewData",function(b){a._syncViewData(b)}))};a.prototype._destroyListeners=function(){this._listenerHandles.destroy();this._listenerHandles=null};a._handleGeometry=new t(E.createSphereGeometry(1,
32,32),"handle");return a}();(function(a){var b=function(){return function(){}}();a.PickRequest=b;b=function(){return function(a,b,f){void 0===a&&(a=null);void 0===b&&(b=null);void 0===f&&(f=null);this.type=a;this.scenePoint=b;this.mapPoint=f}}();a.PickResult=b})(B||(B={}));return B})},"esri/views/3d/webgl-engine/materials/CheckerBoardMaterial":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../support/buffer/InterleavedLayout ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/Util ./internal/bufferWriters ./internal/MaterialUtil ./internal/MaterialUtil ../shaders/CheckerBoardPrograms".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u){B=function(a){function g(b,g){g=a.call(this,g)||this;g.canBeMerged=!1;g.bufferWriter=new E;g.params=f.copyParameters(b,t);return g}q(g,a);g.prototype.dispose=function(){};g.prototype.getParameterValues=function(){var a=this.params;return{size:a.size,color1:a.color1,color2:a.color2,transparent:a.transparent,polygonOffset:a.polygonOffset}};g.prototype.setParameterValues=function(a){f.updateParameters(this.params,a)&&this.notifyDirty("matChanged")};g.prototype.getParams=
function(){return this.params};g.prototype.intersect=function(a,b,f,g,h,m,p,u){return n.intersectTriangleGeometry(a,b,f,g,h,m,p)};g.prototype.getGLMaterials=function(){return{color:b,depthShadowMap:void 0,normal:void 0,depth:void 0,highlight:void 0}};g.prototype.getAllTextureIds=function(){return[]};return g}(h);var b=function(a){function b(b,g,h){h=a.call(this,b,g)||this;h.programRep=g;h.params=f.copyParameters(b.getParams());h.selectProgram();return h}q(b,a);b.prototype.selectProgram=function(){this.program=
this.programRep.getProgram(u.colorPass)};b.prototype.updateParameters=function(){this.params=this.material.getParameterValues();this.selectProgram()};b.prototype.beginSlot=function(a){return a===(this.params.transparent?p.TRANSPARENT_MATERIAL:p.OPAQUE_MATERIAL)};b.prototype.getProgram=function(){return this.program};b.prototype.getDrawMode=function(a){return 4};b.prototype.bind=function(a,b){b=this.program;a.setDepthTestEnabled(!0);a.setDepthWriteEnabled(!1);a.setFaceCullingEnabled(!1);this.params.transparent&&
(a.setBlendingEnabled(!0),a.setBlendFunctionSeparate(770,771,1,771));this.params.polygonOffset&&(a.setPolygonOffsetFillEnabled(!0),a.setPolygonOffset(0,-25));a.bindProgram(b);b.setUniform2fv("size",this.params.size);b.setUniform4fv("color1",this.params.color1);b.setUniform4fv("color2",this.params.color2)};b.prototype.bindView=function(a,b){a=b.origin;var g=this.getProgram();f.bindView(a,b.view,g)};b.prototype.bindInstance=function(a,b){this.getProgram().setUniformMatrix4fv("model",b.transformation)};
b.prototype.release=function(a){a.setDepthWriteEnabled(!0);this.params.transparent&&a.setBlendingEnabled(!1);this.params.polygonOffset&&a.setPolygonOffsetFillEnabled(!1)};return b}(m),t={size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,polygonOffset:!1},D=a.newLayout().vec3f(x.VertexAttrConstants.POSITION).vec2f(x.VertexAttrConstants.UV0),E=function(){function a(){this.vertexBufferLayout=D}a.prototype.allocate=function(a){return D.createBuffer(a)};a.prototype.elementCount=function(a){return a.indices[x.VertexAttrConstants.POSITION].length};
a.prototype.write=function(a,b,f,h,m){g.writePosition(b.indices[x.VertexAttrConstants.POSITION],b.vertexAttr[x.VertexAttrConstants.POSITION].data,a.transformation,h.position,m);g.writeBufferVec2(b.indices[x.VertexAttrConstants.UV0],b.vertexAttr[x.VertexAttrConstants.UV0].data,h.uv0,m)};return a}();return B})},"esri/views/3d/webgl-engine/shaders/CheckerBoardPrograms":function(){define(["require","exports","../lib/DefaultVertexAttributeLocations","./sources/resolver"],function(B,w,q,a){Object.defineProperty(w,
"__esModule",{value:!0});w.colorPass={name:"checker-board-color",shaders:{vertexShader:a.resolveIncludes("materials/checkerBoard/checkerBoard.vert"),fragmentShader:a.resolveIncludes("materials/checkerBoard/checkerBoard.frag")},attributes:q.Default3D}})},"esri/views/3d/interactive/measurementTools/areaMeasurement3D/AreaMeasurement3DModel":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/Collection ../../../../../core/Handles ../../../../../core/Quantity ../../../../../core/quantityUtils ../../../../../core/unitUtils ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/SpatialReference ./MeasurementData ./PathChanges ../support/measurementUtils ../support/Path ../support/setUtils ../support/UnitNormalizer ../../../support/mathUtils ../../../support/projectionUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q){return function(m){function y(){var a=null!==m&&m.apply(this,arguments)||this;a._unitNormalizer=new F;a._measurementData=new t;a._measurementDataChanges=new D;a._viewDataChanges=new D;a._handles=new p;a.path=new C;a.pathVersion=0;a.cursorPoint=null;a.hoveredVertexHandle=null;a.draggedVertices=new h;a.state="initial";a.mode="auto";a.unit="metric";a.maxRelativeErrorCoplanar=.005;a.maxRelativeErrorAlmostCoplanar=.01;a.verticalAngleThreshold=80;a.geodesicMeasurementDistanceThreshold=
1E5;return a}q(y,m);y.prototype.initialize=function(){var a=this;this._handles.add(n.init(this.sceneView,"spatialReference",function(f){a._renderSpatialReference=a.sceneView.renderSpatialReference;a._worldSpatialReference=!f||f.isWGS84||f.isWebMercator?Q.WGS84ECEFSpatialReference:f;a._unitNormalizer.spatialReference=f;a._unitNormalizer.ignoredSpatialReferences=[b.WGS84,b.WebMercator]}),"scene-view");this.reset();var f=function(){a._set("pathVersion",a.pathVersion+1)};this._handles.add(this.path.on("cleared",
function(){a._measurementDataChanges.fullChange();a._set("pathVersion",0)}));this._handles.add(this.path.on("vertex-added",function(b){a._measurementDataChanges.fullChange();f()}));this._handles.add(this.path.on("vertex-inserted",function(b){a._measurementDataChanges.fullChange();f()}));this._handles.add(this.path.on("vertex-removed",function(b){a._measurementDataChanges.fullChange();f()}));this._handles.add(this.path.on("vertex-updated",function(b){a._measurementDataChanges.incrementalChange(b.index);
f()}))};y.prototype.destroy=function(){this._handles.destroy();this._handles=null};Object.defineProperty(y.prototype,"validMeasurement",{get:function(){return 3<=this.path.length&&"measured"===this.state||"editing"===this.state},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"isMeasuring",{get:function(){return 1<=this.path.length},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"measurementData",{get:function(){this._viewDataChanges.merge(this._measurementDataChanges);
var a=A.clone(this._measurementData.intersectingSegments),b=A.clone(this._measurementData.geodesicIntersectingSegments);this._measurementData.update(this.path,this._measurementDataChanges,this.sceneView,this._unitNormalizer,this.validMeasurement,this._renderSpatialReference,this._worldSpatialReference,{maxRelativeErrorCoplanar:this.maxRelativeErrorCoplanar,maxRelativeErrorAlmostCoplanar:this.maxRelativeErrorAlmostCoplanar,verticalAngleThreshold:this.verticalAngleThreshold});E.compareSets(this._measurementData.intersectingSegments,
a)||this._viewDataChanges.fullChange();E.compareSets(this._measurementData.geodesicIntersectingSegments,b)||this._viewDataChanges.fullChange();return this._measurementData},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"area",{get:function(){return this.measurementData.area},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"geodesicArea",{get:function(){return this.measurementData.geodesicArea},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,
"areaLabel",{get:function(){return this._formatAreaLabel("geodesic"===this.measurementMode?this.measurementData.geodesicArea:this.measurementData.area,this.unit)},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"pathLength",{get:function(){return this.measurementData.pathLength},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"geodesicPathLength",{get:function(){return this.measurementData.geodesicPathLength},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,
"pathLengthLabel",{get:function(){return this._formatLengthLabel("geodesic"===this.measurementMode?this.measurementData.geodesicPathLength:this.measurementData.pathLength,this.unit)},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"perimeterLength",{get:function(){return this.measurementData.perimeterLength},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"geodesicPerimeterLength",{get:function(){return this.measurementData.geodesicPathLength},enumerable:!0,configurable:!0});
Object.defineProperty(y.prototype,"perimeterLengthLabel",{get:function(){return this.measurementData.perimeterLength&&this._formatLengthLabel("geodesic"===this.measurementMode?this.measurementData.geodesicPathLength:this.measurementData.perimeterLength,this.unit)},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"cursorSegmentLength",{get:function(){return this.path.back&&this.cursorPoint&&new x(this._unitNormalizer.normalizeDistance(E.segmentLengthEuclidean(this.path.back,this.cursorPoint,
this._worldSpatialReference)),"meters")},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"geodesicCursorSegmentLength",{get:function(){return this.path.back&&this.cursorPoint&&new x(E.segmentLengthGeodesic(this.path.back,this.cursorPoint),"meters")},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"cursorSegmentLengthLabel",{get:function(){return this._formatLengthLabel("geodesic"===this.measurementMode?this.geodesicCursorSegmentLength:this.cursorSegmentLength,this.unit)},
enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"viewData",{get:function(){var a=this.measurementData,b="geodesic"===this.measurementMode,g=b?this.geodesicArea:this.area,h=1;g&&(g=this._toPreferredAreaUnit(g,this.unit),h=H.nextHighestPowerOfTen(Math.sqrt(g.value)/Math.sqrt(300)),h*=Math.sqrt(f.convertUnit(1,g.unit,"square-meters")),h/=this._unitNormalizer.normalizeDistance(1));return{validMeasurement:this.validMeasurement,path:this.path,pathChanges:this._viewDataChanges,positionsGeographic:a.positionsGeographic,
positionsRenderCoords:a.positionsRenderCoords,positionsProjected:a.positionsProjectedWorldCoords,positionsFittedRenderCoords:a.positionsFittedRenderCoords,intersectingSegments:b?a.geodesicIntersectingSegments:a.intersectingSegments,triangleIndices:b?a.geodesicTriangleIndices:a.triangleIndices,fittingMode:a.fittingMode,areaCentroid:b?a.geodesicAreaCentroidRenderCoords:a.areaCentroidRenderCoords,areaNormal:b?a.geodesicAreaNormalRenderCoords:a.areaNormalRenderCoords,pathLengthLabelSegmentIndex:this.validMeasurement?
0:this.path.length-2,perimeterLengthLabelSegmentIndex:0,checkerSize:h}},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"measurementMode",{get:function(){var a=this.mode;"auto"===a&&(a="euclidean",(this.geodesicPathLength?this.geodesicPathLength.value:0)+(!this.validMeasurement&&this.geodesicCursorSegmentLength?this.geodesicCursorSegmentLength.value:0)>this.geodesicMeasurementDistanceThreshold&&(a="geodesic"));this.sceneView.spatialReference.isWGS84||this.sceneView.spatialReference.isWebMercator||
(a="euclidean");return a},enumerable:!0,configurable:!0});y.prototype.reset=function(){this.clearMeasurement()};y.prototype.clearMeasurement=function(){this.path.clear();this.state="initial";this.cursorPoint=null};y.prototype.finishMeasurement=function(){3>this.path.length?this.clearMeasurement():(this._measurementDataChanges.fullChange(),this.state="measured")};y.prototype._preferredAreaUnit=function(a,b){switch(b){case "metric":return f.preferredMetricAreaUnit(a.value,a.unit);case "imperial":return f.preferredImperialAreaUnit(a.value,
a.unit);default:return b}};y.prototype._preferredLengthUnit=function(a,b){b=this._deriveLengthUnitFromAreaUnit(b);switch(b){case "metric":return f.preferredMetricLengthUnit(a.value,a.unit);case "imperial":return f.preferredImperialLengthUnit(a.value,a.unit);default:return b}};y.prototype._toPreferredAreaUnit=function(a,b){return a.toUnit(this._preferredAreaUnit(a,b))};y.prototype._toPreferredLengthUnit=function(a,b){return a.toUnit(this._preferredLengthUnit(a,b))};y.prototype._formatAreaLabel=function(a,
b){return a&&g.formatDecimal(a,this._preferredAreaUnit(a,b))};y.prototype._formatLengthLabel=function(a,b){return a&&g.formatDecimal(a,this._preferredLengthUnit(a,b))};y.prototype._deriveLengthUnitFromAreaUnit=function(a){switch(a){case "metric":return"metric";case "imperial":return"imperial";case "square-inches":return"inches";case "square-feet":return"feet";case "square-yards":return"yards";case "square-miles":return"miles";case "square-us-feet":return"us-feet";case "square-millimeters":return"millimeters";
case "square-centimeters":return"centimeters";case "square-decimeters":return"decimeters";case "square-meters":return"meters";case "square-kilometers":return"kilometers";case "acres":return"imperial";case "ares":case "hectares":return"metric"}throw Error("unhandled area unit");};a([u.property({constructOnly:!0})],y.prototype,"sceneView",void 0);a([u.property({readOnly:!0})],y.prototype,"path",void 0);a([u.property({readOnly:!0})],y.prototype,"pathVersion",void 0);a([u.property()],y.prototype,"cursorPoint",
void 0);a([u.property()],y.prototype,"hoveredVertexHandle",void 0);a([u.property({readOnly:!0})],y.prototype,"draggedVertices",void 0);a([u.property()],y.prototype,"state",void 0);a([u.property()],y.prototype,"mode",void 0);a([u.property()],y.prototype,"unit",void 0);a([u.property({readOnly:!0,dependsOn:["path.length","state"]})],y.prototype,"validMeasurement",null);a([u.property({readOnly:!0,dependsOn:["path.length"]})],y.prototype,"isMeasuring",null);a([u.property({readOnly:!0,dependsOn:["pathVersion",
"validMeasurement","maxRelativeErrorCoplanar","maxRelativeErrorAlmostCoplanar","verticalAngleThreshold"]})],y.prototype,"measurementData",null);a([u.property({readOnly:!0,dependsOn:["measurementData"]})],y.prototype,"area",null);a([u.property({readOnly:!0,dependsOn:["measurementData"]})],y.prototype,"geodesicArea",null);a([u.property({readOnly:!0,dependsOn:["measurementData","unit","measurementMode"]})],y.prototype,"areaLabel",null);a([u.property({readOnly:!0,dependsOn:["measurementData"]})],y.prototype,
"pathLength",null);a([u.property({readOnly:!0,dependsOn:["measurementData"]})],y.prototype,"geodesicPathLength",null);a([u.property({readOnly:!0,dependsOn:["measurementData","unit","measurementMode"]})],y.prototype,"pathLengthLabel",null);a([u.property({readOnly:!0,dependsOn:["measurementData"]})],y.prototype,"perimeterLength",null);a([u.property({readOnly:!0,dependsOn:["measurementData"]})],y.prototype,"geodesicPerimeterLength",null);a([u.property({readOnly:!0,dependsOn:["measurementData","unit",
"measurementMode"]})],y.prototype,"perimeterLengthLabel",null);a([u.property({readOnly:!0,dependsOn:["path.back","cursorPoint"]})],y.prototype,"cursorSegmentLength",null);a([u.property({readOnly:!0,dependsOn:["path.back","cursorPoint"]})],y.prototype,"geodesicCursorSegmentLength",null);a([u.property({readOnly:!0,dependsOn:["measurementData","unit","measurementMode"]})],y.prototype,"cursorSegmentLengthLabel",null);a([u.property({readOnly:!0,dependsOn:["unit","measurementMode","measurementData"]})],
y.prototype,"viewData",null);a([u.property()],y.prototype,"maxRelativeErrorCoplanar",void 0);a([u.property()],y.prototype,"maxRelativeErrorAlmostCoplanar",void 0);a([u.property()],y.prototype,"verticalAngleThreshold",void 0);a([u.property()],y.prototype,"geodesicMeasurementDistanceThreshold",void 0);a([u.property({readOnly:!0,dependsOn:["mode","validMeasurement","geodesicPathLength","geodesicCursorSegmentLength","geodesicMeasurementDistanceThreshold"]})],y.prototype,"measurementMode",null);return y=
a([u.subclass("esri.views.3d.interactive.measurementTools.areaMeasurement3D.AreaMeasurement3DModel")],y)}(u.declared(m))})},"esri/views/3d/interactive/measurementTools/areaMeasurement3D/MeasurementData":function(){define("require exports ../../../../../core/Quantity ../../../../../core/libs/earcut/earcut ../../../../../geometry/SpatialReference ../../../../../geometry/support/intersects ../support/measurementUtils ../support/viewUtils ../../../lib/gl-matrix ../../../support/earthUtils ../../../support/mathUtils ../../../support/mathUtils ../../../support/projectionUtils ../../../support/RenderCoordsHelper".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t){function D(a,b,f){b=new Float64Array(a.length*f);for(var g=0;g<a.length;++g)for(var h=a[g],m=0;m<f;++m)b[g*f+m]=h[m];return b}return function(){function w(){this.positionsWorldCoords=[];this.positionsRenderCoords=[];this.positionsProjectedWorldCoords=[];this.positionsFittedRenderCoords=[];this.positionsGeographic=[];this.positionsSpherical=[];this.positionsStereographic=[];this.pathSegmentLengths=[];this.geodesicPathSegmentLengths=[];this.perimeterSegmentLengths=
[];this.intersectingSegments=new Set;this.geodesicIntersectingSegments=new Set;this.areaCentroidWorldCoords=g.vec3d.create();this.areaCentroidRenderCoords=g.vec3d.create();this.areaNormalRenderCoords=g.vec3d.create();this.geodesicAreaCentroidRenderCoords=g.vec3d.create();this.geodesicAreaNormalRenderCoords=g.vec3d.create();this._length=0;this._centroidRenderCoords=g.vec3d.create();this._planeWorldCoords=g.vec4d.create();this._worldUp=g.vec3d.create();this._worldTangent=g.vec3d.create();this._frame=
[g.vec3d.create(),g.vec3d.create(),g.vec3d.create()];this._tempU=g.vec3d.create();this._tempV=g.vec3d.create();this._tempVec3=g.vec3d.create();this._tempSphere={center:g.vec3d.create(),radius:0}}w.prototype.update=function(a,f,h,n,p,u,t,x){f.clear();this._resize(a.length);f=h.spatialReference.isWGS84||h.spatialReference.isWebMercator;for(var y=this.positionsGeographic,A=this.positionsWorldCoords,C=this.positionsRenderCoords,w=this.positionsSpherical,D=0;D<a.length;++D){var F=a.vertex(D);b.pointToVector(F,
A[D],t);b.pointToVector(F,C[D],u);f&&(b.pointToVector(F,y[D],m.WGS84),b.pointToVector(F,w[D],b.SphericalECEFSpatialReference),g.vec3d.normalize(w[D],w[D]))}a=this._updatePathLengths(p);this.pathLength=0<this._length?new q(n.normalizeDistance(a),"meters"):null;f?(a=this._updateGeodesicPathLengths(p),this.geodesicPathLength=0<this._length?new q(a,"meters"):null):this.geodesicPathLength=null;p?(this._updateArea(h,n,u,t,x),f&&this._updateGeodesicArea(h,u)):(this.geodesicTriangleIndices=this.triangleIndices=
this.perimeterLength=this.geodesicArea=this.area=null,this.intersectingSegments.clear(),this.geodesicIntersectingSegments.clear())};w.prototype._resize=function(a){a<this._length&&(this.positionsWorldCoords.length=a,this.positionsRenderCoords.length=a,this.positionsProjectedWorldCoords.length=a,this.positionsFittedRenderCoords.length=a,this.positionsGeographic.length=a,this.positionsSpherical.length=a,this.positionsStereographic.length=a,this.pathSegmentLengths.length=a,this.geodesicPathSegmentLengths.length=
a,this._length=this.perimeterSegmentLengths.length=a);for(;this._length<a;)this.positionsWorldCoords.push(g.vec3d.create()),this.positionsRenderCoords.push(g.vec3d.create()),this.positionsProjectedWorldCoords.push(g.vec2d.create()),this.positionsFittedRenderCoords.push(g.vec3d.create()),this.positionsGeographic.push(g.vec3d.create()),this.positionsSpherical.push(g.vec3d.create()),this.positionsStereographic.push(g.vec2d.create()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),
this.perimeterSegmentLengths.push(0),++this._length};w.prototype._updatePathLengths=function(a){for(var b=this.positionsWorldCoords,f=this.pathSegmentLengths,h=0,m=0;m<this._length;++m){var n=f[m]=g.vec3d.dist(b[m],b[(m+1)%this._length]);if(m<this._length-1||a)h+=n}return h};w.prototype._updateGeodesicPathLengths=function(a){for(var b=this.positionsGeographic,f=this.geodesicPathSegmentLengths,g=0,h=0;h<this._length;++h){var m=f[h]=p.segmentLengthGeodesicVector(b[h],b[(h+1)%this._length]);if(h<this._length-
1||a)g+=m}return g};w.prototype._updateArea=function(a,f,h,m,n){var A=a.renderCoordsHelper;a=this.positionsWorldCoords;var y=this.positionsRenderCoords,w=this.positionsProjectedWorldCoords,C=this.positionsFittedRenderCoords,D=this._planeWorldCoords,F=this._centroidRenderCoords;x.midpoint(y,F);A.worldUpAtPosition(F,this._worldUp);A.worldBasisAtPosition(F,t.BasisDimension.X,this._worldTangent);b.transformDirection(F,this._worldUp,h,this._worldUp,m);b.transformDirection(F,this._worldTangent,h,this._worldTangent,
m);p.bestFitPlane(a,D);this.fittingMode=this._selectFittingMode(D,a,this._worldUp,n);var E=0;if("horizontal"===this.fittingMode){var B=-Infinity;y.forEach(function(a,b){a=A.getAltitude(y[b]);a>B&&(B=a,E=b)})}n=a[E];var F=D,H=this._worldTangent;"horizontal"===this.fittingMode?F=this._worldUp:"vertical"===this.fittingMode&&(F=this._tempVec3,H=this._worldUp,u.makeOrthonormal(D,this._worldUp,F));g.vec3d.set(F,this._frame[2]);u.makeOrthonormal(H,F,this._frame[0]);g.vec3d.cross(this._frame[0],this._frame[2],
this._frame[1]);g.vec3d.negate(this._frame[1]);for(var D=this._tempVec3,F=this._tempU,H=this._tempV,Q=0;Q<this._length;++Q){var T=w[Q],Y=C[Q];g.vec3d.subtract(a[Q],n,D);g.vec2d.set2(g.vec3d.dot(this._frame[0],D),g.vec3d.dot(this._frame[1],D),T);g.vec3d.scale(this._frame[0],T[0],F);g.vec3d.scale(this._frame[1],T[1],H);g.vec3d.add(F,H,D);g.vec3d.add(D,n);b.vectorToVector(D,m,Y,h)}this.perimeterLength=0<this._length?new q(f.normalizeDistance(this._updatePerimeterLengths()),"meters"):null;x.midpoint(C,
this.areaCentroidRenderCoords);b.vectorToVector(this.areaCentroidRenderCoords,h,this.areaCentroidWorldCoords,m);b.transformDirection(this.areaCentroidWorldCoords,this._frame[2],m,this.areaNormalRenderCoords,h);this._updateIntersectingSegments();this.area=0===this.intersectingSegments.size?new q(f.normalizeArea(this._computeArea()),"square-meters"):null};w.prototype._updateGeodesicArea=function(a,h){a=a.renderCoordsHelper;h=this.positionsSpherical;var m=this.positionsStereographic,n=this._tempVec3,
t=p.fitHemisphere(h,n);if(t){var A=this._tempU,y=this._tempV;u.tangentFrame(n,A,y);for(var x=0;x<this._length;++x){var w=g.vec3d.dot(h[x],A),C=g.vec3d.dot(h[x],y),D=g.vec3d.dot(h[x],n);g.vec2d.set2(w/D,C/D,m[x])}g.vec3d.scale(n,f.earthRadius);a.toRenderCoords(n,b.SphericalECEFSpatialReference,this.geodesicAreaCentroidRenderCoords);a.worldUpAtPosition(this.geodesicAreaCentroidRenderCoords,this.geodesicAreaNormalRenderCoords);this._updateGeodesicIntersectingSegments();this.geodesicArea=t&&0===this.geodesicIntersectingSegments.size?
new q(this._computeGeodesicArea(),"square-meters"):null}else this.geodesicArea=null};w.prototype._updatePerimeterLengths=function(){for(var a=this.positionsProjectedWorldCoords,b=this.perimeterSegmentLengths,f=0,h=0;h<this._length;++h)var m=b[h]=g.vec2d.dist(a[h],a[(h+1)%this._length]),f=f+m;return f};w.prototype._updateIntersectingSegments=function(){var a=this.positionsProjectedWorldCoords,b=this.intersectingSegments;b.clear();for(var f=0;f<this._length;++f)for(var g=f+2;g<this._length;++g)(g+1)%
this._length!==f&&h.segmentIntersects(a[f],a[(f+1)%this._length],a[g],a[(g+1)%this._length])&&(b.add(f),b.add(g))};w.prototype._computeArea=function(){for(var b=this.positionsProjectedWorldCoords,f=D(b,2,2),f=this.triangleIndices=new Uint32Array(a(f,[],2)),g=0,h=0;h<f.length;h+=3)g+=p.triangleAreaEuclidean(b[f[h]],b[f[h+1]],b[f[h+2]]);return g};w.prototype._updateGeodesicIntersectingSegments=function(){var a=this.positionsStereographic,b=this.geodesicIntersectingSegments;b.clear();for(var f=0;f<this._length;++f)for(var g=
f+2;g<this._length;++g)(g+1)%this._length!==f&&h.segmentIntersects(a[f],a[(f+1)%this._length],a[g],a[(g+1)%this._length])&&(b.add(f),b.add(g))};w.prototype._computeGeodesicArea=function(){for(var b=this.positionsGeographic,f=D(this.positionsStereographic,2,2),f=this.geodesicTriangleIndices=new Uint32Array(a(f,[],2)),g=0,h=0;h<f.length;h+=3)g+=p.triangleAreaGeodesic(b[f[h]],b[f[h+1]],b[f[h+2]],m.WGS84);return g};w.prototype._selectFittingMode=function(a,b,f,h){var m=b.map(function(b){return Math.abs(p.planePointDistance(a,
b))}).reduce(function(a,b){return Math.max(a,b)},0);p.boundingSphere(b,this._tempSphere);b=m/(2*this._tempSphere.radius);var m=b<h.maxRelativeErrorAlmostCoplanar,u="horizontal";b<h.maxRelativeErrorCoplanar?u="oblique":m&&(u=Math.abs(g.vec3d.dot(f,a))>Math.cos(n.deg2rad(h.verticalAngleThreshold))?"horizontal":"vertical");return u};return w}()})},"esri/views/3d/interactive/measurementTools/support/measurementUtils":function(){define("require exports ../../../../../geometry/geometryEngine ../../../../../geometry/Polygon ../../../../../geometry/SpatialReference ../../../../../geometry/support/geodesicUtils ../../../lib/gl-matrix ../../../support/mathUtils ../../../support/mathUtils ../../../support/projectionUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f){var n;(function(a){a.boundingSphere=function(a,b){var f=b.center;p.vec3d.set3(0,0,0,f);for(var g=0;g<a.length;++g)p.vec3d.add(f,a[g]);p.vec3d.scale(f,1/a.length);for(var h=0,g=0;g<a.length;++g)h=Math.max(h,p.vec3d.dist2(f,a[g]));b.radius=Math.sqrt(h)};a.bestFitPlane=function(a,b){if(3>a.length)throw Error("need at least 3 points to fit a plane");g.planeFromPoints(a[0],a[1],a[2],b)};a.planePointDistance=function(a,b){return p.vec3d.dot(a,b)+a[3]};a.segmentLengthEuclidean=
function(a,g,h){f.pointToVector(a,u,h);f.pointToVector(g,b,h);return p.vec3d.dist(u,b)};a.segmentLengthGeodesic=function(a,g){var n=m.WGS84;f.pointToVector(a,u,n);f.pointToVector(g,b,n);return h.inverseGeodeticSolver(x.deg2rad(u[1]),x.deg2rad(u[0]),x.deg2rad(b[1]),x.deg2rad(b[0])).geodesicDistance};a.segmentLengthGeodesicVector=function(a,b){return h.inverseGeodeticSolver(x.deg2rad(a[1]),x.deg2rad(a[0]),x.deg2rad(b[1]),x.deg2rad(b[0])).geodesicDistance};a.triangleAreaEuclidean=function(a,b,f){return.5*
Math.abs((b[0]-a[0])*(f[1]-a[1])-(b[1]-a[1])*(f[0]-a[0]))};a.triangleAreaGeodesic=function(a,g,h,n){var p=D;f.vectorToVector(a,n,u,m.WGS84);f.vectorToVector(g,n,b,m.WGS84);f.vectorToVector(h,n,t,m.WGS84);p.setPoint(0,0,u);p.setPoint(0,1,b);p.setPoint(0,2,t);return Math.abs(q.geodesicArea(p,"square-meters"))};a.tangentFrame=function(a,b,f){Math.abs(a[0])>Math.abs(a[1])?p.vec3d.set3(0,1,0,b):p.vec3d.set3(1,0,0,b);p.vec3d.cross(a,b,f);p.vec3d.normalize(b);p.vec3d.cross(f,a,b);p.vec3d.normalize(f)};a.fitHemisphere=
function(a,b,f){void 0===b&&(b=null);void 0===f&&(f=!0);var g=function(a,b){if(0===b[0]&&0===b[1]&&0===b[2])return!1;for(var f=0;f<a.length;++f)if(-1E-6>p.vec3d.dot(b,a[f]))return!1;return!0};if(0===a.length)return!1;if(1===a.length)return b&&p.vec3d.set(a[0],b),!0;p.vec3d.set3(0,0,0,E);for(var h=0;h<a.length;++h)p.vec3d.add(E,a[h]);p.vec3d.normalize(E);if(g(a,E))return b&&p.vec3d.set(E,b),!0;if(!f)return!1;for(h=0;h<a.length;++h)for(f=0;f<a.length;++f)if(h!==f&&(p.vec3d.cross(a[h],a[f],E),p.vec3d.normalize(E),
g(a,E)))return b&&p.vec3d.set(E,b),!0;return!1};a.compareSets=function(a,b){if(a===b)return!0;if(a.size!==b.size)return!1;for(var f=0;f<a.size;++f)if(!b.has(a[f]))return!1;return!0}})(n||(n={}));var u=[0,0,0],b=[0,0,0],t=[0,0,0],D=new a({rings:[[u,b,t]],spatialReference:m.WGS84}),E=p.vec3d.create();return n})},"esri/geometry/geometryEngine":function(){define("require exports ../kernel ./Geometry ./Polygon ./Polyline ./Point ./Extent ./Multipoint dojo/_base/lang".split(" "),function(B,w,q,a,m,h,p,
x,g,f){function n(a){if(void 0===p.fromJson){if(void 0!==a.x&&void 0!==a.y)return new p(a);if(void 0!==a.paths)return new h(a);if(void 0!==a.rings)return new m(a);if(void 0!==a.points)return new g(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new x(a)}else{if(void 0!==a.x&&void 0!==a.y)return p.fromJson(a);if(void 0!==a.paths)return h.fromJson(a);if(void 0!==a.rings)return m.fromJson(a);if(void 0!==a.points)return g.fromJson(a);if(void 0!==a.xmin&&void 0!==a.ymin&&
void 0!==a.xmax&&void 0!==a.ymax)return x.fromJson(a)}}function u(a){if(void 0===p.fromJson){if(void 0!==a.x&&void 0!==a.y)return new p(a);if(void 0!==a.paths)return new h(a);if(void 0!==a.rings)return new m(a);if(void 0!==a.points)return new g(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new x(a)}else{if(void 0!==a.x&&void 0!==a.y)return p.fromJSON(a);if(void 0!==a.paths)return h.fromJSON(a);if(void 0!==a.rings)return m.fromJSON(a);if(void 0!==a.points)return g.fromJSON(a);
if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return x.fromJSON(a)}}function b(a,b){var l;if(null==a||void 0===a||"number"===typeof a)return a;var d=a.toString();if(""===d)return null;if(2==b){if(l=T[d],void 0!==l)return l}else if(0==b){l=Z[d];if(void 0!==l)return l;l=Y[a];if(void 0!==l)return l}else if(3==b&&(l=Z[d],void 0!==l))return l;if(1==b&&(l=Y[a],void 0!==l))return l;if(!0===/^\d+$/.test(d))return parseInt(d);throw Error("Unrecognised Unit Type");}function t(a){if(void 0!==
a&&null!==a)switch(a){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function D(a,b){if(null===a||void 0===a||a.u())return null;switch(a.G()){case y.Fj.Point:var l=new p(a.Be(),a.nf(),b);if(O){var d=a.hasAttribute(y.Wc.M);a.hasAttribute(y.Wc.Z)&&l.set("z",a.qH());d&&l.set("m",a.$G())}return l;case y.Fj.Polygon:var l=a.hasAttribute(y.Wc.Z),d=a.hasAttribute(y.Wc.M),c=E(a,l,d),l=new m({rings:c,hasZ:l,hasM:d});O?l.set("spatialReference",
b):l.setSpatialReference(b);l.setCacheValue("_geVersion",a);return l;case y.Fj.Polyline:return l=a.hasAttribute(y.Wc.Z),d=a.hasAttribute(y.Wc.M),c=E(a,l,d),l=new h({paths:c,hasZ:l,hasM:d}),O?l.set("spatialReference",b):l.setSpatialReference(b),l.setCacheValue("_geVersion",a),l;case y.Fj.MultiPoint:var l=a.hasAttribute(y.Wc.Z),d=a.hasAttribute(y.Wc.M),e=c=null;l&&(c=a.Pa(y.Wc.Z));d&&(e=a.Pa(y.Wc.M));var k=new y.b,r=a.D();b=new g(b);O&&(b.set("hasZ",l),b.set("hasM",d));for(var v=0;v<r;v++){a.w(v,k);
var G=[k.x,k.y];l&&G.push(c.get(v));d&&G.push(e.get(v));b.addPoint(G)}b.setCacheValue("_geVersion",a);return b;case y.Fj.Envelope:return c=a.hasAttribute(y.Wc.Z),l=a.hasAttribute(y.Wc.M),d=new x(a.R.o,a.R.A,a.R.v,a.R.B,b),O&&(c&&(c=a.xf(y.Wc.Z,0),d.set("zmin",c.ca),d.set("zmax",c.ha)),l&&(c=a.xf(y.Wc.M,0),d.set("mmin",c.ca),d.set("mmax",c.ha))),d.setCacheValue("_geVersion",a),d}return null}function E(a,b,f){var d=[],c=a.aa(),e=null,k=null;b&&(e=a.Pa(y.Wc.Z));f&&(k=a.Pa(y.Wc.M));for(var r=new y.b,
v=0;v<c;v++){for(var l=a.wa(v),J=a.Ka(v),g=0,h=0,z=NaN,m=NaN,n=NaN,p=NaN,u=a.Qb(v),t=[],q=l;q<l+J;q++){a.w(q,r);var p=n=NaN,x=[r.x,r.y];b&&(n=e.get(q),x.push(n));f&&(p=k.get(q),x.push(p));q==l&&u&&(g=r.x,h=r.y,z=n,m=p);t.push(x)}!u||g==r.x&&h==r.y&&(!b||isNaN(z)&&isNaN(n)||z==n)&&(!f||isNaN(m)&&isNaN(p)||m==p)||t.push(t[0].slice(0));d.push(t)}return d}function C(a){var l=a._geVersion;if(null==l||void 0==l){if(Object.freeze&&Object.isFrozen(a))return 102100===a.wkid?V:4326===a.wkid?aa:l=y.Td.create(a.wkid);
-1!=a.wkid&&null!==a.wkid&&void 0!==a.wkid?(l=y.Td.create(a.wkid),a._geVersion=l):""!==a.wkt&&void 0!==a.wkt&&null!==a.wkt&&(l=y.Td.nR(a.wkt),a._geVersion=l)}return l}function A(a){if(null==a)return null;if(void 0===a.getCacheValue){var l=a._geVersion;if(null==l||void 0==l)l=y.cc.bG(a),a._geVersion=l}else if(l=a.getCacheValue("_geVersion"),null==l||void 0==l)l=y.cc.bG(a),a.setCacheValue("_geVersion",l);return l}function F(a){return null===a.spatialReference?null:C(a.spatialReference)}function H(a){return"[object Array]"===
Object.prototype.toString.call(a)}function Q(a){if(null===a||void 0===a||a.u())return null;switch(a.G()){case y.Fj.Point:var l={};l.x=a.Be();l.y=a.nf();if(O){var b=a.hasAttribute(y.Wc.M);a.hasAttribute(y.Wc.Z)&&(l.z=a.qH());b&&(l.m=a.$G())}return l;case y.Fj.Polygon:return l=a.hasAttribute(y.Wc.Z),b=a.hasAttribute(y.Wc.M),{rings:E(a,l,b),hasZ:l,hasM:b};case y.Fj.Polyline:return l=a.hasAttribute(y.Wc.Z),b=a.hasAttribute(y.Wc.M),{paths:E(a,l,b),hasZ:l,hasM:b};case y.Fj.MultiPoint:var l=a.hasAttribute(y.Wc.Z),
b=a.hasAttribute(y.Wc.M),d=null,c=null;l&&(d=a.Pa(y.Wc.Z));b&&(c=a.Pa(y.Wc.M));var e=new y.b,k=a.D(),r={L_:[]};O&&(r.hasZ=l,r.hasM=b);for(var v=0;v<k;v++){a.w(v,e);var G=[e.x,e.y];l&&G.push(d.get(v));b&&G.push(c.get(v));r.points.push(G)}return r;case y.Fj.Envelope:return d=a.hasAttribute(y.Wc.Z),l=a.hasAttribute(y.Wc.M),b={},b.xmin=a.R.o,b.ymin=a.R.A,b.xmax=a.R.v,b.ymax=a.R.B,O&&(d&&(d=a.xf(y.Wc.Z,0),b.zmin=d.ca,b.zmax=d.ha),l&&(d=a.xf(y.Wc.M,0),b.mmin=d.ca,b.mmax=d.ha)),b}return null}var K=this&&
this.__extends||function(a,b){function l(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(l.prototype=b.prototype,new l)},y;(function(a){var l=function(){function a(){}a.Bm=!1;a.iw=!1;a.xz="";return a}();a.Xh=l;if("undefined"!==typeof window)a.Xh.xz="browser","Float64Array"in window&&(a.Xh.iw=!0),"ArrayBuffer"in window&&(a.Xh.Bm=!0);else if("undefined"!==typeof process)l.xz="node",a.Xh.Bm=!0,a.Xh.iw=!0;else{l.xz="browser";try{var b=new ArrayBuffer(0);
new Uint8Array(b);a.Xh.Bm=!0;a.Xh.iw=!0}catch(d){a.Xh.Bm=!1}}})(y||(y={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Point=33]="Point";a[a.Line=322]="Line";a[a.Envelope=197]="Envelope";a[a.MultiPoint=550]="MultiPoint";a[a.Polyline=1607]="Polyline";a[a.Polygon=1736]="Polygon"})(a.Fj||(a.Fj={}));(function(a){a[a.enumMild=0]="enumMild";a[a.enumMedium=1]="enumMedium";a[a.enumHot=2]="enumHot"})(a.sM||(a.sM={}));var l=function(){function l(){this.description=null;this.AB=0}l.prototype.G=function(){return 0};
l.prototype.tb=function(){return-1};l.prototype.Fg=function(a){this.Bc();a!=this.description&&this.mo(a)};l.prototype.mo=function(){};l.prototype.om=function(d){this.Bc();d!=this.description&&(d=a.ye.uT(this.description,d),d!=this.description&&this.mo(d))};l.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)};l.prototype.Ud=function(d){this.Bc();this.description.hasAttribute(d)||(d=a.ye.tT(this.description,d),this.mo(d))};l.prototype.xf=function(){return null};l.prototype.Rn=
function(){};l.prototype.s=function(){};l.prototype.Cp=function(){};l.prototype.ac=function(a){this.s(a)};l.prototype.u=function(){return!0};l.prototype.Oa=function(){};l.prototype.Xc=function(){};l.prototype.Ja=function(){return null};l.prototype.copyTo=function(){};l.prototype.hf=function(){return 0};l.prototype.Rb=function(){return 0};l.prototype.tH=function(){return this.hasAttribute(1)};l.lf=function(a){return((a&192)>>6)+1>>1};l.Jo=function(a){return 0!=(a&32)};l.k_=function(a){return 0!=(a&
64)};l.NU=function(a){return 0!=(a&128)};l.Oc=function(a){return 0!=(a&256)};l.gh=function(a){return 0!=(a&512)};l.Ic=function(a){return 0!=(a&1024)};l.prototype.Vf=function(){var a=this.Ja();this.copyTo(a);return a};l.prototype.Gg=function(){return null};l.ne=function(a){var c=a.Ja();a.copyTo(c);return c};l.prototype.Bc=function(){0<=this.AB&&(this.AB+=2147483649)};l.fy=function(d){var c=d.G();if(l.gh(c))return d.D();if(d.u())return 0;if(197==c)return 4;if(33==c)return 1;if(l.Oc(c))return 2;throw a.f.X("missing type");
};return l}();a.T=l})(y||(y={}));(function(a){var l=function(){function l(){this.y=this.x=0}l.pa=function(a,c){var e=new l;e.x=a;e.y=c;return e};l.El=function(a){var c=new l;c.x=a.x;c.y=a.y;return c};l.prototype.ka=function(a,c){this.x=a;this.y=c};l.prototype.L=function(a){this.x=a.x;this.y=a.y};l.prototype.Tq=function(a,c){return this.x===a&&this.y===c};l.prototype.vA=function(a){return 2.220446049250313E-16>=Math.abs(this.x-a.x)&&2.220446049250313E-16>=Math.abs(this.y-a.y)};l.prototype.ub=function(a){return this.x===
a.x&&this.y===a.y};l.prototype.Eb=function(a){return a==this?!0:a instanceof l?this.x==a.x&&this.y==a.y:!1};l.prototype.sub=function(a){this.x-=a.x;this.y-=a.y};l.prototype.zc=function(a,c){this.x=a.x-c.x;this.y=a.y-c.y};l.prototype.add=function(a,c){void 0!==c?(this.x=a.x+c.x,this.y=a.y+c.y):(this.x+=a.x,this.y+=a.y)};l.prototype.Kr=function(){this.x=-this.x;this.y=-this.y};l.prototype.au=function(a){this.x=-a.x;this.y=-a.y};l.prototype.HU=function(a,c,e){this.x=a.x*(1-e)+c.x*e;this.y=a.y*(1-e)+
c.y*e};l.prototype.qu=function(a,c){this.x=this.x*a+c.x;this.y=this.y*a+c.y};l.prototype.DX=function(a,c,e){this.x=c.x*a+e.x;this.y=c.y*a+e.y};l.prototype.scale=function(a){this.x*=a;this.y*=a};l.prototype.compare=function(a){return this.y<a.y?-1:this.y>a.y?1:this.x<a.x?-1:this.x>a.x?1:0};l.prototype.normalize=function(){var a=this.length();0==a&&(this.x=1,this.y=0);this.x/=a;this.y/=a};l.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};l.prototype.pk=function(){return this.x*
this.x+this.y*this.y};l.Cb=function(a,c){return Math.sqrt(this.sc(a,c))};l.wz=function(a,c,e,k){a-=e;c-=k;return Math.sqrt(a*a+c*c)};l.prototype.oi=function(a){return this.x*a.x+this.y*a.y};l.prototype.xE=function(a){return Math.abs(this.x*a.x)+Math.abs(this.y*a.y)};l.prototype.Ui=function(a){return this.x*a.y-this.y*a.x};l.prototype.pu=function(a,c){var e=-this.x*c+this.y*a;this.x=this.x*a+this.y*c;this.y=e};l.prototype.tw=function(){var a=this.x;this.x=-this.y;this.y=a};l.prototype.$H=function(a){this.x=
-a.y;this.y=a.x};l.prototype.Tr=function(){var a=this.x;this.x=this.y;this.y=-a};l.prototype.cv=function(){this.y=this.x=NaN};l.prototype.Gy=function(){return isNaN(this.x)};l.prototype.Zu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3};l.us=function(a,c){var e=a.Zu(),k=c.Zu();return k==e?(e=a.Ui(c),0>e?1:0<e?-1:0):e<k?-1:1};l.zZ=function(a,c){return l.us(a,c)};l.sc=function(a,c){var e=a.x-c.x;a=a.y-c.y;return e*e+a*a};l.prototype.toString=function(){return"("+this.x+" , "+this.y+
")"};l.prototype.$c=function(){this.y=this.x=NaN};l.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)};l.prototype.QO=function(){return this.Gy()?NaN:Math.abs(this.x)>=Math.abs(this.y)?Math.abs(this.x):Math.abs(this.y)};l.prototype.offset=function(a,c){var e=l.Cb(a,c),k=l.pa(this.x,this.y);if(0==e)return l.Cb(k,a);var d=new l;d.L(c);d.sub(a);k.sub(a);return k.Ui(d)/e};l.zp=function(d,c,e){var k=new a.Xb;k.set(c.x);k.sub(d.x);var r=new a.Xb;r.set(e.y);r.sub(d.y);var v=new a.Xb;v.set(c.y);
v.sub(d.y);var l=new a.Xb;l.set(e.x);l.sub(d.x);k.Vg(r);v.Vg(l);k.sub(v);if(!k.kt())return e=k.value(),0>e?-1:0<e?1:0;k=new a.Tp(c.x);r=new a.Tp(d.x);v=new a.Tp(d.y);k=k.Yt(r);d=new a.Tp(e.y);d=d.Yt(v);c=new a.Tp(c.y);c=c.Yt(v);e=new a.Tp(e.x);e=e.Yt(r);k=k.cs(d);c=c.cs(e);k=k.cs(c);return k.nV()?-1:k.ZT()?1:0};l.prototype.jc=function(){return a.J.Zi(a.J.Zi())};return l}();a.b=l})(y||(y={}));(function(a){var l=function(){function a(a){this.jz=this.zu=0;this.GY=a}a.prototype.reset=function(){this.jz=
this.zu=0};a.prototype.add=function(a){a-=this.jz;var c=this.zu+a;this.jz=c-this.zu-a;this.zu=c};a.prototype.sub=function(a){this.add(-a)};a.prototype.fn=function(){return this.GY+this.zu};return a}();a.qy=l;l=function(){function a(){}a.Fl=function(a,c){return 0<=c?Math.abs(a):-Math.abs(a)};a.sign=function(a){return 0>a?-1:0<a?1:0};a.fM=function(a){return a-360*Math.floor(a/360)};a.round=function(a){return Math.floor(a+.5)};a.Xx=function(a){return a*a};a.Wq=function(a,c,e){var k;.5>=e?k=a+(c-a)*e:
k=c-(c-a)*(1-e);return k};a.bI=function(a,c,e,k){.5>=e?(k.x=a.x+(c.x-a.x)*e,k.y=a.y+(c.y-a.y)*e):(k.x=c.x-(c.x-a.x)*(1-e),k.y=c.y-(c.y-a.y)*(1-e))};a.lV=function(a,c,e,k,r,v){.5>=r?(v.x=a+(e-a)*r,v.y=c+(k-c)*r):(v.x=e-(e-a)*(1-r),v.y=k-(k-c)*(1-r))};return a}();a.Ub=l})(y||(y={}));(function(a){var l=function(l){function d(){l.call(this);this.oa=this.sa=this.ra=this.ua=0;this.la=null}K(d,l);d.prototype.ec=function(){return a.b.pa(this.ua,this.ra)};d.prototype.Oq=function(c){c.x=this.ua;c.y=this.ra};
d.prototype.Mc=function(c){this.Rm(0,c)};d.prototype.vC=function(c,e){this.Rm(0,a.b.pa(c,e))};d.prototype.Dp=function(c){this.zE(0,c)};d.prototype.setStart=function(c){this.JE(0,c)};d.prototype.ct=function(c,e){return this.ae(0,c,e)};d.prototype.Sx=function(c,e,a){this.oo(0,c,e,a)};d.prototype.Cc=function(){return a.b.pa(this.sa,this.oa)};d.prototype.Os=function(c){c.x=this.sa;c.y=this.oa};d.prototype.Zc=function(c){this.Rm(1,c)};d.prototype.vm=function(c,e){this.Rm(1,a.b.pa(c,e))};d.prototype.Bp=
function(c){this.zE(1,c)};d.prototype.setEnd=function(c){this.JE(1,c)};d.prototype.Ns=function(c,e){return this.ae(1,c,e)};d.prototype.Kx=function(c,e,a){this.oo(1,c,e,a)};d.prototype.tb=function(){return 1};d.prototype.u=function(){return this.Hc()};d.prototype.Oa=function(){};d.prototype.hf=function(){return 0};d.prototype.Ma=function(c,e,a,d,v){return this.OO(c,e,a,d,v)};d.prototype.Yb=function(c,e){return 0!=this.xs(c,e,!1)};d.prototype.lt=function(c,e){return this.$u(c,e,!1)};d.prototype.$u=
function(){return null};d.prototype.Hc=function(){return!1};d.prototype.Iy=function(c){this.Bc();if(null==this.la&&0<c)this.la=a.J.gf(2*c);else if(null!=this.la&&this.la.length<2*c){for(var e=this.la.slice(0),k=this.la.length;k<2*c;k++)e[k]=0;this.la=e}};d.aX=function(c,e,a){if(0<a)var k=0;for(var d=0;d<a;d++)e[0+k]=c[0],k++};d.prototype.Rm=function(c,e){0!=c?(this.sa=e.x,this.oa=e.y):(this.ua=e.x,this.ra=e.y)};d.prototype.mo=function(c){if(null!=this.la){for(var e=a.ye.ux(c,this.description),k=[],
r=d.vl(this.description,0),v=d.vl(this.description,1),l=d.vl(c,0),b=d.vl(c,1),f=0,g=1,h=c.Ea;g<h;g++){var z=c.zd(g),m=a.na.Xa(z);if(-1==e[g])for(var n=a.na.pe(z),z=0;z<m;z++)k[l+f]=n,k[b+f]=n,f++;else for(n=this.description.wk(e[g])-2,z=0;z<m;z++)k[l+f]=this.la[r+n],k[b+f]=this.la[v+n],f++,n++}this.la=k}this.description=c};d.prototype.zE=function(c,e){if(this.Hc())throw a.f.X("empty geometry");e.Fg(this.description);e.Hc()&&e.nq();for(var k=0;k<this.description.Ea;k++)for(var d=this.description.Id(k),
v=0,l=a.na.Xa(d);v<l;v++){var b=this.ae(c,d,v);e.setAttribute(d,v,b)}};d.prototype.JE=function(c,e){this.Bc();if(e.Hc())throw a.f.X("empty geometry");for(var k=e.description,d=0,v=k.Ea;d<v;d++)for(var l=k.Id(d),b=a.na.Xa(l),f=0;f<b;f++){var g=e.Yc(l,f);this.oo(c,l,f,g)}};d.prototype.ae=function(c,e,k){if(this.Hc())throw a.f.X("This operation was performed on an Empty Geometry.");if(0==e)return 0!=c?0!=k?this.oa:this.sa:0!=k?this.ra:this.ua;if(k>=a.na.Xa(e))throw a.f.vd();var r=this.description.mg(e);
return 0<=r?(null!=this.la&&this.Iy(this.description.af.length-2),this.la[d.vl(this.description,c)+this.description.wk(r)-2+k]):a.na.pe(e)};d.prototype.oo=function(c,e,k,r){this.Bc();if(k>=a.na.Xa(e))throw a.f.vd();var v=this.description.mg(e);0>v&&(this.Ud(e),v=this.description.mg(e));0==e?0!=c?0!=k?this.oa=r:this.sa=r:0!=k?this.ra=r:this.ua=r:(null==this.la&&this.Iy(this.description.af.length-2),this.la[d.vl(this.description,c)+this.description.wk(v)-2+k]=r)};d.prototype.copyTo=function(c){if(c.G()!=
this.G())throw a.f.F();c.description=this.description;c.Iy(this.description.af.length-2);d.aX(this.la,c.la,2*(this.description.af.length-2));c.ua=this.ua;c.ra=this.ra;c.sa=this.sa;c.oa=this.oa;c.Bc();this.iq(c)};d.prototype.xf=function(c,e){var k=new a.Ac;if(this.Hc())return k.Oa(),k;k.ca=this.ae(0,c,e);k.ha=k.ca;k.ml(this.ae(1,c,e));return k};d.prototype.RJ=function(c){this.Hc()?c.Oa():(c.ca=this.ae(0,0,0),c.ha=c.ca,c.ml(this.ae(1,0,0)))};d.prototype.Ex=function(c,e){e.Fg(this.description);e.rb(this.gc(c));
for(var k=1,d=this.description.Ea;k<d;k++)for(var v=this.description.Id(k),l=a.na.Xa(v),b=0;b<l;b++){var f=this.Yc(c,v,b);e.setAttribute(v,b,f)}};d.prototype.LO=function(c){if(this.description!=c.description||this.ua!=c.ua||this.sa!=c.sa||this.ra!=c.ra||this.oa!=c.oa)return!1;for(var e=0;e<2*(this.description.af.length-2);e++)if(this.la[e]!=c.la[e])return!1;return!0};d.prototype.NH=function(){return this.ua==this.sa&&this.ra==this.oa};d.prototype.reverse=function(){var c=this.ua;this.ua=this.sa;this.sa=
c;c=this.ra;this.ra=this.oa;this.oa=c;for(var c=1,e=this.description.Ea;c<e;c++)for(var k=this.description.zd(c),d=0,v=a.na.Xa(k);d<v;d++){var l=this.ae(0,k,d),b=this.ae(1,k,d);this.oo(0,k,d,b);this.oo(1,k,d,l)}};d.prototype.xs=function(c,e,k){var d=c.G();switch(this.G()){case 322:if(322==d)return a.Hb.PO(this,c,e,k);throw a.f.ya();default:throw a.f.ya();}};d.prototype.OO=function(c,e,k,d,v){var r=c.G();switch(this.G()){case 322:if(322==r)return a.Hb.Fy(this,c,e,k,d,v);throw a.f.ya();default:throw a.f.ya();
}};d.prototype.By=function(){return null};d.vl=function(c,e){return e*(c.af.length-2)};d.prototype.gc=function(c,e){if(void 0===e)return e=new a.b,this.gc(c,e),e;a.Ub.lV(this.ua,this.ra,this.sa,this.oa,c,e)};d.prototype.oe=function(){return null};d.prototype.pH=function(){return null};d.prototype.Sq=function(){return null};d.prototype.fh=function(){return null};d.prototype.Go=function(){return null};d.prototype.Eg=function(){return null};d.prototype.Cy=function(c,e){return void 0!==e?this.by(e)-this.by(c):
this.by(c)};d.prototype.iq=function(){};d.prototype.Hl=function(){return null};d.prototype.yh=function(){};d.prototype.Yc=function(){return null};d.prototype.pf=function(){return null};d.prototype.by=function(){return null};d.prototype.aI=function(){return null};d.prototype.Cb=function(c,e){if(!e&&0!=this.xs(c,0,!1))return 0;e=1.7976931348623157E308;var a,d;a=this.ec();d=c.oe(a,!1);a.sub(c.gc(d));a=a.length();a<e&&(e=a);a=this.Cc();d=c.oe(a,!1);a.sub(c.gc(d));a=a.length();a<e&&(e=a);a=c.ec();d=this.oe(a,
!1);a.sub(this.gc(d));a=a.length();a<e&&(e=a);a=c.Cc();d=this.oe(a,!1);a.sub(this.gc(d));a=a.length();a<e&&(e=a);return e};d.prototype.Gg=function(){return a.Pi.Sm(this,null)};return d}(a.T);a.bE=l})(y||(y={}));new y.b;(function(a){(function(a){a[a.Unknown=-1]="Unknown";a[a.Not=0]="Not";a[a.Weak=1]="Weak";a[a.Strong=2]="Strong"})(a.uM||(a.uM={}));(function(a){a[a.DirtyIsKnownSimple=1]="DirtyIsKnownSimple";a[a.IsWeakSimple=2]="IsWeakSimple";a[a.IsStrongSimple=4]="IsStrongSimple";a[a.DirtyOGCFlags=
8]="DirtyOGCFlags";a[a.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";a[a.DirtyExactIntervals=64]="DirtyExactIntervals";a[a.DirtyLooseIntervals=128]="DirtyLooseIntervals";a[a.DirtyIntervals=192]="DirtyIntervals";a[a.DirtyIsEnvelope=256]="DirtyIsEnvelope";a[a.DirtyLength2D=512]="DirtyLength2D";a[a.DirtyRingAreas2D=1024]="DirtyRingAreas2D";a[a.DirtyCoordinates=1993]="DirtyCoordinates";a[a.DirtyAllInternal=65535]="DirtyAllInternal";a[a.DirtyAll=16777215]="DirtyAll"})(a.ZL||(a.ZL={}));var l=function(l){function d(){l.call(this);
this.un=65535;this.qa=0;this.lh=-1;this.ob=null}K(d,l);d.prototype.iq=function(){};d.prototype.Hy=function(){};d.prototype.Oy=function(){};d.prototype.D=function(){return this.qa};d.prototype.u=function(){return this.Hc()};d.prototype.Hc=function(){return 0==this.qa};d.prototype.xk=function(c){return 0!=(this.un&c)};d.prototype.lg=function(c,e){this.un=e?this.un|c:this.un&~c};d.prototype.tc=function(){this.xk(32)&&this.YO()};d.prototype.Bu=function(){if(this.Hc())throw a.f.X("This operation was performed on an Empty Geometry.");
};d.prototype.Ae=function(c,e){if(0>c||c>=this.qa)throw a.f.X("index out of bounds");this.tc();e.Fg(this.description);e.u()&&e.nq();for(var k=0;k<this.description.Ea;k++)for(var d=this.description.Id(k),v=0,l=a.na.Xa(d);v<l;v++){var b=this.xa[k].Of(l*c+v);e.setAttribute(d,v,b)}};d.prototype.uu=function(c,e){this.tc();for(var k=e.description,d=0;d<k.Ea;d++)for(var v=k.Id(d),l=a.na.Xa(v),b=0;b<l;b++){var f=e.Yc(v,b);this.setAttribute(v,c,b,f)}};d.prototype.w=function(c,e){if(0>c||c>=this.D())throw a.f.vd();
this.tc();this.xa[0].fc(2*c,e)};d.prototype.Aa=function(c){var e=new a.b;this.w(c,e);return e};d.prototype.Nc=function(c,e){this.xa[0].fc(2*c,e)};d.prototype.rb=function(c,e,k){if(0>c||c>=this.qa)throw a.f.vd();this.tc();var d=this.xa[0];void 0!==k?(d.write(2*c,e),d.write(2*c+1,k)):d.ho(2*c,e);this.Dc(1993)};d.prototype.kA=function(c){if(0>c||c>=this.D())throw a.f.vd();this.tc();var e=this.xa[0],k=new a.qd;k.x=e.read(2*c);k.y=e.read(2*c+1);k.z=this.hasAttribute(1)?this.xa[1].Of(c):a.na.pe(1);return k};
d.prototype.AC=function(c,e){if(0>c||c>=this.D())throw a.f.vd();this.Ud(1);this.tc();this.Dc(1993);var k=this.xa[0];k.write(2*c,e.x);k.write(2*c+1,e.y);this.xa[1].Dm(c,e.z)};d.prototype.Yc=function(c,e,k){if(0>e||e>=this.qa)throw a.f.vd();var d=a.na.Xa(c);if(k>=d)throw a.f.vd();this.tc();var v=this.description.mg(c);return 0<=v?this.xa[v].Of(e*d+k):a.na.pe(c)};d.prototype.JG=function(c,e,a){return this.Yc(c,e,a)};d.prototype.setAttribute=function(c,e,k,d){if(0>e||e>=this.qa)throw a.f.vd();var r=a.na.Xa(c);
if(k>=r)throw a.f.vd();this.Ud(c);this.tc();c=this.description.mg(c);this.Dc(1993);this.xa[c].Dm(e*r+k,d)};d.prototype.Pa=function(c){this.Bu();this.Ud(c);this.tc();return this.xa[this.description.mg(c)]};d.prototype.Zn=function(c,e){if(null!=e&&a.na.si(c)!=e.si())throw a.f.F();this.Ud(c);c=this.description.mg(c);null==this.xa&&(this.xa=a.Uc.HB(this.description.Ea));this.xa[c]=e;this.Dc(16777215)};d.prototype.mo=function(c){var e=null;if(null!=this.xa)for(var k=a.ye.ux(c,this.description),e=[],d=
0,v=c.Ea;d<v;d++)-1!=k[d]&&(e[d]=this.xa[k[d]]);this.description=c;this.xa=e;this.lh=-1;this.Dc(16777215)};d.prototype.OE=function(c){this.ev(!0);c instanceof a.h?this.R.s(c):this.R.Cp(c)};d.prototype.XO=function(c){this.ev(!1);c instanceof a.h?this.R.s(c):this.R.Cp(c)};d.prototype.Rn=function(c){this.ev(!0);this.R.copyTo(c)};d.prototype.s=function(c){this.OE(c)};d.prototype.Cp=function(c){this.OE(c)};d.prototype.ac=function(c){this.XO(c)};d.prototype.xf=function(c,e){var k=new a.Ac;if(this.Hc())return k.Oa(),
k;this.ev(!0);return this.R.xf(c,e)};d.prototype.jc=function(){var c=this.description.jc();if(!this.Hc())for(var e=this.D(),k=0,d=this.description.Ea;k<d;k++)c=this.xa[k].zk(c,0,e*a.na.Xa(this.description.Id(k)));return c};d.prototype.Eb=function(c){if(c==this)return!0;if(!(c instanceof d&&this.description.Eb(c.description))||this.Hc()!=c.Hc())return!1;if(this.Hc())return!0;var e=this.D();if(e!=c.D())return!1;for(var k=0;k<this.description.Ea;k++){var r=this.description.zd(k),v=this.Pa(r),l=c.Pa(r);
if(!v.Eb(l,0,e*a.na.Xa(r)))return!1}return!0};d.prototype.copyTo=function(c){if(c.G()!=this.G())throw a.f.F();this.wE(c)};d.prototype.wE=function(c){this.tc();c.description=this.description;c.xa=null;var e=this.description.Ea,k=null;if(null!=this.xa)for(var k=[],d=0;d<e;d++)null!=this.xa[d]&&(k[d]=this.xa[d].Sr(this.D()*a.na.Xa(this.description.Id(d))));null!=this.R?(c.R=this.R.Ja(),this.R.copyTo(c.R)):c.R=null;c.qa=this.qa;c.un=this.un;c.xa=k;try{this.iq(c)}catch(v){throw c.Oa(),a.f.SN();}};d.prototype.LE=
function(){this.qa=0;this.lh=-1;this.xa=null;this.Dc(16777215)};d.prototype.Dc=function(c){16777215==c&&(this.lh=-1,this.Hy());this.un|=c;this.CO();this.Bc()};d.prototype.ev=function(c){this.tc();if(this.xk(192))if(null==this.R?this.R=new a.ci(this.description):this.R.Fg(this.description),this.u())this.R.Oa();else{this.Ny(c);for(var e=1;e<this.description.Ea;e++)for(var k=this.description.Id(e),d=a.na.Xa(k),v=this.xa[e],l=0;l<d;l++){var b=new a.Ac;b.Oa();for(var f=0;f<this.qa;f++){var g=v.Of(f*d+
l);b.Nb(g)}this.R.setInterval(k,l,b)}c&&this.lg(192,!1)}};d.prototype.Ny=function(){this.R.Oa();for(var c=this.xa[0],e=new a.b,k=0;k<this.qa;k++)c.fc(2*k,e),this.R.Nb(e)};d.prototype.uo=function(c){c.Oa();for(var e=this.xa[0],k=new a.b,d=0;d<this.qa;d++)e.fc(2*d,k),c.Nb(k)};d.prototype.YO=function(){if(this.lh<this.qa){null==this.xa&&(this.xa=a.Uc.HB(this.description.Ea));this.lh=2147483647;for(var c=0;c<this.description.Ea;c++){var e=this.description.Id(c);if(null!=this.xa[c]){var k=a.na.Xa(e),d=
a.J.truncate(this.xa[c].size/k);d<this.qa&&(d=a.J.truncate(this.lh>this.qa+5?(5*this.qa+3)/4:this.qa),this.xa[c].resize(d*k,a.na.pe(e)));d<this.lh&&(this.lh=d)}else this.xa[c]=a.Uc.pz(e,this.qa),this.lh=this.qa}}this.Oy();this.lg(32,!1)};d.prototype.zl=function(c){if(0>c)throw a.f.F();c!=this.qa&&(this.qa=c,this.Dc(65535))};d.prototype.Kk=function(c){if(!this.xk(1)){if(!this.xk(2))return 0;if(this.NV>=c)return this.xk(8)?1:2}return-1};d.prototype.Zg=function(c,e){this.NV=e;if(-1==c)this.lg(1,!0),
this.lg(8,!0);else if(this.lg(1,!1),this.lg(8,!0),0==c)this.lg(2,!1),this.lg(4,!1);else if(1==c)this.lg(2,!0),this.lg(4,!1);else if(2==c)this.lg(2,!0),this.lg(4,!0);else throw a.f.X("internal error.");};d.prototype.CO=function(){null!=this.ob&&(this.ob=null)};d.prototype.CE=function(c,e,k,d){if(0>c||c>=this.qa)throw a.f.X("index out of bounds");if(0>e||e>=this.qa)throw a.f.X("index out of bounds");this.tc();d.Fg(this.description);d.u()&&d.nq();for(var r=0;r<this.description.Ea;r++)for(var l=this.description.Id(r),
b=0,f=a.na.Xa(l);b<f;b++){var g=this.xa[r].Of(f*c+b),h=this.xa[r].Of(f*e+b);d.setAttribute(l,b,a.Ub.Wq(g,h,k))}};d.prototype.ws=function(c,e){var a=this.xa[0].g,d=a[2*c]-a[2*e],a=a[2*c+1]-a[2*e+1];return Math.sqrt(d*d+a*a)};d.prototype.Yh=function(c,e){if(0>c||c>=this.qa)throw a.f.vd();if(e.u())throw a.f.F();this.tc();for(var k=e.description,d=0;d<k.Ea;d++)for(var v=k.zd(d),l=a.na.Xa(v),b=0;b<l;b++){var f=e.Yc(v,b);this.setAttribute(v,c,b,f)}};d.prototype.Wu=function(){return null};d.prototype.Hj=
function(){return null};return d}(a.T);a.Lu=l})(y||(y={}));(function(a){var l=function(){function l(){this.pb=this.Oo=null;this.Hn=124234251;this.Cw=!0;this.qf=-1;this.pb=new a.ad(7);this.Oo=null}l.prototype.Ep=function(a){this.Oo=a};l.prototype.NR=function(){this.Cw=!1};l.prototype.Qe=function(a){this.pb.Qe(a)};l.prototype.Js=function(a){var c=this.pb.Pe();this.lY(c);this.oY(a,c);return c};l.prototype.HR=function(a){this.pb.kd(a)};l.prototype.addElement=function(a,c){var e;-1==c?(-1==this.qf&&(this.qf=
this.Js(-1)),e=this.qf):e=c;return this.VE(a,0,e)};l.prototype.ZE=function(a){-1==this.qf&&(this.qf=this.Js(-1));return this.VE(a,1,this.qf)};l.prototype.ro=function(a){var c;-1==this.qf&&(this.qf=this.Js(-1));c=this.qf;var e=this.pb.g;if(-1==c||-1==e[7*c])return a=this.pb.nl([-1,-1,-1,a,this.Ll(),-1,-1]),e=this.pb.g,e[7*c]=a,this.pq(-1,a,c,e),a;var k=-1==c?-1:e[7*c+2];a=this.pb.nl([-1,-1,k,a,this.Ll(),-1,-1]);e=this.pb.g;e[7*k+1]=a;this.Uy(a,e);-1===e[7*a+2]&&(e[7*c]=a);this.pq(-1,a,c,e);return a};
l.prototype.iv=function(d,c,e,k){var r=-1;-1==r&&(-1==this.qf&&(this.qf=this.Js(-1)),r=this.qf);var v=this.pb.g;if(-1==r||-1==v[7*r])return e=this.pb.nl([-1,-1,-1,e,this.Ll(),-1,-1]),v=this.pb.g,v[7*r]=e,this.pq(-1,e,r,v),e;var l;k?(k=-1!=c?this.Oo.compare(this,e,c):-1,l=-1!=d?this.Oo.compare(this,e,d):1):(k=-1,l=1);if(0==k||0==l)return v[7*r+3]=0==k?c:d,-1;(-1!=c&&-1!=d?this.Hn>a.J.GB(this.Hn)>>1:-1!=c)?d=c:k=l;for(c=!0;;){if(0>k)if(l=v[7*d],-1!=l)d=l;else{k=d;e=this.pb.nl([-1,-1,d,e,this.Ll(),-1,
-1]);v=this.pb.g;v[7*d]=e;break}else if(l=v[7*d+1],-1!=l)d=l;else{k=v[7*d+6];e=this.pb.nl([-1,-1,d,e,this.Ll(),-1,-1]);v=this.pb.g;v[7*d+1]=e;break}c&&(k*=-1,c=!1)}this.Uy(e,v);-1===v[7*e+2]&&(v[7*r]=e);this.pq(k,e,r,v);return e};l.prototype.PG=function(){return this.ZS(this.qf)};l.prototype.Ld=function(a,c){c=-1==c?this.qf:c;this.Cw?this.GR(a,c):this.eZ(a,c)};l.prototype.search=function(a,c){for(c=this.ew(c);-1!=c;){var e=this.Oo.compare(this,a,c);if(0==e)return c;c=0>e?this.Pl(c):this.Nq(c)}return-1};
l.prototype.GX=function(a){for(var c=this.ew(-1),e=-1;-1!=c;){var k=a.compare(this,c);if(0==k)return c;0>k?c=this.Pl(c):(e=c,c=this.Nq(c))}return e};l.prototype.kK=function(a){for(var c=this.ew(-1),e=-1;-1!=c;){var k=a.compare(this,c);if(0==k)return c;0>k?(e=c,c=this.Pl(c)):c=this.Nq(c)}return e};l.prototype.ja=function(a){return this.pb.S(a,3)};l.prototype.Pl=function(a){return this.pb.S(a,0)};l.prototype.Nq=function(a){return this.pb.S(a,1)};l.prototype.getParent=function(a){return this.pb.S(a,
2)};l.prototype.nb=function(a){return this.pb.S(a,6)};l.prototype.Ve=function(a){return this.pb.S(a,5)};l.prototype.xc=function(a){return-1==a?this.Ol(this.qf):this.Ol(a)};l.prototype.Fc=function(a){return-1==a?this.Ys(this.qf):this.Ys(a)};l.prototype.RT=function(a){return-1==a?this.mH(this.qf):this.mH(a)};l.prototype.jk=function(a,c){this.mC(a,c)};l.prototype.ew=function(a){return-1==a?this.hH(this.qf):this.hH(a)};l.prototype.clear=function(){this.pb.Vi(!1);this.qf=-1};l.prototype.size=function(a){return-1==
a?this.jH(this.qf):this.jH(a)};l.prototype.NP=function(a,c){for(var e=c[7*a],k=c[7*a+1],d=c[7*a+4];-1!=e||-1!=k;){var v=-1!=e?c[7*e+4]:2147483647,k=-1!=k?c[7*k+4]:2147483647;if(d<=Math.min(v,k))break;v<=k?this.hK(e,c):this.gK(a,c);e=c[7*a];k=c[7*a+1]}};l.prototype.Uy=function(a,c){if(this.Cw)for(var e=c[7*a+4],k=c[7*a+2];-1!=k&&c[7*k+4]>e;)c[7*k]==a?this.hK(a,c):this.gK(k,c),k=c[7*a+2]};l.prototype.gK=function(a,c){var e=c[7*a+1],k;c[7*e+2]=c[7*a+2];c[7*a+2]=e;k=c[7*e];c[7*a+1]=k;-1!=k&&(c[7*k+2]=
a);c[7*e]=a;k=c[7*e+2];-1!=k&&(c[7*k]==a?c[7*k]=e:c[7*k+1]=e)};l.prototype.hK=function(a,c){var e=c[7*a+2],k;c[7*a+2]=c[7*e+2];c[7*e+2]=a;k=c[7*a+1];c[7*e]=k;-1!=k&&(c[7*k+2]=e);c[7*a+1]=e;k=c[7*a+2];-1!=k&&(c[7*k]===e?c[7*k]=a:c[7*k+1]=a)};l.prototype.sl=function(a,c){this.pb.P(a,2,c)};l.prototype.qC=function(a,c){this.pb.P(a,0,c)};l.prototype.uC=function(a,c){this.pb.P(a,1,c)};l.prototype.tC=function(a,c){this.pb.P(a,5,c)};l.prototype.Px=function(a,c){this.pb.P(a,6,c)};l.prototype.NK=function(a,
c){this.pb.P(c,0,a)};l.prototype.lY=function(a){this.pb.P(a,4,0)};l.prototype.oY=function(a,c){this.pb.P(c,5,a)};l.prototype.hH=function(a){return-1==a?-1:this.pb.S(a,0)};l.prototype.Ol=function(a){return-1==a?-1:this.pb.S(a,1)};l.prototype.Ys=function(a){return-1==a?-1:this.pb.S(a,2)};l.prototype.ZS=function(a){return-1==a?-1:this.pb.S(a,3)};l.prototype.jH=function(a){return-1==a?0:this.pb.S(a,4)};l.prototype.mH=function(a){return this.pb.S(a,5)};l.prototype.Ax=function(a){return this.pb.nl([-1,
-1,-1,a,this.Ll(),-1,-1])};l.prototype.Kl=function(a){-1!=a&&this.pb.kd(a)};l.prototype.Ll=function(){this.Hn=a.J.GB(this.Hn);return this.Hn&1073741823};l.prototype.VE=function(a,c,e){var k=this.pb.g;if(-1==e||-1==k[7*e])return a=this.pb.nl([-1,-1,-1,a,this.Ll(),-1,-1]),k=this.pb.g,k[7*e]=a,this.pq(-1,a,e,k),a;for(var d=-1==e?-1:k[7*e];;){var v=-1==c?1:this.Oo.compare(this,a,d);if(0>v)if(v=this.Pl(d),-1!=v)d=v;else{c=d;a=this.pb.nl([-1,-1,d,a,this.Ll(),-1,-1]);k=this.pb.g;k[7*d]=a;break}else{if(1==
c&&0==v)return k[7*e+3]=d,-1;v=k[7*d+1];if(-1!=v)d=v;else{c=k[7*d+6];a=this.pb.nl([-1,-1,d,a,this.Ll(),-1,-1]);k=this.pb.g;k[7*d+1]=a;break}}}this.Uy(a,k);-1===k[7*a+2]&&(k[7*e]=a);this.pq(c,a,e,k);return a};l.prototype.pq=function(a,c,e,k){var d;-1!=a?(d=k[7*a+5],k[7*a+5]=c):d=-1==e?-1:k[7*e+2];k[7*c+5]=d;-1!=d&&(k[7*d+6]=c);k[7*c+6]=a;a==(-1==e?-1:k[7*e+1])&&(k[7*e+1]=c);-1==a&&(k[7*e+2]=c);k[7*e+4]=(-1==e?0:k[7*e+4])+1};l.prototype.ZB=function(a,c){var e=this.pb.g,k=e[7*a+5];a=e[7*a+6];-1!=k?e[7*
k+6]=a:e[7*c+1]=a;-1!=a?e[7*a+5]=k:e[7*c+2]=k;e[7*c+4]=-1===c?-1:e[7*c+4]-1};l.prototype.eZ=function(d,c){this.ZB(d,c);var e=this.Pl(d),k=this.Nq(d),r=this.getParent(d),v=d;if(-1!=e&&-1!=k){this.Hn=a.J.GB(this.Hn);var l;l=1073741823<this.Hn?this.nb(d):this.Ve(d);var b=this.getParent(l)==d;this.pb.$x(d,l,0);this.pb.$x(d,l,1);this.pb.$x(d,l,2);-1!=r?this.Pl(r)==d?this.qC(r,l):this.uC(r,l):this.NK(l,c);b?(e==l?(this.qC(l,d),this.sl(k,l)):k==l&&(this.uC(l,d),this.sl(e,l)),this.sl(d,l),r=l):(this.sl(e,
l),this.sl(k,l),r=this.getParent(d),v=l);e=this.Pl(d);k=this.Nq(d);-1!=e&&this.sl(e,d);-1!=k&&this.sl(k,d)}e=-1!=e?e:k;-1==r?this.NK(e,c):this.Pl(r)==v?this.qC(r,e):this.uC(r,e);-1!=e&&this.sl(e,r);this.Kl(d,c)};l.prototype.GR=function(a,c){var e=this.pb.g;e[7*a+4]=2147483647;var k=-1,d=-1,v=-1===c?-1:e[7*c],l=v==a;l&&(k=e[7*v],d=e[7*v+1],-1==k&&-1==d)?(this.ZB(v,c),this.Kl(v,c),e[7*c]=-1):(this.NP(a,e),v=e[7*a+2],-1!=v&&(e[7*v]==a?e[7*v]=-1:e[7*v+1]=-1),this.ZB(a,c),this.Kl(a,c),l&&(e[7*c]=-1==k||
-1!=e[7*k+2]?d:k))};l.prototype.mC=function(a,c){this.pb.P(a,3,c)};return l}();a.tk=l})(y||(y={}));(function(a){var l=function(){function l(a,c){void 0!==a&&this.I(a,c)}l.prototype.I=function(a,c){this.ca=a;this.ha=c;this.normalize()};l.prototype.Yb=function(a){return this.ca<=a.ca?this.ha>=a.ca:a.ha>=this.ca};l.prototype.move=function(a){this.u()||(this.ca+=a,this.ha+=a)};l.prototype.normalize=function(){if(!isNaN(this.ca)){if(this.ca>this.ha){var a=this.ca;this.ca=this.ha;this.ha=a}isNaN(this.ha)&&
this.Oa()}};l.prototype.Oa=function(){this.ha=this.ca=NaN};l.prototype.u=function(){return isNaN(this.ca)};l.prototype.Nb=function(a){"number"===typeof a?this.u()?this.ha=this.ca=a:this.ml(a):a.u()||(this.u()?(this.ca=a.ca,this.ha=a.ha):(this.ca>a.ca&&(this.ca=a.ca),this.ha<a.ha&&(this.ha=a.ha),this.ca>this.ha&&this.Oa()))};l.prototype.ml=function(a){a<this.ca?this.ca=a:a>this.ha&&(this.ha=a)};l.prototype.contains=function(a){return"number"===typeof a?a>=this.ca&&a<=this.ha:a.ca>=this.ca&&a.ha<=this.ha};
l.prototype.Ma=function(a){this.u()||a.u()?this.Oa():(this.ca<a.ca&&(this.ca=a.ca),this.ha>a.ha&&(this.ha=a.ha),this.ca>this.ha&&this.Oa())};l.prototype.O=function(a){this.u()||(this.ca-=a,this.ha+=a,this.ha<this.ca&&this.Oa())};l.prototype.no=function(){return this.u()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.ca)+Math.abs(this.ha)+1)};l.prototype.jC=function(a,c){a>c?(this.ca=c,this.ha=a):(this.ca=a,this.ha=c)};l.prototype.vu=function(d){return a.J.nk(d,this.ca,this.ha)};l.prototype.N=
function(){return this.ha-this.ca};l.prototype.Wf=function(){return.5*(this.ca+this.ha)};l.prototype.Eb=function(a){return a==this?!0:a instanceof l?this.u()&&a.u()?!0:this.ca!=a.ca||this.ha!=a.ha?!1:!0:!1};l.prototype.jc=function(){return a.J.Zi(a.J.Zi())};return l}();a.Ac=l})(y||(y={}));(function(a){var l=new a.Ac,b=new a.Ac,d=function(){return function(){this.Le=null;this.qb=-1;this.wb=new a.Hb;this.XA=55555555;this.Ew=this.Hw=!1;this.rg=new a.Ac;this.rg.jC(0,0)}}();a.j_=d;var c=function(){function c(c,
e,v){this.a=c;this.il=NaN;this.$I=this.zr=0;this.aJ=NaN;this.ta=e;this.Cr=10*e;this.bJ=this.cJ=NaN;this.Ng=!1;this.sn=this.Xt=this.vp=this.Rt=this.Qt=-1;this.OA=v;this.yB=new d;this.jJ=new d;a.J.truncate(3*c.ud/2)}c.prototype.zH=function(c,e,a,d){c.Le=null===d?null:d[a[5*e]];c.Ew=null!=c.Le;c.Ew||(d=a[5*e+2],-1!==d&&this.a.fX(a[5*e],a[5*d],c.wb),c.Le=c.wb,c.rg.jC(c.wb.ua,c.wb.sa),c.rg.ha+=this.ta,c.wb.AJ(),c.Hw=c.wb.oa==c.wb.ra,c.Hw||(c.XA=(c.wb.sa-c.wb.ua)/(c.wb.oa-c.wb.ra)))};c.prototype.QQ=function(c,
e){var a=c.xs(e,this.ta,!0);if(0!=a)return 2==a?this.zz():this.Wi();c.Oq(M);c.Os(N);e.Oq(P);e.Os(S);I.ka(this.zr,this.il);M.ub(P)&&this.il==M.y?0>N.compare(S)?I.L(N):I.L(S):M.ub(S)&&this.il==M.y?0>N.compare(P)?I.L(N):I.L(P):P.ub(N)&&this.il==P.y?0>M.compare(S)?I.L(M):I.L(S):N.ub(S)&&this.il==N.y&&(0>M.compare(P)?I.L(M):I.L(P));return c.pf(I.y,I.x)<e.pf(I.y,I.x)?-1:1};c.prototype.OQ=function(c,e){if(c.wb.ra==e.wb.ra&&c.wb.ua==e.wb.ua)return c.wb.oa==e.wb.oa&&c.wb.sa==e.wb.sa?this.OA?this.zz():0:this.UF(c,
e);if(c.wb.oa==e.wb.oa&&c.wb.sa==e.wb.sa)return this.TF(c,e);var a=this.TF(c,e);c=this.UF(c,e);return 0>a&&0>c?-1:0<a&&0<c?1:this.Wi()};c.prototype.KQ=function(c,e){if(c.sa>e.sa){if(e.sa>e.ua&&e.oa-e.ra<2*this.ta&&c.Si(e.sa,e.oa,this.ta))return this.Wi()}else if((e.oa-e.ra)/(e.sa-e.ua)*(c.sa-c.ua)<this.Cr&&e.Si(c.sa,c.oa,this.ta))return this.Wi();return 1};c.prototype.LQ=function(c,e){if(c.ua<e.ua){if(e.sa>e.ua&&e.oa-e.ra<2*this.ta&&c.Si(e.sa,e.oa,this.ta))return this.Wi()}else if((e.oa-e.ra)/(e.sa-
e.ua)*(c.ua-c.sa)<this.Cr&&e.Si(c.ua,c.ra,this.ta))return this.Wi();return-1};c.prototype.MQ=function(c,e){var k=new a.b;k.zc(e.Cc(),e.ec());k.Tr();k.normalize();var d=new a.b;d.zc(c.ec(),e.ec());var r=new a.b;r.zc(c.Cc(),e.ec());var d=d.oi(k),k=r.oi(k),r=Math.abs(d),l=Math.abs(k);if(r<l){if(r<this.Cr&&e.Si(c.ua,c.ra,this.ta))return this.Wi()}else if(l<this.Cr&&e.Si(c.sa,c.oa,this.ta))return this.Wi();return 0>d&&0>k?-1:0<d&&0<k?1:this.Wi()};c.prototype.SF=function(c,e){return c.ra==e.ra&&c.ua==e.ua?
this.KQ(c,e):c.oa==e.oa&&c.sa==e.sa?this.LQ(c,e):this.MQ(c,e)};c.prototype.NQ=function(c,e){return c.oa==e.oa&&c.sa==e.sa&&c.ra==e.ra&&c.ua==e.ua?this.OA?this.zz():0:this.Wi()};c.prototype.TF=function(c,e){var a=1;if(c.wb.ra<e.wb.ra){var a=-1,k=c;c=e;e=k}k=c.wb;c=e.wb;var d=k.ua-c.ua;e=e.XA*(k.ra-c.ra);var r=this.Cr;return d<e-r?-a:d>e+r?a:c.Si(k.ua,k.ra,this.ta)?this.Wi():d<e?-a:a};c.prototype.UF=function(c,e){var a=1;if(e.wb.oa<c.wb.oa){var a=-1,k=c;c=e;e=k}k=c.wb;c=e.wb;var d=k.sa-c.ua;e=e.XA*
(k.oa-c.ra);var r=this.Cr;return d<e-r?-a:d>e+r?a:c.Si(k.sa,k.oa,this.ta)?this.Wi():d<e?-a:a};c.prototype.zz=function(){this.Ng=!0;this.mj=new a.$d(5,this.vp,this.Xt);return-1};c.prototype.Wi=function(){this.Ng=!0;this.OA?this.mj=new a.$d(4,this.vp,this.Xt):this.Xt=this.vp=this.Rt=this.Qt=-1;return-1};c.prototype.PQ=function(c,e,a,d){if(this.Ng)return-1;var k=this.aJ==this.il&&this.$I==this.zr,r;k&&c==this.Qt?r=this.bJ:(r=NaN,this.Qt=-1);k&&e==this.Rt?k=this.cJ:(k=NaN,this.Rt=-1);a.Le.RJ(l);d.Le.RJ(b);
if(l.ha<b.ca)return-1;if(b.ha<l.ca)return 1;this.aJ=this.il;this.$I=this.zr;isNaN(r)&&(this.Qt=c,this.bJ=r=c=a.Le.pf(this.il,this.zr));isNaN(k)&&(this.Rt=e,this.cJ=k=c=d.Le.pf(this.il,this.zr));return Math.abs(r-k)<=this.ta?this.QQ(a.Le,d.Le):r<k?-1:r>k?1:0};c.prototype.Fs=function(){this.Ng=!1};c.prototype.fn=function(){return this.mj};c.prototype.PK=function(c,e){this.il=c;this.zr=e;this.Xt=this.vp=this.Rt=this.Qt=-1};c.prototype.compare=function(c,e,a){if(this.Ng)return-1;c=c.ja(a);this.sn=a;return this.WF(e,
e,c,c)};c.prototype.WF=function(c,e,a,d){var k;this.vp==e?k=this.yB:(this.vp=e,k=this.yB,this.yB.qb=c,this.zH(k,e,this.a.Dd.g,this.a.wf));var r;null==r&&(this.Xt=d,r=this.jJ,this.jJ.qb=a,this.zH(r,d,this.a.Dd.g,this.a.wf));if(k.Ew||r.Ew)return this.PQ(e,d,k,r);if(k.rg.ha<r.rg.ca)return-1;if(r.rg.ha<k.rg.ca)return 1;c=k.Hw?1:0;c|=r.Hw?2:0;return 0==c?this.OQ(k,r):1==c?this.SF(k.wb,r.wb):2==c?-1*this.SF(r.wb,k.wb):this.NQ(k.wb,r.wb)};return c}();a.eE=c})(y||(y={}));(function(a){var l=function(){function l(d,
c){this.a=d;this.ta=c;this.Ng=!1;this.vp=-1;this.rg=new a.Ac;this.vr=new a.b;this.vr.$c();this.Fe=new a.Hb;this.sn=-1;this.gB=1.7976931348623157E308}l.prototype.Fs=function(){this.Ng=!1;this.gB=1.7976931348623157E308};l.prototype.Yh=function(a){this.vr.L(a)};l.prototype.compare=function(a,c){return this.XF(c,a.ja(c))};l.prototype.XF=function(d,c){var e=null!=this.a.ic(c);e||(this.a.pd(c,this.Fe),this.rg.jC(this.Fe.ua,this.Fe.sa));if(e)throw a.f.X("not implemented");if(this.vr.x+this.ta<this.rg.ca)return-1;
if(this.vr.x-this.ta>this.rg.ha)return 1;if(this.Fe.ra==this.Fe.oa)return this.sn=d,this.Ng=!0,0;this.Fe.AJ();c=this.Fe.ec();e=new a.b;e.zc(this.Fe.Cc(),c);e.Tr();var k=new a.b;k.zc(this.vr,c);c=e.oi(k);c/=e.length();return c<10*-this.ta?-1:c>10*this.ta?1:this.Fe.lt(this.vr,this.ta)&&(e=Math.abs(c),e<this.gB&&(this.sn=d,this.gB=e),this.Ng=!0,e<.25*this.ta)?0:0>c?-1:1};return l}();a.$N=l})(y||(y={}));(function(a){function l(a,c,e,k){e=new Float64Array(a.subarray(e,k));a.set(e,c)}var b=function(){function d(c){this.Fa=
this.Ce=!1;this.g=[];var e=c;2>e&&(e=2);this.g=a.J.gf(e,d.Bb);this.size=c}d.prototype.rotate=function(c,e,k){if(this.Fa)throw a.f.X("invalid_call");if(e<c||e>k||c>k)throw a.f.F();c!=e&&k!=e&&(this.Zd(c,e-c,1),this.Zd(e,k-e,1),this.Zd(c,k-c,1))};d.yd=function(c,e){d.Bb=e;c=new d(c);d.Bb=0;return c};d.Ak=function(c){var e=new d(0);e.g=c.g.slice(0);e.size=c.size;return e};d.$=function(c,e){var a=new d(0);a.size=c.size;a.size>e&&(a.size=e);a.g=c.g.slice(0,a.size);return a};d.prototype.yb=function(){};
d.prototype.read=function(c){return this.g[c]};d.prototype.fc=function(c,e){e.x=this.g[c];e.y=this.g[c+1]};d.prototype.nX=function(c,e){e.x=this.g[c];e.y=this.g[c+1]};d.prototype.get=function(c){return this.g[c]};d.prototype.write=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.set=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.ho=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.add=function(c){this.resize(this.size+1);this.g[this.size-
1]=c};d.prototype.Sr=function(c){return d.$(this,c)};d.prototype.Of=function(c){return this.read(c)};d.prototype.resize=function(c,e){void 0===e&&(e=0);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");if(c<=this.size){if(a.J.truncate(5*c/4)<this.g.length){var k=this.g.slice(0,c);this.g=k}}else if(c>this.g.length){a.J.truncate(64>c?Math.max(2*c,4):5*c/4);for(var k=this.g.slice(0),d=this.g.length;d<c;d++)k[d]=e;this.g=k}this.size=c};d.prototype.yf=function(c){(null==
this.g||c>this.g.length)&&this.resize(c);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");this.size=c};d.prototype.Dm=function(c,e){this.write(c,e)};d.prototype.zk=function(c,e,k){for(var d=this.size;e<d&&e<k;e++)c=a.J.Zi(this.read(e));return c};d.prototype.Eb=function(c,e,a){if(null==c||!(c instanceof d))return!1;var k=this.size,v=c.size;if(a>k||a>v&&k!=v)return!1;for(a>k&&(a=k);e<a;e++)if(this.read(e)!=c.read(e))return!1;return!0};d.prototype.Rk=function(c,
e,k,d,v,l,b){if(this.Fa)throw a.f.La();if(!v&&(1>l||0!=d%l))throw a.f.F();var r=this.size-b;r<d&&this.resize(this.size+d-r);for(r=0;r<b-c;r++)this.g[c+d+r]=this.g[c+r];this.g==e.g&&c<k&&(k+=d);if(v)for(r=0;r<d;r++)this.g[r+c]=e.g[k+r];else for(v=d,b=0;b<d;b+=l)for(v-=l,r=0;r<l;r++)this.g[c+b+r]=e.g[k+v+r]};d.prototype.Qk=function(c,e,k,d){if(this.Fa)throw a.f.La();d-=c;for(var r=this.g.slice(c,c+d),l=0;l<d;l++)this.g[c+k+l]=r[l];for(d=0;d<k;d++)this.g[c+d]=e};d.prototype.eh=function(c,e,k){if(this.Fa)throw a.f.La();
for(var d=this.g.slice(c,c+(k-c)),v=0;v<k-c;v++)this.g[v+c+2]=d[v];this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.hs=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(k.length<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),v)for(v=0;v<e;v++)this.g[c+v]=k[d+v];else for(v||(c+=e-1),e=d+e;d<e;d++)this.g[c]=k[d],c--};d.prototype.Em=function(c,e,k,d,v,l){if(0>c||0>e||0>d)throw a.f.F();if(!v&&(0>=l||0!=e%l))throw a.f.F();if(k.size<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+
c),k==this)this.Ij(c,e,d,v,l);else if(v)for(v=0;v<e;v++)this.g[c]=k.g[d],c++,d++;else if(d=d+e-l,1==l)for(v=0;v<e;v++)this.g[c]=k.g[d],c++,d--;else for(v=0,e=a.J.truncate(e/l);v<e;v++){for(var r=0;r<l;r++)this.g[c+r]=k.g[d+r];c+=l;d-=l}};d.prototype.Ek=function(c,e,k){if(this.Fa)throw a.f.La();if(c+e>this.size)throw a.f.La();if(0<k-(c+e)){k-=c+e;for(var d=this.g.slice(c+e,c+k+e),v=0;v<k;v++)this.g[c+v]=d[v]}this.size-=e};d.prototype.Zd=function(c,e,k){if(this.Fa)throw a.f.La();if(1>k||0!=e%k)throw a.f.La();
for(var d=e>>1,v=0;v<d;v+=k){e-=k;for(var l=0;l<k;l++){var b=this.g[c+v+l];this.g[c+v+l]=this.g[c+e+l];this.g[c+e+l]=b}}};d.prototype.Zh=function(c,e,k){if(0>e||0>k||0>e||k+e>this.size)throw a.f.F();for(var d=e;d<e+k;d++)this.g[d]=c};d.prototype.Ij=function(c,e,k,d,v){if(!d||c!=k){for(var r=0;r<e;r++)this.g[c+r]=this.g[k+r];if(!d)for(k=c,c=c+e-v,d=0,e=a.J.truncate(e/2);d<e;d++){for(r=0;r<v;r++){var l=this.g[k+r];this.g[k+r]=this.g[c+r];this.g[c+r]=l}k+=v;c-=v}}};d.prototype.js=function(c,e,k,d,v){if(0>
c||0>e||0>d)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=d;d<e;d++)this.g[c]=k[d].x,this.g[c+1]=k[d].y,c+=v};d.prototype.gy=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=d;d<e;d++)this.g[c]=k[d][0],this.g[c+1]=k[d][1],c+=v};d.prototype.pl=function(c,e,k,d,v){if(0>c||0>e||0>d||this.size<e+c)throw a.f.F();if(v)for(v=0;v<e;v++)k[d+v]=this.g[c+v];else for(d=d+e-1;c<e;c++)k[d]=
this.g[c],d--};d.prototype.Gx=function(c,e,k,d,v){if(0>c||0>e||0>d||this.size<(e>>1)+c)throw a.f.F();if(0!=e)for(v||(c+=e-1),v=v?2:-2,e=d+e;d<e;d++)k[d][0]=this.g[c],k[d][1]=this.g[c+1],c+=v};d.prototype.clear=function(c){c?this.resize(0):this.yf(0)};d.prototype.Mp=function(){this.Ce=this.Fa=!0};d.prototype.Gd=function(c,e,a){var k=this.g.slice(0,c),d=this.g.slice(e);c=this.g.slice(c,e).sort(a);this.g.length=0;this.g.push.apply(this.g,k.concat(c).concat(d))};d.prototype.si=function(){return 1};d.Bb=
0;return d}();a.Sd=b;b=function(){function d(c){this.Fa=this.Ce=!1;this.g=null;var e=c;2>e&&(e=2);this.g=new Float64Array(e);this.size=c}d.prototype.rotate=function(c,e,k){if(this.Fa)throw a.f.X("invalid_call");if(e<c||e>k||c>k)throw a.f.F();c!=e&&k!=e&&(this.Zd(c,e-c,1),this.Zd(e,k-e,1),this.Zd(c,k-c,1))};d.yd=function(c,e){var a=new d(c),r=a.g;2>c&&(c=2);if(0!==e)for(var v=0;v<c;v++)r[v]=e;return a};d.Ak=function(c){var e=new d(0);e.g=new Float64Array(c.g);e.size=c.size;return e};d.$=function(c,
e){var a=new d(0);a.size=c.size;a.size>e&&(a.size=e);e=a.size;2>e&&(e=2);a.g=new Float64Array(e);a.g.set(c.g.length<=e?c.g:c.g.subarray(0,e),0);return a};d.prototype.yb=function(c){0>=c||(null==this.g?this.g=new Float64Array(c):c<=this.g.length||(0<this.g.length?(c=new Float64Array(c),c.set(this.g),this.g=c):this.g=new Float64Array(c)))};d.prototype.read=function(c){return this.g[c]};d.prototype.fc=function(c,e){e.x=this.g[c];e.y=this.g[c+1]};d.prototype.get=function(c){return this.g[c]};d.prototype.write=
function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.set=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.ho=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.add=function(c){this.resize(this.size+1);this.g[this.size-1]=c};d.prototype.Sr=function(c){return d.$(this,c)};d.prototype.Of=function(c){return this.read(c)};d.prototype.resize=function(c,e){void 0===e&&(e=0);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");
if(c<=this.size){if(30<this.g.length&&5*c/4<this.g.length){var k=new Float64Array(this.g,0,c);this.g=k}}else{c>this.g.length&&(k=a.J.truncate(64>c?Math.max(2*c,4):5*c/4),k=new Float64Array(k),k.set(this.g),this.g=k);for(var k=this.g,d=this.size;d<c;d++)k[d]=e}this.size=c};d.prototype.yf=function(c){(null==this.g||c>this.g.length)&&this.resize(c);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");this.size=c};d.prototype.Dm=function(c,e){this.write(c,e)};d.prototype.zk=
function(c,e,k){for(var d=this.size;e<d&&e<k;e++)c=a.J.Zi(this.read(e));return c};d.prototype.Eb=function(c,e,a){if(null==c||!(c instanceof d))return!1;var k=this.size,v=c.size;if(a>k||a>v&&k!=v)return!1;for(a>k&&(a=k);e<a;e++)if(this.read(e)!=c.read(e))return!1;return!0};d.prototype.Rk=function(c,e,k,d,v,b,J){if(this.Fa)throw a.f.La();if(!v&&(1>b||0!=d%b))throw a.f.F();var r=this.size-J;r<d&&this.resize(this.size+d-r);l(this.g,c+d,c,c+(J-c));this.g==e.g&&c<k&&(k+=d);if(v)this.g.set(e.g.subarray(k,
k+d),c);else for(v=d,J=0;J<d;J+=b)for(v-=b,r=0;r<b;r++)this.g[c+J+r]=e.g[k+v+r]};d.prototype.Qk=function(c,e,k,d){if(this.Fa)throw a.f.La();d-=c;l(this.g,c+d,c,c+d);for(d=0;d<k;d++)this.g[c+d]=e};d.prototype.eh=function(c,e,k){if(this.Fa)throw a.f.La();l(this.g,c+2,c,c+(k-c));this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.hs=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(k.length<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),v)this.g.set(k.subarray(d,e),c);else for(v||(c+=e-1),e=
d+e;d<e;d++)this.g[c]=k[d],c--};d.prototype.Em=function(c,e,k,d,v,l){if(0>c||0>e||0>d)throw a.f.F();if(!v&&(0>=l||0!=e%l))throw a.f.F();if(k.size<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),k==this)this.Ij(c,e,d,v,l);else if(v)for(v=0;v<e;v++)this.g[c]=k.g[d],c++,d++;else if(d=d+e-l,1==l)for(v=0;v<e;v++)this.g[c]=k.g[d],c++,d--;else for(v=0,e=a.J.truncate(e/l);v<e;v++){for(var r=0;r<l;r++)this.g[c+r]=k.g[d+r];c+=l;d-=l}};d.prototype.Ek=function(c,e,k){if(this.Fa)throw a.f.La();if(c+
e>this.size)throw a.f.La();0<k-(c+e)&&l(this.g,c,c+e,c+(k-(c+e))+e);this.size-=e};d.prototype.Zd=function(c,e,k){if(this.Fa)throw a.f.La();if(1>k||0!=e%k)throw a.f.La();for(var d=e>>1,v=0;v<d;v+=k){e-=k;for(var l=0;l<k;l++){var b=this.g[c+v+l];this.g[c+v+l]=this.g[c+e+l];this.g[c+e+l]=b}}};d.prototype.Zh=function(c,e,k){if(0>e||0>k||0>e||k+e>this.size)throw a.f.F();for(var d=e;d<e+k;d++)this.g[d]=c};d.prototype.Ij=function(c,e,k,d,v){if(!d||c!=k)if(this.g.set(this.g.subarray(k,k+e),c),!d)for(k=c,
c=c+e-v,d=0,e=a.J.truncate(e/2);d<e;d++){for(var r=0;r<v;r++){var l=this.g[k+r];this.g[k+r]=this.g[c+r];this.g[c+r]=l}k+=v;c-=v}};d.prototype.js=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=d;d<e;d++)this.g[c]=k[d].x,this.g[c+1]=k[d].y,c+=v};d.prototype.gy=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=d;d<e;d++)this.g[c]=k[d][0],
this.g[c+1]=k[d][1],c+=v};d.prototype.pl=function(c,e,k,d,v){if(0>c||0>e||0>d||this.size<e+c)throw a.f.F();if(v)for(v=0;v<e;v++)k[d+v]=this.g[c+v];else for(d=d+e-1;c<e;c++)k[d]=this.g[c],d--};d.prototype.Gx=function(c,e,k,d,v){if(0>c||0>e||0>d||this.size<(e>>1)+c)throw a.f.F();if(0!=e)for(v||(c+=e-1),v=v?2:-2,e=d+e;d<e;d++)k[d][0]=this.g[c],k[d][1]=this.g[c+1],c+=v};d.prototype.clear=function(c){c?this.resize(0):this.yf(0)};d.prototype.Mp=function(){this.Ce=this.Fa=!0};d.prototype.Gd=function(c,e,
a){Array.prototype.sort.call(this.g.subarray(c,e),a)};d.prototype.si=function(){return 1};return d}();a.JL=b})(y||(y={}));!0===y.Xh.Bm&&!0===y.Xh.iw&&(y.Sd=y.JL);(function(a){function l(a,c,e,k){e=new Int32Array(a.subarray(e,k));a.set(e,c)}a.AZ=function(){return function(){this.random=1973}}();var b=function(){function d(c){this.Fa=this.Ce=!1;this.g=[];var e=c;2>e&&(e=2);this.g=this.g=a.J.gf(e,d.Bb);this.size=c}d.prototype.rotate=function(c,e,k){if(this.Fa)throw a.f.X("invalid_call");if(e<c||e>k||
c>k)throw a.f.F();c!=e&&k!=e&&(this.Zd(c,e-c,1),this.Zd(e,k-e,1),this.Zd(c,k-c,1))};d.yd=function(c,e){d.Bb=e;c=new d(c);d.Bb=0;return c};d.Ak=function(c){var e=new d(0);e.g=c.g.slice(0);e.size=c.size;return e};d.$=function(c,e){var a=new d(0);a.size=c.size;a.size>e&&(a.size=e);a.g=c.g.slice(0,a.size);return a};d.prototype.yb=function(){};d.prototype.read=function(c){return this.g[c]};d.prototype.fc=function(c,e){e.x=this.g[c];e.y=this.g[c+1]};d.prototype.get=function(c){return this.g[c]};d.prototype.write=
function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.set=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.ho=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.add=function(c){this.resize(this.size+1);this.g[this.size-1]=c};d.prototype.Sr=function(c){return d.$(this,c)};d.prototype.Of=function(c){return this.read(c)};d.prototype.resize=function(c,e){void 0===e&&(e=0);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");
if(c<=this.size){if(a.J.truncate(5*c/4)<this.g.length){var k=this.g.slice(0,c);this.g=k}}else if(c>this.g.length){a.J.truncate(64>c?Math.max(2*c,4):5*c/4);for(var k=this.g.slice(0),d=this.g.length;d<c;d++)k[d]=e;this.g=k}this.size=c};d.prototype.yf=function(c){(null==this.g||c>this.g.length)&&this.resize(c);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");this.size=c};d.prototype.Dm=function(c,e){this.write(c,e)};d.prototype.zk=function(c,e,k){for(var d=this.size;e<
d&&e<k;e++)c=a.J.dh(this.read(e),c);return c};d.prototype.Eb=function(c,e,a){if(null==c||!(c instanceof d))return!1;var k=this.size,v=c.size;if(a>k||a>v&&k!=v)return!1;for(a>k&&(a=k);e<a;e++)if(this.read(e)!=c.read(e))return!1;return!0};d.prototype.Rk=function(c,e,k,d,v,l,b){if(this.Fa)throw a.f.La();if(!v&&(1>l||0!=d%l))throw a.f.F();for(var r=0;r<b-c;r++)this.g[c+d+r]=this.g[c+r];this.g==e.g&&c<k&&(k+=d);if(v)for(r=0;r<d;r++)this.g[r+c]=e.g[k+r];else for(v=d,b=0;b<d;b+=l)for(v-=l,r=0;r<l;r++)this.g[c+
b+r]=e.g[k+v+r]};d.prototype.Qk=function(c,e,k,d){if(this.Fa)throw a.f.La();d-=c;for(var r=this.g.slice(c,c+d),l=0;l<d;l++)this.g[c+k+l]=r[l];for(d=0;d<k;d++)this.g[c+d]=e};d.prototype.eh=function(c,e,k){if(this.Fa)throw a.f.La();for(var d=this.g.slice(c,c+(k-c)),v=0;v<k-c;v++)this.g[v+c+2]=d[v];this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.hs=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(k.length<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),v)for(v=0;v<e;v++)this.g[c+v]=k[d+
v];else for(v||(c+=e-1),e=d+e;d<e;d++)this.g[c]=k[d],c--};d.prototype.Em=function(c,e,k,d,v,l){if(0>c||0>e||0>d)throw a.f.F();if(!v&&(0>=l||0!=e%l))throw a.f.F();if(k.size<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),k==this)this.Ij(c,e,d,v,l);else if(v)for(v=0;v<e;v++)this.g[c]=k.g[d],c++,d++;else if(d=d+e-l,1==l)for(v=0;v<e;v++)this.g[c]=k.g[d],c++,d--;else for(v=0,e=a.J.truncate(e/l);v<e;v++){for(var r=0;r<l;r++)this.g[c+r]=k.g[d+r];c+=l;d-=l}};d.prototype.Ek=function(c,e,k){if(this.Fa)throw a.f.La();
if(c+e>this.size)throw a.f.La();if(0<k-(c+e)){k-=c+e;for(var d=this.g.slice(c+e,c+k+e),v=0;v<k;v++)this.g[c+v]=d[v]}this.size-=e};d.prototype.Zd=function(c,e,k){if(this.Fa)throw a.f.La();if(1>k||0!=e%k)throw a.f.La();for(var d=e>>1,v=0;v<d;v+=k){e-=k;for(var l=0;l<k;l++){var b=this.g[c+v+l];this.g[c+v+l]=this.g[c+e+l];this.g[c+e+l]=b}}};d.prototype.Zh=function(c,e,k){if(0>e||0>k||0>e||k+e>this.size)throw a.f.F();for(var d=e;d<e+k;d++)this.g[d]=c};d.prototype.Ij=function(c,e,k,d,v){if(!d||c!=k){for(var r=
0;r<e;r++)this.g[c+r]=this.g[k+r];if(!d)for(k=c,c=c+e-v,d=0,e=a.J.truncate(e/2);d<e;d++){for(r=0;r<v;r++){var l=this.g[k+r];this.g[k+r]=this.g[c+r];this.g[c+r]=l}k+=v;c-=v}}};d.prototype.js=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=d;d<e;d++)this.g[c]=k[d].x,this.g[c+1]=k[d].y,c+=v};d.prototype.pl=function(c,e,k,d,v){if(0>c||0>e||0>d||this.size<e+c)throw a.f.F();if(v)for(v=0;v<e;v++)k[d+v]=this.g[c+v];else for(d=
d+e-1;c<e;c++)k[d]=this.g[c],d--};d.prototype.clear=function(c){c?this.resize(0):this.yf(0)};d.prototype.Mp=function(){this.Ce=this.Fa=!0};d.prototype.Gd=function(c,e,a){var k=this.g.slice(0,c),d=this.g.slice(e);c=this.g.slice(c,e).sort(a);this.g.length=0;this.g.push.apply(this.g,k.concat(c).concat(d))};d.prototype.si=function(){return 2};d.prototype.Fc=function(){return this.g[this.size-1]};d.prototype.Pf=function(){this.resize(this.size-1)};d.prototype.BK=function(c){this.g[this.size-1]=c};d.prototype.GJ=
function(c){c<this.size-1&&(this.g[c]=this.g[this.size-1]);this.resize(this.size-1)};d.prototype.Nv=function(c){for(var e=0,a=this.size;e<a;e++)if(this.g[e]==c)return e;return-1};d.prototype.mA=function(c){return 0<=this.Nv(c)};d.Bb=0;return d}();a.ia=b;b=function(){function d(c){this.Fa=this.Ce=!1;this.g=null;var e=c;2>e&&(e=2);this.g=new Int32Array(e);this.size=c}d.prototype.rotate=function(c,e,k){if(this.Fa)throw a.f.X("invalid_call");if(e<c||e>k||c>k)throw a.f.F();c!=e&&k!=e&&(this.Zd(c,e-c,1),
this.Zd(e,k-e,1),this.Zd(c,k-c,1))};d.yd=function(c,e){var a=new d(c),r=a.g;2>c&&(c=2);if(0!==e)for(var v=0;v<c;v++)r[v]=e;return a};d.Ak=function(c){var e=new d(0);e.g=new Int32Array(c.g);e.size=c.size;return e};d.$=function(c,e){var a=new d(0);a.size=c.size;a.size>e&&(a.size=e);e=a.size;2>e&&(e=2);a.g=new Int32Array(e);a.g.set(c.g.length<=e?c.g:c.g.subarray(0,e),0);return a};d.prototype.yb=function(c){0>=c||(null==this.g?this.g=new Int32Array(c):c<=this.g.length||(0<this.g.length?(c=new Int32Array(c),
c.set(this.g),this.g=c):this.g=new Int32Array(c)))};d.prototype.read=function(c){return this.g[c]};d.prototype.fc=function(c,e){e.x=this.g[c];e.y=this.g[c+1]};d.prototype.get=function(c){return this.g[c]};d.prototype.write=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.set=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.ho=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.add=function(c){this.resize(this.size+1);this.g[this.size-
1]=c};d.prototype.Sr=function(c){return d.$(this,c)};d.prototype.Of=function(c){return this.read(c)};d.prototype.resize=function(c,e){void 0===e&&(e=0);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");if(c<=this.size){if(30<this.g.length&&5*c/4<this.g.length){var k=new Int32Array(this.g,0,c);this.g=k}}else{c>this.g.length&&(k=a.J.truncate(64>c?Math.max(2*c,4):5*c/4),k=new Int32Array(k),k.set(this.g),this.g=k);for(var k=this.g,d=this.size;d<c;d++)k[d]=e}this.size=
c};d.prototype.yf=function(c){(null==this.g||c>this.g.length)&&this.resize(c);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");this.size=c};d.prototype.Dm=function(c,e){this.write(c,e)};d.prototype.zk=function(c,e,k){for(var d=this.size;e<d&&e<k;e++)c=a.J.dh(this.read(e),c);return c};d.prototype.Eb=function(c,e,a){if(null==c||!(c instanceof d))return!1;var k=this.size,v=c.size;if(a>k||a>v&&k!=v)return!1;for(a>k&&(a=k);e<a;e++)if(this.read(e)!=c.read(e))return!1;
return!0};d.prototype.Rk=function(c,e,k,d,v,b,J){if(this.Fa)throw a.f.La();if(!v&&(1>b||0!=d%b))throw a.f.F();l(this.g,c+d,c,c+(J-c));this.g==e.g&&c<k&&(k+=d);if(v)this.g.set(e.g.subarray(k,k+d),c);else for(v=d,J=0;J<d;J+=b){v-=b;for(var r=0;r<b;r++)this.g[c+J+r]=e.g[k+v+r]}};d.prototype.Qk=function(c,e,k,d){if(this.Fa)throw a.f.La();d-=c;l(this.g,c+d,c,c+d);for(d=0;d<k;d++)this.g[c+d]=e};d.prototype.eh=function(c,e,k){if(this.Fa)throw a.f.La();l(this.g,c+2,c,c+(k-c));this.g[c]=e.x;this.g[c+1]=e.y};
d.prototype.hs=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(k.length<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),v)this.g.set(k.subarray(d,e),c);else for(v||(c+=e-1),e=d+e;d<e;d++)this.g[c]=k[d],c--};d.prototype.Em=function(c,e,k,d,v,l){if(0>c||0>e||0>d)throw a.f.F();if(!v&&(0>=l||0!=e%l))throw a.f.F();if(k.size<d+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),k==this)this.Ij(c,e,d,v,l);else if(v)for(v=0;v<e;v++)this.g[c]=k.g[d],c++,d++;else if(d=d+e-l,1==l)for(v=
0;v<e;v++)this.g[c]=k.g[d],c++,d--;else for(v=0,e=a.J.truncate(e/l);v<e;v++){for(var r=0;r<l;r++)this.g[c+r]=k.g[d+r];c+=l;d-=l}};d.prototype.Ek=function(c,e,k){if(this.Fa)throw a.f.La();if(c+e>this.size)throw a.f.La();0<k-(c+e)&&l(this.g,c,c+e,c+(k-(c+e))+e);this.size-=e};d.prototype.Zd=function(c,e,k){if(this.Fa)throw a.f.La();if(1>k||0!=e%k)throw a.f.La();for(var d=e>>1,v=0;v<d;v+=k){e-=k;for(var l=0;l<k;l++){var b=this.g[c+v+l];this.g[c+v+l]=this.g[c+e+l];this.g[c+e+l]=b}}};d.prototype.Zh=function(c,
e,k){if(0>e||0>k||0>e||k+e>this.size)throw a.f.F();for(var d=e;d<e+k;d++)this.g[d]=c};d.prototype.Ij=function(c,e,k,d,v){if(!d||c!=k)if(this.g.set(this.g.subarray(k,k+e),c),!d)for(k=c,c=c+e-v,d=0,e=a.J.truncate(e/2);d<e;d++){for(var r=0;r<v;r++){var l=this.g[k+r];this.g[k+r]=this.g[c+r];this.g[c+r]=l}k+=v;c-=v}};d.prototype.js=function(c,e,k,d,v){if(0>c||0>e||0>d)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=d;d<e;d++)this.g[c]=k[d].x,this.g[c+1]=k[d].y,
c+=v};d.prototype.pl=function(c,e,k,d,v){if(0>c||0>e||0>d||this.size<e+c)throw a.f.F();if(v)for(v=0;v<e;v++)k[d+v]=this.g[c+v];else for(d=d+e-1;c<e;c++)k[d]=this.g[c],d--};d.prototype.clear=function(c){c?this.resize(0):this.yf(0)};d.prototype.Mp=function(){this.Ce=this.Fa=!0};d.prototype.Gd=function(c,e,a){10>e-c?d.ul(this.g,c,e,a):d.Oi(this.g,c,e-1,a)};d.prototype.si=function(){return 2};d.prototype.Fc=function(){return this.g[this.size-1]};d.prototype.Pf=function(){this.resize(this.size-1)};d.prototype.BK=
function(c){this.g[this.size-1]=c};d.prototype.GJ=function(c){c<this.size-1&&(this.g[c]=this.g[this.size-1]);this.resize(this.size-1)};d.prototype.Nv=function(c){for(var e=0,a=this.size;e<a;e++)if(this.g[e]==c)return e;return-1};d.prototype.mA=function(c){return 0<=this.Nv(c)};d.ul=function(c,e,a,d){for(var k=e;k<a;k++){for(var r=c[k],l=k-1;l>=e&&0<d(c[l],r);)c[l+1]=c[l],l--;c[l+1]=r}};d.Wg=function(c,e,a){var d=c[a];c[a]=c[e];c[e]=d};d.Oi=function(c,e,a,r){if(!(e>=a))for(;;){if(9>a-e){d.ul(c,e,a+
1,r);break}var k=c[e];d.Wg(c,e,a);for(var l=e,b=e;b<a;b++)0>=r(c[b],k)&&(d.Wg(c,l,b),l+=1);d.Wg(c,l,a);l-e<a-l?(d.Oi(c,e,l-1,r),e=l+1):(d.Oi(c,l+1,a,r),a=l-1)}};return d}();a.iy=b})(y||(y={}));!0===y.Xh.Bm&&(y.ia=y.iy);(function(a){function l(a,c,e,k){e=new Int8Array(a.subarray(e,k));a.set(e,c)}var b=function(){function d(c){this.Fa=this.Ce=!1;this.g=[];var e=c;2>e&&(e=2);this.g=a.J.gf(e,d.Bb);this.size=c}d.prototype.rotate=function(c,e,d){if(this.Fa)throw a.f.X("invalid_call");if(e<c||e>d||c>d)throw a.f.F();
c!=e&&d!=e&&(this.Zd(c,e-c,1),this.Zd(e,d-e,1),this.Zd(c,d-c,1))};d.yd=function(c,e){d.Bb=e;c=new d(c);d.Bb=0;return c};d.Ak=function(c){var e=new d(0);e.g=c.g.slice(0);e.size=c.size;return e};d.$=function(c,e){var a=new d(0);a.size=c.size;a.size>e&&(a.size=e);a.g=c.g.slice(0,a.size);return a};d.prototype.yb=function(){};d.prototype.read=function(c){return this.g[c]};d.prototype.fc=function(c,e){e.x=this.g[c];e.y=this.g[c+1]};d.prototype.get=function(c){return this.g[c]};d.prototype.write=function(c,
e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.set=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.ho=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.add=function(c){this.resize(this.size+1);this.g[this.size-1]=c};d.prototype.Sr=function(c){return d.$(this,c)};d.prototype.Of=function(c){return this.read(c)};d.prototype.resize=function(c,e){void 0===e&&(e=0);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");
if(c<=this.size){if(a.J.truncate(5*c/4)<this.g.length){var d=this.g.slice(0,c);this.g=d}}else if(c>this.g.length){a.J.truncate(64>c?Math.max(2*c,4):5*c/4);for(var d=this.g.slice(0),r=this.g.length;r<c;r++)d[r]=e;this.g=d}this.size=c};d.prototype.yf=function(c){(null==this.g||c>this.g.length)&&this.resize(c);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");this.size=c};d.prototype.Dm=function(c,e){this.write(c,e)};d.prototype.zk=function(c,e,d){for(var k=this.size;e<
k&&e<d;e++)c=a.J.dh(this.read(e),c);return c};d.prototype.Eb=function(c,e,a){if(null==c||!(c instanceof d))return!1;var k=this.size,v=c.size;if(a>k||a>v&&k!=v)return!1;for(a>k&&(a=k);e<a;e++)if(this.read(e)!=c.read(e))return!1;return!0};d.prototype.Rk=function(c,e,d,r,v,l,b){if(this.Fa)throw a.f.La();if(!v&&(1>l||0!=r%l))throw a.f.F();for(var k=0;k<b-c;k++)this.g[c+r+k]=this.g[c+k];this.g==e.g&&c<d&&(d+=r);if(v)for(k=0;k<r;k++)this.g[k+c]=e.g[d+k];else for(v=r,b=0;b<r;b+=l)for(v-=l,k=0;k<l;k++)this.g[c+
b+k]=e.g[d+v+k]};d.prototype.Qk=function(c,e,d,r){if(this.Fa)throw a.f.La();r-=c;for(var k=this.g.slice(c,c+r),l=0;l<r;l++)this.g[c+d+l]=k[l];for(r=0;r<d;r++)this.g[c+r]=e};d.prototype.eh=function(c,e,d){if(this.Fa)throw a.f.La();for(var k=this.g.slice(c,c+(d-c)),v=0;v<d-c;v++)this.g[v+c+2]=k[v];this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.hs=function(c,e,d,r,v){if(0>c||0>e||0>r)throw a.f.F();if(d.length<r+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),v)for(v=0;v<e;v++)this.g[c+v]=d[r+
v];else for(v||(c+=e-1),e=r+e;r<e;r++)this.g[c]=d[r],c--};d.prototype.Em=function(c,e,d,r,v,l){if(0>c||0>e||0>r)throw a.f.F();if(!v&&(0>=l||0!=e%l))throw a.f.F();if(d.size<r+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),d==this)this.Ij(c,e,r,v,l);else if(v)for(v=0;v<e;v++)this.g[c]=d.g[r],c++,r++;else if(r=r+e-l,1==l)for(v=0;v<e;v++)this.g[c]=d.g[r],c++,r--;else for(v=0,e=a.J.truncate(e/l);v<e;v++){for(var k=0;k<l;k++)this.g[c+k]=d.g[r+k];c+=l;r-=l}};d.prototype.Ek=function(c,e,d){if(this.Fa)throw a.f.La();
if(c+e>this.size)throw a.f.La();if(0<d-(c+e)){d-=c+e;for(var k=this.g.slice(c+e,c+d+e),v=0;v<d;v++)this.g[c+v]=k[v]}this.size-=e};d.prototype.Zd=function(c,e,d){if(this.Fa)throw a.f.La();if(1>d||0!=e%d)throw a.f.La();for(var k=e>>1,v=0;v<k;v+=d){e-=d;for(var l=0;l<d;l++){var b=this.g[c+v+l];this.g[c+v+l]=this.g[c+e+l];this.g[c+e+l]=b}}};d.prototype.Zh=function(c,e,d){if(0>e||0>d||0>e||d+e>this.size)throw a.f.F();for(var k=e;k<e+d;k++)this.g[k]=c};d.prototype.Ij=function(c,e,d,r,v){if(!r||c!=d){for(var k=
0;k<e;k++)this.g[c+k]=this.g[d+k];if(!r)for(d=c,c=c+e-v,r=0,e=a.J.truncate(e/2);r<e;r++){for(k=0;k<v;k++){var l=this.g[d+k];this.g[d+k]=this.g[c+k];this.g[c+k]=l}d+=v;c-=v}}};d.prototype.js=function(c,e,d,r,v){if(0>c||0>e||0>r)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=r;r<e;r++)this.g[c]=d[r].x,this.g[c+1]=d[r].y,c+=v};d.prototype.pl=function(c,e,d,r,v){if(0>c||0>e||0>r||this.size<e+c)throw a.f.F();if(v)for(v=0;v<e;v++)d[r+v]=this.g[c+v];else for(r=
r+e-1;c<e;c++)d[r]=this.g[c],r--};d.prototype.clear=function(c){c?this.resize(0):this.yf(0)};d.prototype.Mp=function(){this.Ce=this.Fa=!0};d.prototype.Gd=function(c,e,a){var d=this.g.slice(0,c),k=this.g.slice(e);c=this.g.slice(c,e).sort(a);this.g.length=0;this.g.push.apply(this.g,d.concat(c).concat(k))};d.prototype.si=function(){return 1};d.prototype.hC=function(c,e){if(this.Fa)throw a.f.X("invalid call. Attribute Stream is read only.");this.g[c]|=e};d.prototype.ez=function(c,e){if(this.Fa)throw a.f.X("invalid call. Attribute Stream is read only.");
this.g[c]&=~e};d.Bb=0;return d}();a.Gm=b;b=function(){function d(c){this.g=null;var e=c;2>e&&(e=2);this.g=new Int8Array(e);this.size=c}d.prototype.rotate=function(c,e,d){if(this.Fa)throw a.f.X("invalid_call");if(e<c||e>d||c>d)throw a.f.F();c!=e&&d!=e&&(this.Zd(c,e-c,1),this.Zd(e,d-e,1),this.Zd(c,d-c,1))};d.yd=function(c,e){var a=new d(c),r=a.g;2>c&&(c=2);if(0!==e)for(var v=0;v<c;v++)r[v]=e;return a};d.Ak=function(c){var e=new d(0);e.g=new Int8Array(c.g);e.size=c.size;return e};d.$=function(c,e){var a=
new d(0);a.size=c.size;a.size>e&&(a.size=e);e=a.size;2>e&&(e=2);a.g=new Int8Array(e);a.g.set(c.g.length<=e?c.g:c.g.subarray(0,e),0);return a};d.prototype.yb=function(c){0>=c||(null==this.g?this.g=new Int8Array(c):c<=this.g.length||(0<this.g.length?(c=new Int8Array(c),c.set(this.g),this.g=c):this.g=new Int8Array(c)))};d.prototype.read=function(c){return this.g[c]};d.prototype.fc=function(c,e){e.x=this.g[c];e.y=this.g[c+1]};d.prototype.get=function(c){return this.g[c]};d.prototype.write=function(c,
e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.set=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e};d.prototype.ho=function(c,e){if(this.Fa)throw a.f.La();this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.add=function(c){this.resize(this.size+1);this.g[this.size-1]=c};d.prototype.Sr=function(c){return d.$(this,c)};d.prototype.Of=function(c){return this.read(c)};d.prototype.resize=function(c,e){void 0===e&&(e=0);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");
if(c<=this.size){if(30<this.g.length&&5*c/4<this.g.length){var d=new Int8Array(this.g,0,c);this.g=d}}else{c>this.g.length&&(d=a.J.truncate(64>c?Math.max(2*c,4):5*c/4),d=new Int8Array(d),d.set(this.g),this.g=d);for(var d=this.g,r=this.size;r<c;r++)d[r]=e}this.size=c};d.prototype.yf=function(c){(null==this.g||c>this.g.length)&&this.resize(c);if(this.Ce)throw a.f.X("invalid call. Attribute Stream is locked and cannot be resized.");this.size=c};d.prototype.Dm=function(c,e){this.write(c,e)};d.prototype.zk=
function(c,e,d){for(var k=this.size;e<k&&e<d;e++)c=a.J.dh(this.read(e),c);return c};d.prototype.Eb=function(c,e,a){if(null==c||!(c instanceof d))return!1;var k=this.size,v=c.size;if(a>k||a>v&&k!=v)return!1;for(a>k&&(a=k);e<a;e++)if(this.read(e)!=c.read(e))return!1;return!0};d.prototype.Rk=function(c,e,d,r,v,b,f){if(this.Fa)throw a.f.La();if(!v&&(1>b||0!=r%b))throw a.f.F();l(this.g,c+r,c,c+(f-c));this.g==e.g&&c<d&&(d+=r);if(v)this.g.set(e.g.subarray(d,d+r),c);else for(v=r,f=0;f<r;f+=b){v-=b;for(var k=
0;k<b;k++)this.g[c+f+k]=e.g[d+v+k]}};d.prototype.Qk=function(c,e,d,r){if(this.Fa)throw a.f.La();r-=c;l(this.g,c+r,c,c+r);for(r=0;r<d;r++)this.g[c+r]=e};d.prototype.eh=function(c,e,d){if(this.Fa)throw a.f.La();l(this.g,c+2,c,c+(d-c));this.g[c]=e.x;this.g[c+1]=e.y};d.prototype.hs=function(c,e,d,r,v){if(0>c||0>e||0>r)throw a.f.F();if(d.length<r+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),v)this.g.set(d.subarray(r,e),c);else for(v||(c+=e-1),e=r+e;r<e;r++)this.g[c]=d[r],c--};d.prototype.Em=
function(c,e,d,r,v,l){if(0>c||0>e||0>r)throw a.f.F();if(!v&&(0>=l||0!=e%l))throw a.f.F();if(d.size<r+e)throw a.f.F();if(0!=e)if(this.size<e+c&&this.resize(e+c),d==this)this.Ij(c,e,r,v,l);else if(v)for(v=0;v<e;v++)this.g[c]=d.g[r],c++,r++;else if(r=r+e-l,1==l)for(v=0;v<e;v++)this.g[c]=d.g[r],c++,r--;else for(v=0,e=a.J.truncate(e/l);v<e;v++){for(var k=0;k<l;k++)this.g[c+k]=d.g[r+k];c+=l;r-=l}};d.prototype.Ek=function(c,e,d){if(this.Fa)throw a.f.La();if(c+e>this.size)throw a.f.La();0<d-(c+e)&&l(this.g,
c,c+e,c+(d-(c+e))+e);this.size-=e};d.prototype.Zd=function(c,e,d){if(this.Fa)throw a.f.La();if(1>d||0!=e%d)throw a.f.La();for(var k=e>>1,v=0;v<k;v+=d){e-=d;for(var l=0;l<d;l++){var b=this.g[c+v+l];this.g[c+v+l]=this.g[c+e+l];this.g[c+e+l]=b}}};d.prototype.Zh=function(c,e,d){if(0>e||0>d||0>e||d+e>this.size)throw a.f.F();for(var k=e;k<e+d;k++)this.g[k]=c};d.prototype.Ij=function(c,e,d,r,v){if(!r||c!=d)if(this.g.set(this.g.subarray(d,d+e),c),!r)for(d=c,c=c+e-v,r=0,e=a.J.truncate(e/2);r<e;r++){for(var k=
0;k<v;k++){var l=this.g[d+k];this.g[d+k]=this.g[c+k];this.g[c+k]=l}d+=v;c-=v}};d.prototype.js=function(c,e,d,r,v){if(0>c||0>e||0>r)throw a.f.F();if(0!=e)for(this.size<(e<<1)+c&&this.resize((e<<1)+c),v||(c+=e-1<<1),v=v?2:-2,e+=r;r<e;r++)this.g[c]=d[r].x,this.g[c+1]=d[r].y,c+=v};d.prototype.pl=function(c,e,d,r,v){if(0>c||0>e||0>r||this.size<e+c)throw a.f.F();if(v)for(v=0;v<e;v++)d[r+v]=this.g[c+v];else for(r=r+e-1;c<e;c++)d[r]=this.g[c],r--};d.prototype.clear=function(c){c?this.resize(0):this.yf(0)};
d.prototype.Mp=function(){this.Ce=this.Fa=!0};d.prototype.Gd=function(c,e,a){e=this.g.subarray(c,e);Array.prototype.sort.call(e,a);this.g.set(e,c)};d.prototype.hC=function(c,e){if(this.Fa)throw a.f.X("invalid call. Attribute Stream is read only.");this.g[c]|=e};d.prototype.ez=function(c,e){if(this.Fa)throw a.f.X("invalid call. Attribute Stream is read only.");this.g[c]&=~e};d.prototype.si=function(){return 1};return d}();a.jy=b})(y||(y={}));!0===y.Xh.Bm&&(y.Gm=y.jy);(function(a){var l=function(){function l(){}
l.vq=function(d,c){return a.Gm.yd(d,c)};l.Vm=function(d,c){return a.Sd.yd(d,c)};l.oz=function(d,c,e){switch(d){case 1:d=a.Sd.yd(c,e);break;case 2:d=a.ia.yd(c,e);break;case 4:d=a.Gm.yd(c,e);break;default:throw a.f.ya();}return d};l.pz=function(d,c){return l.oz(a.na.si(d),c*a.na.Xa(d),a.na.pe(d))};l.wh=function(d,c){return a.ia.yd(d,c)};l.HB=function(a){var c,e=[];for(c=0;c<a;c++)e.push(null);return e};return l}();a.Uc=l})(y||(y={}));(function(a){var l=function(){function l(){}l.vq=function(d,c){return a.jy.yd(d,
c)};l.Vm=function(d,c){return a.Sd.yd(d,c)};l.oz=function(d,c,e){switch(d){case 1:d=a.Sd.yd(c,e);break;case 2:d=a.iy.yd(c,e);break;case 4:d=a.jy.yd(c,e);break;default:throw a.f.ya();}return d};l.pz=function(d,c){return a.Uc.oz(a.na.si(d),c*a.na.Xa(d),a.na.pe(d))};l.wh=function(d,c){return a.iy.yd(d,c)};l.HB=function(a){var c,e=[];for(c=0;c<a;c++)e.push(null);return e};return l}();a.KL=l})(y||(y={}));!0===y.Xh.Bm&&(y.Uc=y.KL);(function(a){a.ea=function(){return function(a){void 0===a&&(a=0);this.j=
a}}()})(y||(y={}));(function(a){var l=function(){function l(){}l.bind=function(d){a.Vc=d.PeDefs;a.Tf=d.PeFactory;a.PD=d.PeVertcs;a.MD=d.PeCoordsys;a.fi=d.PeCSTransformations;a.OD=d.PeGTTransformations;a.xN=d.PeGeogtran;a.wN=d.PeFactoryCodechange;a.ND=d.PeGCSExtent;a.Bg=d.PePCSInfo;a.yN=d.PeHorizon;a.MD=d.PeCoordsys;a.fq=d.PeGTlistExtended;a.fq.PE_GTLIST_OPTS_USE_DEFAULT=128;a.Tf.initialize(null);a.vy=d.PeGTlistExtendedEntry;l.PY=a.Tf.fromString(a.Vc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')};l.v_=function(){};
l.PY=null;return l}();a.zN=l;a.Tf=null;a.PD=null;a.MD=null;a.yN=null;a.Bg=null;a.fq=null;a.vy=null;a.ND=null;a.wN=null;a.xN=null;a.Vc=null;a.OD=null;a.fi=null})(y||(y={}));(function(a){var l=function(){function a(){}a.Ab=function(c,e){return 0<=e?a.K(c):-a.K(c)};a.K=function(c){return 0>c?-c:c};a.Qi=function(c){return 3.552713678800501E-15>c};a.LD=function(c,e,d){return a.K(c-e)<=d*(1+(a.K(c)+a.K(e))/2)};a.W=function(c,e){return a.LD(c,e,3.552713678800501E-15)};a.iW=function(c){return 3.552713678800501E-15>=
a.K(c)};a.wd=function(c){return a.iW(c)};return a}();a.l=l;var b=function(){function d(){}d.Sp=function(c,e){c=l.K(c);e=l.K(e);var a=0;0!=c+e&&(c>e?(a=e/c,a=c*Math.sqrt(1+a*a)):(a=c/e,a=e*Math.sqrt(1+a*a)));return a};d.Nr=function(c,e,a,r,v){for(var k=[0,0,0],b=[0,0,0],f=0;2>=f;f++)e[f]-=c[f],a[f]-=e[f];a=k[1]*b[2]-k[2]*b[1];e=k[2]*b[0]-k[0]*b[2];k=k[0]*b[1]-k[1]*b[0];c=-1*(a*c[0]+e*c[1]+k*c[2]);r[0]=a;r[1]=e;r[2]=k;r[3]=c;b=d.fo(r);r[0]/=b;r[1]/=b;r[2]/=b;r[3]/=b;0!=v&&(b=l.wd(k)?l.wd(c)?l.Ab(1,
e):-l.Ab(1,c):l.Ab(1,k),b*=l.Ab(1,v),r[0]*=b,r[1]*=b,r[2]*=b,r[3]*=b)};d.ey=function(c,e,a){a[0]=c[1]*e[2]-e[1]*c[2];a[1]=c[2]*e[0]-e[2]*c[0];a[2]=c[0]*e[1]-e[0]*c[1]};d.Du=function(c,e){return c[0]*e[0]+c[1]*e[1]+c[2]*e[2]};d.fo=function(c){return d.Sp(d.Sp(c[0],c[1]),c[2])};d.Ck=function(c,e,a,r,l,b,f,g){c=d.n(c,e,a);var k=Math.cos(a);b.j=(c+l)*k*Math.cos(r);f.j=(c+l)*k*Math.sin(r);g.j=(c*(1-e)+l)*Math.sin(a)};d.iQ=function(c,e,a,r,v,b,f){var k=d.Sp(e,a),G=1*Math.sqrt(1-c),J=G/1;if(l.W(k,0))b.j=
0,v.j=l.Ab(1.570796326794897,r),f.j=l.K(r)-G;else{b.j=Math.atan2(a,e);a=Math.atan2(1*r,G*k);b=Math.cos(a);var g=Math.sin(a);e=G*c/(1-c);c*=1;a=Math.atan2(r+e*g*g*g,k-c*b*b*b);3.141592653589793<l.K(a)&&(a=l.Ab(3.141592653589793,a)-a);a=Math.atan(J*Math.tan(a));g=Math.sin(a);b=Math.cos(a);v.j=Math.atan2(r+e*g*g*g,k-c*b*b*b);1.570796326794897<l.K(v.j)&&(v.j=l.Ab(3.141592653589793,v.j)-v.j);a=Math.atan(J*Math.tan(v.j));g=Math.sin(a);b=Math.cos(a);f.j=(r-G*g)*Math.sin(v.j)+(k-1*b)*Math.cos(v.j)}};d.n=
function(c,e,a){a=Math.sin(a);return c/Math.sqrt(1-e*a*a)};d.cu=function(c,e){return Math.atan2(Math.sin(e)*(1-c),Math.cos(e))};d.hk=function(c,e){return Math.atan2(Math.sin(e),Math.cos(e)*(1-c))};d.xp=function(c,e){if(l.Qi(c)||0==e||l.W(l.K(e),1.570796326794897))return e;var a,r,v,b,f,g,h,z,m;if(.006884661117170036>c){b=Math.sqrt(1-c);f=(1-b)/(1+b);g=f*f;h=f*g;z=f*h;a=f*z;m=f*a;r=f*m;v=1.572916666666667*h-3.2578125*a+4.295068359375*r;b=2.142578125*z-6.071484375*m;c=3.129296875*a-11.249837239583334*
r;var n=4.775276692708333*m,p=7.958636765252976*r,u=Math.cos(2*e);return e+Math.sin(2*e)*(1.5*f-.84375*h+.525390625*a-.2688395182291667*r-v+c-p+u*(2*(1.3125*g-1.71875*z+1.650146484375*m)-4*b+6*n+u*(4*v-12*c+24*p+u*(8*b-32*n+u*(16*c-80*p+u*(32*n+64*u*p))))))}b=1-c;f=c/2;g=l.K(e);h=g*d.Su(c)/(1.570796326794897*b);z=9999;m=g;for(g=0;1E-16<z&&50>g;g++)r=d.Cm(c,m),a=(d.DG(m,c)-f*Math.sin(2*m)/r)/b-h,r=1/(r*r*r),v=a/r,a=m-v,z=l.K(v),m=a;return 0<=e?m:-m};d.oX=function(c,e){return l.Qi(e)?c:c*d.Su(e)/1.570796326794897};
d.da=function(c){c=d.pG(c,6.283185307179586);return 0>c?c+6.283185307179586:3.141592653589793>l.K(c)||l.W(l.K(c),3.141592653589793)?c:c-6.283185307179586};d.pG=function(c,e){return c-Math.floor(c/e)*e};d.Yg=function(c,e){if(.006884661117170036>e){e=Math.sqrt(1-e);e=(1-e)/(1+e);var a=e*e,r=a*a;return c/(1+e)*(1+.25*a+.015625*r+.00390625*a*r)*1.570796326794897}return c*d.Su(e)};d.Mr=function(c,e){var a=l.Ab(1,Math.sin(e));e=l.K(d.pG(e,3.141592653589793));e=1.570796326794897>=e?e:3.141592653589793-e;
var r;l.W(e,1.570796326794897)?r=e:r=Math.atan(Math.sqrt(1-c)*Math.tan(e));return r*a};d.q=function(c,e,a){if(.006884661117170036>e){e=Math.sqrt(1-e);e=(1-e)/(1+e);var k=e*e,l=e*k,b=e*l,f=e*b,g=e*f,h=e*g,z=-.7291666666666666*l+.2278645833333333*f+.03987630208333334*h,m=.615234375*b-.21533203125*g,n=-.54140625*f+.20302734375*h,p=.48876953125*g,u=-.4488699776785715*h,t=Math.cos(2*a);return c/(1+e)*((1+.25*k+.015625*b+.00390625*g)*a+Math.sin(2*a)*(-1.5*e+.1875*l+.0234375*f+.00732421875*h-z+n-u+t*(2*
(.9375*k-.234375*b-.03662109375*g)-4*m+6*p+t*(4*z-12*n+24*u+t*(8*m-32*p+t*(16*n-80*u+t*(32*p+64*t*u)))))))}return c*(d.DG(a,e)-.5*e*Math.sin(2*a)/d.Cm(e,a))};d.Cm=function(c,e){e=Math.sin(e);return Math.sqrt(1-c*e*e)};d.Su=function(c){return l.LD(c,1,2.220446049250313E-16)?1:1>c?d.Kv(0,1-c)-c/3*d.Hv(0,1-c):NaN};d.DG=function(c,e){var k=l.Ab(1,c);c=l.K(c);var r=Math.floor(c/1.570796326794897),v;if(1<e)v=0==c?0:NaN;else if(l.wd(r))v=d.sin(c),v=v*d.Kv(1-v*v,1-e*v*v)-e/3*v*v*v*d.Hv(1-v*v,1-e*v*v);else{v=
a.J.truncate(r%2);var b=d.Su(e);0<v?(v=Math.sin(1.570796326794897*(r+1)-c),v=v*d.Kv(1-v*v,1-e*v*v)-e/3*v*v*v*d.Hv(1-v*v,1-e*v*v),v=b*(r+1)-v):(v=Math.sin(c-1.570796326794897*r),v=v*d.Kv(1-v*v,1-e*v*v)-e/3*v*v*v*d.Hv(1-v*v,1-e*v*v),v=b*r+v)}return v*k};d.sin=function(c){c=d.da(c);var e=l.Ab(1,c);c=l.K(c);return l.W(c,3.141592653589793)?0:l.W(c,1.570796326794897)?1*e:Math.sin(c)*e};d.Hv=function(c,e){for(var a=1,d=0,v=1,b,f,g,h;;){b=.2*(c+e+3*a);f=(b-c)/b;g=(b-e)/b;h=(b-a)/b;if(1E-4>l.K(f)&&1E-4>l.K(g)&&
1E-4>l.K(h))break;h=Math.sqrt(e);b=Math.sqrt(a);h=Math.sqrt(c)*(h+b)+h*b;d+=v/(b*(a+h));v*=.25;c=.25*(c+h);e=.25*(e+h);a=.25*(a+h)}c=f*g;a=h*h;e=c-a;a=c-6*a;f=a+e+e;return 3*d+v*(1+a*(-.2142857142857143+.10227272727272728*a-.1730769230769231*h*f)+h*(.1666666666666667*f+h*(-.4090909090909091*e+.1153846153846154*h*c)))/(b*Math.sqrt(b))};d.Kv=function(c,e){for(var a,d,v,b,f=1;;f=.25*(f+a)){a=(c+e+f)/3;d=2-(a+c)/a;v=2-(a+e)/a;b=2-(a+f)/a;if(1E-4>l.K(d)&&1E-4>l.K(v)&&1E-4>l.K(b))break;a=Math.sqrt(e);d=
Math.sqrt(f);a=Math.sqrt(c)*(a+d)+a*d;c=.25*(c+a);e=.25*(e+a)}c=d*v-b*b;e=d*v*b;return(1+(.04166666666666666*c-.1-.06818181818181818*e)*c+.07142857142857142*e)/Math.sqrt(a)};d.Bx=function(c,e){if(l.Qi(c)||0==e||l.W(l.K(e),1.570796326794897))return e;var a,d,v;if(.006884661117170036>c){a=c*c;d=c*a;v=c*d;var b=c*v,f=c*b,g=c*f,h=-(.02708333333333333*d+.03430059523809524*v+.03149181547619048*b+.02634359154541446*f+.02156896735835538*g),z=.007669890873015873*v+.01299603174603175*b+.0148051353064374*f+
.01454454953803912*g,m=-(.002275545634920635*b+.004830845032667949*f+.006558395368616723*g),n=6.957236677288761E-4*f+.001775193002406544*g,p=-(2.17324089394402E-4*g),u=Math.cos(2*e);return e+Math.sin(2*e)*(-(.5*c+.2083333333333333*a+.09375*d+.04878472222222222*v+.02916666666666667*b+.01938905423280423*f+.01388255931712963*g)-h+m-p+u*(2*(.1041666666666667*a+.0875*d+.06050347222222222*v+.04151785714285714*b+.02958958540013228*f+.02203667534722222*g)-4*z+6*n+u*(4*h-12*m+24*p+u*(8*z-32*n+u*(16*m-80*p+
u*(32*n+64*u*p))))))}0==e||l.W(l.K(e),1.570796326794897)?a=e:(d=Math.sqrt(c),v=d*Math.sin(e),a=Math.tan(.7853981633974483+e/2)*Math.pow((1-v)/(1+v),d/2),a=2*Math.atan(a)-1.570796326794897);return a};d.AQ=function(c,e){if(l.Qi(c)||0==e||l.W(l.K(e),1.570796326794897))return e;var a,d;if(.006884661117170036>c){u=c*c;m=c*u;n=c*m;a=c*n;p=c*a;d=c*p;var v=.05833333333333333*m+.07232142857142858*n+.05634300595238095*a+.0355325796406526*p+.020235546186067*d,b=.02653149801587302*n+.04379960317460317*a+.0429211791776896*
p+.03255384637546096*d,f=.01294022817460318*a+.02668104344536636*p+.03155651254609588*d,g=.00659454790965208*p+.0163075268674227*d,h=.003463473736911237*d,z=Math.cos(2*e);return e+Math.sin(2*e)*(.5*c+.2083333333333333*u+.08333333333333333*m+.03611111111111111*n+.01875*a+.01195601851851852*p+.008863673941798942*d-v+f-h+z*(2*(.1458333333333333*u+.1208333333333333*m+.07039930555555556*n+.03616071428571429*a+.01839451058201058*p+.01017113095238095*d)-4*b+6*g+z*(4*v-12*f+24*h+z*(8*b-32*g+z*(16*f-80*h+
z*(32*g+64*z*h))))))}for(var m=Math.sqrt(c),n=m/2,p=Math.tan(.7853981633974483+e/2),v=0,b=1,u=e;0!=b;u=d)if(a=m*Math.sin(u),d=p*Math.pow((1+a)/(1-a),n),d=2*Math.atan(d)-1.570796326794897,v++,l.W(d,u)||3E4<v)b=0;return u};return d}();a.C=b})(y||(y={}));(function(a){var l=function(){function l(d){this.Zl=this.Ot=null;this.uw=!1;this.lB=this.mB=0;this.jB=new a.b;this.wB=new a.b;this.hx=!1;this.jr=new a.h;this.HI=this.ex=0;this.fx=null;this.al=!1;this.Er=null;this.JA=0;this.uf=d;this.vt=a.Ib.hw(this.uf,
0,!0);this.jB.$c();this.wB.$c();this.dJ=NaN;var c=d.getCode();0<c?(this.ll=c,a.Tf.getCode(d)):this.ll=a.Tf.getCode(d);0>this.ll&&(this.ll=0);var e=this.uf.getType();this.uI=e==a.Vc.PE_TYPE_PROJCS?2:1;if(e==a.Vc.PE_TYPE_PROJCS&&!d.loadConstants())throw a.f.F("PeProjcs.loadConstants failed");c=e==a.Vc.PE_TYPE_GEOGCS?this.uf:this.uf.getGeogcs();e!=a.Vc.PE_TYPE_GEOGCS&&a.Tf.getCode(c);this.Er=d.getUnit();this.dJ=c.getPrimem().getLongitude();this.HI=d=c.getUnit().getUnitFactor();d=Math.PI/(180*d);1E-10>
Math.abs(d-1)&&(d=1);this.lB=d;0!=(e&a.Vc.PE_TYPE_PROJCS)?(c=this.uf,this.mB=1/c.getUnit().getUnitFactor(),this.ex=.001/this.uf.getUnit().getUnitFactor(),this.fx=a.Bg.generate(c,a.Bg.PE_PCSINFO_OPTION_NONE),this.al=this.fx.isPannableRectangle(),this.JA=a.Ib.pP(this.fx.getCentralMeridian(),this.lB)):(this.hx=this.al=!0,this.mB=0,e=1/c.getUnit().getUnitFactor(),this.ex=.001/c.getDatum().getSpheroid().getAxis()*e,this.JA=0);this.al&&(this.cy(),this.tL(),this.uL(),this.sL(),this.hZ(),this.iZ())}l.prototype.Zs=
function(){return this.ll};l.prototype.Sj=function(){return this.fx};l.yz=function(a,c){return a==c?!0:null!=a&&null!=c&&0==a.ll&&0==c.ll?a.vt===c.vt:!1};l.prototype.Jc=function(){return this.al};l.prototype.Bh=function(a){a.I(this.gp)};l.prototype.aw=function(){return this.gp.o};l.prototype.$v=function(){return this.gp.v};l.prototype.yT=function(a){a.I(this.gx)};l.prototype.hZ=function(){var d=this.uf.getType();if(d==a.Vc.PE_TYPE_PROJCS){var d=this.uf,c=this.Sj().getCentralMeridian(),e=d.getGeogcs();
if(null==e)throw a.f.X("internal error");e=1/e.getUnit().getUnitFactor()*Math.PI;c=[[c+e,0]];a.fi.geogToProj(d,1,c);var c=c[0][0],e=d.getParameters()[a.Vc.PE_PARM_X0].getValue(),k=this.Lk(),d=new a.h;k.s(d);var k=Math.abs(c-e),c=k+e,e=-1*k+e,k=d.B,d=d.A,r=new a.h;r.I(e,d,c,k);null==this.gp&&(this.gp=r)}else if(d==a.Vc.PE_TYPE_GEOGCS)e=1/this.uf.getUnit().getUnitFactor()*Math.PI,d=new a.h,d.I(-e,-e/2,e,e/2),null==this.gp&&(this.gp=d);else throw a.f.X("internal error");};l.prototype.iZ=function(){var d=
this.uf.getType();if(d==a.Vc.PE_TYPE_PROJCS){var c=this.uf,d=this.Sj().getCentralMeridian(),c=c.getGeogcs();if(null==c)throw a.f.X("internal error");var c=1/c.getUnit().getUnitFactor()*Math.PI,e=this.Us(),k=new a.h;e.s(k);e=new a.h;e.I(d-c,k.A,d+c,k.B);null==this.gx&&(this.gx=e)}else if(d==a.Vc.PE_TYPE_GEOGCS)c=1/this.uf.getUnit().getUnitFactor()*Math.PI,d=new a.h,d.I(-c,-c/2,c,c/2),null==this.gx&&(this.gx=d);else throw a.f.X("internal error");};l.prototype.de=function(){return this.lB};l.prototype.cn=
function(){return this.mB};l.prototype.Us=function(){if(this.al)return this.Zl;var a=this.Zl;if(null!=a)return a;this.cy();return this.Zl};l.prototype.Vs=function(){if(this.al)return null;if(null!=this.Zl)return this.gI;this.cy();return this.gI};l.prototype.cy=function(){if(this.uf.getType()==a.Vc.PE_TYPE_PROJCS){var d;d=this.uf;var c=d.getGeogcs(),e=d.horizonGcsGenerate();if(null!=e){var k=e[0].getNump(),r=e[0].getKind();d=0<e[0].getInclusive();var v=this.de(),l=90*v,b=360*v,f=370*v,g=180*v*a.Vc.PE_HORIZON_DELTA/
Math.PI,h=new a.h,z=null;if(1<k)for(var m=1;m<k;m++)if(e[m].getKind()==a.Vc.PE_HORIZON_LINE){null==z&&(z=new a.Ua);var n=e[m].getCoord();z.Zx(n[0][0],n[0][1]);z.Wj(n[1][0],n[1][1])}if(r==a.Vc.PE_HORIZON_RECT)e=e[0].getCoord(),h.I(e[0][0],e[0][1]),h.Nb(e[1][0],e[1][1]),Math.abs(h.B-l)<1E-7*g&&(h.B=l),Math.abs(h.A+l)<1E-7*g&&(h.A=-l),h.N()>f&&(e=-400*v,h.I(e,h.A,e+5*b,h.B)),e=new a.ci(h),null==this.Zl&&(this.Zl=e,this.uw=d);else{f=new a.Ia;b=this.Sj().isGcsHorizonMultiOverlap();h=a.Nu.hG(c,a.ss.Integer64);
if(b){f=new a.PM;g=a.ei.local().V(f,h,null);for(m=0;m<k;m++)if(e[m].getKind()==a.Vc.PE_HORIZON_POLY){c=e[m].getSize();v=e[m].getCoord();r=[];for(l=0;l<c;l++)r[l]=a.b.pa(v[l][0],v[l][1]);e[m].getInclusive();b&&(v=new a.Ia,v.Bl(r,c-1),f.RY(v),g.Re())}f=g.next()}else for(m=0;m<k;m++)if(e[m].getKind()==a.Vc.PE_HORIZON_POLY){c=e[m].getSize();v=e[m].getCoord();b=[];for(l=0;l<c;l++)b[l]=a.b.pa(v[l][0],v[l][1]);e[m].getInclusive();f.Bl(b,c-1)}d?a.sk.local().qo(f,h,1):a.cq.local().qo(f,h,1);a.Gj.local().qo(f,
h,1);null==this.Zl&&(this.Zl=f,this.uw=d,this.gI=z)}}}};l.prototype.Tv=function(){if(this.al)return this.uw;null==this.Zl&&this.cy();return this.uw};l.prototype.tL=function(){if(2==this.uI){var d=this.uf.horizonPcsGenerate();if(null!=d){var c=d[0].getKind();d[0].getInclusive();var e=d[0].getNump(),k=!1;if(c==a.Vc.PE_HORIZON_RECT)d=d[0].getCoord(),e=new a.h,e.I(d[0][0],d[0][1]),e.Nb(d[1][0],d[1][1]),d=new a.ci(e);else{c=-1;for(k=0;k<e;k++)d[k].getKind()==a.Vc.PE_HORIZON_POLY&&(c=k);k=d[c].getSize()-
1;d=d[c].getCoord();e=[];for(c=0;c<k;c++)e[c]=a.b.pa(d[c][0],d[c][1]);d=c=new a.Ia;c.Bl(e,k);k=!0}this.Sj().isDensificationNeeded()&&(e=1E5*this.cn(),d=a.Km.local().V(d,e,null));k&&(k=new a.ci,d.Rn(k),d.hf(),d.Rb(),d.fT(),a.sk.local().qo(d,null,1));null==this.Ot&&(this.Ot=d)}}};l.prototype.Lk=function(){if(this.al)return this.Ot;var a=this.Ot;if(null!=a)return a;this.tL();return this.Ot};l.prototype.uL=function(){if(this.uf.getType()==a.Vc.PE_TYPE_PROJCS){var d=90*this.de(),d=[[0,d],[0,-d]];a.fi.geogToProj(this.uf,
2,d);var c=this.Sj(),e=c.getNorthPoleLocation()!=a.Bg.PE_POLE_OUTSIDE_BOUNDARY,c=c.getSouthPoleLocation()!=a.Bg.PE_POLE_OUTSIDE_BOUNDARY;this.hx||(e&&this.jB.ka(d[0][0],d[0][1]),c&&this.wB.ka(d[1][0],d[1][1]))}this.hx=!0};l.prototype.cA=function(a,c){this.al||this.hx||this.uL();a?c.L(this.wB):c.L(this.jB)};l.prototype.sL=function(){if(1==this.uI){var d=400*this.de();this.jr.I(-d,-d,d,d)}else d=a.Bg.generate(this.uf,a.Bg.PE_PCSINFO_OPTION_DOMAIN),d=a.h.pa(d.getDomainMinx(),d.getDomainMiny(),d.getDomainMaxx(),
d.getDomainMaxy()),this.jr.u()&&this.jr.I(d)};l.prototype.YS=function(a){this.al&&a.I(this.jr);this.jr.u()&&this.sL();a.I(this.jr)};l.prototype.en=function(){return this.dJ};l.prototype.pi=function(){return this.JA};l.prototype.Od=function(){return this.Er};l.prototype.Ws=function(){return this.HI};return l}();a.SD=l})(y||(y={}));(function(a){var l=function(){function l(d){this.HV=d;this.vt=a.Ib.hw(d,0,!0);var c=d.getCode();this.mt=0<c?c:a.Tf.getCode(d);0>this.mt&&(this.mt=0);this.Er=c=this.HV.getUnit();
this.WI=1/c.getUnitFactor();a.Tf.getCode(d)}l.yz=function(a,c){return a==c?!0:null!=a&&null!=c&&0==a.mt&&0==c.mt?a.vt===c.vt:!1};l.prototype.Zs=function(){return this.mt};return l}();a.EN=l})(y||(y={}));(function(a){var l=function(){function l(){}l.Cb=function(d,c,e,k,r,v,l,b){if(null!=v||null!=l||null!=b){k=a.C.da(k);c=a.C.da(c);e=a.C.da(e);r=a.C.da(r);1.570796326794897<a.l.K(e)&&(e=a.l.Ab(3.141592653589793,e)-e,c=a.C.da(c+3.141592653589793));1.570796326794897<a.l.K(r)&&(r=a.l.Ab(3.141592653589793,
r)-r,k=a.C.da(k+3.141592653589793));var G=a.C.da(k-c);if(a.l.W(e,r)&&(a.l.W(c,k)||a.l.W(a.l.K(e),1.570796326794897)))null!=v&&(v.j=0),null!=l&&(l.j=0),null!=b&&(b.j=0);else{if(a.l.W(e,-r)){if(a.l.W(a.l.K(e),1.570796326794897)){null!=v&&(v.j=3.141592653589793*d);null!=l&&(l.j=0<e?a.C.da(3.141592653589793-a.C.da(k)):a.C.da(k));null!=b&&(b.j=0<e?a.C.da(k):a.C.da(3.141592653589793-a.C.da(k)));return}if(a.l.W(a.l.K(G),3.141592653589793)){null!=v&&(v.j=3.141592653589793*d);null!=l&&(l.j=0);null!=b&&(b.j=
0);return}}var f=1.570796326794897==a.l.K(e)?0:Math.cos(e),J=Math.sin(e),g=1.570796326794897==a.l.K(r)?0:Math.cos(r),h=Math.sin(r),z=1.570796326794897==a.l.K(G)?0:Math.cos(G),m=3.141592653589793==a.l.K(G)?0:Math.sin(G);if(null!=v){var n=Math.sin((r-e)/2),G=Math.sin(G/2);v.j=2*Math.asin(Math.sqrt(n*n+f*g*G*G))*d}null!=l&&(a.l.W(a.l.K(e),1.570796326794897)?l.j=0>e?k:a.C.da(3.141592653589793-k):l.j=Math.atan2(g*m,f*h-J*g*z));null!=b&&(a.l.W(a.l.K(r),1.570796326794897)?b.j=0>r?c:a.C.da(3.141592653589793-
c):(b.j=Math.atan2(f*m,h*f*z-g*J),b.j=a.C.da(b.j+3.141592653589793)))}}};l.Uf=function(d,c,e,k,r,v,l){if(null!=v||null!=l){c=a.C.da(c);e=a.C.da(e);1.570796326794897<a.l.K(e)&&(e=a.l.Ab(3.141592653589793,e)-e,c=a.C.da(c+3.141592653589793));a.l.W(a.l.K(e),1.570796326794897)&&(c=0);r=a.C.da(r);var b=a.l.W(a.l.K(r),1.570796326794897)?0:Math.cos(r),G=a.l.W(a.l.K(r),3.141592653589793)?0:Math.sin(r),f=a.l.W(a.l.K(e),1.570796326794897)?0:Math.cos(e),g=Math.sin(e);d=k/d;k=a.l.W(a.l.K(d),1.570796326794897)?
0:Math.cos(d);var h=a.l.W(a.l.K(d),3.141592653589793)?0:Math.sin(d),z=Math.asin(g*k+f*h*b);null!=l&&(l.j=z);null!=v&&(v.j=a.l.W(a.l.K(z),1.570796326794897)?a.l.W(e,-z)?0>z?r:a.C.da(3.141592653589793-r):c:a.l.W(a.l.K(e),1.570796326794897)&&a.l.W(d,3.141592653589793)?0>e?r:a.C.da(3.141592653589793-r):a.C.da(c+Math.atan2(h*G,f*k-g*h*b)))}};return l}();a.vh=l})(y||(y={}));(function(a){var l=function(){function l(){}l.Cb=function(d,c,e,k,r,v,l,b,f){var G=new a.ea(0),J=new a.ea(0),g=[0,0,0],h=[0,0,0],L=
[0,0,0],z=new a.ea(0),m=new a.ea(0),n=new a.ea(0),p=new a.ea(0),u=new a.ea(0);if(null!=l||null!=b||null!=f)if(a.l.Qi(c))a.vh.Cb(d,e,k,r,v,l,b,f);else{r=a.C.da(r);e=a.C.da(e);var t=a.C.da(r-e);if(a.l.W(k,v)&&(a.l.W(e,r)||a.l.W(a.l.K(k),1.570796326794897)))null!=l&&(l.j=0),null!=b&&(b.j=0),null!=f&&(f.j=0);else{if(a.l.W(k,-v)){if(a.l.W(a.l.K(k),1.570796326794897)){null!=l&&(l.j=2*a.C.Yg(d,c));null!=b&&(b.j=0<k?a.C.da(3.141592653589793-a.C.da(r)):a.C.da(r));null!=f&&(f.j=0<k?a.C.da(r):a.C.da(3.141592653589793-
a.C.da(r)));return}a.l.W(a.l.K(t),3.141592653589793)&&(null!=l&&(l.j=2*a.C.Yg(d,c)),null!=b&&(b.j=0),null!=f&&(f.j=0))}else if(a.l.W(a.l.K(k),1.570796326794897)||a.l.W(a.l.K(v),1.570796326794897))a.l.W(a.l.K(k),1.570796326794897)?e=r:r=e;var q=0,y;0>t&&(q=1,y=e,e=r,r=y,y=k,k=v,v=y);var t=a.C.cu(c,k),x=a.C.cu(c,v);if(null!=b||null!=f)a.vh.Cb(d,e,t,r,x,null,G,J),G=Math.atan2(Math.sin(G.j)*Math.cos(k-t),Math.cos(G.j)),J=Math.atan2(Math.sin(J.j)*Math.cos(v-x),Math.cos(J.j)),0!=q&&(y=G,G=J,J=y),null!=
b&&(b.j=G),null!=f&&(f.j=J);null!=l&&(a.C.Ck(1,c,k,e,0,n,p,u),g[0]=n.j,g[1]=p.j,g[2]=u.j,a.C.Ck(1,c,v,r,0,n,p,u),h[0]=n.j,h[1]=p.j,h[2]=u.j,L[0]=g[1]*h[2]-h[1]*g[2],L[1]=-(g[0]*h[2]-h[0]*g[2]),L[2]=g[0]*h[1]-h[0]*g[1],c=1-a.C.Cm(c,a.C.Mr(c,a.C.hk(c,Math.acos(L[2]/Math.sqrt(L[0]*L[0]+L[1]*L[1]+L[2]*L[2]))))),c*=2-c,b=Math.atan2(-L[1],-L[0]),L=a.C.da(b-1.570796326794897),b=a.C.da(b+1.570796326794897),L=a.l.K(a.C.da(e-L))<=a.l.K(a.C.da(e-b))?L:b,a.vh.Cb(1,L,0,e,t,z,null,null),a.vh.Cb(1,L,0,r,x,m,null,
null),3.141592653589793<z.j+m.j&&(L=a.C.da(L+3.141592653589793),a.vh.Cb(1,L,0,e,t,z,null,null),a.vh.Cb(1,L,0,r,x,m,null,null)),z.j*=a.l.Ab(1,k),m.j*=a.l.Ab(1,v),z.j=a.C.hk(c,z.j),m.j=a.C.hk(c,m.j),e=a.C.q(d,c,z.j),d=a.C.q(d,c,m.j),l.j=a.l.K(d-e))}}};l.Uf=function(d,c,e,k,r,v,l,b){var G=0,f=new a.ea(0),J=new a.ea(0),g=[0,0,0],h=[0,0,0],z=new a.ea(0),m=new a.ea(0),n=new a.ea(0);if(null!=l||null!=b)if(a.l.Qi(c))a.vh.Uf(d,e,k,r,v,l,b);else if(a.l.wd(r))null!=l&&(l.j=e),null!=b&&(b.j=k);else{v=a.C.da(v);
0>r&&(r=a.l.K(r),v=a.C.da(v+3.141592653589793));e=a.C.da(e);k=a.C.da(k);1.570796326794897<a.l.K(k)&&(e=a.C.da(e+3.141592653589793),k=a.l.Ab(3.141592653589793,k)-k);a.l.W(a.l.K(k),1.570796326794897)&&(e=0);var p;if(a.l.wd(k))p=a.l.K(1.570796326794897-a.l.K(v)),p=a.C.hk(c,p),p=1-a.C.Cm(c,a.C.Mr(c,p)),p*=2-p,d=r/a.C.Yg(d,p)*1.570796326794897,d=a.C.xp(p,d),d=a.C.cu(p,d),a.vh.Uf(1,e,k,d,v,l,f),null!=b&&(G=f.j),null!=b&&(b.j=a.C.hk(c,G));else if(a.l.W(a.l.K(k),1.570796326794897))G=a.C.Yg(d,c),f=2*G,d=a.l.Ab(1.570796326794897,
k),v=0<d?a.C.da(3.141592653589793-v):v,k=G-r,a.l.K(k)<=G?null!=l&&(l.j=v):(k=Math.floor(r/f),0==a.J.truncate(k%2)?(null!=l&&(l.j=v),k=G-(r-k*f)):(null!=l&&(l.j=a.C.da(v+3.141592653589793)),k=G-((k+1)*f-r))),null!=b&&(b.j=a.C.xp(c,k/G*d));else{p=a.C.cu(c,k);v=Math.atan2(Math.sin(v),Math.cos(v)*Math.cos(k-p));var u=a.J.truncate(a.l.Ab(1,p))*(1.570796326794897>=a.l.K(v)?1:-1);v=a.C.da(e+Math.atan(Math.tan(v)*-Math.sin(p)));a.vh.Cb(d,v,0,e,p,null,J,null);p=a.l.K(1.570796326794897-a.l.K(J.j));p=a.C.hk(c,
p);p=1-a.C.Cm(c,a.C.Mr(c,p));p*=2-p;a.C.Ck(1,c,0,v,0,z,m,n);g[0]=z.j;g[1]=m.j;g[2]=n.j;a.C.Ck(1,c,k,e,0,z,m,n);h[0]=z.j;h[1]=m.j;h[2]=n.j;k=Math.acos((g[0]*h[0]+g[1]*h[1]+g[2]*h[2])/Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]));k=a.C.hk(p,k);k=a.C.q(d,p,k)+r*u;r=0<k?J.j:a.C.da(J.j+3.141592653589793);d=a.l.K(k)/a.C.Yg(d,p)*1.570796326794897;d=a.C.xp(p,d);d=a.C.cu(p,d);a.vh.Uf(1,v,0,d,r,l,f);null!=b&&(G=f.j);null!=b&&(b.j=a.C.hk(c,G))}}};return l}();a.yl=l})(y||(y={}));(function(a){var l=function(){function l(){}
l.Cb=function(d,c,e,k,r,v,l,b,f){var G=0,J=0,g=0;if(null!=l||null!=b||null!=f)if(a.l.Qi(c))a.vh.Cb(d,e,k,r,v,l,b,f);else{var h=a.C.da(r-e);if(a.l.W(k,v)&&(a.l.wd(h)||a.l.W(a.l.K(k),1.570796326794897)))null!=l&&(l.j=0),null!=b&&(b.j=0),null!=f&&(f.j=0);else{if(a.l.W(k,-v)){if(a.l.W(a.l.K(k),1.570796326794897)){null!=l&&(l.j=2*a.C.Yg(d,c));null!=b&&(b.j=0<k?a.C.da(3.141592653589793-a.C.da(r)):a.C.da(r));null!=f&&(f.j=0<k?a.C.da(r):a.C.da(3.141592653589793-a.C.da(r)));return}a.l.W(a.l.K(h),3.141592653589793)&&
(null!=l&&(l.j=2*a.C.Yg(d,c)),null!=b&&(b.j=0),null!=f&&(f.j=0))}else{if(a.l.W(a.l.K(k),1.570796326794897)||a.l.W(a.l.K(v),1.570796326794897)){a.yl.Cb(d,c,e,k,r,v,l,b,f);return}if(a.l.wd(h)||a.l.W(a.l.K(h),3.141592653589793)){a.yl.Cb(d,c,e,k,r,v,l,b,f);return}}var L=1-Math.sqrt(1-c),z=c/(1-c),m=d*(1-L);d=a.C.Mr(c,k);var n=a.C.Mr(c,v);c=1.570796326794897==a.l.K(d)?0:Math.cos(d);var p=Math.sin(d),u=1.570796326794897==a.l.K(n)?0:Math.cos(n),t=Math.sin(n),q=h,y=Math.cos(q),x=Math.sin(q),A=1,w=0,C,D,F,
E,B;do{C=q;D=Math.sqrt(Math.pow(u*x,2)+Math.pow(c*t-p*u*y,2));F=p*t+c*u*y;E=Math.atan2(D,F);if(0==D){A=0;break}B=c*u*x/D;G=Math.cos(Math.asin(B));G*=G;J=F-2*p*t/G;1<a.l.K(J)&&(J=a.l.Ab(1,J));g=J*J;q=L/16*G*(4+L*(4-3*G));q=h+(1-q)*L*B*(E+q*D*(J+q*F*(2*g-1)));y=Math.cos(q);x=Math.sin(q);w++;if(3.141592653589793<a.l.K(q)&&30<w){A=0;break}}while(5E3>=w&&!a.l.W(C,q));if(0!=A)z*=G,L=z*(256+z*(-128+z*(74-47*z)))/1024,null!=l&&(l.j=m*(1+z*(4096+z*(-768+z*(320-175*z)))/16384)*(E-L*D*(J+L/4*(F*(2*g-1)-L/6*
J*(4*D*D-3)*(4*g-3))))),null!=b&&(a.l.W(a.l.K(k),1.570796326794897)?b.j=0>k?r:a.C.da(3.141592653589793-r):b.j=Math.atan2(u*x,c*t-p*u*y)),null!=f&&(a.l.W(a.l.K(v),1.570796326794897)?f.j=0>v?e:a.C.da(3.141592653589793-e):(f.j=Math.atan2(c*x,c*t*y-p*u),f.j=a.C.da(f.j+3.141592653589793)));else{q=a.l.Ab(3.141592653589793,h);F=p*t-c*u;E=Math.acos(F);D=Math.sin(E);G=1;w=B=0;do g=B,G*=G,y=G*G,B=L*G*(1+L+L*L),J=L*L*y*(1+2.25*L),A=L*L*L*y*G,y=1-.25*B+.1875*J-.1953125*A,B=.25*B-.25*J+.29296875*A,x=.03125*J-
.05859375*A,A*=.00651041666666667,J=F-2*p*t/G,1<a.l.K(J)&&(J=a.l.Ab(1,J)),G=Math.acos(J),F=Math.cos(2*G),C=Math.cos(3*G),B=a.l.W(k,-v)?a.C.da(3.141592653589793-h)/(3.141592653589793*L*y):a.C.da(q-h)/(L*(y*E+B*D*J+x*Math.sin(2*E)*F+A*Math.sin(3*E)*C)),x=B*D/(c*u),q=1.570796326794897<a.l.K(h)?a.l.Ab(3.141592653589793,x)-Math.asin(x):Math.asin(x),y=Math.cos(q),D=Math.sqrt(Math.pow(u*x,2)+Math.pow(c*t-p*u*y,2)),E=3.141592653589793-Math.asin(a.l.K(D)),F=Math.cos(E),G=Math.cos(Math.asin(B)),w++;while(70>=
w&&!a.l.W(g,B));null!=l&&(G*=G,z*=G,y=1+z*(4096+z*(-768+z*(320-175*z)))/16384,a.l.W(k,-v)?l.j=3.141592653589793*m*y:(J=F-2*p*t/G,G=Math.acos(J),F=Math.cos(2*G),C=Math.cos(3*G),l.j=m*(y*E+z*(-512+z*(128+z*(-60+35*z)))/2048*D*J+z*(-4+5*z)/6144*z*z*Math.sin(2*E)*F+A*Math.sin(3*E)*C+-7.62939453125E-5*z*z*z*z*Math.sin(4*E)*Math.cos(4*G))));null!=b&&(a.l.wd(k)&&a.l.wd(v)?(G=Math.sqrt(1-B*B),b.j=Math.acos(G),0>h&&(b.j*=-1)):a.l.W(a.l.K(k),1.570796326794897)?b.j=0>k?r:a.C.da(3.141592653589793-r):(l=B/c,m=
Math.sqrt(1-l*l),0>c*t-p*u*Math.cos(q)&&(m*=-1),b.j=Math.atan2(l,m),a.l.W(k,-v)&&a.l.K(a.C.da(e-r))>3.141592653589793*(1-L*Math.cos(k))&&(0<k&&1.570796326794897>a.l.K(b.j)||0>k&&1.570796326794897<a.l.K(b.j))&&(b.j=a.l.Ab(3.141592653589793,b.j)-b.j)));if(null!=f)if(a.l.wd(k)&&a.l.wd(v))G=Math.sqrt(1-B*B),f.j=Math.acos(G),0<=h&&(f.j*=-1);else if(a.l.W(a.l.K(v),1.570796326794897))f.j=0>v?e:a.C.da(3.141592653589793-e);else if(h=B/u,l=Math.sqrt(1-h*h),m=Math.sin(q/2),0>Math.sin(n-d)-2*c*t*m*m&&(l*=-1),
f.j=Math.atan2(h,l),f.j=a.C.da(f.j+3.141592653589793),a.l.W(k,-v)&&!a.l.wd(k)&&!a.l.W(a.l.K(k),1.570796326794897)&&a.l.K(a.C.da(e-r))>3.141592653589793*(1-L*Math.cos(k))&&(null!=b?m=b.j:(l=B/c,m=Math.sqrt(1-l*l),0>c*t-p*u*Math.cos(q)&&(m*=-1),m=Math.atan2(l,m),a.l.W(k,-v)&&a.l.K(a.C.da(e-r))>3.141592653589793*(1-L*Math.cos(k))&&(0<k&&1.570796326794897>a.l.K(m)||0>k&&1.570796326794897<a.l.K(m))&&(m=a.l.Ab(3.141592653589793,m)-m)),1.570796326794897>=a.l.K(m)&&1.570796326794897<a.l.K(f.j)||1.570796326794897<=
a.l.K(m)&&1.570796326794897>a.l.K(f.j)))f.j=-1*a.C.da(f.j+3.141592653589793)}}}};l.Uf=function(d,c,e,k,r,v,l,b){if(null!=l||null!=b)if(a.l.Qi(c))a.vh.Uf(d,e,k,r,v,l,b);else if(v=a.C.da(v),a.l.W(a.l.K(k),1.570796326794897)||a.l.wd(v)||a.l.W(a.l.K(v),3.141592653589793))a.yl.Uf(d,c,e,k,r,v,l,b);else{var G=1.570796326794897==a.l.K(v)?0:Math.cos(v),f=3.141592653589793==a.l.K(v)?0:Math.sin(v);a.l.W(a.l.K(k),1.570796326794897)&&(e=0);v=1-Math.sqrt(1-c);var J=a.C.Mr(c,k);k=1.570796326794897==a.l.K(J)?0:Math.cos(J);
var g=Math.sin(J),J=Math.atan2(Math.tan(J),G),h=k*f,z=h*h,m=1-z,n=c/(1-c)*m;c=n*(256+n*(-128+n*(74-47*n)))/1024;var p=c/4,u=c/6,t=r/(d*(1-v)*(1+n*(4096+n*(-768+n*(320-175*n)))/16384)),q=t,y;do{y=q;r=1.570796326794897==a.l.K(q)?0:Math.cos(q);var n=3.141592653589793==a.l.K(q)?0:Math.sin(q),x=n*n;d=Math.cos(2*J+q);q=d*d;q=c*n*(d+p*(r*(2*q-1)-u*d*(4*x-3)*(4*q-3)))+t}while(!a.l.W(y,q));r=1.570796326794897==a.l.K(q)?0:Math.cos(q);n=3.141592653589793==a.l.K(q)?0:Math.sin(q);null!=l&&(f=Math.atan2(n*f,k*
r-g*n*G),m=v/16*m*(4+v*(4-3*m)),d=Math.cos(2*J+q),l.j=a.C.da(e+(f-(1-m)*v*h*(q+m*n*(d+m*r*(2*d*d-1))))));null!=b&&(m=g*n-k*r*G,m=(1-v)*Math.sqrt(z+m*m),b.j=Math.atan2(g*r+k*n*G,m))}};return l}();a.Mu=l})(y||(y={}));(function(a){var l=function(){function l(){}l.Cb=function(d,c,e,k,r,v,l,b,f){var G=a.C.da(r-e),J=a.l.W(a.l.K(k),1.570796326794897),g=a.l.W(a.l.K(v),1.570796326794897);if(a.l.W(k,v)&&(a.l.wd(G)||J))null!=l&&(l.j=0),null!=b&&(b.j=0),null!=f&&(f.j=0);else{var h,L;a.l.Qi(c)?(h=Math.sin(k),
L=Math.sin(v),h=Math.sqrt((1+h)/(1-h)),L=Math.sqrt((1+L)/(1-L)),h=Math.log(L)-Math.log(h),h=Math.atan2(G,h),null!=l&&(l.j=a.l.W(k,v)?a.l.K(d*Math.cos(k)*G):a.l.K((d*v-d*k)/Math.cos(h)))):(L=a.C.Bx(c,v),h=Math.sin(a.C.Bx(c,k)),L=Math.sin(L),h=Math.sqrt((1+h)/(1-h)),L=Math.sqrt((1+L)/(1-L)),h=Math.log(L)-Math.log(h),h=Math.atan2(G,h),null!=l&&(a.l.W(k,v)?l.j=a.l.K(d*G*Math.cos(k)/a.C.Cm(c,k)):(G=a.C.q(d,c,k),d=a.C.q(d,c,v),l.j=a.l.K((d-G)/Math.cos(h)))));if(null!=b||null!=f)l=a.C.da(h+3.141592653589793),
J&&g||!J&&!g||(J?h=0>k?r:a.C.da(3.141592653589793-r):g&&(l=0>v?e:a.C.da(3.141592653589793-e))),null!=b&&(b.j=h),null!=f&&(f.j=l)}};l.Uf=function(d,c,e,k,r,v,l,b){v=a.C.da(v);0>r&&(r=a.l.K(r),v=a.C.da(v+3.141592653589793));a.l.Qi(c)?a.l.W(a.l.K(k),1.570796326794897)?(e=0>k?v:a.C.da(3.141592653589793-v),v=r/d%6.283185307179586,3.141592653589793>=v?d=k-a.l.Ab(v,k):(e=a.C.da(e+3.141592653589793),d=-k+a.l.Ab(v-3.141592653589793,k))):a.l.W(a.l.K(v),1.570796326794897)?(e=a.C.da(e+a.l.Ab(r,v)/(d*Math.cos(k))),
d=k):(d=k+r*Math.cos(v)/d,1.570796326794897<a.l.K(d)&&(d=1.570796326794897),a.l.W(a.l.K(d),1.570796326794897)&&(a.l.wd(v)||a.l.W(a.l.K(v),3.141592653589793))||(1.570796316258184<a.l.K(d)&&(d=a.l.Ab(1.570796316258184,d)),c=Math.sin(k),k=Math.sin(d),c=Math.sqrt((1+c)/(1-c)),k=Math.sqrt((1+k)/(1-k)),c=Math.log(k)-Math.log(c),e=a.C.da(e+Math.tan(v)*c))):a.l.W(a.l.K(k),1.570796326794897)?(e=0>k?v:a.C.da(3.141592653589793-v),v=r/a.C.oX(d,c),v%=6.283185307179586,3.141592653589793>=v?(d=k-a.l.Ab(v,k),d=a.C.xp(c,
d)):(e=a.C.da(e+3.141592653589793),d=-k+a.l.Ab(v-3.141592653589793,k),d=a.C.xp(c,d))):a.l.W(a.l.K(v),1.570796326794897)?(e=a.C.da(e+a.l.Ab(r,v)*a.C.Cm(c,k)/(d*Math.cos(k))),d=k):(d=1.570796326794897*(r*Math.cos(v)+a.C.q(d,c,k))/a.C.Yg(d,c),1.570796326794897<a.l.K(d)&&(d=a.l.Ab(1.570796326794897,d)),d=a.C.xp(c,d),a.l.W(a.l.K(d),1.570796326794897)&&(a.l.wd(v)||a.l.W(a.l.K(v),3.141592653589793))||(r=a.C.Bx(c,k),k=a.C.Bx(c,d),1.570796316258184<a.l.K(k)&&(k=a.l.Ab(1.570796316258184,d),d=a.C.AQ(c,k)),c=
Math.sin(r),k=Math.sin(k),c=Math.sqrt((1+c)/(1-c)),k=Math.sqrt((1+k)/(1-k)),c=Math.log(k)-Math.log(c),e=a.C.da(e+Math.tan(v)*c)));null!=l&&(l.j=e);null!=b&&(b.j=d)};return l}();a.TD=l})(y||(y={}));(function(a){var l=function(){function l(){}l.Ez=function(d,c,e,k,r,v,l){a.Mu.Cb(d,c,e,k,r,v,null,l,null)};l.Xi=function(d,c,e,k,r,v,l,b){a.Mu.Uf(d,c,e,k,r,v,l,b)};l.Md=function(d,c,e,k,r,v,l,b,f,g){switch(g){case 2:a.yl.Cb(d,c,e,k,r,v,l,b,f);break;case 3:a.UD.Cb(d,c,e,k,r,v,l,b,f);break;case 1:a.TD.Cb(d,
c,e,k,r,v,l,b,f);break;default:a.Mu.Cb(d,c,e,k,r,v,l,b,f)}};l.Oj=function(d,c,e,k,r,v,l,b,f){switch(f){case 2:a.yl.Uf(d,c,e,k,r,v,l,b);break;case 3:a.UD.Uf(d,c,e,k,r,v,l,b);break;case 1:a.TD.Uf(d,c,e,k,r,v,l,b);break;default:a.Mu.Uf(d,c,e,k,r,v,l,b)}};return l}();a.mb=l})(y||(y={}));(function(a){var l=function(){function c(){this.y=this.x=null}c.pa=function(e){var d=new c;d.x=new a.Xb;d.x.set(e.x);d.y=new a.Xb;d.y.set(e.y);return d};c.$F=function(e,d){var k=new c;k.x=new a.Xb;k.x.set(e);k.y=new a.Xb;
k.y.set(d);return k};c.prototype.Lg=function(){return this.x.Lg()&&this.y.Lg()};c.prototype.value=function(){return a.b.pa(this.x.value(),this.y.value())};return c}();a.HZ=l;var b=function(){function c(){this.z=this.y=this.x=null}c.pa=function(e){var d=new c;d.x=new a.Xb;d.x.set(e.x);d.y=new a.Xb;d.y.set(e.y);d.z=new a.Xb;d.z.set(e.z);return d};c.$F=function(e,d,r){var k=new c;k.x=new a.Xb;k.x.set(e);k.y=new a.Xb;k.y.set(d);k.z=new a.Xb;k.z.set(r);return k};c.prototype.Lg=function(){return this.x.Lg()&&
this.y.Lg()&&this.z.Lg()};c.prototype.value=function(){return new a.qd(this.x.value(),this.y.value(),this.z.value())};c.prototype.oi=function(c){var e=new a.Xb,d=new a.Xb,v=new a.Xb;e.pm(this.x,c.x);d.pm(this.y,c.y);v.pm(this.z,c.z);c=new a.Xb;c.aP(e,d);c.add(v);return c};c.prototype.iG=function(e){var d=new c;d.x.pm(this.y,e.z);d.y.pm(this.z,e.x);d.z.pm(this.x,e.y);var r=new a.Xb,v=new a.Xb,l=new a.Xb;r.pm(this.z,e.y);v.pm(this.x,e.z);l.pm(this.y,e.x);d.x.sub(r);d.y.sub(v);d.z.sub(l);return d};return c}();
a.IZ=b;var d=function(){function c(){}c.oO=function(e,a,d){var k=a.x;a=a.y;c.Ck(1,e,Math.cos(k),Math.sin(k),Math.cos(a),Math.sin(a),d)};c.lO=function(e,d){var k=new a.qd;c.oO(e,d,k);return k};c.GZ=function(e,d,r,v,l,b){var k=new a.qd;c.Ck(e,d,r,v,l,b,k);return k};c.Ck=function(c,a,d,v,l,b,f){c/=Math.sqrt(1-a*b*b);f.I(c*l*d,c*l*v,c*(1-a)*b)};c.Ru=function(c,d){var e=new a.Xb,k=new a.Xb,l=new a.Xb,f=new a.Xb;e.cos(d.x);k.sin(d.x);l.cos(d.y);f.sin(d.y);d=new a.Xb;d.set(f);d.Vg(f);d.yp(c);d.yp(-1);d.hP();
d.sqrt();var g=new a.Xb;g.set(1);g.Xm(d);d=new a.Xb;d.set(g);d.Vg(l);d.Vg(e);e=new a.Xb;e.set(g);e.Vg(l);e.Vg(k);k=new a.Xb;k.set(g);k.yp(1-c);k.Vg(f);return b.$F(d,e,k)};c.KN=function(c,a,d){var e=a.x,k=a.y;d.ka(Math.atan2(k,e),Math.atan2(a.z,(1-c)*Math.sqrt(e*e+k*k)))};c.Y_=function(e,d,r){e=new a.b;c.KN(d,r,e);return e};c.LU=function(e,d,r,v){if(Math.abs(d.x-r.x)>Math.PI||Math.abs(d.y)>.5*Math.PI||Math.abs(r.y)>.5*Math.PI||(Math.abs(d.y)==.5*Math.PI||Math.abs(r.y)==.5*Math.PI)&&d.x!=r.x)return NaN;
v=c.QC(v,Math.min(d.x,r.x),Math.max(d.x,r.x));if(!(new a.Ac(d.x,r.x)).contains(v))return NaN;var k=l.pa(d);r=l.pa(r);k=c.Ru(e,k);r=c.Ru(e,r);r=k.iG(r);if(r.z.Lg())return d=d.y;var b=new a.Xb;b.set(r.x);b.Xm(r.z);b.yp(-1);var f=new a.Xb;f.set(r.y);f.Xm(r.z);f.yp(-1);var g=new a.Xb;g.set(f);g.Vg(f);k=new a.Xb;k.set(b);k.Vg(b);k.add(g);k.sqrt();if(k.Lg()||b.Lg()&&f.Lg())return d=d.y;d=Math.atan2(f.value(),b.value());d=Math.atan2(k.value()*Math.cos(d-v),1-e);v=c.lO(e,a.b.pa(v,d));e=new a.qd(v.x,v.y,-v.z);
v=r.value().oi(v);e=r.value().oi(e);Math.abs(e)<Math.abs(v)&&(d=-d);return d};c.tA=function(e,d,r,v,b,f){f[0]=NaN;f[1]=NaN;if(Math.abs(r.x-v.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(v.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(v.y)==.5*Math.PI)&&r.x!=v.x||Math.abs(b)>=.5*Math.PI||0<r.y&&0<v.y&&r.y>b&&v.y>b||0>r.y&&0>v.y&&r.y<b&&v.y<b)return 0;var k=l.pa(r);e=l.pa(v);k=c.Ru(d,k);e=c.Ru(d,e);var G=k.iG(e);if(G.z.Lg())return(new a.Ac(r.y,v.y)).contains(b)?(f[0]=r.x,1):0;e=new a.Xb;e.set(G.x);
e.Xm(G.z);e.yp(-1);k=new a.Xb;k.set(G.y);k.Xm(G.z);k.yp(-1);G=new a.Xb;G.set(k);G.Vg(k);var g=new a.Xb;g.set(e);g.Vg(e);g.add(G);g.sqrt();if(g.Lg()||e.Lg()&&k.Lg())return 0==b?(f[0]=r.x,f[1]=v.x,2):0;d=(1-d)*Math.tan(b)/g.value();if(1<Math.abs(d))return 0;d=Math.acos(d);G=Math.atan2(k.value(),e.value());e=Math.min(r.x,v.x);k=Math.max(r.x,v.x);v=c.QC(G-d,e,k);d=0!=b?c.QC(G+d,e,k):v;b=0;e<=v&&v<=k&&(f[b]=v,b++);d!=v&&e<=d&&d<=k&&(f[b]=d,b++,2==b&&Math.abs(f[0]-r.x)>Math.abs(f[1]-r.x)&&(r=f[0],f[0]=
f[1],f[1]=r));return b};c.QC=function(c,a,d){c>d?(a=Math.ceil((c-d)/(2*Math.PI)),c-=2*a*Math.PI):c<a&&(a=Math.ceil((a-c)/(2*Math.PI)),c+=2*a*Math.PI);return c};c.JB=function(c,a){a[0]>.5*Math.PI?(c[0]+=Math.PI,a[0]=Math.PI-a[0]):a[0]<-.5*Math.PI&&(c[0]-=Math.PI,a[0]=-Math.PI-a[0])};return c}();a.xy=d})(y||(y={}));(function(a){var l=function(){function l(){}l.SY=function(d,c){var e=8;0>e&&(e=8);var k=[0,0,0,0],r=new a.b;r.L(c);r.scale(9102==a.fb.kc(d).Od().yc()?1:a.fb.kc(d).Od().Ai/3.141592653589793*
180);-180>r.x?(r.x-=r.x%360,-180>r.x&&(r.x+=360)):180<r.x&&(r.x-=r.x%360,180<r.x&&(r.x-=360));90<r.y&&(r.y=90);-90>r.y&&(r.y=-90);d=5*e;c=(d+31)/32;for(var v=-180,b=180,f=d-1,g=c-1;0<=g;g--)for(var h=f-32*g,z=Math.min(32,d-32*g),m=1;m<z;m+=2){var n=.5*(b+v);r.x>=n?(k[g]|=1<<h,v=n):b=n;h-=2;f-=2}v=-90;b=90;f=d-2;for(g=c-1;0<=g;g--)for(h=f-32*g,z=Math.min(32,d-32*g),m=0;m<z;m+=2)n=.5*(b+v),r.y>=n?(k[g]|=1<<h,v=n):b=n,h-=2,f-=2;return l.uO(k,e,e)};l.uO=function(a,c,e){for(var d=[],r=0;r<c;r++)d[r]="";
for(var v=r=0,l=0;l<c;l++){var b=a[r]>>v&31,v=v+5;if(31<v){var f=37-v,b=b&(1<<f)-1,v=v-32;r++;b|=(a[r]&(1<<v)-1)<<f}d[c-1-l]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[b]}if(e>c)for(l=0;l<e-c;l++)d.push("0");else e<c&&(d.length=e);return d.join("")};return l}();a.rM=l})(y||(y={}));(function(a){var l={gcstol:[0,1E-8,1,1.11111E-8,2,1.68845E-8,3,2.17661E-8,4,2.22508E-8,5,2.34848E-8,6,2.37811E-8,7,2.88455E-8,8,3.1456E-8,9,3.29779E-8,10,3.66789E-8,11,4.23597E-8,12,4.79463E-8,13,6.45223E-8,14,7.26274E-8,
15,7.49945E-8,16,7.52506E-8,17,7.97991E-8,18,9.66202E-8,19,9.79918E-8,20,9.89735E-8,21,1.02314E-7,22,1.08146E-7,23,2.29734E-7,24,2.42985E-7,25,2.7546E-7,26,3.37034E-7,27,4.30795E-7,28,5.20871E-7,29,5.50921E-7,30,6.74068E-7,31,6.86177E-7,32,7.25263E-7,33,7.44101E-7,34,7.74267E-7,35,9.62954E-7,36,1.06103E-6,37,1.14363E-6,38,1.16219E-6,39,1.36419E-6,40,1.36744E-6,41,1.43239E-6,42,1.73624E-6,43,1.84825E-6,44,1.90986E-6,45,1.97572E-6,46,2.12207E-6,47,2.72837E-6,48,3.1831E-6,49,3.58099E-6,50,3.81972E-6,
51,4.09256E-6,52,4.40737E-6,53,4.77465E-6,54,5.16178E-6,55,5.20871E-6,56,5.72958E-6,57,6.03113E-6,58,6.98729E-6,59,9.24125E-6,60,1.14592E-5],pcstol:[0,6.66667E-9,1,2E-8,2,4.97098E-5,3,.001,4,.00109362,5,.00328087,6,.00497101],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,
102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,
102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,
102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,
102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,
3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3400,102184,3401,102185,3404,3359,
3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,
3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,
4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,
4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,
5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,
29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077],pcsid:[2066,6,2136,5,2155,5,2157,3,2158,3,2159,5,2160,5,2219,3,2220,3,2244,5,2245,5,2256,5,2265,5,2266,5,2269,5,2270,5,2273,5,2290,3,2291,3,2294,3,
2295,3,2313,3,2314,5,2964,5,2967,5,2968,5,2991,3,2992,5,2993,3,2994,5,3073,3,3076,3,3079,3,3091,5,3106,3,3108,3,3109,3,3141,3,3142,3,3167,2,3337,3,3347,3,3348,3,3359,5,3360,3,3361,5,3362,3,3363,5,3364,3,3365,5,3366,5,3402,3,3403,3,3405,3,3406,3,3439,3,3440,3,3447,3,3449,3,3450,3,3453,5,3454,5,3460,3,3479,5,3480,3,3481,5,3482,3,3483,5,3484,3,3485,5,3486,3,3487,5,3488,3,3489,3,3490,5,3491,3,3492,5,3493,3,3494,5,3495,3,3496,5,3497,3,3498,5,3499,3,3500,5,3501,3,3502,5,3503,3,3504,5,3505,3,3506,5,3507,
3,3508,5,3509,3,3510,5,3511,3,3512,5,3513,3,3514,3,3515,5,3516,3,3517,5,3518,3,3519,5,3520,3,3521,5,3522,3,3523,5,3524,3,3525,5,3526,3,3527,5,3528,3,3529,5,3530,3,3531,5,3532,3,3533,5,3534,3,3535,5,3536,3,3537,5,3538,3,3539,5,3540,3,3541,5,3542,3,3543,5,3544,3,3545,5,3546,3,3547,5,3548,3,3549,5,3550,3,3551,5,3552,3,3553,5,3582,5,3583,3,3584,5,3585,3,3586,5,3587,3,3588,5,3589,3,3590,5,3591,3,3592,3,3593,5,3598,5,3599,3,3600,5,3605,5,3606,3,3607,3,3608,5,3609,3,3610,5,3611,3,3612,5,3613,3,3614,5,3615,
3,3616,5,3617,3,3618,5,3619,3,3620,5,3621,3,3622,5,3623,3,3624,5,3625,3,3626,5,3627,3,3628,5,3629,3,3630,5,3631,3,3632,5,3633,3,3634,5,3635,3,3636,5,3640,5,3641,3,3642,5,3643,3,3644,5,3645,3,3646,5,3647,3,3648,5,3649,3,3650,5,3651,3,3652,5,3653,3,3654,5,3655,3,3656,5,3657,3,3658,5,3659,3,3660,5,3661,3,3662,5,3663,3,3664,5,3668,5,3669,3,3670,5,3671,3,3672,5,3673,3,3674,5,3675,3,3676,5,3677,5,3678,3,3679,5,3680,5,3681,3,3682,5,3683,5,3684,3,3685,3,3686,5,3687,3,3688,5,3689,3,3690,5,3691,3,3692,5,3696,
5,3697,3,3698,5,3699,3,3700,5,3740,3,3749,3,3783,3,3784,3,3793,3,3794,3,3802,3,3816,3,3829,3,3854,3,3920,3,3978,3,3979,3,3991,5,3992,5,4026,3,4037,3,4038,3,4217,5,4438,5,4439,5,4467,3,4471,3,4474,3,4559,3,4839,3,5018,3,5048,3,5167,3,5168,3,5223,3,5234,3,5235,3,5243,3,5266,3,5316,3,5320,3,5321,3,5330,3,5331,3,5337,3,5361,3,5362,3,5382,3,5383,3,5396,3,5456,3,5457,3,5469,3,5472,4,5490,3,5518,3,5523,3,5559,3,5588,5,5589,5,5596,3,5627,3,5629,3,5641,3,5643,3,5644,3,5654,5,5655,5,5659,3,5700,3,5825,3,5836,
3,5837,3,5842,3,5844,3,5880,3,5887,3,5890,3,20499,3,20538,3,20539,3,20790,3,20791,3,21291,3,21292,3,21500,3,21817,3,21818,3,22032,3,22033,3,22091,3,22092,3,22332,3,22391,3,22392,3,22700,3,22770,3,22780,3,22832,3,23090,3,23095,3,23239,3,23240,3,23433,3,23700,3,24047,3,24048,3,24100,5,24200,3,24305,3,24306,3,24382,4,24383,3,24500,3,24547,3,24548,3,24571,2,24600,3,25E3,3,25231,3,25884,3,25932,3,26237,3,26331,3,26332,3,26591,3,26592,3,26632,3,26692,3,26855,5,26856,5,27120,3,27200,3,27291,4,27292,4,27429,
3,27492,3,27500,3,27700,3,28232,3,28600,3,28991,3,28992,3,29100,3,29220,3,29221,3,29333,3,29635,3,29636,3,29701,3,29738,3,29739,3,29849,3,29850,3,29871,2,29872,5,29873,3,29900,3,29901,3,29903,3,30200,6,30339,3,30340,3,30591,3,30592,3,30791,3,30792,3,31028,3,31121,3,31154,3,31170,3,31171,3,31370,3,31528,3,31529,3,31600,3,31700,3,31838,3,31839,3,31901,3,32061,3,32062,3,32098,3,32099,5,32100,3,32104,3,32161,3,32766,3,53034,3,53048,3,53049,3,54034,3,65061,5,65062,5,65161,3,65163,3,102041,5,102064,4,102068,
1,102069,0,102217,5,102218,3,102219,5,102220,5,102378,5,102379,5,102380,3,102381,5,102589,5,102599,5,102600,5,102604,5,102605,3,102606,3,102647,3,102704,5,102705,5,102733,5,102761,5,102762,3,102763,5,102764,3,102765,3,102766,5,102970,5,102974,5,102993,3,102994,3,102995,5,102996,5,103015,3,103016,5,103017,3,103018,5,103025,3,103026,3,103027,5,103028,5,103035,3,103036,3,103037,5,103038,5,103039,3,103040,3,103041,5,103042,5,103043,3,103044,3,103045,5,103046,5,103047,3,103048,3,103049,5,103050,5,103051,
3,103052,5,103053,3,103054,5,103055,3,103056,5,103057,3,103058,3,103059,5,103060,5,103061,3,103062,3,103063,5,103064,5,103069,5,103070,3,103071,3,103072,5,103073,5,103086,3,103087,3,103088,5,103089,5,103094,5,103095,3,103096,5,103103,3,103104,5,103105,3,103106,5,103121,3,103122,5,103123,3,103124,3,103125,5,103126,5,103127,3,103128,3,103129,5,103130,5,103131,3,103132,3,103133,5,103134,5,103135,3,103136,3,103137,5,103138,5,103139,3,103140,5,103141,3,103142,5,103143,3,103144,5,103145,3,103146,5,103147,
3,103148,3,103149,5,103150,5,103151,3,103152,5,103172,3,103173,5,103174,3,103175,3,103176,5,103177,5,103178,3,103179,3,103180,5,103181,5,103182,3,103183,3,103184,5,103185,5,103228,3,103229,3,103230,5,103231,5,103250,3,103251,5,103252,3,103253,5,103260,3,103261,3,103262,5,103263,5,103270,3,103271,3,103272,5,103273,5,103274,3,103275,3,103276,5,103277,5,103278,3,103279,3,103280,5,103281,5,103282,3,103283,3,103284,5,103285,5,103286,3,103287,5,103288,3,103289,5,103290,3,103291,5,103292,3,103293,3,103294,
5,103295,5,103296,3,103297,3,103298,5,103299,5,103376,5,103377,3,103378,3,103379,5,103380,5,103393,3,103394,3,103395,5,103396,5,103472,3,103473,5,103474,3,103475,5,103482,3,103483,5,103484,3,103485,5,103500,3,103501,5,103502,3,103503,3,103504,5,103505,5,103506,3,103507,3,103508,5,103509,5,103510,3,103511,3,103512,5,103513,5,103514,3,103515,5,103516,3,103517,5,103518,3,103519,5,103520,3,103521,5,103522,3,103523,3,103524,5,103525,5,103526,3,103527,5,103561,5,103562,5,103563,3,103564,3,103565,5,103566,
5,103567,3,103568,3,103569,5,103570,5,103585,5,103695,5],pcsidc:[[2E3,2045,3],[2056,2065,3],[2067,2135,3],[2137,2153,3],[2161,2170,3],[2172,2193,3],[2196,2198,3],[2200,2203,3],[2206,2217,3],[2222,2224,5],[2251,2253,5],[2280,2282,5],[2308,2311,3],[2315,2325,3],[2327,2394,3],[2400,2462,3],[2523,2576,3],[2578,2693,3],[2695,2758,3],[2867,2888,5],[2891,2930,5],[2931,2941,3],[2969,2973,3],[2975,2982,3],[2984,2988,3],[2995,3002,3],[3006,3051,3],[3054,3059,3],[3061,3066,3],[3068,3071,3],[3084,3087,3],[3112,
3118,3],[3120,3138,3],[3146,3151,3],[3153,3157,3],[3161,3166,3],[3168,3172,3],[3174,3203,3],[3294,3313,3],[3315,3335,3],[3339,3345,3],[3350,3358,3],[3367,3369,3],[3374,3399,3],[3408,3416,3],[3425,3432,5],[3441,3446,5],[3456,3459,5],[3465,3478,3],[3554,3559,3],[3561,3565,5],[3568,3570,5],[3571,3581,3],[3594,3597,3],[3601,3604,3],[3637,3639,3],[3665,3667,3],[3693,3695,3],[3701,3727,3],[3728,3733,5],[3744,3747,3],[3753,3758,5],[3761,3763,3],[3765,3769,3],[3779,3781,3],[3788,3791,3],[3797,3799,3],[3832,
3841,3],[3844,3852,3],[3873,3885,3],[3890,3893,3],[3907,3912,3],[3942,3950,3],[3968,3970,3],[3973,3976,3],[3986,3989,3],[3994,3997,3],[4399,4413,5],[4418,4433,5],[4491,4554,3],[5069,5072,3],[5105,5130,3],[5180,5184,3],[5253,5259,3],[5269,5275,3],[5292,5311,3],[5343,5349,3],[5355,5357,3],[5387,5389,3],[5459,5463,3],[5479,5482,3],[5530,5539,3],[5550,5552,3],[5562,5583,3],[5623,5625,5],[5631,5639,3],[5649,5653,3],[5663,5680,3],[5682,5685,3],[5875,5877,3],[20002,20032,3],[20062,20092,3],[20135,20138,
3],[20248,20258,3],[20348,20358,3],[20436,20440,3],[20822,20824,3],[20934,20936,3],[21035,21037,3],[21095,21097,3],[21148,21150,3],[21413,21423,3],[21473,21483,3],[21780,21782,3],[21891,21894,3],[22171,22177,3],[22181,22187,3],[22191,22197,3],[22234,22236,3],[22521,22525,3],[22991,22994,3],[23028,23038,3],[23830,23853,3],[23866,23872,3],[23877,23884,3],[23886,23894,3],[23946,23948,3],[24311,24313,3],[24342,24347,3],[24370,24374,4],[24375,24381,3],[24718,24721,3],[24817,24821,3],[24877,24882,3],[24891,
24893,3],[25391,25395,3],[25828,25838,3],[26191,26195,3],[26391,26393,3],[26703,26722,3],[26729,26760,5],[26766,26798,5],[26860,26870,5],[26891,26899,3],[26903,26923,3],[26929,26946,3],[26948,26998,3],[27037,27040,3],[27205,27232,3],[27258,27260,3],[27391,27398,3],[27561,27564,3],[27571,27574,3],[27581,27584,3],[27591,27594,3],[28191,28193,3],[28348,28358,3],[28402,28432,3],[28462,28492,3],[29118,29122,3],[29177,29185,3],[30161,30179,3],[30491,30494,3],[30729,30732,3],[31251,31259,3],[31265,31268,
3],[31275,31278,3],[31288,31297,3],[31461,31465,3],[31491,31495,3],[31917,31922,3],[31965,31985,3],[31992,32E3,3],[32001,32003,5],[32005,32031,5],[32033,32060,5],[32074,32077,5],[32081,32086,3],[32107,32130,3],[32133,32158,3],[32164,32167,5],[32180,32199,3],[32201,32260,3],[32301,32360,3],[32601,32662,3],[32664,32667,5],[32701,32761,3],[53001,53004,3],[53008,53019,3],[53021,53032,3],[53042,53046,3],[54001,54004,3],[54008,54019,3],[54021,54032,3],[54042,54046,3],[54048,54053,3],[102001,102040,3],[102042,
102063,3],[102065,102067,3],[102070,102112,3],[102114,102117,3],[102118,102121,5],[102122,102208,3],[102210,102216,3],[102221,102300,3],[102304,102377,3],[102382,102388,3],[102389,102391,5],[102401,102444,3],[102450,102452,3],[102461,102468,5],[102469,102492,3],[102500,102519,5],[102530,102549,3],[102570,102588,3],[102590,102598,3],[102601,102603,3],[102608,102628,3],[102629,102646,5],[102648,102672,5],[102675,102700,5],[102701,102703,3],[102707,102730,5],[102735,102758,5],[102767,102798,3],[102962,
102969,3],[102971,102973,3],[102975,102989,3],[102990,102992,5],[102997,103002,3],[103003,103008,5],[103009,103011,3],[103012,103014,5],[103019,103021,3],[103022,103024,5],[103029,103031,3],[103032,103034,5],[103065,103068,3],[103074,103076,3],[103077,103079,5],[103080,103082,3],[103083,103085,5],[103090,103093,3],[103097,103099,3],[103100,103102,5],[103107,103109,3],[103110,103112,5],[103113,103116,3],[103117,103120,5],[103153,103157,3],[103158,103162,5],[103163,103165,3],[103166,103171,5],[103186,
103188,3],[103189,103191,5],[103192,103195,3],[103196,103199,5],[103200,103224,3],[103225,103227,5],[103232,103237,3],[103238,103243,5],[103244,103246,3],[103247,103249,5],[103254,103256,3],[103257,103259,5],[103264,103266,3],[103267,103269,5],[103300,103375,3],[103381,103383,3],[103384,103386,5],[103387,103389,3],[103390,103392,5],[103397,103399,3],[103400,103471,5],[103476,103478,3],[103479,103481,5],[103486,103488,3],[103489,103491,5],[103492,103495,3],[103496,103499,5],[103539,103543,3],[103544,
103548,5],[103549,103551,3],[103552,103557,5],[103558,103560,3],[103571,103573,3],[103574,103576,5],[103577,103580,3],[103581,103583,5],[103600,103694,3],[103700,103793,5],[103794,103799,3]],gcsid:[4042,0,4075,0,4081,0,4168,0,4170,0,4188,0,4261,1,4262,0,4263,0,4288,0,4289,0,4305,1,4322,0,4324,0,4326,0,4466,0,4469,0,4475,0,4483,0,4490,0,4555,0,4558,0,4614,0,4619,0,4657,0,4670,0,4671,0,4674,0,4682,0,4683,0,4718,0,4720,0,4721,0,4723,0,4726,0,4737,0,4738,0,4759,0,4761,0,4807,1,4808,0,4809,0,4816,1,4817,
0,4818,0,4819,1,4820,0,4821,1,4823,0,4824,0,4901,1,4902,1,4903,0,4904,0,5228,0,5229,0,5233,0,5252,0,5264,0,5340,0,5354,0,5360,0,5371,0,5373,0,5381,0,5393,0,5464,0,5467,0,5489,0,5524,0,5527,0,5546,0,5561,0,5593,0,5681,0,5886,0,37225,1,37235,0,37257,0,37259,0,37260,0,104020,0,104139,1,104140,1,104223,0,104286,0,104287,0,104304,0,104305,0,104896,0,104900,5,104901,0,104902,0,104903,9,104904,2,104905,2,104906,59,104907,54,104908,0,104909,58,104910,31,104911,56,104912,6,104913,50,104914,41,104915,10,104916,
3,104917,30,104918,8,104919,60,104920,53,104921,44,104922,48,104923,51,104924,38,104925,0,104926,49,104927,57,104928,21,104929,23,104930,35,104931,49,104932,27,104933,17,104934,13,104935,7,104936,56,104937,40,104938,28,104939,37,104940,15,104941,55,104942,22,104943,4,104944,0,104945,20,104946,42,104947,47,104948,52,104949,43,104950,46,104951,39,104952,24,104953,16,104954,50,104955,36,104956,33,104957,46,104958,14,104959,19,104960,0,104961,34,104962,32,104963,29,104964,45,104965,26,104966,25,104967,
41,104968,11,104969,12,104970,18],gcsidc:[[4001,4016,0],[4018,4025,0],[4027,4029,0],[4031,4036,0],[4044,4047,0],[4052,4054,0],[4120,4166,0],[4172,4176,0],[4178,4185,0],[4190,4196,0],[4198,4216,0],[4218,4222,0],[4224,4232,0],[4234,4260,0],[4265,4267,0],[4269,4286,0],[4291,4303,0],[4306,4319,0],[4600,4610,0],[4621,4625,0],[4627,4633,0],[4636,4639,0],[4641,4646,0],[4659,4667,0],[4676,4680,0],[4686,4697,0],[4699,4706,0],[4740,4757,0],[4763,4765,0],[4801,4806,0],[4810,4812,1],[4813,4815,0],[37001,37008,
0],[37201,37208,0],[37211,37224,0],[37226,37233,0],[37237,37243,0],[37245,37247,0],[37249,37255,0],[104100,104138,0],[104141,104145,0],[104256,104261,0],[104700,104786,0],[104990,104992,0]]},b={c:[[2E3,2045,9001],[2056,2065,9001],[2067,2135,9001],[2137,2153,9001],[2161,2170,9001],[2172,2193,9001],[2196,2198,9001],[2200,2203,9001],[2206,2217,9001],[2222,2224,9002],[2251,2253,9002],[2280,2282,9002],[2308,2311,9001],[2315,2325,9001],[2327,2394,9001],[2400,2462,9001],[2523,2576,9001],[2578,2693,9001],
[2695,2758,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2941,9001],[2969,2973,9001],[2975,2982,9001],[2984,2988,9001],[2995,3002,9001],[3006,3051,9001],[3054,3059,9001],[3061,3066,9001],[3068,3071,9001],[3084,3087,9001],[3112,3118,9001],[3120,3138,9001],[3146,3151,9001],[3153,3157,9001],[3161,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3335,9001],[3339,3345,9001],[3350,3358,
9001],[3367,3369,9001],[3374,3399,9001],[3408,3416,9001],[3425,3432,9003],[3441,3446,9003],[3456,3459,9003],[3465,3478,9001],[3554,3559,9001],[3561,3565,9003],[3568,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3733,9003],[3744,3747,9001],[3753,3758,9003],[3761,3763,9001],[3765,3769,9001],[3779,3781,9001],[3788,3791,9001],[3797,3799,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3907,
3912,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4052,4054,9102],[4120,4166,9102],[4172,4176,9102],[4178,4185,9102],[4190,4196,9102],[4198,4216,9102],[4218,4222,9102],[4224,4232,9102],[4234,4260,9102],[4265,4267,9102],[4269,4286,9102],[4291,4303,9102],[4306,4319,9102],[4399,4413,9003],[4418,4433,9003],[4491,4554,9001],[4600,4610,9102],[4621,4625,9102],[4627,4633,9102],
[4636,4639,9102],[4641,4646,9102],[4659,4667,9102],[4676,4680,9102],[4686,4697,9102],[4699,4706,9102],[4740,4757,9102],[4763,4765,9102],[4801,4806,9102],[4810,4812,9105],[4813,4815,9102],[5069,5072,9001],[5105,5130,9001],[5180,5184,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5343,5349,9001],[5355,5357,9001],[5387,5389,9001],[5459,5463,9001],[5479,5482,9001],[5530,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,
9001],[5875,5877,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21891,21894,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,
23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26703,26722,9001],[26729,26760,9003],[26766,26798,9003],[26860,26870,9003],[26891,26899,9001],[26903,26923,9001],[26929,26946,9001],[26948,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],
[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29118,29122,9001],[29177,29185,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31278,9001],[31288,31297,9001],[31461,31465,9001],[31491,31495,9001],[31917,31922,9001],[31965,31985,9001],[31992,32E3,9001],[32001,32003,9003],[32005,32031,9003],[32033,32060,9003],[32074,32077,9003],[32081,32086,9001],[32107,32130,
9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37001,37008,9102],[37201,37208,9102],[37211,37224,9102],[37226,37233,9102],[37237,37243,9102],[37245,37247,9102],[37249,37255,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53042,53046,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[102001,102040,9001],[102042,102063,9001],
[102065,102067,9001],[102070,102112,9001],[102114,102117,9001],[102122,102208,9001],[102210,102216,9001],[102221,102300,9001],[102304,102377,9001],[102382,102388,9001],[102389,102391,9003],[102401,102444,9001],[102450,102452,9001],[102461,102468,9003],[102469,102492,9001],[102500,102519,9002],[102530,102549,9001],[102570,102588,9001],[102590,102598,9001],[102601,102603,9001],[102608,102628,9001],[102629,102646,9003],[102648,102672,9003],[102675,102700,9003],[102701,102703,9001],[102707,102730,9003],
[102735,102758,9003],[102767,102798,9001],[102962,102969,9001],[102971,102973,9001],[102975,102989,9001],[102990,102992,9002],[102997,103002,9001],[103003,103008,9003],[103009,103011,9001],[103012,103014,9003],[103019,103021,9001],[103022,103024,9003],[103029,103031,9001],[103032,103034,9003],[103065,103068,9001],[103074,103076,9001],[103077,103079,9002],[103080,103082,9001],[103083,103085,9003],[103090,103093,9001],[103097,103099,9001],[103100,103102,9003],[103107,103109,9001],[103110,103112,9003],
[103113,103116,9001],[103117,103120,9003],[103153,103157,9001],[103158,103162,9003],[103163,103165,9001],[103166,103168,9002],[103169,103171,9003],[103186,103188,9001],[103189,103191,9003],[103192,103195,9001],[103196,103199,9003],[103200,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103300,103375,9001],[103381,103383,9001],[103384,103386,9002],
[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103400,103471,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103600,103694,9001],[103700,103793,9003],[103794,103799,9001],[104100,104138,9102],
[104141,104145,9102],[104256,104261,9102],[104700,104786,9102],[104900,104970,9102],[104990,104992,9102]],nc:[2066,9039,2136,9094,2155,9003,2157,9001,2158,9001,2159,9094,2160,9094,2219,9001,2220,9001,2244,9003,2245,9003,2256,9002,2265,9002,2266,9002,2269,9002,2270,9002,2273,9002,2290,9001,2291,9001,2294,9001,2295,9001,2313,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2964,9003,2967,9003,2968,9003,2991,9001,2992,9002,2993,9001,2994,9002,3073,
9001,3076,9001,3079,9001,3091,9003,3106,9001,3108,9001,3109,9001,3141,9001,3142,9001,3167,9301,3337,9001,3347,9001,3348,9001,3359,9003,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3366,9005,3402,9001,3403,9001,3405,9001,3406,9001,3439,9001,3440,9001,3447,9001,3449,9001,3450,9001,3453,9003,3454,9003,3460,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,
3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,
9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,
3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,
9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3740,9001,3749,9001,3783,9001,3784,9001,3793,9001,3794,9001,3802,9001,3816,9001,3829,9001,3854,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4075,9102,4081,9102,4168,9102,4170,9102,4188,9102,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4305,9105,4322,9102,4324,9102,4326,9102,4438,9003,4439,9003,4466,9102,4467,9001,4469,9102,4471,9001,4474,9001,4475,9102,4483,9102,
4490,9102,4555,9102,4558,9102,4559,9001,4614,9102,4619,9102,4657,9102,4670,9102,4671,9102,4674,9102,4682,9102,4683,9102,4718,9102,4720,9102,4721,9102,4723,9102,4726,9102,4737,9102,4738,9102,4759,9102,4761,9102,4807,9105,4808,9102,4809,9102,4816,9105,4817,9102,4818,9102,4819,9105,4820,9102,4821,9105,4823,9102,4824,9102,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5018,9001,5048,9001,5167,9001,5168,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5252,9102,5264,9102,5266,
9001,5316,9001,5320,9001,5321,9001,5330,9001,5331,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5393,9102,5396,9001,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5518,9001,5523,9001,5524,9102,5527,9102,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,
5842,9001,5844,9001,5880,9001,5886,9102,5887,9001,5890,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23433,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,
9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,26855,9003,26856,9003,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27492,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29100,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,29900,9001,29901,9001,29903,9001,30200,9039,30339,9001,30340,9001,30591,9001,30592,
9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37225,9105,37235,9102,37257,9102,37259,9102,37260,9102,53034,9001,53048,9001,53049,9001,54034,9001,65061,9003,65062,9003,65161,9001,65163,9001,102041,9003,102064,9085,102068,109030,102069,109031,102118,9003,102119,9002,102120,9003,102121,9003,
102217,9003,102218,9001,102219,9003,102220,9003,102378,9002,102379,9002,102380,9001,102381,9002,102589,9003,102599,9003,102600,9003,102604,9003,102605,9001,102606,9001,102647,9001,102704,9003,102705,9003,102733,9003,102761,9003,102762,9001,102763,9003,102764,9001,102765,9001,102766,9003,102970,9002,102974,9003,102993,9001,102994,9001,102995,9003,102996,9003,103015,9001,103016,9003,103017,9001,103018,9003,103025,9001,103026,9001,103027,9003,103028,9003,103035,9001,103036,9001,103037,9003,103038,9003,
103039,9001,103040,9001,103041,9003,103042,9003,103043,9001,103044,9001,103045,9003,103046,9003,103047,9001,103048,9001,103049,9003,103050,9003,103051,9001,103052,9003,103053,9001,103054,9003,103055,9001,103056,9003,103057,9001,103058,9001,103059,9003,103060,9003,103061,9001,103062,9001,103063,9003,103064,9003,103069,9003,103070,9001,103071,9001,103072,9003,103073,9003,103086,9001,103087,9001,103088,9003,103089,9003,103094,9002,103095,9001,103096,9003,103103,9001,103104,9003,103105,9001,103106,9003,
103121,9001,103122,9003,103123,9001,103124,9001,103125,9002,103126,9002,103127,9001,103128,9001,103129,9003,103130,9003,103131,9001,103132,9001,103133,9003,103134,9003,103135,9001,103136,9001,103137,9002,103138,9002,103139,9001,103140,9003,103141,9001,103142,9003,103143,9001,103144,9003,103145,9001,103146,9002,103147,9001,103148,9001,103149,9003,103150,9003,103151,9001,103152,9003,103172,9001,103173,9003,103174,9001,103175,9001,103176,9003,103177,9003,103178,9001,103179,9001,103180,9003,103181,9003,
103182,9001,103183,9001,103184,9003,103185,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,
103296,9001,103297,9001,103298,9003,103299,9003,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,
103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103695,9003,104020,9102,104139,9105,104140,9105,104223,9102,104286,9102,104287,9102,104304,9102,104305,9102,104896,9102]},d=function(){function c(){}c.wG=function(a){!1===c.ul&&c.hq();var e=c.dU(a);if(-1==e){var d=c.Pv(a);d!=a&&(e=c.wG(d))}return e};c.dU=function(a){return void 0!==c.gv[a]?
c.gv[a]:-1};c.tS=function(a){!1===c.ul&&c.hq();var e=c.JF(a);if(1E38==e){var d=c.Pv(a);d!=a&&(e=c.JF(d));if(1E38==e)return 1E-10}return e};c.RU=function(a){if(void 0!==c.$p[a])return!0;var e=c.Pv(a);return e!=a&&void 0!==c.$p[e]?!0:!1};c.TU=function(a){if(void 0!==c.Dj[a])return!0;var e=c.Pv(a);return e!=a&&void 0!==c.Dj[e]?!0:!1};c.JF=function(a){!1===c.ul&&c.hq();return void 0!==c.$p[a]?c.$p[a]:void 0!==c.Dj[a]?c.Dj[a]:1E38};c.rZ=function(a){!1===c.ul&&c.hq();return void 0!==c.GC[a]?c.GC[a]:a};
c.Pv=function(a){!1===c.ul&&c.hq();return void 0!==c.OC[a]?c.OC[a]:a};c.hq=function(){for(var a=l,d,r=0;r<a.pcsid.length;r+=2)c.Dj[a.pcsid[r]]=a.pcstol[2*a.pcsid[r+1]+1];for(r=0;r<a.pcsidc.length;r+=1){d=a.pcsidc[r];for(var v=d[0];v<=d[1];v++)c.Dj[v]=a.pcstol[2*d[2]+1]}for(r=0;r<a.gcsid.length;r+=2)c.$p[a.gcsid[r]]=a.gcstol[2*a.gcsid[r+1]+1];for(r=0;r<a.gcsidc.length;r+=1)for(d=a.gcsidc[r],v=d[0];v<=d[1];v++)c.Dj[v]=a.gcstol[2*d[2]+1];for(r=0;r<b.c.length;r+=1)for(d=b.c[r],v=d[0];v<=d[1];v++)c.gv[v]=
d[2];for(r=0;r<b.nc.length;r+=2)c.gv[b.nc[r]]=b.nc[r+1];b=null;for(r=0;r<a.newtoold.length;r+=2)c.GC[a.newtoold[r+1]]=a.newtoold[r],c.OC[a.newtoold[r]]=a.newtoold[r+1];l=null;c.ul=!0};c.ul=!1;c.$p=[];c.Dj=[];c.GC=[];c.OC=[];c.gv=[];return c}();a.ts=d})(y||(y={}));(function(a){function l(c){return 0===c.length?'""':'"'==c[0]||"."==c[0]||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var b=[],d=function(){function c(){}c.vS=function(e){try{for(var d=0;d<b.length;d++)if(b[d].wkttext===e)return b[d].unit;for(var r,
v=d="",G=!1,f=0;f<e.length;f++){var g=e[f];!0===G?'"'==g?'"'==e[f+1]?d+=g:G=!1:d+=g:/[\s]/.test(g)||(","==g?(v=""!==d?v+(l(d)+","):v+",",d=""):")"==g||"]"==g?(v=""!==d?v+(l(d)+"]}"):v+"]}",d=""):"("==g||"["==g?(v+='{ "entity": "'+d.toUpperCase().trim()+'", "values":[',d=""):'"'==g?(G=!0,d=""):d+=g)}r=JSON.parse(v);var h=c.oF(r);if(null===h)return null;r=null;for(g=0;g<h.values.length;g++)if("object"===typeof h.values[g]&&"UNIT"===h.values[g].entity){r=h.values[g];break}if(null===r)return null;var z=
a.oc.aR("GEOGCS"===h.entity?1:0,r.values[1],r.values[2]);b.push({wkttext:e,unit:z});10<b.length&&b.shift();return z}catch(ca){return null}};c.oF=function(a){if(null===a)return null;if("GEOGCS"===a.entity||"PROJCS"===a.entity)return a;for(var e=[],d=0;d<a.values.length;d++)if("object"===typeof a.values[d]&&void 0!==a.values[d].entity){if("GEOGCS"===a.values[d].entity||"PROJCS"==a.values[d].entity)return a.values[d];e.push(a.values[d])}for(a=0;a<e.length;a++)if(d=c.oF(e[a]),null!==d)return d;return null};
c.uS=function(c){var a=-1;if(null!=c&&0<c.length){var e,d;e=c.indexOf("PROJCS");if(0<=e){var l=0;e=c.lastIndexOf("UNIT");if(0<=e&&(e=c.indexOf(",",e+4),0<e&&(e++,d=c.indexOf("]",e+1),0<d)))try{l=parseFloat(c.substring(e,d))}catch(L){l=0}0<l&&(a=.001/l)}else if(e=c.indexOf("GEOGCS"),0<=e){var b=0,l=0;e=c.indexOf("SPHEROID",e+6);if(0<e&&(e=c.indexOf(",",e+8),0<e)){e++;d=c.indexOf(",",e+1);if(0<d)try{b=parseFloat(c.substring(e,d))}catch(L){b=0}if(0<b&&(e=c.indexOf("UNIT",d+1),0<=e&&(e=c.indexOf(",",
e+4),0<e&&(e++,d=c.indexOf("]",e+1),0<d))))try{l=parseFloat(c.substring(e,d))}catch(L){l=0}}0<b&&0<l&&(a=.001/(b*l))}}return a};return c}();a.nE=d})(y||(y={}));(function(a){(function(a){a[a.NONE=0]="NONE";a[a.LINEAR=1]="LINEAR";a[a.ANGULAR=2]="ANGULAR"})(a.EM||(a.EM={}));(function(a){a[a.enumFloat=0]="enumFloat";a[a.enumDouble=1]="enumDouble";a[a.enumInt32=2]="enumInt32";a[a.enumInt64=3]="enumInt64";a[a.enumInt8=4]="enumInt8";a[a.enumInt16=5]="enumInt16"})(a.FN||(a.FN={}));(function(a){a[a.POSITION=
0]="POSITION";a[a.Z=1]="Z";a[a.M=2]="M";a[a.ID=3]="ID";a[a.NORMAL=4]="NORMAL";a[a.TEXTURE1D=5]="TEXTURE1D";a[a.TEXTURE2D=6]="TEXTURE2D";a[a.TEXTURE3D=7]="TEXTURE3D";a[a.ID2=8]="ID2";a[a.MAXSEMANTICS=10]="MAXSEMANTICS"})(a.Wc||(a.Wc={}));var l=function(){function l(a,c){this.Pt=this.af=null;this.Dr=this.Ea=0;this.Sh=this.wg=null;this.bm=0;if(void 0!==c){this.Ea=c.Ea;this.Dr=c.Dr;this.wg=c.wg.slice(0);this.Sh=c.Sh.slice(0);this.bm=c.bm;this.Pt=[];for(c=a=0;c<this.Ea;c++)this.Pt[c]=a,a+=l.Xa(this.wg[c]);
this.Dr=a;this.af=[];for(c=0;c<this.Ea;c++){a=l.Xa(this.zd(c));for(var e=l.pe(this.zd(c)),d=0;d<a;d++)this.af[this.Pt[c]+d]=e}}else this.Dr=this.Ea=0}l.prototype.zd=function(d){if(0>d||d>this.Ea)throw a.f.F();return this.wg[d]};l.prototype.mg=function(a){return this.Sh[a]};l.Vz=function(a){return l.uc[a]};l.si=function(a){return l.bd[a]};l.Mg=function(a){return l.ee[a]};l.Cj=function(a){return l.Mg(l.si(a))*l.Xa(a)};l.Xa=function(a){return l.Bb[a]};l.Wg=function(a){return 2>a};l.qk=function(a){return l.Wg(l.si(a))};
l.prototype.hasAttribute=function(a){return 0<=this.Sh[a]};l.prototype.tH=function(){return this.hasAttribute(1)};l.pe=function(a){return l.$[a]};l.prototype.DT=function(a){return this.Pt[a]};l.OH=function(a,c){return l.$[a]===c};l.Oi=function(d){if(4==d)return 2;if(8==d)return 3;throw a.f.F();};l.prototype.Eb=function(a){return this===a};l.prototype.zk=function(){for(var d=a.J.dh(this.wg[0]),c=1;c<this.Ea;c++)d=a.J.dh(this.wg[c],d);return d};l.prototype.wk=function(a){return this.Pt[a]};l.prototype.jc=
function(){return this.bm};l.prototype.Id=function(a){return this.wg[a]};l.$=[0,0,NaN,0,0,0,0,0,0];l.uc=[1,1,1,0,2,1,1,1,0];l.bd=[1,1,1,2,0,0,0,0,2];l.ee=[4,8,4,8,1,2];l.Bb=[2,1,1,1,3,1,2,3,2];return l}();a.na=l})(y||(y={}));(function(a){function l(c,a,d,v){var e=c.Kd,k=c.e+a+1;1===d?v=5<=e[k]:2===d?v=5<e[k]||5==e[k]&&(v||0>k||void 0!==e[k+1]||e[k-1]&1):3===d?v=v||void 0!==e[k]||0>k:(v=!1,0!==d&&b("!Big.RM!"));if(1>k||!e[0])v?(c.e=-a,c.Kd=[1]):c.Kd=[c.e=0];else{e.length=k--;if(v)for(;9<++e[k];)e[k]=
0,k--||(++c.e,e.unshift(1));for(k=e.length;!e[--k];e.pop());}}function b(c){c=Error(c);c.name="BigError";throw c;}var d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,c=function(){function c(a){if(a instanceof c)this.le=a.le,this.e=a.e,this.Kd=a.Kd.slice();else{var e,k,l;0===a&&0>1/a?a="-0":d.test(a+="")||b(NaN);this.le="-"==a.charAt(0)?(a=a.slice(1),-1):1;-1<(e=a.indexOf("."))&&(a=a.replace(".",""));0<(k=a.search(/e/i))?(0>e&&(e=k),e+=+a.slice(k+1),a=a.substring(0,k)):0>e&&(e=a.length);for(k=0;"0"==a.charAt(k);k++);
if(k==(l=a.length))this.Kd=[this.e=0];else{for(;"0"==a.charAt(--l););this.e=e-k-1;this.Kd=[];for(e=0;k<=l;this.Kd[e++]=+a.charAt(k++));}}}c.prototype.abs=function(){var a=new c(this);a.le=1;return a};c.prototype.QF=function(){var a=0,e=this.Kd,d=(a=new c(a)).Kd,l=this.le,b=a.le,f=this.e,g=a.e;if(!e[0]||!d[0])return e[0]?l:d[0]?-b:0;if(l!=b)return l;a=0>l;if(f!=g)return f>(g^a)?1:-1;l=-1;for(b=(f=e.length)<(g=d.length)?f:g;++l<b;)if(e[l]!=d[l])return e[l]>(d[l]^a)?1:-1;return f==g?0:f>(g^a)?1:-1};
c.prototype.Xm=function(a){var e=this.Kd,d=(a=new c(a)).Kd,k=this.le==a.le?1:-1,f=c.bd;(f!==~~f||0>f||1E6<f)&&b("!Big.DP!");if(!e[0]||!d[0])return e[0]==d[0]&&b(NaN),d[0]||b(k/0),new c(0*k);var g,h,m,z,n=d.slice(),p=g=d.length,u=e.length,t=e.slice(0,g),q=t.length,y=a,x=y.Kd=[],A=0,w=f+(y.e=this.e-a.e)+1;y.le=k;k=0>w?0:w;for(n.unshift(0);q++<g;t.push(0));do{for(h=0;10>h;h++){if(g!=(q=t.length))m=g>q?1:-1;else for(z=-1,m=0;++z<g;)if(d[z]!=t[z]){m=d[z]>t[z]?1:-1;break}if(0>m){for(a=q==g?d:n;q;){if(t[--q]<
a[q]){for(z=q;z&&!t[--z];t[z]=9);--t[z];t[q]+=10}t[q]-=a[q]}for(;!t[0];t.shift());}else break}x[A++]=m?h:++h;t[0]&&m?t[q]=e[p]||0:t=[e[p]]}while((p++<u||void 0!==t[0])&&k--);x[0]||1==A||(x.shift(),y.e--);A>w&&l(y,f,c.Mg,void 0!==t[0]);return y};c.prototype.ZT=function(){return 0<this.QF()};c.prototype.nV=function(){return 0>this.QF()};c.prototype.Yt=function(a){var e,d,k=this.le,l=(a=new c(a)).le;if(k!=l)return a.le=-l,this.DJ(a);var b=this.Kd.slice();d=this.e;var f=a.Kd,g=a.e;if(!b[0]||!f[0])return f[0]?
(a.le=-l,a):new c(b[0]?this:0);if(k=d-g){(e=0>k)?(k=-k,d=b):(g=d,d=f);d.reverse();for(l=k;l--;d.push(0));d.reverse()}else for(d=((e=b.length<f.length)?b:f).length,k=l=0;l<d;l++)if(b[l]!=f[l]){e=b[l]<f[l];break}e&&(d=b,b=f,f=d,a.le=-a.le);if(0<(l=(d=f.length)-(e=b.length)))for(;l--;b[e++]=0);for(l=e;d>k;){if(b[--d]<f[d]){for(e=d;e&&!b[--e];b[e]=9);--b[e];b[d]+=10}b[d]-=f[d]}for(;0==b[--l];b.pop());for(;0==b[0];)b.shift(),--g;b[0]||(a.le=1,b=[g=0]);a.Kd=b;a.e=g;return a};c.prototype.DJ=function(a){var e,
d=this.le;e=(a=new c(a)).le;if(d!=e)return a.le=-e,this.Yt(a);e=this.e;var k=this.Kd,l=a.e,b=a.Kd;if(!k[0]||!b[0])return b[0]?a:new c(k[0]?this:0*d);k=k.slice();if(d=e-l){0<d?(l=e,e=b):(d=-d,e=k);for(e.reverse();d--;e.push(0));e.reverse()}0>k.length-b.length&&(e=b,b=k,k=e);d=b.length;for(e=0;d;)e=(k[--d]=k[d]+b[d]+e)/10|0,k[d]%=10;e&&(k.unshift(e),++l);for(d=k.length;0==k[--d];k.pop());a.Kd=k;a.e=l;return a};c.prototype.pow=function(a){var e=this,d=new c(1),k=d,l=0>a;(a!==~~a||-1E6>a||1E6<a)&&b("!pow!");
for(a=l?-a:a;;){a&1&&(k=k.cs(e));a>>=1;if(!a)break;e=e.cs(e)}return l?d.Xm(k):k};c.prototype.round=function(a,e){var d=this;null==a?a=0:(a!==~~a||0>a||1E6<a)&&b("!round!");l(d=new c(d),a,null==e?c.Mg:e);return d};c.prototype.sqrt=function(){var a,e,d;e=this.Kd;a=this.le;d=this.e;var G=new c("0.5");if(!e[0])return new c(this);0>a&&b(NaN);a=Math.sqrt(this.toString());0==a||a==1/0?(a=e.join(""),a.length+d&1||(a+="0"),e=new c(Math.sqrt(a).toString()),e.e=((d+1)/2|0)-(0>d||d&1)):e=new c(a.toString());
a=e.e+(c.bd+=4);do d=e,e=G.cs(d.DJ(this.Xm(d)));while(d.Kd.slice(0,a).join("")!==e.Kd.slice(0,a).join(""));l(e,c.bd-=4,c.Mg);return e};c.prototype.cs=function(a){var e,d=this.Kd,k=(a=new c(a)).Kd,l=d.length,b=k.length,f=this.e,g=a.e;a.le=this.le==a.le?1:-1;if(!d[0]||!k[0])return new c(0*a.le);a.e=f+g;l<b&&(e=d,d=k,k=e,g=l,l=b,b=g);for(e=Array(g=l+b);g--;e[g]=0);for(f=b;f--;){b=0;for(g=l+f;g>f;)b=e[g]+k[f]*d[g-f-1]+b,e[g--]=b%10,b=b/10|0;e[g]=(e[g]+b)%10}b&&++a.e;e[0]||e.shift();for(f=e.length;!e[--f];e.pop());
a.Kd=e;return a};c.prototype.toString=function(){var c=this.e,a=this.Kd.join(""),e=a.length;if(-7>=c||21<=c)a=a.charAt(0)+(1<e?"."+a.slice(1):"")+(0>c?"e":"e+")+c;else if(0>c){for(;++c;a="0"+a);a="0."+a}else if(0<c)if(++c>e)for(c-=e;c--;a+="0");else c<e&&(a=a.slice(0,c)+"."+a.slice(c));else 1<e&&(a=a.charAt(0)+"."+a.slice(1));return 0>this.le&&this.Kd[0]?"-"+a:a};c.bd=20;c.Mg=1;return c}();a.Tp=c})(y||(y={}));(function(a){var l=function(){function d(c){this.Nf=c}d.prototype.gs=function(c,e,d){var k=
new a.b,v=new a.b,l=this.Nf;d.Gd(c,e,function(c,a){l.fc(2*c,k);l.fc(2*a,v);return k.compare(v)})};d.prototype.Qq=function(c){return this.Nf.read(2*c+1)};return d}(),b=function(){function d(){}d.Rq=function(c){if(c.u())return!1;var e=c.G();return 1736==e?0==c.hf()?!1:!0:1607==e?(e=[!1],d.lE(c,!0,e),e[0]):197==e||a.T.Oc(e)&&!c.NH()?!0:!1};d.Sm=function(c){var e=c.G();if(1736==e)return e=new a.Ua(c.description),c.u()||c.wE(e),e;if(1607==e)return d.lE(c,!1,null);if(197==e)return e=new a.Ua(c.description),
c.u()||e.jd(c,!1),e;if(a.T.Oc(e)){e=new a.Ed(c.description);if(!c.u()&&!c.NH()){var k=new a.Wa;c.Dp(k);e.add(k);c.Bp(k);e.add(k)}return e}if(a.T.Jo(e))return null;throw a.f.F();};d.lE=function(c,e,d){null!=d&&(d[0]=!1);var k=null;e||(k=new a.Ed(c.description));if(!c.u()){var v=new a.ia(0);v.yb(2*c.aa());for(var b=0,f=c.aa();b<f;b++)if(0<c.Ka(b)&&!c.Eo(b)){var g=c.wa(b);v.add(g);g=c.Gc(b)-1;v.add(g)}if(0<v.size){f=new a.Gu;b=c.Pa(0);f.sort(v,0,v.size,new l(b));f=new a.b;b.fc(2*v.get(0),f);for(var g=
0,h=1,m=new a.Wa,z=new a.b,n=1,p=v.size;n<p;n++)if(b.fc(2*v.get(n),z),z.ub(f))v.get(g)>v.get(n)?(v.set(g,2147483647),g=n):v.set(n,2147483647),h++;else{if(0==(h&1))v.set(g,2147483647);else if(e)return null!=d&&(d[0]=!0),null;f.L(z);g=n;h=1}if(0==(h&1))v.set(g,2147483647);else if(e)return null!=d&&(d[0]=!0),null;if(!e)for(v.Gd(0,v.size,function(c,a){return c-a}),n=0,p=v.size;n<p&&2147483647!=v.get(n);n++)c.Ae(v.get(n),m),k.add(m)}}return e?null:k};return d}();a.Pi=b})(y||(y={}));(function(a){var l=
function(){function l(){this.ag=new a.ia(0);this.tt=new a.ia(0);this.TI=1;this.zt=NaN}l.prototype.sort=function(a,c,e,k){if(32>e-c)k.gs(c,e,a);else{var d=!0;try{for(var v=Infinity,l=-Infinity,b=c;b<e;b++){var f=k.Qq(a.get(b));f<v&&(v=f);f>l&&(l=f)}if(this.reset(e-c,v,l,e-c)){for(b=c;b<e;b++){var g=a.get(b),f=k.Qq(g),h=this.KG(f);this.ag.set(h,this.ag.get(h)+1);this.tt.write(b-c,g)}var m=this.ag.get(0);this.ag.set(0,0);for(var b=1,z=this.ag.size;b<z;b++){var n=this.ag.get(b);this.ag.set(b,m);m+=n}for(b=
c;b<e;b++){var g=this.tt.read(b-c),f=k.Qq(g),h=this.KG(f),p=this.ag.get(h);a.set(p+c,g);this.ag.set(h,p+1)}d=!1}}catch(ha){this.ag.resize(0),this.tt.resize(0)}if(d)k.gs(c,e,a);else{b=e=0;for(z=this.ag.size;b<z;b++)d=e,e=this.ag.get(b),e>d&&k.gs(c+d,c+e,a);100<this.ag.size&&(this.ag.resize(0),this.tt.resize(0))}}};l.prototype.reset=function(a,c,e,k){if(2>a||e==c)return!1;a=Math.min(l.PV,a);this.ag.yb(a);this.ag.resize(a);this.ag.Zh(0,0,this.ag.size);this.TI=c;this.tt.resize(k);this.zt=(e-c)/(a-1);
return!0};l.prototype.KG=function(d){return a.J.truncate((d-this.TI)/this.zt)};l.PV=65536;return l}();a.Gu=l})(y||(y={}));(function(a){var l;(function(c){c[c.enum_line=1]="enum_line";c[c.enum_arc=2]="enum_arc";c[c.enum_dummy=4]="enum_dummy";c[c.enum_concave_dip=8]="enum_concave_dip";c[c.enum_connection=3]="enum_connection"})(l||(l={}));var b=function(){function c(){}c.Dv=function(e,d,k,r,l,b){var v=new c;v.vn=new a.b;v.Jn=new a.b;v.Nw=new a.b;v.vn.L(e);v.Jn.L(d);v.Nw.L(k);v.qp=r;v.Nh=l;v.Qh=b;return v};
c.pa=function(e,d,k,r){var v=new c;v.vn=new a.b;v.Jn=new a.b;v.Nw=new a.b;v.vn.L(e);v.Jn.L(d);v.Nw.$c();v.qp=4;v.Nh=k;v.Qh=r;return v};return c}(),d=function(){function c(c,a,e,d,k,r){this.Kw=null;this.Ba=0;this.iB=c;this.nJ=this.lJ=0;this.Qa=a;this.ek=e;this.Xk=d;this.sr=k;this.lc=r}c.prototype.next=function(){for(var c=new a.Wa;;){if(this.Ba==this.iB.D())return null;this.iB.Ae(this.Ba,c);this.Ba++;if(!c.u())break}var e=!1;null==this.Kw&&(this.lJ=c.Be(),this.nJ=c.nf(),this.Kw=k.buffer(c,this.Qa,
this.ek,this.Xk,this.sr,this.lc),e=!0);var d;this.Ba<this.iB.D()?(d=new a.Ia,this.Kw.copyTo(d)):d=this.Kw;if(!e){var e=new a.Hd,r=c.Be()-this.lJ,c=c.nf()-this.nJ;e.Ag(r,c);d.Xc(e)}return d};c.prototype.Ha=function(){return 0};c.prototype.Re=function(){return!0};return c}(),c=function(){function c(c,a){this.$a=c;this.Ba=0;this.cr=a}c.prototype.next=function(){var c=this.$a.Y;if(this.Ba<c.aa()){var e=this.Ba;this.Ba++;if(!c.Eo(e))for(var d=c.Aa(c.Gc(e)-1);this.Ba<c.aa();){var k=c.Aa(c.wa(this.Ba));
if(c.Eo(this.Ba))break;if(k!=d)break;d=c.Aa(c.Gc(this.Ba)-1);this.Ba++}if(1==this.Ba-e)return this.$a.wF(this.$a.Y,e,this.cr);d=new a.Ua(this.$a.Y.description);d.Ti(this.$a.Y,e,!0);for(e+=1;e<this.Ba;e++)d.As(this.$a.Y,e,0,c.dw(e),!1);return this.$a.wF(d,0,this.cr)}return null};c.prototype.Ha=function(){return 0};c.prototype.Re=function(){return!0};return c}(),e=function(){function c(c){this.$a=c;this.Ba=0}c.prototype.next=function(){var c=this.$a.Y;if(this.Ba<c.aa()){var a=this.Ba;c.Tm(this.Ba);
for(this.Ba++;this.Ba<c.aa()&&!(0<c.Tm(this.Ba));)this.Ba++;return 0==a&&this.Ba==c.aa()?this.$a.Vy(c,0,c.aa()):this.$a.Vy(c,a,this.Ba)}return null};c.prototype.Ha=function(){return 0};c.prototype.Re=function(){return!0};return c}(),k=function(){function k(c){this.Et=this.Yw=this.Ft=this.Wd=null;this.te=[];this.lc=c;this.vb=this.ww=this.GV=this.Qa=this.YA=this.Ut=this.ta=0;this.VA=this.Xk=-1;this.cr=!0}k.buffer=function(c,e,d,r,l,b){if(null==c)throw a.f.F();if(0>r)throw a.f.F();if(c.u())return new a.Ia(c.description);
var v=new a.h;c.ac(v);0<e&&v.O(e,e);b=new k(b);b.ek=d;b.Y=c;b.ta=a.ma.be(d,v,!0);b.Ut=a.ma.be(null,v,!0);b.Qa=e;b.GV=c.G();0>=l&&(l=96);b.vb=Math.abs(b.Qa);b.ww=0!=b.vb?1/b.vb:0;isNaN(r)||0==r?r=1E-5*b.vb:r>.5*b.vb&&(r=.5*b.vb);12>l&&(l=12);c=Math.abs(e)*(1-Math.cos(Math.PI/l));c>r?r=c:(c=Math.PI/Math.acos(1-r/Math.abs(e)),c<l-1&&(l=a.J.truncate(c),12>l&&(l=12,r=Math.abs(e)*(1-Math.cos(Math.PI/l)))));b.Xk=r;b.sr=l;b.YA=Math.min(b.Ut,.25*r);return b.xF()};k.prototype.Qv=function(){if(null==this.Wd)this.Wd=
[];else if(0!==this.Wd.length)return;var c=this.BF(),c=a.J.truncate((c+3)/4),e=.5*Math.PI/c;this.VA=e;for(var d=0;d<4*c;d++)this.Wd.push(null);for(var k=Math.cos(e),e=Math.sin(e),r=a.b.pa(0,1),d=0;d<c;d++)this.Wd[d+0*c]=a.b.pa(r.y,-r.x),this.Wd[d+1*c]=a.b.pa(-r.x,-r.y),this.Wd[d+2*c]=a.b.pa(-r.y,r.x),this.Wd[d+3*c]=r,r=a.b.pa(r.x,r.y),r.pu(k,e)};k.prototype.xF=function(){var c=this.Y.G();if(a.T.Oc(c))return c=new a.Ua(this.Y.description),c.dc(this.Y,!0),this.Y=c,this.xF();if(this.Qa<=this.ta)if(a.T.NU(c)){if(0>=
this.Qa&&(c=new a.h,this.Y.s(c),c.N()<=2*-this.Qa||c.fa()<=2*this.Qa))return new a.Ia(this.Y.description)}else return new a.Ia(this.Y.description);switch(this.Y.G()){case 33:return this.RP();case 550:return this.QP();case 1607:return this.TP();case 1736:return this.SP();case 197:return this.OP();default:throw a.f.ya();}};k.prototype.TP=function(){if(this.PH(this.Y)){var e=new a.Wa;this.Y.Ae(0,e);var d=new a.h;this.Y.s(d);e.rb(d.Wf());return this.qv(e)}this.Y=this.NW(this.Y);e=new c(this,this.cr);
return a.ei.local().V(e,this.ek,this.lc).next()};k.prototype.SP=function(){if(0==this.Qa)return this.Y;var c=a.Lm.local();this.Qv();this.Y=c.V(this.Y,null,!1,this.lc);if(0>this.Qa){var d=this.Y,d=this.Vy(d,0,d.aa());return c.V(d,this.ek,!1,this.lc)}if(this.PH(this.Y))return c=new a.Wa,this.Y.Ae(0,c),d=new a.h,this.Y.s(d),c.rb(d.Wf()),this.qv(c);c=new e(this);return a.ei.local().V(c,this.ek,this.lc).next()};k.prototype.Vy=function(c,e,d){for(var r=new a.Ia(c.description);e<d;e++)if(!(1>c.Ka(e))){var v=
c.Tm(e),l=new a.h;c.ik(e,l);if(0<this.Qa)if(0<v)if(this.QH(c,e))v=new a.Wa,c.Ae(c.wa(e),v),v.rb(l.Wf()),this.hv(r,v);else{var b=v=new a.Ua(c.description),b=a.Iu.UH(this.Y,e)||2==this.to(this.Y,e,b,!0,1)?this.vF(c,e):this.so(v);r.add(b,!1)}else{if(!(l.N()+this.ta<=2*this.vb||l.fa()+this.ta<=2*this.vb||(b=v=new a.Ua(c.description),this.to(this.Y,e,b,!0,1),v.u()))){var G=new a.h;G.I(l);G.O(this.vb,this.vb);b.oq(G);b=this.so(v);l=1;for(v=b.aa();l<v;l++)r.Ti(b,l,!0)}}else if(0<v){if(!(l.N()+this.ta<=2*
this.vb||l.fa()+this.ta<=2*this.vb||(b=v=new a.Ua(c.description),this.to(this.Y,e,b,!0,-1),v.u())))for(G=new a.h,b.ac(G),G.O(this.vb,this.vb),b.oq(G),b=this.so(v),l=1,v=b.aa();l<v;l++)r.Ti(b,l,!0)}else for(b=v=new a.Ua(c.description),this.to(this.Y,e,b,!0,-1),b=this.so(v),l=0,v=b.aa();l<v;l++)r.Ti(b,l,!0)}if(0<this.Qa)return 1<r.aa()?r=this.so(r):k.We(r);c=new a.h;r.ac(c);if(r.u())return k.We(r);c.O(this.vb,this.vb);r.oq(c);r=this.so(r);c=new a.Ia(r.description);l=1;for(v=r.aa();l<v;l++)c.Ti(r,l,
!1);return k.We(c)};k.prototype.RP=function(){return this.qv(this.Y)};k.prototype.qv=function(c){var e=new a.Ia(this.Y.description);this.hv(e,c);return this.mY(e)};k.prototype.QP=function(){var c=new d(this.Y,this.Qa,this.ek,this.Xk,this.sr,this.lc);return a.ei.local().V(c,this.ek,this.lc).next()};k.prototype.OP=function(){var c=new a.Ia(this.Y.description);if(0>=this.Qa){if(0==this.Qa)c.jd(this.Y,!1);else{var e=new a.ci;this.Y.Rn(e);e.O(this.Qa,this.Qa);c.jd(e,!1)}return c}c.jd(this.Y,!1);this.Y=
c;return this.vF(c,0)};k.prototype.vF=function(c,e){this.Qv();var d=new a.Ia(c.description),r=new a.b,v=new a.b,l=new a.b,b=new a.b,G=new a.b,f=new a.b,g=new a.b,h=new a.b,m=c.Ka(e),z=c.wa(e),n=0;for(e=c.Ka(e);n<e;n++){c.w(z+n,v);c.w(z+(n+1)%m,b);c.w(z+(n+2)%m,f);g.zc(b,v);if(0==g.length())throw a.f.ya();g.tw();g.normalize();g.scale(this.vb);r.add(g,v);l.add(g,b);0==n?d.yu(r):d.aj(r);d.aj(l);h.zc(f,b);if(0==h.length())throw a.f.ya();h.tw();h.normalize();h.scale(this.vb);G.add(h,b);this.WE(d,b,l,G,
!1)}return k.We(d)};k.prototype.wF=function(c,e,d){this.Qv();if(1>c.Ka(e))return null;if(this.QH(c,e)&&0<this.Qa){d=new a.Wa;c.Ae(c.wa(e),d);var k=new a.h;c.ik(e,k);d.rb(k.Wf());return this.qv(d)}k=new a.Ua(c.description);if(c.Eo(e))this.to(c,e,k,d,1),this.to(c,e,k,d,-1);else{var r=new a.Ua(c.description);r.Ti(c,e,!1);r.As(c,e,0,c.dw(e),!1);this.to(r,0,k,d,1)}return this.so(k)};k.prototype.Or=function(){this.jx++};k.prototype.so=function(c){return a.Dg.ol(c,this.Ut,!0,!0,this.lc)};k.prototype.BF=
function(){if(0==this.Xk)return this.sr;var c=1-this.Xk*Math.abs(this.ww),e;-1>c?e=4:e=2*Math.PI/Math.acos(c)+.5;4>e?e=4:e>this.sr&&(e=this.sr);return a.J.truncate(e)};k.prototype.WE=function(c,e,d,k,r){this.Qv();var v=new a.b;v.zc(d,e);v.scale(this.ww);var l=new a.b;l.zc(k,e);l.scale(this.ww);v=Math.atan2(v.y,v.x)/this.VA;0>v&&(v=this.Wd.length+v);v=this.Wd.length-v;l=Math.atan2(l.y,l.x)/this.VA;0>l&&(l=this.Wd.length+l);l=this.Wd.length-l;l<v&&(l+=this.Wd.length);var b=a.J.truncate(l),l=a.J.truncate(Math.ceil(v)),
v=new a.b;v.L(this.Wd[l%this.Wd.length]);v.qu(this.vb,e);var G=10*this.ta;v.sub(d);v.length()<G&&(l+=1);v.L(this.Wd[b%this.Wd.length]);v.qu(this.vb,e);v.sub(k);v.length()<G&&--b;d=b-l;d++;b=0;for(l%=this.Wd.length;b<d;b++,l=(l+1)%this.Wd.length)v.L(this.Wd[l]),v.qu(this.vb,e),c.aj(v),this.Or();r&&c.aj(k)};k.prototype.to=function(c,e,d,k,r){var v=new a.fd,l=v.jP(c,e);v.zq(this.YA,!1,!1);if(2>v.D(l)){if(0>r)return 1;r=c;v=new a.Wa;r.Ae(r.wa(e),v);this.hv(d,v);return 1}var G=v.Aa(v.cb(v.Pb(l))),f=new a.Hd;
f.Ag(-G.x,-G.y);v.Xc(f);if(k&&(this.nS(v,l,r),2>v.D(l))){if(0>r)return 1;r=c;v=new a.Wa;r.Ae(r.wa(e),v);this.hv(d,v);return 1}this.te.length=0;var g=v.Pb(l);e=v.cb(g);var J=1==r?v.Ra(e):v.U(e);c=1==r?v.U(e):v.Ra(e);var h=!0;k=new a.b;for(var l=new a.b,L=new a.b,m=new a.b,z=new a.b,n=new a.b,U=new a.b,p=new a.b,u=new a.b,t=new a.b,q=this.vb,g=v.Ka(g),y=0;y<g;y++)v.w(c,l),h&&(v.w(e,k),v.w(J,L),p.zc(k,L),p.normalize(),t.$H(p),t.scale(q),m.add(t,k)),U.zc(l,k),U.normalize(),u.$H(U),u.scale(q),z.add(k,
u),J=p.Ui(U),h=p.oi(U),0>J||0>h&&0==J?this.te.push(b.Dv(m,z,k,2,this.te.length+1,this.te.length-1)):m.ub(z)||(this.te.push(b.pa(m,k,this.te.length+1,this.te.length-1,"dummy")),this.te.push(b.pa(k,z,this.te.length+1,this.te.length-1,"dummy"))),n.add(l,u),this.te.push(b.Dv(z,n,k,1,this.te.length+1,this.te.length-1)),m.L(n),t.L(u),L.L(k),k.L(l),p.L(U),J=e,e=c,h=!1,c=1==r?v.U(e):v.Ra(e);this.te[this.te.length-1].Nh=0;this.te[0].Qh=this.te.length-1;this.PW(d);f.Ag(G.x,G.y);d.jF(f,d.aa()-1);return 1};k.prototype.PW=
function(c){for(var a=this.BQ(),e=!0,d=a+1,k=a;d!=a;k=d){var r=this.te[k],d=-1!=r.Nh?r.Nh:(k+1)%this.te.length;0!=r.qp&&(e&&c.yu(r.vn),2==r.qp?this.WE(c,r.Nw,r.vn,r.Jn,!0):c.aj(r.Jn),e=!1)}};k.prototype.BQ=function(){null==this.Et&&(this.Et=[null,null,null,null,null,null,null,null,null]);for(var c=0,e=0,d=this.te.length;e<d;){var k=this.te[e];if(0!=(k.qp&3)){c=e;break}e=k.Nh}d=c+1;for(e=c;d!=c;e=d){for(var k=this.te[e],d=k.Nh,r=1,l=null;d!=e;){l=this.te[d];if(0!=(l.qp&3))break;d=l.Nh;r++}1!=r&&1==
(k.qp&l.qp)&&(null==this.Ft&&(this.Ft=new a.Hb,this.Yw=new a.Hb),this.Ft.Mc(k.vn),this.Ft.Zc(k.Jn),this.Yw.Mc(l.vn),this.Yw.Zc(l.Jn),1==this.Ft.Ma(this.Yw,this.Et,null,null,this.Ut)&&(k.Jn.L(this.Et[0]),l.vn.L(this.Et[0]),k.Nh=d,l.Qh=e))}return c};k.prototype.rw=function(c,e,d){var k=new a.b;k.zc(d,c);d=k.length();d=this.vb*this.vb-d*d*.25;if(0<d){d=Math.sqrt(d);k.normalize();k.Tr();var r=new a.b;r.zc(e,c);if(r.oi(k)+d>=this.vb)return!0}return!1};k.prototype.nS=function(c,e,d){for(var k=0;1>k;k++){var r=
!1,l=c.Pb(e),v=c.Ka(l);if(0==v)break;var b=v;if(3>v)break;!c.Qb(l)&&(b=v-1);for(var l=c.cb(l),v=0<d?c.Ra(l):c.U(l),G=0<d?c.U(l):c.Ra(l),f=v,g=!0,J=new a.b,h=new a.b,m=new a.b,z=new a.b,n=new a.b,p=a.b.pa(0,0),u=new a.b,t=new a.b,q=new a.b,y=new a.b,x=this.vb,A=0,w=0;w<b;){c.w(G,h);g&&(c.w(l,J),c.w(v,m),f=v);t.zc(J,m);t.normalize();u.zc(h,J);u.normalize();if(f==G)break;var C=t.Ui(u),D=t.oi(u),F=!0;0>C||0>D&&0==C||!this.rw(m,J,h)||(p.L(h),F=!1,++A,r=!0);if(F){if(0<A)for(;;){C=0<d?c.Ra(f):c.U(f);if(C==
l)break;c.w(C,z);if(this.rw(z,m,p))m.L(z),f=C,F=!1,++A;else{C!=G&&this.rw(z,m,h)&&this.rw(z,J,h)&&(m.L(z),f=C,F=!1,++A);break}}if(!F)continue;if(0<A){f=0<d?c.Ra(v):c.U(v);for(g=1;g<A;g++)F=0<d?c.Ra(f):c.U(f),c.td(f,!0),f=F;q.zc(J,m);A=q.length();A=x*x-A*A*.25;A=Math.sqrt(A);x-A>.5*this.Xk?(n.add(m,J),n.scale(.5),q.normalize(),q.Tr(),y.L(q),y.scale(x-A),n.add(y),c.Qf(v,n)):c.td(v,!0);A=0}m.L(J);f=l}J.L(h);v=l;l=G;G=0<d?c.U(l):c.Ra(l);w++;g=!1}if(0<A){f=0<d?c.Ra(v):c.U(v);for(g=1;g<A;g++)F=0<d?c.Ra(f):
c.U(f),c.td(f,!0),f=F;n.add(m,J);n.scale(.5);q.zc(J,m);A=q.length();A=x*x-A*A*.25;A=Math.sqrt(A);q.normalize();q.Tr();y.L(q);y.scale(x-A);n.add(y);c.Qf(v,n)}c.zq(this.YA,!1,!1);if(!r)break}};k.prototype.QH=function(c,e){if(1==c.Ka(e))return!0;var d=new a.h;c.ik(e,d);return Math.max(d.N(),d.fa())<.5*this.Xk?!0:!1};k.prototype.PH=function(c){var e=new a.h;c.s(e);return Math.max(e.N(),e.fa())<.5*this.Xk?!0:!1};k.prototype.NW=function(c){c=a.FD.local().V(c,.25*this.Xk,!1,this.lc);for(var e=0,d=0,k=c.aa();d<
k;d++)e=Math.max(c.Ka(d),e);if(32>e)return this.cr=!1,c;this.cr=!0;return a.Dg.ol(c,this.Ut,!1,!0,this.lc)};k.prototype.hv=function(c,e){e=e.w();if(null!=this.Wd&&0!==this.Wd.length){var d=new a.b;d.L(this.Wd[0]);d.qu(this.vb,e);c.yu(d);for(var k=1,r=this.Wd.length;k<r;k++)d.L(this.Wd[k]),d.qu(this.vb,e),c.aj(d)}else for(var k=this.BF(),d=a.J.truncate((k+3)/4),k=.5*Math.PI/d,r=Math.cos(k),l=Math.sin(k),v=new a.b,b=3;0<=b;b--){v.ka(0,this.vb);switch(b){case 0:for(k=0;k<d;k++)c.Wj(v.x+e.x,v.y+e.y),
v.pu(r,l);break;case 1:for(k=0;k<d;k++)c.Wj(-v.y+e.x,v.x+e.y),v.pu(r,l);break;case 2:for(k=0;k<d;k++)c.Wj(-v.x+e.x,-v.y+e.y),v.pu(r,l);break;default:for(c.Zx(v.y+e.x,-v.x+e.y),k=1;k<d;k++)v.pu(r,l),c.Wj(v.y+e.x,-v.x+e.y)}this.Or()}};k.We=function(c){c.Zg(1,0);return c};k.prototype.mY=function(c){c.Zg(2,this.ta);c.Al();return c};return k}();a.OL=k})(y||(y={}));(function(a){var l=function(){function l(d){this.Ga=d;this.a=new a.fd;this.od=new a.ia(0)}l.prototype.ji=function(a,c,e){switch(c){case 0:if(a.o<
e&&a.v<=e)break;else return a.o>=e?1:-1;case 1:if(a.A<e&&a.B<=e)break;else return a.A>=e?1:-1;case 2:if(a.o>=e&&a.v>e)break;else return a.v<=e?1:-1;case 3:if(!(a.A>=e&&a.B>e))return a.B<=e?1:-1}return 0};l.prototype.gz=function(a,c,e){return 1736==a.G()?this.hz(a,c,e):this.iz(a,c)};l.prototype.hz=function(d,c,e){if(0==this.Ga.N()||0==this.Ga.fa())return d.Ja();c=new a.h;d.ac(c);this.Y=this.a.Jb(d);var k=new a.h,r=new a.h,l=new a.b,b=new a.b,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0];new a.Cg;var h=
new a.Hb,m=new a.ia(0);m.yb(Math.min(100,d.D()));for(var z=!1,n=0;!z&&4>n;n++){var p=!1,u=0!=(n&1),t=0;switch(n){case 0:t=this.Ga.o;p=c.o<=t&&c.v>=t;break;case 1:t=this.Ga.A;p=c.A<=t&&c.B>=t;break;case 2:t=this.Ga.v;p=c.o<=t&&c.v>=t;break;case 3:t=this.Ga.B,p=c.A<=t&&c.B>=t}if(p)for(z=!0,p=this.a.Pb(this.Y);-1!=p;){var q=-1,y=-1,x=this.a.cb(p),A=x;do{var w=this.a.ic(A);null==w&&(w=h,this.a.w(A,l),w.Mc(l),this.a.w(this.a.U(A),b),w.Zc(b));w.s(k);var C=this.ji(k,n,t),D=0,F=-1;if(-1==C){w=w.Sq(u,t,f,
g);0<w?D=this.a.zm(A,g,w):D=0;for(var D=D+1,E=A,B=this.a.U(E),w=0;w<D;w++){this.a.w(E,l);this.a.w(B,b);F=this.a.ic(E);null==F&&(F=h,F.Mc(l),F.Zc(b));F.s(r);F=this.ji(r,n,t);if(-1==F){if(u)F=Math.abs(l.y-t),R=Math.abs(b.y-t),F<R?(l.y=t,this.a.Qf(E,l)):(b.y=t,this.a.Qf(B,b));else{var F=Math.abs(l.x-t),R=Math.abs(b.x-t);F<R?(l.x=t,this.a.Qf(E,l)):(b.x=t,this.a.Qf(B,b))}F=this.a.ic(E);null==F&&(F=h,F.Mc(l),F.Zc(b));F.s(r);F=this.ji(r,n,t)}R=q;q=F;-1==y&&(y=q);if(0!=R||1!=q)1==R&&0==q||0!=R||0!=q||m.add(E);
1==q&&(z=!1);F=E=B;B=this.a.U(B)}}if(0==D){R=q;q=C;-1==y&&(y=q);if(0!=R||1!=q)1==R&&0==q||0!=R||0!=q||m.add(A);1==q&&(z=!1);F=this.a.U(A)}A=F}while(A!=x);0==y&&0==q&&m.add(x);w=0;for(q=m.size;w<q;w++)y=m.get(w),this.a.td(y,!1);m.clear(!1);p=3>this.a.Ka(p)?this.a.Qr(p):this.a.Sb(p)}}if(z)return d.Ja();this.eC();0<e&&this.uz(e);return this.a.Se(this.Y)};l.prototype.iz=function(d){var c=new a.h,e=new a.h,k=[0,0,0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0,0,0],l=new a.Cg,b=d,f=new a.h;d.ac(f);for(var g=0;4>g;g++){var h=
!1,m=0!=(g&1),z=0;switch(g){case 0:z=this.Ga.o;h=f.o<=z&&f.v>=z;break;case 1:z=this.Ga.A;h=f.A<=z&&f.B>=z;break;case 2:z=this.Ga.v;h=f.o<=z&&f.v>=z;break;case 3:z=this.Ga.B,h=f.A<=z&&f.B>=z}if(h){h=b;b=d.Ja();h=h.Da();h.yj();for(var n,p=new a.b;h.Ya();)for(var u,t=!0;h.Ca();){var q=h.ba();q.s(c);var y=this.ji(c,g,z);if(-1==y){if(y=q.Sq(m,z,k,r),0<y){var x=0;n=q.ec();for(var A=0;A<=y;A++)if(u=A<y?r[A]:1,x!=u){q.yh(x,u,l);var w=l.get();w.Mc(n);A<y&&(m?(p.x=k[A],p.y=z):(p.x=z,p.y=k[A]),w.Zc(p));w.s(e);
var C=this.ji(e,g,z);if(-1==C){n=w.ec();x=w.Cc();if(m)C=Math.abs(n.y-z),D=Math.abs(x.y-z),C<D?(n.y=z,w.Mc(n)):(x.y=z,w.Zc(x));else{var C=Math.abs(n.x-z),D=Math.abs(x.x-z);C<D?(n.x=z,w.Mc(n)):(x.x=z,w.Zc(x))}w.s(e);C=this.ji(e,g,z)}n=w.Cc();x=u;u=C;1==u?(b.dc(w,t),t=!1):t=!0}}}else u=y,1==u?(b.dc(q,t),t=!1):t=!0}}}return b};l.prototype.eC=function(){this.Ki=-1;this.Am(!1,this.Ga.o);this.Am(!1,this.Ga.v);this.Am(!0,this.Ga.A);this.Am(!0,this.Ga.B);this.od.resize(0);this.od.yb(100);this.Ki=this.a.Vd();
for(var d=new a.b,c=this.a.Pb(this.Y);-1!=c;c=this.a.Sb(c))for(var e=this.a.cb(c),k=0,r=this.a.Ka(c);k<r;k++,e=this.a.U(e))if(this.a.w(e,d),this.Ga.o==d.x||this.Ga.v==d.x||this.Ga.A==d.y||this.Ga.B==d.y)this.a.Va(e,this.Ki,this.od.size),this.od.add(e);this.sm(!1,this.Ga.o);this.sm(!1,this.Ga.v);this.sm(!0,this.Ga.A);this.sm(!0,this.Ga.B);this.Bz()};l.prototype.uz=function(d){for(var c=new a.b,e=new a.b,k=a.J.gf(2048,0),r=this.a.Pb(this.Y);-1!=r;r=this.a.Sb(r)){var l=this.a.cb(r),b=l;do{var f=this.a.U(b);
this.a.w(b,c);var g=-1;c.x==this.Ga.o?(this.a.w(f,e),e.x==this.Ga.o&&(g=1)):c.x==this.Ga.v&&(this.a.w(f,e),e.x==this.Ga.v&&(g=1));c.y==this.Ga.A?(this.a.w(f,e),e.y==this.Ga.A&&(g=0)):c.y==this.Ga.B&&(this.a.w(f,e),e.y==this.Ga.B&&(g=0));if(-1!=g&&(g=a.b.Cb(c,e),g=a.J.truncate(Math.min(Math.ceil(g/d),2048)),!(1>=g))){for(var h=1;h<g;h++)k[h-1]=1*h/g;this.a.zm(b,k,g-1)}b=f}while(b!=l)}};l.prototype.Am=function(d,c){var e=this.a.Vd(),k=new a.b,r=new a.ia(0);r.yb(100);for(var l=this.a.Pb(this.Y);-1!=
l;l=this.a.Sb(l))for(var b=this.a.cb(l),f=0,g=this.a.Ka(l);f<g;f++){var h=this.a.U(b);this.a.w(b,k);if(d?k.y==c:k.x==c)if(this.a.w(h,k),d?k.y==c:k.x==c)1!=this.a.Sa(b,e)&&(r.add(b),this.a.Va(b,e,1)),1!=this.a.Sa(h,e)&&(r.add(h),this.a.Va(h,e,1));b=h}this.a.ke(e);if(!(3>r.size)){var m=this;r.Gd(0,r.size,function(c,a){return m.ki(c,a)});e=new a.b;l=new a.b;b=new a.b;l.$c();for(var z=-1,f=new a.ia(0),g=new a.ia(0),h=this.a.Vd(),n=this.a.Vd(),p=0,u=r.size;p<u;p++){var t=r.get(p);this.a.w(t,k);if(!k.ub(l)){if(-1!=
z){for(var q=z;q<p;q++){var z=r.get(q),y=this.a.U(z),t=this.a.Ra(z),x=!1;0>this.ki(z,y)&&(this.a.w(y,e),d?e.y==c:e.x==c)&&(f.add(z),x=!0,this.a.Va(z,n,1));0>this.ki(z,t)&&(this.a.w(t,e),d?e.y==c:e.x==c)&&(x||f.add(z),this.a.Va(z,h,1))}q=0;for(x=f.size;q<x;q++){z=f.get(q);t=this.a.Sa(z,h);y=this.a.Sa(z,n);if(1==t){t=this.a.Ra(z);this.a.w(t,b);var A=[0];A[0]=0;if(!b.ub(k)){var w=a.b.Cb(l,b);A[0]=a.b.Cb(b,k)/w;0==A[0]?A[0]=2.220446049250313E-16:1==A[0]&&(A[0]=.9999999999999998);this.a.zm(t,A,1);t=this.a.Ra(z);
this.a.Qf(t,k);g.add(t);this.a.Va(t,h,1);this.a.Va(t,n,-1)}}1==y&&(y=this.a.U(z),this.a.w(y,b),A=[0],A[0]=0,b.ub(k)||(w=a.b.Cb(l,b),A[0]=a.b.Cb(l,k)/w,0==A[0]?A[0]=2.220446049250313E-16:1==A[0]&&(A[0]=.9999999999999998),this.a.zm(z,A,1),t=this.a.U(z),this.a.Qf(t,k),g.add(t),this.a.Va(t,h,-1),this.a.Va(t,n,1)))}z=f;f=g;g=z;g.clear(!1)}z=p;l.L(k)}}this.a.ke(h);this.a.ke(n)}};l.prototype.sm=function(d,c){var e=new a.b,k=new a.ia(0);k.yb(100);for(var r=this.a.Vd(),l=0,b=this.od.size;l<b;l++){var f=this.od.get(l);
if(-1!=f){var g=this.a.U(f);this.a.w(f,e);if(d?e.y==c:e.x==c)if(this.a.w(g,e),d?e.y==c:e.x==c)-2!=this.a.Sa(f,r)&&(k.add(f),this.a.Va(f,r,-2)),-2!=this.a.Sa(g,r)&&(k.add(g),this.a.Va(g,r,-2))}}if(0!=k.size){var h=this;k.Gd(0,k.size,function(c,a){return h.ki(c,a)});l=0;for(b=k.size;l<b;l++){var m=k.get(l);this.a.Va(m,r,l)}f=new a.b;g=new a.b;g.$c();for(var z=-1,l=0,b=k.size;l<b;l++)if(m=k.get(l),-1!=m&&(this.a.w(m,e),!e.ub(g))){if(-1!=z)for(;;){for(var m=!1,n=1<l-z?l-1:l,p=z;p<n;p++){var t=k.get(p);
if(-1!=t){var u=-1,q=this.a.U(t);0>this.ki(t,q)&&(this.a.w(q,f),d?f.y==c:f.x==c)&&(u=q);var q=-1,y=this.a.Ra(t);0>this.ki(t,y)&&(this.a.w(y,f),d?f.y==c:f.x==c)&&(q=y);if(-1!=u&&-1!=q)this.ii(t,k,r),this.a.td(t,!1),this.ii(u,k,r),this.a.td(u,!1),m=!0;else if(-1!=u||-1!=q){for(y=p+1;y<l;y++){var x=k.get(y);if(-1!=x){var A=this.a.U(x),w=-1;0>this.ki(x,A)&&(this.a.w(A,f),d?f.y==c:f.x==c)&&(w=A);var A=this.a.Ra(x),C=-1;0>this.ki(x,A)&&(this.a.w(A,f),d?f.y==c:f.x==c)&&(C=A);if(-1!=w&&-1!=C){this.ii(x,k,
r);this.a.td(x,!1);this.ii(w,k,r);this.a.td(w,!1);m=!0;break}if(-1!=u&&-1!=C){this.nu(k,t,u,x,C,r);m=!0;break}else if(-1!=q&&-1!=w){this.nu(k,x,w,t,q,r);m=!0;break}}}if(m)break}}}if(!m)break}z=l;g.L(e)}}this.a.ke(r)};l.prototype.ii=function(a,c,e){e=this.a.Sa(a,e);c.set(e,-1);e=this.a.Sa(a,this.Ki);this.od.set(e,-1);c=this.a.ld(a);-1!=c&&this.a.cb(c)==a&&(this.a.jg(c,-1),this.a.sh(c,-1))};l.prototype.nu=function(a,c,e,k,r,l){this.a.Kc(c,k);this.a.Lc(k,c);this.a.Lc(e,r);this.a.Kc(r,e);this.ii(k,a,
l);this.a.Mi(k,!1);this.ii(r,a,l);this.a.Mi(r,!0)};l.prototype.Bz=function(){for(var a=0,c=this.od.size;a<c;a++){var e=this.od.get(a);-1!=e&&this.a.Aj(e,-1)}for(var k=0,r=0,l=this.a.Pb(this.Y);-1!=l;){var b=this.a.cb(l);if(-1==b||l!=this.a.ld(b)){var f=l,l=this.a.Sb(l);this.a.jg(f,-1);this.a.Rr(f)}else{e=b;f=0;do this.a.Aj(e,l),f++,e=this.a.U(e);while(e!=b);2>=f?(e=this.a.Sa(b,this.Ki),this.od.set(e,-1),b=this.a.td(b,!1),2==f&&(e=this.a.Sa(b,this.Ki),this.od.set(e,-1),this.a.td(b,!1)),f=l,l=this.a.Sb(l),
this.a.jg(f,-1),this.a.Rr(f)):(this.a.Np(l,!1),this.a.sh(l,this.a.Ra(b)),this.a.mk(l,f),r+=f,k++,l=this.a.Sb(l))}}a=0;for(c=this.od.size;a<c;a++)if(e=this.od.get(a),-1!=e&&(l=this.a.ld(e),-1==l)){l=this.a.Yf(this.Y,-1);f=0;b=e;do this.a.Aj(e,l),f++,e=this.a.U(e);while(e!=b);2>=f?(e=this.a.Sa(b,this.Ki),this.od.set(e,-1),b=this.a.td(b,!1),2==f&&(e=this.a.Sa(b,this.Ki),0<=e&&this.od.set(e,-1),this.a.td(b,!1)),f=l,this.a.jg(f,-1),this.a.Rr(f)):(this.a.ao(l,!0),this.a.mk(l,f),this.a.jg(l,b),this.a.sh(l,
this.a.Ra(b)),this.a.Np(l,!1),r+=f,k++)}this.a.wm(this.Y,k);this.a.kk(this.Y,r);a=0;for(c=this.a.rd;-1!=c;c=this.a.Ue(c))a+=this.a.D(c);this.a.yC(a)};l.Im=function(a,c,e,k){return(new l(c)).gz(a,e,k)};l.clip=function(d,c,e,k){if(d.u())return d;if(c.u())return d.Ja();var r=d.G();if(33==r)return e=d.w(),c.contains(e)?d:d.Ja();if(197==r)return e=new a.h,d.s(e),e.Ma(c)?(c=new a.ci,d.copyTo(c),c.Gp(e),c):d.Ja();var v=new a.h;d.ac(v);if(c.contains(v))return d;if(!c.Yb(v))return d.Ja();v=d.ob;if(null!=v&&
(v=v.Hi,null!=v)){v=v.Sn(c);if(1==v){if(1736!=r)throw a.f.ya();d=new a.Ia(d.description);d.oq(c);return d}if(0==v)return d.Ja()}switch(r){case 550:k=null;for(var r=d.D(),v=d.Pa(0),b=0,f=0;f<r;f++)e=new a.b,v.fc(2*f,e),c.contains(e)||(0==b&&(k=d.Ja()),b<f&&k.Jd(d,b,f),b=f+1);0<b&&k.Jd(d,b,r);return 0==b?d:k;case 1736:case 1607:return l.Im(d,c,e,k);default:throw a.f.ya();}};l.prototype.ki=function(d,c){var e=new a.b;this.a.w(d,e);d=new a.b;this.a.w(c,d);return e.compare(d)};return l}();a.me=l})(y||
(y={}));(function(a){var l=function(){function l(d,c){this.Ga=d;this.a=new a.fd;this.od=new a.ia(0);this.je=c}l.prototype.ji=function(a,c,e){switch(c){case 0:if(a.o<e&&a.v<=e)break;else return a.o>=e?1:-1;case 1:if(a.A<e&&a.B<=e)break;else return a.A>=e?1:-1;case 2:if(a.o>=e&&a.v>e)break;else return a.v<=e?1:-1;case 3:if(!(a.A>=e&&a.B>e))return a.B<=e?1:-1}return 0};l.prototype.gz=function(a,c,e){return 1736==a.G()?this.hz(a,c,e):this.iz(a,c)};l.prototype.hz=function(d,c,e){if(0==this.Ga.N()||0==
this.Ga.fa())return d.Ja();c=new a.h;d.ac(c);this.Y=this.a.Jb(d);var k=new a.h,r=new a.h,l=new a.b,b=new a.b,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0],h=new a.Hb,m=new a.ia(0);m.yb(256);for(var z=!1,n=0;!z&&4>n;n++){var p=!1,t=0!=(n&1),u=0;switch(n){case 0:u=this.Ga.o;p=c.o<=u&&c.v>=u;break;case 1:u=this.Ga.A;p=c.A<=u&&c.B>=u;break;case 2:u=this.Ga.v;p=c.o<=u&&c.v>=u;break;case 3:u=this.Ga.B,p=c.A<=u&&c.B>=u}if(p)for(z=!0,p=this.a.Pb(this.Y);-1!=p;){var q=!0,y=-1,x=-1,A=this.a.cb(p),w=A;do{var C=
this.a.ic(w);null==C&&(C=h,this.a.w(w,l),C.Mc(l),this.a.w(this.a.U(w),b),C.Zc(b));C.s(k);var D=this.ji(k,n,u),F=0,E=-1;if(-1==D){C=C.Sq(t,u,f,g);0<C?F=this.a.DY(w,g,C):F=0;for(var F=F+1,B=w,R=this.a.U(B),C=0;C<F;C++){this.a.w(B,l);this.a.w(R,b);E=this.a.ic(B);null==E&&(E=h,E.Mc(l),E.Zc(b));E.s(r);E=this.ji(r,n,u);if(-1==E){if(t)E=Math.abs(l.y-u),I=Math.abs(b.y-u),E<I?(l.y=u,this.a.Qf(B,l)):(b.y=u,this.a.Qf(R,b));else{var E=Math.abs(l.x-u),I=Math.abs(b.x-u);E<I?(l.x=u,this.a.Qf(B,l)):(b.x=u,this.a.Qf(R,
b))}E=this.a.ic(B);null==E&&(E=h,E.Mc(l),E.Zc(b));E.s(r);E=this.ji(r,n,u)}I=y;y=E;-1==x&&(x=y);if(0!=I||1!=y)1==I&&0==y||0!=I||0!=y||m.add(B);1==y&&(q=z=!1);E=B=R;R=this.a.U(R)}}if(0==F){I=y;y=D;-1==x&&(x=y);if(0!=I||1!=y)1==I&&0==y||0!=I||0!=y||m.add(w);1==y&&(q=z=!1);E=this.a.U(w)}w=E;if(256<=m.size){C=1;for(D=m.size-1;C<D;C++)F=m.get(C),this.a.td(F,!1);m.set(1,m.Fc());m.yf(2)}}while(w!=A);if(!q)for(0==x&&0==y&&m.add(A),C=0,D=m.size;C<D;C++)F=m.get(C),this.a.td(F,!1);m.clear(!1);p=q||0==this.a.Ka(p)?
this.a.Qr(p):this.a.Sb(p)}}if(z)return d.Ja();this.eC();0<e&&this.uz(e);return this.a.Se(this.Y)};l.prototype.iz=function(d){var c=new a.h,e=new a.h,k=[0,0,0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0,0,0],l=new a.Cg,b=d,f=new a.h;d.ac(f);for(var g=new a.b,h=new a.b,m=null,z=null,n=0;4>n;n++){var p=!1,u=0!=(n&1),t=0;switch(n){case 0:t=this.Ga.o;p=f.o<=t&&f.v>=t;break;case 1:t=this.Ga.A;p=f.A<=t&&f.B>=t;break;case 2:t=this.Ga.v;p=f.o<=t&&f.v>=t;break;case 3:t=this.Ga.B,p=f.A<=t&&f.B>=t}if(p)for(p=b,b=d.Ja(),p=
p.Da(),p.yj();p.Ya();)for(var q,y=!0;p.Ca();){var x=p.ba();x.s(c);var A=this.ji(c,n,t);if(-1==A){if(A=x.Sq(u,t,k,r),0<A){var w=0;x.Oq(g);for(var C=0;C<=A;C++)if(q=C<A?r[C]:1,w!=q){x.yh(w,q,l);var D=l.get();D.Mc(g);C<A&&(u?(h.x=k[C],h.y=t):(h.x=t,h.y=k[C]),D.Zc(h));D.s(e);var F=this.ji(e,n,t);-1==F&&(null==m&&(m=new a.b),null==z&&(z=new a.b),D.Oq(m),D.Os(z),u?(w=Math.abs(m.y-t),F=Math.abs(z.y-t),w<F?(m.y=t,D.Mc(m)):(z.y=t,D.Zc(z))):(w=Math.abs(m.x-t),F=Math.abs(z.x-t),w<F?(m.x=t,D.Mc(m)):(z.x=t,D.Zc(z))),
D.s(e),F=this.ji(e,n,t));D.Os(g);w=q;q=F;1==q?(b.dc(D,y),y=!1):y=!0}}}else q=A,1==q?(b.dc(x,y),y=!1):y=!0}}return b};l.prototype.eC=function(){this.Ki=-1;this.Am(!1,this.Ga.o);this.Am(!1,this.Ga.v);this.Am(!0,this.Ga.A);this.Am(!0,this.Ga.B);this.od.resize(0);this.od.yb(100);this.Ki=this.a.Vd();for(var d=new a.b,c=this.a.Pb(this.Y);-1!=c;c=this.a.Sb(c))for(var e=this.a.cb(c),k=0,r=this.a.Ka(c);k<r;k++,e=this.a.U(e))if(this.a.w(e,d),this.Ga.o==d.x||this.Ga.v==d.x||this.Ga.A==d.y||this.Ga.B==d.y)this.a.Va(e,
this.Ki,this.od.size),this.od.add(e);this.sm(!1,this.Ga.o);this.sm(!1,this.Ga.v);this.sm(!0,this.Ga.A);this.sm(!0,this.Ga.B);this.Bz()};l.prototype.uz=function(d){for(var c=new a.b,e=new a.b,k=null,r=null,l=a.J.gf(2048,0),b=this.a.Pb(this.Y);-1!=b;b=this.a.Sb(b)){var f=this.a.cb(b),g=f;do{var h=this.a.U(g);this.a.w(g,c);var m=-1;c.x==this.Ga.o?(this.a.w(h,e),e.x==this.Ga.o&&(m=1)):c.x==this.Ga.v&&(this.a.w(h,e),e.x==this.Ga.v&&(m=1));c.y==this.Ga.A?(this.a.w(h,e),e.y==this.Ga.A&&(m=0)):c.y==this.Ga.B&&
(this.a.w(h,e),e.y==this.Ga.B&&(m=0));if(-1!=m){null==k&&(k=new a.b);null==r&&(r=new a.b);k.L(c);r.ka(0,0);if(0==m){var z=c.x-this.Ga.o;r.x=a.Ub.sign(e.x-c.x);k.x=d*a.Ub.Fl(Math.floor(Math.abs(z/d)),z)+this.Ga.o;0>k.x&&(k.x+=d)}else z=c.y-this.Ga.A,r.y=a.Ub.sign(e.y-c.y),k.y=d*a.Ub.Fl(Math.floor(Math.abs(z/d)),z)+this.Ga.A,0>k.y&&(k.y+=d);var z=0!=m?e.y-c.y:e.x-c.x,n=Math.abs(z);if(65536<n/d)throw a.f.X("internal error");if(0<n){n=a.J.truncate(n/d)+2;l.length<n&&(l=a.J.gf(n));for(var p=n=0;;p++){var t=
new a.b;t.x=k.x+r.x*p*d;t.y=k.y+r.y*p*d;t=(0!=m?t.y-c.y:t.x-c.x)/z;if(1<=t)break;0>=t||(l[n]=t,n++)}0!=n&&this.a.zm(g,l,n)}}g=h}while(g!=f)}};l.prototype.Am=function(d,c){for(var e=-1,k=new a.b,r=null,l=this.a.Pb(this.Y);-1!=l;l=this.a.Sb(l))for(var b=this.a.cb(l),f=0,g=this.a.Ka(l);f<g;f++){var h=this.a.U(b);this.a.w(b,k);if(d?k.y==c:k.x==c)if(this.a.w(h,k),d?k.y==c:k.x==c)-1==e&&(e=this.a.Vd()),null==r&&(r=new a.ia(0),r.yb(100)),1!=this.a.Sa(b,e)&&(r.add(b),this.a.Va(b,e,1)),1!=this.a.Sa(h,e)&&
(r.add(h),this.a.Va(h,e,1));b=h}-1!=e&&this.a.ke(e);if(!(null==r||3>r.size)){var m=this;r.Gd(0,r.size,function(c,a){return m.ki(c,a)});e=new a.b;l=new a.b;b=new a.b;l.$c();for(var z=-1,f=new a.ia(0),g=new a.ia(0),h=null,n=this.a.Vd(),p=this.a.Vd(),t=0,u=r.size;t<u;t++){var q=r.get(t);this.a.w(q,k);if(!k.ub(l)){if(-1!=z){for(var y=z;y<t;y++){var z=r.get(y),x=this.a.U(z),q=this.a.Ra(z),A=!1;this.a.w(x,e);0>l.compare(e)&&(d?e.y==c:e.x==c)&&(f.add(z),A=!0,this.a.Va(z,p,1));this.a.w(q,e);0>l.compare(e)&&
(d?e.y==c:e.x==c)&&(A||f.add(z),this.a.Va(z,n,1))}y=0;for(A=f.size;y<A;y++){z=f.get(y);q=this.a.Sa(z,n);x=this.a.Sa(z,p);if(1==q&&(q=this.a.Ra(z),this.a.w(q,b),!b.ub(k))){null==h&&(h=[]);var w=a.b.Cb(l,b);h[0]=a.b.Cb(b,k)/w;0==h[0]?h[0]=2.220446049250313E-16:1==h[0]&&(h[0]=.9999999999999998);this.a.zm(q,h,1);q=this.a.Ra(z);this.a.Qf(q,k);g.add(q);this.a.Va(q,n,1);this.a.Va(q,p,-1)}1==x&&(x=this.a.U(z),this.a.w(x,b),b.ub(k)||(null==h&&(h=[]),w=a.b.Cb(l,b),h[0]=a.b.Cb(l,k)/w,0==h[0]?h[0]=2.220446049250313E-16:
1==h[0]&&(h[0]=.9999999999999998),this.a.zm(z,h,1),q=this.a.U(z),this.a.Qf(q,k),g.add(q),this.a.Va(q,n,-1),this.a.Va(q,p,1)))}z=f;f=g;g=z;g.clear(!1)}z=t;l.L(k)}}this.a.ke(n);this.a.ke(p)}};l.prototype.sm=function(d,c){for(var e=new a.b,k=null,r=-1,l=0,b=this.od.size;l<b;l++){var f=this.od.get(l);if(-1!=f){var g=this.a.U(f);this.a.w(f,e);if(d?e.y==c:e.x==c)if(this.a.w(g,e),d?e.y==c:e.x==c)-1==r&&(r=this.a.Vd()),null==k&&(k=new a.ia(0),k.yb(100)),-2!=this.a.Sa(f,r)&&(k.add(f),this.a.Va(f,r,-2)),-2!=
this.a.Sa(g,r)&&(k.add(g),this.a.Va(g,r,-2))}}if(null==k)-1!=r&&this.a.ke(r);else{var h=this;k.Gd(0,k.size,function(c,a){return h.ki(c,a)});l=0;for(b=k.size;l<b;l++){var m=k.get(l);this.a.Va(m,r,l)}f=new a.b;g=new a.b;g.$c();for(var z=-1,l=0,b=k.size;l<b;l++)if(m=k.get(l),-1!=m&&(this.a.w(m,e),!e.ub(g))){if(-1!=z)for(;;){for(var m=!1,n=1<l-z?l-1:l,p=z;p<n;p++){var t=k.get(p);if(-1!=t){var u=-1,q=this.a.U(t);this.a.w(q,f);0>g.compare(f)&&(d?f.y==c:f.x==c)&&(u=q);var q=-1,y=this.a.Ra(t);this.a.w(y,
f);0>g.compare(f)&&(d?f.y==c:f.x==c)&&(q=y);if(-1!=u&&-1!=q)this.ii(t,k,r),this.a.td(t,!1),this.ii(u,k,r),this.a.td(u,!1),m=!0;else if(-1!=u||-1!=q){for(y=p+1;y<l;y++){var x=k.get(y);if(-1!=x){var A=this.a.U(x),w=-1;this.a.w(A,f);0>g.compare(f)&&(d?f.y==c:f.x==c)&&(w=A);var A=this.a.Ra(x),C=-1;this.a.w(A,f);0>g.compare(f)&&(d?f.y==c:f.x==c)&&(C=A);if(-1!=w&&-1!=C){this.ii(x,k,r);this.a.td(x,!1);this.ii(w,k,r);this.a.td(w,!1);m=!0;break}if(-1!=u&&-1!=C){this.nu(k,t,u,x,C,r);m=!0;break}else if(-1!=
q&&-1!=w){this.nu(k,x,w,t,q,r);m=!0;break}}}if(m)break}}}if(!m)break}z=l;g.L(e)}this.a.ke(r)}};l.prototype.ii=function(a,c,e){e=this.a.Sa(a,e);c.set(e,-1);e=this.a.Sa(a,this.Ki);this.od.set(e,-1);c=this.a.ld(a);-1!=c&&this.a.cb(c)==a&&(this.a.jg(c,-1),this.a.sh(c,-1))};l.prototype.nu=function(a,c,e,k,r,l){this.a.Kc(c,k);this.a.Lc(k,c);this.a.Lc(e,r);this.a.Kc(r,e);this.ii(k,a,l);this.a.Mi(k,!1);this.ii(r,a,l);this.a.Mi(r,!0)};l.prototype.Bz=function(){for(var a=0,c=this.od.size;a<c;a++){var e=this.od.get(a);
-1!=e&&this.a.Aj(e,-1)}for(var k=0,r=0,l=this.a.Pb(this.Y);-1!=l;){var b=this.a.cb(l);if(-1==b||l!=this.a.ld(b)){var f=l,l=this.a.Sb(l);this.a.jg(f,-1);this.a.Rr(f)}else{e=b;f=0;do this.a.Aj(e,l),f++,e=this.a.U(e);while(e!=b);this.a.Np(l,!1);this.a.sh(l,this.a.Ra(b));this.a.mk(l,f);r+=f;k++;l=this.a.Sb(l)}}a=0;for(c=this.od.size;a<c;a++)if(e=this.od.get(a),-1!=e&&(l=this.a.ld(e),-1==l)){l=this.a.Yf(this.Y,-1);f=0;b=e;do this.a.Aj(e,l),f++,e=this.a.U(e);while(e!=b);2>=f?(e=this.a.Sa(b,this.Ki),this.od.set(e,
-1),b=this.a.td(b,!1),2==f&&(e=this.a.Sa(b,this.Ki),0<=e&&this.od.set(e,-1),this.a.td(b,!1)),f=l,this.a.jg(f,-1),this.a.Rr(f)):(this.a.ao(l,!0),this.a.mk(l,f),this.a.jg(l,b),this.a.sh(l,this.a.Ra(b)),this.a.Np(l,!1),r+=f,k++)}this.a.wm(this.Y,k);this.a.kk(this.Y,r);a=0;for(c=this.a.rd;-1!=c;c=this.a.Ue(c))a+=this.a.D(c);this.a.yC(a)};l.We=function(a,c,e,k,r){return(new l(c,r)).gz(a,e,k)};l.clip=function(a,c,e,k,r){return l.rq(a,c,null,e,k,r)};l.rq=function(d,c,e,k,r,b){var v=d.G();if(33==v)return r=
d.w(),c.contains(r)?d:d.Ja();if(197==v)return r=new a.h,d.s(r),r.Ma(c)?(c=new a.ci,d.copyTo(c),c.Gp(r),c):d.Ja();if(d.u())return d;if(c.u())return d.Ja();var f=new a.h;d.ac(f);if(c.contains(f))return d;if(!c.Yb(f))return d.Ja();if(null!=e||isNaN(k))k=a.ma.Yy(e,c,!1);if(!a.T.gh(v))throw a.f.F();e=d.ob;if(null!=e&&(e=e.Hi,null!=e)){e=e.Sn(c);if(1==e){if(1736!=v)throw a.f.X("internal error");d=new a.Ia(d.description);d.oq(c);return d}if(0==e)return d.Ja()}switch(v){case 550:b=null;v=d.D();k=d.Pa(0);
e=0;r=new a.b;for(f=0;f<v;f++)k.fc(2*f,r),c.contains(r)||(0==e&&(b=d.Ja()),e<f&&b.Jd(d,e,f),e=f+1);0<e&&b.Jd(d,e,v);return 0==e?d:b;case 1736:case 1607:return l.We(d,c,k,r,b);default:throw a.f.X("internal error");}};l.prototype.ki=function(d,c){var e=new a.b;this.a.w(d,e);d=new a.b;this.a.w(c,d);return e.compare(d)};return l}();a.uh=l})(y||(y={}));(function(a){var l=new a.b,b=function(){function c(c,d,r,l,b){this.Dn=new a.b;this.fl=new a.b;this.oj=new a.b;this.a=c;this.ox=r;this.ap=l;this.Dn=d;this.dm=
b;this.fl.$c();this.oj.$c()}c.prototype.FF=function(c){this.a.w(c,this.fl);c=a.J.truncate((this.fl.x-this.Dn.x)*this.ap+.5);var e=a.J.truncate((this.fl.y-this.Dn.y)*this.ap+.5);return d.uH(c,e)};c.prototype.Uz=function(c){return this.a.Sa(c,this.dm)};c.prototype.yz=function(c,a){this.a.w(c,this.fl);this.a.w(a,this.oj);return d.ow(this.fl.x,this.fl.y,this.oj.x,this.oj.y,this.ox)};return c}();a.DZ=function(){return function(){}}();var d=function(){function c(){this.Dn=new a.b;this.dr=[0,0,0,0];this.st=
[0,0,0,0];this.ep=this.dm=-1}c.aS=function(a,d){var e=new c;e.a=a;e.ta=d;e.ox=d*d;e.Mw=2*d;e.ap=1/e.Mw;return e.DQ()};c.ow=function(c,a,d,l,b){c-=d;a-=l;return c*c+a*a<=b};c.uH=function(c,d){return a.J.dh(d,a.J.dh(c))};c.prototype.FQ=function(e,d){this.a.Nc(e,l);for(var k=(l.y-this.Dn.y)*this.ap,b=a.J.truncate((l.x-this.Dn.x)*this.ap),f=a.J.truncate(k),g=k=0;1>=g;g+=1)for(var h=0;1>=h;h+=1){var m=c.uH(b+g,f+h),z=this.cm.gT(m);-1!=z&&(this.dr[k]=z,this.st[k]=m,k++)}for(b=k-1;1<=b;b--)for(z=this.dr[b],
f=b-1;0<=f;f--)if(z==this.dr[f]){this.st[f]=-1;k--;b!=k&&(this.st[b]=this.st[k],this.dr[b]=this.dr[k]);break}for(f=0;f<k;f++)this.GQ(e,this.st[f],l,this.dr[f],d)};c.prototype.GQ=function(e,d,r,l,b){for(var k=new a.b;-1!=l;l=this.cm.wT(l)){var v=this.cm.ja(l);e==v||-1!=d&&this.a.Sa(v,this.dm)!=d||(this.a.Nc(v,k),c.ow(r.x,r.y,k.x,k.y,this.ox)&&b.add(l))}};c.prototype.Mn=function(c,a,d){var e=this.a.Sa(c,this.ep),k=this.a.Sa(a,this.ep);-1==e&&(e=this.Pd.mi(),this.Pd.addElement(e,c),this.a.Va(c,this.ep,
e));-1==k?this.Pd.addElement(e,a):this.Pd.lz(e,k);this.a.Va(a,this.ep,-2);a=this.VV(c,a);d&&(d=this.Xw.FF(c),this.a.Va(c,this.dm,d));return a};c.UV=function(e,d,r){e.Eb(d);r=e;var k=new a.b;c.EX(e.w(),d.w(),k);r.rb(k)};c.EX=function(c,a,d){var e=c.x;c.x!=a.x&&(e=(1*c.x+1*a.x)/2);var k=c.y;c.y!=a.y&&(k=(1*c.y+1*a.y)/2);d.ka(e,k)};c.prototype.VV=function(c,d){var e=new a.b;this.a.w(c,e);var k=new a.b;this.a.w(d,k);var l=this.a.nH(c);d=this.a.nH(d);var b=l+d,f=0,g=e.x;e.x!=k.x&&(g=(e.x*l+k.x*d)/b,f++);
var h=e.y;e.y!=k.y&&(h=(e.y*l+k.y*d)/b,f++);0<f&&this.a.rb(c,g,h);this.a.pY(c,b);return 0!=f};c.prototype.DQ=function(){var c=this.a.ud,d=this.a.SG();this.Dn=d.Xz();d=Math.max(d.fa(),d.N())/2147483646;this.Mw<d&&(this.Mw=d,this.ap=1/this.Mw);this.Pd=new a.Ku;this.Pd.ou(a.J.truncate(this.a.ud/3+1));this.Pd.Wn(a.J.truncate(this.a.ud/3+1));this.dm=this.a.Vd();this.ep=this.a.Vd();this.Xw=new b(this.a,this.Dn,this.ox,this.ap,this.dm);this.cm=new a.DM(a.J.truncate(4*c/3),this.Xw);this.cm.wX(this.a.ud);
c=!1;for(d=this.a.rd;-1!=d;d=this.a.Ue(d))for(var r=this.a.Pb(d);-1!=r;r=this.a.Sb(r))for(var l=this.a.cb(r),f=0,g=this.a.Ka(r);f<g;f++){var h=this.Xw.FF(l);this.a.Va(l,this.dm,h);this.cm.addElement(l,h);l=this.a.U(l)}var m=new a.ia(0);m.yb(10);for(d=this.a.rd;-1!=d;d=this.a.Ue(d))for(r=this.a.Pb(d);-1!=r;r=this.a.Sb(r))for(l=this.a.cb(r),f=0,g=this.a.Ka(r);f<g;f++){if(-2!=this.a.Sa(l,this.ep))for(h=this.a.Sa(l,this.dm),this.cm.kd(l,h);;){this.FQ(l,m);if(0==m.size)break;for(var h=!1,z=0,n=m.size;z<
n;z++){var p=m.get(z),t=this.cm.ja(p);this.cm.Ld(p);h=this.Mn(l,t,z+1==n)||h}c=c||h;m.clear(!1);if(!h)break}l=this.a.U(l)}c&&this.wP();this.Xw=this.cm=null;this.a.ke(this.dm);this.a.ke(this.ep);return c};c.prototype.wP=function(){for(var c=new a.b,d=this.Pd.Ge;-1!=d;d=this.Pd.aA(d)){var r=this.Pd.xc(d);this.a.w(this.Pd.ja(r),c);for(r=this.Pd.nb(r);-1!=r;r=this.Pd.nb(r))this.a.Qf(this.Pd.ja(r),c)}};return c}();a.Hu=d})(y||(y={}));(function(a){var l=function(){function l(a){void 0===a&&(a=null);this.Oe=
null;this.Fa=!1;null===a?this.Oe=[]:this.Oe=a}l.prototype.copyTo=function(d){if(d.Fa)throw a.f.X("CompositeGeographicTransformation is read-only");for(var c=0;c<this.Oe.length;c++)d.Oe.push(this.Oe[c].Vf())};l.prototype.count=function(){return this.Oe.length};l.prototype.iT=function(a){return this.Oe[a]};l.prototype.add=function(d){if(this.Fa)throw a.f.X("CompositeGeographicTransformation is read-only");this.Oe.push(d.Vf())};l.prototype.clear=function(){if(this.Fa)throw a.f.X("CompositeGeographicTransformation is read-only");
this.Oe.length=0};l.prototype.remove=function(d){if(this.Fa)throw a.f.X("CompositeGeographicTransformation is read-only");this.Oe.splice(d,1)};l.prototype.Vv=function(){for(var a=this.ne(),c=0;c<a.count();c++)a.iT(c).jt();a.Oe=a.Oe.reverse();return a};l.prototype.ne=function(){var a=new l;this.copyTo(a);return a};l.prototype.Vf=function(){return this.ne()};l.prototype.transform=function(d,c,e,k){if(d.length<c)throw a.f.X("invalid Argument");var r=e;for(e=0;e<this.Oe.length;e++){var l=this.Oe[e];if(null!=
l.dn()){var b=l.on,f=b?1:0,g=b?l.dn().getGeogcs2():l.dn().getGeogcs1(),g=g.getUnit().getUnitFactor(),g=r/g;if(3.552713678800501E-15<Math.abs(g-1))for(r=0;r<c;r++)d[r][0]*=g,d[r][1]*=g;a.OD.geogToGeog(l.dn(),c,d,null,f);r=(b?l.dn().getGeogcs1():l.dn().getGeogcs2()).getUnit().getUnitFactor()}}g=r/k;if(3.552713678800501E-15<Math.abs(g-1))for(r=0;r<c;r++)d[r][0]*=g,d[r][1]*=g;return c};l.prototype.getName=function(){if(0==this.Oe.length)return"";for(var a="",c=0,e=this.Oe.length;c<e;++c)""!==a&&(a+=" + "),
a+=this.Oe[c].getName();return a};l.prototype.Eb=function(a){if(a==this)return!0;if(!(a instanceof l)||this.Oe.length!=a.Oe.length)return!1;for(var c=0;c<this.Oe.length;c++)if(!this.Oe[c].Eb(a.Oe[c]))return!1;return!0};l.prototype.Mp=function(){this.Fa=!0};l.prototype.toString=function(){var a=toString();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a};l.create=function(){return new l};l.aq=function(d,c){var e=new l;e.add(a.io.create(d,c));return e};l.bq=function(d,
c){var e=new l;e.add(a.io.eG(d,c));return e};return l}();a.my=l})(y||(y={}));(function(a){var l=Math.PI,b=2*Math.PI,d=Math.PI/2,c=function(){function c(){}c.VQ=function(a,e){var d=new c;d.x=a;d.y=e;d.type=0;d.ui=0;return d};c.El=function(a){var e=new c;e.x=a.x;e.y=a.y;e.type=0;e.ui=0;return e};c.UQ=function(a){var e=new c;e.x=a.x;e.y=a.y;e.type=a.type;e.ui=a.ui;return e};c.ce=function(a,e,d){var k=new c;k.x=a.x+e*Math.cos(d);k.y=a.y+e*Math.sin(d);k.type=a.type;k.ui=a.ui;return k};c.Cv=function(a,
e){var d=new c;d.x=.5*(a.x+e.x);d.y=.5*(a.y+e.y);d.type=a.type;d.ui=a.ui;return d};c.YF=function(a,e){var d=new c;d.x=a.x+.001*(e.x-a.x);d.y=a.y+.001*(e.y-a.y);d.type=a.type;d.ui=a.ui;return d};return c}(),e=function(){return function(){}}();(function(c){c[c.Round=0]="Round";c[c.Bevel=1]="Bevel";c[c.Miter=2]="Miter";c[c.Square=3]="Square"})(a.IM||(a.IM={}));var k=function(){function k(c){this.rB=this.$b=this.Sg=null;this.je=c}k.V=function(c,e,d,r,l,b){if(null==c)throw a.f.F();if(1>c.tb())throw a.f.F();
if(0==e||c.u())return c;b=new k(b);b.Yo=c;b.Qa=e;b.ta=l;b.jj=d;b.hB=r;return b.zy()};k.prototype.yO=function(){var c=this.Yo,e=c.ec(),d=c.Cc(),k=new a.b;k.zc(d,e);k.normalize();k.tw();k.scale(this.Qa);e.add(k);d.add(k);k=c.Ja();c.Mc(e);c.Zc(d);return k};k.prototype.xO=function(){var c=this.Yo;if(0<this.Qa&&2!=this.jj){var e=new a.Ia;e.jd(c,!1);this.Yo=e;return this.zy()}c=new a.ci(c.R);c.O(this.Qa,this.Qa);return c};k.prototype.jK=function(c,a,e,d){return(a.x-c.x)*(d.x-e.x)+(a.y-c.y)*(d.y-e.y)};k.prototype.pc=
function(a,e){if(void 0===e)this.$b.push(a),this.Kf++;else if(0==this.Kf)this.pc(a);else{var k=this.px,r,l;r=this.Sg[0==e?k-1:e-1];l=this.Sg[e];var b=this.jK(r,l,this.$b[this.Kf-1],a);0<b?this.pc(a):0>b&&(0<this.jK(r,l,l,this.$b[this.Kf-1])?(l=this.Sg[0==e?k-2:1==e?k-1:e-2],k=c.ce(r,this.Qa,Math.atan2(r.y-l.y,r.x-l.x)-d),this.$b[this.Kf-1]=k,1==this.jj||2==this.jj?(k=c.Cv(k,r),this.pc(k),k=c.ce(r,this.Qa,this.vw+d),r=c.Cv(k,r),r.type|=256,this.pc(r)):(k=c.ce(r,this.Qa,this.vw+d),k.type|=256),this.pc(k),
this.pc(a,e)):(k=c.ce(l,this.Qa,this.vw+d),this.pc(k),1==this.jj||2==this.jj?(k=c.Cv(k,l),this.pc(k),k=c.ce(l,this.Qa,this.IA-d),r=c.Cv(k,l),r.type|=256,this.pc(r)):(k=c.ce(l,this.Qa,this.IA-d),k.type|=256),this.pc(k)))}};k.prototype.yF=function(){var e,k,r,f,g,h,m=this.px;this.Kf=0;var z=.5*this.ta,n=0,p=0;for(e=0;e<m;e++){f=this.Sg[e];g=0==e?this.Sg[m-1]:this.Sg[e-1];h=e==m-1?this.Sg[0]:this.Sg[e+1];var t=g.x-f.x,u=g.y-f.y,q=h.x-f.x,y=h.y-f.y;k=Math.atan2(u,t);r=Math.atan2(y,q);this.vw=k;this.IA=
r;0==e&&(n=k,p=r);t=t*y-q*u;u=r;r<k&&(r+=b);if(0<t*this.Qa)1==this.jj||2==this.jj?(k=c.ce(f,this.Qa,k+d),this.pc(k),k=c.YF(f,k),this.pc(k),k=c.ce(f,this.Qa,r-d),f=c.YF(f,k),f.type|=256,this.pc(f),this.pc(k)):(t=.5*(r-k),t=this.Qa/Math.abs(Math.sin(t)),k=c.ce(f,t,.5*(k+r)),this.pc(k,e));else if(0!=(f.type&512)){t=1-z/Math.abs(this.Qa);g=1;h=0>this.Qa?-l:l;-1<t&&1>t&&(u=2*Math.acos(t),.017453292519943295>u&&(u=.017453292519943295),g=a.J.truncate(l/u+1.5),1<g&&(h/=g));u=k+d;k=c.ce(f,this.Qa,u);0==e&&
(k.type|=1024);this.pc(k,e);t=this.Qa/Math.cos(h/2);u+=h/2;k=c.ce(f,t,u);k.type|=1024;for(this.pc(k);0<--g;)u+=h,k=c.ce(f,t,u),k.type|=1024,this.pc(k);k=c.ce(f,this.Qa,r-d);k.type|=1024;this.pc(k)}else if(1==this.jj)k=c.ce(f,this.Qa,k+d),this.pc(k,e),k=c.ce(f,this.Qa,r-d),this.pc(k);else if(0==this.jj)for(t=1-z/Math.abs(this.Qa),g=1,h=r-d-(k+d),-1<t&&1>t&&(u=2*Math.acos(t),.017453292519943295>u&&(u=.017453292519943295),g=a.J.truncate(Math.abs(h)/u+1.5),1<g&&(h/=g)),t=this.Qa/Math.cos(.5*h),u=k+d+
.5*h,k=c.ce(f,t,u),this.pc(k,e);0<--g;)u+=h,k=c.ce(f,t,u),this.pc(k);else 2==this.jj?(t=g.x-f.x,u=g.y-f.y,q=h.x-f.x,y=h.y-f.y,g=(t*q+u*y)/Math.sqrt(t*t+u*u)/Math.sqrt(q*q+y*y),.99999999<g?(k=c.ce(f,1.4142135623730951*this.Qa,r-.25*l),this.pc(k,e),k=c.ce(f,1.4142135623730951*this.Qa,r+.25*l),this.pc(k)):(g=Math.abs(this.Qa/Math.sin(.5*Math.acos(g))),h=Math.abs(this.hB*this.Qa),g>h?(t=.5*(r-k),t=this.Qa/Math.abs(Math.sin(t)),k=c.ce(f,t,.5*(k+r)),r=a.b.pa(k.x,k.y),k=a.b.pa(f.x,f.y),f=new a.b,f.zc(r,
k),r=new a.b,r.DX(h/f.length(),f,k),k=(g-h)*Math.abs(this.Qa)/Math.sqrt(g*g-this.Qa*this.Qa),0<this.Qa?f.tw():f.Tr(),f.scale(k/f.length()),k=new a.b,k.add(r,f),g=new a.b,g.zc(r,f),k=c.El(k),this.pc(k,e),k=c.El(g),this.pc(k)):(t=.5*(r-k),t=this.Qa/Math.abs(Math.sin(t)),k=c.ce(f,t,.5*(k+r)),this.pc(k,e)))):(r=u,0<this.Qa?(r>k&&(r-=b),g=k-r<d):(r<k&&(r+=b),g=r-k<d),g?(t=1.4142135623730951*this.Qa,u=0>t?k+.25*l:k+.75*l,k=c.ce(f,t,u),this.pc(k,e),u=0>t?r-.25*l:r-.75*l,k=c.ce(f,t,u),this.pc(k)):(t=.5*(r-
k),t=this.Qa/Math.abs(Math.sin(t)),r<k&&(r+=b),k=c.ce(f,t,(k+r)/2),this.pc(k,e)))}this.vw=n;this.IA=p;this.pc(this.$b[0],0);f=c.UQ(this.$b[this.Kf-1]);this.$b[0]=f;return this.sX()};k.prototype.jv=function(c,e){if(!(2>e))for(var d=0;d<e;d++){var k=this.$b[c+d];0!=d?this.rB.aj(a.b.pa(k.x,k.y)):this.rB.yu(a.b.pa(k.x,k.y))}};k.prototype.zO=function(a,e,d){var k=a.wa(e),r=a.Gc(e);this.$b=[];this.rB=d;if(a.Qb(e)){for(e=a.Aa(k);a.Aa(r-1).ub(e);)r--;if(2<=r-k){this.px=r-k;this.Sg=[];for(e=k;e<r;e++)this.Sg.push(c.El(a.Aa(e)));
this.yF()&&this.jv(0,this.Kf-1)}}else{for(e=a.Aa(k);k<r&&a.Aa(k+1).ub(e);)k++;for(e=a.Aa(r-1);k<r&&a.Aa(r-2).ub(e);)r--;if(2<=r-k){this.px=2*(r-k)-2;this.Sg=[];d=c.El(a.Aa(k));d.type|=1536;this.Sg.push(d);for(e=k+1;e<r-1;e++)d=c.El(a.Aa(e)),this.Sg.push(d);d=c.El(a.Aa(r-1));d.type|=512;this.Sg.push(d);for(e=r-2;e>=k+1;e--)d=c.El(a.Aa(e)),d.type|=1024,this.Sg.push(d);if(this.yF())if(2<=this.$b.length){a=-1;(r=0!=(this.$b[this.Kf-1].type&1024))||(a=0);for(e=1;e<this.Kf;e++)(k=0!=(this.$b[e].type&1024))?
r||(r=e-1,1<r-a+1&&this.jv(a,r-a+1)):r&&(a=e-1),r=k;r||(r=this.Kf-1,1<r-a+1&&this.jv(a,r-a+1))}else a=0,r=this.Kf-1,0<=a&&1<=r-a&&this.jv(a,r-a+1)}}this.Sg=null;this.px=0;this.$b=null;this.Kf=0};k.prototype.sX=function(){for(var c=!1,a=0;a<this.Kf;a++){var e=this.$b[a];e.Nh=a+1;e.Qh=a-1;this.$b[a]=e}e=this.$b[0];e.Qh=this.Kf-2;this.$b[0]=e;e=this.$b[this.Kf-2];e.Nh=0;this.$b[this.Kf-2]=e;for(a=e=0;a<this.Kf;a++)if(0!=(this.$b[e].type&256)){var d=this.BR(e);if(-1!=d)e=d;else{c=!0;break}}else e=this.$b[e].Nh;
if(c)return!1;this.SQ(e);return!0};k.prototype.BR=function(c){for(var a=this.Kf-1,e=c,d,k,r=1;r<=a-2;r++){d=e=this.$b[e].Nh;k=c;for(var l=1;l<=r;l++){k=this.$b[k].Qh;if(0==(this.$b[k].type&256)&&0==(this.$b[d].type&256)){var b=this.$T(k,d);if(-1!=b)return b}d=this.$b[d].Qh}}return-1};k.prototype.$T=function(c,d){var k,r,l,b;k=this.$b[this.$b[c].Qh];r=this.$b[c];l=this.$b[this.$b[d].Qh];b=this.$b[d];if(!this.HX(k,r,l,b))return-1;var v=new e;return this.oS(k,r,l,b,v)&&!v.nF&&a.J.RK((r.x-k.x)*(b.y-l.y)-
(r.y-k.y)*(b.x-l.x))!=a.J.RK(this.Qa)?(k=this.$b[c].Qh,v.Qn.type=r.type,v.Qn.Nh=d,v.Qn.Qh=k,this.$b[c]=v.Qn,v.Qn=this.$b[d],v.Qn.Qh=c,this.$b[d]=v.Qn,d):-1};k.prototype.HX=function(c,a,e,d){return Math.max(c.x,a.x)>=Math.min(e.x,d.x)&&Math.max(e.x,d.x)>=Math.min(c.x,a.x)&&Math.max(c.y,a.y)>=Math.min(e.y,d.y)&&Math.max(e.y,d.y)>=Math.min(c.y,a.y)};k.prototype.oS=function(a,e,d,k,r){r.nF=!1;var l,b,v;l=(e.y-a.y)*(k.x-d.x)-(e.x-a.x)*(k.y-d.y);b=(d.y-a.y)*(e.x-a.x)-(d.x-a.x)*(e.y-a.y);l=0==l?2:b/l;return 0<=
l&&1>=l&&(v=l,l=(k.y-d.y)*(e.x-a.x)-(k.x-d.x)*(e.y-a.y),b=(a.y-d.y)*(k.x-d.x)-(a.x-d.x)*(k.y-d.y),l=0==l?2:b/l,0<=l&&1>=l)?(r.Qn=c.VQ(a.x+l*(e.x-a.x),a.y+l*(e.y-a.y)),r.Qn.ui=d.ui+v*(k.ui-d.ui),0!=v&&1!=v||0!=l&&1!=l||(r.nF=!0),r.N_=l,r.O_=v,(0==v||1==v)&&0<l&&1>l||(0==l||1==l)&&0<v&&1>v?!1:!0):!1};k.prototype.SQ=function(c){for(;this.$b[c].Qh<c;)c=this.$b[c].Qh;var a=0,e=c;do e=this.$b[e],this.$b[a]=e,e=e.Nh,a++;while(e!=c);this.$b[a]=this.$b[0];this.Kf=a+1};k.prototype.uE=function(c){var a=this.Yo,
e=a.Da();if(null!=e){e.yj();for(var d=-1;e.Ya();)d++,this.zO(a,d,c)}};k.prototype.zy=function(){var c=this.Yo.G();return 322==c?this.yO():197==c?this.xO():a.T.Oc(c)?(c=new a.Ua,c.dc(this.Yo,!0),this.Yo=c,this.zy()):1607==c?(c=new a.Ua,this.uE(c),c):1736==c?(c=new a.Ia,this.uE(c),c):null};return k}();a.SL=k})(y||(y={}));(function(a){var l=function(){function c(c){this.Sk=c}c.prototype.w=function(c,a){this.Sk.a.w(c,a)};c.prototype.Ld=function(c){var a=this.Sk.Na.ja(c);this.Sk.Na.Ld(c,-1);this.Sk.a.td(a,
!1)};return c}(),b=function(){function c(c){this.Sk=c}c.prototype.w=function(c,a){this.Sk.FV.w(c,a)};c.prototype.Ld=function(c){this.Sk.Na.Ld(c,-1)};return c}(),d=function(){function c(c){this.Sk=c}c.prototype.w=function(c,a){a.L(this.Sk.IV[c])};c.prototype.Ld=function(c){this.Sk.Na.Ld(c,-1)};return c}(),c=function(){function c(c){void 0===c?(this.Na=new a.tk,this.Na.Qe(20),this.a=new a.fd,this.wV=this.a.bh(550),this.Mt=this.a.Yf(this.wV,-1),this.wi=new l(this)):c instanceof Array?(this.Na=new a.tk,
this.Na.Qe(20),this.IV=c,this.wi=new d(this)):(this.Na=new a.tk,this.Na.Qe(20),this.FV=c,this.wi=new b(this))}c.prototype.Jb=function(c){var e=c.G();if(a.Lu.gh(e))this.gP(c);else if(a.xl.Oc(e))this.nP(c);else if(197==e)this.dP(c);else if(33==e)this.kP(c);else throw a.f.F("invalid shape type");};c.prototype.TS=function(){var c=new a.Wa,e=this.Na.xc(-1),d=new a.Ia(this.a.Gr);this.a.wj(this.Na.ja(e),c);d.Rf(c);for(e=this.Na.nb(e);-1!=e;e=this.Na.nb(e))this.a.wj(this.Na.ja(e),c),d.lineTo(c);return d};
c.TQ=function(e){var d=new c(e),k=e.D(),l=1,b=new a.b,f=new a.b,g=new a.b;for(e.w(0,b);;){e.w(l,f);if(!(f.vA(b)&&l<k-1))break;l++}d.Na.addElement(0,-1);d.Na.ro(l);for(k=l+1;k<e.D();k++)e.w(k,g),l=d.NC(g),-1!=l&&d.Na.jk(l,k);g=new a.Wa;l=d.Na.xc(-1);k=new a.Ia(e.description);e.Ae(d.Na.ja(l),g);k.Rf(g);for(l=d.Na.nb(l);-1!=l;l=d.Na.nb(l))e.Ae(d.Na.ja(l),g),k.lineTo(g);return k};c.pa=function(a,e,d){for(var k=new c(a),r=1,l=a[0];a[r].vA(l)&&r<e-1;)r++;k.Na.addElement(0,-1);k.Na.ro(r);for(r+=1;r<e;r++)l=
k.NC(a[r]),-1!=l&&k.Na.jk(l,r);a=0;for(e=k.Na.xc(-1);-1!=e;e=k.Na.nb(e))d[a++]=k.Na.ja(e);return a};c.UH=function(e,d){var k=e.wa(d),r=e.Gc(d);d=!e.Qb(d)&&e.Eo(d);e=e.Pa(0);k*=2;r*=2;d&&(r-=2);if(6>r-k)return!0;d=new a.b;var l=new a.b,b=new a.b;e.fc(k,d);e.fc(k+2,l);e.fc(k+4,b);var f=c.ee(l,b,d);if(f.kt()||!c.uc(f.value()))return!1;for(var g=a.b.pa(l.x,l.y),h=new a.b,k=k+6;k<r;k+=2){h.L(l);l.L(b);e.fc(k,b);f=c.ee(l,b,d);if(f.kt()||!c.uc(f.value()))return!1;f=c.ee(g,b,d);if(f.kt()||!c.uc(f.value()))return!1;
f=c.ee(l,b,h);if(f.kt()||!c.uc(f.value()))return!1}return!0};c.prototype.gP=function(c){for(var e=new a.Wa,d=new a.b,k=0;k<c.D();k++){c.w(k,d);var l=this.zs(d);if(-1!=l){c.Ae(k,e);var b=this.a.pc(this.Mt,e);this.Na.jk(l,b)}}};c.prototype.dP=function(c){for(var e=new a.Wa,d=new a.b,k=0;4>k;k++){c.Fx(k,d);var l=this.zs(d);if(-1!=l){c.ig(k,e);var b=this.a.pc(this.Mt,e);this.Na.jk(l,b)}}};c.prototype.nP=function(c){var e=new a.Wa,d=c.ec(),d=this.zs(d);if(-1!=d){c.Dp(e);var k=this.a.pc(this.Mt,e);this.Na.jk(d,
k)}d=c.Cc();d=this.zs(d);-1!=d&&(c.Bp(e),c=this.a.pc(this.Mt,e),this.Na.jk(d,c))};c.prototype.kP=function(c){var a=c.w(),a=this.zs(a);-1!=a&&(c=this.a.pc(this.Mt,c),this.Na.jk(a,c))};c.prototype.zs=function(c){var a=-1;if(0==this.Na.size(-1))return a=this.Na.addElement(-4,-1);if(1==this.Na.size(-1)){var e=this.a.Aa(this.Na.ja(this.Na.xc(-1)));c.vA(e)||(a=this.Na.ro(-5));return a}return a=this.NC(c)};c.prototype.NC=function(e){var d=-1,k=this.Na.xc(-1),l=this.Na.Fc(-1),b=this.Na.ja(k),f=this.Na.ja(l),
g=new a.b,h=new a.b;this.wi.w(b,g);this.wi.w(f,h);b=a.b.zp(h,e,g);if(c.uc(b))d=this.Na.ro(-1),g=this.LC(e,l,k),g!=k&&this.MC(e,k,this.Na.Ve(g));else if(c.vl(b)){for(var h=this.Na.ew(-1),m=this.Na.xc(-1),z=this.Na.Fc(-1),n,b=new a.b,f=new a.b;m!=this.Na.Ve(z);)n=this.Na.ja(h),this.wi.w(n,b),n=a.b.zp(b,e,g),c.vl(n)?(z=h,h=this.Na.Pl(h)):(m=h,h=this.Na.Nq(h));h=z;g=m;n=this.Na.ja(h);m=this.Na.ja(g);this.wi.w(n,b);this.wi.w(m,f);if(g==k||(b=a.b.zp(f,e,b),c.uc(b)))d=this.Na.iv(g,h,-2,!1),this.MC(e,h,l),
this.LC(e,g,k)}else null==this.wb&&(this.wb=new a.Hb),this.wb.Mc(h),this.wb.Zc(g),g=this.wb.oe(e,!0),0>g?(g=this.Na.Ve(l),this.Na.Ld(l,-1),d=this.Na.ro(-3),this.LC(e,g,k)):1<g&&(g=this.Na.nb(k),this.Na.Ld(k,-1),d=this.Na.iv(-1,g,-3,!1),this.MC(e,g,l));return d};c.prototype.MC=function(e,d,l){if(d!=l){var k=this.Na.ja(d),r=this.Na.nb(d),b=new a.b,v=new a.b;for(this.wi.w(k,b);d!=l&&2<this.Na.size(-1);){this.wi.w(this.Na.ja(r),v);k=a.b.zp(v,e,b);if(c.uc(k))break;k=d;d=r;b.L(v);r=this.Na.nb(d);this.wi.Ld(k)}}};
c.prototype.LC=function(e,d,l){if(d==l)return l;var k=this.Na.ja(d),r=this.Na.Ve(d),b=new a.b,v=new a.b;for(this.wi.w(k,b);d!=l&&2<this.Na.size(-1);){this.wi.w(this.Na.ja(r),v);k=a.b.zp(b,e,v);if(c.uc(k))break;k=d;d=r;b.L(v);r=this.Na.Ve(d);this.wi.Ld(k)}return d};c.ee=function(c,e,d){var k=new a.Xb;k.set(e.x);k.sub(c.x);var r=new a.Xb;r.set(d.y);r.sub(c.y);var l=new a.Xb;l.set(e.y);l.sub(c.y);e=new a.Xb;e.set(d.x);e.sub(c.x);k.Vg(r);l.Vg(e);k.sub(l);return k};c.uc=function(c){return 0>c};c.vl=function(c){return 0<
c};c.hq=function(c){return 0==c};return c}();a.Iu=c})(y||(y={}));(function(a){var l=function(){function l(a){this.je=this.a=null;this.EI=!0;this.je=a}l.xJ=function(d,c,e){d=a.ma.Bs(d);return a.Hu.ow(c.Be(),c.nf(),e.Be(),e.nf(),a.Ub.Xx(d))};l.EQ=function(d,c){var e=new a.Wa;a.Hu.UV(d,c,e);return e};l.V=function(a,c,e,k){e=new l(e);e.a=a;e.ta=c;e.EI=k;return e.KO()};l.prototype.EO=function(d){return a.Hu.aS(this.a,d)};l.prototype.HO=function(d){return a.Ju.V(this.a,d,this.je)};l.prototype.KO=function(){for(var d=
this.ta,c=a.ma.Bs(d),d=a.ma.qP(d),e=1.00001*d,d=1.000001*d,k=!1,r=30<this.a.ud+10?1E3:(this.a.ud+10)*(this.a.ud+10),l=0,b=this.a.cU();;l++){if(l>r)throw a.f.X("Internal Error: max number of iterations exceeded");var f=this.EO(c),k=k||f;this.EI&&(f=0!=this.a.zq(c,!0,!1),k=k||f);f=!1;if(0==l||b||a.Ju.sJ(!0,this.a,d,null,this.je))f=this.HO(e),k=k||f;if(!f)break}return k};return l}();a.rk=l})(y||(y={}));(function(a){var l=function(){function d(c){this.we=this.Tc=null;this.jx=0;this.lc=c;this.KA=!0}d.prototype.fw=
function(c,a){var e=this.a.ic(c);if(null==e){if(!this.a.pd(c,a))return null;e=a}return e};d.prototype.Or=function(c){void 0===c&&(c=!1);this.jx++;if(c||0==(this.jx&4095))this.jx=0};d.prototype.lR=function(){var c=this.a.Pr(!1),e=!1,d=new a.Hb,r=new a.Hb,l=new a.h;l.Oa();var b=new a.h;b.Oa();for(var f=new a.Wa,g=new a.cE,h=c.next();-1!=h;h=c.next()){var m=null,z=!1;if(!a.T.Jo(this.a.hc(c.Bk))){m=this.fw(h,d);if(null==m)continue;m.s(l);l.O(this.ta,this.ta);if(m.fh(this.ta))if(m.fh(0))z=!0,m=null;else continue}var n=
this.a.Pr(c),p=n.next();for(-1!=p&&(p=n.next());-1!=p;p=n.next()){var t=null,u=!1;if(!a.T.Jo(this.a.hc(n.Bk))){t=this.fw(p,r);if(null==t)continue;t.s(b);if(t.fh(this.ta))if(t.fh(0))u=!0,t=null;else continue}var q=0,y=0;if(null!=m&&null!=t)l.SH(b)&&(g.Ap(m),g.Ap(t),g.Ma(this.ta,!1),q=g.Rl(0),y=g.Rl(1),0<q+y&&(this.a.as(h,g,0,!0),this.a.as(p,g,1,!0)),g.clear());else if(null!=m){var x=new a.b;this.a.w(p,x);if(l.contains(x)){g.Ap(m);this.a.wj(p,f);g.rA(this.ta,f,!1);q=g.Rl(0);if(0<q)if(this.a.as(h,g,
0,!0),u){u=-1;for(x=this.a.U(p);-1!=x&&x!=p&&(t=this.fw(x,r),u=x,null!=t&&t.fh(0));x=this.a.U(x));for(x=p;-1!=x&&(this.a.Yh(x,g.cg),x!=u);x=this.a.U(x));}else this.a.Yh(p,g.cg);g.clear()}}else if(null!=t){if(x=new a.b,this.a.w(h,x),b.O(this.ta,this.ta),b.contains(x)){g.Ap(t);this.a.wj(h,f);g.rA(this.ta,f,!1);y=g.Rl(0);if(0<y)if(this.a.as(p,g,0,!0),z){u=-1;for(x=this.a.U(h);-1!=x&&x!=h&&(t=this.fw(x,r),u=x,null!=t&&t.fh(0));x=this.a.U(x));for(x=h;-1!=x&&(this.a.Yh(x,g.cg),x!=u);x=this.a.U(x));}else this.a.Yh(h,
g.cg);g.clear()}}else continue;if(0!=q+y){if(0!=q){m=this.a.ic(h);if(null==m){if(!this.a.pd(h,d))continue;m=d;d.s(l)}else m.s(l);if(m.fh(this.ta))break}e=!0}}}return e};d.prototype.mR=function(){return this.BW()};d.prototype.BW=function(){return(new a.VD).HY(this.a,this.ta)};d.prototype.tJ=function(){var c=!1,e,d;null==this.Tc&&(this.Tc=new a.tk);var r=new a.ia(0);r.yb(this.a.ud+1);for(var l=this.a.Pr(),b=l.next();-1!=b;b=l.next())r.add(b);this.a.Wx(r,r.size);r.add(-1);l=this.a.Vd();b=this.a.Vd();
this.we=new a.eE(this.a,this.ta,!this.KA);this.Tc.Ep(this.we);var f=new a.ia(0),g=new a.ia(0),h=0;new a.b;var m=this.a.Dd;this.a.xb.tc();for(var z=this.a.xb.xa[0].g,n,p,t=r.get(h++);-1!=t;){p=m.S(t,0);n=z[2*p];p=z[2*p+1];var u=n,q=p;do{var y=m.S(t,2),x=m.S(t,1);-1!=y&&(e=m.S(y,0),d=z[2*e],e=z[2*e+1],0>(q<e?-1:q>e?1:u<d?-1:u>d?1:0)&&(g.add(t),g.add(y)));-1!=x&&(e=m.S(x,0),d=z[2*e],e=z[2*e+1],0>(q<e?-1:q>e?1:u<d?-1:u>d?1:0)&&(g.add(x),g.add(x)));d=this.a.Sa(t,l);-1!=d&&(f.add(d),this.a.Va(t,l,-1));
d=this.a.Sa(t,b);-1!=d&&(f.add(d),this.a.Va(t,b,-1));t=r.get(h++);-1!==t&&(q=m.S(t,0),u=z[2*q],q=z[2*q+1])}while(-1!=t&&u===n&&q===p);u=1==f.size&&2==g.size;d=q=-1;y=0;for(x=f.size;y<x;y++){e=f.get(y);var A=this.Tc.Ve(e);-1==A||f.mA(A)||(q=A);e=this.Tc.nb(e);-1==e||f.mA(e)||(d=e);if(-1!=q&&-1!=d)break}this.we.PK(p,n);y=0;for(x=f.size;y<x;y++)e=f.get(y),this.Tc.Ld(e,-1);f.clear(!1);if(!u&&-1!=q&&-1!=d&&this.sQ(q,d)){c=!0;this.mj=this.we.fn();break}y=0;for(x=g.size;y<x;y+=2){p=g.get(y);n=g.get(y+1);
u?(p=this.Tc.iv(q,d,p,!0),u=!1):p=this.Tc.addElement(p,-1);if(this.we.Ng){this.mj=this.we.fn();c=!0;break}-1==this.a.Sa(n,l)?this.a.Va(n,l,p):this.a.Va(n,b,p)}if(c)break;g.yf(0)}this.a.ke(l);this.a.ke(b);return c};d.prototype.sQ=function(c,a){this.we.compare(this.Tc,this.Tc.ja(c),a);c=this.we.Ng;this.we.Fs();return c};d.Cj=function(c){for(var e=c.rd;-1!=e;e=c.Ue(e))if(a.T.Ic(c.hc(e)))return!0;return!1};d.Hm=function(c,a,k,r){if(!d.Cj(c))return!1;a=new d(r);a.a=c;a.ta=k;if(15>c.ud)c=a.lR();else return a.mR();
return c};d.V=function(c,a,k){return d.Hm(c,c.SG(),a,k)};d.sJ=function(c,e,k,r,l){if(!d.Cj(e))return!1;var b=new d(l);b.a=e;b.ta=k;b.KA=c;if(b.tJ())return null!=r&&r.ls(b.mj),!0;var v=new a.Hd;v.wC();e.Xc(v);b=new d(l);b.a=e;b.ta=k;b.KA=c;c=b.tJ();v.wC();e.Xc(v);return c?(null!=r&&r.ls(b.mj),!0):!1};d.qm=function(c,a){c=c.D();return 16>c?!1:2*c+Math.log(c)*Math.LOG10E/Math.log(2)*1*a<1*c*a};d.jR=function(c,e,k,r){if(a.T.Ic(e.G()))return(new d(r)).kR(c,e,k);throw a.f.X("crack_A_with_B");};d.prototype.kR=
function(c,e,k){var r=new a.h;c.ac(r);var l=new a.h;e.ac(l);l.O(k,k);if(!l.Yb(r))return c;var f=c.ob,g=null;null!=f&&(g=f.Mb);d.qm(c,c.D())&&(g=a.ma.Lj(c,l));var h=null!=g?g.mf():null,m=e.Da();e=c.Da();for(var z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=[];m.Ya();)for(;m.Ca();){var n=m.ba();if(null!=g)for(h.Xn(n,k),f=h.next();-1!=f;f=h.next()){if(this.Or(),e.Tb(g.ja(f),-1),e.Ca())for(var f=e.ba(),p=f.Ma(n,null,z,null,k),f=0;f<p;++f){var t=z[f];if(0!=t&&1!=t){var u=e.Db(),q=new b;q.t=t;q.index=u;l.push(q)}}}else{var y=
new a.h;n.ac(y);y.O(k,k);if(r.Yb(y))for(e.yj();e.Ya();)for(;e.Ca();)if(this.Or(),f=e.ba(),t=new a.h,f.ac(t),t.Yb(y))for(p=f.Ma(n,null,z,null,k),f=0;f<p;++f)t=z[f],0!=t&&1!=t&&(u=e.Db(),q=new b,q.t=t,q.index=u,l.push(q))}}if(0==l.length)return c;l=l.sort(b.Gs);c=c.Ja();for(e.yj();e.Ya()&&!e.Ca(););k=e.ba();r=new a.Cg;g=-1;f=0;for(h=l.length;f<h;){z=l[f].index;for(m=f+1;m<h&&l[m].index==z;)++m;for(;e.Db()<z;){this.Or();n=e.Ca();t=e.Ta;(y=n||!e.Fo()||e.Go())&&c.dc(k,g!=t);g=t;if(!n)for(;e.Ya()&&!e.Ca(););
k=e.ba()}for(z=0;f<m;f++)t=l[f].t,t!=z&&(k.yh(z,t,r),z=t,t=e.Ta,c.dc(r.get(),g!=t),g=t);if(y=(n=e.Ca())||!e.Fo()||e.Go())k.yh(z,1,r),c.dc(r.get(),!1);if(n)k=e.ba();else{for(;e.Ya()&&!e.Ca(););e.Ca()?k=e.ba():k=null}f=m}null!=k&&(t=e.Ta,(y=(n=e.Ca())||!e.Fo()||e.Go())&&c.dc(k,g!=t),g=t);for(n=e.Ca();;){if(!n){for(;e.Ya()&&!(n=e.Ca()););if(!n)break}k=e.ba();t=e.Ta;(y=(n=e.Ca())||!e.Fo()||e.Go())&&c.dc(k,g!=t);g=t}return c};return d}();a.Ju=l;var b=function(){function a(){}a.Gs=function(c,a){return c.index==
a.index?c.t>a.t?1:c.t<a.t?-1:0:c.index>a.index?1:-1};return a}()})(y||(y={}));(function(a){(function(c){c[c.Left=0]="Left";c[c.Right=1]="Right";c[c.Coincident=2]="Coincident";c[c.Undefined=3]="Undefined";c[c.Uncut=4]="Uncut"})(a.UL||(a.UL={}));var l=function(){return function(c,a,d,l,b,f,g,h,m,z,n){this.Y=c;this.mx=a;this.Ht=d;this.Pg=l;this.zn=z;this.em=n}}();a.FZ=l;var b=function(){function c(c,a){this.XI=c;this.gj=a}c.prototype.GO=function(c,e){var d=new a.b;this.gj.w(c,d);var k=new a.b;this.gj.w(e,
k);d=d.compare(k);if(0!=d)return d;d=this.gj.Sa(c,this.XI);k=this.gj.Sa(e,this.XI);return d<k?-1:d==k?0:1};return c}(),d=function(){return function(c,a,d,l,b,f,g,h,m){this.Pg=c;this.Ht=a;this.sB=d;this.gJ=l;this.dj=b;this.em=f;this.zn=g;this.hJ=h;this.LV=m}}();a.EZ=d;var c=function(){function c(){}c.TL=function(e,d,b,f,g,h){if(d.u())e=new l(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(e);else{var k=new a.fd;k.Jb(d);k.Jb(b);a.rk.V(k,f,h,!0);d=0;b=k.Vd();for(f=k.rd;-1!=f;f=k.Ue(f))for(h=k.Pb(f);-1!=
h;h=k.Sb(h))for(var r=k.cb(h),v=0,G=k.Ka(h);v<G;r=k.U(r),v++)k.Va(r,b,d++);d=c.kM(b,k);c.sW(e,d,k,g)}};c.kM=function(e,d){for(var k=d.ud,r=new a.ia(0),l=d.rd;-1!=l;l=d.Ue(l))for(var f=d.Pb(l);-1!=f;f=d.Sb(f))for(var g=d.cb(f),h=0,m=d.Ka(f);h<m;g=d.U(g),h++)r.add(g);var z=new b(e,d);r.Gd(0,k,function(c,a){return z.GO(c,a)});e=[];var n=[],p=d.Vd(),t=d.Vd(),l=d.rd,f=d.Ue(l),m=new a.b,u=new a.b,q=r.get(0),y=d.ld(q),x=d.ng(y);d.w(q,m);for(var A=1,g=0;A<k-1;){for(var w=!1,h=A;h<k;h++)if(h!=g){var C=r.get(h),
D=d.ld(C),F=d.ng(D);d.w(C,u);if(m.ub(u))x==l&&F==f&&(w=c.mZ(p,t,d,e,n,y,q,D,C));else break}if(w||g==A-1){w&&g==A-1&&A--;if(++g==k)break;q=r.get(g);y=d.ld(q);x=d.ng(y);d.w(q,m)}w||(A=g+1)}k=[];for(l=d.rd;-1!=l;l=d.Ue(l))for(f=d.Pb(l);-1!=f;f=d.Sb(f))for(r=d.cb(f),h=0,m=d.Ka(f);h<m;r=d.U(r),h++){g=d.Sa(r,t);if(0<=g)for(;g<n.length&&n[g].Pg==r;)k.push(n[g++]);g=d.Sa(r,p);if(0<=g)for(;g<e.length&&e[g].Pg==r;)k.push(e[g++])}d.ke(p);d.ke(t);return k};c.mZ=function(a,e,d,l,b,f,g,h,m){var k=d.Rj(f),r=d.Rj(h),
v=d.cb(f),G=d.cb(h),J=d.Ra(g),z=d.Ra(m),n=!1,L=!1,p=!1,t=!1;g!=v&&(m!=G&&(n=c.sZ(a,d,l,f,J,h,z)),m!=r&&(L=c.uZ(a,d,l,f,J,h,m)));g!=k&&(m!=G&&(p=c.wZ(e,d,b,f,g,h,z,v)),m!=r&&(t=c.FL(e,d,b,f,g,h,m,v)));n&&L&&p?(a=l.length-1,2==b[t?b.length-2:b.length-1].dj&&(l[a-1]=l[a],--l.length)):n&&L&&t&&2==b[b.length-1].dj&&(b=l[l.length-1],--l.length,d.Sa(b.Pg,a)==l.length&&d.Va(b.Pg,a,-1));return n||L||p||t};c.sZ=function(c,e,l,b,f,g,h){var k,r;r=new a.Hb;var v=new a.Hb,G=[0,0],m=[0,0];k=e.ic(f);null==k&&(e.pd(f,
r),k=r);r=e.ic(h);null==r&&(e.pd(h,v),r=v);k=k.Ma(r,null,G,m,0);2>k&&(b=new d(f,b,G[0],NaN,k,h,g,m[0],NaN),l.push(b),b=e.Sa(f,c),0>b&&e.Va(f,c,l.length-1));return!0};c.uZ=function(c,e,l,b,f,g,h){var k,r;r=new a.Hb;var v=new a.Hb,G=[0,0],m=[0,0];k=e.ic(f);null==k&&(e.pd(f,r),k=r);r=e.ic(h);null==r&&(e.pd(h,v),r=v);k=k.Ma(r,null,G,m,0);return 2>k?(b=new d(f,b,G[0],NaN,k,h,g,m[0],NaN),l.push(b),b=e.Sa(f,c),0>b&&e.Va(f,c,l.length-1),!0):!1};c.wZ=function(c,e,l,b,f,g,h,m){var k,r;r=new a.Hb;var v=new a.Hb,
G=[0,0],J=[0,0];k=e.ic(f);null==k&&(e.pd(f,r),k=r);r=e.ic(h);null==r&&(e.pd(h,v),r=v);k=k.Ma(r,null,G,J,0);if(2==k)return b=new d(f,b,G[0],G[1],k,h,g,J[0],J[1]),l.push(b),b=e.Sa(f,c),0>b&&e.Va(f,c,l.length-1),!0;v=!1;f==m&&(b=new d(f,b,G[0],NaN,k,h,g,J[0],NaN),l.push(b),b=e.Sa(f,c),0>b&&e.Va(f,c,l.length-1),v=!0);return v};c.FL=function(c,e,l,b,f,g,h,m){var k,r;r=new a.Hb;var v=new a.Hb,G=[0,0],J=[0,0];k=e.ic(f);null==k&&(e.pd(f,r),k=r);r=e.ic(h);null==r&&(e.pd(h,v),r=v);k=k.Ma(r,null,G,J,0);if(2==
k)return b=new d(f,b,G[0],G[1],k,h,g,J[0],J[1]),l.push(b),b=e.Sa(f,c),0>b&&e.Va(f,c,l.length-1),!0;v=!1;f==m&&(b=new d(f,b,G[0],NaN,k,h,g,J[0],NaN),l.push(b),b=e.Sa(f,c),0>b&&e.Va(f,c,l.length-1),v=!0);return v};c.sW=function(e,d,b,f){var k,r=[];r[0]=new a.b;r[1]=new a.b;r[2]=new a.b;r[3]=new a.b;var v=new a.b,g=new a.b,h=new a.b,G=new a.b,m=null;null!=f&&(m=new a.Cg,m.Is());var z,n=0,p=null,t=new a.Hb;new a.Hb;for(var u=b.Pb(b.rd);-1!=u;u=b.Sb(u)){var q,y=4,x=-1,A,w,C,D=-1,F,E,B,I,R=-1,M=-1,H=NaN;
q=!0;var N=!1,K=!0,P=!0,O=!0,S=0;C=u;F=0;for(var Q=b.cb(u),W=b.Ka(u),Z=0;Z<W;Q=b.U(Q),Z++){z=b.ic(Q);if(null==z){if(!b.pd(Q,t))continue;z=t}-1==D&&(D=Q);for(var T=0;n<d.length&&Q==d[n].Pg;){x=d[n].Ht;A=d[n].Pg;w=d[n].sB;E=d[n].zn;B=d[n].em;I=d[n].hJ;if(2==d[n].dj){if(N||(C=x,D=A,F=w,R=E,M=B,H=I,y=2,null!=f?p=new a.Ua:S=0,O=!1,P=!0),w=d[n].gJ,I=d[n].LV,null!=f?(z.yh(T,d[n].gJ,m),p.dc(m.get(),P)):S++,T=w,N=!0,P=q=!1,n+1==d.length||2!=d[n+1].dj||d[n+1].Pg==A&&d[n+1].sB!=T)null!=f?(k=new l(p,2,x,A,w,
y,C,D,F,E,B,I,R,M,H),f.push(k)):null.add(S),C=x,D=A,F=w,R=E,M=B,H=I,y=2,N=q=!1,P=O=!0}else{var Y=b.U(A);if(n<d.length-1&&d[n+1].Pg==Y&&d[n+1].em==B&&2==d[n+1].dj)w!=T&&(O&&(null!=f?p=new a.Ua:S=0),q=0<n&&d[n-1].Ht==x?1==y?0:0==y?1:3:3,null!=f?(z.yh(T,w,m),p.dc(m.get(),P),k=new l(p,q,x,A,w,y,C,D,F,E,B,I,R,M,H),f.push(k)):(S++,null.add(S)),T=w,C=x,D=A,F=w,R=E,M=B,H=I,y=q,q=K=!1,P=O=!0);else if(!c.$L(e,b,d,n,v,g)){c.LL(b,d,n,u,Q,h,G);var V=!1,Y=!1;k=!0;if(!(v.ub(h)||g.ub(h)||v.ub(G)||g.ub(G))){r[0].L(v);
r[1].L(g);r[2].L(h);r[3].L(G);r.sort(a.b.us);var aa=r[0],da=r[1],ea=r[2],fa=r[3];aa.ub(v)?da.ub(g)?e?(Y=V=!0,k=!1):V=!1:fa.ub(g)?e?k=Y=V=!0:V=!1:(V=!0,k=da.ub(h)):da.ub(v)?ea.ub(g)?e?(Y=V=!0,k=!1):V=!1:aa.ub(g)?e?k=Y=V=!0:V=!1:(V=!0,k=ea.ub(h)):ea.ub(v)?fa.ub(g)?e?(Y=V=!0,k=!1):V=!1:da.ub(g)?e?k=Y=V=!0:V=!1:(V=!0,k=fa.ub(h)):aa.ub(g)?e?(Y=V=!0,k=!1):V=!1:ea.ub(g)?e?k=Y=V=!0:V=!1:(V=!0,k=aa.ub(h))}if(V){V=Q==A;if(w!=T||V&&0==T)O&&(null!=f?p=new a.Ua:S=0),null!=f?(z.yh(T,w,m),p.dc(m.get(),P)):S++;if(k)if(1!=
y){if(w!=T||V&&0==T)null!=f?(k=new l(p,1,x,A,w,y,C,D,F,E,B,I,R,M,H),f.push(k)):null.add(S);if(!Y)y=1;else if(n==d.length-2||d[n+2].Ht!=x)y=0}else{if(w!=T||V&&0==T)null!=f?(k=new l(p,3,x,A,w,y,C,D,F,E,B,I,R,M,H),f.push(k)):null.add(S);y=1}else if(0!=y){if(w!=T||V&&0==T)null!=f?(k=new l(p,0,x,A,w,y,C,D,F,E,B,I,R,M,H),f.push(k)):null.add(S);if(!Y)y=0;else if(n==d.length-2||d[n+2].Ht!=x)y=1}else{if(w!=T||V&&0==T)null!=f?(k=new l(p,3,x,A,w,y,C,D,F,E,B,I,R,M,H),f.push(k)):null.add(S);y=0}if(w!=T||V&&0==
T)T=w,C=x,D=A,F=w,R=E,M=B,H=I,q=K=!1,P=O=!0}}}n++}1!=T&&(O&&(null!=f?p=new a.Ua:S=0),null!=f?(z.yh(T,1,m),p.dc(m.get(),P)):S++,P=O=!1,K=!0)}K&&(w=1,A=b.Rj(u),A=b.Ra(A),B=E=-1,I=NaN,q?null!=f?(k=new l(p,4,x,A,w,y,C,D,F,E,B,I,R,M,H),f.push(k)):null.add(S):(q=1==y?0:0==y?1:3,null!=f?(k=new l(p,q,x,A,w,y,C,D,F,E,B,I,R,M,H),f.push(k)):null.add(S)))}};c.$L=function(e,d,l,b,f,g){var k=l[b].hJ;if(1==k)return c.PL(e,d,l,b,f,g);if(0==k)return c.WL(e,d,l,b,f,g);throw a.f.ya();};c.PL=function(c,e,d,l,b,f){var k=
new a.Hb,r=d[l].Pg,v=d[l].zn,g=d[l].em,h=-1,G=-1,m=-1,J=-1;if(!c&&0<l)var z=d[l-1],h=z.Pg,G=z.zn,m=z.em,J=z.dj;var n=-1,L=-1,p=-1,t=-1;l<d.length-1&&(z=d[l+1],n=z.Pg,L=z.zn,p=z.em,t=z.dj);var u=e.U(r),z=e.U(g);if(!c)return 0<l&&h==r&&G==v&&m==z&&2==J||l<d.length-1&&n==u&&L==v&&p==z&&2==t?(c=e.ic(g),null==c&&(e.pd(g,k),c=k),f.L(c.Eg(1)),b.au(f),f.normalize(),b.normalize(),!1):l<d.length-1&&n==r&&L==v&&p==z?(c=e.ic(g),null==c&&(e.pd(g,k),c=k),b.L(c.Eg(1)),c=e.ic(z),null==c&&(e.pd(z,k),c=k),f.L(c.Eg(0)),
b.Kr(),f.normalize(),b.normalize(),!1):!0;if(l==d.length-1||n!=r||L!=v||p!=z||2==t)return c=e.ic(g),null==c&&(e.pd(g,k),c=k),f.L(c.Eg(1)),b.au(f),f.normalize(),b.normalize(),!1;c=e.ic(g);null==c&&(e.pd(g,k),c=k);b.L(c.Eg(1));c=e.ic(z);null==c&&(e.pd(z,k),c=k);f.L(c.Eg(0));b.Kr();f.normalize();b.normalize();return!1};c.WL=function(c,e,d,l,b,f){var k=new a.Hb,r=d[l].Pg,v=d[l].zn,g=d[l].em,h=-1,G=-1,m=-1,J=-1;if(!c&&l<d.length-1)var z=d[l+1],h=z.Pg,G=z.zn,m=z.em,J=z.dj;var n=-1,L=-1,p=-1,z=-1;0<l&&(z=
d[l-1],n=z.Pg,L=z.zn,p=z.em,z=z.dj);var t=e.U(r),u=e.Ra(g);return c?0==l||n!=r||L!=v||p!=u||2==z?(c=e.ic(g),null==c&&(e.pd(g,k),c=k),f.L(c.Eg(0)),b.au(f),f.normalize(),b.normalize(),!1):!0:0<l&&n==r&&L==v&&p==u&&2==z||l<d.length-1&&h==t&&G==v&&m==u&&2==J?(c=e.ic(g),null==c&&(e.pd(g,k),c=k),f.L(c.Eg(0)),b.au(f),f.normalize(),b.normalize(),!1):!0};c.LL=function(c,e,d,l,b,f,g){var k=new a.Hb,r=c.ic(b);null==r&&(c.pd(b,k),r=k);d=e[d];e=d.Pg;d=d.sB;b=c.U(e);if(1==d)f.L(r.Eg(1)),-1!=b&&b!=c.Rj(l)?(r=c.ic(b),
null==r&&(c.pd(b,k),r=k),g.L(r.Eg(0)),r=c.ic(e),null==r&&c.pd(e,k)):g.L(f),f.Kr(),g.normalize(),f.normalize();else if(0==d)g.L(r.Eg(d)),f.au(g),g.normalize(),f.normalize();else throw a.f.ya();};return c}();a.VL=c})(y||(y={}));(function(a){(function(c){c[c.Linear=0]="Linear";c[c.Angular=1]="Angular";c[c.Area=2]="Area"})(a.hO||(a.hO={}));var l=function(){function c(c,a,e){this.nd=a;this.Ai=e;this.aB=c}c.prototype.Eb=function(a){return a instanceof c?this.Ai===a.Ai:!1};c.kH=function(a){return 0!==a.nd?
null:-1===a.aB?new c(-1,2,a.Ai*a.Ai):c.ze(k[a.aB])};c.ze=function(c){c=e[c];return void 0===c?null:c};c.aR=function(a,e,d){var k=null;if(void 0!==d&&null!==d)try{"EPSG"===d.values[0]&&(k=c.ze(parseInt(d.values[1])))}catch(X){}null===k&&(k=new c(-1,a,e));return k};c.prototype.yc=function(){return this.aB};c.prototype.NG=function(c){if(c.nd!=this.nd)throw a.f.La();return this.Ai/c.Ai};c.li=function(c,a,e){return a.NG(e)*c};c.cG=function(c,a,e,d,k){e=e.NG(d);for(d=0;d<a;d++)k[d]=c[d]*e};return c}();
a.oc=l;for(var b=[109402,4046.8564224,109403,4046.87260987425,109463,100,109401,1E4,109461,225E8,109460,25E8,109451,1E-4,109444,404.68564224000005,109424,404.6849341289498,109428,404.68493792602754,109416,404.67838076760535,109420,404.68423895571647,109448,404.683871963536,109411,404.6872609874253,109450,.01,109408,3.34450944,109405,.09290304,109430,.09290354800069446,109423,.0929028774400711,109427,.09290287831176021,109441,.09290349665192114,109407,.09290137299531805,109440,.09290286332673177,109431,
.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109419,.09290271785025629,109447,.0929026336004445,109406,.09290341161327487,109453,6.4516E-4,109454,6.451625806477421E-4,109414,1E6,109445,.04046856422400001,109425,.04046849341289498,109429,.04046849379260275,109417,.04046783807676053,109421,.04046842389557164,109449,.0404683871963536,109412,.04046872609874253,109404,1,109410,1.000027193184865,109413,2589998.4703195216,109452,1E-6,109409,3429904,109458,3434290.937856,
109457,3434528.1495040003,109464,1.244521604938272E-7,109455,25.292852640000003,109456,25.29295381171408,109459,2.89612324,109439,2589988.110336,109462,.7168473118308245,109442,.83612736,109422,.83612589696064,109426,.836125904805842,109415,.8361123569578626,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109418,.8361244606523066,109446,.8361237024040001,109443,.8361307045194736],d=[9103,2.908882086657216E-4,9104,4.84813681109536E-6,9102,.0174532925199433,
9106,.01570796326794897,9105,.01570796326794897,9109,1E-6,9114,9.817477042468104E-4,1031,4.84813681109536E-9,9112,1.570796326794897E-4,9101,1,9113,1.570796326794897E-6],c=[109031,15E4,109461,109030,5E4,109460,1033,.01,109451,9097,20.1168,109444,9052,20.1167824,109424,9062,20.116782494375872,109428,9038,20.1166195164,109416,9042,20.116765121552632,109420,9301,20.116756,109448,9033,20.11684023368047,109411,109005,.1,109450,9014,1.8288,109408,9002,.3048,109405,9070,.3048008333333334,109430,9051,.3047997333333333,
109423,9061,.3047997347632708,109427,9095,.3048007491,109441,9005,.3047972654,109407,9094,.3047997101815088,109440,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9041,.304799471538676,109419,9300,.3047993333333334,109447,9003,.3048006096012192,109406,109008,.0254,109453,109009,.0254000508001016,109454,9036,1E3,109414,9098,.201168,109445,9053,.201167824,109425,9063,.2011678249437587,109429,9039,.201166195164,109417,9043,.2011676512155263,109421,9302,.20116756,
109449,9034,.2011684023368047,109412,9001,1,109404,9031,1.0000135965,109410,9035,1609.3472186944375,109413,1025,.001,109452,9030,1852,109409,109013,1853.184,109458,109012,1853.248,109457,109016,3.527777777777778E-4,109464,109010,5.0292,109455,109011,5.029210058420118,109456,109014,1.7018,109459,9093,1609.344,109439,109015,.8466683600033867,109462,9096,.9144,109442,9050,.9143992,109422,9060,.9143992042898124,109426,9037,.9143917962000001,109415,9084,.9143985307444408,109435,9085,.91439523,109436,9086,
.9143988,109437,9087,.9143985,109438,9040,.9143984146160287,109418,9099,.914398,109446,109002,.9144018288036576,109443,109001,.9144,109442,109003,20.1168,109444,109004,.201168,109445,109006,.01,109451,109007,.001,109452],e=[],k=[],r=0;r<b.length;r+=2)e[b[r]]=new l(b[r],2,b[r+1]);b=null;for(r=0;r<d.length;r+=2)e[d[r]]=new l(d[r],1,d[r+1]);d=null;for(r=0;r<c.length;r+=3)e[c[r]]=new l(c[r],0,c[r+1]),k[c[r]]=c[r+2];c=null})(y||(y={}));(function(a){var l=function(){function a(){this.Gb=this.qb=0}a.prototype.set=
function(a,c){void 0!==c?(this.qb=a,this.Gb=c):"number"===typeof a?(this.qb=a,this.Gb=0):(this.qb=a.qb,this.Gb=a.Gb)};a.prototype.value=function(){return this.qb};a.prototype.add=function(a){var c=this.qb+a.qb;a=this.Gb+a.Gb+2.220446049250313E-16*Math.abs(c);this.qb=c;this.Gb=a};a.prototype.hP=function(){var a=this.qb+1,c=this.Gb+2.220446049250313E-16*Math.abs(a);this.qb=a;this.Gb=c};a.prototype.aP=function(a,c){this.qb=a.qb+c.qb;this.Gb=a.Gb+c.Gb+2.220446049250313E-16*Math.abs(this.qb)};a.prototype.sub=
function(a){if("number"===typeof a){var c=this.qb-a;a=this.Gb+2.220446049250313E-16*Math.abs(c)}else c=this.qb-a.qb,a=this.Gb+a.Gb+2.220446049250313E-16*Math.abs(c);this.qb=c;this.Gb=a};a.prototype.Vg=function(a){var c=this.qb*a.qb;this.Gb=this.Gb*Math.abs(a.qb)+a.Gb*Math.abs(this.qb)+this.Gb*a.Gb+2.220446049250313E-16*Math.abs(c);this.qb=c};a.prototype.yp=function(a){var c=this.qb*a;this.Gb=this.Gb*Math.abs(a)+2.220446049250313E-16*Math.abs(c);this.qb=c};a.prototype.pm=function(a,c){var e=Math.abs(a.qb)*
Math.abs(c.qb);this.Gb=a.Gb*Math.abs(c.qb)+c.Gb*Math.abs(a.qb)+a.Gb*c.Gb+2.220446049250313E-16*Math.abs(e);this.qb=e};a.prototype.Xm=function(a){var c=Math.abs(a.qb),e=this.qb/a.qb,d=(this.Gb+Math.abs(e)*a.Gb)/c;a.Gb>.01*c&&(a=a.Gb/c,d*=1+(1+a)*a);this.qb=e;this.Gb=d+2.220446049250313E-16*Math.abs(e)};a.prototype.sqrt=function(){var a,c;0<=this.qb?(a=Math.sqrt(this.qb),c=this.qb>10*this.Gb?.5*this.Gb/a:this.qb>this.Gb?a-Math.sqrt(this.qb-this.Gb):Math.max(a,Math.sqrt(this.qb+this.Gb)-a),c+=2.220446049250313E-16*
Math.abs(a)):this.qb<-1*this.Gb?c=a=NaN:(a=0,c=Math.sqrt(this.Gb));this.qb=a;this.Gb=c};a.prototype.sin=function(a){var c=Math.sin(a.qb),e=Math.cos(a.qb);this.qb=c;c=Math.abs(c);this.Gb=(Math.abs(e)+.5*c*a.Gb)*a.Gb+2.220446049250313E-16*c};a.prototype.cos=function(a){var c=Math.sin(a.qb),e=Math.cos(a.qb);this.qb=e;e=Math.abs(e);this.Gb=(Math.abs(c)+.5*e*a.Gb)*a.Gb+2.220446049250313E-16*e};a.prototype.Lg=function(){return Math.abs(this.qb)<=this.Gb};a.prototype.kt=function(){return this.Lg()&&0!=this.Gb};
return a}();a.Xb=l})(y||(y={}));var I=new y.b,M=new y.b,N=new y.b,P=new y.b,S=new y.b;(function(a){var b;(function(a){a[a.closedPath=1]="closedPath";a[a.exteriorPath=2]="exteriorPath";a[a.ringAreaValid=4]="ringAreaValid"})(b||(b={}));var l=function(){function d(c,a,d,r,b,l,f){void 0!==a?(this.bb=c,this.Bk=a,this.Gl=d,this.Ji=r,this.Ba=l,this.PA=f,this.Tw=b):(this.bb=c.bb,this.Bk=c.Bk,this.Gl=c.Gl,this.Ji=c.Ji,this.Ba=c.Ba,this.PA=c.PA,this.Tw=c.Tw);this.mI=!0}d.prototype.next=function(){return this.mI?
(this.mI=!1,this.Ji):-1!=this.Ji?(this.Ji=this.bb.U(this.Ji),this.Ba++,-1!=this.Ji&&this.Ji!=this.Tw?this.Ji:this.XV()):-1};d.prototype.XV=function(){this.Gl=this.bb.Sb(this.Gl);for(this.Ba=0;-1!=this.Bk;){for(;-1!=this.Gl;this.Gl=this.bb.Sb(this.Gl))if(this.Tw=this.Ji=this.bb.cb(this.Gl),-1!=this.Ji)return this.Ji;this.Bk=this.bb.Ue(this.Bk);if(-1==this.Bk)break;if(!this.PA||a.T.Ic(this.bb.hc(this.Bk)))this.Gl=this.bb.Pb(this.Bk)}return-1};d.wR=function(c,a,k,r,b,l,f){return new d(c,a,k,r,b,l,f)};
return d}();a.LZ=l;b=function(){function d(){this.Xo=this.pn=this.Yk=this.md=this.el=this.jp=this.nj=this.sd=this.Bi=this.ph=this.wf=this.Gr=this.Jr=this.xb=this.nm=null;this.bx=this.rd=-1;this.ud=0;this.NA=!1;this.Gr=this.Jr=this.xb=null}d.prototype.ti=function(c){return null!=this.wf?this.wf[c]:null};d.prototype.th=function(c,a){if(null==this.wf){if(null==a)return;this.wf=[];for(var e=0,d=this.xb.D();e<d;e++)this.wf.push(null)}this.wf[c]=a};d.prototype.Lp=function(c,a){this.sd.P(c,1,a)};d.prototype.Kp=
function(c,a){this.sd.P(c,2,a)};d.prototype.sC=function(c,a){this.sd.P(c,6,a)};d.prototype.Lq=function(c){return this.sd.S(c,6)};d.prototype.Qx=function(c,a){this.sd.P(c,7,a)};d.prototype.cw=function(c){return this.sd.S(c,0)};d.prototype.EK=function(c,a){this.md.P(c,1,a)};d.prototype.IK=function(c,a){this.md.P(c,0,a)};d.prototype.TG=function(c){return this.md.S(c,7)};d.prototype.Ip=function(c,a){this.md.P(c,3,a)};d.prototype.Jp=function(c,a){this.md.P(c,4,a)};d.prototype.dW=function(c){null==this.md&&
(this.md=new a.ad(8));var e=this.md.Pe();this.md.P(e,2,c);this.md.P(e,5,0);this.md.P(e,6,0);this.md.P(e,7,e);return e};d.prototype.BS=function(c){this.md.kd(c)};d.prototype.fW=function(c){null==this.sd&&(this.sd=new a.ad(8),this.Dd=new a.ad(5),this.nj=new a.Sd(0),this.jp=new a.Sd(0));var e=this.sd.Pe();this.sd.P(e,0,e);this.sd.P(e,3,0);this.sd.P(e,6,0);this.Qx(e,c);e>=this.nj.size&&(c=16>e?16:a.J.truncate(3*e/2),this.nj.resize(c),this.jp.resize(c));this.nj.set(e,0);this.jp.set(e,0);return e};d.prototype.CG=
function(c){this.sd.kd(c)};d.prototype.Cz=function(c){this.Dd.kd(c);this.ud--};d.prototype.wJ=function(c){null==this.sd&&(this.sd=new a.ad(8),this.Dd=new a.ad(5),this.nj=new a.Sd(0),this.jp=new a.Sd(0));var e=this.Dd.Pe(),d=0<=c?c:e;this.Dd.P(e,0,d);if(0>c){if(d>=this.xb.D()){c=16>d?16:a.J.truncate(3*d/2);this.xb.resize(c);if(null!=this.wf)for(var r=0;r<c;r++)this.wf.push(null);null!=this.ph&&this.ph.resize(c);this.Jr=this.xb.Pa(0)}this.xb.rb(d,-1E38,-1E38);null!=this.wf&&(this.wf[d]=null);null!=
this.ph&&this.ph.write(d,1)}this.Dd.P(e,4,2*d);this.ud++;return e};d.prototype.Vj=function(c,a,d){var e=-1!=a?this.Ra(a):this.Rj(c),k=-1!=e?this.U(e):-1,b=this.wJ(null==d?this.ud:-1),l=this.Za(b);null!=d&&this.xb.uu(l,d);this.Aj(b,c);this.Kc(b,k);this.Lc(b,e);-1!=k&&this.Lc(k,b);-1!=e&&this.Kc(e,b);d=this.Qb(c);e=this.cb(c);-1==a&&this.sh(c,b);a==e&&this.jg(c,b);d&&-1==k&&(this.Kc(b,b),this.Lc(b,b));this.mk(c,this.Ka(c)+1);c=this.ng(c);this.kk(c,this.D(c)+1);return b};d.prototype.bn=function(){null==
this.Xo&&(this.Xo=new a.Wa(this.xb.description));return this.Xo};d.prototype.Hp=function(c,a){this.md.P(c,2,this.md.S(c,2)&-134217729||(1==a?134217728:0))};d.prototype.xo=function(c){return 0!=(this.md.S(c,2)&134217728)?1:0};d.prototype.eP=function(c){var a=this.bh(c.G(),c.description);1736==c.G()&&this.Hp(a,c.xo());this.fF(a,c);return a};d.prototype.fP=function(c){var a=this.bh(c.G(),c.description);this.gF(a,c);return a};d.prototype.OW=function(c,e){null==this.sd&&(this.sd=new a.ad(8),this.Dd=new a.ad(5),
this.nj=new a.Sd(0),this.jp=new a.Sd(0));this.sd.Qe(this.sd.xd+c);this.Dd.Qe(this.Dd.xd+e);this.nj.yb(this.nj.size+c);this.jp.yb(this.jp.size+c)};d.prototype.fF=function(c,e){this.OW(e.aa(),e.D());this.nm.Jd(e,0,e.D());this.Jr=this.xb.Pa(0);for(var d=null!=this.wf&&null!=e.cf,r=0,b=e.aa();r<b;r++)if(!(2>e.Ka(r))){var l=this.Yf(c,-1);this.ao(l,e.Qb(r));for(var f=e.wa(r),g=e.Gc(r);f<g;f++){var h=this.Vj(l,-1,null);if(d)if(h=this.Za(h),0!=(e.iH(f)&1))this.th(h,null);else{var m=new a.Cg;e.ic(f,m,!0);
this.th(h,m.get())}}}};d.prototype.gF=function(c,a){this.nm.Jd(a,0,a.D());this.Jr=this.xb.Pa(0);c=this.Yf(c,-1);var e=0;for(a=a.D();e<a;e++)this.Vj(c,-1,null)};d.prototype.FY=function(c,e,d){var k=this.U(c);if(-1==k)throw a.f.ya();for(var b=this.bn(),l=this.ld(c),f=0,g=e.Rl(d);f<g;f++){var h=this.Za(c),m=this.U(c),z=e.Mq(d,f);0==f&&(z.Dp(b),this.Yh(c,b));322==z.G()?this.th(h,null):this.th(h,a.T.ne(z));z.Bp(b);f<g-1?c=this.Vj(l,m,b):this.Yh(k,b)}};d.prototype.EY=function(c,e,d){var k=this.U(c);if(-1==
k)throw a.f.ya();for(var b=this.bn(),l=this.ld(c),f=0,g=e.Rl(d);f<g;f++){var h=this.Za(c),m=this.U(c),z=e.Mq(d,g-f-1);0==f&&(z.Bp(b),this.Yh(c,b));322==z.G()?this.th(h,null):this.th(h,a.T.ne(z));z.Dp(b);f<g-1?c=this.Vj(l,m,b):this.Yh(k,b)}};d.prototype.SG=function(){var c=new a.h;c.Oa();for(var e=this.Pr(),d=new a.b,b=!0,l=e.next();-1!=l;l=e.next())this.w(l,d),b?c.Nb(d.x,d.y):c.ml(d.x,d.y),b=!1;return c};d.prototype.Jb=function(c){var e=c.G();if(a.T.Ic(e))return this.eP(c);if(550==e)return this.fP(c);
throw a.f.ya();};d.prototype.vP=function(c,e){var d=e.G();if(a.T.Ic(d))this.fF(c,e);else if(550==d)this.gF(c,e);else throw a.f.ya();};d.prototype.jP=function(c,e){var d=this.bh(1736,c.description);if(2>c.Ka(e))return d;this.nm.Jd(c,c.wa(e),c.Gc(e));this.Jr=this.xb.Pa(0);var b=this.Yf(d,-1);this.ao(b,c.Qb(e)||!0);var l=null!=this.wf&&null!=c.cf,f=c.wa(e);for(e=c.Gc(e);f<e;f++){var g=this.Vj(b,-1,null);if(l)if(g=this.Za(g),0!=(c.iH(f)&1))this.th(g,null);else{var h=new a.Cg;c.ic(f,h,!0);this.th(g,h.get())}}return d};
d.prototype.Se=function(c){var e=this.hc(c),d=a.tM.bh(e,this.nm.description),b=this.D(c);if(0==b)return d;if(a.T.Ic(e)){for(var e=this.aa(c),l=a.Uc.wh(e+1),f=a.Uc.vq(e+1,0),g=d.description,h=0,m=g.Ea;h<m;h++){for(var z=g.zd(h),n=a.na.Xa(z),p=a.Uc.pz(z,b),t=this.xb.Pa(z),u=0,q=0,y=0,x=this.Pb(c);-1!=x;x=this.Sb(x)){var A=0;this.Qb(x)&&(A|=1);this.QU(x)&&(A|=4);0!=A&&f.hC(q,A);var w=this.Ka(x);l.write(q++,y);y+=w;if(0==z)for(var w=t,C=p,D=new a.b,A=this.cb(x);u<y;A=this.U(A),u++){var F=this.Za(A);w.fc(2*
F,D);C.ho(2*u,D)}else for(A=this.cb(x);u<y;A=this.U(A),u++)for(F=this.Za(A),C=0;C<n;C++)D=t.Of(F*n+C),p.Dm(u*n+C,D)}d.Zn(z,p);l.write(e,b)}d.FK(f);d.GK(l);d.Dc(16777215)}else if(550==e){g=d.description;d.resize(b);h=0;for(m=g.Ea;h<m;h++){z=g.zd(h);n=a.na.Xa(z);p=d.Pa(z);t=this.xb.Pa(z);u=0;x=this.Pb(c);w=this.Ka(x);for(A=this.cb(x);u<w;A=this.U(A),u++)for(F=this.Za(A),C=0;C<n;C++)D=t.Of(F*n+C),p.Dm(u*n+C,D);d.Zn(z,p)}d.Dc(16777215)}return d};d.prototype.$B=function(c){for(var a=this.Pb(c);-1!=a;a=
this.Qr(a));var a=this.HT(c),d=this.Ue(c);-1!=a?this.EK(a,d):this.rd=d;-1!=d?this.IK(d,a):this.bx=a;this.BS(c)};d.prototype.bh=function(c,e){return void 0===e?this.fG(c,a.ye.Ig()):this.fG(c,e)};d.prototype.fG=function(c,e){c=this.dW(c);null==this.xb?this.xb=this.nm=new a.Ed(e):this.nm.om(e);this.Gr=this.nm.description;this.NA=1<this.Gr.Ea;-1==this.rd?this.rd=c:(this.IK(c,this.bx),this.EK(this.bx,c));return this.bx=c};d.prototype.Ue=function(c){return this.md.S(c,1)};d.prototype.HT=function(c){return this.md.S(c,
0)};d.prototype.hc=function(c){return this.md.S(c,2)&2147483647};d.prototype.wK=function(c,e,d){e=this.Yk[e];c=this.TG(c);c>=e.size&&e.resize(Math.max(a.J.truncate(1.25*c),16),-1);e.write(c,d)};d.prototype.UG=function(c,a){c=this.TG(c);a=this.Yk[a];return c<a.size?a.read(c):-1};d.prototype.gG=function(){null==this.Yk&&(this.Yk=[]);for(var c=0;c<this.Yk.length;c++)if(null==this.Yk[c])return this.Yk[c]=a.Uc.wh(0),c;this.Yk.push(a.Uc.wh(0));return this.Yk.length-1};d.prototype.tX=function(c){this.Yk[c]=
null};d.prototype.Pb=function(c){return this.md.S(c,3)};d.prototype.Wv=function(c){return this.md.S(c,4)};d.prototype.D=function(c){return this.md.S(c,5)};d.prototype.aa=function(c){return this.md.S(c,6)};d.prototype.zq=function(c,e,d){for(var k=0,b=this.rd;-1!=b;b=this.Ue(b)){var l=this.hc(b);if(a.T.Ic(l)&&(!d||1736==l))for(var l=1736==this.hc(b),f=this.Pb(b);-1!=f;){for(var g=0,h=this.cb(f);g<a.J.truncate(this.Ka(f)/2);){var m=this.U(h);if(-1==m)break;var z=this.Za(h),n=this.ti(z);null!=n?z=n.Rb():
(n=this.Za(m),z=this.xb.ws(z,n));z<=c?(0==z?0==k&&(k=-1):k=1,m!=this.Rj(f)&&(this.IC(m,h),this.td(m,!0))):h=this.U(h);g++}g=this.cb(f);for(h=this.Qb(f)?g:this.Rj(f);0<this.Ka(f);)if(m=this.Ra(h),-1!=m){var p=this.Za(m),n=this.ti(p);null!=n?z=n.Rb():(z=this.Za(h),z=this.xb.ws(z,p));if(z<=c)0==z?0==k&&(k=-1):k=1,this.IC(m,h),this.td(m,!1),g==m&&(g=this.cb(f));else if(h=this.Ra(h),h==g)break}else{this.td(h,!0);0==k&&(k=-1);break}h=this.Ka(f);e&&(l?3>h:2>h)?(f=this.Qr(f),k=0<h?1:0==k?-1:k):f=this.Sb(f)}}return k};
d.prototype.IC=function(c,a){var e=this.Za(c),d=this.Za(a);null!=this.ph&&(e=this.ph.read(e),this.ph.write(d,e));if(null!=this.Bi)for(d=0,e=this.Bi.length;d<e;d++)if(null!=this.Bi[d]){var b=this.Sa(c,d);-1!=b&&this.Va(a,d,b)}};d.prototype.zm=function(c,e,d){var k=0,b=this.U(c);if(-1==b)throw a.f.ya();for(var l=this.Za(c),f=this.Za(b),g=this.ti(l),h=null==g?this.xb.ws(l,f):g.Rb(),m=0;m<d;m++){var z=e[m];if(0<z&&1>z){var n=z;null!=g&&(n=0<h?g.Cy(z)/h:0);this.xb.CE(l,f,n,this.bn());var p=this.Vj(this.ld(c),
b,this.bn());k++;if(null!=g){var t=g.Hl(0,z),n=this.Za(this.Ra(p));this.th(n,t);this.Qf(p,t.Cc());if(m==d-1||1==e[m+1])z=g.Hl(z,1),this.th(n,z)}}}return k};d.prototype.DY=function(c,e,d){var k=0,b=this.U(c);if(-1==b)throw a.f.X("internal error");var l=this.Za(c),f=this.Za(b),g=this.ti(l),h=null==g?this.xb.ws(l,f):g.Rb(),m=0;c=this.ld(c);for(var z=0;z<d;z++){var n=e[z];if(m<n&&1>n){var p=n;null!=g&&(p=0<h?g.Cy(n)/h:0);this.xb.CE(l,f,p,this.bn());p=this.sU(c,b,this.bn());k++;if(null!=g){var m=g.Hl(m,
n),t=this.Za(this.Ra(p));this.th(t,m);this.rb(p,m.sa,m.oa);if(z==d-1||1==e[z+1])m=g.Hl(n,1),p=this.Za(p),this.th(p,m)}}m=n}return k};d.prototype.sU=function(c,a,d){var e=-1!=a?this.Ra(a):this.Rj(c),k=-1!=e?this.U(e):-1,b=this.wJ(null==d?this.ud:-1),l=this.Za(b);null!=d&&this.xb.uu(l,d);this.Aj(b,c);this.Kc(b,k);this.Lc(b,e);-1!=k&&this.Lc(k,b);-1!=e&&this.Kc(e,b);d=this.Qb(c);e=this.cb(c);-1==a&&this.sh(c,b);a==e&&(d&&-1!=e||this.jg(c,b));d&&-1==k&&(this.Kc(b,b),this.Lc(b,b));this.mk(c,this.Ka(c)+
1);c=this.ng(c);this.kk(c,this.D(c)+1);return b};d.prototype.DF=function(c,e,d){var k=this.Za(e),b=this.Za(d);if(0>k||b>this.ud-1)throw a.f.F("invalid call");if(k>b&&!this.Qb(c))throw a.f.F("cannot iterate across an open path");for(c=0;e!=d;e=this.U(e))k=this.Za(e),b=this.ti(k),null!=b?c+=b.Rb():(b=this.Za(this.U(e)),c+=this.xb.ws(k,b));return c};d.prototype.Yh=function(c,a){var e=this.Za(c);this.xb.uu(e,a);e=this.ti(e);null!=e&&e.setStart(a);c=this.Ra(c);-1!=c&&(c=this.Za(c),null!=this.ti(c)&&e.setEnd(a))};
d.prototype.wj=function(c,a){c=this.Za(c);this.xb.Ae(c,a)};d.prototype.Qf=function(c,a){this.rb(c,a.x,a.y)};d.prototype.rb=function(c,a,d){var e=this.Za(c);this.xb.rb(e,a,d);e=this.ti(e);null!=e&&e.vC(a,d);c=this.Ra(c);-1!=c&&(c=this.Za(c),null!=this.ti(c)&&e.vm(a,d))};d.prototype.w=function(c,a){this.xb.w(this.Dd.S(c,0),a)};d.prototype.Nc=function(c,a){this.xb.xa[0].fc(2*this.Dd.S(c,0),a)};d.prototype.Aa=function(c){var e=new a.b;this.xb.w(this.Dd.S(c,0),e);return e};d.prototype.oH=function(c,a){this.Jr.fc(2*
c,a)};d.prototype.Yc=function(c,a,d){return this.xb.Yc(c,this.Za(a),d)};d.prototype.setAttribute=function(c,a,d,b){this.xb.setAttribute(c,this.Za(a),d,b)};d.prototype.Za=function(c){return this.Dd.S(c,0)};d.prototype.nf=function(c){var e=new a.b;this.w(c,e);return e.y};d.prototype.Tq=function(c,a){c=this.Za(c);a=this.Za(a);var e=this.xb.xa[0].g;return e[2*c]===e[2*a]&&e[2*c+1]===e[2*a+1]};d.prototype.pw=function(c,a){c=this.Za(c);var e=this.xb.xa[0].g;return e[2*c]===a.x&&e[2*c+1]===a.y};d.prototype.pY=
function(c,e){1>e&&(e=1);if(null==this.ph){if(1==e)return;this.ph=a.Uc.Vm(this.xb.D(),1)}c=this.Za(c);c>=this.ph.size&&this.ph.resize(c+1,1);this.ph.write(c,e)};d.prototype.nH=function(c){c=this.Za(c);return null==this.ph||c>=this.ph.size?1:this.ph.read(c)};d.prototype.Va=function(c,a,d){a=this.Bi[a];c=this.Za(c);a.size<this.xb.D()&&a.resize(this.xb.D(),-1);a.write(c,d)};d.prototype.Sa=function(c,a){c=this.Za(c);a=this.Bi[a];return c<a.size?a.read(c):-1};d.prototype.Vd=function(){null==this.Bi&&(this.Bi=
[]);for(var c=0;c<this.Bi.length;c++)if(null==this.Bi[c])return this.Bi[c]=a.Uc.wh(0,-1),c;this.Bi.push(a.Uc.wh(0,-1));return this.Bi.length-1};d.prototype.ke=function(c){this.Bi[c]=null};d.prototype.ic=function(c){return null!=this.wf?(c=this.Za(c),this.wf[c]):null};d.prototype.pd=function(c,e){var d=this.Dd.S(c,2);if(-1==d)return!1;if(this.NA){var b=new a.Wa;this.wj(c,b);e.setStart(b);this.wj(d,b);e.setEnd(b)}else this.xb.Nc(this.Dd.S(c,0),I),e.Rm(0,I),this.xb.Nc(this.Dd.S(d,0),I),e.Rm(1,I);return!0};
d.prototype.fX=function(c,e,d){if(this.NA){var k=new a.Wa;this.wj(c,k);d.setStart(k);this.wj(e,k);d.setEnd(k)}else this.xb.Nc(c,I),d.Rm(0,I),this.xb.Nc(e,I),d.Rm(1,I)};d.prototype.Yf=function(c,e){var d;if(-1!=e){if(c!=this.ng(e))throw a.f.ya();d=this.bt(e)}else d=this.Wv(c);var b=this.fW(c);-1!=e&&this.Lp(e,b);this.Kp(b,e);this.Lp(b,d);-1!=d?this.Kp(d,b):this.Ip(c,b);-1==e&&this.Jp(c,b);this.wm(c,this.aa(c)+1);return b};d.prototype.AH=function(c,a,d,b){c=this.Yf(c,-1);for(var e=0,k=a,l=!1;k==d&&
(l=!0),this.Aj(k,c),e++,k=this.U(k),k!=a;);this.ao(c,!0);this.mk(c,e);l&&(a=d);this.jg(c,a);this.sh(c,this.Ra(a));this.Np(c,!1);null!=b&&(b[0]=l);return c};d.prototype.Qr=function(c){var a=this.bt(c),d=this.Sb(c),b=this.ng(c);-1!=a?this.Kp(a,d):this.Ip(b,d);-1!=d?this.Lp(d,a):this.Jp(b,a);this.CQ(c);this.wm(b,this.aa(b)-1);this.CG(c);return d};d.prototype.CQ=function(c){var a=this.cb(c);if(-1!=a){for(var d=0,b=this.Ka(c);d<b;d++){var l=a,a=this.U(a);this.Cz(l)}a=this.ng(c);this.kk(a,this.D(a)-this.Ka(c))}this.mk(c,
0)};d.prototype.Sb=function(c){return this.sd.S(c,2)};d.prototype.bt=function(c){return this.sd.S(c,1)};d.prototype.Ka=function(c){return this.sd.S(c,3)};d.prototype.Qb=function(c){return 0!=(this.Lq(c)&1)};d.prototype.ao=function(c,a){if(this.Qb(c)!=a){if(0<this.Ka(c)){var e=this.cb(c),d=this.Rj(c);a?(this.Kc(d,e),this.Lc(e,d)):(this.Kc(d,-1),this.Lc(e,-1));e=this.Za(d);this.th(e,null)}this.sC(c,(this.Lq(c)|1)-1|(a?1:0))}};d.prototype.ng=function(c){return this.sd.S(c,7)};d.prototype.QU=function(c){return 0!=
(this.Lq(c)&2)};d.prototype.nC=function(c,a){this.sC(c,(this.Lq(c)|2)-2|(a?2:0))};d.prototype.fA=function(c){if(this.WU(c))return this.nj.get(this.cw(c));var e=new a.Hb,d=this.cb(c);if(-1==d)return 0;var b=new a.b;this.w(d,b);for(var l=0,f=0,g=this.Ka(c);f<g;f++,d=this.U(d)){var h=this.ic(d);if(null==h){if(!this.pd(d,e))continue;h=e}l+=h.By(b.x,b.y)}this.Np(c,!0);this.nj.set(this.cw(c),l);return l};d.prototype.Zr=function(c,a,d){a=this.el[a];c=this.cw(c);a.size<this.nj.size&&a.resize(this.nj.size,
-1);a.write(c,d)};d.prototype.Tj=function(c,a){c=this.cw(c);a=this.el[a];return c<a.size?a.read(c):-1};d.prototype.qz=function(){null==this.el&&(this.el=[]);for(var c=0;c<this.el.length;c++)if(null==this.el[c])return this.el[c]=a.Uc.wh(0),c;this.el.push(a.Uc.wh(0));return this.el.length-1};d.prototype.aC=function(c){this.el[c]=null};d.prototype.WV=function(c,e,d){if(-1==d)throw a.f.F();if(e!=d){var k=this.Sb(d),b=this.bt(d),l=this.ng(d);-1==b?this.Ip(l,k):this.Kp(b,k);-1==k?this.Jp(l,b):this.Lp(k,
b);this.kk(l,this.D(l)-this.Ka(d));this.wm(l,this.aa(l)-1);b=-1==e?this.Wv(c):this.bt(e);this.Lp(d,b);this.Kp(d,e);-1==e?this.Jp(c,d):this.Lp(e,d);-1==b?this.Ip(c,d):this.Kp(b,d);this.kk(c,this.D(c)+this.Ka(d));this.wm(c,this.aa(c)+1);this.Qx(d,c)}};d.prototype.Kj=function(c,a){this.xb.Ae(this.Za(a),this.bn());this.Vj(c,-1,this.bn())};d.prototype.td=function(c,e){var d=this.ld(c),b=this.Ra(c),l=this.U(c);-1!=b&&this.Kc(b,l);var f=this.Ka(d);c==this.cb(d)&&this.jg(d,1<f?l:-1);-1!=l&&this.Lc(l,b);c==
this.Rj(d)&&this.sh(d,1<f?b:-1);if(-1!=b&&-1!=l){var b=this.Za(b),g=this.Za(l);e?(e=this.ti(b),null!=e&&(b=new a.b,this.xb.w(g,b),e.Zc(b))):(g=this.Za(c),e=this.ti(g),this.th(b,e),null!=e&&(b=this.xb.Aa(b),e.Mc(b)))}this.mk(d,f-1);d=this.ng(d);this.kk(d,this.D(d)-1);this.Cz(c);return l};d.prototype.cb=function(c){return this.sd.S(c,4)};d.prototype.Rj=function(c){return this.sd.S(c,5)};d.prototype.U=function(c){return this.Dd.S(c,2)};d.prototype.Ra=function(c){return this.Dd.S(c,1)};d.prototype.ld=
function(c){return this.Dd.S(c,3)};d.prototype.pc=function(c,a){return this.Vj(c,-1,a)};d.prototype.Pr=function(c){if(void 0===c)return this.Pr(!1);if(c instanceof l)return new l(c);var e,d=-1,b=-1,v=-1,f=0,g=!1;for(e=this.rd;-1!=e;e=this.Ue(e))if(!c||a.T.Ic(this.hc(e))){for(d=this.Pb(e);-1!=d;d=this.Sb(d))if(v=b=this.cb(d),f=0,-1!=b){g=!0;break}if(g)break}return l.wR(this,e,d,b,v,f,c)};d.prototype.Xc=function(c){this.nm.Xc(c);if(null!=this.wf)for(var a=0,d=this.wf.length;a<d;a++)null!=this.wf[a]&&
this.wf[a].Xc(c)};d.prototype.as=function(c,a,d,b){b?this.FY(c,a,d):this.EY(c,a,d)};d.prototype.Lc=function(c,a){this.Dd.P(c,1,a)};d.prototype.Kc=function(c,a){this.Dd.P(c,2,a)};d.prototype.Aj=function(c,a){this.Dd.P(c,3,a)};d.prototype.mk=function(c,a){this.sd.P(c,3,a)};d.prototype.jg=function(c,a){this.sd.P(c,4,a)};d.prototype.sh=function(c,a){this.sd.P(c,5,a)};d.prototype.wm=function(c,a){this.md.P(c,6,a)};d.prototype.kk=function(c,a){this.md.P(c,5,a)};d.prototype.eK=function(c){var a=c;do{var d=
this.U(a);this.Kc(a,this.Ra(a));this.Lc(a,d);a=d}while(a!=c)};d.prototype.yC=function(c){this.ud=c};d.prototype.Rr=function(c){var a=this.bt(c),d=this.Sb(c),b=this.ng(c);-1!=a?this.Kp(a,d):this.Ip(b,d);-1!=d?this.Lp(d,a):this.Jp(b,a);this.jg(c,-1);this.sh(c,-1);this.CG(c)};d.prototype.Mi=function(c,e){var d=this.Ra(c),b=this.U(c);-1!=d&&this.Kc(d,b);-1!=b&&this.Lc(b,d);if(-1!=d&&-1!=b)if(d=this.Za(d),b=this.Za(b),e){if(e=this.ti(d),null!=e){var l=new a.b;this.xb.w(b,l);e.Zc(l)}}else b=this.Za(c),
e=this.ti(b),this.th(d,e),null!=e&&(l=new a.b,this.xb.w(d,l),e.Mc(l));this.Cz(c)};d.prototype.WU=function(c){return 0!=(this.Lq(c)&4)};d.prototype.Np=function(c,a){this.sC(c,(this.Lq(c)|4)-4|(a?4:0))};d.prototype.Wx=function(c,a){var e=this.Dd.g;this.xb.tc();var d=this.xb.xa[0].g;c.Gd(0,a,function(c,a){c=e[5*c];a=e[5*a];var k=d[2*c];c=d[2*c+1];var b=d[2*a];a=d[2*a+1];return c<a?-1:c>a?1:k<b?-1:k>b?1:0})};d.prototype.cU=function(){for(var c=this.rd;-1!=c;c=this.Ue(c))if(!a.T.Ic(this.hc(c)))return!0;
return!1};d.prototype.DC=function(c,a){for(var e=this.Pb(c),d=this.Pb(a),b=this.Wv(c),l=this.Wv(a),f=this.Pb(c);-1!=f;f=this.Sb(f))this.Qx(f,a);for(f=this.Pb(a);-1!=f;f=this.Sb(f))this.Qx(f,c);this.Ip(c,d);this.Ip(a,e);this.Jp(c,l);this.Jp(a,b);e=this.D(c);d=this.aa(c);b=this.aa(a);this.kk(c,this.D(a));this.kk(a,e);this.wm(c,b);this.wm(a,d);e=this.md.S(c,2);this.md.P(c,2,this.md.S(a,2));this.md.P(a,2,e)};return d}();a.fd=b})(y||(y={}));(function(a){var b=function(b){function d(c,e,d,l){b.call(this);
this.R=new a.h;void 0===c?this.ZF():"number"===typeof c?this.XQ(c,e,d,l):c instanceof a.Wa?void 0!==e?this.Dv(c,e,d):this.YQ(c):c instanceof a.na?void 0!==e?this.$Q(c,e):this.ZQ(c):c instanceof a.h?this.WQ(c):this.ZF()}K(d,b);d.prototype.Dv=function(c,e,d){this.description=a.ye.Ig();this.R.Oa();c.u()||this.bv(c,e,d)};d.prototype.WQ=function(c){this.description=a.ye.Ig();this.R.I(c);this.R.normalize()};d.prototype.ZQ=function(c){if(null==c)throw a.f.F();this.description=c;this.R.Oa()};d.prototype.$Q=
function(c,e){if(null==c)throw a.f.F();this.description=c;this.R.I(e);this.R.normalize()};d.prototype.ZF=function(){this.description=a.ye.Ig();this.R.Oa()};d.prototype.YQ=function(c){this.description=a.ye.Ig();this.R.Oa();c.u()||this.bv(c)};d.prototype.XQ=function(c,e,d,b){this.description=a.ye.Ig();this.I(c,e,d,b)};d.prototype.I=function(c,a,d,b){this.Bc();if("number"===typeof c)this.R.I(c,a,d,b);else for(this.Oa(),a=0,d=c.length;a<d;a++)this.Nb(c[a])};d.prototype.Gp=function(c){this.Bc();if(!c.YU())throw a.f.F();
this.R.I(c)};d.prototype.Oa=function(){this.Bc();this.R.Oa()};d.prototype.u=function(){return this.R.u()};d.prototype.N=function(){return this.R.N()};d.prototype.fa=function(){return this.R.fa()};d.prototype.Gk=function(){return this.R.Gk()};d.prototype.Cq=function(){return this.R.Cq()};d.prototype.Bq=function(){return this.R.Wf()};d.prototype.Nb=function(c){if(c instanceof a.b)this.Bc(),this.R.Nb(c);else if(c instanceof a.h)this.Bc(),this.R.Nb(c);else if(c instanceof a.Wa){if(this.Bc(),!c.Hc()){var e=
c.description;this.description!=e&&this.om(e);if(this.u())this.bv(c);else{this.R.Nb(c.w());for(var k=1,b=e.Ea;k<b;k++)for(var l=e.Id(k),f=a.na.Xa(l),g=0;g<f;g++){var h=c.Yc(l,g),m=this.xf(l,g);m.Nb(h);setInterval(l,g,m)}}}}else if(c instanceof d&&!c.u())for(e=c.description,e!=this.description&&this.om(e),this.R.Nb(c.R),k=1,b=e.Ea;k<b;k++)for(l=e.zd(k),f=a.na.Xa(l),g=0;g<f;g++)h=c.xf(l,g),m=this.xf(l,g),m.Nb(h),setInterval(l,g,m)};d.prototype.bv=function(c,e,d){if(void 0!==e){this.R.I(c.w(),e,d);e=
c.description;d=1;for(var k=e.Ea;d<k;d++)for(var b=e.Id(d),l=a.na.Xa(b),f=0;f<l;f++){var g=c.Yc(b,f);this.setInterval(b,f,g,g)}}else for(this.R.I(c.la[0],c.la[1]),e=c.description,d=1,k=e.Ea;d<k;d++)for(b=e.Id(d),l=a.na.Xa(b),f=0;f<l;f++)g=c.Yc(b,f),this.setInterval(b,f,g,g)};d.prototype.setInterval=function(c,e,d,b){var k=null;"number"===typeof d?k=new a.Ac(d,b):k=d;this.Bc();if(0==c)if(0==e)this.R.o=k.ca,this.R.v=k.ha;else if(1==e)this.R.A=k.ca,this.R.B=k.ha;else throw a.f.vd();else this.KE(0,c,
e,k.ca),this.KE(1,c,e,k.ha)};d.prototype.O=function(c,a){this.Bc();this.R.O(c,a)};d.prototype.Xc=function(c){if(c instanceof a.Hd)this.Bc(),c.JC(this.R);else if(this.Bc(),!this.R.u()){var e=new a.cM;this.Cp(e);e.PU()?e.Oa():c.JC(e)}};d.prototype.copyTo=function(c){if(c.G()!=this.G())throw a.f.F();c.Bc();c.description=this.description;c.R.I(this.R);c.la=null;if(null!=this.la){c.Xu();for(var e=0;e<2*(this.description.af.length-2);e++)c.la[e]=this.la[e]}};d.prototype.Ja=function(){return new d(this.description)};
d.prototype.hf=function(){return this.R.HG()};d.prototype.Rb=function(){return this.R.YG()};d.prototype.G=function(){return 197};d.prototype.tb=function(){return 2};d.prototype.Rn=function(c){this.copyTo(c)};d.prototype.s=function(c){c.o=this.R.o;c.A=this.R.A;c.v=this.R.v;c.B=this.R.B};d.prototype.Cp=function(c){c.o=this.R.o;c.A=this.R.A;c.v=this.R.v;c.B=this.R.B;c.I(this.R.o,this.R.A,this.ae(0,1,0),this.R.v,this.R.B,this.ae(1,1,0))};d.prototype.xf=function(c,e){var d=new a.Ac;d.I(this.ae(0,c,e),
this.ae(1,c,e));return d};d.prototype.ig=function(c,e){e.Fg(this.description);var d=this.description.Ea-1;switch(c){case 0:for(c=0;c<d;c++)for(var b=this.description.zd(c),l=a.na.Xa(b),f=0;f<l;f++)e.setAttribute(b,f,this.ae(0,b,f));e.rb(this.R.o,this.R.A);break;case 1:for(c=0;c<d;c++)for(b=this.description.zd(c),l=a.na.Xa(b),f=0;f<l;f++)e.setAttribute(b,f,this.ae(1,b,f));e.rb(this.R.o,this.R.B);break;case 2:for(c=0;c<d;c++)for(b=this.description.zd(c),l=a.na.Xa(b),f=0;f<l;f++)e.setAttribute(b,f,this.ae(0,
b,f));e.rb(this.R.v,this.R.B);break;case 3:for(c=0;c<d;c++)for(b=this.description.zd(c),l=a.na.Xa(b),f=0;f<l;f++)e.setAttribute(b,f,this.ae(1,b,f));e.rb(this.R.v,this.R.A);break;default:throw a.f.vd();}};d.prototype.Fx=function(c,a){c=this.R.Fx(c);a.ka(c.x,c.y)};d.prototype.aT=function(c,a){return a*(c.Dr-2)};d.prototype.IG=function(c,e,d){if(this.R.u())throw a.f.X("empty geometry");if(0==e)return 0!=c?0!=d?this.R.B:this.R.v:0!=d?this.R.A:this.R.o;if(d>=a.na.Xa(e))throw a.f.F();var k=this.description.mg(e);
this.Xu();return 0<=k?this.la[this.aT(this.description,c)+this.description.DT(k)-2+d]:a.na.pe(e)};d.prototype.Xu=function(){this.Bc();if(null==this.la&&2<this.description.af.length){this.la=[];for(var c=d.$(this.description,0),e=d.$(this.description,1),k=0,b=1,l=this.description.Ea;b<l;b++)for(var f=this.description.zd(b),g=a.na.Xa(f),f=a.na.pe(f),h=0;h<g;h++)this.la[c+k]=f,this.la[e+k]=f,k++}};d.prototype.mo=function(c){if(null!=this.la)if(2<c.af.length){for(var e=a.ye.ux(c,this.description),k=[],
b=d.$(this.description,0),l=d.$(this.description,1),f=d.$(c,0),g=d.$(c,1),h=0,m=1,z=c.Ea;m<z;m++){var n=c.zd(m),p=a.na.Xa(n);if(-1==e[m])for(var t=a.na.pe(n),n=0;n<p;n++)k[f+h]=t,k[g+h]=t,h++;else for(t=this.description.wk(e[m])-2,n=0;n<p;n++)k[f+h]=this.la[b+t],k[g+h]=this.la[l+t],h++,t++}this.la=k}else this.la=null;this.description=c};d.prototype.ae=function(c,e,k){if(this.R.u())throw a.f.X("This operation was performed on an Empty Geometry.");if(0==e)return 0!=c?0!=k?this.R.B:this.R.v:0!=k?this.R.A:
this.R.o;if(k>=a.na.Xa(e))throw a.f.vd();var b=this.description.mg(e);return 0<=b?(this.Xu(),this.la[d.$(this.description,c)+this.description.wk(b)-2+k]):a.na.pe(e)};d.prototype.KE=function(c,e,k,b){this.Bc();if(0==e)0!=c?0!=k?this.R.B=b:this.R.v=b:0!=k?this.R.A=b:this.R.o=b;else{if(k>=a.na.Xa(e))throw a.f.vd();if(!this.hasAttribute(e)){if(a.na.OH(e,b))return;this.Ud(e)}e=this.description.mg(e);this.Xu();this.la[d.$(this.description,c)+this.description.wk(e)-2+k]=b}};d.$=function(c,a){return a*(c.af.length-
2)};d.prototype.Ma=function(c){this.Bc();var e=new a.h;c.s(e);return this.R.Ma(e)};d.prototype.Yb=function(c){return c instanceof a.h?this.R.Yb(c):this.R.Yb(c.R)};d.prototype.wv=function(c,a,d){this.Bc();c.u()?this.Oa():void 0!==a?this.bv(c,a,d):this.R.wv(c.Be(),c.nf())};d.prototype.offset=function(c,a){this.Bc();this.R.offset(c,a)};d.prototype.normalize=function(){this.Bc();this.R.normalize()};d.prototype.Wf=function(c){if(void 0!==c)if(c.Fg(this.description),this.u())c.Oa();else{for(var e=this.description.Ea,
d=1;d<e;d++)for(var b=this.description.zd(d),l=a.na.Xa(b),f=0;f<l;f++){var g=.5*(this.IG(0,b,f)+this.IG(1,b,f));c.setAttribute(b,f,g)}c.rb(this.R.Wf())}else{c=new a.Wa(this.description);if(this.u())return c;e=this.description.Ea;for(d=1;d<e;d++)for(b=this.description.Id(d),l=a.na.Xa(b),f=0;f<l;f++)g=.5*(this.ae(0,b,f)+this.ae(1,b,f)),c.setAttribute(b,f,g);c.rb(this.R.Gk(),this.R.Cq());return c}};d.prototype.Xz=function(){return new a.Wa(this.R.Xz())};d.prototype.contains=function(c){return c instanceof
a.Wa?c.u()?!1:this.R.contains(c.Be(),c.nf()):this.R.contains(c.R)};d.prototype.fR=function(c){return this.R.contains(c)};d.prototype.Eb=function(c){if(c==this)return!0;if(!(c instanceof d)||this.description!=c.description)return!1;if(this.u())return c.u()?!0:!1;if(!this.R.Eb(c.R))return!1;for(var a=0,k=2*(this.description.af.length-2);a<k;a++)if(this.la[a]!=c.la[a])return!1;return!0};d.prototype.jc=function(){var c=this.description.jc(),c=a.J.dh(c,this.R.jc());if(!this.u()&&null!=this.la)for(var e=
0,d=2*(this.description.af.length-2);e<d;e++)c=a.J.dh(c,this.la[e]);return c};d.prototype.Gg=function(){return a.Pi.Sm(this,null)};d.prototype.toString=function(){return this.u()?"Envelope: []":"Envelope: ["+this.R.o+", "+this.R.A+", "+this.R.v+", "+this.R.B+"]"};return d}(a.T);a.ci=b})(y||(y={}));(function(a){var b=function(){function b(a,c,e,k){void 0===a?this.Oa():(this.o=a,this.A=c,this.v=e,this.B=k)}b.pa=function(a,c,e,k){var d=new b;d.o=a;d.A=c;d.v=e;d.B=k;return d};b.prototype.I=function(d,
c,e,k){"number"===typeof d?void 0!==e?(this.o=d,this.A=c,this.v=e,this.B=k,this.normalize()):(this.o=d,this.A=c,this.v=d,this.B=c):d instanceof a.b?void 0!==c?(this.o=d.x-.5*c,this.v=this.o+c,this.A=d.y-.5*e,this.B=this.A+e,this.normalize()):(this.o=d.x,this.A=d.y,this.v=d.x,this.B=d.y):d instanceof b?this.I(d.o,d.A,d.v,d.B):d instanceof a.Ac&&(d.u()||c.u()?this.Oa():(this.o=d.ca,this.v=d.ha,this.A=c.ca,this.B=c.ha))};b.prototype.mT=function(a,c){var e=new b;e.I(this.o,this.A,this.v,this.B);e.O(a,
c);return e};b.prototype.Lx=function(a,c){if(void 0!==c)if(0==c)this.Oa();else{this.o=a[0].x;this.A=a[0].y;this.v=this.o;this.B=this.A;for(var e=1;e<c;e++){var d=a[e];d.x<this.o?this.o=d.x:d.x>this.v&&(this.v=d.x);d.y<this.A?this.A=d.y:d.y>this.B&&(this.B=d.y)}}else if(null==a||0==a.length)this.Oa();else for(d=a[0],this.I(d.x,d.y),e=1;e<a.length;e++)d=a[e],this.ml(d.x,d.y)};b.prototype.Oa=function(){this.B=this.v=this.A=this.o=NaN};b.prototype.u=function(){return isNaN(this.o)};b.prototype.Nb=function(d,
c){"number"===typeof d?this.u()?(this.o=d,this.A=c,this.v=d,this.B=c):(this.o>d?this.o=d:this.v<d&&(this.v=d),this.A>c?this.A=c:this.B<c&&(this.B=c)):d instanceof a.b?this.Nb(d.x,d.y):d instanceof a.qd?this.Nb(d.x,d.y):d instanceof b&&!d.u()&&(this.Nb(d.o,d.A),this.Nb(d.v,d.B))};b.prototype.ml=function(a,c){this.o>a?this.o=a:this.v<a&&(this.v=a);this.A>c?this.A=c:this.B<c&&(this.B=c)};b.prototype.O=function(a,c){this.u()||(this.o-=a,this.v+=a,this.A-=c,this.B+=c,(this.o>this.v||this.A>this.B)&&this.Oa())};
b.prototype.scale=function(a){0>a&&this.Oa();this.u()||(this.o*=a,this.v*=a,this.A*=a,this.B*=a)};b.prototype.Yb=function(a){return!this.u()&&!a.u()&&(this.o<=a.o?this.v>=a.o:a.v>=this.o)&&(this.A<=a.A?this.B>=a.A:a.B>=this.A)};b.prototype.SH=function(a){return(this.o<=a.o?this.v>=a.o:a.v>=this.o)&&(this.A<=a.A?this.B>=a.A:a.B>=this.A)};b.prototype.Ma=function(a){if(this.u()||a.u())return!1;a.o>this.o&&(this.o=a.o);a.v<this.v&&(this.v=a.v);a.A>this.A&&(this.A=a.A);a.B<this.B&&(this.B=a.B);(a=this.o<=
this.v&&this.A<=this.B)||this.Oa();return a};b.prototype.Fx=function(d){switch(d){case 0:return a.b.pa(this.o,this.A);case 1:return a.b.pa(this.o,this.B);case 2:return a.b.pa(this.v,this.B);case 3:return a.b.pa(this.v,this.A);default:throw a.f.vd();}};b.prototype.OB=function(d){if(null==d||4>d.length)throw a.f.F();null!=d[0]?d[0].ka(this.o,this.A):d[0]=a.b.pa(this.o,this.A);null!=d[1]?d[1].ka(this.o,this.B):d[1]=a.b.pa(this.o,this.B);null!=d[2]?d[2].ka(this.v,this.B):d[2]=a.b.pa(this.v,this.B);null!=
d[3]?d[3].ka(this.v,this.A):d[3]=a.b.pa(this.v,this.A)};b.prototype.HG=function(){return this.u()?0:this.N()*this.fa()};b.prototype.YG=function(){return this.u()?0:2*(this.N()+this.fa())};b.prototype.Gk=function(){return(this.v+this.o)/2};b.prototype.Cq=function(){return(this.B+this.A)/2};b.prototype.N=function(){return this.v-this.o};b.prototype.fa=function(){return this.B-this.A};b.prototype.move=function(a,c){this.u()||(this.o+=a,this.A+=c,this.v+=a,this.B+=c)};b.prototype.wv=function(d,c){if(void 0!==
c)this.move(d-this.Gk(),c-this.Cq());else if(d instanceof a.b)this.wv(d.x,d.y);else if(d instanceof a.Wa){c=(this.v-this.o)/2;var e=(this.B-this.A)/2;this.o=d.Be()-c;this.v=d.Be()+c;this.A=d.nf()-e;this.B=d.nf()+e}else throw a.f.F();};b.prototype.offset=function(a,c){this.o+=a;this.v+=a;this.A+=c;this.B+=c};b.prototype.normalize=function(){if(!this.u()){var a=Math.min(this.o,this.v),c=Math.max(this.o,this.v);this.o=a;this.v=c;a=Math.min(this.A,this.B);c=Math.max(this.A,this.B);this.A=a;this.B=c}};
b.prototype.Un=function(a){a.ka(this.o,this.A)};b.prototype.SJ=function(a){a.ka(this.v,this.A)};b.prototype.VJ=function(a){a.ka(this.o,this.B)};b.prototype.Vn=function(a){a.ka(this.v,this.B)};b.prototype.YU=function(){return this.u()||this.o<=this.v&&this.A<=this.B};b.prototype.Wf=function(){return a.b.pa((this.v+this.o)/2,(this.B+this.A)/2)};b.prototype.Xz=function(){return a.b.pa(this.o,this.A)};b.prototype.contains=function(d,c){if(void 0!==c)return d>=this.o&&d<=this.v&&c>=this.A&&c<=this.B;if(d instanceof
a.Wa)return this.contains(d.Be(),d.nf());if(d instanceof a.b)return this.contains(d.x,d.y);if(d instanceof b)return d.o>=this.o&&d.v<=this.v&&d.A>=this.A&&d.B<=this.B;throw a.f.F();};b.prototype.Um=function(d,c){if(void 0!==c)return d>this.o&&d<this.v&&c>this.A&&c<this.B;if(d instanceof a.b)return this.Um(d.x,d.y);if(d instanceof b)return d.o>this.o&&d.v<this.v&&d.A>this.A&&d.B<this.B;throw a.f.F();};b.prototype.Eb=function(a){return a==this?!0:a instanceof b?this.u()&&a.u()?!0:this.o!=a.o||this.A!=
a.A||this.v!=a.v||this.B!=a.B?!1:!0:!1};b.prototype.jc=function(){var d=this.o,d=a.J.truncate(d^d>>>32),c=a.J.dh(d),d=this.v,d=a.J.truncate(d^d>>>32),c=a.J.dh(d,c),d=this.A,d=a.J.truncate(d^d>>>32),c=a.J.dh(d,c),d=this.B,d=a.J.truncate(d^d>>>32);return c=a.J.dh(d,c)};b.prototype.My=function(d){var c=new a.b;c.L(d);if(c.Gy())return c;if(this.u())return c.cv(),c;c.x<this.o?c.x=this.o:c.x>this.v&&(c.x=this.v);c.y<this.A?c.y=this.A:c.y>this.B&&(c.y=this.B);if(!c.Eb(d))return c;d=this.Wf();(c.x<d.x?c.x-
this.o:this.v-c.x)<(c.y<d.y?c.y-this.A:this.B-c.y)?c.x=c.x<d.x?this.o:this.v:c.y=c.y<d.y?this.A:this.B;return c};b.prototype.Vu=function(a){if(this.u())return NaN;if(a.x==this.o)return a.y-this.A;var c=this.B-this.A,e=this.v-this.o;return a.y==this.B?c+a.x-this.o:a.x==this.v?c+e+this.B-a.y:a.y==this.A?2*c+e+this.v-a.x:this.Vu(this.My(a))};b.prototype.yE=function(a){if(this.u())return-1;a=this.Vu(a);var c=this.B-this.A,e=this.v-this.o;return a<c?0:(a-=c)<e?1:a-e<c?2:3};b.prototype.no=function(){return this.u()?
2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.o)+Math.abs(this.v)+Math.abs(this.A)+Math.abs(this.B)+1)};b.prototype.fz=function(a,c){var e=this.vk(a),d=this.vk(c);if(0!=(e&d))return 0;if(0==(e|d))return 4;var l=(0!=e?1:0)|(0!=d?2:0);do{var v=c.x-a.x,f=c.y-a.y;v>f?0!=(e&b.bd)?(0!=(e&b.Bb)?(a.y+=f*(this.o-a.x)/v,a.x=this.o):(a.y+=f*(this.v-a.x)/v,a.x=this.v),e=this.vk(a)):0!=(d&b.bd)?(0!=(d&b.Bb)?(c.y+=f*(this.o-c.x)/v,c.x=this.o):(c.y+=f*(this.v-c.x)/v,c.x=this.v),d=this.vk(c)):0!=e?(0!=
(e&b.uc)?(a.x+=v*(this.A-a.y)/f,a.y=this.A):(a.x+=v*(this.B-a.y)/f,a.y=this.B),e=this.vk(a)):(0!=(d&b.uc)?(c.x+=v*(this.A-c.y)/f,c.y=this.A):(c.x+=v*(this.B-c.y)/f,c.y=this.B),d=this.vk(c)):0!=(e&b.ee)?(0!=(e&b.uc)?(a.x+=v*(this.A-a.y)/f,a.y=this.A):(a.x+=v*(this.B-a.y)/f,a.y=this.B),e=this.vk(a)):0!=(d&b.ee)?(0!=(d&b.uc)?(c.x+=v*(this.A-c.y)/f,c.y=this.A):(c.x+=v*(this.B-c.y)/f,c.y=this.B),d=this.vk(c)):0!=e?(0!=(e&b.Bb)?(a.y+=f*(this.o-a.x)/v,a.x=this.o):(a.y+=f*(this.v-a.x)/v,a.x=this.v),e=this.vk(a)):
(0!=(d&b.Bb)?(c.y+=f*(this.o-c.x)/v,c.x=this.o):(c.y+=f*(this.v-c.x)/v,c.x=this.v),d=this.vk(c));if(0!=(e&d))return 0}while(0!=(e|d));return l};b.prototype.vk=function(a){return(a.x<this.o?1:0)|(a.x>this.v?1:0)<<1|(a.y<this.A?1:0)<<2|(a.y>this.B?1:0)<<3};b.prototype.fh=function(a){return!this.u()&&(this.N()<=a||this.fa()<=a)};b.prototype.Cb=function(d){return d instanceof a.b?Math.sqrt(this.YK(d)):Math.sqrt(this.Yx(d))};b.prototype.Yx=function(a){var c=0,e=0,d;d=this.o-a.v;d>c&&(c=d);d=this.A-a.B;
d>e&&(e=d);d=a.o-this.v;d>c&&(c=d);d=a.A-this.B;d>e&&(e=d);return c*c+e*e};b.prototype.YK=function(a){var c=0,e=0,d;d=this.o-a.x;d>c&&(c=d);d=this.A-a.y;d>e&&(e=d);d=a.x-this.v;d>c&&(c=d);d=a.y-this.B;d>e&&(e=d);return c*c+e*e};b.prototype.Tn=function(a){this.u()?a.Oa():a.I(this.o,this.v)};b.BO=function(a,c,e,k){var d=1;isNaN(a)||(d+=Math.abs(a));isNaN(c)||(d+=Math.abs(c));isNaN(e)||(d+=Math.abs(e));isNaN(k)||(d+=Math.abs(k));return 2.220446049250313E-14*d};b.Bb=1;b.uc=4;b.bd=3;b.ee=12;return b}();
a.h=b})(y||(y={}));(function(a){var b;(function(a){a[a.initialize=0]="initialize";a[a.initializeRed=1]="initializeRed";a[a.initializeBlue=2]="initializeBlue";a[a.initializeRedBlue=3]="initializeRedBlue";a[a.sweep=4]="sweep";a[a.sweepBruteForce=5]="sweepBruteForce";a[a.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";a[a.sweepRedBlue=7]="sweepRedBlue";a[a.sweepRed=8]="sweepRed";a[a.sweepBlue=9]="sweepBlue";a[a.iterate=10]="iterate";a[a.iterateRed=11]="iterateRed";a[a.iterateBlue=12]="iterateBlue";
a[a.iterateBruteForce=13]="iterateBruteForce";a[a.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce";a[a.resetRed=15]="resetRed";a[a.resetBlue=16]="resetBlue"})(b||(b={}));var l=function(){function a(a,e){this.Ci=a;this.oI=e}a.prototype.gs=function(a,e,d){this.Ci.CY(d,a,e,this.oI)};a.prototype.Qq=function(a){return this.Ci.Ls(a,this.oI)};return a}();b=function(){function d(){this.$w=this.bp=this.If=this.Bd=null;this.kr=new a.h;this.pn=this.bk=this.ck=this.Rd=this.fg=this.Yd=this.Pw=this.Uo=this.Ad=
this.Lb=null;this.Zb=-1;this.ta=0;this.ql()}d.prototype.bs=function(){this.ql();this.Aw=!0;null==this.Lb?(this.Uo=new a.ia(0),this.Lb=[]):(this.Uo.yf(0),this.Lb.length=0)};d.prototype.jd=function(c,e){if(!this.Aw)throw a.f.La();var d=new a.h;d.I(e);this.Uo.add(c);this.Lb.push(d)};d.prototype.yq=function(){if(!this.Aw)throw a.f.La();this.Aw=!1;null!=this.Lb&&0<this.Lb.length&&(this.Zb=0,this.Pc=!1)};d.prototype.aL=function(){this.ql();this.zw=!0;null==this.Lb?(this.Uo=new a.ia(0),this.Lb=[]):(this.Uo.yf(0),
this.Lb.length=0)};d.prototype.YE=function(c,e){if(!this.zw)throw a.f.La();var d=new a.h;d.I(e);this.Uo.add(c);this.Lb.push(d)};d.prototype.sG=function(){if(!this.zw)throw a.f.La();this.zw=!1;null!=this.Lb&&0<this.Lb.length&&null!=this.Ad&&0<this.Ad.length&&(-1==this.Zb?this.Zb=3:2==this.Zb?this.Zb=3:3!=this.Zb&&(this.Zb=1),this.Pc=!1)};d.prototype.$K=function(){this.ql();this.yw=!0;null==this.Ad?(this.Pw=new a.ia(0),this.Ad=[]):(this.Pw.yf(0),this.Ad.length=0)};d.prototype.UE=function(c,e){if(!this.yw)throw a.f.La();
var d=new a.h;d.I(e);this.Pw.add(c);this.Ad.push(d)};d.prototype.rG=function(){if(!this.yw)throw a.f.La();this.yw=!1;null!=this.Lb&&0<this.Lb.length&&null!=this.Ad&&0<this.Ad.length&&(-1==this.Zb?this.Zb=3:1==this.Zb?this.Zb=3:3!=this.Zb&&(this.Zb=2),this.Pc=!1)};d.prototype.next=function(){if(this.Pc)return!1;for(var c=!0;c;)switch(this.Zb){case 0:c=this.pA();break;case 1:c=this.lU();break;case 2:c=this.iU();break;case 3:c=this.kU();break;case 4:c=this.MY();break;case 5:c=this.IY();break;case 6:c=
this.JY();break;case 7:c=this.KY();break;case 8:c=this.ay();break;case 9:c=this.EC();break;case 10:c=this.BA();break;case 11:c=this.bV();break;case 12:c=this.ZU();break;case 13:c=this.$U();break;case 14:c=this.aV();break;case 15:c=this.ZJ();break;case 16:c=this.YJ();break;default:throw a.f.ya();}return this.Pc?!1:!0};d.prototype.xC=function(a){this.ta=a};d.prototype.dA=function(a){return this.Lb[a]};d.prototype.Hz=function(a){return this.Ad[a]};d.prototype.Ql=function(a){return this.Uo.read(a)};d.prototype.Ml=
function(a){return this.Pw.read(a)};d.IB=function(a){return 1==(a&1)};d.Hm=function(a){return 0==(a&1)};d.prototype.ql=function(){this.Aw=this.yw=this.zw=!1;this.dg=this.eg=this.nh=this.Ne=-1;this.Pc=!0};d.prototype.pA=function(){this.bg=this.sg=-1;if(10>this.Lb.length)return this.Ne=this.Lb.length,this.Zb=5,!0;null==this.Bd&&(this.Bd=new a.ms(!0),this.bp=this.Bd.mf(),this.Yd=new a.ia(0));this.Bd.bs();for(var c=0;c<this.Lb.length;c++){var e=this.Lb[c];this.Bd.ys(e.o,e.v)}this.Bd.yq();this.Yd.yb(2*
this.Lb.length);this.Yd.resize(0);for(c=0;c<2*this.Lb.length;c++)this.Yd.add(c);this.xu(this.Yd,2*this.Lb.length,!0);this.Ne=2*this.Lb.length;this.Zb=4;return!0};d.prototype.lU=function(){this.bg=this.sg=-1;if(10>this.Lb.length||10>this.Ad.length)return this.Ne=this.Lb.length,this.Zb=6,!0;null==this.Bd&&(this.Bd=new a.ms(!0),this.bp=this.Bd.mf(),this.Yd=new a.ia(0));this.Bd.bs();for(var c=0;c<this.Lb.length;c++){var e=this.Lb[c];this.Bd.ys(e.o,e.v)}this.Bd.yq();this.Yd.yb(2*this.Lb.length);this.Yd.resize(0);
for(c=0;c<2*this.Lb.length;c++)this.Yd.add(c);this.xu(this.Yd,this.Yd.size,!0);this.Ne=this.Yd.size;-1!=this.eg&&(this.Rd.zh(this.eg),this.ck.resize(0),this.eg=-1);this.Zb=7;return this.YJ()};d.prototype.iU=function(){this.bg=this.sg=-1;if(10>this.Lb.length||10>this.Ad.length)return this.Ne=this.Lb.length,this.Zb=6,!0;null==this.If&&(this.If=new a.ms(!0),this.$w=this.If.mf(),this.fg=new a.ia(0));this.If.bs();for(var c=0;c<this.Ad.length;c++){var e=this.Ad[c];this.If.ys(e.o,e.v)}this.If.yq();this.fg.yb(2*
this.Ad.length);this.fg.resize(0);for(c=0;c<2*this.Ad.length;c++)this.fg.add(c);this.xu(this.fg,this.fg.size,!1);this.nh=this.fg.size;-1!=this.dg&&(this.Rd.zh(this.dg),this.bk.resize(0),this.dg=-1);this.Zb=7;return this.ZJ()};d.prototype.kU=function(){this.bg=this.sg=-1;if(10>this.Lb.length||10>this.Ad.length)return this.Ne=this.Lb.length,this.Zb=6,!0;null==this.Bd&&(this.Bd=new a.ms(!0),this.bp=this.Bd.mf(),this.Yd=new a.ia(0));null==this.If&&(this.If=new a.ms(!0),this.$w=this.If.mf(),this.fg=new a.ia(0));
this.Bd.bs();for(var c=0;c<this.Lb.length;c++){var e=this.Lb[c];this.Bd.ys(e.o,e.v)}this.Bd.yq();this.If.bs();for(c=0;c<this.Ad.length;c++)e=this.Ad[c],this.If.ys(e.o,e.v);this.If.yq();this.Yd.yb(2*this.Lb.length);this.fg.yb(2*this.Ad.length);this.Yd.resize(0);this.fg.resize(0);for(c=0;c<2*this.Lb.length;c++)this.Yd.add(c);for(c=0;c<2*this.Ad.length;c++)this.fg.add(c);this.xu(this.Yd,this.Yd.size,!0);this.xu(this.fg,this.fg.size,!1);this.Ne=this.Yd.size;this.nh=this.fg.size;-1!=this.eg&&(this.Rd.zh(this.eg),
this.ck.resize(0),this.eg=-1);-1!=this.dg&&(this.Rd.zh(this.dg),this.bk.resize(0),this.dg=-1);this.Zb=7;return!0};d.prototype.MY=function(){var a=this.Yd.get(--this.Ne),e=a>>1;if(d.Hm(a))return this.Bd.remove(e),0==this.Ne?(this.bg=this.sg=-1,this.Pc=!0,!1):!0;this.bp.cC(this.Lb[e].o,this.Lb[e].v,this.ta);this.sg=e;this.Zb=10;return!0};d.prototype.IY=function(){if(-1==--this.Ne)return this.bg=this.sg=-1,this.Pc=!0,!1;this.nh=this.sg=this.Ne;this.Zb=13;return!0};d.prototype.JY=function(){if(-1==--this.Ne)return this.bg=
this.sg=-1,this.Pc=!0,!1;this.sg=this.Ne;this.nh=this.Ad.length;this.Zb=14;return!0};d.prototype.KY=function(){var a=this.Yd.get(this.Ne-1),e=this.fg.get(this.nh-1),k=this.Ls(a,!0),b=this.Ls(e,!1);return k>b?this.ay():k<b?this.EC():d.IB(a)?this.ay():d.IB(e)?this.EC():this.ay()};d.prototype.ay=function(){var c=this.Yd.get(--this.Ne),e=c>>1;if(d.Hm(c))return-1!=this.eg&&-1!=this.ck.get(e)?(this.Rd.kd(this.eg,this.ck.get(e)),this.ck.set(e,-1)):this.Bd.remove(e),0==this.Ne?(this.bg=this.sg=-1,this.Pc=
!0,!1):!0;if(-1!=this.dg&&0<this.Rd.$s(this.dg))for(c=this.Rd.xc(this.dg);-1!=c;){var k=this.Rd.getData(c);this.If.eh(k);this.bk.set(k,-1);k=this.Rd.nb(c);this.Rd.kd(this.dg,c);c=k}0<this.If.size()?(this.$w.cC(this.Lb[e].o,this.Lb[e].v,this.ta),this.sg=e,this.Zb=12):(-1==this.eg&&(null==this.Rd&&(this.Rd=new a.Xp),this.ck=new a.ia(0),this.ck.resize(this.Lb.length,-1),this.ck.Zh(-1,0,this.Lb.length),this.eg=this.Rd.mi(1)),this.ck.set(e,this.Rd.addElement(this.eg,e)),this.Zb=7);return!0};d.prototype.EC=
function(){var c=this.fg.get(--this.nh),e=c>>1;if(d.Hm(c))return-1!=this.dg&&-1!=this.bk.get(e)?(this.Rd.kd(this.dg,this.bk.get(e)),this.bk.set(e,-1)):this.If.remove(e),0==this.nh?(this.bg=this.sg=-1,this.Pc=!0,!1):!0;if(-1!=this.eg&&0<this.Rd.$s(this.eg))for(c=this.Rd.xc(this.eg);-1!=c;){var k=this.Rd.getData(c);this.Bd.eh(k);this.ck.set(k,-1);k=this.Rd.nb(c);this.Rd.kd(this.eg,c);c=k}0<this.Bd.size()?(this.bp.cC(this.Ad[e].o,this.Ad[e].v,this.ta),this.bg=e,this.Zb=11):(-1==this.dg&&(null==this.Rd&&
(this.Rd=new a.Xp),this.bk=new a.ia(0),this.bk.resize(this.Ad.length,-1),this.bk.Zh(-1,0,this.Ad.length),this.dg=this.Rd.mi(0)),this.bk.set(e,this.Rd.addElement(this.dg,e)),this.Zb=7);return!0};d.prototype.BA=function(){this.bg=this.bp.next();if(-1!=this.bg)return!1;var a=this.Yd.get(this.Ne)>>1;this.Bd.eh(a);this.Zb=4;return!0};d.prototype.bV=function(){this.sg=this.bp.next();if(-1!=this.sg)return!1;this.bg=this.sg=-1;var a=this.fg.get(this.nh)>>1;this.If.eh(a);this.Zb=7;return!0};d.prototype.ZU=
function(){this.bg=this.$w.next();if(-1!=this.bg)return!1;var a=this.Yd.get(this.Ne)>>1;this.Bd.eh(a);this.Zb=7;return!0};d.prototype.$U=function(){if(-1==--this.nh)return this.Zb=5,!0;this.kr.I(this.Lb[this.Ne]);var a=this.Lb[this.nh];this.kr.O(this.ta,this.ta);return this.kr.Yb(a)?(this.bg=this.nh,!1):!0};d.prototype.aV=function(){if(-1==--this.nh)return this.Zb=6,!0;this.kr.I(this.Lb[this.Ne]);var a=this.Ad[this.nh];this.kr.O(this.ta,this.ta);return this.kr.Yb(a)?(this.bg=this.nh,!1):!0};d.prototype.ZJ=
function(){if(null==this.Bd)return this.Pc=!0,!1;this.Ne=this.Yd.size;0<this.Bd.size()&&this.Bd.reset();-1!=this.eg&&(this.Rd.zh(this.eg),this.ck.resize(0),this.eg=-1);this.Pc=!1;return!0};d.prototype.YJ=function(){if(null==this.If)return this.Pc=!0,!1;this.nh=this.fg.size;0<this.If.size()&&this.If.reset();-1!=this.dg&&(this.Rd.zh(this.dg),this.bk.resize(0),this.dg=-1);this.Pc=!1;return!0};d.prototype.xu=function(c,e,d){null==this.pn&&(this.pn=new a.Gu);d=new l(this,d);this.pn.sort(c,0,e,d)};d.prototype.CY=
function(a,e,k,b){var c=this;a.Gd(e,k,function(a,e){var k=c.Ls(a,b),l=c.Ls(e,b);return k<l||k==l&&d.Hm(a)&&d.IB(e)?-1:1})};d.prototype.Ls=function(a,e){var c=.5*this.ta;if(e)return e=this.Lb[a>>1],c=d.Hm(a)?e.A-c:e.B+c;e=this.Ad[a>>1];return c=d.Hm(a)?e.A-c:e.B+c};return d}();a.eD=b})(y||(y={}));(function(a){var b=function(){function b(){}b.pa=function(a,c,e,k,l,v){var d=new b;d.o=a;d.A=c;d.Bf=e;d.v=k;d.B=l;d.$g=v;return d};b.prototype.Oa=function(){this.Bf=this.o=NaN};b.prototype.u=function(){return isNaN(this.o)};
b.prototype.PU=function(){return isNaN(this.Bf)};b.prototype.I=function(a,c,e,k,b,l){void 0!==k?"number"===typeof a?(this.o=a,this.A=c,this.Bf=e,this.v=k,this.B=b,this.$g=l):(this.o=a.x-.5*c,this.v=this.o+c,this.A=a.y-.5*e,this.B=this.A+e,this.Bf=a.z-.5*k,this.$g=this.Bf+k):(this.o=a,this.A=c,this.Bf=e,this.v=a,this.B=c,this.$g=e)};b.prototype.move=function(a){this.o+=a.x;this.A+=a.y;this.Bf+=a.z;this.v+=a.x;this.B+=a.y;this.$g+=a.z};b.prototype.copyTo=function(a){a.o=this.o;a.A=this.A;a.v=this.v;
a.B=this.B};b.prototype.ml=function(a,c,e){this.o>a?this.o=a:this.v<a&&(this.v=a);this.A>c?this.A=c:this.B<c&&(this.B=c);0==isNaN(this.Bf)?this.Bf>e?this.Bf=e:this.$g<e&&(this.$g=e):this.$g=this.Bf=e};b.prototype.Nb=function(d,c,e,k,l,v){if("number"===typeof d)k?(this.Nb(d,c,e),this.Nb(k,l,v)):this.u()?(this.o=d,this.A=c,this.Bf=e,this.v=d,this.B=c,this.$g=e):this.ml(d,c,e);else if(d instanceof a.qd)this.Nb(d.x,d.y,d.z);else if(d instanceof b)d.u()||(this.Nb(d.o,d.A,d.Bf),this.Nb(d.v,d.B,d.$g));else throw a.f.F();
};b.prototype.pa=function(a,c,e){a.u()||c.u()?this.Oa():(this.o=a.ca,this.v=a.ha,this.A=c.ca,this.B=c.ha,this.Bf=e.ca,this.$g=e.ha)};b.prototype.OB=function(d){if(null==d||8>d.length)throw a.f.F();d[0]=new a.qd(this.o,this.A,this.Bf);d[1]=new a.qd(this.o,this.B,this.Bf);d[2]=new a.qd(this.v,this.B,this.Bf);d[3]=new a.qd(this.v,this.A,this.Bf);d[4]=new a.qd(this.o,this.A,this.$g);d[5]=new a.qd(this.o,this.B,this.$g);d[6]=new a.qd(this.v,this.B,this.$g);d[7]=new a.qd(this.v,this.A,this.$g)};b.prototype.Lx=
function(a){if(null==a||0==a.length)this.Oa();else{var c=a[0];this.I(c.x,c.y,c.z);for(c=1;c<a.length;c++){var e=a[c];this.ml(e.x,e.y,e.z)}}};return b}();a.cM=b})(y||(y={}));(function(a){(function(a){a.ya=function(){var a=Error();a.message="Internal Error";return a};a.df=function(){var a=Error();a.message="Not Implemented";return a};a.uk=function(){var a=Error();a.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return a};a.La=function(){var a=
Error();a.message="Invalid Call";return a};a.F=function(a){var d=Error();d.message="Illegal Argument Exception";void 0!==a&&(d.message+=": "+a);return d};a.SN=function(){var a=Error();a.message="Runtime Exception.";return a};a.X=function(a){var d=Error();d.message="Geometry Exception: "+a;return d};a.IL=function(){var a=Error();a.message="Assert Failed Exception";return a};a.vd=function(){var a=Error();a.message="IndexOutOfBoundsException";return a};a.m_=function(a){a.message="UserCancelException";
return a}})(a.f||(a.f={}))})(y||(y={}));(function(a){a=a.Pm||(a.Pm={});a[a.forward=0]="forward";a[a.reverse=1]="reverse"})(y||(y={}));(function(a){var b=function(){function c(a,c){this.$a=a;this.UI=c;this.YI=-1;this.Wl=!1}c.prototype.Re=function(){return!0};c.prototype.next=function(){if(++this.YI==this.UI.D())return null;var c=this.UI.Aa(this.YI);c.scale(this.$a.mc);var d=new a.Ia;this.$a.Xy(c,this.Wl,d);return d};c.prototype.Ha=function(){return 0};return c}(),l=function(){function c(c,d,b){this.$a=
c;this.dx=d;this.Mo=!1;this.So=b;this.Ow=[0];this.Uk=[0];this.fk=[0];this.Bt=[0];this.Wl=!1;this.er=new a.Ia;this.Wk=[]}c.prototype.Re=function(){return!0};c.prototype.next=function(){if(this.Mo){this.Mo=!1;this.Cd.ba();var c=a.T.ne(this.er);return c=a.Dg.ol(c,this.$a.or,!0,!0,this.$a.lc)}null==this.Cd&&(this.Cd=this.dx.Da(),this.Cd.Ya(),null!=this.So&&this.So.Bl(null,0));if(!this.Cd.Ca()){if(!this.Cd.Ya())return null;null!=this.So&&this.So.Bl(null,0)}c=null;this.Uk[0]=0;this.kB=this.Ow[0]=0;this.Di=
NaN;this.Mo=!1;for(var k=this.Wk.length=0,b=new a.b,l=new a.b,f=[0];this.Cd.Ca()&&8>this.kB;){var g=this.Cd.ba();b.L(g.ec());l.L(g.Cc());b.scale(this.$a.mc);l.scale(this.$a.mc);a.Ej.Av(b,l)?b.x=l.x:a.Ej.yv(b,l)&&(l.x=b.x);this.Wk.length=0;a.Ej.FG(this.$a.Vb,this.$a.rc,this.$a.$e,b,l,this.$a.uB,this.$a.St,f,this.fk,this.Bt,this.Wk,this.Ow);null!=this.So&&(g=this.Wk.slice(0),this.So.DH(this.So.aa()-1,g,g.length-1));a.Ej.zv(b,l)?(this.er.Oa(),this.$a.Xy(b,this.Wl,this.er),this.Mo=!0):(this.er.Oa(),this.Mo=
this.cz(f[0],this.er));if(this.Mo){this.Cd.Li();if(this.Cd.nA()){this.Cd.Li();this.Cd.ba();break}this.Cd.yX();break}null==c&&(c=new a.Ia,c.Bl(null,0));this.cF(c);k++}this.Ow[0]=0;if(0<k){for(f=this.Cd.Db();0<k;)this.Cd.Li(),b.L(this.dx.Aa(this.Cd.Db())),l.L(this.dx.Aa(this.Cd.Ik())),b.scale(this.$a.mc),l.scale(this.$a.mc),this.Wl&&(a.Ej.Av(b,l)?b.x=l.x:a.Ej.yv(b,l)&&(l.x=b.x)),this.Wk.length=0,a.Ej.FG(this.$a.Vb,this.$a.rc,this.$a.$e,l,b,this.$a.uB,this.$a.St,null,this.fk,this.Bt,this.Wk,this.Ow),
this.cF(c),k--;b.L(this.dx.Aa(this.Cd.Db()));b.scale(this.$a.mc);d.Es(this.$a.Vb,this.$a.rc,this.$a.mc,this.$a.vb,b,this.Di+1.570796326794897,this.Di+4.71238898038469,this.$a.Qo,this.Wl,this.Uk,c,NaN,NaN);this.Cd.Tb(f);this.Cd.ba();k=a.ma.ah(null,c,!0);return c=a.Dg.ol(c,k,!0,!0,this.$a.lc)}this.Mo=!1;this.Cd.ba();c=a.T.ne(this.er);return c=a.Dg.ol(c,this.$a.or,!0,!0,this.$a.lc)};c.prototype.cF=function(c){var e=this.Wk[0],b,l=this.fk[0]-1.570796326794897,f=this.Bt[0]+1.570796326794897,g;if(!isNaN(this.Di)){this.Di>=
this.fk[0]?(b=this.Di+1.570796326794897,l=b+3.141592653589793-(this.Di-this.fk[0])):(b=this.Di+1.570796326794897,l=b+3.141592653589793-(6.283185307179586-(this.fk[0]-this.Di)));g=this.Di>=this.fk[0]&&3.141592653589793>=this.Di-this.fk[0]?!1:this.Di<this.fk[0]&&3.141592653589793<=this.fk[0]-this.Di?!1:!0;var h=!1;if(Math.abs(l-b)<=.5*this.$a.Qo)if(g){var m=c.Aa(c.D()-2);m.scale(this.$a.mc);var z=new a.ea(0);a.mb.Ez(this.$a.Vb,this.$a.rc,e.x,e.y,m.x,m.y,z);for(m=z.j;m<=b;)m+=6.283185307179586;for(;m>
b;)m-=6.283185307179586;m<l&&(h=!0)}else h=!0;h?(c.bC(0,c.D()-1),this.Wl||(e=new a.b,e.L(c.Aa(c.D()-1)),e.scale(this.$a.mc),-3.141592653589793>e.x-this.Uk[0]?this.Uk[0]-=6.283185307179586:3.141592653589793<e.x-this.Uk[0]&&(this.Uk[0]+=6.283185307179586)),g||(l=.5*(l+b))):(g?(b=new a.b,b.L(e),b.scale(1/this.$a.mc),c.Zf(0,-1,b)):d.Es(this.$a.Vb,this.$a.rc,this.$a.mc,this.$a.vb,this.Wk[0],b,l,this.$a.Qo,this.Wl,this.Uk,c,NaN,NaN),this.kB+=1)}d.Wy(this.$a.Vb,this.$a.rc,this.$a.mc,this.$a.vb,this.$a.$e,
this.Wk,l,f,this.Wl,this.Uk,c);this.Di=this.Bt[0]};c.prototype.cz=function(a,c){return this.$a.cz(this.Wk,a,this.fk[0],this.Bt[0],this.Wl,c)};c.prototype.Ha=function(){return 0};return c}(),d=function(){function c(){}c.buffer=function(e,d,b,l,f,g){if(null==e)throw a.f.F("Geometry::Geodesic_bufferer::buffer");if(e.u())return new a.Ia(e.description);var k=new c;k.mh=d;k.Qc=a.fb.kc(d);var r=a.fb.gw(k.Qc);k.lc=g;k.Vb=a.fb.Rv(k.Qc);k.rc=r*(2-r);k.mc=k.Qc.Od().Ai;k.ta=k.mh.Bo();k.or=k.Qc.Bo();k.St=k.or*
k.mc;k.nr=1.570796326794897/k.mc;k.D_=3.141592653589793/k.mc;k.Dt=6.283185307179586/k.mc;k.E_=k.Dt/6;k.pB=0;k.C_=1.5707963267948966*k.Vb/k.pB;4==b?(k.$e=2,k.Iw=!0):(k.$e=b,k.Iw=!1);k.Qa=l;k.vb=Math.abs(l);isNaN(f)||.001>f?k.rY():k.Po=f;b=e.G();a.T.Oc(b)?(b=new a.Ua(e.description),b.dc(e,!0),e=b,b=1607):197==b&&(b=new a.h,e.s(b),b.N()<=k.ta||b.fa()<=k.ta?(b=new a.Ua(e.description),b.jd(e,!1),e=b,b=1607):(b=new a.Ia(e.description),b.jd(e,!1),e=b,b=1736));k.sY();a.T.Jo(b)||k.tY();if(k.vb<=.5*k.Po)return 1736!=
b?new a.Ia(e.description):k.Iw?e:a.Ej.Ks(e,k.mh,k.$e,k.uB,-1,g);if(0>k.Qa&&1736!=b)return new a.Ia(e.description);k.Iw&&a.T.Ic(b)?(d=a.Ej.Ks(e,d,4,NaN,k.Po,g),e=a.fb.Xg(d,k.mh,k.Qc,g)):e=a.fb.Xg(e,k.mh,k.Qc,g);e=a.gi.Mj(e,k.Qc);if(e.u())return new a.Ia(e.description);!k.Iw&&a.T.Ic(b)&&(e=a.Ej.yJ(k.mc,e));e=c.lQ(e,k.Qc);switch(b){case 1736:g=k.WP(e);break;case 1607:g=k.XP(e);break;case 550:g=k.UP(e);break;case 33:g=k.VP(e);break;default:throw a.f.X("corrupted_geometry");}k=a.fb.Xg(g,k.Qc,k.mh,k.lc);
k.om(e.description);return k};c.prototype.WP=function(c){var e=new a.Ia;c=new l(this,c,e);c=a.ei.local().V(c,this.Qc,this.lc).next();c=a.Vp.Nj(c,this.Qc,2);var d=new a.Hd;d.scale(1/this.mc,1/this.mc);e.Xc(d);e=a.Vp.Nj(e,this.Qc,2);return 0<=this.Qa?a.ei.local().V(e,c,this.Qc,this.lc):a.cq.local().V(e,c,this.Qc,this.lc)};c.prototype.XP=function(c){c=new l(this,c,null);c=a.ei.local().V(c,this.Qc,this.lc).next();return c=a.Vp.Nj(c,this.Qc,2)};c.prototype.UP=function(c){c=new b(this,c);c=a.ei.local().V(c,
this.Qc,this.lc).next();return c=a.Vp.Nj(c,this.Qc,2)};c.prototype.VP=function(c){c=c.w();c.scale(this.mc);var e=new a.Ia;this.Xy(c,!1,e);return e=a.Vp.Nj(e,this.Qc,2)};c.prototype.cz=function(e,d,b,l,f,g){var k=e[0],r=e[e.length-1],v=k.y>r.y?k.y:r.y,h=a.C.q(this.Vb,this.rc,k.y<r.y?k.y:r.y),v=a.C.q(this.Vb,this.rc,v);if(.001<this.pB-(h+d+this.vb)&&.001<this.pB+(v-d-this.vb))return!1;d=b-1.570796326794897;b=l+1.570796326794897;var h=d-3.141592653589793,v=d+3.141592653589793,G=b+3.141592653589793,m=
[NaN],z=[NaN],n=[NaN],J=[NaN];l=!1;c.yD(this.Vb,this.rc,this.vb,k,d,h,r,b,m,z);c.yD(this.Vb,this.rc,this.vb,r,G,b,k,h,n,J);b<m[0]&&m[0]<G?l=!0:b<z[0]&&z[0]<G&&(l=!0);l||(h<n[0]&&n[0]<d?l=!0:h<J[0]&&J[0]<d&&(l=!0));if(!l&&f)return!1;for(var p=[],t=e.length-1;0<=t;t--)p.push(e[t]);g.Oa();g.Bl(null,0);t=[0];c.Wy(this.Vb,this.rc,this.mc,this.vb,this.$e,e,d,b,f,t,g);c.Es(this.Vb,this.rc,this.mc,this.vb,r,b,G,this.Qo,f,t,g,m[0],z[0]);c.Wy(this.Vb,this.rc,this.mc,this.vb,this.$e,p,G,v,f,t,g);c.Es(this.Vb,
this.rc,this.mc,this.vb,k,h,d,this.Qo,f,t,g,n[0],J[0]);e=!1;f||(e=this.NF(this.mc,g));return l||e};c.prototype.Xy=function(a,d,b){b.Oa();b.Bl(null,0);c.Es(this.Vb,this.rc,this.mc,this.vb,a,-this.Qo,6.283185307179586,this.Qo,d,[0],b,NaN,NaN);d||this.NF(this.mc,b)};c.prototype.NF=function(a,c){var e=this.xQ(a,c);a=this.yQ(a,c);return e||a};c.prototype.xQ=function(c,d){var e=d.D(),k=!1,b=new a.h;d.s(b);if(!a.l.W(b.B*c,1.570796326794897)&&!a.l.W(b.A*c,-1.570796326794897))return!1;for(var l=new a.b,e=
e-1;0<=e;e--)d.w(e,l),l.y==b.B&&a.l.W(l.y*c,1.570796326794897)?(k=!0,this.HJ(l,e,d)):l.y==b.A&&a.l.W(l.y*c,-1.570796326794897)&&(k=!0,this.HJ(l,e,d));return k};c.prototype.yQ=function(a,c){var e=c.Aa(0),d=c.Aa(c.D()-1);return 3.141592653589793<Math.abs(e.x-d.x)*a?(this.MW(c),!0):this.wQ(c)};c.prototype.wQ=function(a){return 0>a.hf()?(this.LW(a),!0):!1};c.prototype.HJ=function(c,d,b){var e=b.D(),k=0<d?d-1:e-1,e=b.Aa(d<e-1?d+1:0),k=b.Aa(k);if(!a.l.W(e.y,c.y)&&!a.l.W(e.x,c.x)){var l=new a.b;l.ka(e.x,
c.y);b.rb(d,l)}a.l.W(k.y,c.y)||a.l.W(k.x,c.x)||(e=new a.b,e.ka(k.x,c.y),b.Zf(0,d,e))};c.prototype.MW=function(c){var e=new a.Ia,d=new a.Ia,b=new a.Hd,l=c.Aa(0),f=c.Aa(c.D()-1),g=new a.b;l.x>f.x?(f=this.nr,b.Ag(-this.Dt,0)):(f=-this.nr,b.Ag(this.Dt,0));e.add(c,!1);c.Oa();d.add(e,!1);d.Xc(b);l=new a.h;d.s(l);l.O((this.Dt-l.N())/2,0);l.A=-this.nr;l.B=this.nr;for(var h=0;h<d.D();h++)d.w(h,g),e.Zf(0,-1,g);d.Xc(b);for(h=0;h<d.D();h++)d.w(h,g),e.Zf(0,-1,g);d=e.Aa(0);b=e.Aa(e.D()-1);g.ka(b.x,f);e.Zf(0,-1,
g);g.ka(.5*(b.x+d.x),f);e.Zf(0,-1,g);g.ka(d.x,f);e.Zf(0,-1,g);e=a.gi.gt(e,this.Qc,2,!0,l.o);e=a.gi.gt(e,this.Qc,2,!0,l.v);e=a.me.clip(e,l,this.or,NaN);c.add(e,!1)};c.prototype.LW=function(c){var e=new a.h;c.s(e);e.O((this.Dt-e.N())/2,0);e.A=-this.nr;e.B=this.nr;c.Bl(null,0);var d=new a.b;d.ka(e.o,e.A);c.Zf(1,-1,d);d.ka(e.o,e.B);c.Zf(1,-1,d);d.ka(.5*(e.o+e.v),e.B);c.Zf(1,-1,d);d.ka(e.v,e.B);c.Zf(1,-1,d);d.ka(e.v,e.A);c.Zf(1,-1,d);d.ka(.5*(e.o+e.v),e.A);c.Zf(1,-1,d)};c.Wy=function(e,d,b,l,f,g,h,m,z,
n,p){var k=null;z||(k=new a.b,k.$c(),0<p.D()&&(k.L(p.Aa(p.D()-1)),k.scale(b)));var r=new a.ea(0),v=new a.ea(0),G=new a.ea(0),J=new a.b,L=new a.b,t=g[g.length-1];b=1/b;for(var u=0;u<g.length;u++){var q=g[u],y;0==u?y=h:u==g.length-1?y=m:(a.mb.Md(e,d,t.x,t.y,q.x,q.y,null,null,r,f),y=r.j-1.570796326794897);a.mb.Xi(e,d,q.x,q.y,l,y,v,G);z?L.ka(v.j,G.j):(J.ka(v.j,G.j),c.KF(q.x,J.x,k.x,n),L.ka(n[0]+J.x,J.y),k.L(L));L.scale(b);p.Zf(0,-1,L)}};c.Es=function(e,d,b,l,f,g,h,m,z,n,p,t,u){if(!(h-g<m)){var k=new a.ea(0),
r=new a.ea(0),v=new a.b,G=new a.b,J=null;z||(J=new a.b,J.$c(),0<p.D()&&(J.L(p.Aa(p.D()-1)),J.scale(b)));var L=a.J.truncate(Math.ceil(g/m)),q=L++*m;q==g&&(q=L++*m);for(b=1/b;q<h+m;){g<t&&t<q?(q=t,L--):g<u&&u<q&&(q=u,L--);if(q>=h)break;a.mb.Xi(e,d,f.x,f.y,l,q,k,r);z?G.ka(k.j,r.j):(v.ka(k.j,r.j),c.KF(f.x,v.x,J.x,n),G.ka(n[0]+v.x,v.y),J.L(G));G.scale(b);p.Zf(0,-1,G);g=q;q=L++*m}}};c.yD=function(c,d,b,l,f,g,h,m,z,n){var e=new a.b,k=new a.b,r=new a.ea(0),v=new a.ea(0);a.mb.Xi(c,d,l.x,l.y,b,f,r,v);e.ka(r.j,
v.j);a.mb.Xi(c,d,l.x,l.y,b,g,r,v);k.ka(r.j,v.j);b=new a.ea(0);a.mb.Ez(c,d,h.x,h.y,e.x,e.y,b);z[0]=b.j;a.mb.Ez(c,d,h.x,h.y,k.x,k.y,b);for(n[0]=b.j;z[0]<=n[0];)z[0]+=6.283185307179586;for(;z[0]>n[0];)z[0]-=6.283185307179586;for(;z[0]>=m;)z[0]-=6.283185307179586,n[0]-=6.283185307179586;for(;z[0]<m;)z[0]+=6.283185307179586,n[0]+=6.283185307179586};c.KF=function(a,c,d,b){if(isNaN(d)){for(;3.141592653589793<b[0]+c-a;)b[0]-=6.283185307179586;for(;3.141592653589793<a-(b[0]+c);)b[0]+=6.283185307179586}else 3.141592653589793<
b[0]+c-d?b[0]-=6.283185307179586:3.141592653589793<d-(b[0]+c)&&(b[0]+=6.283185307179586)};c.lQ=function(c,d){var e=c.G(),k;a.T.Ic(e)?k=c.aa():550==e?k=c.D():k=1;if(1==k)return c;var b=new a.ia(0);b.resize(k);for(var l=[],f=new a.h,g=0;g<k;g++){b.write(g,g);var h;a.T.Ic(e)?(c.ik(g,f),h=f.Wf()):h=c.Aa(g);h=a.rM.SY(d,h);l[g]=h}b.Gd(0,b.size,function(a,c){return l[a]<l[c]?-1:l[a]>l[c]?1:0});f=c.Ja();for(g=0;g<k;g++)h=b.read(g),a.T.Ic(e)?f.Ti(c,h,!0):f.Jd(c,h,h+1);return f};c.prototype.sY=function(){var c=
Math.min(3.141592653589793*this.Vb-this.vb,this.vb),c=Math.min(c,.39269908169872414*this.Vb),d=new a.b;d.ka(0,10*this.mc);var b=45*this.mc,l=new a.ea(0),f=new a.ea(0),g=new a.ea(0),h=new a.ea(0),m=new a.ea(0),z=new a.ea(0),n=new a.ea(0),p=new a.ea(0),t=new a.b,u=new a.b,q=new a.b,y=new a.b;a.mb.Xi(this.Vb,this.rc,d.x,d.y,c,0,l,f);t.ka(l.j,f.j);a.mb.Xi(this.Vb,this.rc,d.x,d.y,c,b,g,h);u.ka(g.j,h.j);for(var l=new a.ea(0),f=new a.ea(0),x=new a.ea(0);;){a.mb.Xi(this.Vb,this.rc,d.x,d.y,c,.5*(0+b),m,z);
q.ka(m.j,z.j);a.mb.Md(this.Vb,this.rc,t.x,t.y,u.x,u.y,l,f,null,2);a.mb.Oj(this.Vb,this.rc,t.x,t.y,.5*l.j,f.j,n,p,2);y.ka(n.j,p.j);a.mb.Md(this.Vb,this.rc,q.x,q.y,y.x,y.y,x,null,null,2);if(x.j<=this.Po)break;b*=.9;a.mb.Xi(this.Vb,this.rc,d.x,d.y,c,b,g,h);u.ka(g.j,h.j)}this.Qo=6.283185307179586/Math.ceil(6.283185307179586/(b-0))};c.prototype.tY=function(){var c=Math.min(3.141592653589793*this.Vb-this.vb,this.vb),c=Math.min(c,.39269908169872414*this.Vb),d=new a.b,b=new a.b;d.ka(0,10*this.mc);b.ka(10*
this.mc,10*this.mc);var l=new a.ea(0),f=new a.ea(0),g=new a.ea(0);a.mb.Md(this.Vb,this.rc,d.x,d.y,b.x,b.y,g,l,f,this.$e);var h=new a.ea(0),m=new a.ea(0),z=new a.ea(0),n=new a.ea(0),p=new a.b,t=new a.ea(0),u=new a.ea(0),q=new a.ea(0),y=new a.ea(0),x=new a.ea(0),A=new a.ea(0),w=new a.ea(0),C=new a.ea(0),D=new a.ea(0),F=new a.b,E=new a.b,B=new a.b,I=new a.b,R=1,l=l.j,f=f.j+1.570796326794897,g=g.j;a.mb.Xi(this.Vb,this.rc,d.x,d.y,c,l-1.570796326794897,u,q);F.ka(u.j,q.j);a.mb.Xi(this.Vb,this.rc,b.x,b.y,
c,f,y,x);E.ka(y.j,x.j);for(var u=new a.ea(0),q=new a.ea(0),f=new a.ea(0),M=new a.ea(0);;){a.mb.Oj(this.Vb,this.rc,d.x,d.y,.5*(0+R)*g,l,h,m,this.$e);p.ka(h.j,m.j);a.mb.Md(this.Vb,this.rc,d.x,d.y,p.x,p.y,null,null,t,this.$e);a.mb.Xi(this.Vb,this.rc,p.x,p.y,c,t.j+1.570796326794897,A,w);B.ka(A.j,w.j);a.mb.Md(this.Vb,this.rc,F.x,F.y,E.x,E.y,u,q,null,2);a.mb.Oj(this.Vb,this.rc,F.x,F.y,.5*u.j,q.j,C,D,2);I.ka(C.j,D.j);a.mb.Md(this.Vb,this.rc,B.x,B.y,I.x,I.y,f,null,null,2);if(f.j<=this.Po)break;R*=.9;a.mb.Oj(this.Vb,
this.rc,d.x,d.y,R*g,l,z,n,this.$e);b.ka(z.j,n.j);a.mb.Md(this.Vb,this.rc,d.x,d.y,b.x,b.y,null,null,M,this.$e);a.mb.Xi(this.Vb,this.rc,b.x,b.y,c,M.j+1.570796326794897,y,x);E.ka(y.j,x.j)}c=R*g;1E5<c&&(c=1E5);this.uB=c};c.prototype.rY=function(){var a;a=5E4<this.vb?100:1E4<this.vb?10:1;500>this.vb/a&&(a=this.vb/500);.01>a&&(a=.01);this.Po=a};return c}();a.qM=d})(y||(y={}));(function(a){var b=function(){function b(){}b.uc=function(d,c){var e=new a.b;e.L(c);d.push(e)};b.qk=function(a,c){a.add(c.x);a.add(c.y)};
b.XC=function(a){a.yf(a.size-2)};b.ny=function(a,c){c.ka(a.get(a.size-2),a.get(a.size-1))};b.Ks=function(d,c,e,k,l,v){if(null==d)throw a.f.F();var r=d.G();if(d.u()||a.T.Jo(r))return d;var f=new b;f.mh=c;f.Qc=a.fb.kc(c);var g=a.fb.gw(f.Qc);f.lc=v;f.Vb=a.fb.Rv(f.Qc);f.rc=g*(2-g);f.mc=f.Qc.Od().Ai;f.or=f.Qc.Bo();f.St=f.or*f.mc;f.fB=k;f.eB=l;f.$e=e;197==r?(e=new a.Ia(d.description),e.jd(d,!1)):a.T.Oc(r)?(e=new a.Ua(d.description),e.dc(d,!0)):e=d;if(4!=f.$e){c=0==f.mh.Eb(f.Qc)?a.fb.Xg(e,f.mh,f.Qc,v):a.gi.Mj(e,
f.Qc);if(c.u())return c;c=b.yJ(f.mc,c);c=f.Fz(c);c=a.Vp.Nj(c,f.Qc,f.$e);f=a.fb.Xg(c,f.Qc,f.mh,v)}else{2==a.Td.Fb(c)?(d=a.fb.Lk(c),v=a.sk.local().V(e,d,c,v),v==d&&(v=new a.Ia,d.copyTo(v))):v=a.gi.Mj(e,f.Qc);c=v;if(c.u())return c;f=f.vY(c)}return f};b.yJ=function(d,c){var e=new a.h;c.ac(e);if(3.141592653589793>e.N()*d)return c;for(var k=!1,e=c.Da(),l=new a.b,v=new a.b;e.Ya();)for(;e.Ca();){var f=e.ba();l.L(f.ec());v.L(f.Cc());l.scale(d);v.scale(d);if(3.141592653589793<Math.abs(l.x-v.x)){var g=b.zv(l,
v);if(!g){k=!0;break}if(6.283185307179586<Math.abs(l.x-v.x)){k=!0;break}}}if(!k)return c;var k=c.Ja(),h=1<c.description.Ea,m=new a.b,n=new a.b,z=new a.b,p=new a.b,t=new a.Wa;for(e.yj();e.Ya();)for(var u=NaN,q=[0];e.Ca();){f=e.ba();l.L(f.ec());v.L(f.Cc());l.scale(d);v.scale(d);isNaN(u)?(b.ee(l.x,NaN,q),n.L(l)):n.L(z);u=n.x;if(g=b.zv(l,v)){if(6.283185307179586<v.x-l.x)for(;6.283185307179586<v.x-l.x;)v.x-=6.283185307179586;if(-6.283185307179586>v.x-l.x)for(;-6.283185307179586>v.x-l.x;)v.x+=6.283185307179586;
b.ee(v.x,NaN,q);z.L(v)}else m.L(v),b.UM(m),b.ee(m.x,u,q),z.ka(q[0]+m.x,m.y);.5>Math.abs(z.x-v.x)&&z.L(v);h?(f.Ex(0,t),p.L(n),p.scale(1/d),t.rb(p),(g=e.kn())?k.Rf(t):k.lineTo(t),e.Io()&&!c.Qb(e.Ta)&&(f.Ex(1,t),p.L(z),p.scale(1/d),t.rb(p),k.lineTo(t))):((g=e.kn())&&k.qA(null,0),f=k.aa()-1,p.L(n),p.scale(1/d),k.Zf(f,-1,p),e.Io()&&!c.Qb(e.Ta)&&(p.L(z),p.scale(1/d),k.Zf(f,-1,p)))}return k};b.FG=function(d,c,e,k,l,v,f,g,h,m,n,z){var r=new a.b,G=new a.b,J=0<k.compare(l);b.pF(J,k,l,r,G);b.uG(d,c,e,r,G,v,
NaN,f,g,h,m,null,n,z);J&&b.py(h,m,null,n)};b.prototype.Fz=function(d){var c=d.Ja(),e=d.Da(),k=[],l=null,v=null,f=1<d.description.Ea;f&&(l=new a.Sd(0),v=new a.Cg);for(var g=[0],h=new a.b,m=new a.b,n=new a.b,z=new a.b;e.Ya();)for(g[0]=0;e.Ca();){var p=e.ba();h.L(p.ec());m.L(p.Cc());h.scale(this.mc);m.scale(this.mc);var t=0<h.compare(m);b.pF(t,h,m,n,z);k.length=0;null!=l&&l.yf(0);0<this.fB?b.uG(this.Vb,this.rc,this.$e,n,z,this.fB,this.eB,this.St,null,null,null,f?l:null,k,g):b.QV(this.Vb,this.rc,this.$e,
n,z,this.eB,this.St,f?l:null,k,g);t&&b.py(null,null,f?l:null,k);k[0].L(p.ec());k[k.length-1].L(p.Cc());for(var u=1;u<k.length-1;u++)k[u].scale(1/this.mc);f?(t=b.RE(t,p,v),b.hE(e.kn(),e.Io()&&!d.Qb(e.Ta),p,t,l,k,c)):b.fE(e.kn(),e.Io()&&!d.Qb(e.Ta),k,c)}return c};b.prototype.vY=function(d){var c=d.Ja(),e=d.Da(),k=[],l=null,v=new a.Cg,f=1<d.description.Ea;for(f&&(l=new a.Sd(0));e.Ya();)for(;e.Ca();){var g=e.ba(),h=g.ec(),m=g.Cc(),h=0<h.compare(m),m=b.RE(h,g,v);k.length=0;null!=l&&l.yf(0);b.EL(this.Vb,
this.rc,this.mc,m,this.mh,this.fB,this.eB,f?l:null,k);h&&b.py(null,null,f?l:null,k);f?b.hE(e.kn(),e.Io()&&!d.Qb(e.Ta),g,m,l,k,c):b.fE(e.kn(),e.Io()&&!d.Qb(e.Ta),k,c)}return c};b.fE=function(a,c,e,k){a&&k.qA(null,0);a=k.aa()-1;var d=e.slice(0);k.DH(a,d,d.length-1);c&&k.Zf(a,-1,e[e.length-1])};b.hE=function(d,c,e,k,b,l,f){var r=new a.Wa;e.Dp(r);d?f.Rf(r):f.lineTo(r);if(2<l.length){d=k.Rb();for(var v=1;v<l.length-1;v++){var g=k.aI(b.get(v)*d);k.Ex(g,r);r.rb(l[v]);f.lineTo(r)}}c&&(e.Bp(r),f.lineTo(r))};
b.uG=function(d,c,e,k,l,v,f,g,h,m,n,z,p,t){var r=new a.ea(0),G=new a.ea(0),J=new a.ea(0);a.mb.Md(d,c,k.x,k.y,l.x,l.y,J,r,G,e);var J=J.j,L=r=r.j,G=G.j;0>L&&(L+=6.283185307179586);0>G&&(G+=6.283185307179586);null!=h&&(h[0]=J);null!=m&&(m[0]=L);null!=n&&(n[0]=G);m=h=NaN;null!=z&&(m=a.C.Yg(d,c),n=a.C.q(d,c,k.y),h=(m-n)/J,m=(m+n)/J);n=b.Av(k,l);var G=b.yv(k,l),L=n||G,u=b.sE(k,l,g),q=new a.ea(0),y=new a.ea(0),x=new a.b,U=new a.b,A=new a.b;b.ee(k.x,NaN,t);var w=[t[0]];if(J<=v)b.uc(p,k),b.ee(l.x,NaN,t),null!=
z&&z.add(0),L?(n&&b.ly(k,l,z,p),G&&b.hy(k,l,z,p)):u?b.ky(k,l,r,h,m,z,p):0<f&&(U.ka(k.x-w[0],k.y),x.ka(l.x-t[0],l.y),b.EA(d,c,e,k,J,r,U,x,0,1,f,z,p,w)),b.uc(p,l);else{v=1+a.J.truncate(Math.ceil(J/v));var X=J/(v-1),C=new a.b,D=0;b.uc(p,k);C.L(k);U.ka(k.x-t[0],k.y);null!=z&&z.add(0);for(var F=1;F<v;F++){var ba;F<v-1?(a.mb.Oj(d,c,k.x,k.y,F*X,r,q,y,e),x.ka(q.j,y.j),b.ee(x.x,C.x,t),A.ka(t[0]+x.x,x.y),ba=F/(v-1)):(b.ee(l.x,NaN,t),x.ka(l.x-t[0],l.y),A.L(l),ba=1);L?(1==F&&n&&b.ly(k,A,z,p),F==v-1&&G&&b.hy(C,
l,z,p)):u?b.qE(C,A,g)&&(k.x<l.x?C.x>A.x&&(t[0]+=6.283185307179586,A.ka(t[0]+x.x,x.y)):C.x<A.x&&(t[0]-=6.283185307179586,A.ka(t[0]+x.x,x.y)),b.ky(C,A,r,h,m,z,p)):0<f&&b.EA(d,c,e,k,J,r,U,x,D,ba,f,z,p,w);b.uc(p,A);null!=z&&z.add(ba);C.L(A);U.L(x);w[0]=t[0];D=ba}}};b.QV=function(d,c,e,k,l,v,f,g,h,m){var r=new a.ea(0),G=new a.ea(0),n=new a.ea(0);a.mb.Md(d,c,k.x,k.y,l.x,l.y,n,r,G,e);var G=n.j,r=r.j,z=n=NaN;if(null!=g)var z=a.C.Yg(d,c),J=a.C.q(d,c,k.y),n=(z-J)/G,z=(z+J)/G;var J=b.Av(k,l),p=b.yv(k,l),L=J||
p;f=b.sE(k,l,f);var t=b.zv(k,l),t=L||f||t;b.ee(k.x,NaN,m);var u=new a.b;b.uc(h,k);u.L(k);null!=g&&g.add(0);t?(L?(J&&b.ly(k,l,g,h),p&&b.hy(k,l,g,h)):f&&b.ky(k,l,r,n,z,g,h),b.ee(l.x,NaN,m),b.uc(h,l)):G<=v?(b.ee(l.x,NaN,m),b.uc(h,l)):(n=new a.b,f=new a.b,n.L(k),f.L(l),n.x-=m[0],f.x-=m[0],-3.141592653589793>f.x?f.x+=6.283185307179586:3.141592653589793<f.x&&(f.x-=6.283185307179586),b.EA(d,c,e,k,G,r,n,f,0,1,v,g,h,m),b.uc(h,l),b.ee(l.x,NaN,m));null!=g&&g.add(1)};b.EA=function(d,c,e,k,l,v,f,g,h,m,n,z,p,t){var r=
new a.b,G=new a.b;r.ka(f.x+t[0],f.y);new a.ea(0);new a.ea(0);new a.ea(0);new a.ea(0);var J=new a.ea(0),L=new a.ea(0),u=new a.ea(0),q=new a.b,y=new a.b,x=new a.b,A=new a.b;q.L(f);y.L(g);f=new a.Sd(0);g=new a.Sd(0);b.qk(f,y);g.add(m);var U=new a.b,w=new a.Hb,X=[];for(b.qG(4,X);0<f.size;){for(var C=!1,D,F=NaN,ba=0;3>ba;ba++)if(D=X[ba]*m+(1-X[ba])*h,a.mb.Oj(d,c,k.x,k.y,D*l,v,J,L,e),x.ka(J.j,L.j),0==ba&&(F=D,A.L(x)),b.wO(q,x,y,w),w.gc(w.oe(x,!0),U),a.mb.Md(d,c,x.x,x.y,U.x,U.y,u,null,null,2),u.j>n){C=!0;
break}C?(y.L(A),m=F,b.qk(f,y),g.add(m)):(b.XC(f),g.Ek(g.size-1,1,g.size-1),0<f.size&&(b.ee(y.x,r.x,t),G.ka(t[0]+y.x,y.y),b.uc(p,G),r.L(G),null!=z&&z.add(m),q.L(y),h=m,b.ny(f,y),m=g.get(g.size-1)))}};b.EL=function(d,c,e,k,l,v,f,g,h){var r=new a.b,G=new a.b,m=new a.b,n=new a.b,z=new a.b,J=new a.b,p=new a.b,L=new a.b,t=new a.b,u=new a.b,q=new a.ea(0),y=new a.ea(0),x=new a.b,A=[[],[]],w=1==a.Td.Fb(l);l=l.re(0);var C=k.ec(),D=k.Cc();w?(J.ka(C.x*e,C.y*e),p.ka(D.x*e,D.y*e)):(A[0][0]=C.x,A[0][1]=C.y,A[1][0]=
D.x,A[1][1]=D.y,a.fb.ku(),J.x=A[0][0]*e,J.y=A[0][1]*e,p.x=A[1][0]*e,p.y=A[1][1]*e);var F=0,E=0,B=1,I=k.Go();r.L(C);G.L(D);var D=new a.Sd(0),R=new a.Sd(0),M=new a.Sd(0);b.qk(D,G);b.qk(R,p);M.add(B);b.uc(h,r);null!=g&&g.add(E);var H=[],N;N=0<f?I?5:3:I?5:1;b.qG(N,H);for(var K=new a.ea(0),P=new a.ea(0),O=new a.ea(0),S=new a.ea(0),Q=new a.ea(0),W=new a.ea(0),V=new a.ea(0);0<R.size;){var T=!1,Y,Z=NaN;a.mb.Md(d,c,J.x,J.y,p.x,p.y,K,P,null,2);for(C=0;C<N;C++){if(0==C){if(!I&&0>=f&&K.j<=v&&3.141592653589793>
Math.abs(J.x-p.x))break;if(k.Cy(E,B)<=l)break}Y=H[C]*B+(1-H[C])*E;k.gc(Y,m);w?L.ka(m.x*e,m.y*e):(A[0][0]=m.x,A[0][1]=m.y,a.fb.ku(),L.x=A[0][0]*e,L.y=A[0][1]*e);if(0==C&&(Z=Y,z.L(m),u.L(L),0<v&&(K.j>v||3.141592653589793<=Math.abs(J.x-p.x)))){T=!0;break}if(I&&0<v){if(a.mb.Md(d,c,J.x,J.y,L.x,L.y,O,null,null,2),O.j>v||3.141592653589793<=Math.abs(J.x-L.x)){T=!0;break}}else if(0<f)if(I?(n.HU(r,G,H[C]),w?t.ka(n.x*e,n.y*e):(A[0][0]=n.x,A[0][1]=n.y,a.fb.ku(),t.x=A[0][0]*e,t.y=A[0][1]*e)):(n.L(m),t.L(L)),a.mb.Md(d,
c,J.x,J.y,t.x,t.y,S,null,null,2),S.j<=K.j){a.mb.Oj(d,c,J.x,J.y,S.j,P.j,q,y,2);x.ka(q.j,y.j);a.mb.Md(d,c,x.x,x.y,L.x,L.y,Q,null,null,2);if(Q.j>f){T=!0;break}if(I){a.mb.Md(d,c,x.x,x.y,t.x,t.y,W,null,null,2);if(W.j>f){T=!0;break}a.mb.Md(d,c,t.x,t.y,L.x,L.y,V,null,null,2);if(V.j>f){T=!0;break}}}else{T=!0;break}}T?(G.L(z),p.L(u),B=Z,b.qk(D,G),b.qk(R,p),M.add(B)):(b.XC(D),b.XC(R),M.Ek(M.size-1,1,M.size-1),b.uc(h,G),F+=K.j,null!=g&&g.add(F),0<R.size&&(r.L(G),J.L(p),E=B,b.ny(D,G),b.ny(R,p),B=M.get(M.size-
1)))}if(null!=g)for(d=1/F,C=0;C<g.size;C++)g.write(C,g.read(C)*d)};b.py=function(a,c,e,k){k.reverse();null!=e&&e.Zd(0,e.size,1);e=null!=a?a[0]:NaN;k=null!=c?c[0]:NaN;null!=a&&(a[0]=k);null!=c&&(c[0]=e)};b.pF=function(a,c,e,k,b){a?(k.L(e),b.L(c)):(k.L(c),b.L(e))};b.RE=function(a,c,e){if(!a)return c;e.create(c.G());c.copyTo(e.get());e.get().reverse();return e.get()};b.ee=function(a,c,e){if(isNaN(c)){for(;3.141592653589793<e[0]-a;)e[0]-=6.283185307179586;for(;3.141592653589793<a-e[0];)e[0]+=6.283185307179586}else 3.141592653589793<
e[0]+a-c?e[0]-=6.283185307179586:3.141592653589793<c-(e[0]+a)&&(e[0]+=6.283185307179586)};b.wO=function(a,c,e,k){3.141592653589793>Math.abs(c.x-a.x)?(k.Mc(a),3.141592653589793<=e.x-a.x?k.vm(e.x-6.283185307179586,e.y):3.141592653589793<=a.x-e.x?k.vm(e.x+6.283185307179586,e.y):k.vm(e.x,e.y)):(k.Mc(e),3.141592653589793<=a.x-e.x?k.vm(a.x-6.283185307179586,a.y):3.141592653589793<=e.x-a.x?k.vm(a.x+6.283185307179586,a.y):k.vm(a.x,a.y))};b.qG=function(a,c){for(var e=0;e<a;e++){var d=Math.ceil(e/2)/(a+1);
0!=e%2&&(d=-d);c[e]=.5+d}};b.Av=function(d,c){return a.l.W(d.y,1.570796326794897)&&!a.l.W(c.y,1.570796326794897)||a.l.W(d.y,-1.570796326794897)&&!a.l.W(c.y,-1.570796326794897)?!0:!1};b.yv=function(d,c){return a.l.W(c.y,1.570796326794897)&&!a.l.W(d.y,1.570796326794897)||a.l.W(c.y,-1.570796326794897)&&!a.l.W(d.y,-1.570796326794897)?!0:!1};b.sE=function(d,c,e){return!b.qE(d,c,e)||a.l.W(d.y,1.570796326794897)||a.l.W(d.y,-1.570796326794897)||a.l.W(c.y,1.570796326794897)||a.l.W(c.y,-1.570796326794897)?
!1:!0};b.qE=function(a,c,e){return Math.abs(Math.abs(a.x-c.x)-3.141592653589793)<=e?!0:!1};b.zv=function(d,c){return a.l.W(d.y,1.570796326794897)&&a.l.W(c.y,1.570796326794897)||a.l.W(d.y,-1.570796326794897)&&a.l.W(c.y,-1.570796326794897)?!0:!1};b.ly=function(d,c,e,k){if(0<d.y){var l=new a.b;l.ka(c.x,1.570796326794897)}else l=new a.b,l.ka(c.x,-1.570796326794897);a.l.W(d.x,l.x)||a.l.W(c.y,l.y)||(b.uc(k,l),null!=e&&e.add(0))};b.hy=function(d,c,e,k){if(0<c.y){var l=new a.b;l.ka(d.x,1.570796326794897)}else l=
new a.b,l.ka(d.x,-1.570796326794897);a.l.W(c.x,l.x)||a.l.W(d.y,l.y)||(b.uc(k,l),null!=e&&e.add(1))};b.ky=function(d,c,e,k,l,v,f){a.l.wd(e)?(0<1.570796326794897-d.y&&(e=new a.b,e.ka(d.x,1.570796326794897),b.uc(f,e),null!=v&&v.add(k)),0<1.570796326794897-c.y&&(e=new a.b,e.ka(c.x,1.570796326794897),b.uc(f,e),null!=v&&v.add(k))):(0<1.570796326794897+d.y&&(e=new a.b,e.ka(d.x,-1.570796326794897),b.uc(f,e),null!=v&&v.add(l)),0<1.570796326794897+c.y&&(e=new a.b,e.ka(c.x,-1.570796326794897),b.uc(f,e),null!=
v&&v.add(l)))};b.UM=function(a){if(-3.141592653589793>a.x)for(;-3.141592653589793>a.x;)a.x+=6.283185307179586;if(3.141592653589793<a.x)for(;3.141592653589793<a.x;)a.x-=6.283185307179586};return b}();a.Ej=b})(y||(y={}));(function(a){var b=function(){function b(){}b.Nj=function(d,c,e){if(null==d||null==c||!a.fb.Jc(c))throw a.f.F();if(d.u())return d;var k=d,l=k.G();if(a.T.Ic(l)){k=a.gi.Mj(d,c);d=new a.h;k.s(d);for(var l=a.ma.be(c,d,!1),v=a.fb.Bh(c),f=Math.floor((d.o-v.o)/v.N())*v.N()+v.o;f<d.v;)f>d.o+
l&&f<d.v-l&&(k=a.gi.gt(k,c,e,!0,f)),f+=v.N()}else{if(197==l)return d=new a.Ia(k.description),d.jd(k,!1),b.Nj(d,c,e);if(a.T.Oc(l))return d=new a.Ua(k.description),d.dc(k,!0),b.Nj(d,c,e)}return b.iV(k,c)};b.iV=function(d,c){if(null==d||null==c||!a.fb.Jc(c))throw a.f.F();if(d.u())return d;var e;e=d.G();197==e?(e=new a.Ia(d.description),e.jd(d,!1)):a.T.Oc(e)?(e=new a.Ua(d.description),e.dc(d,!0)):e=d;e=a.gi.Mj(e,c);return e.u()?e:1==a.Td.Fb(c)?a.gi.Ym(e,c,0,e!=d,0):b.cV(e,c,e!=d)};b.cV=function(d,c,e){if(!a.fb.Jc(c))throw a.f.F();
if(d.u())return d;var k=a.fb.de(c),b=0-180*k,k=360*k;2==a.Td.Fb(c)&&(b=a.fb.Bh(c),k=b.v,b=b.o,k-=b);return a.gi.Aq(d,b,k,c,e,0,!0)};return b}();a.Vp=b})(y||(y={}));(function(a){var b=function(){function b(){}b.eV=function(a,c){var e=Math.abs(a%c);return isNaN(e)||e==a||e<=Math.abs(c)/2?e:0>a?-1*(e-c):0<a?1*(e-c):0*(e-c)};b.K=function(a){return 0>a?-a:a};b.Ab=function(a,c){return 0<=c?b.K(a):-b.K(a)};b.W=function(a,c){return a==c||b.K(a-c)<=b.fD*(1+(b.K(a)+b.K(c))/2)};b.wd=function(a){return 0==a||
b.K(a)<=b.fD};b.Eu=function(a){a=b.eV(a,b.lA);return b.K(a)<=b.Oi?a:0>a?a+b.lA:a-b.lA};b.JB=function(a,c){a.j=b.Eu(a.j);c.j=b.Eu(c.j);b.K(c.j)>b.rs&&(a.j=b.Eu(a.j+b.Oi),c.j=b.Ab(b.Oi,c.j)-c.j)};b.Yg=function(a,c){c=Math.sqrt(1-c);c=(1-c)/(1+c);var e=c*c;return a/(1+c)*(1+e*(.25+e*(.015625+1/256*e)))*b.rs};b.RS=function(d,c,e,k,l){var r,f,g,h,m,n,z,p=0,t=n=0,u=0,q=0,y=0;m=0;var x,A,w;z=0;var C,D,F;w=new a.ea;r=new a.ea;if(null!=l)if(w.j=d,r.j=c,b.JB(w,r),d=w.j,c=r.j,w.j=e,r.j=k,b.JB(w,r),e=w.j,k=r.j,
e=b.Eu(e-d),b.W(c,k)&&(b.wd(e)||b.W(b.K(c),b.rs)))null!=l&&(l.j=0);else{if(b.W(c,-k)){if(b.W(b.K(c),b.rs)){null!=l&&(l.j=2*b.Yg(6378137,.0066943799901413165));return}if(b.W(b.K(e),b.Oi)){null!=l&&(l.j=2*b.Yg(6378137,.0066943799901413165));return}}if(b.wd(.0066943799901413165))q=Math.cos(c),y=Math.cos(k),null!=l&&(p=Math.sin((k-c)/2),n=Math.sin(e/2),z=2*Math.asin(Math.sqrt(p*p+q*y*n*n)),l.j=6378137*z);else{w=1-Math.sqrt(.9933056200098587);d=1-w;r=Math.atan(d*Math.tan(c));c=Math.sin(r);r=Math.cos(r);
f=Math.atan(d*Math.tan(k));k=Math.sin(f);f=Math.cos(f);h=g=e;D=0;F=1;C=e;for(A=!0;1==A;)D+=1,1==F&&(m=Math.sin(C),n=Math.cos(C),p=f*m,z=r*k-c*f*n,p=Math.sqrt(p*p+z*z),n=c*k+r*f*n,z=Math.atan2(p,n),t=1E-15>b.K(p)?r*f*m/b.Ab(1E-15,p):r*f*m/p,u=1-t*t,q=1E-15>b.K(u)?n-c*k/b.Ab(1E-15,u)*2:n-c*k/u*2,y=q*q,m=((-3*u+4)*w+4)*u*w/16),x=(1-m)*w*(z+m*p*(q+n*m*(2*y-1))),1==F?(C=e+x*t,1E-14>b.K(C-h)?A=!1:b.K(C)>b.Oi?(F=2,C=b.Oi,0>e&&(C=-C),t=0,u=1,g=h=2,z=b.Oi-b.K(Math.atan(c/r)+Math.atan(k/f)),p=Math.sin(z),n=
Math.cos(z),m=((-3*u+4)*w+4)*u*w/16,1E-14>b.K(t-g)?A=!1:(q=1E-15>b.K(u)?n-c*k/b.Ab(1E-15,u)*2:n-c*k/u*2,y=q*q)):(0>(C-h)*(h-g)&&5<D&&(C=(2*C+3*h+g)/6),g=h,h=C)):(t=(C-e)/x,0>(t-h)*(h-g)&&5<D&&(t=(2*t+3*h+g)/6),g=h,h=t,u=1-t*t,m=t*p/(r*f),n=-Math.sqrt(b.K(1-m*m)),C=Math.atan2(m,n),p=f*m,z=r*k-c*f*n,p=Math.sqrt(p*p+z*z),n=c*k+r*f*n,z=Math.atan2(p,n),m=((-3*u+4)*w+4)*u*w/16,1E-14>b.K(t-g)?A=!1:(q=1E-15>b.K(u)?n-c*k/b.Ab(1E-15,u)*2:n-c*k/u*2,y=q*q));null!=l&&(t=Math.sqrt(1+(1/(d*d)-1)*u),t=(t-1)/(t+1),
u=t*(1-.375*t*t),l.j=(1+t*t/4)/(1-t)*d*6378137*(z-u*p*(q+u/4*(n*(-1+2*y)-u/6*q*(-3+4*p*p)*(-3+4*y)))))}}};b.Oi=3.141592653589793;b.rs=1.5707963267948966;b.lA=6.283185307179586;b.fD=3.552713678800501E-15;return b}();a.oM=b})(y||(y={}));(function(a){var b=function(){return function(a){this.ue=a;this.ll=this.ue.getCode();0>this.ll&&(this.ll=0)}}();a.RZ=b;var l=function(){function d(a){void 0===a&&(a=null);this.Kh=null;this.on=!1;null!==a&&(this.Kh=new b(a))}d.prototype.yc=function(){return null!=this.Kh?
this.Kh.ll:0};d.prototype.Vf=function(){var a=new d;this.copyTo(a);return a};d.prototype.copyTo=function(a){a.Kh=this.Kh;a.on=this.on};d.prototype.Vv=function(){var a=this.Vf();a.jt();return a};d.prototype.jt=function(){this.on=!this.on};d.prototype.dn=function(){return null!=this.Kh?this.Kh.ue:null};d.prototype.AK=function(c){if(0>=c)throw a.f.F();if(c!=this.yc()){c=a.Tf.geogtran(c);if(null==c)throw a.f.F("Geogtran not found.");this.Kh=new b(c)}};d.prototype.lH=function(){return null==this.Kh?null:
this.Kh.ue.toString()};d.prototype.getName=function(){if(null==this.Kh||null==this.Kh.ue)return"";var a="";this.on&&(a+="~");return a+=this.Kh.ue.getName()};d.prototype.nY=function(c){if(null==c)throw a.f.F();var e=null;try{e=a.Tf.fromString(a.Vc.PE_TYPE_GEOGTRAN,c)}catch(k){throw a.f.F();}this.Kh=new b(e)};d.prototype.Eb=function(a){return a==this?!0:a instanceof d&&(!(0>=this.yc()||this.yc()!=a.yc())||this.dn().isEqual(a.dn()))?this.on==a.on:!1};d.prototype.toString=function(){var a=toString();
return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a};d.create=function(a,e){var c=new d;c.AK(a);e&&c.jt();return c};d.eG=function(a,e){var c=new d;c.nY(a);e&&c.jt();return c};return d}();a.io=l})(y||(y={}));(function(a){var b=function(){function a(){}a.pa=function(c,e,d,b){var k=new a;k.wn=c;k.xn=e;k.LI=d;k.MI=b;return k};a.Gs=function(a,e){return a.wn==e.wn?a.xn==e.xn?0:a.xn<e.xn?-1:1:a.wn<e.wn?-1:1};return a}(),l=function(){function d(){this.Gw=!1;this.NI=[];this.ZA=
[];this.iI=this.Gw=this.hI=!1;this.kq()}d.zo=function(){null==d.EG&&(d.EG=new d);return d.EG};d.b_=function(){return d.zo().Gw};d.e_=function(){return d.zo().iI};d.y_=function(a,e){if(a==e)return null;var c=d.zo();if(c.hI){var b=d.DA(c.ZA,a,e);return null!=b?b:null}b=d.DA(c.ZA,a,e);return null!=b?b:d.DA(c.NI,a,e)};d.eO=function(c,e,d,b,l){var k=a.my.create();if(0<c)try{var r=a.io.create(c,e);if(0==r.yc())return null;k.add(r);if(0<d){var v=a.io.create(d,b);if(0==v.yc())return null;k.add(v)}l&&(k=k.Vv())}catch(U){k=
null}return k};d.DA=function(a,e,k){if(e==k||0==a.length)return null;for(var c=b.pa(e,k,0,0),l=!1,f=!1,g=0,h=0,m=-1,n=0;n<a.length;n++)if(0===b.Gs(c,a[n])){m=n;break}if(0>m||a[m].wn!=c.wn||a[m].xn!=c.xn){c=b.pa(k,e,0,0);e=-1;for(n=0;n<a.length;n++)if(0===b.Gs(c,a[n])){e=n;break}0<=e&&a[e].wn==c.wn&&a[e].xn==c.xn&&(g=a[e].LI,h=a[e].MI,f=l=!0)}else g=a[m].LI,h=a[m].MI,l=!1,f=!0;if(!f)return null;0==g&&(g=h,h=0);c=a=!1;0>g&&(g=-g,a=!0);0>h&&(h=-h,c=!0);return d.eO(g,a,h,c,l)};d.prototype.kq=function(){this.AE(this.NI)&&
(this.Gw=!0);this.AE(this.ZA)&&(this.iI=!0);this.hI=!this.Gw};d.prototype.AE=function(a){try{for(var c=[],c=c.sort(b.Gs),d=0;d<c.length;d++)a.push(c[d])}catch(r){}return!0};d.Q_=function(){return null};return d}();a.QZ=l})(y||(y={}));(function(a){var b=function(){function a(){}a.prototype.Ly=function(a){this.Hi=a};a.prototype.ME=function(a){this.Mb=a};a.prototype.NE=function(a){this.np=a};a.IF=function(a){return a.u()||1607!=a.G()&&1736!=a.G()?!1:!0};a.GF=function(a){return a.u()||1607!=a.G()&&1736!=
a.G()||20>a.D()?!1:!0};a.HF=function(a){return a.u()||1607!=a.G()&&1736!=a.G()||20>a.D()?!1:!0};return a}();a.wl=b})(y||(y={}));(function(a){var b=function(){function b(){}b.lX=function(d){var c=new a.Ia;c.Zx(d.R.o,d.R.A);c.Wj(d.R.o,d.R.B);c.Wj(d.R.v,d.R.B);c.Wj(d.R.v,d.R.A);return c};b.Xg=function(d,c){return null===d?null:a.ns.local().V(d,c,null)};b.fZ=function(d,c){var e=a.ei.local();d=new a.hd(d);return e.V(d,c,null).next()};b.Wm=function(d,c,e){return a.cq.local().V(d,c,e,null)};b.Pp=function(d,
c,e){return a.ty.local().V(d,c,e,null)};b.NY=function(d,c,e){var k=a.ty.local();d=new a.hd(d);c=new a.hd(c);e=k.V(d,c,e,null);for(k=[];null!=(c=e.next());)k.push(c);return k};b.Eb=function(d,c,e){return a.Gj.local().V(3,d,c,e,null)};b.PR=function(d,c,e){return a.Gj.local().V(4,d,c,e,null)};b.KU=function(d,c,e){var k=a.sk.local();d=new a.hd(d);c=new a.hd(c);e=k.V(d,c,e,null);for(k=[];null!=(c=e.next());)k.push(c);return k};b.MR=function(d,c,e){var k=a.cq.local();d=new a.hd(d);c=new a.hd(c);e=k.V(d,
c,e,null);for(k=[];null!=(c=e.next());)k.push(c);return k};b.Ma=function(d,c,e){return a.sk.local().V(d,c,e,null)};b.qZ=function(d,c,e){return a.Gj.local().V(2,d,c,e,null)};b.contains=function(d,c,e){return a.Gj.local().V(1,d,c,e,null)};b.xR=function(d,c,e){return a.Gj.local().V(16,d,c,e,null)};b.touches=function(d,c,e){return a.Gj.local().V(8,d,c,e,null)};b.nW=function(d,c,e){return a.Gj.local().V(32,d,c,e,null)};b.MU=function(d,c,e){return a.Gj.local().V(1073741824,d,c,e,null)};b.XB=function(d,
c,e,k){return a.oN.local().V(d,c,e,k,null)};b.Cb=function(d,c,e,k){var b=null;if(null!=e){if(b=e.Od(),null!=k&&b.yc()!=k.yc()&&b.nd!=k.nd)throw a.f.uk();}else if(null!=k)throw a.f.F();d=a.gN.local().V(d,c,null);null!==b&&null!==k&&(d=a.oc.li(d,b,k));return d};b.clip=function(d,c,e){return a.aN.local().V(d,a.h.pa(c.R.o,c.R.A,c.R.v,c.R.B),e,null)};b.Hl=function(d,c,e){if(null==d||null==c)return null;d=a.cN.local().V(!0,d,c,e,null);for(c=[];null!=(e=d.next());)e.u()||c.push(e);return c.slice(0)};b.PP=
function(d,c,e,k,l,v,f,g){if(!0===l)return b.XM(d,c,e,k,v,f,g);l=e;if(null!=c){if(f=c.Od(),null!=k&&f.yc()!=k.yc()){if(f.nd!=k.nd)throw a.f.uk();l=[];a.oc.cG(e,e.length,k,f,l)}}else if(null!=k)throw a.f.F();e=a.BD.local();if(v){d=new a.hd(d);c=e.V(d,c,l,v,null);for(d=[];null!=(v=c.next());)d.push(v);v=d.slice(0)}else for(v=[],k=0;k<d.length;k++)v[k]=e.V(d[k],c,l[k],null);return v};b.XM=function(d,c,e,k,b,l,f){if(null===c)throw a.f.F();if(null===k||void 0===k)k=4326!==c.yc()?c.Od():a.oc.ze(9001);if(0!==
k.nd)throw a.f.F();a.oc.cG(e,e.length,k,a.oc.ze(9001),e);k=a.GD.local();if(b){d=new a.hd(d);c=k.V(d,c,l,e,f,!1,b,null);for(e=[];null!=(l=c.next());)e.push(l);b=e.slice(0)}else{b=[];for(var r=0;r<d.length;r++)b[r]=k.V(d[r],c,l,e[r],f,!1,null)}return b};b.buffer=function(d,c,e,k,b,l,f){var r=e;if(!1===b){if(null!=c){if(b=c.Od(),null!=k&&b.yc()!=k.yc()){if(b.nd!=k.nd)throw a.f.uk();r=a.oc.li(e,k,b)}}else if(null!=k)throw a.f.F();d=a.BD.local().V(d,c,r,null)}else{if(null===c)throw a.f.F();if(null===k||
void 0===k)k=4326!==c.yc()?c.Od():a.oc.ze(9001);if(0!==k.nd)throw a.f.F();r=a.oc.li(e,k,a.oc.ze(9001));d=a.GD.local().V(d,c,l,r,f,!1,null)}return d};b.lW=function(d,c,e,k,b,l,f){if(null!=c){var r=c.Od();if(null!=f&&r.yc()!=f.yc()){if(r.nd!=f.nd)throw a.f.uk();e=a.oc.li(e,f,r)}}else if(null!=f)throw a.f.F();d=new a.hd(d);c=a.KD.local().V(d,c,e,k,b,l,null);for(e=[];null!=(k=c.next());)e.push(k);return e.slice(0)};b.offset=function(d,c,e,k,b,l,f){if(null!=c){var r=c.Od();if(null!=f&&r.yc()!=f.yc()){if(r.nd!=
f.nd)throw a.f.uk();e=a.oc.li(e,f,r)}}else if(null!=f)throw a.f.F();return a.KD.local().V(d,c,e,k,b,l,null)};b.gR=function(d){return a.DD.local().V(d,null)};b.hR=function(d,c){var e=a.DD.local();d=new a.hd(d);e=e.V(d,c,null);for(d=[];null!=(c=e.next());)d.push(c);return d};b.Yz=function(d,c,e){return a.ry.local().Yz(d,c,e)};b.Zz=function(d,c){return a.ry.local().Zz(d,c)};b.$z=function(d,c,e,k){return a.ry.local().$z(d,c,e,k)};b.BC=function(d,c){return a.Lm.local().V(d,c,!1,null)};b.XU=function(d,
c){return a.Lm.local().Vq(d,c,null)};b.FS=function(d,c,e,k,b){var l=a.FD.local();if(null!=c){if(c=c.Od(),null!=b&&c.yc()!=b.yc()){if(c.nd!=b.nd)throw a.f.uk();e=a.oc.li(e,b,c)}}else if(null!=b)throw a.f.F();return l.V(d,e,k,null)};b.Ks=function(d,c,e,k){var b=a.Km.local();if(null!=c){if(c=c.Od(),null!=k&&c.yc()!=k.yc()){if(c.nd!=k.nd)throw a.f.uk();e=a.oc.li(e,k,c)}}else if(null!=k)throw a.f.F();return b.V(d,e,null)};b.Dz=function(d,c,e,k,b){void 0===b&&(b=0);var l=a.iN.local();if(4==b)throw a.f.df();
if(0!==b)throw a.f.df();if(null!=c){var r=c.Od();if(null!=k&&r.yc()!=k.yc()){if(r.nd!=k.nd)throw a.f.uk();e=a.oc.li(e,k,r)}}else if(null!=k)throw a.f.F();return l.V(d,e,c,b,null)};b.LS=function(d,c,e,k){if(null===d)return 0;if(4==k)throw a.f.df();if(0!==k)throw a.f.df();if(197==d.G())d=b.lX(d);else if(1736!=d.G())return 0;k=a.fb.kc(c);d=a.fb.Xg(d,c,k,null);d=a.pM.MS([d])[0];if(null!==e){if(2!==e.nd)throw a.f.F("Unit must be a area unit type");d=a.oc.li(d,a.oc.ze(109404),e)}return d};b.PS=function(d,
c,e,k){d=a.kN.local().V(d,c,k,null);if(null!==e){if(0!==e.nd)throw a.f.F("Unit must be a linear unit type");d=a.oc.li(d,a.oc.ze(9001),e)}return d};b.vW=function(d,c,e){if(null===d)return 0;var k=null;if(null!=c){k=c.Od();if(0==k.nd&&(k=a.oc.kH(k),null==k&&null!==e))throw a.f.F();if(null!=e&&k.yc()!=e.yc()&&k.nd!=e.nd)throw a.f.uk();}else if(null!=e)throw a.f.F();return 1736==d.G()||197==d.G()?(d=d.hf(),null!==e?a.oc.li(d,k,e):d):0};b.wW=function(d,c,e){if(null===d||d.u()||1>d.tb())return 0;var k=
null;if(null!=c){if(k=c.Od(),null!=e&&k.yc()!=e.yc()&&k.nd!=e.nd)throw a.f.uk();}else if(null!=e)throw a.f.F();1736==d.G()||197==d.G()?c=d.Gg():a.T.Oc(d.G())?(c=new a.Ua(d.description),c.dc(d,!0)):c=d;d=0;c=c.Da();for(var b=new a.b,l=new a.b;c.Ya();)for(;c.Ca();){var f=c.ba();f.Oq(b);f.Os(l);d+=a.b.Cb(b,l)}null!==k&&null!==e&&(d=a.oc.li(d,k,e));return d};b.ZZ=function(d,c){return a.Td.OS(d,c)};b.bG=function(a){return void 0!==a.points?b.jW(a,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM):void 0!==
a.rings?b.vH(a.rings,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM,"P"):void 0!==a.paths?b.vH(a.paths,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM,"L"):void 0!==a.x?b.tW(a):void 0!==a.xmin?b.bW(a):null};b.tW=function(d){if(null==d.x||"NaN"==d.x)return new a.Wa;var c=new a.Wa(d.x,d.y);void 0!==d.z&&null!==d.z&&c.qY(d.z);void 0!==d.m&&null!==d.m&&c.aY(d.m);return c};b.bW=function(d){if(null==d.xmin||"NaN"==d.xmin)return new a.ci;var c=new a.ci(d.xmin,d.ymin,d.xmax,d.ymax);void 0!==d.zmin&&
null!==d.zmin&&c.setInterval(1,0,d.zmin,d.zmax);void 0!==d.mmin&&null!==d.mmin&&c.setInterval(2,0,d.mmin,d.mmax);return c};b.jW=function(d,c,e){var k=0,b=new a.Ed,l=3*d.points.length;0!=l%2&&l++;2>l&&(l=2);var f=a.J.truncate(3*d.points.length/2);4>f?f=4:16>f&&(f=16);for(var l=a.Uc.Vm(l,0),g=a.Uc.Vm(f),f=a.Uc.Vm(f),h=0;h<d.points.length;h++)l.write(2*h,d.points[h][0]),l.write(2*h+1,d.points[h][1]),g.write(h,c||e?d.points[h][2]:NaN),f.write(h,e&&c?d.points[h][3]:NaN),k++;0!=k&&(b.resize(k),b.Zn(0,l));
c&&(b.Ud(1),b.Zn(1,g));e&&(b.Ud(2),b.Zn(2,0==c?g:f));b.Dc(16777215);return b};b.vH=function(d,c,e,k){var b,l=0,f=2;"P"==k?(b=new a.Ia,l=1,f=3):b=new a.Ua;for(var g=a.Uc.wh(0),h=a.Uc.vq(0),m=0,n=0,z=[],p=[],t=0;t<d.length;t++){var u=d[t].length;z[t]=!1;if("P"===k&&d[t][0][0]===d[t][d[t].length-1][0]&&d[t][0][1]===d[t][d[t].length-1][1]){var q=0==e?!0:d[t][0][3]===d[t][d[t].length-1][3]||void 0===d[t][0][3]&&void 0===d[t][d[t].length-1][3];(0==c||d[t][0][2]===d[t][d[t].length-1][2]||void 0===d[t][0][2]&&
void 0===d[t][d[t].length-1][2])&&q&&(z[t]=!0,--u)}u>=f?(p[t]=!1,n+=1,g.add(m),h.add(l),m+=u):p[t]=!0}k=3*m;0!=k%2&&k++;2>k&&(k=2);t=a.J.truncate(3*m/2);4>t?t=4:16>t&&(t=16);k=a.Uc.Vm(k,0);l=a.Uc.Vm(t);f=a.Uc.Vm(t);for(t=u=0;t<d.length;t++)if(!1===p[t])for(q=0;q<d[t].length;q++){var y=!1;q===d[t].length-1&&!0===z[t]&&(y=!0);y||(k.write(2*u,d[t][q][0]),k.write(2*u+1,d[t][q][1]),l.write(u,c||e?d[t][q][2]:NaN),f.write(u,e&&c?d[t][q][3]:NaN),u++)}0!=m&&(d=b,g.resize(n),h.resize(n),0<m&&(g.add(m),h.add(0)),
d.Zn(0,k),d.FK(h),d.GK(g));c&&(b.Ud(1),b.Zn(1,l));e&&(b.Ud(2),b.Zn(2,0==c?l:f));b.Dc(16777215);return b};return b}();a.cc=b})(y||(y={}));(function(a){var b=function(){function a(){}a.Im=function(a){var c=0,e,d=a.length,b=a[0],l;for(e=0;e<d-1;e++)l=a[e+1],c+=(l[0]-b[0])*(l[1]+b[1]),b=l;return 0<=c};a.rotate=function(d,c,e){c=c*Math.PI/180;var k=Math.cos(c),b=Math.sin(c);if(void 0!==d.paths){c={paths:[]};for(var l=0;l<d.paths.length;l++){for(var f=d.paths[l],g=[],h=0;h<f.length;h++){var m=f[h].slice(0);
g.push(m);var n=k*(f[h][0]-e.x)-b*(f[h][1]-e.y)+e.x,z=b*(f[h][0]-e.x)+k*(f[h][1]-e.y)+e.y;m[0]=n;m[1]=z}c.paths.push(g)}return c}if(void 0!==d.rings){c={rings:[]};for(l=0;l<d.rings.length;l++){for(var f=d.rings[l],g=[],p=a.Im(f),h=0;h<f.length;h++)m=f[h].slice(0),g.push(m),n=k*(f[h][0]-e.x)-b*(f[h][1]-e.y)+e.x,z=b*(f[h][0]-e.x)+k*(f[h][1]-e.y)+e.y,m[0]=n,m[1]=z;a.Im(g)!==p&&g.reverse();c.rings.push(g)}return c}if(void 0!==d.x)return c={x:k*(d.x-e.x)-b*(d.y-e.y)+e.x,y:b*(d.x-e.x)+k*(d.y-e.y)+e.y},
void 0!==d.z&&(c.z=d.z),void 0!==d.m&&(c.m=d.m),c;if(void 0!==d.points){c={points:[]};d=d.points;for(h=0;h<d.length;h++)l=d[h].slice(0),l[0]=k*(d[h][0]-e.x)-b*(d[h][1]-e.y)+e.x,l[1]=b*(d[h][0]-e.x)+k*(d[h][1]-e.y)+e.y,c.points.push(l);return c}return null};a.yG=function(d,c){var e,k;if(void 0!==d.paths){e={paths:[]};for(var b=0;b<d.paths.length;b++){for(var l=d.paths[b],f=[],g=0;g<l.length;g++){var h=l[g].slice(0);f.push(h);k=c.x-l[g][0];h[0]=l[g][0]+2*k}e.paths.push(f)}return e}if(void 0!==d.rings){e=
{rings:[]};for(b=0;b<d.rings.length;b++){for(var l=d.rings[b],m=a.Im(l),f=[],g=0;g<l.length;g++)h=l[g].slice(0),f.push(h),k=c.x-l[g][0],h[0]=l[g][0]+2*k;a.Im(f)!==m&&f.reverse();e.rings.push(f)}return e}if(void 0!==d.x)return k=c.x-d.x,e={x:d.x+2*k,y:d.y},void 0!==d.z&&(e.z=d.z),void 0!==d.m&&(e.m=d.m),e;if(void 0!==d.points){e={points:[]};b=d.points;for(g=0;g<b.length;g++)l=b[g].slice(0),k=c.x-l[0],l[0]+=2*k,e.points.push(l);return e}return void 0!==d.xmin?(e={o:d.xmin,A:d.ymin,v:d.xmax,B:d.ymax},
void 0!==d.zmin&&(e.zmin=d.zmin,e.zmax=d.zmax),void 0!==d.mmin&&(e.mmin=d.mmin,e.mmax=d.mmax),k=c.x-d.xmin,e.xmax=d.xmin+2*k,k=c.x-d.xmax,e.xmin=d.xmax+2*k,e):null};a.zG=function(d,c){var e,k;if(void 0!==d.paths){e={paths:[]};for(var b=0;b<d.paths.length;b++){for(var l=d.paths[b],f=[],g=0;g<l.length;g++){var h=l[g].slice(0);f.push(h);k=c.y-l[g][1];h[1]=l[g][1]+2*k}e.paths.push(f)}return e}if(void 0!==d.rings){e={rings:[]};for(b=0;b<d.rings.length;b++){for(var l=d.rings[b],m=a.Im(l),f=[],g=0;g<l.length;g++)h=
l[g].slice(0),f.push(h),k=c.y-l[g][1],h[1]=l[g][1]+2*k;a.Im(f)!==m&&f.reverse();e.rings.push(f)}return e}if(void 0!==d.x)return k=c.y-d.y,e={y:d.y+2*k,x:d.x},void 0!==d.z&&(e.z=d.z),void 0!==d.m&&(e.m=d.m),e;if(void 0!==d.points){e={points:[]};b=d.points;for(g=0;g<b.length;g++)l=b[g].slice(0),k=c.y-l[1],l[1]+=2*k,e.points.push(l);return e}return void 0!==d.xmin?(e={o:d.xmin,A:d.ymin,v:d.xmax,B:d.ymax},void 0!==d.zmin&&(e.zmin=d.zmin,e.zmax=d.zmax),void 0!==d.mmin&&(e.mmin=d.mmin,e.mmax=d.mmax),k=
c.y-d.ymin,e.ymax=d.ymin+2*k,k=c.y-d.ymax,e.ymin=d.ymax+2*k,e):null};return a}();a.Wp=b})(y||(y={}));(function(a){var b=function(){function b(){}b.bh=function(d,c){null==c&&(c=a.ye.Ig());switch(d){case 33:return new a.Wa(c);case 322:return new a.Hb(c);case 197:return new a.ci(c);case 550:return new a.Ed(c);case 1607:return new a.Ua(c);case 1736:return new a.Ia(c);default:throw a.f.X("invalid argument.");}};return b}();a.tM=b})(y||(y={}));(function(a){var b=function(){function b(d,c){this.tf=a.ia.yd(d,
-1);this.va=new a.Ku;this.bm=c}b.prototype.wX=function(a){this.va.ou(Math.min(this.tf.size,a));this.va.Wn(a)};b.prototype.addElement=function(d,c){if(void 0===c)return this.bP(d);c=a.J.truncate(c%this.tf.size);var e=this.tf.get(c);-1==e&&(e=this.va.mi(),this.tf.set(c,e));return this.va.addElement(e,d)};b.prototype.bP=function(d){var c=this.bm.Uz(d),c=a.J.truncate(c%this.tf.size),e=this.tf.get(c);-1==e&&(e=this.va.mi(),this.tf.set(c,e));return this.va.addElement(e,d)};b.prototype.kd=function(d,c){if(void 0===
c)this.FR(d);else{c=a.J.truncate(c%this.tf.size);var e=this.tf.get(c);if(-1==e)throw a.f.F();for(var k=this.va.xc(e),b=-1;-1!=k;){var l=this.va.nb(k);this.va.ja(k)==d?(this.va.kd(e,b,k),-1==this.va.xc(e)&&(this.va.zh(e),this.tf.set(c,-1))):b=k;k=l}}};b.prototype.FR=function(d){var c=this.bm.Uz(d),c=a.J.truncate(c%this.tf.size),e=this.tf.get(c);if(-1==e)throw a.f.F();for(var k=this.va.xc(e),b=-1;-1!=k;){var l=this.va.nb(k);this.va.ja(k)==d?(this.va.kd(e,b,k),-1==this.va.xc(e)&&(this.va.zh(e),this.tf.set(c,
-1))):b=k;k=l}};b.prototype.gT=function(d){d=a.J.truncate(d%this.tf.size);d=this.tf.get(d);return-1==d?-1:this.va.xc(d)};b.prototype.wT=function(a){return this.va.nb(a)};b.prototype.Ld=function(d){var c=this.bm.Uz(this.ja(d)),c=a.J.truncate(c%this.tf.size),e=this.tf.get(c);if(-1==e)throw a.f.F();for(var k=this.va.xc(e),b=-1;-1!=k;){if(k==d){this.va.kd(e,b,k);-1==this.va.xc(e)&&(this.va.zh(e),this.tf.set(c,-1));return}b=k;k=this.va.nb(k)}throw a.f.F();};b.prototype.ja=function(a){return this.va.ja(a)};
b.prototype.clear=function(){this.tf=a.ia.yd(this.tf.size,-1);this.va.clear()};b.prototype.size=function(){return this.va.dH()};return b}();a.DM=b})(y||(y={}));(function(a){var b=function(){function b(){this.kj=new a.ad(3);this.va=new a.ad(6);this.rV=!1;this.Ge=-1}b.prototype.Kl=function(a){this.kj.kd(a)};b.prototype.Ax=function(){return this.kj.Pe()};b.prototype.Ov=function(a){this.va.kd(a)};b.prototype.EB=function(){return this.va.Pe()};b.prototype.tC=function(a,c){this.kj.P(a,1,c)};b.prototype.Px=
function(a,c){this.kj.P(a,2,c)};b.prototype.$X=function(a,c){this.kj.P(a,3,c)};b.prototype.rC=function(a,c){this.va.P(a,4,c)};b.prototype.cY=function(a,c){this.va.P(a,3,c)};b.prototype.JK=function(a,c){this.va.P(a,2,c)};b.prototype.mi=function(a){var c=this.EB();this.va.P(c,3,this.Ge);this.va.P(c,4,0);this.va.P(c,5,a);-1!=this.Ge&&this.JK(this.Ge,c);return this.Ge=c};b.prototype.zh=function(a){this.PF(a);var c=this.va.S(a,2),e=this.va.S(a,3);-1!=c?this.cY(c,e):this.Ge=e;-1!=e&&this.JK(e,c);this.Ov(a);
return e};b.prototype.ou=function(a){this.va.Qe(a)};b.prototype.ZG=function(a){return this.va.S(a,5)};b.prototype.ZX=function(a,c){this.va.P(a,5,c)};b.prototype.addElement=function(a,c){return this.nU(a,c)};b.prototype.nU=function(a,c){var e=this.Ax();this.Px(e,-1);-1==this.va.S(a,0)&&this.va.P(a,0,e);var d=this.va.S(a,1);this.tC(e,d);-1!=d&&this.Px(d,e);this.va.P(a,1,e);this.setData(e,c);this.rC(a,this.$s(a)+1);this.rV&&this.$X(e,a);return e};b.prototype.kd=function(a,c){var e=this.Ve(c),d=this.nb(c);
-1!=e?this.Px(e,d):this.va.P(a,0,d);-1!=d?this.tC(d,e):this.va.P(a,1,e);this.Kl(c);this.rC(a,this.$s(a)-1);return d};b.prototype.Wn=function(a){this.kj.Qe(a)};b.prototype.getData=function(a){return this.kj.S(a,0)};b.prototype.setData=function(a,c){this.kj.P(a,0,c)};b.prototype.nb=function(a){return this.kj.S(a,2)};b.prototype.Ve=function(a){return this.kj.S(a,1)};b.prototype.xc=function(a){return this.va.S(a,0)};b.prototype.Fc=function(a){return this.va.S(a,1)};b.prototype.clear=function(){for(var a=
this.Ge;-1!=a;)a=this.zh(a)};b.prototype.PF=function(a){for(var c=this.Fc(a);-1!=c;){var e=c,c=this.Ve(e);this.Kl(e)}this.va.P(a,0,-1);this.va.P(a,1,-1);this.rC(a,0)};b.prototype.u=function(){return 0==this.kj.size};b.prototype.dH=function(){return this.kj.size};b.prototype.$s=function(a){return this.va.S(a,4)};b.prototype.aA=function(a){return this.va.S(a,3)};return b}();a.Xp=b})(y||(y={}));(function(a){var b=function(){function b(d){void 0===d?(this.Qg=new a.ad(2),this.va=new a.ad(4),this.Ge=-1,
this.Bw=!0):(this.Qg=new a.ad(2),this.va=new a.ad(d?4:2),this.Ge=-1,this.Bw=d)}b.prototype.Kl=function(a){this.Qg.kd(a)};b.prototype.Ax=function(){return this.Qg.Pe()};b.prototype.Ov=function(a){this.va.kd(a)};b.prototype.EB=function(){return this.va.Pe()};b.prototype.mi=function(){var a=this.EB();this.Bw&&(this.va.P(a,3,this.Ge),-1!=this.Ge&&this.va.P(this.Ge,2,a),this.Ge=a);return a};b.prototype.zh=function(a){for(var c=this.xc(a);-1!=c;){var e=c,c=this.nb(c);this.Kl(e)}this.Bw&&(c=this.va.S(a,
2),e=this.va.S(a,3),-1!=c?this.va.P(c,3,e):this.Ge=e,-1!=e&&this.va.P(e,2,c));this.Ov(a)};b.prototype.ou=function(a){this.va.Qe(a)};b.prototype.addElement=function(a,c){var e=this.va.S(a,1),d=this.Ax();-1!=e?this.Qg.P(e,1,d):this.va.P(a,0,d);this.va.P(a,1,d);this.Qg.P(d,0,c);return d};b.prototype.Wn=function(a){this.Qg.Qe(a)};b.prototype.kd=function(a,c,e){-1!=c?(this.Qg.P(c,1,this.Qg.S(e,1)),this.va.S(a,1)==e&&this.va.P(a,1,c)):(this.va.P(a,0,this.Qg.S(e,1)),this.va.S(a,1)==e&&this.va.P(a,1,-1));
this.Kl(e)};b.prototype.lz=function(a,c){var e=this.va.S(a,1),d=this.va.S(c,0);-1!=d&&(-1!=e?this.Qg.P(e,1,d):this.va.P(a,0,d),this.va.P(a,1,this.va.S(c,1)));this.Bw&&(e=this.va.S(c,2),d=this.va.S(c,3),-1!=e?this.va.P(e,3,d):this.Ge=d,-1!=d&&this.va.P(d,2,e));this.Ov(c)};b.prototype.ja=function(a){return this.Qg.S(a,0)};b.prototype.jk=function(a,c){this.Qg.P(a,0,c)};b.prototype.nb=function(a){return this.Qg.S(a,1)};b.prototype.xc=function(a){return this.va.S(a,0)};b.prototype.yo=function(a){return this.ja(this.xc(a))};
b.prototype.clear=function(){this.Qg.Vi(!0);this.va.Vi(!0);this.Ge=-1};b.prototype.u=function(a){return void 0===a?0==this.Qg.size:-1==this.va.S(a,0)};b.prototype.dH=function(){return this.Qg.size};b.prototype.aA=function(a){return this.va.S(a,3)};return b}();a.Ku=b})(y||(y={}));(function(a){var b=function(){function b(){}b.YD=function(d,c,e,k,l,f,g){var r=new a.b;r.L(d);d=new a.b;d.L(c);l.My(r);l.My(d);c=l.Vu(r);var v=l.Vu(d);0==v&&(v=l.YG());if(r.x!=d.x&&(r.y!=d.y||r.y!=l.A&&r.y!=l.B)||v>c!=f){c=
l.yE(r);var v=l.yE(d),h,m=f?1:3;do c=c+m&3,h=l.Fx(c),0!=g&&(k=b.YD(r,h,e,k,l,f,g)),e[k++].ka(h.x,h.y),r=h;while((c&3)!=v);0!=g&&(k=b.YD(r,d,e,k,l,f,g))}else if(l=new a.b,l.ka(d.x-r.x,d.y-r.y),0!=g&&(g=a.J.truncate(l.QO()/g),0<g))for(l.scale(1/(g+1)),f=0;f<g;f++)r.add(l),e[k++].ka(r.x,r.y);return k};b.be=function(a,c,e){c=c.no();a=null!=a&&void 0!==a.re?a.re(0):0;e&&(c*=4,a*=1.1);return Math.max(a,c)};b.Bs=function(a){return 2*Math.sqrt(2)*a};b.qP=function(a){return Math.sqrt(2)*a};b.ah=function(d,
c,e){var k=new a.h;c.s(k);return b.be(d,k,e)};b.EF=function(a,c,e){c=c.xf(1,0).no();a=null!=a?a.re(1):0;e&&(c*=4,a*=1.1);return Math.max(a,c)};b.$Z=function(d,c){var e=new a.h;d.ac(e);e.Nb(c);return e};b.Yv=function(d,c){var e=new a.h;d.ac(e);d=new a.h;c.ac(d);e.Nb(d);return e};b.i_=function(d,c){var e=d.lT(c),k=d.wa(c),b=d.Gc(c),l=d.Aa(e);e==k?(b=d.Aa(b-1),e=d.Aa(k+1)):e==b-1?(b=d.Aa(e-1),e=d.Aa(k)):(b=d.Aa(e-1),e=d.Aa(e+1));l=a.b.zp(b,l,e);return 0==l?0<d.Tm(c):-1==l};b.$P=function(d){var c=new a.h;
d.ac(c);if(c.u())return null;var e=new a.gq(c,8),k=-1,b=new a.h,l=!1;do for(var f=0,g=d.aa();f<g;f++)if(d.ik(f,b),k=e.kw(f,b,k),-1==k){if(l)throw a.f.X("internal error");d.uo(c,!1);l=!0;e.reset(c,8);break}else l=!1;while(l);return e};b.zF=function(d){var c=new a.h;d.ac(c);for(var e=new a.gq(c,8),k=-1,b=d.Da(),l=new a.h,f=!1;b.Ya();)for(;b.Ca();){var g=b.ba(),h=b.Db();g.s(l);k=e.kw(h,l,k);if(-1==k){if(f)throw a.f.ya();d.uo(c,!1);f=!0;e.reset(c,8);b.yj();break}}return e};b.Lj=function(d,c){var e=new a.h;
d.ac(e);for(var k=new a.gq(e,8),b=-1,l=new a.h,f=d.Da(),g=!1;f.Ya();)for(;f.Ca();){var h=f.ba(),m=f.Db();h.s(l);if(l.Yb(c)&&(b=k.kw(m,l,b),-1==b)){if(g)throw a.f.X("internal error.");d.uo(e,!1);g=!0;k.reset(e,8);f.yj();break}}return k};b.S_=function(d){var c=new a.h;d.ac(c);for(var e=new a.gq(c,8),k=new a.b,b=new a.h,l=!1,f=0;f<d.D();f++)if(d.w(f,k),b.I(k),-1==e.eh(f,b)){if(l)throw a.f.ya();d.uo(c,!1);l=!0;e.reset(c,8);f=-1}return e};b.AF=function(d,c){for(var e=new a.gq(c,8),k=new a.b,b=!1,l=new a.h,
f=0;f<d.D();f++)if(d.w(f,k),c.contains(k)&&(l.I(k),-1==e.eh(f,l))){if(b)throw a.f.ya();b=!0;f=new a.h;d.uo(f,!1);e.reset(f,8);f=-1}return e};b.bT=function(d,c,e){var k=new a.h,b=new a.h;d.ac(k);c.ac(b);k.O(e,e);b.O(e,e);var l=new a.h;l.I(k);l.Ma(b);d=d.Da();c=c.Da();var f=new a.eD;f.xC(e);var g=!1;for(f.aL();d.Ya();)for(;d.Ca();)d.ba().s(k),k.Yb(l)&&(g=!0,e=new a.h,e.I(k),f.YE(d.Db(),e));f.sG();if(!g)return null;k=!1;for(f.$K();c.Ya();)for(;c.Ca();)c.ba().s(b),b.Yb(l)&&(k=!0,e=new a.h,e.I(b),f.UE(c.Db(),
e));f.rG();return k?f:null};b.cT=function(d,c,e,k,b){var l=d.G(),r=c.G(),f=new a.h,g=new a.h;d.ac(f);c.ac(g);f.O(e,e);g.O(e,e);var h=new a.h;h.I(f);h.Ma(g);var m=new a.eD;m.xC(e);var n=!1;m.aL();var p=0;for(e=d.aa();p<e;p++)if(!k||1736!=l||d.qw(p))d.ik(p,f),f.Yb(h)&&(n=!0,m.YE(p,f));m.sG();if(!n)return null;d=!1;m.$K();k=0;for(e=c.aa();k<e;k++)if(!b||1736!=r||c.qw(k))c.ik(k,g),g.Yb(h)&&(d=!0,m.UE(k,g));m.rG();return d?m:null};b.n_=function(a,c){return 0<a.Kk(c)};b.R_=function(d,c){var e=new a.h;d.gX(c,
e);var e=new a.gq(e,8),k=-1,b=new a.h;d=d.Da();d.dC(c);if(d.Ya())for(;d.Ca();){c=d.ba();var l=d.Db();c.ac(b);k=e.kw(l,b,k);if(-1==k)throw a.f.X("internal error");}return e};b.Ev=function(d,c,e){if(d!=c)for(var k=0;k<e;k++)null==d[k]?d[k]=a.b.El(c[k]):d[k].L(c[k])};b.nz=function(a,c,e,k){var d=0;for(k+=0;d<k;e++,d++)null==a[d]&&(a[d]=[0,0]),a[d][0]=c[e].x,a[d][1]=c[e].y};b.mz=function(d,c,e,k){var b=c,l=0;for(c=k+c;b<c;l++,b++)null==d[b]?d[b]=a.b.pa(e[l][0],e[l][1]):d[b].ka(e[l][0],e[l][1])};b.iR=
function(d,c,e){if(d!=c)for(var k=0;k<e;k++)null==d[k]?d[k]=new a.Wa(c[k]):c[k].copyTo(d[k])};b.DP=function(a,c,e,k){var d=k.ca;k=k.ha;for(var b=0;b<c;b+=e){var l=a.read(b);l<d?a.write(b,d):l>k&&a.write(b,k)}};b.tP=function(a,c,e,k){var d=k.ca;k=k.ha;for(var b=0;b<c;b+=e){var l=a.read(b);l<d?a.write(b,d):l>k&&a.write(b,k)}};b.TK=function(d,c,e){if(d.hasAttribute(e)){var k=d.G();if(a.T.gh(k)){var l=a.na.si(e),k=a.na.Xa(e),f=d.D();if(1==l){d=d.Pa(e);b.DP(d,f*k,k,c);return}if(2==l){d=d.Pa(e);b.tP(d,
f*k,k,c);return}throw a.f.X("snap_coordinate not implemented");}if(197==k)f=d.xf(e,0),k=!1,f.ca<c.ca&&(k=!0,f.ca=c.ca),f.ha>c.ha&&(k=!0,f.ha=c.ha),k&&d.setInterval(e,0,f);else if(33==k)f=d.Yc(e,0),k=!1,f<c.ca&&(k=!0,f=c.ca),f>c.ha&&(k=!0,f=c.ha),k&&d.setAttribute(e,0,f);else if(a.T.Oc(k))f=d.ct(e,0),k=!1,f<c.ca&&(k=!0,f=c.ca),f>c.ha&&(k=!0,f=c.ha),k&&d.Sx(e,0,f),f=d.Ns(e,0),f<c.ca&&(k=!0,f=c.ca),f>c.ha&&(k=!0,f=c.ha),k&&d.Kx(e,0,f);else throw a.f.X("snap_coordinate not implemented");}};b.jo=function(a,
c,e,k,b){var d=0;null!=c&&(d=c.re(a),b&&!k||null==c||(d+=1.01*c.eA(a)));k&&(e*=4,d*=1.01);return Math.max(d,e)};b.T_=function(d,c,e,k){c=a.h.BO(c.Be(),c.nf(),e.Be(),e.nf());return b.jo(0,d,c,k,!1)};b.Yy=function(a,c,e){c=c.no();return b.jo(0,a,c,e,!1)};b.U_=function(a,c,e){c=c.no();return b.jo(1,a,c,e,!1)};b.fQ=function(d,c){var e=new a.h;c.s(e);return b.Yy(d,e,!0)};b.Zy=function(a,c){c=c.no();return b.jo(0,a,c,!1,!0)};b.V_=function(a,c,e){c=c.no();return b.jo(1,a,c,e,!0)};b.uv=function(d,c){var e=
new a.h;c.s(e);return b.Zy(d,e)};b.MH=function(d,c,e,k){k*=k;var b=new a.b;b.zc(d,c);d=new a.b;d.zc(e,c);c=b.pk();e=d.pk();if(c<=k&&e<=k)return!0;var l=a.Ub.Xx(b.Ui(d));return l<=k*c||l<=k*e?0<=b.oi(d):!1};b.UK=function(d,c,e,k){for(var b=0;b<c;b++){var l=d[b].y,f=a.J.nk(l,e,k);f!=l&&(d[b].y=f)}};return b}();a.ma=b})(y||(y={}));(function(a){var b=function(){function a(a){this.ab=a}a.prototype.compare=function(a,c,d){a=a.ja(d);d=this.ab.Ok(c);var k=this.ab.Ok(a);return d<k?-1:d==k?e.Uq(c)&&e.sw(a)?
-1:e.Uq(a)&&e.sw(c)?1:0:1};return a}(),l=function(){function a(a){this.ab=a}a.prototype.gs=function(a,c,e){this.ab.zY(e,a,c)};a.prototype.Qq=function(a){return this.ab.Ok(a)};return a}(),d;(function(a){a[a.initialize=0]="initialize";a[a.pIn=1]="pIn";a[a.pL=2]="pL";a[a.pR=3]="pR";a[a.pT=4]="pT";a[a.right=5]="right";a[a.left=6]="left";a[a.all=7]="all"})(d||(d={}));var c=function(){function c(){this.ab=null;this.pj=new a.Ac;this.oh=new a.ia(0);this.Og=[0,0]}c.prototype.Ni=function(a,c){this.pj.ca=a.ca-
c;this.pj.ha=a.ha+c;this.oh.resize(0);this.Ee=0;this.Og[0]=0};c.prototype.cC=function(c,e,d){if(c>e)throw a.f.F();this.pj.ca=c-d;this.pj.ha=e+d;this.oh.resize(0);this.Ee=0;this.Og[0]=0};c.prototype.Xn=function(a,c){this.pj.ca=a-c;this.pj.ha=a+c;this.oh.resize(0);this.Ee=0;this.Og[0]=0};c.prototype.next=function(){if(!this.ab.$q)throw a.f.La();if(0>this.Ee)return-1;for(var c=!0;c;)switch(this.Og[this.Ee]){case 1:c=this.oW();break;case 2:c=this.pW();break;case 3:c=this.qW();break;case 4:c=this.rW();
break;case 5:c=this.BX();break;case 6:c=this.kV();break;case 7:c=this.uP();break;case 0:c=this.pA();break;default:throw a.f.ya();}return-1!=this.jh?this.Gq()>>1:-1};c.BZ=function(a,e,d){var k=new c;k.ab=a;k.oh.yb(20);k.Ni(e,d);return k};c.CZ=function(a,e,d){var k=new c;k.ab=a;k.oh.yb(20);k.Xn(e,d);return k};c.pa=function(a){var e=new c;e.ab=a;e.oh.yb(20);e.Ee=-1;return e};c.prototype.pA=function(){this.jh=this.GI=this.lj=this.Sc=-1;if(null!=this.ab.Je&&0<this.ab.Je.size)return this.Og[0]=1,this.lj=
this.ab.Mf,!0;this.Ee=-1;return!1};c.prototype.oW=function(){this.Sc=this.lj;if(-1==this.Sc)return this.jh=this.Ee=-1,!1;var a=this.ab.Hq(this.Sc);if(this.pj.ha<a)return a=this.ab.Nk(this.Sc),this.lj=this.ab.Qj(this.Sc),-1!=a&&(this.Ei=this.ab.Ol(a),this.Og[++this.Ee]=6),!0;if(a<this.pj.ca)return a=this.ab.Nk(this.Sc),this.lj=this.ab.Mk(this.Sc),-1!=a&&(this.Ei=this.ab.Ys(a),this.Og[++this.Ee]=5),!0;this.Og[this.Ee]=2;this.GI=this.Sc;a=this.ab.Nk(this.Sc);this.lj=this.ab.Qj(this.Sc);-1!=a&&(this.Ei=
this.ab.Ol(a),this.Og[++this.Ee]=7);return!0};c.prototype.pW=function(){this.Sc=this.lj;if(-1==this.Sc)return this.Og[this.Ee]=3,this.lj=this.ab.Mk(this.GI),!0;if(this.ab.Hq(this.Sc)<this.pj.ca){var a=this.ab.Nk(this.Sc);this.lj=this.ab.Mk(this.Sc);-1!=a&&(this.Ei=this.ab.Ys(a),this.Og[++this.Ee]=5);return!0}a=this.ab.Nk(this.Sc);this.lj=this.ab.Qj(this.Sc);-1!=a&&(this.Ei=this.ab.Ol(a),this.Og[++this.Ee]=7);a=this.ab.Mk(this.Sc);-1!=a&&this.oh.add(a);return!0};c.prototype.qW=function(){this.Sc=this.lj;
if(-1==this.Sc)return this.Og[this.Ee]=4,!0;if(this.pj.ha<this.ab.Hq(this.Sc)){var a=this.ab.Nk(this.Sc);this.lj=this.ab.Qj(this.Sc);-1!=a&&(this.Ei=this.ab.Ol(a),this.Og[++this.Ee]=6);return!0}a=this.ab.Nk(this.Sc);this.lj=this.ab.Mk(this.Sc);-1!=a&&(this.Ei=this.ab.Ol(a),this.Og[++this.Ee]=7);a=this.ab.Qj(this.Sc);-1!=a&&this.oh.add(a);return!0};c.prototype.rW=function(){if(0==this.oh.size)return this.jh=this.Ee=-1,!1;this.Sc=this.oh.get(this.oh.size-1);this.oh.resize(this.oh.size-1);var a=this.ab.Nk(this.Sc);
-1!=a&&(this.Ei=this.ab.Ol(a),this.Og[++this.Ee]=7);-1!=this.ab.Qj(this.Sc)&&this.oh.add(this.ab.Qj(this.Sc));-1!=this.ab.Mk(this.Sc)&&this.oh.add(this.ab.Mk(this.Sc));return!0};c.prototype.kV=function(){this.jh=this.Ei;if(-1!=this.jh&&e.Uq(this.Gq())&&this.ab.Ok(this.Gq())<=this.pj.ha)return this.Ei=this.cH(),!1;this.Ee--;return!0};c.prototype.BX=function(){this.jh=this.Ei;if(-1!=this.jh&&e.sw(this.Gq())&&this.ab.Ok(this.Gq())>=this.pj.ca)return this.Ei=this.IT(),!1;this.Ee--;return!0};c.prototype.uP=
function(){this.jh=this.Ei;if(-1!=this.jh&&e.Uq(this.Gq()))return this.Ei=this.cH(),!1;this.Ee--;return!0};c.prototype.cH=function(){return this.ab.pg?this.ab.vg.nb(this.jh):this.ab.sj.nb(this.jh)};c.prototype.IT=function(){return this.ab.pg?this.ab.vg.Ve(this.jh):this.ab.sj.Ve(this.jh)};c.prototype.Gq=function(){return this.ab.pg?this.ab.vg.ja(this.jh):this.ab.sj.getData(this.jh)};return c}();a.VZ=c;var e=function(){function e(a){this.pn=this.zi=this.vg=this.sj=this.yn=this.$j=this.Je=this.ak=null;
this.pg=a;this.$q=this.Dw=!1}e.prototype.bs=function(){this.ql(!0)};e.prototype.ys=function(c,e){if(!this.Dw)throw a.f.La();this.ak.push(new a.Ac(c,e))};e.prototype.yq=function(){if(!this.Dw)throw a.f.X("invalid call");this.Dw=!1;this.$q=!0;this.pg||(this.pU(),this.Lw=this.ak.length)};e.prototype.eh=function(c){if(!this.pg||!this.$q)throw a.f.F("invalid call");if(-1==this.Mf){var e=this.ak.length;if(this.QA){var d=new a.ia(0);d.yb(2*e);this.UJ(d);this.zi.yb(2*e);this.zi.resize(0);this.TJ(d);this.yn.resize(e,
-1);this.yn.Zh(-1,0,e);this.QA=!1}else this.yn.Zh(-1,0,e);this.Mf=this.Gv()}e=this.CH(c<<1,this.Mf);d=this.vg.addElement((c<<1)+1,this.gA(e));this.LK(e,d);this.yn.set(c,e);this.Lw++};e.prototype.remove=function(c){if(!this.pg||!this.$q)throw a.f.X("invalid call");var e=this.yn.get(c);if(-1==e)throw a.f.F("the interval does not exist in the interval tree");this.yn.set(c,-1);this.Lw--;var d=this.gA(e),k;k=this.vg.RT(d);this.vg.Ld(this.oT(e),d);this.vg.Ld(this.LT(e),d);c=this.vg.size(d);0==c&&(this.vg.HR(d),
this.OK(k,-1));this.$j.kd(e);for(var d=this.eH(k),b=this.Qj(k),l=this.Mk(k),e=0;!(0<c||k==this.Mf||-1!=b&&-1!=l);)k==this.Qj(d)?-1!=b?(this.rl(d,b),this.lk(b,d),this.rl(k,-1)):-1!=l?(this.rl(d,l),this.lk(l,d),this.tl(k,-1)):this.rl(d,-1):-1!=b?(this.tl(d,b),this.lk(b,d),this.rl(k,-1)):-1!=l?(this.tl(d,l),this.lk(l,d),this.tl(k,-1)):this.tl(d,-1),this.lk(k,-1),e++,k=d,d=this.Nk(k),c=-1!=d?this.vg.size(d):0,b=this.Qj(k),l=this.Mk(k),d=this.eH(k)};e.prototype.reset=function(){if(!this.pg||!this.$q)throw a.f.F("invalid call");
this.ql(!1)};e.prototype.size=function(){return this.Lw};e.prototype.mf=function(){return c.pa(this)};e.prototype.UJ=function(a){for(var c=this.ak.length,e=0;e<2*c;e++)a.add(e);this.AY(a,2*c)};e.prototype.TJ=function(a){for(var c=NaN,e=0;e<a.size;e++){var d=a.get(e),k=this.Ok(d);k!=c&&(this.zi.add(d),c=k)}};e.prototype.pU=function(){var c=this.ak.length,e=new a.ia(0);e.yb(2*c);this.UJ(e);this.zi.yb(2*c);this.zi.resize(0);this.TJ(e);this.$j.Qe(c);this.sj.Wn(2*c);var d=a.Uc.wh(c);d.Zh(-1,0,c);this.Mf=
this.Gv();for(c=0;c<e.size;c++){var k=e.get(c),b=d.get(k>>1);-1!=b?this.LK(b,this.sj.addElement(this.gA(b),k)):(b=this.CH(k,this.Mf),d.set(k>>1,b))}};e.prototype.CH=function(c,e){var d=e,k=e,b,l=-1,r=0,f=this.zi.size-1,v=0,g=c>>1,h=NaN,m=NaN;b=!0;for(var n=this.vT(g),g=this.sT(g);b;){r<f?(v=r+a.J.truncate((f-r)/2),-1==this.Oz(d)&&this.uK(d,this.zi.get(v),this.zi.get(v+1))):-1==this.Oz(d)&&this.uK(d,this.zi.get(r),this.zi.get(r));var p=this.Hq(d);if(g<p)-1!=e&&(e==d?(k=d,h=p,e=this.Qj(d),-1!=e?m=this.Hq(e):
m=NaN):m>p&&(p<h?this.rl(k,d):this.tl(k,d),this.tl(d,e),this.pg&&(this.lk(d,k),this.lk(e,d)),k=d,h=p,e=-1,m=NaN)),f=this.qT(d),-1==f&&(f=this.Gv(),this.XX(d,f)),d=f,f=v;else if(n>p)-1!=e&&(e==d?(k=d,h=p,e=this.Mk(d),-1!=e?m=this.Hq(e):m=NaN):m<p&&(p<h?this.rl(k,d):this.tl(k,d),this.rl(d,e),this.pg&&(this.lk(d,k),this.lk(e,d)),k=d,h=p,e=-1,m=NaN)),r=this.MT(d),-1==r&&(r=this.Gv(),this.hY(d,r)),d=r,r=v+1;else{b=this.Nk(d);-1==b&&(b=this.vR(d),this.OK(d,b));var z=this.cP(b,c),l=this.tR();this.kY(l,b);
this.WX(l,z);d!=e&&(p<h?this.rl(k,d):this.tl(k,d),this.pg&&this.lk(d,k),-1!=e&&(m<p?this.rl(d,e):this.tl(d,e),this.pg&&this.lk(e,d)));b=!1}}return l};e.prototype.Gv=function(){return this.Je.Pe()};e.prototype.vR=function(a){return this.pg?this.vg.Js(a):this.sj.mi(a)};e.prototype.tR=function(){return this.$j.Pe()};e.prototype.ql=function(c){c?(this.Dw=this.QA=!0,this.$q=!1,null==this.zi?this.zi=a.Uc.wh(0):this.zi.resize(0),null==this.ak?this.ak=[]:this.ak.length=0):this.QA=!1;this.pg?null==this.yn?
(this.yn=a.Uc.wh(0),this.vg=new a.tk,this.vg.Ep(new b(this))):this.vg.clear():null==this.sj?this.sj=new a.Xp:this.sj.clear();null==this.Je?(this.$j=new a.ad(3),this.Je=new a.ad(this.pg?8:7)):(this.$j.Vi(!1),this.Je.Vi(!1));this.Mf=-1;this.Lw=0};e.prototype.uK=function(a,c,e){this.RX(a,c);this.SX(a,e)};e.prototype.Hq=function(a){var c=this.Oz(a);if(-1==c)return NaN;c=this.Ok(c);a=this.Ok(this.XS(a));return c==a?c:.5*(c+a)};e.prototype.RX=function(a,c){this.Je.P(a,0,c)};e.prototype.SX=function(a,c){this.Je.P(a,
1,c)};e.prototype.XX=function(a,c){this.Je.P(a,3,c)};e.prototype.hY=function(a,c){this.Je.P(a,4,c)};e.prototype.OK=function(a,c){this.Je.P(a,2,c)};e.prototype.rl=function(a,c){this.Je.P(a,5,c)};e.prototype.tl=function(a,c){this.Je.P(a,6,c)};e.prototype.lk=function(a,c){this.Je.P(a,7,c)};e.prototype.kY=function(a,c){this.$j.P(a,0,c)};e.prototype.cP=function(a,c){return this.pg?this.vg.addElement(c,a):this.sj.addElement(a,c)};e.prototype.WX=function(a,c){this.$j.P(a,1,c)};e.prototype.LK=function(a,
c){this.$j.P(a,2,c)};e.prototype.Ol=function(a){return this.pg?this.vg.xc(a):this.sj.xc(a)};e.prototype.Ys=function(a){return this.pg?this.vg.Fc(a):this.sj.Fc(a)};e.Uq=function(a){return 0==(a&1)};e.sw=function(a){return 1==(a&1)};e.prototype.Oz=function(a){return this.Je.S(a,0)};e.prototype.XS=function(a){return this.Je.S(a,1)};e.prototype.Nk=function(a){return this.Je.S(a,2)};e.prototype.qT=function(a){return this.Je.S(a,3)};e.prototype.MT=function(a){return this.Je.S(a,4)};e.prototype.Qj=function(a){return this.Je.S(a,
5)};e.prototype.Mk=function(a){return this.Je.S(a,6)};e.prototype.eH=function(a){return this.Je.S(a,7)};e.prototype.gA=function(a){return this.$j.S(a,0)};e.prototype.oT=function(a){return this.$j.S(a,1)};e.prototype.LT=function(a){return this.$j.S(a,2)};e.prototype.vT=function(a){return this.ak[a].ca};e.prototype.sT=function(a){return this.ak[a].ha};e.prototype.AY=function(c,e){null==this.pn&&(this.pn=new a.Gu);var d=new l(this);this.pn.sort(c,0,e,d)};e.prototype.zY=function(a,c,d){var k=this;a.Gd(c,
d,function(a,c){var d=k.Ok(a),b=k.Ok(c);return d<b||d==b&&e.Uq(a)&&e.sw(c)?-1:1})};e.prototype.Ok=function(a){var c=this.ak[a>>1];return e.Uq(a)?c.ca:c.ha};return e}();a.ms=e})(y||(y={}));(function(a){var b=function(){function b(d){if(null==d)throw a.f.X("Invalid arguement");this.Ke=d;var c=d.dT();c.aU()?d.ie.TH()?this.Zo=a.di.PannableFold:this.Zo=a.di.Clip:this.Zo=a.di.DontClip;c.bU()?d.He.TH()?this.En=a.di.PannableFold:this.En=a.di.Clip:this.En=a.di.DontClip;this.qn=c.xv;this.xI=c.sz;d=this.Ke.DI;
this.lI=d.dt(2147483648);this.Fw=d.dt(1073741824)}b.Xg=function(a,c,e){return c.wr.Xg(a,e)};b.fs=function(a,c,e,k){return a.wr.fs(c,e,k)};b.Cu=function(a,c,e,k){e=0>e?c.length:e;a=a.wr.fs(c,e,k);if(a==e)return a;for(var d=c=0;d<e;d++){var b=k[d];b.isNaN()||(c<d&&k[c].L(b),c++)}for(;c<e;c++)k[c].$c();return a};b.KC=function(a,c,e,k){return a.wr.KC(c,e,k)};b.hL=function(a,c,e,k){e=0>e?c.length:e;a=a.wr.KC(c,e,k);if(a==e)return a;for(var d=c=0;d<e;d++){var b=k[d];isNaN(b.x)||(c<d&&k[c].I(b.x,b.y,b.z),
c++)}for(;c<e;c++)k[c].cv();return a};b.transform=function(d,c,e,k,l){if(d.Ho())return a.ma.iR(k,c,e),e;for(var r=[],f=0,g=0;g<e;){for(var h=Math.min(r.length,e-g),m=g,n=0;m<h;m++,n++)null==r[n]?r[n]=c[m].w():c[m].w(r[n]);var p;p=l?b.Cu(d,r,h,r):b.fs(d,r,h,r);for(n=m=0;m<p;m++,n++)null==k[g]&&(k[g]=new a.Wa(c[g])),k[g].rb(r[n]);g+=h;f+=p}return f};b.iL=function(d,c,e){if(0==e)return[];var k=new a.Ed;k.mP(c,2*e);c=this.Xg(k,d,null);d=c.Pa(0);c=2*c.D();e=a.J.gf(c);d.pl(0,c,e,0,!0);return e};b.prototype.fs=
function(d,c,e){if(this.Ke.Ho())return d!=e&&a.ma.Ev(e,d,c),c;var k=this.Ke.ie,b=this.Ke.He,l=k.Fb(),f=b.Fb();if(0==l&&l===f){var g=k.Yi(),b=b.Yi(),b=g/b,g=new a.Hd;g.Op(b,b);g.YY(d,c,e);return c}g=a.J.pv(Math.min(c,64));if(3==l){var h;h=k.ij;k=h.Fk();l=k.Fb();e!=d&&a.ma.Ev(e,d,c);a.Ib.Dl(h,e,c,!0);h.Cu(a.Pm.forward,e,c);a.Ib.Cl(h,e,c,!0)}if(3==l||3===f)throw a.f.X("image: transform_in_place_");if(2==l)this.Zo==a.di.Clip?(e!=d&&a.ma.Ev(e,d,c),d=k.Lk(),a.Ib.IU(d,k,e,c)):(e!=d&&a.ma.Ev(e,d,c),k.Jc()&&
(l=k.re(0),h=k.qe(),a.Ib.xY(e,c,h,l),a.Ib.AG(e,c,k,0))),a.Ib.vN(k,e,c,g);else for(l=k.re(0),h=k.qe(),k=0;k<c;k++)a.Ib.yY(d[k],h,l,e[k]);a.Ib.tN(this.Ke,e,c,g);d=0;(f=2==f)?d=b.pi():isNaN(this.qn)||(d=this.qn);f&&this.En!=a.di.Clip||a.Ib.AG(e,c,b.kc(),d);f&&(a.Ib.KH(e,c,b,this.En),a.Ib.uN(b,e,c,g));d=c;for(k=0;k<c;++k)e[k].isNaN()&&d--;return d};b.prototype.KC=function(d,c,e){c=0>c?d.length:c;if(this.Ke.Ho()){for(var k=0;k<c;++k)null==e[k]&&(e[k]=new a.qd),e[k].I(d[k].x,d[k].y,d[k].z);return c}var b=
this.Ke.ie,k=this.Ke.He,l=b.Fb(),f=k.Fb();if(0==l&&l==f)return b=b.Yi(),k=k.Yi(),k=b/k,b=new a.dO,b.Op(k,k,k),b.transform(d,c,e),c;l=new a.Ed;l.Ud(1);l.Ud(3);l.lP(d);d=l.Pa(3);k=0;for(b=c;k<b;k++)d.write(k,k);l=this.Xg(l,null);for(k=0;k<c;++k)null==e[k]?e[k]=a.qd.pa(NaN,NaN,NaN):e[k].cv();if(null==l)return 0;d=l.Pa(3);var f=l.Pa(0),g=l.Pa(1);l.eX(e,c);k=0;for(b=l.D();k<b;k++)c=d.read(k),f.nX(2*k,e[c]),e[c].z=g.read(k);return l.D()};b.prototype.Xg=function(d,c){if(this.Ke.Ho()||d.u())return d;if(33==
d.G())return this.OJ(d);var e=this.Ke.ie,k=this.Ke.He,b=e.Fb(),l=k.Fb();if(0==b&&b==l)return e=e.Yi(),k=k.Yi(),e/=k,k=new a.Hd,k.Op(e,e),e=a.T.ne(d),e.Xc(k),e;switch(d.G()){case 1607:case 1736:k=this.MJ(d,c);break;case 550:k=this.VW(d,c);break;case 197:k=this.UW(d,c);break;default:throw a.f.X("");}return k};b.prototype.OJ=function(d){var c=d.w(),e=[];e[0]=c;this.fs(e,1,e);d=new a.Wa(d);d.rb(e[0]);return d};b.prototype.MJ=function(d,c){if(d.jn())throw a.f.X("curves not supported");var e=d.G();if(1736==
e)return this.WW(d,c);if(1607==e)return this.XW(d,c);throw a.f.X("projectMultiPath");};b.prototype.WW=function(d,c){var e=this.Ke.ie,k=this.Ke.He,l=e.Fb(),f=k.Fb(),g=a.J.pv(Math.min(d.D(),64));d=a.Ia.ne(d);if(3==l){var h=e.ij,e=h.Fk(),l=e.Fb();d=h.Dl(d,!0);this.qq(h,a.Pm.forward,d);d=h.Cl(d,!0)}h=null;3==f&&(h=k.ij,k=h.Fk(),f=k.Fb());var m=2==l,n=2==f,p=n?k.kc():k,z=!n&&!this.Fw,f=!1,t=d;if(m){if(t=a.Ib.LJ(t,e,this.Zo,c),t.u())return t}else{d=new a.h;t.ac(d);l=e.qe();if(d.A<l.A||d.B>l.B){var u=a.h.pa(d.o-
1,l.A,d.v+1,l.B),t=a.uh.rq(t,u,e,NaN,0,c);if(t.u())return t}d.N()>2*l.N()&&(t=a.Ib.Aq(t,-2*l.N(),2*l.N(),e,!0,0,!0,c))}d=this.xI;(l=!isNaN(d))&&(t=a.Km.local().V(t,d,c));var u=n?k.Sj():null,q=NaN;m&&(q=e.pi());var y=null!=k.Vs();if(this.lI)m&&(a.Ib.ps(e,q,t,g),l&&(m=e.Ch(),q=e.kc().Ch(),d*=q/m)),a.Ib.os(this.Ke,t,z,g),l&&(m=e.kc().Ch(),q=k.kc().Ch(),d*=q/m),e=t;else{var x=new a.Ua(t.description);x.TE(t);m&&(a.Ib.ps(e,q,x,g),l&&(m=e.Ch(),q=e.kc().Ch(),d*=q/m));a.Ib.os(this.Ke,x,z,g);l&&(m=e.kc().cn(),
q=k.kc().cn(),d*=q/m);z=NaN;n?(u=k.Sj(),z=k.pi()):isNaN(this.qn)||(z=this.qn);m=b.se(e)|b.se(k);q=10*p.re(0);this.Fw&&(m=3,q=0);e=a.Ib.JS(t,e,x,p,z,c,m,q)}y&&(e=a.Ib.iF(e,k,c));n&&(f||(n=p.qe().N(),e.xf(0,0).N()>=n-p.re(0)&&(p=u.getNorthPoleLocation(),n=u.getSouthPoleLocation(),t=u.getNorthPoleGeometry(),u=u.getSouthPoleGeometry(),z=0,t==a.Bg.PE_POLE_POINT&&p!=a.Bg.PE_POLE_OUTSIDE_BOUNDARY&&(z=1),u==a.Bg.PE_POLE_POINT&&n!=a.Bg.PE_POLE_OUTSIDE_BOUNDARY&&(z|=2),0!==z&&(f=!0))),e=a.Ib.sA(e,k,this.En,
c),l&&(e=a.Km.local().V(e,d,c)),a.Ib.uy(k,e,g));if(e.u())return e;f&&(e=a.Lm.local().V(e,k,!1,c));null!=h&&(e=h.Cl(e,!1),this.qq(h,a.Pm.reverse,e),e=h.Dl(e,!1));return e};b.se=function(d){if(2!=d.Fb())return 0;var c=0,e=d.Sj();d=e.getNorthPoleLocation();var k=e.getSouthPoleLocation(),b=e.getNorthPoleGeometry(),e=e.getSouthPoleGeometry();b==a.Bg.PE_POLE_POINT&&d!=a.Bg.PE_POLE_OUTSIDE_BOUNDARY&&(c=1);e==a.Bg.PE_POLE_POINT&&k!=a.Bg.PE_POLE_OUTSIDE_BOUNDARY&&(c|=2);return c};b.prototype.XW=function(d,
c){var e=this.Ke.ie,k=this.Ke.He,l=e.Fb(),f=k.Fb(),g=a.J.pv(Math.min(d.D(),64));d=a.Ua.ne(d);if(3==l){var h=e.ij,e=h.Fk(),l=e.Fb();d=h.Dl(d,!0);this.qq(h,a.Pm.forward,d);d=h.Cl(d,!0)}h=null;3==f&&(h=k.ij,k=h.Fk(),f=k.Fb());var m=2==l,l=(f=2==f)?k.kc():k,n=!f&&!this.Fw;if(m){if(d=a.Ib.LJ(d,e,this.Zo,c),d.u())return d}else{var p=new a.h;d.ac(p);var z=e.qe();if(p.A<z.A||p.B>z.B)if(p=a.h.pa(p.o-1,z.A,p.v+1,z.B),d=a.uh.rq(d,p,e,NaN,0,c),d.u())return d}var t=NaN;m&&(t=e.pi());var p=null!=k.Vs(),z=this.xI,
u=!isNaN(z);u&&(d=a.Km.local().V(d,z,c));if(this.lI)m&&a.Ib.ps(e,t,d,g),u&&(m=e.Ch(),t=e.kc().Ch(),z*=t/m),a.Ib.os(this.Ke,d,n,g),u&&(m=e.kc().Ch(),t=k.kc().Ch(),z*=t/m),e=d;else{var q=new a.Ua(d.description);q.TE(d);m&&(a.Ib.ps(e,t,q,g),u&&(m=e.Ch(),t=e.kc().Ch(),z*=t/m));a.Ib.os(this.Ke,q,n,g);u&&(m=e.kc().Ch(),t=k.kc().Ch(),z*=t/m);n=NaN;f?n=k.pi():isNaN(this.qn)||(n=this.qn);m=b.se(e)|b.se(k);t=10*l.re(0);this.Fw&&(m=3,t=0);e=a.Ib.KS(d,e,q,l,n,c,m,t)}p&&(e=a.Ib.iF(e,k,c));f&&(e=a.Ib.sA(e,k,this.En,
c),u&&(e=a.Km.local().V(e,z,c)),a.Ib.uy(k,e,g));if(e.u())return e;null!=h&&(e=h.Cl(e,!1),this.qq(h,a.Pm.reverse,e),e=h.Dl(e,!1));return e};b.prototype.UW=function(d,c){var e=(d.fa()+d.N())/400;if(0!=e){var k=a.Km.local().V(d,e,c),k=this.MJ(k,c),e=d.Ja();k.Rn(e)}else e=new a.Wa(d.Bq()),k=this.OJ(e),e=d.Ja(),k.u()?e.Oa():(d.copyTo(e),k=k.w(),e.I(k.x,k.y,k.x,k.y));return e};b.prototype.VW=function(d,c){d=a.T.ne(d);var e=this.Ke.ie,k=this.Ke.He,b=e.Fb(),l=k.Fb(),f=a.J.pv(Math.min(d.D(),64));if(3==b){var g=
e.ij,e=g.Fk(),b=e.Fb();d=g.Cl(d,!0);this.qq(g,a.Pm.forward,d);d=g.Dl(d,!0)}if(2==b){this.Zo==a.di.Clip?d=a.sk.local().V(d,e.Lk(),e,c):e.Jc()&&(b=new a.h,d.ac(b),e.qe().contains(b)||(this.Zo==a.di.PannableFold&&(d=a.Ib.Mj(d,e)),a.Ib.wu(d,e.qe(),e.re(0),!0),d=a.Ib.Ym(d,e,0,!0,0,c)));if(d.u())return d;a.Ib.ps(e,0,d,f)}else a.Ib.wu(d,e.qe(),e.re(0),!0);a.Ib.os(this.Ke,d,!1,f);e=0;b=!1;g=null;3==l&&(b=!0,g=k.ij,k=g.Fk(),l=k.Fb());(l=2==l)?e=k.pi():isNaN(this.qn)||(e=this.qn);l&&this.En!=a.di.Clip||(d=
a.Ib.Ym(d,k.kc(),e,!1,0,c));if(l&&(d=a.Ib.sA(d,k,this.En,c),a.Ib.uy(k,d,f),d.u()))return d;b&&(d=g.Cl(d,!0),this.qq(g,a.Pm.reverse,d),d=g.Dl(d,!0));return d};b.prototype.qq=function(d,c,e){var k=e.D();if(0!=k){for(var b=e.Pa(0),l=a.J.gf(200,0),f=[],g=0;g<k;){var h=Math.min(100,k-g);b.pl(2*g,2*h,l,2,!0);for(var m=0;m<h;++m)f[m]=a.b.pa(l[2*g],l[2*g+1]);d.Cu(c,f,h);g+=h}e.Dc(1993)}};b.qk=function(d,c,e){if(null==d||null==c||!c.Jc())throw a.f.X("Invalid Arguement");if(d.u())return d;var k;k=d.G();197==
k?(k=new a.Ia(d.description),k.jd(d,!1)):a.T.Oc(k)?(k=new a.Ua(d.description),k.dc(d,!0)):k=d;k=a.Ib.Mj(k,c);return k.u()?k:a.Ib.Ym(k,c,0,k!=d,0,e)};b.Nj=function(d,c,e,k){if(null==d||null==c||!c.Jc())throw a.f.X("Invalid Arguement");if(d.u())return d;var l=d.G();if(a.T.Ic(l)){d=a.Ib.Mj(d,c);l=new a.h;d.s(l);for(var f=a.ma.Yy(c,l,!1),g=c.Bh(),h=Math.floor((l.o-g.o)/g.N())*g.N()+g.o;h<l.v;)h>l.o+f&&h<l.v-f&&(d=a.Ib.oU(d,c,e,h)),h+=g.N()}else{if(197==l)return l=new a.Ia(d.description),l.jd(d,!1),b.Nj(l,
c,e,k);if(a.T.Oc(l))return l=new a.Ua(d.description),l.dc(d,!0),b.Nj(l,c,e,k)}return b.qk(d,c,k)};b.Yp=function(d,c,e,k){var l=c.Fb(),f=new a.dE;c.hX(f);if(0==l)return b.Dj(d,f,c,e);k==a.Up.foldAndClipWithHorizon&&c.Jc()&&(d=b.qk(d,c,e));d=b.Dj(d,f,c,e);if(k==a.Up.clipToDomainOnly||d.u())return d;if(1==l)return k==a.Up.clipWithHorizon?(k=new a.h,d.ac(k),l=c.qe(),f=.01*l.N(),k.A=l.A,k.B=l.B,k.o-=f,k.v+=f,a.uh.rq(d,k,c,NaN,0,e)):d;if(2==l)return l=c.Lk(),k==a.Up.clipWithHorizon||k==a.Up.foldAndClipWithHorizon?
(c=a.sk.local().V(d,l,c,e),c==l?a.T.ne(c):c):d;if(3==l)return d;throw a.f.X("missing implementation");};b.Dj=function(d,c,e,k){var b=c.VT(),l=d.hasAttribute(1),f=d.hasAttribute(2),g=new a.Ac;g.Oa();var h=new a.Ac;h.Oa();l&&(g=c.WT());f&&(h=c.rT());c=a.uh.rq(d,b,e,NaN,0,k);l&&(l=c.xf(1,0),g.contains(l)||(d==c&&(c=a.T.ne(c)),a.ma.TK(c,g,1)));f&&(l=c.xf(2,0),h.contains(l)||(d==c&&(c=a.T.ne(c)),a.ma.TK(c,h,2)));return c};return b}();a.ko=b})(y||(y={}));(function(a){var b=function(b){function d(c,e,d,
l){b.call(this);void 0===c?this.description=a.ye.Ig():void 0===d?this.description=c:(this.description=a.ye.Ig(),this.vC(c,e),this.vm(d,l))}K(d,b);d.prototype.G=function(){return 322};d.prototype.Rb=function(){var a=this.ua-this.sa,e=this.ra-this.oa;return Math.sqrt(a*a+e*e)};d.prototype.fh=function(a){var c=this.ua-this.sa,d=this.ra-this.oa;return Math.sqrt(c*c+d*d)<=a};d.prototype.Go=function(){return!1};d.prototype.Eg=function(){var c=new a.b;c.zc(this.Cc(),this.ec());return c};d.eR=function(a,
e){return new d(a.x,a.y,e.x,e.y)};d.prototype.Rn=function(c){c.Oa();c.Fg(this.description);var e=new a.h;this.s(e);c.Gp(e);for(var e=1,d=this.description.Ea;e<d;e++)for(var b=this.description.zd(e),l=a.na.Xa(b);e<l;e++){var f=this.xf(b,0);c.setInterval(b,0,f)}};d.prototype.s=function(a){a.I(this.ua,this.ra,this.sa,this.oa);a.normalize()};d.prototype.Cp=function(a){a.Oa();a.Nb(this.ua,this.ra,this.ae(0,1,0));a.Nb(this.sa,this.oa,this.ae(1,1,0))};d.prototype.Xc=function(c){if(c instanceof a.Hd){this.Bc();
var e=new a.b;e.x=this.ua;e.y=this.ra;c.$h(e,e);this.ua=e.x;this.ra=e.y;e.x=this.sa;e.y=this.oa;c.$h(e,e);this.sa=e.x;this.oa=e.y}else this.Bc(),e=new a.qd,e.x=this.ua,e.y=this.ra,e.z=this.ae(0,1,0),e=c.Rp(e),this.ua=e.x,this.ra=e.y,this.oo(0,1,0,e.z),e.x=this.sa,e.y=this.oa,e.z=this.ae(1,1,0),e=c.Rp(e),this.sa=e.x,this.oa=e.y,this.oo(1,1,0,e.z)};d.prototype.Ja=function(){return new d(this.description)};d.prototype.By=function(a,e){return(this.sa-a-(this.ua-a))*(this.oa-e+(this.ra-e))*.5};d.prototype.by=
function(a){return a*this.Rb()};d.prototype.aI=function(a){return a/this.Rb()};d.prototype.OG=function(c){return a.Ub.Wq(this.ua,this.sa,c)};d.prototype.WS=function(c){return a.Ub.Wq(this.ra,this.oa,c)};d.prototype.Hl=function(c,e){var d=new a.Cg;this.yh(c,e,d);return d.get()};d.prototype.yh=function(c,e,d){if(null==d)throw a.f.F();d.Is();d=d.get();d.Fg(this.description);var k=new a.b;this.gc(c,k);d.vC(k.x,k.y);this.gc(e,k);d.vm(k.x,k.y);for(var k=1,b=this.description.Ea;k<b;k++)for(var l=this.description.Id(k),
f=a.na.Xa(l),g=0;g<f;g++){var h=this.Yc(c,l,g);d.Sx(l,g,h);h=this.Yc(e,l,g);d.Kx(l,g,h)}};d.prototype.Yc=function(c,e,d){if(0==e)return 0==d?this.gc(c).x:this.gc(c).y;switch(a.na.Vz(e)){case 0:return.5>c?this.ct(e,d):this.Ns(e,d);case 1:var k=this.ct(e,d);e=this.Ns(e,d);return a.Ub.Wq(k,e,c);case 2:throw a.f.X("not implemented");}throw a.f.ya();};d.prototype.oe=function(a,e){var c=this.sa-this.ua,d=this.oa-this.ra,b=c*c+d*d;if(0==b)return.5;c=((a.x-this.ua)*c+(a.y-this.ra)*d)/b;e||(0>c?c=0:1<c&&(c=
1));return c};d.prototype.Sq=function(a,e,d,b){if(a){a=this.oa-this.ra;if(0==a)return e==this.oa?-1:0;e=(e-this.ra)/a;if(0>e||1<e)return 0;null!=d&&(d[0]=this.OG(e))}else{a=this.sa-this.ua;if(0==a)return e==this.sa?-1:0;e=(e-this.ua)/a;if(0>e||1<e)return 0;null!=d&&(d[0]=this.WS(e))}null!=b&&(b[0]=e);return 1};d.prototype.pf=function(a,e){var c=this.oa-this.ra;if(0==c)return a==this.oa?e:NaN;c=(a-this.ra)/c;a=this.OG(c);1==c&&(a=this.sa);return a};d.prototype.$u=function(a,e,d){return 0<=this.lq(a.x,
a.y,e,d)};d.prototype.Si=function(a,e,d){return 0<=this.lq(a,e,d,!0)};d.prototype.lt=function(a,e){return this.$u(a,e,!1)};d.prototype.AJ=function(){if(this.oa<this.ra||this.oa==this.ra&&this.sa<this.ua){var a=this.ua;this.ua=this.sa;this.sa=a;a=this.ra;this.ra=this.oa;this.oa=a;for(var a=0,e=this.description.Dr-2;a<e;a++){var d=this.la[a];this.la[a]=this.la[a+e];this.la[a+e]=d}}};d.prototype.dv=function(c,e){c=a.b.pa(c,e);c.sub(this.ec());e=new a.b;e.zc(this.Cc(),this.ec());var d=e.Ui(c);c=8.881784197001252E-16*
(Math.abs(e.x*c.y)+Math.abs(e.y*c.x));return d>c?-1:d<-c?1:0};d.prototype.lq=function(c,e,d,b){var k=this.ua,l=this.ra,f=c-k,r=e-l,f=Math.sqrt(f*f+r*r);if(f<=Math.max(d,6.661338147750939E-16*f))return b&&0==f?NaN:0;f=c-this.sa;r=e-this.oa;f=Math.sqrt(f*f+r*r);if(f<=Math.max(d,6.661338147750939E-16*f))return b&&0==f?NaN:1;f=this.sa-this.ua;r=this.oa-this.ra;b=Math.sqrt(f*f+r*r);if(0<b){var g=1/b,f=f*g,r=r*g,h=c-k,m=e-l,n=h*f+m*r,p=1.7763568394002505E-15*(Math.abs(h*f)+Math.abs(m*r)),t=f,f=-r,r=t,p=
Math.max(d,p);if(n<-p||n>b+p)return NaN;if(Math.abs(h*f+m*r)<=Math.max(d,1.7763568394002505E-15*(Math.abs(h*f)+Math.abs(m*r)))&&(f=a.J.nk(n*g,0,1),.5>=f?(r=this.ua+(this.sa-this.ua)*f,b=this.ra+(this.oa-this.ra)*f):(r=this.sa-(this.sa-this.ua)*(1-f),b=this.oa-(this.oa-this.ra)*(1-f)),a.b.wz(r,b,c,e)<=d)){if(.5>f){if(a.b.wz(r,b,k,l)<=d)return 0}else if(a.b.wz(r,b,this.sa,this.oa)<=d)return 1;return f}}return NaN};d.prototype.Eb=function(a){return null==a?!1:a==this?!0:a.constructor!==this.constructor?
!1:this.LO(a)};d.prototype.HE=function(c,e,d){var k=d?this.ua:this.sa;d=d?this.ra:this.oa;var b=new a.b;b.x=c.sa-k;b.y=c.oa-d;return e.oi(b)>6.661338147750939E-16*e.xE(b)?(b.x=c.ua-k,b.y=c.ra-d,e.oi(b)<=6.661338147750939E-16*e.xE(b)):!0};d.prototype.GE=function(c){var e=new a.b;e.x=this.sa-this.ua;e.y=this.oa-this.ra;if(!this.HE(c,e,!1))return!1;e.Kr();return this.HE(c,e,!0)?!0:!1};d.We=function(a,e){var c=a.dv(e.ua,e.ra),d=a.dv(e.sa,e.oa);if(0>c&&0>d||0<c&&0<d)return!1;c=e.dv(a.ua,a.ra);d=e.dv(a.sa,
a.oa);if(0>c&&0>d||0<c&&0<d)return!1;c=a.Rb();d=e.Rb();return c>d?a.GE(e):e.GE(a)};d.se=function(c,e,d){var k=a.b.pa(NaN,NaN),b=c.sa-c.ua,l=c.oa-c.ra,f=e.sa-e.ua,g=e.oa-e.ra,h=f*l-b*g;if(0==h)return k;var m=8.881784197001252E-16*(Math.abs(f*l)+Math.abs(b*g)),n=e.ua-c.ua,p=e.ra-c.ra,t=f*p-n*g,z=t/h,u=Math.abs(h),f=(8.881784197001252E-16*(Math.abs(f*p)+Math.abs(n*g))*u+m*Math.abs(t))/(h*h)+2.220446049250313E-16*Math.abs(z);if(z<-f||z>1+f)return k;g=b*p-n*l;f=g/h;b=(8.881784197001252E-16*(Math.abs(b*
p)+Math.abs(n*l))*u+m*Math.abs(g))/(h*h)+2.220446049250313E-16*Math.abs(f);if(f<-b||f>1+b)return k;z=a.J.nk(z,0,1);b=a.J.nk(f,0,1);l=c.gc(z);h=e.gc(b);m=new a.b;m.zc(l,h);if(m.length()>d&&(m.add(l,h),m.scale(.5),z=c.oe(m,!1),b=e.oe(m,!1),c=c.gc(z),e=e.gc(b),c.sub(e),c.length()>d))return k;k.ka(z,b);return k};d.PO=function(a,e,b,l){var c=0;if(a.ua==e.ua&&a.ra==e.ra||a.ua==e.sa&&a.ra==e.oa)if(c++,!l)return 1;if(a.sa==e.ua&&a.oa==e.ra||a.sa==e.sa&&a.oa==e.oa){c++;if(2==c)return 2;if(!l)return 1}return e.Si(a.ua,
a.ra,b)||e.Si(a.sa,a.oa,b)||a.Si(e.ua,e.ra,b)||a.Si(e.sa,e.oa,b)?1:l&&0!=c?0:0==d.We(a,e)?0:1};d.Fy=function(c,e,b,l,f,g){var k=0,r=c.lq(e.ua,e.ra,g,!1),v=c.lq(e.sa,e.oa,g,!1),h=e.lq(c.ua,c.ra,g,!1),m=e.lq(c.sa,c.oa,g,!1);isNaN(r)||(null!=l&&(l[k]=r),null!=f&&(f[k]=0),null!=b&&(b[k]=a.b.pa(e.ua,e.ra)),k++);isNaN(v)||(null!=l&&(l[k]=v),null!=f&&(f[k]=1),null!=b&&(b[k]=a.b.pa(e.sa,e.oa)),k++);2==k||isNaN(h)||0==r&&0==h||0==v&&1==h||(null!=l&&(l[k]=0),null!=f&&(f[k]=h),null!=b&&(b[k]=a.b.pa(c.ua,c.ra)),
k++);2==k||isNaN(m)||1==r&&0==m||1==v&&1==m||(null!=l&&(l[k]=1),null!=f&&(f[k]=m),null!=b&&(b[k]=a.b.pa(e.sa,e.oa)),k++);if(0<k)return 2==k&&null!=l&&l[0]>l[1]&&(c=l[0],l[0]=l[1],l[1]=c,null!=f&&(l=f[0],f[0]=f[1],f[1]=l),null!=b&&(f=a.b.pa(b[0].x,b[0].y),b[0]=b[1],b[1]=f)),k;k=d.se(c,e,g);if(isNaN(k.x))return 0;null!=b&&(b[0]=c.gc(k.x));null!=l&&(l[0]=k.x);null!=f&&(f[0]=k.y);return 1};d.prototype.pH=function(){return 0};d.prototype.iq=function(){};d.prototype.toString=function(){return"Line: ["+
this.ua.toString()+", "+this.ra.toString()+", "+this.sa.toString()+", "+this.oa.toString()+"]"};return d}(a.bE);a.Hb=b})(y||(y={}));(function(a){var b=function(){function a(){this.am=[];this.Ba=-1}a.prototype.Ha=function(){return this.Ba};a.prototype.next=function(){if(null!=this.am&&0!=this.am.length){this.Ba++;var a=this.am[0];1>=this.am.length?this.am=[]:this.am=this.am.slice(1);return a}return this.am=null};a.prototype.RY=function(a){this.am.push(a)};a.prototype.Re=function(){return!0};return a}();
a.PM=b})(y||(y={}));(function(a){(function(a){a[a.enumFillRuleOddEven=0]="enumFillRuleOddEven";a[a.enumFillRuleWinding=1]="enumFillRuleWinding"})(a.HN||(a.HN={}));var b=function(b){function d(c,e){b.call(this);this.$f=!1;this.tr=null;this.fr=this.gr=0;this.bj=null;this.hh=!1;this.Xd=this.tj=this.cf=this.jb=this.kb=null;this.lr=this.Ta=this.hr=0;if(void 0===e)this.$f=c,this.hh=!1,this.qa=this.fr=this.gr=this.hr=0,this.description=a.ye.Ig();else{if(null==e)throw a.f.F();this.$f=c;this.hh=!1;this.qa=
this.fr=this.gr=this.hr=0;this.description=e}this.bj=null;this.Ta=0}K(d,b);d.prototype.jn=function(){return 0<this.hr};d.prototype.Ey=function(){this.Bc();null==this.tr?this.tr=new a.Wa(this.description):this.tr.Fg(this.description)};d.prototype.Zx=function(c,e){var d=new a.b;d.x=c;d.y=e;this.yu(d)};d.prototype.yu=function(a){this.Ey();this.tr.rb(a);this.hh=!0};d.prototype.Rf=function(c){if(c.u())throw a.f.F();this.om(c.description);this.Ey();c.copyTo(this.tr);this.hh=!0};d.prototype.Ay=function(){var c=
1;this.hh&&(this.Ey(),null==this.kb?(this.kb=a.Uc.wh(2),this.kb.write(0,0),this.jb=a.Uc.vq(2,0)):(this.kb.resize(this.kb.size+1,0),this.jb.resize(this.jb.size+1,0)),this.$f&&this.jb.write(this.jb.size-2,1),c++);var e=this.qa;this.kb.write(this.kb.size-1,this.qa+c);this.zl(e+c);this.jb.write(this.kb.size-1,0);this.hh&&(this.uu(e,this.tr),this.hh=!1)};d.prototype.Wj=function(a,e){this.Ay();this.rb(this.qa-1,a,e)};d.prototype.aj=function(a){this.Ay();this.rb(this.qa-1,a)};d.prototype.lineTo=function(a){this.Ay();
this.uu(this.qa-1,a)};d.prototype.mW=function(c){this.Bc();if(this.$f)throw a.f.ya();var e=this.aa();if(c>e)throw a.f.ya();if(this.Qb(c)){if(null==this.jb)throw a.f.ya();var d=this.qa,b=this.wa(c),l=this.Gc(c);this.zl(this.qa+1);this.tc();for(var f=0,g=this.description.Ea;f<g;f++)if(null!=this.xa[f]){var h=a.na.Xa(this.description.Id(f));this.xa[f].Rk(h*l,this.xa[f],h*b,h,!0,1,h*d)}for(;e>c;e--)d=this.kb.read(e),this.kb.write(e,d+1);this.jb.ez(c,1)}};d.prototype.sq=function(){var a;this.Bu();void 0===
a&&(this.hh=!1,a=this.aa()-1);var e=this.jb.read(a);this.jb.write(a,e|1);null!=this.cf&&(a=this.Gc(a)-1,this.cf.write(a,1),this.tj.write(a,-1))};d.Dj=function(a){return d.se[a]};d.prototype.Qb=function(a){return 0!=(this.jb.read(a)&1)};d.prototype.Eo=function(a){if(this.Qb(a))return!0;var c=this.wa(a);a=this.Gc(a)-1;if(c>a)return!1;c=this.Aa(c);a=this.Aa(a);return c.ub(a)};d.prototype.et=function(a){return 0!=(this.jb.read(a)&2)};d.prototype.dc=function(c,e){this.om(c.description);if(322==c.G()){var d=
new a.Wa;if(e||this.u())c.Dp(d),this.Rf(d);c.Bp(d);this.lineTo(d)}else throw a.f.ya();};d.prototype.oq=function(a){var c=0==this.qa;this.Zx(a.o,a.A);this.Wj(a.o,a.B);this.Wj(a.v,a.B);this.Wj(a.v,a.A);this.sq();this.hh=!1;c&&this.lg(256,!1)};d.prototype.jd=function(c,e){if(!c.u()){for(var d=0==this.qa,b=new a.Wa(this.description),l=0;4>l;l++)c.ig(e?4-l-1:l,b),0==l?this.Rf(b):this.lineTo(b);this.sq();this.hh=!1;d&&!e&&this.lg(256,!1)}};d.prototype.add=function(a,e){for(var c=0;c<a.aa();c++)this.Ti(a,
c,!e)};d.prototype.Ti=function(a,e,d){this.Yf(-1,a,e,d)};d.prototype.Bl=function(a,e){this.qA(a,e)};d.prototype.As=function(c,e,d,b,l){l||0!=this.aa()||(l=!0);0>e&&(e=c.aa()-1);if(e>=c.aa()||0>d||0>b||b>c.dw(e))throw a.f.X("index out of bounds");if(0!=b){var k=c.Qb(e)&&d+b==c.dw(e);if(!k||1!=b){this.hh=!1;this.om(c.description);d=c.wa(e)+d+1;l&&(b++,d--);k&&b--;k=this.qa;this.zl(this.qa+b);this.tc();if(l){if(0==b)return;this.kb.add(this.qa);l=c.jb.read(e);l&=-5;this.$f&&(l|=1);this.jb.write(this.jb.size-
1,l);this.jb.add(0)}else this.kb.write(this.jb.size-1,this.qa);l=0;for(var f=this.description.Ea;l<f;l++){var r=this.description.zd(l),g=a.na.Xa(r),v=c.description.mg(r);0>v||null==c.xa[v]?this.xa[l].Qk(g*k,a.na.pe(r),b*g,g*k):this.xa[l].Rk(g*k,c.xa[v],g*d,b*g,!0,g,g*k)}if(this.jn())throw a.f.ya();if(c.et(e))throw a.f.ya();this.Dc(1993)}}};d.prototype.dK=function(){for(var a=0,e=this.aa();a<e;a++)this.AX(a)};d.prototype.AX=function(c){this.tc();if(c>=this.aa())throw a.f.F();var e=this.wa(c),d=this.Ka(c);
c=this.Qb(c)?1:0;for(var b=0,l=this.description.Ea;b<l;b++)if(null!=this.xa[b]){var f=a.na.Xa(this.description.Id(b));this.xa[b].Zd(f*(e+c),f*(d-c),f)}this.Dc(1993)};d.prototype.Qr=function(c){this.tc();var e=this.aa();0>c&&(c=e-1);if(c>=e)throw a.f.F();for(var d=this.wa(c),b=this.Ka(c),l=0,f=this.description.Ea;l<f;l++)if(null!=this.xa[l]){var g=a.na.Xa(this.description.Id(l));this.xa[l].Ek(g*d,g*b,g*this.qa)}for(d=c+1;d<=e;d++)l=this.kb.read(d),this.kb.write(d-1,l-b);if(null==this.jb)for(d=c+1;d<=
e;d++)c=this.jb.read(d),this.jb.write(d-1,c);this.kb.resize(e);this.jb.resize(e);this.qa-=b;this.lh-=b;this.Dc(1993)};d.prototype.Yf=function(c,e,d,b){if(e==this)throw a.f.F();if(d>=e.aa())throw a.f.F();var k=this.aa();if(c>k)throw a.f.F();0>c&&(c=k);0>d&&(d=e.aa()-1);this.hh=!1;this.om(e.description);e.tc();var l=e.wa(d),f=e.Ka(d),r=this.qa,g=e.Qb(d)&&!b?1:0;this.zl(this.qa+f);this.tc();for(var h=c<k?this.wa(c):r,m=0,n=this.description.Ea;m<n;m++){var p=this.description.Id(m),t=e.description.mg(p),
z=a.na.Xa(p);0<=t&&null!=e.xa[t]?(0!=g&&this.xa[m].Rk(h*z,e.xa[t],z*l,z,!0,z,z*r),this.xa[m].Rk((h+g)*z,e.xa[t],z*(l+g),z*(f-g),b,z,z*(r+g))):this.xa[m].Qk(h*z,a.na.pe(p),z*f,z*r)}this.kb.add(r+f);for(b=k;b>=c+1;b--)l=this.kb.read(b-1),this.kb.write(b,l+f);e.et(d);this.jb.add(0);for(b=k-1;b>=c+1;b--)k=this.jb.read(b),k&=-5,this.jb.write(b+1,k);k=e.BT().read(d);k&=-5;this.$f&&(k|=1);this.jb.write(c,k)};d.prototype.qA=function(c,e){var d=-1,b=this.aa();if(d>b)throw a.f.F();0>d&&(d=b);this.hh=!1;var l=
this.qa;if(null!=c){this.zl(this.qa+e);this.tc();for(var f=d<b?this.wa(d):l,g=0,h=this.description.Ea;g<h;g++){var m=this.description.Id(g);if(0==m){this.xa[g].Em(2*(f+e),2*(l-d),this.xa[g],2*f,!0,2);for(var m=this.Pa(m),n=f,p=0;p<e;p++,n++){var t=0+p;m.write(2*n,c[t].x);m.write(2*n+1,c[t].y)}}else n=a.na.Xa(m),this.xa[g].Qk(f*n,a.na.pe(m),n*e,n*l)}}else this.tc();this.kb.add(this.qa);for(l=b;l>=d+1;l--)f=this.kb.read(l-1),this.kb.write(l,f+e);this.jb.add(0);for(l=b-1;l>=d+1;l--)b=this.jb.read(l),
b&=-5,this.jb.write(l+1,b);this.$f&&this.jb.write(d,1)};d.prototype.DH=function(c,e,d){var b=-1;0>c&&(c=this.aa());if(c>this.aa()||b>this.Ka(c)||d>e.length)throw a.f.X("index out of bounds");if(0!=d){c==this.aa()&&(this.kb.add(this.qa),this.$f?this.jb.add(1):this.jb.add(0));0>b&&(b=this.Ka(c));this.tc();var k=this.qa;this.zl(this.qa+d);this.tc();for(var l=0,f=this.description.Ea;l<f;l++){var g=this.description.Id(l),h=a.na.Xa(g);this.xa[l].Em(h*(this.wa(c)+b+d),(k-this.wa(c)-b)*h,this.xa[l],h*(this.wa(c)+
b),!0,h);0==l?this.xa[l].js(h*(this.wa(c)+b),d,e,0,!0):this.xa[l].Zh(a.na.pe(g),(this.wa(c)+b)*h,d*h)}this.jn()&&(this.cf.Em(this.wa(c)+b+d,k-this.wa(c)-b,this.cf,this.wa(c)+b,!0,1),this.tj.Em(this.wa(c)+b+d,k-this.wa(c)-b,this.tj,this.wa(c)+b,!0,1),this.cf.Zh(1,this.wa(c)+b,d),this.tj.Zh(-1,this.wa(c)+b,d));c+=1;for(e=this.aa();c<=e;c++)this.kb.write(c,this.kb.read(c)+d)}};d.prototype.Zf=function(c,e,d){var b=this.aa();0>c&&(c=this.aa());if(c>=b||e>this.Ka(c))throw a.f.X("index out of bounds");c==
this.aa()&&(this.kb.add(this.qa),this.$f?this.jb.add(1):this.jb.add(0));0>e&&(e=this.Ka(c));var k=this.qa;this.zl(this.qa+1);this.tc();var l=this.wa(c);this.xa[0].eh(2*(l+e),d,2*k);d=1;for(var f=this.description.Ea;d<f;d++){var g=this.description.Id(d),h=a.na.Xa(g);this.xa[d].Qk(h*(l+e),a.na.pe(g),h,h*k)}for(c+=1;c<=b;c++)this.kb.write(c,this.kb.read(c)+1)};d.prototype.bC=function(c,e){var d=this.aa();0>c&&(c=d-1);if(c>=d||e>=this.Ka(c))throw a.f.X("index out of bounds");this.tc();var b=this.wa(c);
0>e&&(e=this.Ka(c)-1);b+=e;e=0;for(var l=this.description.Ea;e<l;e++)if(null!=this.xa[e]){var f=a.na.Xa(this.description.Id(e));this.xa[e].Ek(f*b,f,f*this.qa)}for(;d>=c+1;d--)b=this.kb.read(d),this.kb.write(d,b-1);this.qa--;this.lh--;this.Dc(1993)};d.prototype.DF=function(c,e,d,b){c=this.wa(c)+e;d=this.wa(d)+b;if(d<c||0>c||d>this.D()-1)throw a.f.F();b=this.Da();e=0;b.Tb(c);do{for(;b.Ca();){c=b.ba();if(b.Db()==d)break;c=c.Rb();e+=c}if(b.Db()==d)break}while(b.Ya());return e};d.prototype.eQ=function(c,
e,d){e=this.wa(c)+e;d=this.wa(c)+d;if(0>e||d>this.D()-1)throw a.f.F();var b=this.Da();if(e>d){if(!this.Qb(c))throw a.f.F("cannot iterate across an open path");b.iC()}var k=c=0;b.Tb(e);do k+=c,c=b.ba().Rb();while(b.Db()!=d);return k};d.prototype.Gg=function(){return a.Pi.Sm(this,null)};d.prototype.EU=function(c,e,d,b){for(var k=c;k<d-1;k++)if(this.Qb(k))throw a.f.F("cannot interpolate across closed paths");k=this.description.Ea;if(1!=k){var l=this.DF(c,e,d,b);if(0!=l)for(var f=1;f<k;f++){var r=this.description.zd(f);
if(2!=a.na.Vz(r))for(var g=a.na.Xa(r),h=0;h<g;h++)this.GU(r,c,e,d,b,l,h)}}};d.prototype.DU=function(c,e,d){var b=this.description.Ea;if(1!=b){var k=this.eQ(c,e,d);if(0!=k)for(var l=1;l<b;l++){var f=this.description.zd(l);if(2!=a.na.Vz(f))for(var g=a.na.Xa(f),h=0;h<g;h++)this.FU(f,c,e,d,k,h)}}};d.prototype.GU=function(c,e,d,b,l,f,g){var k=this.Da();e=this.wa(e)+d;b=this.wa(b)+l;l=this.Yc(c,e,g);d=this.Yc(c,b,g);var r=l,v=0;k.Tb(e);do if(k.Ca()){k.ba();if(k.Db()==b)break;this.setAttribute(c,k.Db(),
g,r);k.Li();do{e=k.ba();if(k.Ik()==b)return;e=e.Rb();v+=e;r=a.Ub.Wq(l,d,v/f);k.Fo()||this.setAttribute(c,k.Ik(),g,r)}while(k.Ca())}while(k.Ya())};d.prototype.FU=function(c,e,d,b,l,f){var k=this.Da(),r=this.wa(e)+d;e=this.wa(e)+b;if(e!=r){b=this.Yc(c,r,f);d=this.Yc(c,e,f);var g=0;k.Tb(r);k.iC();r=b;do{var v=k.ba();this.setAttribute(c,k.Db(),f,r);r=v.Rb();g+=r;r=a.Ub.Wq(b,d,g/l)}while(k.Ik()!=e)}};d.prototype.Oa=function(){this.hr=0;this.hh=!1;this.Xd=this.cf=this.tj=this.jb=this.kb=null;this.LE()};
d.prototype.Xc=function(c){c instanceof a.Hd?this.jF(c,-1):this.xP(c)};d.prototype.jF=function(c,e){if(!this.u()&&!c.Ho()){this.tc();var d=this.xa[0],b=new a.b,l=new a.b,f,g,h;for(0>e?(f=this.jn(),g=0,h=this.qa):(f=this.et(e),g=this.wa(e),h=this.Gc(e));g<h;g++){b.x=d.read(2*g);b.y=d.read(2*g+1);if(f&&(e=this.tj.read(g),0<=e))switch(this.cf.read(g)&7){case 2:l.x=this.Xd.read(e);l.y=this.Xd.read(e+1);c.$h(l,l);this.Xd.write(e,l.x);this.Xd.write(e+1,l.y);l.x=this.Xd.read(e+3);l.y=this.Xd.read(e+4);c.$h(l,
l);this.Xd.write(e+3,l.x);this.Xd.write(e+4,l.y);break;case 4:throw a.f.ya();}c.$h(b,b);d.write(2*g,b.x);d.write(2*g+1,b.y)}this.Dc(1993)}};d.prototype.xP=function(c){if(!this.u()){this.Ud(1);this.tc();for(var e=this.xa[0],d=this.xa[1],b=new a.qd,l=new a.qd,f=this.jn(),g=0;g<this.qa;g++){b.x=e.read(2*g);b.y=e.read(2*g+1);b.z=d.read(g);if(f){var h=this.tj.read(g);if(0<=h)switch(this.cf.read(g)&7){case 2:l.x=this.Xd.read(h);l.y=this.Xd.read(h+1);l.z=this.Xd.read(h+2);l=c.Rp(l);this.Xd.write(h,l.x);
this.Xd.write(h+1,l.y);this.Xd.write(h+1,l.z);l.x=this.Xd.read(h+3);l.y=this.Xd.read(h+4);l.z=this.Xd.read(h+5);l=c.Rp(l);this.Xd.write(h+3,l.x);this.Xd.write(h+4,l.y);this.Xd.write(h+5,l.z);break;case 4:throw a.f.ya();}}b=c.Rp(b);e.write(2*g,b.x);e.write(2*g+1,b.y);d.write(g,b.z)}this.Dc(1993)}};d.prototype.Oy=function(){null==this.kb&&(this.kb=a.Uc.wh(1,0),this.jb=a.Uc.vq(1,0));null!=this.cf&&(this.cf.resize(this.lh,1),this.tj.resize(this.lh,-1))};d.prototype.iq=function(c){c.hh=!1;c.hr=this.hr;
c.lr=this.lr;null!=this.kb?c.kb=a.ia.Ak(this.kb):c.kb=null;null!=this.jb?c.jb=a.Gm.Ak(this.jb):c.jb=null;null!=this.tj?c.tj=a.ia.Ak(this.tj):c.tj=null;null!=this.cf?c.cf=a.Gm.Ak(this.cf):c.cf=null;null!=this.Xd?c.Xd=a.Sd.Ak(this.Xd):c.Xd=null;c.gr=this.gr;c.fr=this.fr;this.xk(1024)?c.bj=null:c.bj=this.bj};d.prototype.Rb=function(){if(!this.xk(512))return this.gr;for(var c=this.Da(),e=new a.qy(0);c.Ya();)for(;c.Ca();)e.add(c.ba().Rb());this.gr=e.fn();this.lg(512,!1);return e.fn()};d.prototype.Eb=function(a){if(a==
this)return!0;if(!(a instanceof d&&b.prototype.Eb.call(this,a)))return!1;var c=this.aa();return c!=a.aa()||null!=this.kb&&!this.kb.Eb(a.kb,0,c+1)||this.lr!=a.lr||null!=this.jb&&!this.jb.Eb(a.jb,0,c)?!1:b.prototype.Eb.call(this,a)};d.prototype.Da=function(){return new a.XN(this)};d.prototype.Ny=function(a){b.prototype.Ny.call(this,a);if(this.jn())for(a=this.Da();a.Ya();)for(;a.Ca();)break};d.prototype.uo=function(a,e){b.prototype.uo.call(this,a,e);if(this.jn())for(a=this.Da();a.Ya();)for(;a.Ca();)break};
d.prototype.Hy=function(){null==this.kb||0==this.kb.size?this.qa=0:this.qa=this.kb.read(this.kb.size-1)};d.prototype.hf=function(){if(!this.$f)return 0;this.fv();return this.fr};d.prototype.qw=function(a){if(!this.$f)return!1;if(!this.xk(8))return 0!=(this.jb.read(a)&4);this.fv();return 0<this.bj.read(a)};d.prototype.Tm=function(a){if(!this.$f)return 0;this.fv();return this.bj.read(a)};d.prototype.fv=function(){if(this.xk(1024)){var c=this.aa();null==this.bj?this.bj=new a.Sd(c):this.bj.size!=c&&this.bj.resize(c);
for(var c=new a.qy(0),e=new a.qy(0),d=new a.b,b=0,l=this.Da();l.Ya();){e.reset();for(this.w(this.wa(l.Ta),d);l.Ca();)e.add(l.ba().By(d.x,d.y));c.add(e.fn());var f=b++;this.bj.write(f,e.fn())}this.fr=c.fn();this.lg(1024,!1)}};d.prototype.xT=function(){if(this.$f){this.Al();for(var a=0,e=this.aa(),d=0;d<e;d++)0!=(this.jb.read(d)&4)&&a++}};d.prototype.Al=function(){if(this.xk(8)){this.fv();var c=this.aa();if(null==this.jb||this.jb.size<c)this.jb=a.Uc.vq(c+1);for(var e=1,d=0;d<c;d++){var b=this.bj.read(d);
0==d&&(e=0<b?1:-1);0<b*e?this.jb.hC(d,4):this.jb.ez(d,4)}this.lg(8,!1)}};d.prototype.bw=function(c){var e=this.Ta,d=this.aa();if(0<=e&&e<d){if(c<this.Gc(e)){if(c>=this.wa(e))return e;e--}else e++;if(0<=e&&e<d&&c>=this.wa(e)&&c<this.Gc(e))return this.Ta=e}if(5>d){for(e=0;e<d;e++)if(c<this.Gc(e))return this.Ta=e;throw a.f.X("corrupted geometry");}e=0;for(--d;d>e;){var b=e+(d-e>>1),l=this.wa(b);if(c<l)d=b-1;else if(e=this.Gc(b),c>=e)e=b+1;else return this.Ta=b}return this.Ta=e};d.prototype.lT=function(c){var e=
this.Pa(0);this.CT();var d=this.Gc(c),b=this.wa(c);c=-1;var l=new a.b,f=new a.b;l.y=-Infinity;l.x=-Infinity;for(b+=0;b<d;b++)e.fc(2*b,f),-1==l.compare(f)&&(c=b,l.L(f));return c};d.prototype.hA=function(){var a=this.D();if(!this.$f)for(var a=a-this.aa(),e=0,d=this.aa();e<d;e++)this.Qb(e)&&a++;return a};d.prototype.dw=function(a){var c=this.Ka(a);this.Qb(a)||c--;return c};d.prototype.Ja=function(){return new d(this.$f,this.description)};d.prototype.tb=function(){return this.$f?2:1};d.prototype.G=function(){return this.$f?
1736:1607};d.prototype.CT=function(){this.Bu()};d.prototype.GK=function(a){this.kb=a;this.Dc(16777215)};d.prototype.NT=function(){this.Bu();return this.cf};d.prototype.BT=function(){this.Bu();return this.jb};d.prototype.FK=function(a){this.jb=a;this.Dc(16777215)};d.prototype.aa=function(){return null!=this.kb?this.kb.size-1:0};d.prototype.Gc=function(a){return this.kb.read(a+1)};d.prototype.Ka=function(a){return this.kb.read(a+1)-this.kb.read(a)};d.prototype.wa=function(a){return this.kb.read(a)};
d.prototype.Wu=function(c,e){null==this.ob&&(this.ob=new a.wl);e=a.wy.jX(e);var d=this.ob.Hi;if(null!=d)if(d.jl<c||e>d.JT())this.ob.Ly(null);else return!0;d=a.wy.create(this,c,e);this.ob.Ly(d);return!0};d.prototype.jc=function(){var a=b.prototype.jc.call(this);if(!this.Hc()){var e=this.aa();null!=this.kb&&this.kb.zk(a,0,e+1);null!=this.jb&&this.jb.zk(a,0,e)}return a};d.prototype.iH=function(a){return null!=this.cf?this.cf.read(a):1};d.prototype.ic=function(c,e,d){var b=this.bw(c);if(c==this.Gc(b)-
1&&!this.Qb(b))throw a.f.X("index out of bounds");this.tc();var k=this.cf,l=1;null!=k&&(l=k.read(c)&7);switch(l){case 1:e.Is();break;case 2:throw a.f.ya();case 4:throw a.f.ya();default:throw a.f.ya();}e=e.get();d?e.Fg(a.ye.Ig()):e.Fg(this.description);b=c==this.Gc(b)-1&&this.Qb(b)?this.wa(b):c+1;k=new a.b;this.w(c,k);e.Mc(k);this.w(b,k);e.Zc(k);if(!d)for(d=1,k=this.description.Ea;d<k;d++)for(var l=this.description.Id(d),f=a.na.Xa(l),g=0;g<f;g++){var h=this.Yc(l,c,g);e.Sx(l,g,h);h=this.Yc(l,b,g);e.Kx(l,
g,h)}};d.prototype.ik=function(c,e){if(c>=this.aa())throw a.f.F();if(this.u())e.Oa();else{if(this.et(c))throw a.f.X("not implemented");var d=this.Pa(0),b=new a.b,l=new a.h;l.Oa();var f=this.wa(c);for(c=this.Gc(c);f<c;f++)d.fc(2*f,b),l.Nb(b);e.I(l)}};d.prototype.gX=function(c,e){if(c>=this.aa())throw a.f.F();if(this.u())e.Oa();else{if(this.et(c))throw a.f.X("not implemented");var d=this.Pa(0),b=new a.b,l=new a.h;l.Oa();var f=this.wa(c);for(c=this.Gc(c);f<c;f++)d.fc(2*f,b),l.Nb(b);e.I(l)}};d.prototype.Hj=
function(c){null==this.ob&&(this.ob=new a.wl);if(0==c||16>this.D())return!1;c=a.ma.zF(this);this.ob.ME(c);return!0};d.prototype.AO=function(){null==this.ob&&(this.ob=new a.wl);if(null!=this.ob.np)return!0;this.ob.NE(null);var c=a.ma.$P(this);this.ob.NE(c);return!0};d.prototype.Hp=function(a){this.lr=a};d.prototype.xo=function(){return this.lr};d.prototype.TE=function(c){if(this==c)throw a.f.X("MultiPathImpl.add");for(var e=this.aa(),d=0;d<c.aa();d++)this.Ti(c,d,!0),this.mW(e),e++};d.prototype.mQ=
function(c){var e=this.bw(c),d=this.wa(e);if(d!=c){e=this.Gc(e);if(c>=e||c<d)throw a.f.X("change_ring_start_point");for(var b=0,l=this.description.Ea;b<l;b++){var f=this.description.zd(b),f=a.na.Xa(f);this.xa[b].rotate(d*f,c*f,e*f)}}};d.se=[0,0,6,0,8,0];return d}(a.Lu);a.xl=b})(y||(y={}));(function(a){var b=function(b){function d(c){b.call(this);if(void 0!==c){if(null==c)throw a.f.F();this.description=c}else this.description=a.ye.Ig();this.qa=0}K(d,b);d.prototype.Ja=function(){return new d(this.description)};
d.prototype.add=function(a){this.resize(this.qa+1);this.Yh(this.qa-1,a)};d.prototype.kv=function(c,e){this.resize(this.qa+1);var d=new a.b;d.ka(c,e);this.rb(this.qa-1,d)};d.prototype.Jd=function(c,e,d){d=0>d?c.D():d;if(0>e||e>c.D()||d<e)throw a.f.F();if(e!=d){this.om(c.description);d-=e;var b=this.qa;this.resize(this.qa+d);this.tc();for(var k=0,l=c.description.Ea;k<l;k++){var f=c.description.Id(k),g=a.na.Xa(f),h=this.Pa(f),f=c.Pa(f);h.Rk(b*g,f,e*g,d*g,!0,1,b*g)}}};d.prototype.XE=function(c,e){var d=
c.length;e=0>e?d:e;if(0>d||0>e)throw a.f.F();if(0!=e){d=e-0;e=this.qa;this.resize(this.qa+d);for(var b=0;b<d;b++)this.rb(e+b,c[0+b])}};d.prototype.bC=function(c){if(0>c||c>=this.D())throw a.f.X("index out of bounds");this.tc();for(var e=0,d=this.description.Ea;e<d;e++)if(null!=this.xa[e]){var b=a.na.Xa(this.description.Id(e));this.xa[e].Ek(b*c,b,b*this.qa)}this.qa--;this.lh--;this.Dc(1993)};d.prototype.resize=function(a){this.zl(a)};d.prototype.iq=function(){};d.prototype.Oa=function(){b.prototype.LE.call(this)};
d.prototype.Xc=function(c){if(c instanceof a.Hd){if(!this.u()){this.tc();for(var e=this.xa[0],d=new a.b,b=0;b<this.qa;b++)d.x=e.read(2*b),d.y=e.read(2*b+1),c.$h(d,d),e.write(2*b,d.x),e.write(2*b+1,d.y);this.Dc(1993)}}else if(!this.u()){this.tc();this.Ud(1);this.tc();for(var e=this.xa[0],d=this.xa[1],l=new a.qd,b=0;b<this.qa;b++){l.x=e.read(2*b);l.y=e.read(2*b+1);l.z=d.read(b);var f=c.Rp(l);e.write(2*b,f.x);e.write(2*b+1,f.y);d.write(b,f.z)}this.Dc(1993)}};d.prototype.tb=function(){return 0};d.prototype.G=
function(){return 550};d.prototype.hf=function(){return 0};d.prototype.Rb=function(){return 0};d.prototype.Eb=function(a){return a==this?!0:a instanceof d?b.prototype.Eb.call(this,a):!1};d.prototype.lP=function(c){var e=c.length,d=e;if(0>e||0>e||0>d)throw a.f.F();this.Ud(1);if(0!=d){e=d-0;d=this.qa;this.$J(this.qa+e);for(var b=this.Pa(0),l=0;l<e;l++){var f=c[0+l].y;b.write(2*(d+l),c[0+l].x);b.write(2*(d+l)+1,f)}b=this.Pa(1);for(l=0;l<e;l++)b.write(d+l,c[0+l].z);this.Dc(1993)}};d.prototype.mP=function(c,
e){var d=c.length;e=0>e?d:e;if(0>d||0>e)throw a.f.F();if(0!=e){d=e-0;if(0!=(d&1))throw a.f.F();e=this.qa;this.$J(this.qa+d/2);this.xa[0].hs(2*e,d,c,0,!0)}};d.prototype.$J=function(c){var e=this.qa;this.zl(c);if(this.qa>e){c=1;for(var d=this.description.Ea;c<d;c++){var b=this.description.zd(c),l=a.na.Xa(b);this.xa[c].Qk(l*e,a.na.pe(b),l*(this.qa-e),l*e)}}};d.prototype.dX=function(c,e){var d=this.qa,d=Math.min(d,e+1E3);if(0>e||e>=this.qa||d<e||1E3!=c.length)throw a.f.F();var b=this.Pa(0),l=d-e,f=[];
b.pl(2*e,2*l,f,0,!0);for(b=0;b<l;b++)c[b]=a.b.pa(f[2*b],f[2*b+1]);return d};d.prototype.eX=function(c,e){var d=this.qa,d=Math.min(d,0+e);if(0>=this.qa||0>d||c.length!=e)throw a.f.F();e=this.Pa(0);var b=null,l=a.na.pe(1),f=this.hasAttribute(1);f&&(b=this.Pa(1));var d=d-0,g=[],h=[];e.pl(0,2*d,g,0,!0);b.pl(0,d,h,0,!0);for(e=0;e<d;e++)c[e]=new a.qd(g[2*e],g[2*e+1],f?h[e]:l)};d.prototype.Hy=function(){};d.prototype.Oy=function(){};d.prototype.Wu=function(){return!1};d.prototype.Hj=function(){return!1};
d.prototype.Gg=function(){return null};return d}(a.Lu);a.Ed=b})(y||(y={}));(function(a){(function(a){a[a.NotDetermined=0]="NotDetermined";a[a.Structure=1]="Structure";a[a.DegenerateSegments=2]="DegenerateSegments";a[a.Clustering=3]="Clustering";a[a.Cracking=4]="Cracking";a[a.CrossOver=5]="CrossOver";a[a.RingOrientation=6]="RingOrientation";a[a.RingOrder=7]="RingOrder";a[a.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency";a[a.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";a[a.OGCDisconnectedInterior=
10]="OGCDisconnectedInterior"})(a.WM||(a.WM={}));var b=function(){function a(a,c,e){void 0===a?(this.Ii=0,this.mm=this.lm=-1):(this.Ii=a,this.lm=c,this.mm=e)}a.prototype.ls=function(a){this.Ii=a.Ii;this.lm=a.lm;this.mm=a.mm};return a}();a.$d=b})(y||(y={}));(function(a){var b=function(){function b(){}b.XZ=function(d){if(!1===d)throw a.f.IL();};b.RK=function(a){return isNaN(a)?NaN:0===a?a:0<a?1:-1};b.pv=function(a){var c;void 0===c&&(c=0);for(var e=[],d=0;d<a;d++)e[d]=b.gf(2,c);return e};b.gf=function(a,
c){void 0===c&&(c=0);for(var e=[],d=0;d<a;d++)e[d]=c;return e};b.Mv=function(a,c){var e,d;void 0===e&&(e=0);for(void 0===d&&(d=a.length-1);e<=d;e++)a[e]=c};b.nk=function(a,c,e){return a<c?c:a>e?e:a};b.s_=function(){return 4};b.dh=function(a,c){var e=5381;void 0!==c?e=(c<<5)+c+(a&255):e=(e<<5)+e+(a&255);e=(e<<5)+e+(a>>8&255);e=(e<<5)+e+(a>>16&255);return(e<<5)+e+(a>>24&255)&2147483647};b.Zi=function(){throw Error("Not Implemented");};b.o_=function(){return-Infinity};b.q_=function(){return Infinity};
b.g_=function(){return 2147483647};b.TZ=function(){return 2.220446049250313E-16};b.UZ=function(){return 1.7976931348623157E308};b.GB=function(a){return b.cZ(a)+12345&2147483647};b.fI=function(a){var c=32,e=a%b.oA|0,d=a/b.oA|0;if(0===(c&=63))return a;32>c?(a=e>>>c|d<<32-c,c=d>>c):(a=d>>c-32,c=0<=d?0:-1);return c*b.oA+(a>>>0)};b.cZ=function(a){a|=0;return(1103495168*a|0)+(20077*a|0)|0};b.truncate=function(a){return 0>a?-1*Math.floor(Math.abs(a)):Math.floor(a)};b.fV=Math.pow(2,53)-1;b.WZ=-b.fV;b.hD=
65536;b.J_=16777216;b.oA=b.hD*b.hD;return b}();a.J=b})(y||(y={}));(function(a){(function(a){a[a.Project=0]="Project";a[a.Union=1]="Union";a[a.Difference=2]="Difference";a[a.Proximity2D=3]="Proximity2D";a[a.Relate=4]="Relate";a[a.Equals=5]="Equals";a[a.Disjoint=6]="Disjoint";a[a.Intersects=7]="Intersects";a[a.Within=8]="Within";a[a.Contains=9]="Contains";a[a.Crosses=10]="Crosses";a[a.Touches=11]="Touches";a[a.Overlaps=12]="Overlaps";a[a.Buffer=13]="Buffer";a[a.Distance=14]="Distance";a[a.Intersection=
15]="Intersection";a[a.Clip=16]="Clip";a[a.Cut=17]="Cut";a[a.DensifyByLength=18]="DensifyByLength";a[a.DensifyByAngle=19]="DensifyByAngle";a[a.LabelPoint=20]="LabelPoint";a[a.GeodesicBuffer=21]="GeodesicBuffer";a[a.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";a[a.ShapePreservingDensify=23]="ShapePreservingDensify";a[a.GeodeticLength=24]="GeodeticLength";a[a.GeodeticArea=25]="GeodeticArea";a[a.Simplify=26]="Simplify";a[a.SimplifyOGC=27]="SimplifyOGC";a[a.Offset=28]="Offset";a[a.Generalize=
29]="Generalize";a[a.SymmetricDifference=30]="SymmetricDifference";a[a.ConvexHull=31]="ConvexHull";a[a.Boundary=32]="Boundary";a[a.SimpleRelation=33]="SimpleRelation"})(a.rN||(a.rN={}));var b=function(){function b(){}b.prototype.G=function(){return null};b.prototype.qo=function(){return!1};b.prototype.vv=function(){return!1};b.MZ=function(d){a.T.gh(d.G())&&(d=d.ob,null!=d&&(d.Ly(null),d.ME(null)))};return b}();a.ef=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}
K(d,b);d.prototype.G=function(){return 13};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d,b,l){return c instanceof a.T?(l=new a.hd(c),this.V(l,e,[d],!1,b).next()):!0===b?(d=new a.CD(c,e,d,!1,l),a.ei.local().V(d,e,l)):new a.CD(c,e,d,!1,l)};d.$=null;return d}(a.ef);a.BD=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e,b,l){this.Ba=-1;this.he=d;this.HA=c;this.xt=e;this.sV=new a.h;this.sV.Oa();this.To=-1;this.lc=l}b.prototype.next=function(){for(var a;null!=
(a=this.he.next());)return this.Ba=this.he.Ha(),this.To+1<this.xt.length&&this.To++,this.buffer(a,this.xt[this.To]);return null};b.prototype.Ha=function(){return this.Ba};b.prototype.buffer=function(d,c){return a.OL.buffer(d,c,this.HA,NaN,96,this.lc)};b.prototype.Re=function(){return!0};return b}();a.CD=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 16};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,
e,d,b){return c instanceof a.T?(c=new a.hd(c),this.V(c,e,d,b).next()):new a.bN(c,e,d,b)};d.$=null;return d}(a.ef);a.aN=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e){this.Ba=-1;if(null==d)throw a.f.F();this.R=c;this.$k=d;this.ta=a.ma.be(e,c,!1)}b.prototype.next=function(){var d;return null!=(d=this.$k.next())?(this.Ba=this.$k.Ha(),a.me.clip(d,this.R,this.ta,0)):null};b.prototype.Ha=function(){return this.Ba};b.prototype.Re=function(){return!0};return b}();a.bN=b})(y||(y={}));(function(a){var b=
function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 31};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d){return c instanceof a.T?a.ED.CF(c):new a.ED(e,c,d)};d.$=null;return d}(a.ef);a.DD=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e){this.$A=new a.Iu;this.Ba=-1;if(null==c)throw a.f.F();this.nI=d;this.Pc=!1;this.$k=c;this.lc=e}b.prototype.next=function(){if(this.nI){if(!this.Pc){var a=this.dQ(this.$k);this.Pc=!0;
return a}return null}if(!this.Pc){a=this.$k.next();if(null!=a)return this.Ba=this.$k.Ha(),b.CF(a);this.Pc=!0}return null};b.prototype.Ha=function(){return this.Ba};b.prototype.dQ=function(a){for(var c;null!=(c=a.next());)this.$A.Jb(c);return this.$A.TS()};b.prototype.Re=function(){if(this.Pc)return!0;if(!this.nI)throw a.f.X("Invalid call for non merging convex hull.");var d=this.$k.next();if(null!=d)return this.$A.Jb(d),!0;throw a.f.X("Expects a non-null geometry.");};b.CF=function(d){if(b.Wg(d))return d;
var c=d.G();if(a.xl.Oc(c))return c=new a.Ua(d.description),c.dc(d,!0),c;if(550==c&&2==d.D()){var e=new a.Wa,c=new a.Ua(d.description);d.Ae(0,e);c.Rf(e);d.Ae(1,e);c.lineTo(e);return c}return a.Iu.TQ(d)};b.Wg=function(d){if(d.u())return!0;var c=d.G();return 33==c||197==c?!0:a.xl.Oc(c)?!1:550==c?1==d.D()?!0:!1:1607==c?1==d.aa()&&2>=d.D()?!0:!1:1!=d.aa()?!1:2>=d.D()?!0:a.Iu.UH(d,0)};return b}();a.ED=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=
function(){return 17};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d,b,l){return new a.dN(c,e,d,b,l)};d.$=null;return d}(a.ef);a.cN=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e,b,l){this.qg=null;if(null==c||null==e)throw a.f.X("invalid argument");this.pV=d;this.UA=c;this.wI=e;d=a.ma.Yv(c,e);this.ta=a.ma.be(b,d,!0);this.vI=-1;this.je=l}b.prototype.Ha=function(){return 0};b.prototype.next=function(){this.GS();return++this.vI<this.qg.length?this.qg[this.vI]:
null};b.prototype.GS=function(){if(null==this.qg)switch(this.qg=[],this.UA.G()){case 1607:this.IS();break;case 1736:this.HS()}};b.prototype.IS=function(){var d=new a.Ua,c=new a.Ua,e=new a.Ua;this.qg.push(d);this.qg.push(c);var b=[];a.VL.TL(this.pV,this.UA,this.wI,this.ta,b,this.je);for(var l=0;l<b.length;l++){var f=b[l];0==f.mx?d.add(f.Y,!1):1==f.mx||2==f.mx?c.add(f.Y,!1):3==f.mx?this.qg.push(f.Y):e.add(f.Y,!1)}e.u()||d.u()&&c.u()&&!(3<=this.qg.length)||this.qg.push(e);d.u()&&c.u()&&3>this.qg.length&&
(this.qg.length=0)};b.prototype.HS=function(){var d=new a.ia(0),c=new a.fd,e=c.gG(),b=c.Jb(this.UA),l=c.Jb(this.wI),f=new a.Dg;try{f.Wr(c,this.ta,this.je);f.Hl(e,b,l,d);var g=c.Se(b),h=new a.Ia,m=new a.Ia;this.qg.length=0;this.qg.push(h);this.qg.push(m);for(b=0;b<d.size;b++){var n,p=new a.fd,t=p.Jb(g),u=p.Jb(c.Se(d.get(b)));f.Vr(p,this.je);var z=f.mw(t,u);n=p.Se(z);if(!n.u()){var q=c.UG(d.get(b),e);2==q?h.add(n,!1):1==q?m.add(n,!1):this.qg.push(n);var y=new a.fd,t=y.Jb(g),u=y.Jb(c.Se(d.get(b)));f.Vr(y,
this.je);g=y.Se(f.Wm(t,u))}}!g.u()&&0<d.size&&this.qg.push(g);h.u()&&m.u()&&(this.qg.length=0)}finally{f.qh()}};b.prototype.Re=function(){return!0};return b}();a.dN=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 18};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d){if(c instanceof a.T)return c=new a.hd(c),this.V(c,e,d).next();if(0>=e)throw a.f.F();return new a.eN(c,e,d)};d.$=null;return d}(a.ef);
a.Km=b})(y||(y={}));(function(a){var b=function(){function b(a,c){this.Ba=-1;this.he=a;this.Jt=c}b.prototype.Ha=function(){return this.Ba};b.prototype.next=function(){var a;return null!=(a=this.he.next())?(this.Ba=this.he.Ha(),this.IR(a)):null};b.prototype.IR=function(d){if(d.u()||1>d.tb())return d;var c=d.G();if(1736==c||1607==c)return this.vz(d);if(a.T.Oc(c))return this.KR(d);if(197==c)return this.JR(d);throw a.f.ya();};b.prototype.KR=function(d){if(d.Rb()<=this.Jt)return d;var c=new a.Ua(d.description);
c.dc(d,!0);return this.vz(c)};b.prototype.JR=function(d){var c=new a.Ia(d.description);c.jd(d,!1);var e=new a.h;d.s(e);d=e.fa();return e.N()<=this.Jt&&d<=this.Jt?c:this.vz(c)};b.prototype.vz=function(d){for(var c=d.Ja(),e=d.Da();e.Ya();)for(var b=!0;e.Ca();){var l=e.ba();if(322!=l.G())throw a.f.X("not implemented");var f=e.Fo(),g=l.Rb();if(g>this.Jt){var h=Math.ceil(g/this.Jt),g=new a.Wa(d.description);b&&(l.Dp(g),c.Rf(g));for(var m=b=1/h,n=0,h=h-1;n<h;n++)l.Ex(m,g),c.lineTo(g),m+=b;f?c.sq():(l.Bp(g),
c.lineTo(g))}else f?c.sq():c.dc(l,b);b=!1}return c};b.prototype.Re=function(){return!0};return b}();a.eN=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.G=function(){return 2};d.prototype.V=function(c,e,d,b){return c instanceof a.T?(c=new a.hd(c),e=new a.hd(e),this.V(c,e,d,b).next()):new a.fN(c,e,d,b)};d.Wm=function(c,e,b,l){if(c.u()||e.u())return c;var k=c.tb(),f=e.tb();if(k>f)return c;var r=
c.G(),g=e.G(),h=new a.h,m=new a.h,n=new a.h;c.s(h);e.s(m);n.I(h);n.Nb(m);var n=a.ma.be(b,n,!1),p=n*Math.sqrt(2)*1.00001,t=new a.h;t.I(h);t.O(p,p);if(!t.Yb(m))return c;if(1==k&&2==f)return d.RL(c,e,g,b,l);if(33==r)switch(a.xl.Oc(g)?(b=new a.Ua(e.description),b.dc(e,!0)):b=e,g){case 1736:return d.fO(c,b,n);case 1607:return d.jO(c,b,n);case 550:return d.UN(c,b,n);case 197:return d.ON(c,b,n);case 33:return d.bO(c,b,n);default:throw a.f.F();}else if(550==r)switch(g){case 1736:return d.BM(c,e,n);case 197:return d.lM(c,
e,n);case 33:return d.wM(c,e,n)}return a.Dg.Wm(c,e,b,l)};d.fO=function(c,e,d){return 0==a.gd.VH(e,c,d)?c:c.Ja()};d.jO=function(c,e,d){var b=c.w();e=e.Da();for(var k=d*Math.sqrt(2)*1.00001,l=k*k,f=new a.h;e.Ya();)for(;e.Ca();){var g=e.ba();g.s(f);f.O(k,k);if(f.contains(b)){if(g.lt(b,d))return c.Ja();var h=g.ec();if(a.b.sc(b,h)<=l)return c.Ja();h=g.Cc();if(a.b.sc(b,h)<=l)return c.Ja()}}return c};d.UN=function(c,e,d){var b=e.Pa(0);e=e.D();var k=c.w(),l=new a.b;d=d*Math.sqrt(2)*1.00001;d*=d;for(var f=
0;f<e;f++)if(b.fc(2*f,l),a.b.sc(l,k)<=d)return c.Ja();return c};d.ON=function(c,e,d){var b=new a.h;e.s(b);b.O(d,d);e=c.w();return b.contains(e)?c.Ja():c};d.bO=function(c,e,d){d=d*Math.sqrt(2)*1.00001;d*=d;var b=c.w();e=e.w();return a.b.sc(b,e)<=d?c.Ja():c};d.BM=function(c,e,d){var b=new a.h;e.s(b);b.O(d,d);for(var k=c.D(),l=!1,f=[],g=0;g<k;g++)f[g]=!1;for(var h=new a.b,g=0;g<k;g++)c.w(g,h),b.contains(h)&&0!=a.gd.fe(e,h,d)&&(l=!0,f[g]=!0);if(!l)return c;e=c.Ja();for(g=0;g<k;g++)f[g]||e.Jd(c,g,g+1);
return e};d.lM=function(c,e,d){var b=new a.h;e.s(b);b.O(d,d);e=c.D();var k=!1;d=[];for(var l=0;l<e;l++)d[l]=!1;for(var f=new a.b,l=0;l<e;l++)c.w(l,f),b.contains(f)&&(k=!0,d[l]=!0);if(!k)return c;b=c.Ja();for(l=0;l<e;l++)d[l]||b.Jd(c,l,l+1);return b};d.wM=function(c,e,d){var b=c.Pa(0),k=c.D(),l=e.w(),f=new a.b,g=!1;e=[];for(var h=0;h<k;h++)e[h]=!1;h=d*Math.sqrt(2)*1.00001;d=h*h;for(h=0;h<k;h++)b.fc(2*h,f),a.b.sc(f,l)<=d&&(g=!0,e[h]=!0);if(!g)return c;b=c.Ja();for(h=0;h<k;h++)e[h]||b.Jd(c,h,h+1);return b};
d.RL=function(c,e,d,b,l){var k=new a.ci;c.Rn(k);var f=new a.h;e.s(f);k.Nb(f);k.O(.1*k.N(),.1*k.fa());f=new a.Ia;f.jd(k,!1);1736==d?f.add(e,!0):f.jd(e,!0);return a.sk.local().V(c,f,b,l)};d.$=null;return d}(a.ef);a.cq=b})(y||(y={}));(function(a){var b=function(){function b(a,c,e,b){this.nt=null==c;this.Ba=-1;this.he=a;this.HA=e;this.vV=c.next();this.lc=b}b.prototype.next=function(){if(this.nt)return null;var d;return null!=(d=this.he.next())?(this.Ba=this.he.Ha(),a.cq.Wm(d,this.vV,this.HA,this.lc)):
null};b.prototype.Ha=function(){return this.Ba};b.prototype.Re=function(){return!0};return b}();a.fN=b})(y||(y={}));(function(a){var b=function(){function d(c){this.je=c;this.Yj=new a.h;this.Yj.Oa();this.Jh=new a.h;this.Jh.Oa()}d.prototype.Au=function(){var a;a=this.Yj.o;this.Yj.o=this.Jh.o;this.Jh.o=a;a=this.Yj.v;this.Yj.v=this.Jh.v;this.Jh.v=a;a=this.Yj.A;this.Yj.A=this.Jh.A;this.Jh.A=a;a=this.Yj.B;this.Yj.B=this.Jh.B;this.Jh.B=a};d.prototype.YR=function(c,e){var d=!this.Yj.Yb(this.Jh);if(a.T.Ic(c.G())&&
a.T.Ic(e.G())){if(c.D()>e.D())return this.sF(c,e,d);this.Au();d=this.sF(e,c,d);this.Au();return d}if(550==c.G()&&a.T.Ic(e.G()))return d=this.tF(e,c,d),this.Au(),d;if(550==e.G()&&a.T.Ic(c.G()))return this.tF(c,e,d);if(550==c.G()&&550==e.G()){if(c.D()>e.D())return this.uF(c,e);this.Au();d=this.uF(e,c);this.Au();return d}return 0};d.prototype.sF=function(c,e,d){var b=c.Da(),k=e.Da(),l=new a.h,f=new a.h,g=1.7976931348623157E308;if(!d&&this.pZ(c,e,b,k))return 0;for(;b.Ya();)for(;b.Ca();)if(c=b.ba(),c.s(l),
!(l.Yx(this.Jh)>g)){for(;k.Ya();)for(;k.Ca();)if(e=k.ba(),e.s(f),l.Yx(f)<g&&(e=c.Cb(e,d),e*=e,e<g)){if(0==e)return 0;g=e}k.yj()}return Math.sqrt(g)};d.prototype.tF=function(c,e,d){var b=c.Da(),k=new a.h,l=1.7976931348623157E308,f=new a.b,g,h=e.D();for(d=!d&&1736==c.G();b.Ya();)for(;b.Ca();){var m=b.ba();m.s(k);if(!(1<h&&k.Yx(this.Jh)>l)){for(var n=0;n<h;n++){e.w(n,f);if(d&&0!=a.gd.fe(c,f,0))return 0;g=m.oe(f,!1);f.sub(m.gc(g));g=f.pk();if(g<l){if(0==g)return 0;l=g}}d=!1}}return Math.sqrt(l)};d.prototype.uF=
function(c,e){for(var d=1.7976931348623157E308,b=new a.b,l=new a.b,f,g=c.D(),h=e.D(),m=0;m<g;m++)if(c.w(m,b),!(1<h&&this.Jh.YK(b)>d))for(var n=0;n<h;n++)if(e.w(n,l),f=a.b.sc(b,l),f<d){if(0==f)return 0;d=f}return Math.sqrt(d)};d.prototype.pZ=function(c,e,d,b){if(1736==c.G()){for(;b.Ya();)if(b.Ca()){var k=b.ba();if(0!=a.gd.fe(c,k.Cc(),0))return!0}b.yj()}if(1736==e.G()){for(;d.Ya();)if(d.Ca()&&(c=d.ba(),0!=a.gd.fe(e,c.Cc(),0)))return!0;d.yj()}return!1};d.prototype.Sm=function(a,e){if(a.u()||e.u())return NaN;
a.s(this.Yj);e.s(this.Jh);return this.YR(a,e)};return d}(),l=function(d){function c(){d.apply(this,arguments)}K(c,d);c.prototype.V=function(c,d,l){if(null==c||null==d)throw a.f.F();if(c.u()||d.u())return NaN;var e,k;e=c.G();k=d.G();if(33==e){if(33==k)return a.b.Cb(c.w(),d.w());if(197==k)return l=new a.h,d.s(l),l.Cb(c.w());e=new a.Ed;e.add(c);c=e}else if(197==e){if(197==k)return k=new a.h,c.s(k),l=new a.h,d.s(l),l.Cb(k);e=new a.Ia;e.jd(c,!1);c=e}33==k?(k=new a.Ed,k.add(d),d=k):197==k&&(k=new a.Ia,
k.jd(d,!1),d=k);return(new b(l)).Sm(c,d)};c.local=function(){null===c.$&&(c.$=new c);return c.$};c.prototype.G=function(){return 14};c.$=null;return c}(a.ef);a.gN=l})(y||(y={}));(function(a){var b=function(){function b(a,c,e,b){this.KI=a;this.SI=c;this.je=b;this.kI=e}b.prototype.next=function(){var a=this.KI.next();return null==a?null:this.jD(a)};b.prototype.Ha=function(){return this.KI.Ha()};b.prototype.jD=function(d){var c=d.G();if(a.T.Jo(c))return d;if(197==c)return c=new a.Ia(d.description),c.jd(d,
!1),this.jD(c);if(d.u())return d;if(null==d)throw a.f.ya();for(var c=d.Ja(),e=new a.Hb,b=0,l=d.aa();b<l;b++)this.nM(d,b,c,e);return c};b.prototype.nM=function(d,c,e,b){if(!(2>d.Ka(c))){var k=d.wa(c),l=d.Gc(c)-1,f=d.Pa(0),g=d.Qb(c),h=new a.ia(0);h.yb(d.Ka(c)+1);var m=new a.ia(0);m.yb(d.Ka(c)+1);h.add(g?k:l);h.add(k);for(k=new a.b;1<h.size;){var n=h.Fc();h.Pf();var p=h.Fc();d.w(n,k);b.Mc(k);d.w(p,k);b.Zc(k);p=this.jM(b,k,f,n,p,l);0<=p?(h.add(p),h.add(n)):m.add(n)}g||m.add(h.get(0));if(m.size==h.size)e.Ti(d,
c,!0);else if(2<=m.size&&(!this.kI||2!=m.size||!(g||a.b.Cb(d.Aa(m.get(0)),d.Aa(m.get(1)))<=this.SI))){c=new a.Wa;b=0;for(l=m.size;b<l;b++)d.Ae(m.get(b),c),0==b?e.Rf(c):e.lineTo(c);g&&(this.kI||2!=m.size||e.lineTo(c),e.sq())}}};b.prototype.jM=function(a,c,e,b,l,f){var d=l-1;l<=b&&(d=f);f=l=-1;for(b+=1;b<=d;b++){e.fc(2*b,c);var k=c.x,r=c.y;a.gc(a.oe(c,!1),c);c.x-=k;c.y-=r;k=c.length();k>this.SI&&k>f&&(l=b,f=k)}return l};b.prototype.Re=function(){return!0};return b}();a.hN=b})(y||(y={}));(function(a){var b=
function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 29};d.prototype.V=function(c,e,d,b){return c instanceof a.T?(c=new a.hd(c),this.V(c,e,d,b).next()):new a.hN(c,e,d,b)};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.$=null;return d}(a.ef);a.FD=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 21};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d,
b,l,f,g,h){return c instanceof a.T?(h=new a.hd(c),this.V(h,e,d,[b],l,f,!1,g).next()):!0===g?(d=new a.HD(c,e,d,b,l,!1,!1,h),a.ei.local().V(d,e,h)):new a.HD(c,e,d,b,l,!1,!1,h)};d.$=null;return d}(a.ef);a.GD=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e,b,l,f,g,h){if(f)throw a.f.df();if(null==c)throw a.f.F();this.Ba=-1;this.Gt=d;this.Rg=c;this.$e=e;this.xt=b;this.Po=l;this.To=-1;this.lc=h;this.tV=new a.h;this.tV.Oa()}b.prototype.next=function(){for(var a;null!=(a=this.Gt.next());)return this.Ba=
this.Gt.Ha(),this.To+1<this.xt.length&&this.To++,this.QS(a,this.xt[this.To]);return null};b.prototype.Ha=function(){return this.Ba};b.prototype.QS=function(d,c){return a.qM.buffer(d,this.Rg,this.$e,c,this.Po,this.lc)};b.prototype.Re=function(){return!0};return b}();a.HD=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 24};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d,b){if(null==e)throw a.f.F();
if(c.u()||1>c.tb())return 0;if(4==d)throw a.f.df();var k=a.fb.kc(e),l=a.fb.gw(k),f=a.fb.Rv(k),l=l*(2-l),r=k.Od().Ai,g=c.G(),h;1736==g||197==g?h=c.Gg():a.T.Oc(g)?(h=new a.Ua(c.description),h.dc(c,!0)):h=c;if(0==k.Eb(e)){if(a.fb.Jc(e)){h=a.gi.Mj(h,e);1607==g&&h==c&&(h=a.T.ne(c));c=new a.Ac;a.fb.Bh(e).Tn(c);for(var g=0,m=h.D();g<m;g++){var n=h.Aa(g);n.x=a.gi.On(n.x,c);h.rb(g,n)}}c=h.Ja();h=a.gi.NJ(e,k,h,c,b)?c:a.fb.Xg(h,e,k,b)}return this.$R(h,d,f,l,r)};d.prototype.$R=function(c,e,d,b,l){var k=new a.ea(0),
f=0;for(c=c.Da();c.Ya();)for(;c.Ca();){var r=c.ba(),g=r.ec(),r=r.Cc();g.scale(l);r.scale(l);a.mb.Md(d,b,g.x,g.y,r.x,r.y,k,null,null,e);f+=k.j}return f};d.$=null;return d}(a.ef);a.kN=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 18};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d,b,l){return c instanceof a.T?(c=new a.hd(c),this.V(c,e,d,b,l).next()):new a.jN(c,d,b,e,-1,-1,l)};d.$=null;return d}(a.ef);
a.iN=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e,b,l,f){if(0<f)throw a.f.df();if(4!=e&&0<l)throw a.f.df();if(null==c)throw a.f.F();this.Ba=-1;this.Gt=d;this.Rg=c;this.$e=e;this.AV=b;this.zV=l}b.prototype.next=function(){for(var a;null!=(a=this.Gt.next());)return this.Ba=this.Gt.Ha(),this.Fz(a);return null};b.prototype.Ha=function(){return this.Ba};b.prototype.Fz=function(d){return a.Ej.Ks(d,this.Rg,this.$e,this.AV,this.zV,this.lc)};b.prototype.Re=function(){return!0};return b}();
a.jN=b})(y||(y={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Contains=1]="Contains";a[a.Within=2]="Within";a[a.Equals=3]="Equals";a[a.Disjoint=4]="Disjoint";a[a.Touches=8]="Touches";a[a.Crosses=16]="Crosses";a[a.Overlaps=32]="Overlaps";a[a.NoThisRelation=64]="NoThisRelation";a[a.Intersects=1073741824]="Intersects";a[a.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(a.zM||(a.zM={}));var b=function(){function b(){}b.r_=function(d,c,e,k){if(c.u()||d.u())return 4;var l=d.G(),f=
c.G(),g;a.T.Oc(l)&&(d=g=new a.Ua(d.description),g.dc(d,!0));a.T.Oc(f)&&(c=g=new a.Ua(c.description),g.dc(c,!0));switch(l){case 33:switch(f){case 33:return b.DN(d,c,e);case 197:return b.se(b.AD(c,d,e));case 550:return b.se(b.ZD(c,d,e));case 1607:return b.se(b.ZC(c,d,e,k));case 1736:return b.se(b.mE(c,d,e))}throw a.f.ya();case 197:switch(f){case 33:return b.AD(d,c,e);case 197:return b.HM(d,c,e);case 550:return b.se(b.RD(c,d,e,k));case 1607:return b.se(b.rE(c,d));case 1736:return b.se(b.iE(c,d))}throw a.f.ya();
case 550:switch(f){case 33:return b.ZD(d,c,e);case 197:return b.RD(d,c,e,k);case 550:return b.XD(d,c,e,k);case 1607:return b.se(b.tE(c,d));case 1736:return b.se(b.kE(c,d))}throw a.f.ya();case 1607:switch(f){case 33:return b.ZC(d,c,e,k);case 197:return b.rE(d,c);case 550:return b.tE(d,c);case 1607:return b.kO(d,c);case 1736:return b.se(b.pE(c,d))}throw a.f.ya();case 1736:switch(f){case 33:return b.mE(d,c,e);case 197:return b.iE(d,c);case 550:return b.kE(d,c);case 1607:return b.pE(d,c);case 1736:return b.VN(d,
c)}throw a.f.ya();default:throw a.f.ya();}};b.DN=function(a,c,e){a=a.w();c=c.w();return b.gE(a,c,e)};b.gE=function(a,c,e){a.sub(c);return a.pk()<=e*e?3:4};b.AD=function(d,c,e){var k=new a.h;d.s(k);d=c.w();return b.OM(k,d,e)};b.OM=function(a,c,e){a.O(-e,-e);if(a.contains(c))return 1;a.O(e,e);return a.contains(c)?8:4};b.SM=function(a,c,e){return c.contains(e)?1:a.contains(e)?8:4};b.HM=function(d,c,e){var k=new a.h;d.s(k);d=new a.h;c.s(d);return b.LM(k,d,e)};b.LM=function(a,c,e){var d=0;a.contains(c)&&
(d|=1);c.contains(a)&&(d|=2);if(0!=d)return d;a.O(-e,-e);c.O(-e,-e);if(a.Yb(c))return d=a,d.O(e,e),d=d.contains(c)?1:0,c.O(e,e),d|=c.contains(a)?2:0,0!=d?d:32;d=a;d.O(e,e);c.O(e,e);return d.Yb(c)?8:4};b.ZD=function(a,c,e){c=c.w();return b.aE(a,c,e)};b.aE=function(a,c,e){for(var d=0,l=a.D();d<l;d++){var f;f=a.Aa(d);f=b.gE(f,c,e);if(4!=f)return 0!=(f&2)&&1!=l?1:f}return 4};b.RD=function(d,c,e,k){var l=new a.h;c.s(l);return b.ZM(d,l,e,k)};b.ZM=function(a,c,e,k){c.O(-e,-e);c.O(e,e);for(var d=e=0,l=a.D();d<
l;d++){var f;f=a.Aa(d);f=b.se(b.SM(c,c,f));if(4!=f&&(e|=f,4==k))return 1073741824}return 0==e?4:2==e?e:32};b.XD=function(a,c,e,k){for(var d=0,l=0,f=c.D();l<f;l++){var g;g=c.Aa(l);g=b.aE(a,g,e);if(4!=g&&(d++,4==k))return 1073741824}return 0<d?d==c.D()?3==k?(g=b.XD(c,a,e,1),1==g?3:0):1:32:0};b.ZC=function(a,c,e,k){c=c.w();return b.gO(a,c,e,k)};b.VM=function(a,c){var e=null;a=a.ob;null!=a&&(e=a.Hi);if(null!=e){e=e.rm(c.x,c.y);if(0==e)return 4;if(1==e)return 1}else return-1;return 0};b.gO=function(d,
c,e,k){if(0==(k&1073741839))return 64;var l=b.VM(d,c);if(0<l)return l;e*=e;for(l=d.Da();l.Ya();){var f=l.Ta;if(!d.Qb(f)){var g=d.Ka(f),f=d.wa(f);if(0==g)continue;if(a.b.sc(d.Aa(f),c)<=e||1<g&&a.b.sc(d.Aa(f+g-1),c)<=e)return 8}if(8!=k)for(;l.Ca();)if(g=l.ba(),g=g.gc(g.oe(c,!1)),a.b.sc(g,c)<=e)return 0!=(k&1073741828)?1073741824:1}return 0!=(k&1073741828)?4:64};b.rE=function(d,c){var e=new a.h;c.s(e);return b.cO(d,e)};b.cO=function(a,c){a=b.eq(a,c);return 0<a?a:0};b.eq=function(a,c){a=a.ob;if(null!=
a)a=a.Hi;else return-1;if(null!=a){a=a.Sn(c);if(0==a)return 4;if(1==a)return 1}else return-1;return 0};b.tE=function(d,c){var e=new a.h;c.s(e);e=b.eq(d,e);return 0<e?e:0};b.tv=function(d,c){var e=new a.h;c.s(e);e=b.eq(d,e);return 0<e?e:-1==e&&(e=new a.h,d.s(e),e=b.eq(c,e),0<e)?b.se(e):0};b.kO=function(a,c){a=b.tv(a,c);return 0<a?a:0};b.mE=function(a,c,e){c=c.w();return b.PN(a,c,e)};b.PN=function(d,c,e){d=a.gd.fe(d,c,e);if(0==d)return 4;if(1==d)return 1;if(2==d)return 8;throw a.f.ya();};b.iE=function(d,
c){var e=new a.h;c.s(e);return b.MN(d,e)};b.MN=function(a,c){a=b.eq(a,c);return 0<a?a:0};b.kE=function(a,c){a=b.tv(a,c);return 0<a?a:0};b.pE=function(a,c){a=b.tv(a,c);return 0<a?a:0};b.VN=function(a,c){a=b.tv(a,c);return 0<a?a:0};b.iX=function(d,c){var e=d.G(),b=c.G(),l;if(a.T.gh(e)&&(l=d.ob,null!=l&&(l=l.Hi,null!=l))){if(33==b){var f=c.w();l=l.rm(f.x,f.y)}else f=new a.h,c.s(f),l=l.Sn(f);if(1==l)return 1;if(0==l)return 4}if(a.T.gh(b)&&(l=c.ob,null!=l&&(l=l.Hi,null!=l))){33==e?(e=d.w(),l=l.rm(e.x,
e.y)):(e=new a.h,d.s(e),l=l.Sn(e));if(1==l)return 2;if(0==l)return 4}return 0};b.se=function(a){0!=(a&1)&&(a=a&-2|2);0!=(a&2)&&(a=a&-3|1);return a};return b}();a.lN=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.G=function(){return 15};d.prototype.V=function(c,e,d,b,l){return c instanceof a.T?(c=new a.hd(c),e=new a.hd(e),this.V(c,e,d,b,l).next()):void 0===l?new a.JD(c,e,d,b,-1):new a.JD(c,
e,d,b,l)};d.prototype.qo=function(c,e,d){if(!this.vv(c))return!1;e=a.ma.ah(e,c,!1);var b=c.Hj(d);return b=b||c.Wu(e,d)};d.prototype.vv=function(c){return a.wy.az(c)};d.$=null;return d}(a.ef);a.sk=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e,b,l){this.nt=null==c;this.Ba=-1;this.he=d;this.Rg=e;this.sf=c.next();this.Zj=this.sf.G();this.lc=b;this.ej=l;if(-1!=this.ej&&(0>=this.ej||7<this.ej))throw a.f.F("bad dimension mask");}b.prototype.next=function(){if(this.nt)return null;var a;if(null!=
this.nx){a=this.nx.next();if(null!=a)return a;this.nx=null}for(;null!=(a=this.he.next());){this.Ba=this.he.Ha();if(-1==this.ej)return a=this.Ma(a);this.nx=this.JU(a);return a=this.nx.next()}return null};b.prototype.Ha=function(){return this.Ba};b.prototype.Ma=function(d){var c=this.nL(d);if(null!=c)return c;var c=a.ma.Yv(this.sf,d),e=a.ma.be(this.Rg,c,!0),c=new a.h;this.sf.s(c);var b=new a.h;d.s(b);c.O(2*e,2*e);c.Ma(b);c.O(100*e,100*e);e=a.me.clip(this.sf,c,0,0);d=a.me.clip(d,c,0,0);return a.Dg.mw(d,
e,this.Rg,this.lc)};b.prototype.IJ=function(d,c,e){var b=0;if(0!=(c&1))null==e[0]&&(e[0]=new a.Ed(d)),b++;else for(var l=0;l<e.length-1;l++)e[l]=e[l+1];if(0!=(c&2))null==e[b]&&(e[b]=new a.Ua(d)),b++;else for(l=b;l<e.length-1;l++)e[l]=e[l+1];if(0!=(c&4))null==e[b]&&(e[b]=new a.Ia(d)),b++;else for(l=b;l<e.length-1;l++)e[l]=e[l+1];if(3!=b){d=[];for(l=0;l<b;l++)d[l]=e[l];return new a.hd(d)}return new a.hd(e)};b.prototype.JU=function(d){var c=this.nL(d);if(null!=c){var e=[null,null,null];e[c.tb()]=c;return this.IJ(d.description,
this.ej,e)}c=a.ma.Yv(this.sf,d);e=a.ma.be(this.Rg,c,!0);c=new a.h;this.sf.s(c);c.O(2*e,2*e);var b=new a.h;d.s(b);c.Ma(b);c.O(100*e,100*e);e=a.me.clip(this.sf,c,0,0);c=a.me.clip(d,c,0,0);e=a.Dg.uA(c,e,this.Rg,this.lc);return this.IJ(d.description,this.ej,e)};b.prototype.nL=function(d){var c=a.ma.Yv(d,this.sf),e=a.ma.be(this.Rg,c,!1),c=d.G(),k=d.u(),l=this.sf.u(),l=k||l;if(!l){l=new a.h;d.s(l);var f=new a.h;this.sf.s(f);f.O(2*e,2*e);l=!l.Yb(f)}if(!l)if(f=a.lN.iX(this.sf,d),4==f)l=!0;else{if(0!=(f&2))return this.sf;
if(0!=(f&1))return d}if(l)return e=a.T.lf(c),l=a.T.lf(this.Zj),e<l?b.$(d,k):e>l?this.cK():0==e?550==c&&33==this.Zj?this.cK():b.$(d,k):b.$(d,k);if((-1==this.ej||4==this.ej)&&197==c&&197==this.Zj)return e=this.sf,c=new a.h,d.s(c),k=new a.h,e.s(k),c.Ma(k),e=new a.ci,d.copyTo(e),e.Gp(c),e;if(197==c&&0==a.T.lf(this.Zj)||197==this.Zj&&0==a.T.lf(c))return k=197==c?d:this.sf,d=197==c?this.sf:d,c=new a.h,k.s(c),a.me.clip(d,c,e,0);if(0==a.T.lf(c)&&0<a.T.lf(this.Zj)||0<a.T.lf(c)&&0==a.T.lf(this.Zj)){e=a.ma.ah(this.Rg,
d,!1);if(550==c||33==c)return a.Dg.LH(d,this.sf,e);if(550==this.Zj||33==this.Zj)return a.Dg.LH(this.sf,d,e);throw a.f.ya();}return-1!=this.ej&&2!=this.ej||1607!=c||1736!=this.Zj?-1!=this.ej&&2!=this.ej||1736!=c||1607!=this.Zj?null:this.kL(this.sf,d):this.kL(d,this.sf)};b.prototype.kL=function(d,c){var e=d,b=c,l=a.ma.ah(this.Rg,c,!1),f=new a.h;b.s(f);var g=new a.h;e.s(g);g.O(2*l,2*l);f.Ma(g);f.O(10*l,10*l);var e=d=a.me.clip(d,f,0,0),g=new a.ia(0),h=-1,m=b.ob;if(null!=m){var n=m.Hi;if(null!=n){h=0;
g.yb(e.D()+e.aa());for(var p=new a.h,t=e.Da();t.Ya();)for(;t.Ca();){t.ba().s(p);var u=n.Sn(p);1==u?g.add(1):0==u?g.add(0):(g.add(-1),h++)}}}5<c.D()&&(b=c=a.me.clip(c,f,0,0),m=b.ob);0>h&&(h=e.hA());f=e.D()+b.D();if(h*b.D()>Math.log(f)*f*4)return null;f=null;h=b.Da();null!=m&&null!=m.Mb&&(f=m.Mb);null==f&&20<b.D()&&(f=a.ma.zF(b));b=d.Ja();m=null;n=e.Da();p=[0,0,0,0,0,0,0,0,0];t=new a.Sd(0);u=new a.Cg;d=-1;for(var q=0,y=0,z=0<g.size,x=-1;n.Ya();){var x=n.Ta,A=0;d=-1;for(q=0;n.Ca();){var w=z?a.J.truncate(g.get(y)):
-1;y++;var C=n.ba();if(0>w){if(null!=f)for(null==m?m=f.nT(C,l):m.Xn(C,l),w=m.next();-1!=w;w=m.next()){h.Tb(f.ja(w));for(var w=h.ba(),D=C.Ma(w,null,p,null,l),w=0;w<D;w++)t.add(p[w])}else for(h.yj();h.Ya();)for(;h.Ca();)for(w=h.ba(),D=C.Ma(w,null,p,null,l),w=0;w<D;w++)t.add(p[w]);if(0<t.size){t.Gd(0,t.size,function(a,c){return a-c});var F=0;t.add(1);for(var D=-1,w=0,E=t.size;w<E;w++){var B=t.get(w);if(B!=F){var I=!1;0!=F||1!=B?(C.yh(F,B,u),F=u.get()):(F=C,I=!0);if(2<=A){b.As(e,x,d,q,3==A);if(1!=this.dF(c,
F.ec(),l)&&1!=this.eF(c,F,l))return null;b.dc(F,!1);A=1;q=0}else switch(D=this.eF(c,F,l),D){case 1:I?2>A?(d=n.Db()-e.wa(x),q=1,A=0==A?3:2):q++:(b.dc(F,0==A),A=1);break;case 0:A=0;d=-1;q=0;break;default:return null}F=B}}}else{w=this.dF(c,C.ec(),l);if(0>w)return null;1==w?(2>A&&(d=n.Db()-e.wa(x),A=0==A?3:2),q++):(d=-1,q=0)}t.clear(!1)}else 0!=w&&1==w&&(0==A?(A=3,d=n.Db()-e.wa(x)):1==A?(A=2,d=n.Db()-e.wa(x)):q++)}2<=A&&(b.As(e,x,d,q,3==A),d=-1)}return b};b.prototype.dF=function(d,c,e){return a.ff.ln(d,
c,e)};b.prototype.eF=function(d,c,e){var b=c.ec();c=c.Cc();var l=a.ff.ln(d,b,e),f=a.ff.ln(d,c,e);if(1==l&&0==f||0==l&&1==f)return-1;if(0==l||0==f)return 0;if(1==l||1==f)return 1;l=new a.b;l.add(b,c);l.scale(.5);d=a.ff.ln(d,l,e);return 0==d?0:1==d?1:-1};b.$=function(a,c){return c?a:a.Ja()};b.prototype.cK=function(){null==this.JI&&(this.JI=this.sf.Ja());return this.JI};b.prototype.Re=function(){return!0};return b}();a.JD=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}
K(d,b);d.prototype.G=function(){return 28};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d,b,l,f,g){return c instanceof a.T?(c=new a.hd(c),this.V(c,e,d,b,l,f,g).next()):new a.mN(c,e,d,b,l,f,g)};d.$=null;return d}(a.ef);a.KD=b})(y||(y={}));(function(a){var b=function(){function b(a,c,e,b,l,f,g){this.Ba=-1;this.he=a;this.ek=c;this.Qa=e;this.jj=b;this.hB=l;this.FI=f;this.je=g}b.prototype.next=function(){var a=this.he.next();return null!=a?(this.Ba=this.he.Ha(),this.$M(a)):
null};b.prototype.Ha=function(){return this.Ba};b.prototype.$M=function(d){var c;c=0>=this.FI?a.ma.ah(this.ek,d,!1):this.FI;return a.SL.V(d,this.Qa,this.jj,this.hB,c,this.je)};b.prototype.Re=function(){return!0};return b}();a.mN=b})(y||(y={}));(function(a){(function(a){a[a.clipToDomainOnly=1]="clipToDomainOnly";a[a.clipWithHorizon=2]="clipWithHorizon";a[a.foldAndClipWithHorizon=3]="foldAndClipWithHorizon"})(a.Up||(a.Up={}));var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=
function(){return 0};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d){return c instanceof a.T?(c=new a.hd(c),this.V(c,e,d).next()):new a.nN(c,e,d)};d.prototype.transform=function(c,e,d,b){return a.ko.transform(c,e,d,b,!0)};d.prototype.iL=function(c,e,d){return a.ko.iL(c,e,d)};d.prototype.Cu=function(c,e,d,b){return a.ko.Cu(c,e,d,b)};d.prototype.VY=function(c,e,d,b){return a.ko.fs(c,e,d,b)};d.prototype.hL=function(c,e,d,b){return a.ko.hL(c,e,d,b)};d.$=null;return d}(a.ef);
a.ns=b})(y||(y={}));(function(a){var b=function(){function b(a,c,e){this.Ba=-1;this.he=a;this.JV=c;this.je=e}b.prototype.next=function(){var d=this.he.next();return null!=d?(this.Ba=this.he.Ha(),a.ko.Xg(d,this.JV,this.je)):null};b.prototype.Ha=function(){return this.Ba};b.prototype.Re=function(){return!0};return b}();a.nN=b})(y||(y={}));(function(a){var b=function(){function d(){}d.prototype.reset=function(){this.Lh=this.Zk=-1;this.pt=this.Zq=!1};d.prototype.rS=function(a,e,d){for(a.Tb(e,d);a.Ca();){var c=
a.ba(),c=c.Rb();if(0!=c)return a.Db()}for(a.Tb(e,d);a.nA();)if(c=a.Li(),c=c.Rb(),0!=c)return a.Db();return-1};d.prototype.sS=function(a,e){for(a.Tb(e,-1);a.nA();)if(0!=a.Li().Rb())return a.Db();return-1};d.prototype.qS=function(a,e){a.Tb(e,-1);for(a.ba();a.Ca();)if(0!=a.ba().Rb())return a.Db();return-1};d.prototype.pS=function(c,e,d,b){this.Zk=this.rS(e,d,b);if(-1!=this.Zk){e.Tb(this.Zk,-1);var k=e.ba(),l=k.gc(k.oe(c,!1));d=a.b.sc(l,c);b=new a.b;b.L(l);b.sub(k.ec());l=new a.b;l.L(c);l.sub(k.ec());
this.Zq=0>b.Ui(l);this.Lh=this.qS(e,this.Zk);if(-1!=this.Lh){e.Tb(this.Lh,-1);var k=e.ba(),f=k.oe(c,!1),f=k.gc(f),g=a.b.sc(f,c);g>d?this.Lh=-1:(b.L(f),b.sub(k.ec()),l.L(c),l.sub(k.ec()),this.pt=0>b.Ui(l))}-1==this.Lh&&(this.Lh=this.sS(e,this.Zk),-1!=this.Lh&&(e.Tb(this.Lh,-1),k=e.ba(),f=k.oe(c,!1),f=k.gc(f),g=a.b.sc(f,c),g>d?this.Lh=-1:(b.L(f),b.sub(k.ec()),l.L(c),l.sub(k.ec()),this.pt=0>b.Ui(l),c=this.Zk,this.Zk=this.Lh,this.Lh=c,c=this.Zq,this.Zq=this.pt,this.pt=c)))}};d.prototype.cQ=function(a,
e,d,b,l){d=d.Da();this.pS(a,d,b,l);if(-1!=this.Zk&&-1==this.Lh)return this.Zq;if(-1!=this.Zk&&-1!=this.Lh){if(this.Zq==this.pt)return this.Zq;d.Tb(this.Zk,-1);a=d.ba().Eg(1);d.Tb(this.Lh,-1);e=d.ba().Eg(0);return 0<=a.Ui(e)?!0:!1}return e};return d}(),l=function(d){function c(){d.apply(this,arguments)}K(c,d);c.local=function(){null===c.$&&(c.$=new c);return c.$};c.prototype.G=function(){return 3};c.prototype.Yz=function(c,d,b,l){void 0===l&&(l=!1);if(c.u())return new a.Nm;d=d.w();var e=c,k=c.G();
197==k&&(e=new a.Ia,e.jd(c,!1),k=1736);switch(k){case 33:return this.EJ(e,d);case 550:return this.qJ(e,d);case 1607:case 1736:return this.YV(e,d,b,l);default:throw a.f.X("not implemented");}};c.prototype.Zz=function(c,d){if(c.u())return new a.Nm;d=d.w();var e=c,b=c.G();197==b&&(e=new a.Ia,e.jd(c,!1),b=1736);switch(b){case 33:return this.EJ(e,d);case 550:case 1607:case 1736:return this.qJ(e,d);default:throw a.f.X("not implemented");}};c.prototype.$z=function(c,d,b,l){if(0>l)throw a.f.F();if(c.u())return[];
d=d.w();var e=c,k=c.G();197==k&&(e=new a.Ia,e.jd(c,!1),k=1736);switch(k){case 33:return this.DW(e,d,b,l);case 550:case 1607:case 1736:return this.aW(e,d,b,l);default:throw a.f.X("not implemented");}};c.prototype.YV=function(c,d,l,f){if(1736==c.G()&&l&&(l=new a.h,c.s(l),l=a.ma.be(null,l,!1),0!=(f?a.gd.fe(c,d,0):a.gd.fe(c,d,l)))){var e=new a.Nm(d,0,0);f&&e.MK(!0);return e}for(var k=c.Da(),e=new a.b,g=l=-1,r=1.7976931348623157E308,h=0;k.Ya();)for(;k.Ca();){var v=k.ba(),v=v.gc(v.oe(d,!1)),m=a.b.sc(v,
d);m<r?(h=1,e=v,l=k.Db(),g=k.Ta,r=m):m==r&&h++}e=new a.Nm(e,l,Math.sqrt(r));f&&(k.Tb(l,g),v=k.ba(),f=0>a.b.zp(d,v.ec(),v.Cc()),1<h&&(h=new b,h.reset(),f=h.cQ(d,f,c,l,g)),e.MK(f));return e};c.prototype.EJ=function(c,d){c=c.w();d=a.b.Cb(c,d);return new a.Nm(c,0,d)};c.prototype.qJ=function(c,d){var e=c.Pa(0);c=c.D();for(var b=0,k=0,l=0,f=1.7976931348623157E308,g=0;g<c;g++){var h=new a.b;e.fc(2*g,h);var m=a.b.sc(h,d);m<f&&(k=h.x,l=h.y,b=g,f=m)}e=new a.Nm;e.Ky(k,l,b,Math.sqrt(f));return e};c.prototype.DW=
function(c,d,b,l){if(0==l)return b=[];b*=b;c=c.w();d=a.b.sc(c,d);d<=b?(b=[],l=new a.Nm,l.Ky(c.x,c.y,0,Math.sqrt(d)),b[0]=l):b=[];return b};c.prototype.aW=function(c,d,b,l){if(0==l)return l=[];var e=c.Pa(0),k=c.D();c=[];var f=0;b*=b;for(var g=0;g<k;g++){var r=e.read(2*g),h=e.read(2*g+1),v=d.x-r,m=d.y-h,v=v*v+m*m;v<=b&&(m=new a.Nm,m.Ky(r,h,g,Math.sqrt(v)),f++,c.push(m))}d=c.length;c.sort(function(a,c){return a.Qa<c.Qa?-1:a.Qa==c.Qa?0:1});if(l>=d)return c.slice(0);c.length=l;return c.slice(0)};c.$=null;
return c}(a.ef);a.ry=l})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 4};d.prototype.V=function(c,e,d,b,l){return a.Om.XB(c,e,d,b,l)};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.vv=function(c){return a.Fu.bz(c)};d.prototype.qo=function(c,e,d){return a.Fu.SE(c,e,d)};d.$=null;return d}(a.ef);a.oN=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 33};
d.prototype.V=function(c,e,d,b,l){return 1073741824===c?!a.Fd.YB(e,d,b,4,l):a.Fd.YB(e,d,b,c,l)};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.vv=function(c){return a.Fu.bz(c)};d.prototype.qo=function(c,e,d){return a.Fu.SE(c,e,d)};d.$=null;return d}(a.ef);a.Gj=b})(y||(y={}));(function(a){var b=function(){function b(d,c,e,b){this.je=b;this.qV=e;this.Ba=-1;if(null==d)throw a.f.F();this.$k=d;this.ek=c}b.prototype.next=function(){var a;return null!=(a=this.$k.next())?(this.Ba=this.$k.Ha(),
this.BC(a)):null};b.prototype.Ha=function(){return this.Ba};b.prototype.BC=function(d){if(null==d)throw a.f.F();return a.sy.SK(d,this.ek,this.qV,this.je)};b.prototype.Re=function(){return!0};return b}();a.pN=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 26};d.prototype.V=function(c,e,d,b){return c instanceof a.T?(c=new a.hd(c),this.V(c,e,d,b).next()):new a.pN(c,e,d,b)};d.prototype.Vq=function(c,e,d,b,l){return 0<(void 0!==
b?a.sy.Vq(c,e,d,b,l):a.sy.Vq(c,e,!1,null,d))};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.$=null;return d}(a.ef);a.Lm=b})(y||(y={}));(function(a){var b=function(){function a(){this.mr=0}a.prototype.gY=function(a){this.mr&=-2;this.mr|=a?1:0};a.prototype.gn=function(){return 0!=(this.mr&1)};a.prototype.gH=function(){return this.gn()?0:1};return a}();a.JZ=b;var f=function(){return function(){}}(),d=function(){return function(a,c,e,d){this.x=a;this.y=c;this.$i=e;this.mn=d}}(),c=function(){function a(a){this.bf=
a}a.prototype.compare=function(a,c,e){a=a.ja(e);c=this.bf.Nf.read(2*c);a=this.bf.Nf.read(2*a);c-=a;return 0>c?-1:0<c?1:0};return a}(),e=function(){function a(a){this.bf=a}a.prototype.compare=function(a,c,e){c=this.bf.ib[c];a=this.bf.ib[a.ja(e)];var d=c.gn(),b=a.gn();e=c.Le.pf(this.bf.wp,0);var k=a.Le.pf(this.bf.wp,0);e==k&&(e=Math.min(d?c.Le.ra:c.Le.oa,b?a.Le.ra:a.Le.oa),d=.5*(e-this.bf.wp)+this.bf.wp,d==this.bf.wp&&(d=e),e=c.Le.pf(d,0),k=a.Le.pf(d,0));return e<k?-1:e>k?1:0};return a}(),k=function(){function c(c,
e){this.PJ=new a.b;this.parent=c;this.XT=e}c.prototype.gs=function(a,c,e){var d=this.parent,b=this.XT;e.Gd(a,c,function(a,c){return d.ki(a,c,b)})};c.prototype.Qq=function(a){a=this.parent.Gi.get(a);this.parent.Nf.fc(2*(a>>1),this.PJ);return this.PJ.y+(0!=(a&1)?this.parent.gk:-this.parent.gk)};return c}(),l=function(){function l(c,e,d,b,k){this.yI=c.description;this.Y=c;this.mh=e;this.gk=a.ma.ah(this.mh,c,!1);this.pp=a.ma.ah(this.mh,c,!0);this.cB=d;this.oV=this.yI.Ea;this.ib=[];this.cp=[];this.Hh=
new a.Xp;this.hb=new a.tk;this.ve=new a.$d;this.jI=this.Ul=k}l.prototype.zA=function(){this.jI=!0;return(!a.T.Ic(this.Y.G())||this.MF()&&this.LF(!1))&&this.oQ()?a.T.Ic(this.Y.G())?this.rQ()?1607==this.Y.G()?this.tQ()?2:0:this.uQ()?this.vQ():0:0:2:0};l.prototype.HC=function(c,e){var d=this.Nf.read(2*c);c=this.Nf.read(2*c+1);var b=this.Nf.read(2*e);e=this.Nf.read(2*e+1);var k=!a.Hu.ow(d,c,b,e,this.gk*this.gk);return k?k:0==this.Y.tb()?!1:d==b&&c==e};l.prototype.MF=function(){for(var c=this.Y,e=c.$f?
3:2,d=0,b=c.aa();d<b;d++)if(c.Ka(d)<e)return this.ve=new a.$d(1,d,0),!1;return!0};l.prototype.LF=function(c){for(var e=this.Y,d=e.Da(),b=e.hasAttribute(1),e=b?a.ma.EF(this.mh,e,!1):0;d.Ya();)for(;d.Ca();){var k=d.ba();if(!(k.Rb()>this.gk)){if(c&&b){var l=k.ct(1,0),k=k.ct(1,0);if(Math.abs(k-l)>e)continue}this.ve=new a.$d(2,d.Db(),-1);return!1}}return!0};l.prototype.oQ=function(){var e=this.Y,d=null;a.T.Ic(this.Y.G())&&(d=this.Y);var b=(this.jI||this.Ul)&&null!=d,l=e.D();this.Nf=e.Pa(0);this.Gi=new a.ia(0);
this.Gi.yb(2*l);this.Fi=new a.ia(0);this.Fi.yb(2*l);b&&(null==this.im&&(this.im=new a.ia(0)),this.im.yb(l));for(var f=e=0;f<l;f++)if(this.Gi.add(2*f),this.Gi.add(2*f+1),this.Fi.add(2*f),this.Fi.add(2*f+1),b){for(;f>=d.Gc(e);)e++;this.im.add(e)}(new a.Gu).sort(this.Fi,0,2*l,new k(this,b));this.hb.clear();this.hb.Ep(new c(this));this.hb.Qe(l);d=0;for(l*=2;d<l;d++)if(b=this.Fi.get(d),e=this.Gi.get(b),b=e>>1,0==(e&1)){e=this.hb.addElement(b,-1);f=this.hb.Ve(e);if(-1!=f&&!this.HC(this.hb.ja(f),b))return this.ve=
new a.$d(3,b,this.hb.ja(f)),!1;var g=this.hb.nb(e);if(-1!=g&&!this.HC(this.hb.ja(g),b))return this.ve=new a.$d(3,b,this.hb.ja(g)),!1}else if(e=this.hb.search(b,-1),f=this.hb.Ve(e),g=this.hb.nb(e),this.hb.Ld(e,-1),-1!=f&&-1!=g&&!this.HC(this.hb.ja(f),this.hb.ja(g)))return this.ve=new a.$d(3,this.hb.ja(f),this.hb.ja(g)),!1;return!0};l.prototype.rQ=function(){return 10>this.Y.D()?this.pQ():this.qQ()};l.prototype.qQ=function(){var c=new a.fd;c.Jb(this.Y);var e=new a.$d;return a.Ju.sJ(!1,c,this.gk,e,this.je)?
(e.lm=c.Za(e.lm),e.mm=c.Za(e.mm),this.ve.ls(e),!1):!0};l.prototype.pQ=function(){for(var c=this.Y,e=c.Da(),c=c.Da();e.Ya();)for(;e.Ca();){var d=e.ba();if(!e.Io()||!e.SU()){c.xX(e);do for(;c.Ca();){var b=c.ba(),b=d.xs(b,this.gk,!0);if(0!=b)return this.ve=new a.$d(2==b?5:4,e.Db(),c.Db()),!1}while(c.Ya())}}return!0};l.prototype.uQ=function(){var c=this.Y;this.ib.length=0;this.cp.length=0;this.ug=c.Da();this.ug.iC();var e=new a.ia(0);e.yb(10);for(var d=NaN,b=0,k=0,c=2*c.D();k<c;k++){var l=this.Fi.get(k),
l=this.Gi.get(l);if(0==(l&1)){var l=l>>1,f=this.Nf.read(2*l),g=this.Nf.read(2*l+1);if(0!=e.size&&(f!=d||g!=b)){if(!this.JJ(e))return!1;null!=e&&e.clear(!1)}e.add(l);d=f;b=g}}return this.JJ(e)?!0:!1};l.prototype.tQ=function(){for(var c=this.Y,e=Array(c.aa()),d=0,b=c.aa();d<b;d++)e[d]=c.Eo(d);var b=new f,k,l,g,r=new a.b,d=this.Fi.get(0),d=this.Gi.get(d),h=d>>1;this.Nf.fc(2*h,r);d=this.im.get(h);k=e[d];l=c.wa(d);g=c.Gc(d)-1;b.Il=h==l||h==g;b.Ty=this.Ul?!k&&b.Il:b.Il;b.$i=d;b.x=r.x;b.y=r.y;b.mn=h;for(var v=
new f,m=1,n=this.Fi.size;m<n;m++)if(d=this.Fi.get(m),d=this.Gi.get(d),0==(d&1)){h=d>>1;this.Nf.fc(2*h,r);d=this.im.get(h);d!=b.$i&&(k=e[d],l=c.wa(d),g=c.Gc(d)-1);var p,t=h==l||h==g;p=this.Ul?!k&&b.Il:b.Il;v.x=r.x;v.y=r.y;v.$i=d;v.mn=h;v.Ty=p;v.Il=t;if(v.x==b.x&&v.y==b.y)if(this.Ul){if(!v.Ty||!b.Ty)if(v.$i!=b.$i||!v.Il&&!b.Il)return this.ve=new a.$d(8,v.mn,b.mn),!1}else if(!v.Il||!b.Il)return this.ve=new a.$d(5,v.mn,b.mn),!1;d=b;b=v;v=d}return!0};l.prototype.OF=function(){for(var c=this.Y,e=[],b=-1,
k=!1,l=0,f=c.aa();l<f;l++)c.qw(l)&&(k=!1,b++,l<f-1&&(c.qw(l+1)||(k=!0))),e[l]=k?b:-1;var k=new a.b,l=this.Fi.get(0),l=this.Gi.get(l),g=l>>1;this.Nf.fc(2*g,k);for(var l=this.im.get(g),b=new d(k.x,k.y,l,g,e[l]),c=[],r=1,f=this.Fi.size;r<f;r++)if(l=this.Fi.get(r),l=this.Gi.get(l),0==(l&1)){g=l>>1;this.Nf.fc(2*g,k);l=this.im.get(g);l=new d(k.x,k.y,l,g,e[l]);if(l.x==b.x&&l.y==b.y){if(l.$i==b.$i)return this.ve=new a.$d(9,l.mn,b.mn),!1;0<=e[l.$i]&&e[l.$i]==e[b.$i]&&(0!=c.length&&c[c.length-1]==b||c.push(b),
c.push(l))}b=l}if(0==c.length)return!0;l=new a.Xp(!0);a.J.Mv(e,-1);k=-1;r=new a.b;r.$c();b=0;for(f=c.length;b<f;b++){g=c[b];if(g.x!=r.x||g.y!=r.y)k=l.mi(0),r.x=g.x,r.y=g.y;var h=e[g.$i];-1==h&&(h=l.mi(2),e[g.$i]=h);l.addElement(h,k);l.addElement(k,h)}f=new a.ia(0);f.yb(10);for(b=l.Ge;-1!=b;b=l.aA(b))if(c=l.ZG(b),0==(c&1)&&0!=(c&2)){c=-1;f.add(b);for(f.add(-1);0<f.size;){k=f.Fc();f.Pf();r=f.Fc();f.Pf();g=l.ZG(r);if(0!=(g&1)){c=0==(g&2)?k:r;break}l.ZX(r,g|1);for(g=l.xc(r);-1!=g;g=l.nb(g))h=l.getData(g),
h!=k&&(f.add(h),f.add(r))}if(-1!=c){l=-1;b=0;for(f=e.length;b<f;b++)if(e[b]==c){l=b;break}this.ve=new a.$d(10,l,-1);return!1}}return!0};l.prototype.vQ=function(){var c=this.Y;if(0>=c.hf())return this.ve=new a.$d(6,1==c.aa()?1:-1,-1),0;if(1==c.aa())return this.Ul&&!this.OF()?0:2;this.hp=a.ia.yd(c.aa(),0);this.oB=a.ia.yd(c.aa(),-1);for(var d=-1,b=0,k=0,l=c.aa();k<l;k++){var f=c.Tm(k);this.hp.write(k,0>f?0:256);if(0<f)d=k,b=f;else{if(0==f)return this.ve=new a.$d(6,k,-1),0;if(0>d||b<Math.abs(f))if(this.ve=
new a.$d(7,k,-1),this.Ul)return 0;this.oB.write(k,d)}}this.Vt=c.aa();this.Cn=new a.ia(0);this.Cn.yb(10);l=c.D();this.wp=NaN;c=new a.ia(0);c.yb(10);this.Ir=a.ia.yd(l,-1);this.tx=a.ia.yd(l,-1);null!=this.Xj?this.Xj.clear(!1):this.Xj=new a.ia(0);this.Xj.yb(10);this.hb.clear();this.hb.Ep(new e(this));d=0;for(l*=2;0<this.Vt&&d<l;d++)if(b=this.Fi.get(d),b=this.Gi.get(b),0==(b&1)){b>>=1;k=this.Nf.read(2*b+1);if(k!=this.wp&&0!=c.size){if(!this.iu(c))return 0;null!=c&&c.clear(!1)}c.add(b);this.wp=k}return 0<
this.Vt&&!this.iu(c)?0:this.Ul?0==this.ve.Ii&&this.OF()?2:0:0==this.ve.Ii?2:1};l.prototype.JJ=function(c){if(1==c.size)return!0;for(var e=0,d=c.size;e<d;e++){var b=c.get(e);this.ug.Tb(b);var k=this.ug.Li();this.ib.push(this.Fv(k,b,this.ug.Ta,!0));this.ug.ba();k=this.ug.ba();this.ib.push(this.Fv(k,b,this.ug.Ta,!1))}var l=this;this.ib.sort(function(a,c){return l.TR(a,c)});b=this.Hh.Ge;-1==b&&(b=this.Hh.mi(0));this.Hh.Wn(this.ib.length);e=0;for(d=this.ib.length;e<d;e++)this.Hh.addElement(b,e);for(var e=
!0,f=d=-1;e;){e=!1;k=this.Hh.xc(b);if(-1==k)break;for(var g=this.Hh.nb(k);-1!=g;){d=this.Hh.getData(k);f=this.Hh.getData(g);d=this.ib[d].up;f=this.ib[f].up;if(d==f)if(e=!0,this.Hh.kd(b,k),k=this.Hh.Ve(g),g=this.Hh.kd(b,g),-1==g||-1==k)break;else continue;k=g;g=this.Hh.nb(k)}}e=this.Hh.$s(b);this.Hh.PF(b);if(0<e)return this.ve=new a.$d(5,d,f),!1;e=0;for(d=c.size;e<d;e++)this.UB(this.ib[e]);this.ib.length=0;return!0};l.prototype.iu=function(c){for(var e=0,d=c.size;e<d;e++){var b=c.get(e),k=this.Ir.read(b);
if(-1!=k){var l=this.hb.ja(k);this.Xj.add(l);this.hb.Ld(k,-1);this.UB(this.ib[l]);this.ib[l]=null;this.Ir.write(b,-1)}k=this.tx.read(b);-1!=k&&(l=this.hb.ja(k),this.Xj.add(l),this.hb.Ld(k,-1),this.UB(this.ib[l]),this.ib[l]=null,this.tx.write(b,-1))}e=0;for(d=c.size;e<d;e++){b=c.get(e);this.ug.Tb(b);k=this.ug.Li();if(k.ra>k.oa){var f=this.ug.Db(),g=this.Fv(k,b,this.ug.Ta,!0);0<this.Xj.size?(l=this.Xj.Fc(),this.Xj.Pf(),this.ib[l]=g):(l=this.ib.length,this.ib.push(g));k=this.hb.addElement(l,-1);-1==
this.Ir.read(f)?this.Ir.write(f,k):this.tx.write(f,k);0==(this.hp.read(this.ug.Ta)&3)&&this.Cn.add(k)}this.ug.ba();k=this.ug.ba();k.ra<k.oa&&(f=this.ug.Ik(),g=this.Fv(k,b,this.ug.Ta,!1),0<this.Xj.size?(l=this.Xj.Fc(),this.Xj.Pf(),this.ib[l]=g):(l=this.ib.length,this.ib.push(g)),k=this.hb.addElement(l,-1),-1==this.Ir.read(f)?this.Ir.write(f,k):this.tx.write(f,k),0==(this.hp.read(this.ug.Ta)&3)&&this.Cn.add(k))}e=0;for(d=this.Cn.size;e<d&&0<this.Vt;e++)if(k=this.Cn.get(e),0==(this.hp.read(this.ib[this.hb.ja(k)].nB)&
3)){c=-1;for(var b=this.hb.Ve(k),r=k,g=null,l=-1,h=0;-1!=b;){l=this.hb.ja(b);g=this.ib[l];l=g.nB;h=this.hp.read(l);if(0!=(h&3))break;r=b;b=this.hb.Ve(b)}-1==b?(f=1,b=r):(c=1==(h&3)?l:this.oB.read(l),f=0!=g.gH()?0:1,b=this.hb.nb(b));do{l=this.hb.ja(b);g=this.ib[l];l=g.nB;r=this.hp.read(l);if(0==(r&3)){if(f!=g.gH())return this.ve=new a.$d(6,l,-1),!1;h=0==f||g.gn()?2:1;r=r&252|h;this.hp.write(l,h);if(2==h&&0==this.ve.Ii&&this.oB.read(l)!=c&&(this.ve=new a.$d(7,l,-1),this.Ul))return!1;this.Vt--;if(0==
this.Vt)return!0}1==(r&3)&&(c=l);r=b;b=this.hb.nb(b);f=0!=f?0:1}while(r!=k)}null!=this.Cn?this.Cn.clear(!1):this.Cn=new a.ia(0);return!0};l.prototype.Fv=function(c,e,d,b){if(322==c.G())c=this.qR(c);else throw a.f.ya();c.up=e;c.nB=d;c.mr=0;c.gY(b);return c};l.prototype.qR=function(c){var e;0<this.cp.length?(e=this.cp[this.cp.length-1],--this.cp.length,c.copyTo(e.Le)):(e=new b,e.Le=a.bE.ne(c));return e};l.prototype.UB=function(a){322==a.Le.G()&&this.cp.push(a)};l.prototype.ZV=function(){for(var c=this.Y.D(),
e=new a.ia(0),d=0;d<c;d++)e.add(d);var b=this;e.Gd(0,c,function(a,c){return b.Bv(a,c)});for(d=1;d<c;d++)if(0==this.Bv(e.get(d-1),e.get(d)))return this.ve=new a.$d(3,e.get(d-1),e.get(d)),0;return 2};l.prototype.IW=function(){return this.MF()?this.LF(!0)?2:0:0};l.prototype.GW=function(){return this.zA()};l.prototype.$V=function(){for(var c=this.Y.D(),e=new a.ia(0),d=0;d<c;d++)e.add(d);var b=this;e.Gd(0,c,function(a,c){return b.RQ(a,c)});var k=Array(c);a.J.Mv(k,!1);k[e.get(0)]=!0;for(d=1;d<c;d++){var l=
e.get(d-1),f=e.get(d);0==this.Bv(l,f)?k[f]=!1:k[f]=!0}for(var e=this.Y.Ja(),l=this.Y,f=0,g=1,d=0;d<c;d++)k[d]?g=d+1:(f<g&&e.Jd(l,f,g),f=d+1);f<g&&e.Jd(l,f,g);e.Zg(2,this.pp);return e};l.prototype.JW=function(){var c=this.Y,e=c.Da(),d=c.Da(),b=this.Y.Ja(),k=this.Y,l=c.hasAttribute(1),f=l?a.ma.EF(this.mh,c,!0):0,g=new a.ia(0),r=new a.ia(0);g.yb(a.J.truncate(c.D()/2+1));for(r.yb(a.J.truncate(c.D()/2+1));e.Ya();)if(d.Ya(),!(2>c.Ka(e.Ta))){d.zX();for(var h,v,m=!0;e.Ca();){var n=e.ba(),p=d.Li();if(e.Db()>
d.Db())break;m&&(g.add(e.Db()),r.add(d.Ik()),m=!1);v=g.Fc();var t=e.Ik();if(1<t-v){var u=new a.b;u.zc(c.Aa(v),c.Aa(t));h=u.length()}else h=n.Rb();v=r.Fc();t=d.Db();1<t-v?(u=new a.b,u.zc(c.Aa(v),c.Aa(t)),v=u.length()):v=p.Rb();h>this.pp?g.add(e.Ik()):l&&(h=c.Yc(1,g.Fc(),0),n=n.Ns(1,0),Math.abs(n-h)>f&&g.add(e.Ik()));v>this.pp?r.add(d.Db()):l&&(h=c.Yc(1,r.Fc(),0),n=p.Ns(1,0),Math.abs(n-h)>f&&r.add(d.Db()))}g.Fc()<r.Fc()?g.size>r.size?g.Pf():r.Pf():(g.Fc()!=r.Fc()&&r.Pf(),r.Pf());if(2<=r.size+g.size){m=
new a.Wa;p=0;for(n=g.size;p<n;p++)k.Ae(g.get(p),m),0==p?b.Rf(m):b.lineTo(m);for(p=r.size-1;0<p;p--)k.Ae(r.get(p),m),b.lineTo(m);k.Qb(e.Ta)?b.sq():0<r.size&&(k.Ae(r.get(0),m),b.lineTo(m))}null!=g&&g.clear(!1);null!=r&&r.clear(!1)}b.Zg(2,this.pp);return b};l.prototype.HW=function(){return this.wY()};l.prototype.wY=function(){if(1736==this.Y.G()&&1==this.Y.xo())return a.Dg.ol(this.Y,this.pp,!0,!1,this.je);this.gj=new a.fd;this.gj.Jb(this.Y);0!=this.gj.ud&&(1!=this.cB&&a.rk.V(this.gj,this.pp,this.je,
!0),1736==this.Y.G()&&a.lo.V(this.gj,this.gj.rd,this.cB,!1,this.je));this.Y=this.gj.Se(this.gj.rd);1736==this.Y.G()&&(this.Y.Al(),this.Y.Hp(0));this.Y.Zg(2,this.pp);return this.Y};l.uc=function(c,e,d){if(c.u())return 1;var b=c.G();if(33==b)return 1;if(197==b)return d=new a.h,c.s(d),d.fh(a.ma.ah(e,c,!1))?0:1;if(a.T.Oc(b))throw a.f.ya();if(!a.T.gh(b))throw a.f.ya();var b=a.ma.ah(e,c,!1),k=c.Kk(b);d=d?-1:k;if(-1!=d)return d;1==d&&(b=0);d=(new l(c,e,d,0,!1)).zA();c.Zg(d,b);return d};l.Vq=function(c,e,
d,b,k){null!=b&&(b.Ii=0,b.lm=-1,b.mm=-1);if(c.u())return 1;var f=c.G();if(33==f)return 1;var g=a.ma.ah(e,c,!1);if(197==f)return e=new a.h,c.s(e),e.fh(g)?(null!=b&&(b.Ii=2,b.lm=-1,b.mm=-1),0):1;if(a.T.Oc(f))return g=new a.Ua(c.description),g.dc(c,!0),l.Vq(g,e,d,b,k);k=c.Kk(g);d=d?-1:k;if(-1!=d)return d;e=new l(c,e,d,0,!1);if(550==f)d=e.ZV();else if(1607==f)d=e.IW();else if(1736==f)d=e.GW();else throw a.f.ya();c.Zg(d,g);null!=b&&0==d&&b.ls(e.ve);return d};l.Bb=function(c,e,d,b,k){null!=b&&(b.Ii=0,b.lm=
-1,b.mm=-1);if(c.u())return 1;var f=c.G();if(33==f)return 1;var g=a.ma.ah(e,c,!1);if(197==f)return e=new a.h,c.s(e),e.fh(g)?(null!=b&&(b.Ii=2,b.lm=-1,b.mm=-1),0):1;if(a.T.Oc(f))return f=new a.Ua(c.description),f.dc(c,!0),l.Vq(f,e,d,b,k);c=new l(c,e,-1,0,!0);if(550==f||1607==f||1736==f)e=c.zA();else throw a.f.ya();null!=b&&b.ls(c.ve);return e};l.SK=function(c,e,d,b){if(c.u())return c;var k=c.G();if(33==k)return c;var f=a.ma.ah(e,c,!1);if(197==k)return e=new a.h,c.s(e),e.fh(f)?c.Ja():c;if(a.T.Oc(k))return k=
new a.Ua(c.description),k.dc(c,!0),l.SK(k,e,d,b);b=c.Kk(f);d=d?-1:b;if(2==d)return c;c=new l(c,e,d,0,!1);if(550==k)c=c.$V();else if(1607==k)c=c.JW();else if(1736==k)c=c.HW();else throw a.f.ya();return c};l.CC=function(c,e,d,b){if(c.u())return c;var k=c.G();if(33==k)return c;var f=a.ma.ah(e,c,!1);if(197==k)return e=new a.h,c.s(e),e.fh(f)?c.Ja():c;if(a.T.Oc(k))return f=new a.Ua(c.description),f.dc(c,!0),l.CC(f,e,d,b);if(!a.T.gh(k))throw a.f.X("OGC simplify is not implemented for this geometry type "+
k);return a.Dg.CC(c,f,!1,b)};l.prototype.ki=function(c,e,d){if(c==e)return 0;c=this.Gi.get(c);var b=this.Gi.get(e);e=c>>1;var k=b>>1,l=new a.b,f=new a.b;this.Nf.fc(2*e,l);l.y+=0!=(c&1)?this.gk:-this.gk;this.Nf.fc(2*k,f);f.y+=0!=(b&1)?this.gk:-this.gk;c=l.compare(f);return 0==c&&d?(d=this.im.get(e)-this.im.get(k),0>d?-1:0<d?1:0):c};l.prototype.Bv=function(c,e){if(c==e)return 0;var d=this.Y,b=d.Aa(c),k=d.Aa(e);if(b.x<k.x)return-1;if(b.x>k.x)return 1;if(b.y<k.y)return-1;if(b.y>k.y)return 1;for(b=1;b<
this.oV;b++)for(var k=this.yI.zd(b),l=a.na.Xa(k),f=0;f<l;f++){var g=d.Yc(k,c,f),r=d.Yc(k,e,f);if(g<r)return-1;if(g>r)return 1}return 0};l.prototype.RQ=function(a,c){var e=this.Bv(a,c);return 0==e?a<c?-1:1:e};l.prototype.TR=function(a,c){if(a===c)return 0;var e=a.Le.Eg(a.gn()?1:0);a.gn()&&e.Kr();a=c.Le.Eg(c.gn()?1:0);c.gn()&&a.Kr();c=e.Zu();var d=a.Zu();return d==c?(c=e.Ui(a),Math.abs(c)<=8.881784197001252E-16*(Math.abs(a.x*e.y)+Math.abs(a.y*e.x))&&(c--,c++),0>c?1:0<c?-1:0):c<d?-1:1};return l}();a.sy=
l})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 30};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.prototype.V=function(c,e,d,b){return c instanceof a.T?(c=new a.hd(c),e=new a.hd(e),this.V(c,e,d,b).next()):new a.qN(c,e,d,b)};d.Pp=function(c,e,b,l){var k=c.tb(),f=e.tb();if(c.u()&&e.u())return k>f?c:e;if(c.u())return e;if(e.u())return c;var g=new a.h,r=new a.h,h=new a.h;c.s(g);e.s(r);h.I(g);h.Nb(r);g=a.ma.be(b,h,!1);
r=c.G();h=e.G();return 33==r&&33==h?d.mO(c,e,g):r!=h?0<k||0<f?k>f?c:e:550==r?d.WJ(c,e,g):d.WJ(e,c,g):a.Dg.Pp(c,e,b,l)};d.mO=function(c,e,d){d=d*Math.sqrt(2)*1.00001;d*=d;var b=c.w(),k=e.w(),l=new a.Ed(c.description);a.b.sc(b,k)>d&&(l.add(c),l.add(e));return l};d.WJ=function(c,e,d){var b=c.Pa(0),k=c.D(),l=e.w(),f=c.Ja();d=d*Math.sqrt(2)*1.00001;var g=new a.h;c.s(g);g.O(d,d);if(g.contains(l)){d*=d;for(var g=!1,h=[],m=0;m<k;m++)h[m]=!1;for(m=0;m<k;m++){var n=b.read(2*m),p=b.read(2*m+1),n=n-l.x,p=p-l.y;
n*n+p*p<=d&&(g=!0,h[m]=!0)}if(g)for(m=0;m<k;m++)h[m]||f.Jd(c,m,m+1);else f.Jd(c,0,k),f.add(e)}else f.Jd(c,0,k),f.add(e);return f};d.$=null;return d}(a.ef);a.ty=b})(y||(y={}));(function(a){var b=function(){function b(a,c,e,b){this.nt=null==c;this.Ba=-1;this.he=a;this.Rg=e;this.KV=c.next();this.lc=b}b.prototype.next=function(){if(this.nt)return null;var d;return null!=(d=this.he.next())?(this.Ba=this.he.Ha(),a.ty.Pp(d,this.KV,this.Rg,this.lc)):null};b.prototype.Ha=function(){return this.Ba};b.prototype.Re=
function(){return!0};return b}();a.qN=b})(y||(y={}));(function(a){var b=function(){function a(){}a.prototype.jw=function(){this.Gz=null;this.fy=-1;this.qL=!1};return a}(),l=function(){function a(){this.Ds=0;this.Pj=[]}a.prototype.oP=function(a){this.Ds+=a.fy;this.Pj.push(a)};a.prototype.KW=function(){this.Ds-=this.Pj[this.Pj.length-1].fy;--this.Pj.length};a.prototype.Sy=function(){return this.Pj[this.Pj.length-1]};a.prototype.Eb=function(a){return a===this};return a}(),d=function(){function c(a,c,
d){this.Ba=-1;this.Pc=!1;this.OI=[!1,!1,!1,!1];this.ir=[0,0,0,0];this.RA=!1;this.bl=-1;this.Xq=0;this.Ro=-1;this.rp=[];this.he=a;this.Rg=c;this.lc=d}c.uc=function(a){var c=[],e;for(e in a)c.push(Number(e));c.sort(function(a,c){return a-c});return c};c.prototype.rH=function(e){var d=this.rp[e],b=c.uc(d)[0],l=d[b],f=l.Sy().Gz,l=l.Sy().qL;delete d[b];l&&(f=a.Lm.local().V(f,this.Rg,!1,this.lc),0==e&&33==f.G()&&(e=new a.Ed(f.description),f.u()||e.add(f),f=e));return f};c.prototype.next=function(){if(this.Pc&&
this.Ro==this.bl)return null;for(;!this.bL(););if(-1==this.bl)return null;if(this.RA){for(this.Ro++;;){if(this.Ro>this.bl||0>this.Ro)throw a.f.ya();if(this.OI[this.Ro])break}this.Ba++;return this.rH(this.Ro)}this.Ba=0;this.Ro=this.bl;return this.rH(this.bl)};c.prototype.Ha=function(){return this.Ba};c.prototype.bL=function(){if(this.Pc)return!0;var c=null;null!=this.he&&(c=this.he.next(),null==c&&(this.Pc=!0,this.he=null));if(null!=c){var d=c.tb();this.OI[d]=!0;d>=this.bl&&!this.RA&&(this.bF(d,!1,
c),d>this.bl&&!this.RA&&this.vX(d))}if(0<this.Xq)for(d=0;d<=this.bl;d++)for(;1<this.ir[d];)if(c=this.HQ(d),0!=c.length)c=a.Dg.QR(c,this.Rg,this.lc),this.bF(d,!0,c);else break;return this.Pc};c.prototype.HQ=function(a){for(var e=[],d=[],b=this.rp[a],l=c.uc(b),f=0;f<l.length;f++){var g=l[f],h=b[g];if(this.Pc||1E4<h.Ds&&1<h.Pj.length){this.ir[a]-=h.Pj.length;for(this.Xq-=h.Pj.length;0<h.Pj.length;)e.push(h.Sy().Gz),h.KW();d.push(g)}}for(f=0;f<d.length;f++)delete b[d[f]];return e};c.prototype.vX=function(a){for(var c=
0;c<a;c++)this.rp[c]=[],this.Xq-=this.ir[c],this.ir[c]=0};c.prototype.bF=function(a,d,f){var e=new b;e.jw();e.Gz=f;f=c.Mg(f);e.fy=f;f=c.We(f);if(a+1>this.rp.length)for(var k=0,g=Math.max(2,a+1);k<g;k++)this.rp.push([]);k=this.rp[a][f];void 0===k&&(k=new l,this.rp[a][f]=k);e.qL=d;k.oP(e);this.ir[a]++;this.Xq++;this.bl=Math.max(this.bl,a)};c.We=function(c){return 0<c?a.J.truncate(Math.log(c)/Math.log(4)+.5):0};c.Mg=function(c){var e=c.G();if(a.T.gh(e))return c.D();if(33==e)return 1;if(197==e)return 4;
if(a.T.Oc(e))return 2;throw a.f.ya();};c.prototype.Re=function(){return this.bL()};return c}();a.sN=d})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments)}K(d,b);d.prototype.G=function(){return 1};d.prototype.V=function(c,e,d,b){return void 0===b?new a.sN(c,e,d):this.ZR(c,e,d,b)};d.prototype.ZR=function(c,e,d,b){c=new a.hd([c,e]);return this.V(c,d,b).next()};d.local=function(){null===d.$&&(d.$=new d);return d.$};d.$=null;return d}(a.ef);a.ei=b})(y||(y={}));(function(a){var b;
(function(a){a[a.nextPath=0]="nextPath";a[a.nextSegment=1]="nextSegment";a[a.iterate=2]="iterate"})(b||(b={}));b=function(){function b(d,c,e,b){this.Nt=new a.h;this.DV=d;this.EV=c;this.ar=b;this.ip=-1;this.Vl=!1;var k=d.ob;null!=k&&(k=b?k.np:k.Mb,null!=k&&(this.Pc=!1,this.ta=e,this.Mb=k,this.kx=this.Mb.mf(),this.br=this.Vl=!0,this.Zb=0,b?this.ip=c.aa():this.Cd=c.Da()));this.Vl||(k=c.ob,null!=k&&(k=b?k.np:k.Mb,null!=k&&(this.Pc=!1,this.ta=e,this.Mb=k,this.kx=this.Mb.mf(),this.Vl=!0,this.br=!1,this.Zb=
0,b?this.ip=d.aa():this.Cd=d.Da())));this.Vl||(this.Ci=b?a.ma.cT(d,c,e,1<=d.Kk(0),1<=c.Kk(0)):a.ma.bT(d,c,e))}b.prototype.next=function(){if(this.Vl){if(this.Pc)return!1;for(var d=!0;d;)switch(this.Zb){case 0:d=this.gW();break;case 1:d=this.hW();break;case 2:d=this.BA();break;default:throw a.f.X("internal error");}return this.Pc?!1:!0}return null==this.Ci?!1:this.Ci.next()};b.prototype.Ql=function(){return this.Vl?this.br?this.Mb.ja(this.At):this.ar?this.ip:this.Cd.Db():this.Ci.Ql(this.Ci.sg)};b.prototype.Ml=
function(){return this.Vl?this.br?this.ar?this.ip:this.Cd.Db():this.Mb.ja(this.At):this.Ci.Ml(this.Ci.bg)};b.prototype.dA=function(){if(!this.ar)throw a.f.X("internal error");return this.Vl?this.br?this.Mb.QG(this.At):this.Nt:this.Ci.dA(this.Ci.sg)};b.prototype.Hz=function(){if(!this.ar)throw a.f.X("internal error");return this.Vl?this.br?this.Nt:this.Mb.QG(this.At):this.Ci.Hz(this.Ci.bg)};b.prototype.gW=function(){if(!this.ar){if(!this.Cd.Ya())return this.Pc=!0,!1;this.Zb=1;return!0}if(-1==--this.ip)return this.Pc=
!0,!1;this.br?this.EV.ik(this.ip,this.Nt):this.DV.ik(this.ip,this.Nt);this.kx.Ni(this.Nt,this.ta);this.Zb=2;return!0};b.prototype.hW=function(){if(!this.Cd.Ca())return this.Zb=0,!0;var a=this.Cd.ba();this.kx.Xn(a,this.ta);this.Zb=2;return!0};b.prototype.BA=function(){this.At=this.kx.next();return-1==this.At?(this.Zb=this.ar?0:1,!0):!1};return b}();a.Mm=b})(y||(y={}));(function(a){a=a.AN||(a.AN={});a[a.enumClosed=1]="enumClosed";a[a.enumHasNonlinearSegments=2]="enumHasNonlinearSegments";a[a.enumOGCStartPolygon=
4]="enumOGCStartPolygon";a[a.enumCalcMask=4]="enumCalcMask"})(y||(y={}));(function(a){var b=function(){function b(){}b.Cb=function(d,c,e,k,f,l,g,h,m){var r=[0,0,0],v=[0,0,0],n=[0,0,0],p=[0,0,0,0],t=new a.ea(0),G=new a.ea(0),u=new a.ea(0);if(null!=g||null!=h||null!=m)if(a.l.Qi(c))a.vh.Cb(d,e,k,f,l,g,h,m);else{f=a.C.da(f);e=a.C.da(e);var q=a.C.da(f-e);if(a.l.W(k,l)&&(a.l.W(e,f)||a.l.W(a.l.K(k),1.570796326794897)))null!=g&&(g.j=0),null!=h&&(h.j=0),null!=m&&(m.j=0);else{if(a.l.W(k,-l)){if(a.l.W(a.l.K(k),
1.570796326794897)){null!=g&&(g.j=2*a.C.Yg(d,c));null!=h&&(h.j=0<k?a.C.da(3.141592653589793-a.C.da(f)):a.C.da(f));null!=m&&(m.j=0<k?a.C.da(f):a.C.da(3.141592653589793-a.C.da(f)));return}a.l.W(a.l.K(q),3.141592653589793)&&(null!=g&&(g.j=2*a.C.Yg(d,c)),null!=h&&(h.j=0),null!=m&&(m.j=0))}else{if(a.l.W(a.l.K(k),1.570796326794897)||a.l.W(a.l.K(l),1.570796326794897)){a.yl.Cb(d,c,e,k,f,l,g,h,m);return}if(a.l.W(e,f)||a.l.W(a.l.K(q),3.141592653589793)){a.yl.Cb(d,c,e,k,f,l,g,h,m);return}if(a.l.wd(k)){a.yl.Cb(d,
c,e,k,f,l,g,h,m);return}}var y=Math.sqrt(1-c);f=a.C.da(f-e);e=0;a.C.Ck(1,c,k,e,0,t,G,u);r[0]=t.j;r[1]=G.j;r[2]=u.j;a.C.Ck(1,c,l,f,0,t,G,u);v[0]=t.j;v[1]=G.j;v[2]=u.j;n[0]=0;n[1]=0;n[2]=-1*c*a.C.n(1,c,k)*Math.sin(k);0>f?a.C.Nr(n,v,r,p,0):a.C.Nr(n,r,v,p,0);for(var G=[0,0,0],u=[0,0,0],z=[0,0,0],r=[0,0,0],t=[0,0,0],x=Math.acos(p[2]/1),J=1-c,A=Math.tan(x),w=1+A*A/J,L=2*n[2]*A/J,A=Math.sqrt(L*L-4*w*(n[2]*n[2]/J-1)),w=2*w,J=(-L+A)/w,L=(-L-A)/w,A=Math.tan(x),w=A*J+n[2],x=(J+L)/2,n=(w+(A*L+n[2]))/2,A=a.C.Sp(J-
x,w-n),J=n/y*1.570796326794897,L=0;100>L;L++){w=a.C.Cm(c,J);w=w*w/Math.cos(J)*(Math.sin(J)-n*w/(1*(1-c)));if(a.l.wd(w))break;J-=w}var n=a.C.n(1,c,J)*Math.cos(J),n=Math.sqrt((n-x)*(n+x)),A=1-A/n,A=A*(2-A),w=a.C.fo(G),x=a.C.fo(u),J=a.C.fo(z),C=a.C.Du(z,G),L=a.C.Du(z,u);a.C.ey(z,G,r);a.C.ey(z,u,t);G=Math.acos(C/(J*w));u=Math.acos(L/(J*x));u*=a.l.Ab(1,a.C.Du(r,t));if(1.570796326794897<=a.l.K(G)&&1.570796326794897<=a.l.K(u)||3.141592653589793<a.l.K(G-u))G=(3.141592653589793-a.l.K(G))*a.l.Ab(1,G),u=(3.141592653589793-
a.l.K(u))*a.l.Ab(1,u);r=a.C.hk(A,u);t=a.C.q(n,A,a.C.hk(A,G));r=a.C.q(n,A,r);r=a.l.K(r-t)*d;G=new a.ea(0);u=new a.ea(0);z=p[1]/1;z*=-a.l.Ab(1,q);t=Math.acos(z)*a.l.Ab(1,q);b.Uf(d,c,e,k,r,t,G,u);a.l.W(f,G.j)&&a.l.W(l,u.j)||(A=a.C.Sp(a.C.da(f-G.j),l-u.j),b.Uf(d,c,e,k,r,a.C.da(t+3.141592653589793),G,u),w=a.C.Sp(a.C.da(f-G.j),l-u.j),w<A&&(t=a.C.da(t+3.141592653589793)));G=[0,0,0,0];u=[0,0,0,0];n=[0,0,0];A=[0,0,0];d=[0,0,0];e=[0,0,0];k=[0,0,0];z=[0,0,0];n[0]=0;n[1]=0;n[2]=y;A[0]=0;A[1]=0;A[2]=0;a.C.Nr(A,
n,v,G,0);a.l.wd(l)?(d[0]=v[0],d[1]=v[1],d[2]=1,e[0]=1*Math.cos(f)-1*Math.sin(f),e[1]=1*Math.sin(f)+1*Math.cos(f)):(c=a.C.n(1,c,l)*Math.cos(l),d[0]=0,d[1]=0,v[2]+=Math.tan(1.570796326794897-a.l.K(l))*c*a.l.Ab(1,l),e[0]=c*Math.cos(f)-c*Math.sin(f),e[1]=c*Math.sin(f)+c*Math.cos(f));e[2]=v[2];a.C.Nr(v,e,d,u,1);a.C.ey(u,G,k);a.C.ey(u,p,z);z=a.C.Du(k,z)/(a.C.fo(k)*a.C.fo(z));z*=a.l.Ab(1,q);f=Math.acos(z)*-a.l.Ab(1,q);0<t&&0<f?f=a.C.da(f+3.141592653589793):0>t&&0>f&&(f=a.C.da(f+3.141592653589793));null!=
g&&(g.j=r);null!=h&&(h.j=t);null!=m&&(m.j=f)}}};b.Uf=function(d,c,e,b,f,l,g,h){var k=[0,0,0],r=[0,0,0],v=[0,0,0],m=[0,0,0],n=[0,0,0],p=[0,0,0],t=[0,0,0],G=[0,0,0,0],u=new a.ea(0),q=new a.ea(0),y=new a.ea(0),z=new a.ea(0),x=new a.ea(0),A=new a.ea(0);if(null!=g&&null!=h)if(a.l.Qi(c))a.vh.Uf(d,e,b,f,l,g,h);else if(a.l.wd(f))null!=g&&(g.j=e),null!=h&&(h.j=b);else if(l=a.C.da(l),0>f&&(f=a.l.K(f),l=a.C.da(l+3.141592653589793)),e=a.C.da(e),b=a.C.da(b),1.570796326794897<a.l.K(b)&&(e=a.C.da(e+3.141592653589793),
b=a.l.Ab(3.141592653589793,b)-b),a.l.W(a.l.K(b),1.570796326794897)||a.l.wd(b)||a.l.wd(l)||a.l.W(a.l.K(l),3.141592653589793))a.yl.Uf(d,c,e,b,f,l,g,h);else{var J=Math.sqrt(1-c);d=f/d;a.C.Ck(1,c,b,0,0,z,x,A);k[0]=z.j;k[1]=x.j;k[2]=x.j;t[0]=0;t[1]=0;t[2]=-1*c*a.C.n(1,c,b)*Math.sin(b);z=a.C.n(1,c,b);x=a.C.da(1.570796326794897-l);A=Math.sin(x);f=Math.cos(b);b=Math.sin(b);n[0]=z*f-b*A;n[1]=Math.cos(x);n[2]=(1-c)*z*b+f*A;0>l?a.C.Nr(t,n,k,G,0):a.C.Nr(t,k,n,G,0);k=Math.acos(G[2]/1);G=Math.atan2(-G[1],-G[0]);
b=1-c;n=Math.tan(k);x=1+n*n/b;z=2*t[2]*n/b;n=Math.sqrt(z*z-4*x*(t[2]*t[2]/b-1));x*=2;b=(-z+n)/x;z=(-z-n)/x;n=Math.tan(k);x=n*b+t[2];k=(b+z)/2;t=(x+(n*z+t[2]))/2;n=a.C.Sp(b-k,x-t);J=t/J*1.570796326794897;for(b=0;100>b;b++){z=a.C.Cm(c,J);z=z*z/Math.cos(J)*(Math.sin(J)-t*z/(1*(1-c)));if(a.l.wd(z))break;J-=z}J=a.C.n(1,c,J)*Math.cos(J);J=Math.sqrt((J-k)*(J+k));t=1-n/J;t*=2-t;p=Math.acos(a.C.Du(p,r)/(a.C.fo(p)*a.C.fo(r)));p*=a.l.Ab(1,r[0]);l=(a.C.q(J,t,a.C.hk(t,p))+d*a.l.Ab(1,l))/a.C.Yg(J,t);l=a.C.da(1.570796326794897*
l);l=a.C.xp(t,l);a.C.n(J,t,l);n=a.C.da(G+e);e=Math.cos(n);l=Math.sin(n);v[0]=m[0]*e+m[1]*-l;v[1]=m[0]*l+m[1]*e;v[2]=m[2];a.C.iQ(c,v[0],v[1],v[2],y,q,u);null!=g&&(g.j=q.j);null!=h&&(h.j=y.j)}};return b}();a.UD=b})(y||(y={}));(function(a){var b=function(){function c(c){this.ab=null;this.lu=new a.b;this.mu=new a.b;this.a=c}c.prototype.compare=function(a,c,e){this.a.Nc(c,this.lu);this.a.Nc(a.ja(e),this.mu);return this.lu.compare(this.mu)};return c}(),f=function(){function c(c){this.cg=new a.b;this.fl=
new a.b;this.a=c}c.prototype.Yh=function(a){this.cg.L(a)};c.prototype.compare=function(a,c){this.a.Nc(a.ja(c),this.fl);return this.cg.compare(this.fl)};return c}(),d=function(a){function c(c){a.call(this,c.a,c.ta,!1);this.bb=c}K(c,a);c.prototype.compare=function(a,c,e){if(this.Ng)return-1;var d=this.bb.ge.yo(this.bb.ri(c));a=a.ja(e);var b=this.bb.ge.yo(this.bb.ri(a));this.sn=e;return this.WF(c,d,a,b)};return c}(a.eE),c=function(a){function c(c){a.call(this,c.a,c.ta);this.bb=c}K(c,a);c.prototype.compare=
function(a,c){if(this.Ng)return-1;a=this.bb.ge.yo(this.bb.ri(a.ja(c)));this.sn=c;return this.XF(c,a)};return c}(a.$N),e=function(){function e(){this.Tc=this.Hf=this.Xo=this.ge=this.Gh=this.Pd=this.ib=this.a=null;this.ih=!1;this.Th=this.Bn=this.Fe=this.hl=this.Ih=this.cl=this.gg=this.we=null;this.Vh=this.yr=this.zB=this.ta=0;this.Jw=this.Lo=!1;this.mp=new a.b;this.oj=new a.b;this.ib=new a.ad(8);this.Pd=new a.ad(5);this.Gh=new a.Ku;this.ge=new a.Ku;this.ih=!1;this.Th=new a.b;this.Th.ka(0,0);this.ta=
0;this.Vh=-1;this.Lo=!1;this.a=null;this.Hf=new a.tk;this.Tc=new a.tk;this.Ih=new a.ia(0);this.hl=new a.cE;this.gg=new a.ia(0);this.cl=new a.ia(0);this.Xo=new a.Wa}e.prototype.HY=function(c,e){var d=new a.Hd;d.wC();c.Xc(d);this.Xr(c);this.Lo=!1;this.ta=e;this.zB=e*e;e=this.FC();c.Xc(d);e||(this.kS(),e||this.FC());-1!=this.Vh&&(this.a.ke(this.Vh),this.Vh=-1);this.a=null;return this.Lo};e.prototype.LY=function(a,c){this.Xr(a);this.Lo=!1;this.ta=c;this.zB=c*c;this.ih=!1;this.FC();this.ih||(this.ih=1==
a.zq(c,!0,!1));-1!=this.Vh&&(this.a.ke(this.Vh),this.Vh=-1);this.a=null};e.prototype.Jg=function(a,c){return this.ib.S(a,0+c)};e.prototype.kC=function(a,c,e){this.ib.P(a,0+c,e)};e.prototype.ri=function(a){return this.ib.S(a,2)};e.prototype.TX=function(a,c){this.ib.P(a,2,c)};e.prototype.bH=function(a,c){return this.ib.S(a,3+c)};e.prototype.Jq=function(a){return this.ib.S(a,7)};e.prototype.um=function(a,c){this.ib.P(a,7,c)};e.prototype.Kq=function(a,c){return this.ib.S(a,3+this.Iq(a,c))};e.prototype.Yr=
function(a,c,e){this.ib.P(a,3+this.Iq(a,c),e)};e.prototype.FT=function(a,c){return this.ib.S(a,5+this.Iq(a,c))};e.prototype.$r=function(a,c,e){this.ib.P(a,5+this.Iq(a,c),e)};e.prototype.Ms=function(a){return this.Pd.S(a,0)};e.prototype.QX=function(a,c){this.Pd.P(a,0,c)};e.prototype.Lz=function(a){return this.Pd.S(a,4)};e.prototype.Ur=function(a,c){this.Pd.P(a,4,c)};e.prototype.Nl=function(a){return this.Pd.S(a,1)};e.prototype.bo=function(a,c){this.Pd.P(a,1,c)};e.prototype.Kz=function(a){return this.Pd.S(a,
3)};e.prototype.su=function(a,c){this.Pd.P(a,3,c)};e.prototype.Nn=function(a){var c=this.Pd.Pe(),e=this.Gh.mi();this.QX(c,e);-1!=a?(this.Gh.addElement(e,a),this.a.Va(a,this.Vh,c),this.Ur(c,this.a.Za(a))):this.Ur(c,-1);return c};e.prototype.CR=function(a){this.Pd.kd(a)};e.prototype.$E=function(a,c){this.Gh.addElement(this.Ms(a),c);this.a.Va(c,this.Vh,a)};e.prototype.bu=function(a){var c=this.ib.Pe(),e=this.ge.mi();this.TX(c,e);-1!=a&&this.ge.addElement(e,a);return c};e.prototype.aF=function(a,c){this.ge.addElement(this.ri(a),
c)};e.prototype.Iv=function(a){this.ib.kd(a);a=this.Ih.Nv(a);0<=a&&this.Ih.GJ(a)};e.prototype.Jj=function(c,e){if(-1==this.Jg(c,0))this.kC(c,0,e);else if(-1==this.Jg(c,1))this.kC(c,1,e);else throw a.f.ya();this.Qy(c,e)};e.prototype.Qy=function(a,c){var e=this.Nl(c);if(-1!=e){var d=this.Kq(e,c);this.$r(d,c,a);this.Yr(a,c,d);this.Yr(e,c,a);this.$r(a,c,e)}else this.$r(a,c,a),this.Yr(a,c,a),this.bo(c,a)};e.prototype.Iq=function(a,c){return this.Jg(a,0)==c?0:1};e.prototype.Mn=function(a,c){var e=this.Kz(c);
-1!=e&&(this.Hf.Ld(e,-1),this.su(c,-1));var d,e=this.Nl(c);if(-1!=e){var b=d=e,k;do{k=!1;var f=this.Iq(d,c),l=this.bH(d,f);if(this.Jg(d,f+1&1)==a){this.Jv(d);this.ge.zh(this.ri(d));this.Iv(d);if(d==l){e=-1;break}e==d&&(e=this.Nl(c),b=l,k=!0)}d=l}while(d!=b||k);if(-1!=e){do f=this.Iq(d,c),l=this.bH(d,f),this.kC(d,f,a),d=l;while(d!=b);d=this.Nl(a);-1!=d?(b=this.Kq(d,a),k=this.Kq(e,a),b==d?(this.bo(a,e),this.Qy(d,a),this.bo(a,d)):k==e&&this.Qy(e,a),this.Yr(e,a,b),this.$r(b,a,e),this.Yr(d,a,k),this.$r(k,
a,d)):this.bo(a,e)}}e=this.Ms(a);d=this.Ms(c);for(b=this.Gh.xc(d);-1!=b;b=this.Gh.nb(b))this.a.Va(this.Gh.ja(b),this.Vh,a);this.Gh.lz(e,d);this.CR(c)};e.prototype.SV=function(a,c){var e=this.Jg(a,0),d=this.Jg(a,1),b=this.Jg(c,0),k=this.Jg(c,1);this.ge.lz(this.ri(a),this.ri(c));c==this.Nl(e)&&this.bo(e,a);c==this.Nl(d)&&this.bo(d,a);this.Jv(c);this.Iv(c);e==b&&d==k||d==b&&e==k||(this.wo(e,this.mp),this.wo(b,this.oj),this.mp.ub(this.oj)?(e!=b&&this.Mn(e,b),d!=k&&this.Mn(d,k)):(d!=b&&this.Mn(d,b),e!=
k&&this.Mn(e,k)))};e.prototype.Jv=function(a){var c=this.Jg(a,1);this.kG(a,this.Jg(a,0));this.kG(a,c)};e.prototype.kG=function(a,c){var e=this.Kq(a,c),d=this.FT(a,c),b=this.Nl(c);e!=a?(this.Yr(d,c,e),this.$r(e,c,d),b==a&&this.bo(c,e)):this.bo(c,-1)};e.prototype.hF=function(a,c,e){var d=this.ge.xc(a),b=this.ge.ja(d);a=this.jf(b);var k=this.jf(this.a.U(b));this.a.as(b,c,e,!0);for(d=this.ge.nb(d);-1!=d;d=this.ge.nb(d)){var b=this.ge.ja(d),f=this.jf(b)==a;this.a.as(b,c,e,f)}d=c.Mq(e,0).ec();c=c.Mq(e,
c.Rl(e)-1).Cc();this.rL(a,d);this.rL(k,c)};e.prototype.dG=function(a,c,e){var d=this.ri(a),b=this.Jg(a,0),k=this.Jg(a,1),f=this.bu(-1);this.Ih.add(f);this.um(f,-3);this.gg.add(f);this.Jj(f,b);a=1;for(c=c.Rl(e);a<c;a++)e=this.Nn(-1),this.cl.add(e),this.gg.add(e),this.Jj(f,e),f=this.bu(-1),this.Ih.add(f),this.um(f,-3),this.gg.add(f),this.Jj(f,e);this.Jj(f,k);for(d=this.ge.xc(d);-1!=d;d=this.ge.nb(d))if(k=this.ge.ja(d),this.jf(k)==b){a=0;do 0<a&&(f=this.gg.get(a-1),this.$E(f,k),-1==this.Lz(f)&&this.Ur(f,
this.a.Za(k))),f=this.gg.get(a),a+=2,this.aF(f,k),k=this.a.U(k);while(a<this.gg.size)}else{a=this.gg.size-1;do a<this.gg.size-2&&(f=this.gg.get(a+1),this.$E(f,k),0>this.Lz(f)&&this.Ur(f,this.a.Za(k))),f=this.gg.get(a),a-=2,this.aF(f,k),k=this.a.U(k);while(0<=a)}this.gg.clear(!1)};e.prototype.jf=function(a){return this.a.Sa(a,this.Vh)};e.prototype.KJ=function(c,e,d){var b=this.Jg(e,0),k=new a.b;this.wo(b,k);var f=new a.b,l=this.Jg(e,1);this.wo(l,f);var g=d.Rl(c),r=d.Mq(c,0),h=new a.b;r.Oq(h);if(!k.ub(h)){if(!this.ih){var v=
k.compare(this.Th),h=h.compare(this.Th);0>v*h&&(this.ih=!0)}this.GG(b,this.gg);this.cl.add(b)}!this.ih&&1<g&&(v=k.compare(f),r=r.Cc(),k.compare(r)!=v||r.compare(f)!=v?this.ih=!0:0>r.compare(this.Th)&&(this.ih=!0));r=d.Mq(c,g-1);c=r.Cc();f.ub(c)||(this.ih||(v=f.compare(this.Th),h=c.compare(this.Th),0>v*h&&(this.ih=!0)),this.GG(l,this.gg),this.cl.add(l));this.gg.add(e);f=0;for(l=this.gg.size;f<l;f++)c=this.gg.get(f),d=this.Jq(c),a.ad.AA(d)&&(this.Tc.Ld(d,-1),this.um(c,-1)),c!=e&&-3!=this.Jq(c)&&(this.Ih.add(c),
this.um(c,-3));this.gg.clear(!1)};e.prototype.nQ=function(a,c){this.we.compare(this.Tc,this.Tc.ja(a),c);this.we.Ng&&(this.we.Fs(),this.xG(a,c))};e.prototype.xG=function(c,e){this.Lo=!0;c=this.Tc.ja(c);e=this.Tc.ja(e);var d,b;b=this.ge.yo(this.ri(c));var k=this.ge.yo(this.ri(e));d=this.a.ic(b);null==d&&(null==this.Fe&&(this.Fe=new a.Hb),this.a.pd(b,this.Fe),d=this.Fe);b=this.a.ic(k);null==b&&(null==this.Bn&&(this.Bn=new a.Hb),this.a.pd(k,this.Bn),b=this.Bn);this.hl.Ap(d);this.hl.Ap(b);this.hl.Ma(this.ta,
!0)&&(this.ih=!0);this.XK(c,e,-1,this.hl);this.hl.clear()};e.prototype.wS=function(c,e){this.Lo=!0;e=this.Tc.ja(e);var d,b=this.ge.yo(this.ri(e));d=this.a.ic(b);null==d&&(null==this.Fe&&(this.Fe=new a.Hb),this.a.pd(b,this.Fe),d=this.Fe);b=this.MG(c);this.hl.Ap(d);this.a.wj(b,this.Xo);this.hl.rA(this.ta,this.Xo,!0);this.XK(e,-1,c,this.hl);this.hl.clear()};e.prototype.rU=function(){if(0!=this.Ih.size)for(;0!=this.Ih.size;){if(this.Ih.size>Math.max(100,this.a.ud)){this.Ih.clear(!1);this.ih=!0;break}var a=
this.Ih.Fc();this.Ih.Pf();this.um(a,-1);-1!=this.OU(a)&&this.qU(a);this.Ko=!1}};e.prototype.qU=function(a){var c;this.Ko?(c=this.Tc.iv(this.ZI,this.VI,a,!0),this.Ko=!1):c=this.Tc.ZE(a);-1==c?this.SV(this.Tc.ja(this.Tc.PG()),a):(this.um(a,c),this.we.Ng&&(this.we.Fs(),this.xG(this.we.sn,c)))};e.prototype.OU=function(c){var e=this.Jg(c,0);c=this.Jg(c,1);this.wo(e,this.mp);this.wo(c,this.oj);if(a.b.sc(this.mp,this.oj)<=this.zB)return this.ih=!0,-1;var d=this.mp.compare(this.Th),b=this.oj.compare(this.Th);
return 0>=d&&0<b?c:0>=b&&0<d?e:-1};e.prototype.iS=function(){var c=new a.ia(0);c.yb(this.a.ud);for(var e=this.a.Pr(),d=e.next();-1!=d;d=e.next())-1!=this.a.Sa(d,this.Vh)&&c.add(d);this.a.Wx(c,c.size);this.jS(c)};e.prototype.jS=function(c){this.Hf.clear();this.Hf.Qe(c.size);this.Hf.Ep(new b(this.a));var e=new a.b;e.$c();for(var d=-1,k=new a.b,f=0,l=c.size;f<l;f++){var g=c.get(f);this.a.Nc(g,k);k.ub(e)?(g=this.a.Sa(g,this.Vh),this.Mn(d,g)):(d=this.jf(g),this.a.Nc(g,e),g=this.Hf.ro(g),this.su(d,g))}};
e.prototype.kS=function(){var c=new a.ia(0);c.yb(this.a.ud);for(var e=this.Hf.xc(-1);-1!=e;e=this.Hf.nb(e))c.add(this.Hf.ja(e));this.Hf.clear();this.a.Wx(c,c.size);for(var e=0,d=c.size;e<d;e++){var b=c.get(e),k=this.jf(b),b=this.Hf.ro(b);this.su(k,b)}};e.prototype.GG=function(c,e){var d=this.Nl(c);if(-1!=d){var b=d;do a.ad.AA(this.Jq(b))&&e.add(b),b=this.Kq(b,c);while(b!=d)}};e.prototype.rL=function(a,c){for(a=this.Gh.xc(this.Ms(a));-1!=a;a=this.Gh.nb(a))this.a.Qf(this.Gh.ja(a),c)};e.prototype.XK=
function(a,c,e,d){this.Jv(a);-1!=c&&this.Jv(c);this.KJ(0,a,d);-1!=c&&this.KJ(1,c,d);-1!=e&&(d.cg.w(this.mp),this.wo(e,this.oj),this.oj.ub(this.mp)||this.cl.add(e));e=0;for(var b=this.cl.size;e<b;e++){var k=this.cl.get(e),f=this.Kz(k);-1!=f&&(this.Hf.Ld(f,-1),this.su(k,-1))}e=this.ri(a);b=-1!=c?this.ri(c):-1;this.hF(e,d,0);-1!=c&&this.hF(b,d,1);this.dG(a,d,0);-1!=c&&this.dG(c,d,1);this.ge.zh(e);this.Iv(a);-1!=c&&(this.ge.zh(b),this.Iv(c));e=0;for(b=this.cl.size;e<b;e++)k=this.cl.get(e),k==this.yr&&
(this.Jw=!0),f=this.Kz(k),-1==f&&(f=this.Hf.ZE(this.MG(k)),-1==f?(a=this.jf(this.Hf.ja(this.Hf.PG())),this.Mn(a,k)):this.su(k,f));this.cl.clear(!1)};e.prototype.wo=function(a,c){this.a.oH(this.Lz(a),c)};e.prototype.MG=function(a){return this.Gh.yo(this.Ms(a))};e.prototype.FC=function(){this.Jw=!1;this.yr=-1;null==this.we&&(this.Tc.Cw=!1,this.we=new d(this),this.Tc.Oo=this.we);var e=new a.ia(0),b=null,k=null,l=0;this.VI=this.ZI=-1;this.Ko=!1;for(var g=this.Hf.xc(-1);-1!=g;){l++;this.Ko=!1;var h=this.Hf.ja(g);
this.yr=this.jf(h);this.a.Nc(h,this.Th);this.we.PK(this.Th.y,this.Th.x);var m,n=this.Nl(this.yr);m=-1==n;if(!m){h=n;do{var p=this.Jq(h);-1==p?(this.Ih.add(h),this.um(h,-3)):-3!=p&&e.add(p);h=this.Kq(h,this.yr)}while(h!=n)}if(0<e.size){this.Ko=1==e.size&&1==this.Ih.size;m=0;for(n=e.size;m<n;m++)h=this.Tc.ja(e.get(m)),this.um(h,-2);var t=-2,u=-2;m=0;for(n=e.size;m<n;m++){p=e.get(m);if(-2==t){var q=this.Tc.Ve(p);-1!=q?(h=this.Tc.ja(q),h=this.Jq(h),-2!=h&&(t=q)):t=-1}-2==u&&(p=this.Tc.nb(p),-1!=p?(h=
this.Tc.ja(p),h=this.Jq(h),-2!=h&&(u=p)):u=-1);if(-2!=t&&-2!=u)break}m=0;for(n=e.size;m<n;m++)p=e.get(m),h=this.Tc.ja(p),this.Tc.Ld(p,-1),this.um(h,-1);e.clear(!1);this.ZI=-1!=t?t:-1;this.VI=-1!=u?u:-1;-1!=t&&-1!=u?this.Ko||this.nQ(t,u):-1==t&&-1==u&&(this.Ko=!1)}else m&&(null==b&&(b=new c(this)),b.Yh(this.Th),this.Tc.kK(b),b.Ng&&(b.Fs(),this.wS(this.yr,b.sn)));this.rU();this.Jw?(this.Jw=!1,null==k&&(k=new f(this.a)),k.Yh(this.Th),g=this.Hf.kK(k)):g=this.Hf.nb(g)}return this.Lo};e.prototype.Xr=function(c){this.a=
c;this.Vh=this.a.Vd();this.ib.Qe(c.ud+32);this.Pd.Qe(c.ud);this.Gh.ou(c.ud);this.Gh.Wn(c.ud);this.ge.ou(c.ud+32);this.ge.Wn(c.ud+32);for(c=this.a.rd;-1!=c;c=this.a.Ue(c))if(a.T.Ic(this.a.hc(c)))for(g=this.a.Pb(c);-1!=g;g=this.a.Sb(g)){var e=this.a.Ka(g),d=this.a.cb(g),b=this.Nn(d),k=this.bu(d);this.Jj(k,b);h=this.a.U(d);d=0;for(e-=2;d<e;d++){var f=this.a.U(h),l=this.Nn(h);this.Jj(k,l);k=this.bu(h);this.Jj(k,l);h=f}this.a.Qb(g)?(l=this.Nn(h),this.Jj(k,l),k=this.bu(h),this.Jj(k,l),this.Jj(k,b)):(l=
this.Nn(h),this.Jj(k,l))}else for(var g=this.a.Pb(c);-1!=g;g=this.a.Sb(g))for(var h=this.a.cb(g),b=0,e=this.a.Ka(g);b<e;b++)this.Nn(h),h=this.a.U(h);this.iS()};return e}();a.VD=e})(y||(y={}));(function(a){var b=function(b){function d(c,e,k){b.call(this);if(void 0!==c)if(void 0!==k){this.description=a.ye.Ig();var f=new a.qd;f.I(c,e,k);this.AC(f)}else if(void 0!==e)this.description=a.ye.Ig(),this.rb(c,e);else if(c instanceof a.na)this.description=c;else if(c instanceof a.b)this.description=a.ye.Ig(),
this.rb(c);else if(c instanceof d)this.description=c.description,this.rb(c.Be(),c.nf()),null!==c.la&&(this.la=c.la.slice(0));else throw a.f.F();else this.description=a.ye.Ig()}K(d,b);d.prototype.w=function(c){if(void 0!==c){if(this.Hc())throw a.f.X("This operation should not be performed on an empty geometry.");c.ka(this.la[0],this.la[1])}else{if(this.Hc())throw a.f.X("This operation should not be performed on an empty geometry.");c=new a.b;c.ka(this.la[0],this.la[1]);return c}};d.prototype.rb=function(a,
e){"number"===typeof a?(this.Bc(),null==this.la&&this.nq(),this.la[0]=a,this.la[1]=e):(this.Bc(),this.rb(a.x,a.y))};d.prototype.kA=function(){if(this.Hc())throw a.f.X("This operation should not be performed on an empty geometry.");var c=new a.qd;c.x=this.la[0];c.y=this.la[1];this.description.tH()?c.z=this.la[2]:c.z=a.na.pe(1);return c};d.prototype.AC=function(c){this.Bc();var e=this.hasAttribute(1);e||a.na.OH(1,c.z)||(this.Ud(1),e=!0);null==this.la&&this.nq();this.la[0]=c.x;this.la[1]=c.y;e&&(this.la[2]=
c.z)};d.prototype.Be=function(){if(this.Hc())throw a.f.X("This operation should not be performed on an empty geometry.");return this.la[0]};d.prototype.zC=function(a){this.setAttribute(0,0,a)};d.prototype.nf=function(){if(this.Hc())throw a.f.X("This operation should not be performed on an empty geometry.");return this.la[1]};d.prototype.QK=function(a){this.setAttribute(0,1,a)};d.prototype.qH=function(){return this.Yc(1,0)};d.prototype.qY=function(a){this.setAttribute(1,0,a)};d.prototype.$G=function(){return this.Yc(2,
0)};d.prototype.aY=function(a){this.setAttribute(2,0,a)};d.prototype.yc=function(){return this.JG(3,0)};d.prototype.AK=function(a){this.setAttribute(3,0,a)};d.prototype.Yc=function(c,e){var d=this.description.mg(c);return 0<=d?this.la[this.description.wk(d)+e]:a.na.pe(c)};d.prototype.JG=function(c,e){var d=this.description.mg(c);return 0<=d?this.la[this.description.wk(d)+e]:a.na.pe(c)};d.prototype.setAttribute=function(a,e,d){this.Bc();var c=this.description.mg(a);0>c&&(this.Ud(a),c=this.description.mg(a));
null==this.la&&this.nq();this.la[this.description.wk(c)+e]=d};d.prototype.G=function(){return 33};d.prototype.tb=function(){return 0};d.prototype.Oa=function(){this.Bc();null!=this.la&&(this.la[0]=NaN,this.la[1]=NaN)};d.prototype.mo=function(c){if(null!=this.la){for(var e=a.ye.ux(c,this.description),d=[],b=0,f=0,l=c.Ea;f<l;f++){var g=c.zd(f),h=a.na.Xa(g);if(-1==e[f])for(var m=a.na.pe(g),g=0;g<h;g++)d[b]=m,b++;else for(m=this.description.wk(e[f]),g=0;g<h;g++)d[b]=this.la[m],b++,m++}this.la=d}this.description=
c};d.prototype.nq=function(){this.aK(this.description.af.length);d.Bb(this.description.af,this.la,this.description.af.length);this.la[0]=NaN;this.la[1]=NaN};d.prototype.Xc=function(c){if(c instanceof a.Hd){if(!this.Hc()){var e=this.w();c.$h(e,e);this.rb(e)}}else this.Hc()||(this.Ud(1),e=this.kA(),this.AC(c.Rp(e)))};d.prototype.copyTo=function(c){if(33!=c.G())throw a.f.F();c.Bc();null==this.la?(c.Oa(),c.la=null,c.Fg(this.description)):(c.Fg(this.description),c.aK(this.description.af.length),d.Bb(this.la,
c.la,this.description.af.length))};d.prototype.Ja=function(){return new d(this.description)};d.prototype.u=function(){return this.Hc()};d.prototype.Hc=function(){return null==this.la||isNaN(this.la[0])||isNaN(this.la[1])};d.prototype.Rn=function(a){a.Oa();this.description!=a.description&&a.Fg(this.description);a.Nb(this)};d.prototype.s=function(a){this.Hc()?a.Oa():(a.o=this.la[0],a.A=this.la[1],a.v=this.la[0],a.B=this.la[1])};d.prototype.Cp=function(a){if(this.Hc())a.Oa();else{var c=this.kA();a.o=
c.x;a.A=c.y;a.Bf=c.z;a.v=c.x;a.B=c.y;a.$g=c.z}};d.prototype.xf=function(c,e){var d=new a.Ac;if(this.Hc())return d.Oa(),d;c=this.Yc(c,e);d.ca=c;d.ha=c;return d};d.prototype.aK=function(c){if(null==this.la)this.la=a.J.gf(c);else if(this.la.length<c){for(var e=this.la.slice(0),d=this.la.length;d<c;d++)e[d]=0;this.la=e}};d.Bb=function(a,e,d){if(0<d)for(d=0;d<a.length;d++)e[d]=a[d]};d.prototype.Eb=function(a){if(a==this)return!0;if(!(a instanceof d)||this.description!=a.description)return!1;if(this.Hc())return a.Hc()?
!0:!1;for(var c=0,b=this.description.af.length;c<b;c++)if(this.la[c]!=a.la[c])return!1;return!0};d.prototype.jc=function(){var c=this.description.jc();if(!this.Hc())for(var e=0,d=this.description.af.length;e<d;e++)var b=this.la[e],b=a.J.truncate(b^b>>>32),c=a.J.dh(b,c);return c};d.prototype.Gg=function(){return null};return d}(a.T);a.Wa=b})(y||(y={}));(function(a){var b=function(){function a(a,c,e){void 0!==a&&(this.x=a,this.y=c,this.z=e)}a.pa=function(d,c,e){var b=new a;b.x=d;b.y=c;b.z=e;return b};
a.prototype.I=function(a,c,e){this.x=a;this.y=c;this.z=e};a.prototype.Ux=function(){this.z=this.y=this.x=0};a.prototype.normalize=function(){var a=this.length();0==a&&(this.x/=a,this.y/=a,this.z/=a)};a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};a.prototype.sub=function(d){return new a(this.x-d.x,this.y-d.y,this.z-d.z)};a.prototype.Vg=function(d){return new a(this.x*d,this.y*d,this.z*d)};a.prototype.cv=function(){this.x=NaN};a.prototype.Gy=function(){return isNaN(this.x)};
a.prototype.oi=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};return a}();a.qd=b})(y||(y={}));(function(a){var b=function(){function b(a,c,e){this.sx=this.cx=null;this.tg=c;this.CV=c.y-e;this.BV=c.y+e;this.Hr=0;this.LA=a;this.ta=e;this.OV=e*e;this.MA=0!=e;this.xw=!1}b.prototype.result=function(){return 0!=this.Hr?1:0};b.prototype.WO=function(d){d=d.gc(d.oe(this.tg,!1));return a.b.sc(d,this.tg)<=this.OV?!0:!1};b.prototype.nG=function(a){if(!this.MA&&(this.LA&&this.tg.ub(a.ec())||this.tg.ub(a.Cc())))this.xw=
!0;else if(a.ra==this.tg.y&&a.ra==a.oa){if(this.LA&&!this.MA){var c=Math.max(a.ua,a.sa);this.tg.x>Math.min(a.ua,a.sa)&&this.tg.x<c&&(this.xw=!0)}}else{var e=!1,c=Math.max(a.ua,a.sa);this.tg.x>c?e=!0:this.tg.x>=Math.min(a.ua,a.sa)&&(e=0<a.Sq(!0,this.tg.y,this.sx,null)&&this.sx[0]<=this.tg.x);if(e){if(this.tg.y==a.ec().y){if(this.tg.y<a.Cc().y)return}else if(this.tg.y==a.Cc().y&&this.tg.y<a.ec().y)return;this.Hr=this.LA?this.Hr^1:this.Hr+(a.ec().y>a.Cc().y?1:-1)}}};b.prototype.ju=function(a){var c=
a.xf(0,1);if(c.ca>this.BV||c.ha<this.CV)return!1;if(this.MA&&this.WO(a))return!0;if(c.ca>this.tg.y||c.ha<this.tg.y)return!1;null==this.cx&&(this.cx=[null,null,null,null,null]);null==this.sx&&(this.sx=[0,0,0]);c=a.pH(this.cx);if(0<c)for(a=0;a<c;a++){var e=this.cx[a].get();this.nG(e);if(this.xw)return!0}else if(this.nG(a),this.xw)return!0;return!1};b.$=function(a,c,e){c=new b(0==a.xo(),c,e);for(a=a.Da();a.Ya();)for(;a.Ca();)if(e=a.ba(),c.ju(e))return-1;return c.result()};b.bd=function(d,c,e,k){var f=
new a.h;d.ac(f);f.O(k,k);var l=new b(0==d.xo(),e,k);d=d.Da();var g=new a.h;g.I(f);g.v=e.x+k;g.A=e.y-k;g.B=e.y+k;e=c.Wz(g,k);for(k=e.next();-1!=k;k=e.next())if(d.Tb(c.ja(k)),d.Ca()&&(k=d.ba(),l.ju(k)))return-1;return l.result()};b.ln=function(d,c,e){if(d.u())return 0;var k=new a.h;d.ac(k);k.O(e,e);if(!k.contains(c))return 0;k=d.ob;if(null!=k){var f=k.Hi;if(null!=f){f=f.rm(c.x,c.y);if(1==f)return 1;if(0==f)return 0}k=k.Mb;if(null!=k)return b.bd(d,k,c,e)}return b.$(d,c,e)};b.VU=function(d,c,e,k){if(d.u())return 0;
var f=new a.h;d.ac(f);f.O(k,k);if(!f.contains(c,e))return 0;f=d.ob;if(null!=f&&(f=f.Hi,null!=f)){f=f.rm(c,e);if(1==f)return 1;if(0==f)return 0}return b.$(d,a.b.pa(c,e),k)};b.UU=function(a,c,e){return c.u()?0:b.ln(a,c.w(),e)};b.xA=function(d,c,e,k,f){var l=new a.h;d.ac(l);l.O(k,k);if(!l.contains(e))return 0;var g=new b(!0,e,k);if(null!=f){var h=new a.h;h.I(l);h.v=e.x+k;h.A=e.y-k;h.B=e.y+k;d=d.Da();k=f.Wz(h,k);for(h=k.next();-1!=h;h=k.next())if(d.Tb(f.ja(h),c),d.Ca()&&d.Ta==c&&(h=d.ba(),g.ju(h)))return-1}else if(d=
d.Da(),d.dC(c),d.Ya())for(;d.Ca();)if(h=d.ba(),g.ju(h))return-1;return g.result()};b.wA=function(d,c,e){var k=new a.h;d.ac(k);k.O(e,e);if(!k.contains(c))return 0;c=new b(!1,c,e);for(e=d.Da();e.Ya();)if(!(0>d.Tm(e.Ta))){for(c.Hr=0;e.Ca();)if(k=e.ba(),c.ju(k))return-1;if(0!=c.Hr)return 1}return c.result()};b.Oi=function(d,c,e,k,f){var l=d.Da();l.dC(c);if(!l.Ya()||!l.Ca())throw a.f.X("corrupted geometry");for(c=2;2==c&&l.Ca();)c=l.ba().gc(.5),c=b.xA(d,e,c,k,f);if(2==c)throw a.f.X("internal error");return 1==
c?!0:!1};b.qm=function(a,c){a=a.D();return 16>a?!1:2*a+Math.log(a)/Math.log(2)*1*c<1*a*c};return b}();a.ff=b})(y||(y={}));(function(a){var b=function(a){function d(c){a.call(this,!0,c)}K(d,a);d.prototype.Ja=function(){return new d(this.description)};d.prototype.tb=function(){return 2};d.prototype.G=function(){return 1736};d.prototype.JH=function(a,e,d){this.DU(a,e,d)};d.prototype.fT=function(){this.xT()};return d}(a.xl);a.Ia=b})(y||(y={}));(function(a){(function(a){a[a.PiPOutside=0]="PiPOutside";
a[a.PiPInside=1]="PiPInside";a[a.PiPBoundary=2]="PiPBoundary"})(a.GN||(a.GN={}));var b=function(){function b(){}b.VH=function(d,c,e){d=a.ff.UU(d,c,e);return 0==d?0:1==d?1:2};b.fe=function(d,c,e){d=a.ff.ln(d,c,e);return 0==d?0:1==d?1:2};b.bX=function(d,c,e,b){d=a.ff.VU(d,c,e,b);return 0==d?0:1==d?1:2};b.l_=function(d,c,e,b){return 0==a.ff.xA(d,c,e,b,null)?0:1};b.wA=function(d,c,e){return 0==a.ff.wA(d,c,e)?0:1};b.LR=function(d,c,e,k,f){if(c.length<e||f.length<e)throw a.f.F();for(var l=0;l<e;l++)f[l]=
b.fe(d,c[l],k)};b.WR=function(d,c,e,k,f){if(c.length/2<e||f.length<e)throw a.f.F();for(var l=0;l<e;l++)f[l]=b.bX(d,c[2*l],c[2*l+1],k)};b.eL=function(d,c,e,k,f){if(1736==d.G())b.LR(d,c,e,k,f);else if(197==d.G()){var l=new a.h;d.s(l);b.MM(l,c,e,k,f)}else throw a.f.X("invalid_call");};b.u_=function(d,c,e,k,f){if(1736==d.G())b.WR(d,c,e,k,f);else if(197==d.G()){var l=new a.h;d.s(l);b.QM(l,c,e,k,f)}else throw a.f.La();};b.MM=function(d,c,e,b,f){if(c.length<e||f.length<e)throw a.f.F();if(d.u())for(b=0;b<
e;b++)f[b]=0;else for(d.O(.5*-b,.5*-b),d.O(.5*b,.5*b),b=0;b<e;b++)d.contains(c[b])?f[b]=1:d.contains(c[b])?f[b]=2:f[b]=0};b.QM=function(d,c,e,b,f){if(c.length/2<e||f.length<e)throw a.f.F();if(d.u())for(b=0;b<e;b++)f[b]=0;else for(d.O(.5*-b,.5*-b),d.O(.5*b,.5*b),b=0;b<e;b++)d.contains(c[2*b],c[2*b+1])?f[b]=1:d.contains(c[2*b],c[2*b+1])?f[b]=2:f[b]=0};b.YT=function(a,c,e,b,f){for(var d=0;d<e;d++)f[d]=a.lt(c[d],b)?2:0};b.hS=function(a,c,e,b,f){var d=a.ob,k=null;null!=d&&(k=d.Hi);for(var d=e,l=0;l<e;l++)if(f[l]=
1,null!=k){var g=c[l];0==k.rm(g.x,g.y)&&(f[l]=0,d--)}if(0!=d)for(a=a.Da();a.Ya()&&0!=d;)for(;a.Ca()&&0!=d;)for(k=a.ba(),l=0;l<e&&0!=d;l++)1==f[l]&&k.lt(c[l],b)&&(f[l]=2,d--);for(l=0;l<e;l++)1==f[l]&&(f[l]=0)};b.fL=function(d,c,e,k,f){var l=d.G();if(1607==l)b.hS(d,c,e,k,f);else if(a.T.Oc(l))b.YT(d,c,e,k,f);else throw a.f.X("Invalid call.");};return b}();a.gd=b})(y||(y={}));(function(a){var b=function(a){function d(c,e){2==arguments.length?(a.call(this,!1,c.description),this.Rf(c),this.lineTo(e)):a.call(this,
!1,c)}K(d,a);d.prototype.Ja=function(){return new d(this.description)};d.prototype.tb=function(){return 1};d.prototype.G=function(){return 1607};d.prototype.JH=function(a,e,d,b){this.EU(a,e,d,b)};return d}(a.xl);a.Ua=b})(y||(y={}));(function(a){var b=function(){function a(){}a.$_=function(){};return a}();a.c_=b})(y||(y={}));(function(a){(function(a){a[a.clipWithInputHorizon=1]="clipWithInputHorizon";a[a.clipWithOutputHorizon=2]="clipWithOutputHorizon"})(a.dM||(a.dM={}));var b=function(){function a(){this.Jl=
3;this.sz=this.xv=NaN}a.prototype.aU=function(){return this.dt(1)};a.prototype.bU=function(){return this.dt(2)};a.prototype.dt=function(a){return 0!=(this.Jl&a)};a.prototype.Vf=function(){var c=new a;c.xv=this.xv;c.sz=this.sz;c.Jl=this.Jl;return c};return a}();a.NZ=b;(function(a){a[a.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon";a[a.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"})(a.eM||(a.eM={}));var f=function(){function a(){this.Jl=0}a.prototype.dt=function(a){return 0!=
(this.Jl&a)};a.ne=function(c){var e=new a;e.Jl=c.Jl;return e};a.prototype.DO=function(a){this.Jl=a.Jl};return a}();a.OZ=f;var d=function(){function c(c,d,b){this.ie=c;this.He=d;this.rg=new a.h;this.rg.I(b);this.xV=c.jc()+d.jc()+this.rg.jc().toString()}c.prototype.jc=function(){return this.xV};c.prototype.Eb=function(a){return this==a||this.ie.Eb(a.ie)&&this.He.Eb(a.He)&&this.rg.Eb(a.rg)};return c}();a.d_=d;d=function(){function c(){this.He=this.ie=null;this.CI=new b;this.DI=new f;this.wr=this.ue=
null;this.rr=this.Tl=!0}c.Hs=function(a,d,b,f){var e;void 0===f&&(f=null);void 0===e&&(e=null);var k=new c;k.kq(a,d,b,f,e);return k};c.prototype.kq=function(c,d,b,f,l){if(null==c||null==d)throw a.f.X("invalidArgument");this.ie=c;this.He=d;this.rr=this.Tl=!1;null!=f&&(this.CI=f.Vf());null!=l&&this.DI.DO(l);l=!1;1==d.Fb()&&null!=f&&(f=f.xv,isNaN(f)||0==f||(l=!0));if(c==d)this.Tl=!l,this.rr=!0;else{f=c.Fb();var e=d.Fb();if(0==f||0==e){if(null!=b)throw a.f.F();null!=c.Od()&&null!=d.Od()&&(this.Tl=c.Od().Eb(d.Od()))}else 3==
f||3==e?this.Tl=c.Eb(d):this.ie.gU(this.He)?this.Tl=!l:this.Tl=!1,this.ue=b,null!=this.ue&&this.ue.Mp(),this.rr=(null==this.ue||0==this.ue.count())&&this.ie.kc().Eb(this.He.kc())}this.vL()};c.prototype.Vv=function(){var a=new c;a.ie=this.He;a.He=this.ie;null!=this.ue&&(a.ue=this.ue.Vv());a.Tl=this.Tl;a.rr=this.rr;a.vL();return a};c.prototype.Ho=function(){return this.Tl};c.prototype.dT=function(){return this.CI.Vf()};c.prototype.Eb=function(a){return a==this?!0:a instanceof c&&this.ie.Eb(a.ie)&&this.He.Eb(a.He)?
this.ue==a.ue?!0:null!=this.ue&&null!=a.ue&&this.ue.Eb(a.ue)?!0:!1:!1};c.prototype.vL=function(){this.wr=new a.ko(this)};c.t_={};return c}();a.qs=d})(y||(y={}));(function(a){var b=function(){function d(){}d.uq=function(a){return a*d.nO};d.Vx=function(a,e){return d.TN(e-a)};d.aO=function(c){if(-360<=c&&720>c)return 0>c?c+=360:360<=c&&(c-=360),c;c=a.Ub.fM(c);0>c&&(c+=360);return c};d.TN=function(a){a=d.aO(a);180<a&&(a-=360);return a};d.PZ=.0174532925199433;d.nO=57.29577951308232;return d}();a.ks=b;
var f=function(){function d(){}d.Mj=function(c,e){var d=new a.h;c.s(d);var b=a.fb.Bh(e),f=new a.h;f.I(b);f.o=d.o;f.v=d.v;f.O(.01*f.fa(),0);b=a.ma.be(e,d,!1);return f.contains(d)?c:a.me.clip(c,f,b,0)};d.gt=function(c,e,b,f,l){if(!a.fb.Jc(e))throw a.f.F();var k=a.ma.ah(e,c,!1),g=a.fb.Bh(e),h=a.fb.kc(e),r=h.Od().Ai,v=a.fb.gw(h),h=a.fb.Rv(h),v=v*(2-v),m=new a.Ac;g.Tn(m);var n=[[0,0],[0,0]];2==a.Td.Fb(e)?f?(n[0][0]=d.On(l,m),n[0][1]=g.Cq(),a.fb.ku(),g=n[0][0]*r):(n[0][0]=g.Gk(),n[0][1]=l,a.fb.ku(),g=n[0][1]*
r):g=l*r;if(!f&&0!=g)throw a.f.F();var p=new a.ea,t=new a.fd;c=t.Jb(c);for(var u=[0],q=new a.b,y=new a.b,z=new a.b,x=new a.b,A=new a.b,w=new a.b,C=t.Pb(c);-1!=C;C=t.Sb(C)){var D=t.cb(C);t.w(D,z);for(var F=!1,E=D=t.U(D);-1!=E;E=t.U(E)){if(E==D){if(F)break;F=!0}t.w(E,x);if(f&&k<l-z.x&&x.x-l>k||k<l-x.x&&z.x-l>k||!f&&k<-z.y&&x.y>k||k<-x.y&&z.y>k){do if(!(Math.abs(z.x-x.x)>=.5*m.N())){2==a.Td.Fb(e)?(n[0][0]=d.On(z.x,m),n[0][1]=z.y,n[1][0]=d.On(x.x,m),n[1][1]=x.y,a.fb.TW(),A.x=n[0][0]*r,A.y=n[0][1]*r,w.x=
n[1][0]*r,w.y=n[1][1]*r):(A.x=z.x*r,A.y=z.y*r,w.x=x.x*r,w.y=x.y*r);w.x=6.283185307179586*(x.x-z.x)/m.N()+A.x;if(f){if(y.x=g,y.y=d.DB(h,v,A,w,g,b),isNaN(y.y))break}else{y.x=d.BB(h,v,A,w,b);if(isNaN(y.x))break;y.y=0}a.mb.Md(h,v,A.x,A.y,w.x,w.y,p,null,null,b);var B=p.j;a.mb.Md(h,v,A.x,A.y,y.x,y.y,p,null,null,b);var I=p.j;2==a.Td.Fb(e)?(n[0][0]=y.x/r,n[0][1]=y.y/r,a.fb.SS(),f?(q.y=n[0][1],q.x=l):(q.x=d.Zp(n[0][0],z.x,x.x,m),q.y=l)):f?(q.x=l,q.y=y.y/r):(q.x=d.Zp(y.x/r,z.x,x.x,m),q.y=l);u[0]=0<B?a.J.nk(I/
B,0,1):.5;0!=u[0]&&1!=u[0]&&(B=t.Ra(E),t.zm(B,u,1),t.rb(t.U(B),q.x,q.y))}while(0)}z.L(x)}}return t.Se(c)};d.Ym=function(c,e,b,f,l){if(c.u())return c;var k=a.fb.de(e);return d.Aq(c,b-180*k,360*k,e,f,l,!0)};d.DB=function(c,e,b,f,l,g){if(3.141592653589793<=Math.abs(b.x-f.x)||!d.Cj(b.x,f.x,l))return NaN;var k;b.x>f.x?k=f:(k=b,b=f);f=new a.ea(0);var h=new a.ea(0),r=new a.ea(0);a.mb.Md(c,e,k.x,k.y,b.x,b.y,h,f,null,g);var v=h.j,m=0,n=1,p=new a.b;for(p.L(k);v*(n-m)>1E-12*c;){var t=.5*(m+n);a.mb.Oj(c,e,k.x,
k.y,v*t,f.j,h,r,g);p.x=h.j;p.y=r.j;if(p.x==l)break;if(d.Cj(k.x,p.x,l))n=t;else if(d.Cj(b.x,p.x,l))m=t;else return NaN}return p.y};d.Cj=function(a,e,d){a=b.uq(a);e=b.Vx(a,b.uq(e));d=b.Vx(a,b.uq(d));return 0==d||0<e&&0<d&&d<=e||0>e&&0>d&&d>=e?!0:!1};d.On=function(a,e){var c=e.ha-e.ca;return e.vu(a-Math.floor((a-e.ca)/c)*c)};d.Zp=function(c,e,d,b){var k=new a.Ac;k.I(e,d);d=b.N();c=Math.floor((c-e)/d)*d+c;for(k=k.Wf();Math.abs(c-k)>Math.abs(c+d-k);)c+=d;return c};d.BB=function(c,e,d,b,f){var k;d.y>b.y?
k=b:(k=d,d=b);b=new a.Ac;b.I(k.y,d.y);if(!b.contains(0)||3.141592653589793<=Math.abs(k.x-d.x))return NaN;if(k.x==d.x)return k.x;var l=new a.ea(0),g=new a.ea(0),h=new a.ea(0);a.mb.Md(c,e,k.x,k.y,d.x,d.y,g,l,null,f);var r=g.j,v=0,m=1,n=new a.b;for(n.L(k);r*(m-v)>1E-12*c;){var p=.5*(v+m);a.mb.Oj(c,e,k.x,k.y,r*p,l.j,g,h,f);n.x=g.j;n.y=h.j;b.I(k.y,n.y);if(0==n.y)break;if(b.contains(0))m=p;else if(b.I(d.y,n.y),b.contains(0))v=p;else return NaN}return n.x};d.Aq=function(c,e,d,b,f,l,g){var k=new a.h;c.s(k);
if(k.u())return c;var h=new a.Ac;k.Tn(h);var r=new a.Ac;r.I(e,e+d);if(r.contains(h)&&r.ha!=h.ha)return c;var v=new a.h;v.I(k);var m=c.G();if(33==m){v=f?c:c.Vf();k=v.Be();if(k<r.ca||k>=r.ha||g&&k==r.ha)k+=Math.ceil((r.ca-k)/d)*d,k=r.vu(k),v.zC(k);return v}if(550==m){v=f?c:c.Vf();b=v.Pa(0);m=2*v.D();c=!1;for(f=0;f<m;f+=2)if(k=b.read(f),k<r.ca||k>=r.ha||g&&k==r.ha)c=!0,k+=Math.ceil((r.ca-k)/d)*d,k=r.vu(k),b.write(f,k);c&&v.Dc(1993);return v}if(r.contains(h))return c;if(197==m)return d=f?c:c.Vf(),k.Ma(v),
d.Gp(k),d;var n=.1*Math.max(k.fa(),k.N());v.O(0,n);g=c;r=b.re(0);c=a.ei.local();f=new a.Hd;for(var p=0;;){var t=Math.floor((h.ca-e)/d),u=Math.ceil((h.ha-e)/d);if(3<u-t){t=Math.floor(.5*(u+t));v.o=k.o-n;v.v=e+d*t;var q=a.me.clip(g,v,r,l);v.o=v.v;v.v=k.v+n;var G=a.me.clip(g,v,r,l);f.Ag((t-u)*d,0);G.Xc(f);1736==m?g=c.V(q,G,b,null):(g=q,g.add(G,!1));g.s(k);k.Tn(h);p++}else break}v.o=e;v.v=e+d;e=new a.h;e.I(v);e.O(r,0);e=Math.floor((k.o-v.o)/d)*d;0!=e?(v.move(e,0),f.Ag(-e,0)):f.oC();e=1607==m?new a.Ua(g.description):
new a.Ia(g.description);l=new a.h;for(h=new a.h;k.v>v.o;){n=a.me.clip(g,v,r,0);n.s(h);if(1607==m?!n.u()&&(h.N()>r||h.fa()>r):!n.u()&&(1736!=m||h.N()>r))n.Xc(f),n.s(h),e.s(l),l.O(r,r),l.Yb(h)&&1736==m?e=c.V(e,n,b,null):e.add(n,!1);v.move(d,0);f.shift(-d,0)}return e};d.NJ=function(c,e,d,b,f){var k=new a.Ed(d.description);k.Jd(d,0,-1);f=a.fb.Xg(k,c,e,f);k=d.D();b.Oa();if(!a.fb.Jc(c)||k!=f.D())return!1;var l=new a.h;d.s(l);var g=new a.h;f.s(g);l=l.N();g=g.N();if(0!=l&&0!=g){if(g/=l,c=a.fb.Bh(e).N()/a.fb.Bh(c).N(),
1E-10<Math.abs(g/c-1))return!1}else if(0!=l||0!=g)return!1;b.add(d,!1);for(d=0;d<k;d++)c=f.Aa(d),b.rb(d,c);return!0};d.tA=function(){throw a.f.df();};return d}();a.gi=f})(y||(y={}));(function(a){(function(a){a[a.Clip=0]="Clip";a[a.DontClip=1]="DontClip";a[a.PannableFold=2]="PannableFold"})(a.di||(a.di={}));var b=a.di;(function(a){a[a.Geodesic=0]="Geodesic";a[a.Loxodrome=1]="Loxodrome";a[a.GreatElliptic=2]="GreatElliptic";a[a.NormalSection=3]="NormalSection";a[a.ShapePreserving=4]="ShapePreserving"})(a.kD||
(a.kD={}));var f=a.kD,d=function(){function c(){}c.hw=function(c,d,b){if(b||0<d){c=c.toString(a.Vc.PE_STR_NAME_CANON|a.Vc.PE_STR_AUTH_NONE);d=[];for(b=0;b<c.length;b++)d[b]="a"<=c[b]&&"z">=c[b]?d[b]=c[b].toUpperCase():c[b];return d.join()}return c.toString(a.Vc.PE_STR_AUTH_TOP)};c.ps=function(c,d,b,f){var e=f.length,k=b.D();if(0!=k){var l=b.Pa(0),g=Math.min(k,e),h=0,r=c.Kg();isNaN(d)&&(d=0);var v=c.Jc();c=v?c.kc().qe().N():0;for(var m=179*c/360;0<k;){l.Gx(h<<1,g,f,0,!0);a.fi.projToGeogCenter(r,g,
f,d);if(v)for(var n=0;n<g;n++){var p=f[n][0]-d,t=a.Ub.sign(p),u=l.read(2*(h+n));0>t*a.Ub.sign(u)&&Math.abs(p)>m&&(f[n][0]+=-t*c)}l.gy(h<<1,g,f,0,!0);h+=g;k-=g;g=Math.min(k,e)}b.Dc(1993)}};c.I_=function(c,d,b,f){var e=c.Kg();isNaN(d)&&(d=0);var k=b.Be();f[0][0]=k;f[0][1]=b.nf();a.fi.projToGeogCenter(e,1,f,d);c.Jc()&&(d=a.Ub.sign(f[0][0]-d),0>d*a.Ub.sign(k)&&(c=c.kc().qe().N(),Math.abs(f[0][0])>179*c/360&&(f[0][0]-=d*c)));b.rb(f[0][0],f[0][1])};c.vN=function(c,d,b,f){var e=0,k=c.Kg();isNaN(e)&&(e=0);
var l=c.Jc(),g=c.de();c=360*g;for(var g=179*g,h=f.length,r=0;r<b;){for(var v=r;v<b&&d[v].isNaN();++v)r++;var m=Math.min(h,b-r);if(0<m){for(var v=1,n=r+1;v<m;++v,++n)if(d[n].isNaN()){m=v;break}a.ma.nz(f,d,r,m);a.fi.projToGeogCenter(k,m,f,e);if(l)for(v=0,n=r;v<m;++v,++n){var p=d[n].x,t=f[v][0]-e,u=a.Ub.sign(t);0>u*a.Ub.sign(p)&&Math.abs(t)>g&&(f[v][0]-=u*c)}a.ma.mz(d,r,f,m);r+=m}}};c.uy=function(c,d,b){var e=b.length,k=d.D();if(!(1>k)){var f=d.Pa(0),l=Math.min(k,e),g=0,h=c.Kg(),r=c.Jc(),m=r?c.qe().N():
0,n=179*m/360,p=0;for(r&&(p=c.pi());0<k;){f.Gx(g<<1,l,b,0,!0);a.fi.geogToProj(h,l,b);if(r)for(c=0;c<l;c++){var t=b[c][0],u=a.Ub.sign(t),q=f.read(2*(g+c))-p;0>u*a.Ub.sign(q)&&Math.abs(t)>n&&(b[c][0]+=-u*m)}f.gy(g<<1,l,b,0,!0);g+=l;k-=l;l=Math.min(k,e)}d.Dc(1993)}};c.A_=function(c,d,b){if(!d.u()){var e=c.Kg();b[0][0]=d.Be();b[0][1]=d.nf();a.fi.geogToProj(e,1,b);if(c.Jc()){var e=a.Ub.sign(b[0][0]),k=c.pi();0>e*a.Ub.sign(d.Be()-k)&&(c=c.qe().N(),Math.abs(b[0][0])>179*c/360&&(b[0][0]-=e*c))}d.rb(b[0][0],
b[0][1])}};c.uN=function(c,d,b,f){if(0!=b){var e=c.Kg(),k=c.Jc(),l=k?c.qe().N():0,g=179*l/360,h=0;k&&(h=c.pi());for(c=0;c<b;){for(var r=c;r<b&&d[r].isNaN();++r)c++;var v=Math.min(f.length,b-c);if(0<v){for(var r=1,m=c+1;r<v;++r,++m)if(d[m].isNaN()){v=r;break}a.ma.nz(f,d,c,v);a.fi.geogToProj(e,v,f);if(k)for(r=0,m=c;r<v;r++){var n=f[r][0],p=a.Ub.sign(n);0>p*a.Ub.sign(d[m].x-h)&&Math.abs(n)>g&&(f[r][0]-=p*l)}a.ma.mz(d,c,f,v);c+=v}}}};c.os=function(c,d,b,f){var e=d.D();if(0!=e){var k=d.Pa(0),l=c.ie,g=
c.He,h=l.kc().Yi(),r=g.kc().Yi(),v=l.de(),m=g.de();c=c.ue;if(null==c||0==c.count()){b=h/r;f=(l.en()-g.en())*m;r=-90*v;c=90*v;h=!1;m=1;for(l=2*e;m<l;)v=k.get(m),g=a.J.nk(v,r,c),g!=v&&(k.set(m,g),h=!0),m+=2;if(0!=f||1!=b)for(h=!0,r=new a.b,m=0;m<e;m++)k.fc(2*m,r),r.x*=b,r.x+=f,r.y*=b,k.ho(2*m,r);h&&d.Dc(1993)}else{var l=f.length,g=Math.min(e,l),n=a.J.gf(g),p=null,t=0,u=NaN,q=NaN,y=360*m,z=m/v;b&&(q=90*m,u=89.9*v,p=a.J.gf(g));for(var x=!0,A=0;0!=e;){v=!1;k.Gx(t<<1,g,f,0,!0);for(m=0;m<g;m++)n[m]=f[m][0];
if(b)for(m=0;m<g;m++){var w=Math.abs(f[m][1])-u;0<w&&(v=f[m][1],f[m][1]=a.Ub.Fl(u,v),p[m]=a.Ub.Fl(w,v),v=!0)}m=f[0][0];c.transform(f,g,h,r);x&&(A=f[0][0]-z*m,x=!1);for(m=0;m<g;m++)w=f[m][0]-n[m]*z-A,200<Math.abs(w)&&(f[m][0]=0<w?f[m][0]-y:f[m][0]+y);if(v){for(m=0;m<g;m++)0!=p[m]&&(f[m][1]+=z*p[m],f[m][1]>q?f[m][1]=q:f[m][1]<-q&&(f[m][1]=-q));for(v=0;v<g;v++)p[v]=0}k.gy(t<<1,g,f,0,!0);t+=g;e-=g;g=Math.min(e,l)}d.Dc(1993)}}};c.z_=function(c,d,b,f){if(d.u())return!1;var e=c.ie,k=c.He,l=c.ue,g=e.kc().Yi(),
h=k.kc().Yi();f[0][0]=d.Be();f[0][1]=d.nf();if(null!=l&&0<l.count()){c=!0;var r=!1,v=NaN,m=0,n=1;b&&(b=e.de(),v=k.de(),n=v/b,v*=90,e=89.9*b,k=Math.abs(f[0][1])-e,0<k&&(r=f[0][1],f[0][1]=a.Ub.Fl(e,r),m=a.Ub.Fl(k,r),r=!0));l.transform(f,1,g,h);r&&0!=m&&(f[0][1]+=n*m,f[0][1]>v?f[0][1]=v:f[0][1]<-v&&(f[0][1]=-v));d.rb(f[0][0],f[0][1])}else{b=e.de();c=a.J.nk(f[0][1],-90*b,90*b)!=f[0][1];v=k.de();l=(e.en()-k.en())*v;g/=h;if(1!=g||0!=l)c=!0,f[0][0]*=g,f[0][0]+=l,f[0][1]*=g;c&&d.rb(f[0][0],f[0][1])}return c};
c.tN=function(c,d,b,f){var e;if(c.rr)f=90*c.ie.de(),a.ma.UK(d,b,-f,f);else{var k=c.ue,l=c.ie,g=c.He;c=l.Ws();var h=g.Ws(),r=l.de(),v=90*r,m=g.de();if(null==k||0==k.count()){if(f=c/h,k=(l.en()-g.en())*m,a.ma.UK(d,b,-v,v),0!=k||1!=f)for(m=0;m<b;m++)d[m].x*=f,d[m].x+=k,d[m].y*=f}else for(var l=Math.min(b,f.length),v=a.J.gf(l),g=360*m,r=m/r,n=!0,p=0,t=0;0!=b;){for(m=0;m<l;m++)v[m]=d[m+t].x;m=d[0].x;a.ma.nz(f,d,t,l);k.transform(f,l,c,h);a.ma.mz(d,t,f,l);n&&(p=d[0].x-r*m,n=!1);for(m=0;m<l;m++)e=d[t+m].x-
v[m]*r-p,200<Math.abs(e)&&(d[t+m].x=0<e?d[t+m].x-g:d[t+m].x+g);t+=l;b-=l;l=Math.min(b,f.length)}}};c.YZ=function(a,d,b,f){return c.Ym(a,d,isNaN(b)?0:b,!0,f,null)};c.Uu=function(a,c){a=a.Bh();isNaN(c)||a.wv(c,0);return a};c.JS=function(e,d,b,f,l,g,h,m){for(var k=c.Uu(f,l),r=k.N(),v=r/360,n=c.jE*v,p=e.Pa(0),t=d.Jc(),u=t?r/d.qe().N():0,q=!1,y=new a.Ia(b.description),G=0,z=b.aa();G<z;++G){var x=t,A=new a.Ua(b.description);A.Ti(b,G,!0);if(0!=h){var w=c.$D(!0,A,k.B-m,k.B,h);(q=q||w)&&(x=!1)}var C=-1;x&&
(C=e.wa(G));var J=A.Pa(0),D=A.D(),L=0,F=J.read(0),E=0,w=3*f.re(0),B=!1,I=new a.b;I.$c();var U=new a.b;U.$c();for(var M=!1,H=1;H<D;++H){var R=a.b.pa(J.Of(2*H),J.Of(2*H+1)),N=R.x,K=N+L,P=K-F;R.x=K;if(Math.abs(P)>n){if(x){var O=C+(H+1<D?H:0),S=p.read(2*(C+H-1)),O=(p.read(2*O)-S)*u;Math.abs(P-O)>1*v&&(x=!1)}x||(L-=a.Ub.Fl(r,K-F),K=N+L,++E,M=0!=L,R.x=K)}else B||a.ma.MH(U,I,R,w)&&(B=!0);M&&J.write(2*H,K);F=K;U.L(I);I.L(R)}0<E&&A.Dc(1993);x=A.Aa(0);D=A.Aa(D-1);A=a.b.Cb(x,D)<w?c.SR(A,f,l,g,B):c.fS(e,G,A,
f,l);y.add(A,!1)}l=f.re(0);b=k.N()/180;c.wu(y,k,.1*l,!1);l=a.uh.clip(y,k,l,b,g);y=y!=l;e=e.hf();m=l.hf();h=0;0<m&&0>e?h=1:0>=m&&0<e&&(0==m?(m=NaN,2==d.Fb()?m=d.Lk().hf():1==d.Fb()&&(m=d.qe().HG()),e>.99*m&&(h=-1)):h=-1);0!=h&&(d=new a.Ia(l.description),d.oq(k),d=a.Km.local().V(d,b,g),d.add(l,!1),y=!0,l=d);y&&(l=a.Lm.local().V(l,f,!1,g));return l};c.fS=function(e,d,b,f,l){var k=b.D(),g=b.Aa(0),h=b.Aa(k-1);f=c.Uu(f,l);l=f.N();var g=a.Ub.sign(h.x-g.x),r=new a.h;b.ac(r);var v=f.Gk(),m,h=v-l,v=v+l;if(0<=
g){for(var n=Math.ceil((h-r.o)/l),n=n*l;h>r.o+n;)n+=l;for(;h<r.v+n;)n-=l;m=n;720<r.N()&&(v=h+360*Math.ceil(r.N()/360))}else{n=Math.ceil((v-r.v)/l);for(n*=l;v<r.v+n;)n-=l;for(;v>r.o+n;)n+=l;m=n;720<r.N()&&(h=v-360*Math.ceil(r.N()/360))}var n=g*l,p=a.h.pa(r.o,r.A,r.v,r.B);p.move(m,0);var t=new a.Hd;t.Ag(m,0);b.Xc(t);r=new a.Ua(b.description);r.add(b,!1);m=b.Aa(k-1);l=0;for(var u=r.Aa(0).x,q=0;0<g?p.v<v:p.o>h;)1024<=q&&(q=0),p.move(n,0),t.Wb=n,b.Xc(t),u+=n,f.o<=u&&f.v>=u&&(l=r.D()-1),b.rb(0,m),m=b.Aa(k-
1),r.As(b,0,0,k-1,!1);b=new a.Ia(r.description);k=0<e.Tm(d);b.add(r,!1);e=r.Aa(0);h=r.Aa(r.D()-1);d=b.aa()-1;(0>g?k:!k)?(g=a.b.pa(h.x,f.B),b.aj(g),g=a.b.pa(f.Gk(),f.B),b.aj(g),f=a.b.pa(e.x,f.B)):(g=a.b.pa(h.x,f.A),b.aj(g),g=a.b.pa(f.Gk(),f.A),b.aj(g),f=a.b.pa(e.x,f.A));b.aj(f);b.JH(0,d,0);b.mQ(l);return b};c.SR=function(e,d,b,f,l){var k=new a.Ia(e.description);k.add(e,!1);k.bC(0,k.D()-1);var g=new a.h;k.ac(g);b=c.Uu(d,b);for(var h=b.N(),r=Math.ceil((b.o-g.o)/h),r=r*h;b.o>g.o+r;)r+=h;for(;b.o<g.v+
r;)r-=h;r+=h;if(0!=r){g.move(r,0);var v=new a.Hd;v.Ag(r,0);k.Xc(v)}if(b.o<=g.o&&b.v>g.v)return l&&(l=k.hf(),k=a.Lm.local().V(k,d,!0,f),d=k.hf(),(d=a.Ub.sign(l)!=a.Ub.sign(d))&&k.dK()),k;e=new a.Ia(e.description);e.add(k,!1);for(l=l||g.N()>h-d.re(0);g.o<b.v;)g.move(h,0),v=new a.Hd,v.Ag(h,0),k.Xc(v),e.add(k,!1);l&&(l=e.hf(),e.Hp(1),e=a.Lm.local().V(e,d,!0,f),d=e.hf(),(d=a.Ub.sign(l)!=a.Ub.sign(d))&&e.dK());return e};c.$D=function(c,d,b,f,l){for(var e=d.Pa(0),k=d.D(),g=!1,h=0;h<k;h++){var r=a.b.pa(e.Of(2*
h),e.Of(2*h+1));if(0!=(l&1)&&r.y>=b){g=!0;break}if(0!=(l&2)&&r.y<=-b){g=!0;break}}if(!g)return!1;e=!1;c&&(e=d.Eo(0));c=new a.fd;var k=c.Jb(d),g=c.Pb(k),v=-1,m=!0,n=new a.b;n.$c();for(var h=new a.Wa,p=-1,t=c.cb(g);-1!=t;t=c.U(t)){var r=c.Aa(t),u=0!=(l&1)&&90<=r.y?1:0,u=u|(0!=(l&2)&&r.y<=-b?2:0);if(0<v&&v!=u){if(n.x!=r.x){n.x=r.x;c.wj(c.Ra(t),h);var q=c.Vj(g,t,h);c.Qf(q,n)}if(e)for(p=-1!=p?c.U(p):c.cb(g),q=c.Ra(t);p!=q;)p=c.td(p,!1);p=-1}0<u&&(r.y=a.Ub.Fl(f,r.y),c.Qf(t,r),m||v==u||(r.x!=n.x?(c.wj(t,
h),q=c.Vj(g,t,h),c.rb(q,n.x,r.y),p=q):p=t));v=u;n=r;m=!1}if(e){if(-1!=p)for(p=c.U(p);-1!=p;)p=c.td(p,!1);b=c.cb(g);c.Tq(b,c.Rj(g))||(c.wj(b,h),c.Vj(g,-1,h))}c.Se(k).copyTo(d);return!0};c.yZ=function(a,c){var e=0,d=a.Ka(c);c+=1;for(var b=a.aa();c<b&&!(0<a.Tm(c));++c)e++;return 64<d&&3<=e};c.sA=function(e,d,f,l){var k=e;if(k.u()||f==b.DontClip)return k;var g=k.G();if(33==g)return l=k,k=[l.w()],c.KH(k,1,d,f),k[0].isNaN()?l.Oa():l.rb(k[0]),e;e=d.kc();var h=e.de(),r=90*h,v=180*h,m=360*h,n=d.pi(),p=.5*
h,t=new a.h;k.s(t);var u=d.Us(),q=d.CS(),y=197==u.G();d=new a.h;u.s(d);f==b.PannableFold&&(f=e.qe().N(),d.o=n-.5*f,d.v=d.o+f);if(t.A<-r||t.B>r){(new a.h).I(t.o-h,-r,t.v+h,r);k=a.uh.rq(k,d,e,NaN,0,l);if(k.u())return k;k.s(t)}if(q&&(d.B<t.A||d.A>t.B))return k.Ja();t.N()>m&&(k=c.Aq(k,n-v,m,e,!0,0,!0,l),k.s(t));r=c.BN(t.o,t.v,d.o,d.v,m);0!=r&&t.move(r,0);if(t.v>d.v||t.o<d.o){if(t.v>d.v)for(;t.o>=d.v;)t.move(-m,0),r-=m;for(;t.o<d.v-m;)t.move(m,0),r+=m}f=a.ma.uv(e,u);0!=r&&(h=new a.Hd,h.Ag(r,0),k.Xc(h));
if(q){if(y&&d.contains(t))return k;q=[null,null];for(r=0;2>r;r++){y?h=a.T.Ic(g)?a.uh.clip(k,d,f,p,l):a.uh.clip(k,d,f,0,l):(h=a.sk.local().V(k,u,e,l),h==u&&(h=a.T.ne(h)));if(d.o<=t.o&&d.v>=t.v||d.o>=t.o&&d.v<=t.v)return h;q[r]=h;0==r&&(t.move(-m,0),h=new a.Hd,h.Ag(-m,0),k.Xc(h))}if(550==g)q[0].Jd(q[1],0,-1);else if(a.T.Ic(g))q[0].add(q[1],!1);else if(33==g)q[0].u()&&(q[0]=q[1]);else throw a.f.X("intersect_with_GCS_horizon: unexpected geometry type");return q[0]}if(d.B<t.A||d.A>t.B)return k;for(g=0;!k.u()&&
t.v>d.o;)0!=g&&(h=new a.Hd,h.Ag(g,0),k.Xc(h)),a.Gj.local().V(4,k,u,e,l)||(k=a.cq.local().V(k,u,e,l),u==k&&(k=a.T.ne(k))),0!=g&&(p=new a.Hd,p.Ag(-g,0),k.Xc(p)),g-=m,t.move(-m,0);return k};c.KH=function(e,d,f,l){if(0!=d&&l!=b.DontClip)if(l==b.PannableFold){l=f.zT();for(var k=d,g=0;g<d;g++)if(e[g].y>l.B||e[g].y<l.A)e[g].$c(),k--;0!=k&&c.Tu(e,d,l.o,l.N())}else{l=f.de();var h=90*l,r=180*l;l*=360;k=d;for(g=0;g<d;g++)if(e[g].y>h||e[g].y<-h)e[g].$c(),k--;if(0!=k){k=new a.h;k.Lx(e,d);var h=f.Us(),v=f.Tv(),
g=197==h.G(),m=new a.h;h.s(m);if(!v||!(m.B<k.A||m.A>k.B))if(v)if(c.Tu(e,d,m.Gk()-r,l),k=d,g)for(g=0;g<d;g++)m.contains(e[g])||(e[g].$c(),k--);else for(f=a.ma.uv(f.kc(),h),g=0;g<d;g++)(r=0!=a.gd.fe(h,e[g],f))||(e[g].$c(),k--);else for(c.Tu(e,d,-r,l),k=d,f=a.ma.uv(f.kc(),h),g=0;g<d;g++)if(r=e[g],r.isNaN()&&k--,v=c.oE(r.x,m.o,m.v,l),r.x+=v,r=0!=a.gd.fe(h,r,f))e[g].$c(),k--}}};c.a_=function(c,d,b){if(0<=d&&!c.Qb(d))return 0;var e=0;if(1==b.Fb())return d=90*b.de(),d-=2*d/Math.PI*a.Vc.PE_HORIZON_DELTA,
b=new a.h,c.s(b),b.B>=d&&(e=1),b.A<=-d&&(e|=2),e;var k=b.Sj();if(null==k)return 0;var f=null;0<=d&&(f=c);for(var l=0;2>l;l++)if((0<l?k.getSouthPoleLocation():k.getNorthPoleLocation())!=a.Bg.PE_POLE_OUTSIDE_BOUNDARY){var g=b.cA(0<l);g.isNaN()||(g=0>d?a.ff.wA(c,g,0):a.ff.xA(f,d,g,0,null),e|=g<<l)}return e};c.Aq=function(c,d,b,f,l,g,h,m){var e=c.G(),k=d+b;if(33===e){f=l?c:c.Vf();var r=f.Be();if(r<d||r>=k||h&&r==k)r+=Math.ceil((d-r)/b)*b,r=a.J.nk(r,d,k),f.zC(r);return f}if(c.u())return c;r=new a.h;c.s(r);
if(r.u())return c;var v=new a.Ac;r.Tn(v);var n=new a.Ac;n.I(d,k);if(n.contains(v))return c;k=new a.h;k.I(r);if(550===e){f=l?c:c.Vf();m=f.Pa(0);e=2*f.D();k=!1;for(d=0;d<e;d+=2)if(r=m.read(d),r<n.ca||r>=n.ha||h&&r==n.ha)k=!0,r+=Math.ceil((n.ca-r)/b)*b,r=n.vu(r),m.write(d,r);k&&f.Dc(1993);return f}if(197==e)return b=l?c:c.Vf(),r.Ma(k),b.Gp(r),b;var p=.1*Math.max(r.fa(),r.N());k.O(0,p);h=c;n=f.re(0);c=a.ei.local();for(l=new a.Hd;;){var t=Math.floor((v.ca-d)/b),u=Math.ceil((v.ha-d)/b);if(3<u-t){t=Math.floor(.5*
(u+t));k.o=r.o-p;k.v=d+b*t;var q=a.uh.clip(h,k,n,g,m);k.o=k.v;k.v=r.v+p;var y=a.uh.clip(h,k,n,g,m);l.Ag((t-u)*b,0);y.Xc(l);1736==e?h=c.V(q,y,f,null):(h=q,h.add(y,!1));h.s(r);r.Tn(v)}else break}k.o=d;k.v=d+b;d=new a.h;d.I(k);d.O(n,0);d=Math.floor((r.o-k.o)/b)*b;0!=d?(k.move(d,0),l.Ag(-d,0)):l.oC();d=1607==e?new a.Ua(h.description):new a.Ia(h.description);g=new a.h;for(v=new a.h;r.v>k.o;){p=a.uh.clip(h,k,n,0,m);p.s(v);if(1607==e?!p.u()&&(v.N()>n||v.fa()>n):!p.u()&&(1736!=e||v.N()>n))p.Xc(l),p.s(v),
d.s(g),g.O(n,n),g.Yb(v)&&1736==e?d=c.V(d,p,f,null):d.add(p,!1);k.move(b,0);l.shift(-b,0)}return d};c.Tu=function(c,d,b,f){for(var e=b+f,k=0;k<d;k++){var l=c[k].x;b<=l&&l<e||!(l<b||l>e||l==e)||(l+=Math.ceil((b-l)/f)*f,l=a.J.nk(l,b,e),c[k].x=l)}};c.Ym=function(e,d,b,f,l,g){if(!d.Jc())throw a.f.X("fold_into_360_degree_range");if(e.u())return e;var k;if(2==d.Fb())b=d.aw(),k=d.$v()-b;else{var h=d.de();k=360*h;b-=180*h}return c.Aq(e,b,k,d,f,l,!0,g)};c.AG=function(a,d,b,f){if(2==b.Fb())f=b.aw(),b=b.$v()-
f;else{var e=b.de();b=360*e;f-=180*e}c.Tu(a,d,f,b)};c.Mj=function(c,d){var e=d.qe();if(33==c.G()){var b=c.nf();return e.A<=b&&b<=e.B?c:c.Ja()}b=new a.h;c.s(b);var k=new a.h;k.I(e);k.o=b.o;k.v=b.v;k.O(.01*k.fa(),0);e=a.ma.Zy(d,b);return k.contains(b)?c:a.uh.clip(c,k,e,0,null)};c.Jm=function(a,c,d){return a>c.v&&a-c.v<d?c.v:a<c.o&&c.o-a<d?c.o:a};c.yY=function(a,d,b,f){f.x=c.Jm(a.x,d,b);f.y=a.y};c.xY=function(a,d,b,f){for(var e=0;e<d;e++)a[e].y<b.A||a[e].y>b.B?a[e].$c():a[e].x=c.Jm(a[e].x,b,f)};c.wu=
function(e,d,b,f){if(!e.u()){var k=e.G();if(!f||1736!=k)if(a.T.gh(k)){f=e.Pa(0);for(var k=0,l=e.D();k<l;k++){var g=f.read(2*k),h=c.Jm(g,d,b);h!=g&&f.write(2*k,h)}e.Dc(1993)}else if(197==k)f=new a.h,e.s(f),f.o=c.Jm(f.o,d,b),f.v=c.Jm(f.v,d,b),e.Gp(f);else if(33==k)e.zC(c.Jm(e.Be(),d,b));else throw a.f.X("internal error");}};c.oU=function(e,d,b,f){var k=new a.fd,l=k.Jb(e);e=a.ma.uv(d,e);c.gt(k,l,d,e,b,!0,f);return k.Se(l)};c.gt=function(e,d,b,l,g,h,m){if(!b.Jc())throw a.f.F("invalid call");var k=b.qe(),
r=b.kc(),v=r.Kg().getDatum().getSpheroid(),r=r.Od().Ai,n=v.getFlattening(),v=v.getAxis(),n=n*(2-n),p=new a.Ac;k.Tn(p);var t=null,u=[[0,0],[0,0]];2==b.Fb()?(t=b.Kg(),h?(u[0][0]=c.On(m,p),u[0][1]=k.Cq(),a.fi.projToGeog(t,1,u),k=u[0][0]*r):(u[0][0]=k.Gk(),u[0][1]=m,a.fi.projToGeog(t,1,u),k=u[0][1]*r)):k=m*r;if(!h&&0!=k&&g!=f.GreatElliptic)throw a.f.X("invalid argument");var q=new a.ea,y=[0],x=new a.b,z=new a.b,G=new a.b,A=[null,null],w=new a.b,C=new a.b,D=new a.b,J=new a.b;for(d=e.Pb(d);-1!=d;d=e.Sb(d)){var F=
e.cb(d);e.w(F,w);for(var L=!1,E=F=e.U(F);-1!=E;E=e.U(E)){if(E==F){if(L)break;L=!0}e.w(E,C);if(h&&(l<m-w.x&&C.x-m>l||l<m-C.x&&w.x-m>l)||!h&&(0!=m||l<-w.y&&C.y>l||l<-C.y&&w.y>l)){do if(!(Math.abs(w.x-C.x)>=.5*p.N())){2==b.Fb()?(u[0][0]=c.On(w.x,p),u[0][1]=w.y,u[1][0]=c.On(C.x,p),u[1][1]=C.y,a.fi.projToGeogCenter(t,2,u,0),D.x=u[0][0]*r,D.y=u[0][1]*r,J.y=u[1][1]*r):(D.x=w.x*r,D.y=w.y*r,J.y=C.y*r);J.x=2*(C.x-w.x)*Math.PI/p.N()+D.x;var B;if(h){z.x=k;z.y=c.DB(v,n,D,J,k,g);if(isNaN(z.y))break;A[0]=z;B=1}else if(g==
f.GreatElliptic){var I=[0,0];B=a.xy.tA(v,n,D,J,k,I);if(0==B)break;z.x=I[0];z.y=k;A[0]=z;2==B&&(G.x=I[1],G.y=k,A[1]=G)}else{z.x=c.BB(v,n,D,J,g);if(isNaN(z.x))break;z.y=0;A[0]=z;B=1}for(var M=-1,I=0;I<B;I++){a.mb.Md(v,n,D.x,D.y,J.x,J.y,q,null,null,g);var H=q.j;a.mb.Md(v,n,D.x,D.y,A[I].x,A[I].y,q,null,null,g);var R=q.j;2==b.Fb()?(u[0][0]=A[I].x/r,u[0][1]=A[I].y/r,a.fi.geogToProj(t,1,u),h?(x.y=u[0][1],x.x=m):(x.x=c.Zp(u[0][0],w.x,C.x,p),x.y=m)):h?(x.x=m,x.y=A[I].y/r):(x.x=c.Zp(A[I].x/r,w.x,C.x,p),x.y=
m);y[0]=0<H?a.J.nk(R/H,0,1):.5;if(0==y[0]||1==y[0])break;M>y[0]||(M=e.Ra(E),e.zm(M,y,1),e.rb(e.U(M),x.x,x.y),M=y[0])}}while(0)}w.L(C)}}};c.On=function(a,c){var e=c.ha-c.ca;return c.vu(a-Math.floor((a-c.ca)/e)*e)};c.Zp=function(c,d,b,f){var e=new a.Ac;e.I(d,b);b=f.N();c=Math.floor((c-d)/b)*b+c;for(e=e.Wf();Math.abs(c-e)>Math.abs(c+b-e);)c+=b;return c};c.Cj=function(c,d,b){c=a.ks.uq(c);d=a.ks.Vx(c,a.ks.uq(d));b=a.ks.Vx(c,a.ks.uq(b));return 0==b||0<d&&0<b&&b<=d||0>d&&0>b&&b>=d?!0:!1};c.DB=function(e,
d,b,l,g,h){if(h==f.GreatElliptic)return a.xy.LU(d,b,l,g);if(Math.abs(b.x-l.x)>=Math.PI||!c.Cj(b.x,l.x,g))return NaN;var k;b.x>l.x?k=l:(k=b,b=l);l=new a.ea;var r=new a.ea,m=new a.ea;a.mb.Md(e,d,k.x,k.y,b.x,b.y,r,l,null,h);var v=r.j,n=0,p=1,t=new a.b;for(t.L(k);v*(p-n)>1E-12*e;){var u=.5*(n+p);a.mb.Oj(e,d,k.x,k.y,v*u,l.j,r,m,h);t.x=r.j;t.y=m.j;if(t.x==g)break;if(c.Cj(k.x,t.x,g))p=u;else if(c.Cj(b.x,t.x,g))n=u;else return NaN}return t.y};c.BB=function(c,d,b,l,g){if(g==f.GreatElliptic)return g=[0,0],
a.xy.tA(c,d,b,l,0,g),g[0];var e;b.y>l.y?e=l:(e=b,b=l);l=new a.Ac;l.I(e.y,b.y);if(!l.contains(0)||Math.abs(e.x-b.x)>=Math.PI)return NaN;if(e.x==b.x)return e.x;var k=new a.ea,h=new a.ea,r=new a.ea;a.mb.Md(c,d,e.x,e.y,b.x,b.y,h,k,null,g);var m=h.j,v=0,n=1,p=new a.b;for(p.L(e);m*(n-v)>1E-12*c;){var t=.5*(v+n);a.mb.Oj(c,d,e.x,e.y,m*t,k.j,h,r,g);p.x=h.j;p.y=r.j;l.I(e.y,p.y);if(0==p.y)break;if(l.contains(0))n=t;else if(l.I(b.y,p.y),l.contains(0))v=t;else return NaN}return p.x};c.w_=function(c,d,b,f,l,g){if(d==
l&&b!=g)throw a.f.F();if(0>=f)return 0;if(c.Ho()){g*=2;var e=2*b;c=2*f;for(b=0;b<c;b++)l[g+b]=d[e+b];return f}if(2>=f){g=[new a.b,new a.b];for(e=0;e<f;e++)g[e].ka(d[2*e],d[2*e+1]);d=a.ns.local().VY(c,g,f,g);for(e=0;e<f;e++)l[2*e]=g[e].x,l[2*e+1]=g[e].y;return d}var k=c.ie,e=c.He,h=k.Fb(),r=e.Fb();if(0==h&&h==r)return c=k.Yi(),e=e.Yi(),e=c/e,c=new a.Hd,c.Op(e,e),c.WY(d,b,l,g,f),f;h=new a.Ed;h.Ud(3);h.resize(f);for(var r=h.Pa(0),m=h.Pa(3),e=0,v=2*b,n=2*g;e<f;e++,n+=2){b=d[v++];var k=d[v++],p=n;if(isNaN(b)||
isNaN(k))k=b=0,p=-1;m.write(e,p);r.write(2*e,b);r.write(2*e+1,k)}h.Dc(1993);d=a.ns.local().V(h,c,null);e=0;for(g*=2;e<f;e++,g+=2)l[g]=NaN,l[g+1]=NaN;if(d.u())return 0;g=d.Pa(3);c=d.Pa(0);e=h=0;for(f=d.D();e<f;e++)d=g.read(e),-1!=d&&(b=c.read(2*e),k=c.read(2*e+1),l[d]=b,l[d+1]=k,h++);return h};c.NJ=function(c,d,b,f){if(!c.ie.Jc())return!1;var e=new a.Ed(d.description);e.Jd(d,0,-1);f=a.ns.local().V(e,c,f);e=d.D();b.Oa();if(e!=f.D())return!1;var k=new a.h;d.s(k);var l=new a.h;f.s(l);k=k.N();l=l.N();
if(0!=k&&0!=l){if(l/=k,c=c.He.Bh().N()/c.ie.Bh().N(),1E-10<Math.abs(l/c-1))return!1}else if(0!=k||0!=l)return!1;b.add(d,!1);d=new a.b;for(c=0;c<e;c++)f.w(c,d),b.rb(c,d);return!0};c.pP=function(a,c){a%=360*c;a>=180*c&&(a-=360*c);return a};c.LJ=function(e,d,f,l){if(f==b.Clip){var k=d.Lk();197==k.G()?(f=new a.h,k.s(f),k=a.ma.Zy(d,f),e=a.uh.clip(e,f,k,5E4*d.cn(),l)):a.Gj.local().V(1,k,e,d,l)||(e=a.sk.local().V(e,k,d,l),e==k&&(e=a.xl.ne(e)))}else d.Jc()&&(l=new a.h,e.ac(l),d.qe().contains(l)||(c.wu(e,
d.qe(),d.re(0),!0),f==b.PannableFold&&(e=c.Mj(e,d)),e=c.Ym(e,d,0,!0,1E5*d.cn(),null)));return e};c.iF=function(c,d,b){var e=d.Vs();if(null==e)return c;d=d.kc();var k=d.qe().N(),f=new a.h;c.ac(f);var l=new a.Ac;f.Tn(l);for(var f=e.Da(),e=null,g=new a.Hd;f.Ya();)for(;f.Ca();){var h=f.ba(),r=h.xf(0,0),m=new a.Ac;m.I(r.ca,r.ha);for(r=0;m.ha>l.ca;)m.move(-k),--r;for(;m.ca<=l.ha;){if(m.Yb(l)){null==e&&(e=new a.Ua);var n=a.Hb.eR(h.ec(),h.Cc());0!=r&&(g.Ag(r*k,0),n.Xc(g));e.dc(n,!0)}m.move(k);++r}}return null!=
e?(d=a.ma.fQ(d,e),d=a.ma.Bs(d),a.Ju.jR(c,e,d,b)):c};c.BN=function(a,d,b,f,l){return a>=b&&d<=f?0:c.oE(.5*(d+a),b,f,l)};c.oE=function(c,d,b,f){return a.Ub.round((.5*(b+d)-c)/f)*f};c.KS=function(e,d,b,f,l,g,h,m){var k=c.Uu(f,l),r=k.N(),v=r/360,n=c.jE*v,p=e.Pa(0),t=d.Jc(),u=t?r/d.qe().N():0,q;d=e.Ja();for(var y=0,z=b.aa();y<z;++y){var x=t,G=new a.Ua(b.description);G.Ti(b,y,!0);q=b.Qb(y);0!=h&&(q=c.$D(q,G,k.B-m,k.B,h))&&(x=!1);var A=-1;q=G.D();var w=!1;x&&(A=e.wa(y),w=e.Qb(y));var C=G.Pa(0),D=0,J=C.read(0),
F=0,E=3*f.re(0),L=!1,B=new a.b;B.$c();var I=new a.b;I.$c();for(var M=!1,H=1;H<q;++H){var U=a.b.pa(C.Of(2*H),C.Of(2*H+1)),R=U.x,K=R+D,N=K-J;U.x=K;if(Math.abs(N)>n){if(x){var P=A+H-1,O=A;if(!w||H+1<q)O+=H;P=p.read(2*P);O=(p.read(2*O)-P)*u;Math.abs(N-O)>1*v&&(t=!1)}x||(D-=a.Ub.Fl(r,K-J),K=R+D,++F,M=0!=D,U.x=K)}else L||a.ma.MH(B,I,U,E)&&(L=!0);M&&C.write(2*H,K);J=K;B.L(I);I.L(U)}0!=F&&G.Dc(1993);x=G.Aa(0);q=G.Aa(q-1);a.b.Cb(x,q);G=c.DS(G,f,isNaN(l)?0:l,g);d.add(G,!1)}e=f.re(0);b=k.N()/180;c.wu(d,k,.1*
e,!1);return a.uh.clip(d,k,e,b,g)};c.DS=function(a,d,b,f){return c.Ym(a,d,b,!0,0,f)};c.IU=function(c,d,b,f){var e=c.G();if(1736==e)for(d=null!=d?d.re(0):0,e=0;e<f;e++)1!=a.gd.fe(c,b[e],d)&&b[e].$c();else if(197==e)for(e=0;e<f;e++)c.fR(b[e])||b[e].$c();else throw a.f.F();};c.Dl=function(c,d,b,f){if(32>b)for(var e=new a.Wa,k=0;k<b;k++)e.rb(d[k]),c.Dl(e,f).w(d[k]);else{var l=new a.Ed;l.Ud(3);l.XE(d,b);e=l.Pa(3);for(k=0;k<b;k++)e.write(k,k);k=c.Dl(l,f);c=k.Pa(0);e=k.Pa(3);f=a.b.pa(NaN,NaN);for(l=0;l<
b;l++)d[l]=f;b=k.D();for(k=0;k<b;k++)f=e.read(k),c.fc(2*k,d[f])}};c.Cl=function(c,d,b,f){if(32>b)for(var e=new a.Wa,k=0;k<b;k++)e.rb(d[k]),c.Cl(e,f).w(d[k]);else{var l=new a.Ed;l.Ud(3);l.XE(d,b);e=l.Pa(3);for(k=0;k<b;k++)e.write(k,k);k=c.Cl(l,f);c=k.Pa(0);e=k.Pa(3);f=a.b.pa(NaN,NaN);for(l=0;l<b;l++)d[l]=f;b=k.D();for(k=0;k<b;k++)f=e.read(k),c.fc(2*k,d[f])}};c.Z_="ABCDEFGHIJKLMNOPQRSTUVWXYZ";c.jE=210;return c}();a.Ib=d})(y||(y={}));(function(a){(function(a){a[a.rightSide=1]="rightSide"})(a.JN||(a.JN=
{}));var b=function(){function b(d,c,e){this.wt=new a.b;void 0===d?this.up=-1:(this.wt.L(d),this.up=c,this.Qa=e,this.Zw=0)}b.prototype.MK=function(a){this.Zw=a?this.Zw|1:this.Zw&-2};b.prototype.u=function(){return 0>this.up};b.prototype.Mz=function(){if(this.u())throw a.f.X("invalid call");return new a.Wa(this.wt.x,this.wt.y)};b.prototype.Za=function(){if(this.u())throw a.f.X("invalid call");return this.up};b.prototype.Pz=function(){if(this.u())throw a.f.X("invalid call");return this.Qa};b.prototype.yA=
function(){return 0!=(this.Zw&1)};b.prototype.Ky=function(a,c,e,b){this.wt.x=a;this.wt.y=c;this.up=e;this.Qa=b};return b}();a.Nm=b})(y||(y={}));(function(a){var b=function(){function d(){}d.prototype.Xn=function(c,e){this.Rh.resize(0);this.hj.length=0;this.Vk=-1;c.ac(this.gl);this.gl.O(e,e);this.gl.Yb(this.Mb.Ga)?((this.qt=a.T.Oc(c.G()))?(this.fJ=c.ec(),this.eJ=c.Cc(),this.ta=e):this.ta=NaN,this.Rh.add(this.Mb.Mf),this.hj.push(this.Mb.Ga),this.Kt=this.Mb.Ts(this.Mb.Mf)):this.Kt=-1};d.prototype.Ni=
function(a,e){this.Rh.resize(0);this.hj.length=0;this.Vk=-1;this.gl.I(a);this.gl.O(e,e);this.ta=NaN;this.gl.Yb(this.Mb.Ga)?(this.Rh.add(this.Mb.Mf),this.hj.push(this.Mb.Ga),this.Kt=this.Mb.Ts(this.Mb.Mf),this.qt=!1):this.Kt=-1};d.prototype.next=function(){if(0==this.Rh.size)return-1;this.Vk=this.Kt;var c=null,e=null,d,b=null,l=null;this.qt&&(c=new a.b,e=new a.b,b=new a.h);for(var g=!1;!g;){for(;-1!=this.Vk;){d=this.Mb.Iz(this.Mb.Sv(this.Vk));if(d.Yb(this.gl))if(this.qt){if(c.L(this.fJ),e.L(this.eJ),
b.I(d),b.O(this.ta,this.ta),0<b.fz(c,e)){g=!0;break}}else{g=!0;break}this.Vk=this.Mb.Zv(this.Vk)}if(-1==this.Vk){d=this.Rh.Fc();var h=this.hj[this.hj.length-1];null==l&&(l=[],l[0]=new a.h,l[1]=new a.h,l[2]=new a.h,l[3]=new a.h);f.tK(h,l);this.Rh.Pf();--this.hj.length;for(h=0;4>h;h++){var m=this.Mb.Eq(d,h);if(-1!=m&&0<this.Mb.OT(m)&&l[h].Yb(this.gl))if(this.qt){if(c.L(this.fJ),e.L(this.eJ),b.I(l[h]),b.O(this.ta,this.ta),0<b.fz(c,e)){var n=new a.h;n.I(l[h]);this.Rh.add(m);this.hj.push(n)}}else n=new a.h,
n.I(l[h]),this.Rh.add(m),this.hj.push(n)}if(0==this.Rh.size)return-1;this.Vk=this.Mb.Ts(this.Rh.get(this.Rh.size-1))}}this.Kt=this.Mb.Zv(this.Vk);return this.Vk};d.dR=function(c,e,b){var k=new d;k.Mb=c;k.gl=new a.h;k.Rh=new a.ia(0);k.hj=[];k.Xn(e,b);return k};d.cR=function(c,e,b){var k=new d;k.Mb=c;k.gl=new a.h;k.Rh=new a.ia(0);k.hj=[];k.Ni(e,b);return k};d.bR=function(c){var e=new d;e.Mb=c;e.gl=new a.h;e.Rh=new a.ia(0);e.hj=[];return e};return d}();a.f_=b;var f=function(){function d(c,e){this.Lf=
new a.ad(11);this.yi=new a.ad(5);this.rt=[];this.Vw=new a.ia(0);this.Ga=new a.h;this.ql(c,e)}d.prototype.reset=function(a,e){this.Lf.Vi(!1);this.yi.Vi(!1);this.rt.length=0;this.Vw.clear(!1);this.ql(a,e)};d.prototype.eh=function(a,e){return this.lw(a,e,0,this.Ga,this.Mf,!1,-1)};d.prototype.kw=function(a,e,d){d=-1==d?this.Mf:this.fH(d);var c=this.fa(d),b=this.eT(d);return this.lw(a,e,c,b,d,!1,-1)};d.prototype.ja=function(a){return this.$S(a)};d.prototype.QG=function(a){return this.Iz(this.Sv(a))};d.prototype.fa=
function(a){return this.Uv(a)};d.prototype.eT=function(c){var e=new a.h;e.I(this.Ga);var d=this.Uv(c);c=this.aH(c);for(var b=0;b<2*d;b+=2){var f=a.J.truncate(3&c>>b);0==f?(e.o=.5*(e.o+e.v),e.A=.5*(e.A+e.B)):1==f?(e.v=.5*(e.o+e.v),e.A=.5*(e.A+e.B)):(2==f?e.v=.5*(e.o+e.v):e.o=.5*(e.o+e.v),e.B=.5*(e.A+e.B))}return e};d.prototype.OT=function(a){return this.jA(a)};d.prototype.nT=function(a,e){return b.dR(this,a,e)};d.prototype.Wz=function(a,e){return b.cR(this,a,e)};d.prototype.mf=function(){return b.bR(this)};
d.prototype.ql=function(c,e){if(0>e||32<2*e)throw a.f.F("invalid height");this.yV=e;this.Ga.I(c);this.Mf=this.Lf.Pe();this.Tx(this.Mf,0);this.Nx(this.Mf,0);this.DK(this.Mf,0);this.zK(this.Mf,0)};d.prototype.lw=function(c,e,b,f,l,g,h){if(!f.contains(e))return 0==b?-1:this.lw(c,e,0,this.Ga,this.Mf,g,h);if(!g)for(var k=l;-1!=k;k=this.AT(k))this.Tx(k,this.jA(k)+1);k=new a.h;k.I(f);f=l;var r=[];r[0]=new a.h;r[1]=new a.h;r[2]=new a.h;for(r[3]=new a.h;b<this.yV&&this.hQ(f);b++){d.tK(k,r);for(var m=!1,v=
0;4>v;v++)if(r[v].contains(e)){var m=!0,n=this.Eq(f,v);-1==n&&(n=this.oR(f,v));this.Tx(n,this.jA(n)+1);f=n;k.I(r[v]);break}if(!m)break}return this.mU(c,e,b,k,f,g,l,h)};d.prototype.mU=function(a,e,d,b,f,l,g,h){var c=this.WG(f);if(l){if(f==g)return h;this.OR(h);l=h}else l=this.rR(),this.mC(l,a),this.IX(this.Sv(l),e);this.fY(l,f);-1!=c?(this.Rx(l,c),this.Ox(c,l)):this.vK(f,l);this.pC(f,l);this.Nx(f,this.Xv(f)+1);this.gQ(f)&&this.AS(d,b,f);return l};d.prototype.OR=function(a){var c=this.fH(a),d=this.WG(c),
b=this.GT(a),f=this.Zv(a);this.Ts(c)==a?(-1!=f?this.Rx(f,-1):this.pC(c,-1),this.vK(c,f)):d==a?(this.Ox(b,-1),this.pC(c,b)):(this.Rx(f,b),this.Ox(b,f));this.Rx(a,-1);this.Ox(a,-1);this.Nx(c,this.Xv(c)-1)};d.tK=function(a,e){var c=.5*(a.o+a.v),d=.5*(a.A+a.B);e[0].I(c,d,a.v,a.B);e[1].I(a.o,d,c,a.B);e[2].I(a.o,a.A,c,d);e[3].I(c,a.A,a.v,d)};d.prototype.gQ=function(a){return 8==this.Xv(a)&&!this.sH(a)};d.prototype.AS=function(a,e,d){var c,b,k=this.Ts(d);do b=this.Sv(k),c=this.yi.S(k,0),b=this.Iz(b),this.lw(c,
b,a,e,d,!0,k),k=c=this.Zv(k);while(-1!=k)};d.prototype.hQ=function(a){return 8<=this.Xv(a)||this.sH(a)};d.prototype.sH=function(a){return-1!=this.Eq(a,0)||-1!=this.Eq(a,1)||-1!=this.Eq(a,2)||-1!=this.Eq(a,3)};d.prototype.oR=function(a,e){var c=this.Lf.Pe();this.MX(a,e,c);this.Tx(c,0);this.Nx(c,0);this.sl(c,a);this.zK(c,this.Uv(a)+1);this.DK(c,e<<2*this.Uv(a)|this.aH(a));return c};d.prototype.rR=function(){var c=this.yi.Pe(),e;0<this.Vw.size?(e=this.Vw.Fc(),this.Vw.Pf()):(e=this.rt.length,this.rt.push(new a.h));
this.JX(c,e);return c};d.prototype.Eq=function(a,e){return this.Lf.S(a,e)};d.prototype.MX=function(a,e,d){this.Lf.P(a,e,d)};d.prototype.Ts=function(a){return this.Lf.S(a,4)};d.prototype.vK=function(a,e){this.Lf.P(a,4,e)};d.prototype.WG=function(a){return this.Lf.S(a,5)};d.prototype.pC=function(a,e){this.Lf.P(a,5,e)};d.prototype.aH=function(a){return this.Lf.S(a,6)};d.prototype.DK=function(a,e){this.Lf.P(a,6,e)};d.prototype.Xv=function(a){return this.Lf.S(a,7)};d.prototype.jA=function(a){return this.Lf.S(a,
8)};d.prototype.Nx=function(a,e){this.Lf.P(a,7,e)};d.prototype.Tx=function(a,e){this.Lf.P(a,8,e)};d.prototype.AT=function(a){return this.Lf.S(a,9)};d.prototype.sl=function(a,e){this.Lf.P(a,9,e)};d.prototype.Uv=function(a){return this.Lf.S(a,10)};d.prototype.zK=function(a,e){this.Lf.P(a,10,e)};d.prototype.$S=function(a){return this.yi.S(a,0)};d.prototype.mC=function(a,e){this.yi.P(a,0,e)};d.prototype.GT=function(a){return this.yi.S(a,1)};d.prototype.Zv=function(a){return this.yi.S(a,2)};d.prototype.Rx=
function(a,e){this.yi.P(a,1,e)};d.prototype.Ox=function(a,e){this.yi.P(a,2,e)};d.prototype.fH=function(a){return this.yi.S(a,3)};d.prototype.fY=function(a,e){this.yi.P(a,3,e)};d.prototype.Sv=function(a){return this.yi.S(a,4)};d.prototype.JX=function(a,e){this.yi.P(a,4,e)};d.prototype.Iz=function(a){return this.rt[a]};d.prototype.IX=function(a,e){this.rt[a].I(e)};return d}();a.gq=f})(y||(y={}));(function(a){(function(a){a[a.Outside=0]="Outside";a[a.Inside=1]="Inside";a[a.Border=2]="Border"})(a.yM||
(a.yM={}));var b=function(){function a(a,e){this.Dh=null;this.MV=e;this.Dh=a}a.prototype.Jx=function(a,e){this.tI!=e&&a.flush();this.tI=e};a.prototype.oG=function(a,e){for(var c=0;c<e;)for(var d=a[c++],b=a[c++],f=a[c++]*this.MV;d<b;d++)this.Dh[f+(d>>4)]|=this.tI<<2*(d&15)};return a}();a.h_=b;var f=function(){function d(a,e,d){this.Dh=null;this.xB=this.jl=this.oJ=this.mJ=this.zt=this.BI=this.hg=this.In=0;this.qj=this.kl=this.$l=null;this.jw(a,e,d)}d.create=function(c,e,b){if(!d.az(c))throw a.f.F();
return d.ee(c,e,b)};d.Cj=function(c,e,b){if(!d.az(c))throw a.f.F();return d.se(c,e,b)};d.jX=function(c){switch(c){case 0:c=1024;break;case 1:c=16384;break;case 2:c=262144;break;default:throw a.f.X("Internal Error");}return c};d.az=function(a){return a.u()||1607!=a.G()&&1736!=a.G()?!1:!0};d.prototype.lS=function(c,e){e=e.Da();for(var d=new a.b,b=new a.b;e.Ya();)for(;e.Ca();){var f=e.ba();if(322!=f.G())throw a.f.X("Internal Error");c.$h(f.ec(),d);c.$h(f.Cc(),b);this.qj.Py(d.x,d.y,b.x,b.y)}this.qj.XJ(a.yy.oy)};
d.prototype.mS=function(){throw a.f.X("Internal Error");};d.prototype.Az=function(c,e){for(var d=1;4>d;d++)c.Py(e[d-1].x,e[d-1].y,e[d].x,e[d].y);c.Py(e[3].x,e[3].y,e[0].x,e[0].y);this.qj.XJ(a.yy.oy)};d.prototype.cL=function(c,e,d){for(var b=[null,null,null,null],k=0;k<b.length;k++)b[k]=new a.b;e=e.Da();d=this.kl.XY(d)+1.5;for(var k=new a.b,f=new a.b,l=new a.b,g=new a.b,h=new a.b,m=new a.h,n=new a.b;e.Ya();){var p=!1,t=!0;for(n.ka(0,0);e.Ca();){var u=e.ba();g.x=u.ua;g.y=u.ra;h.x=u.sa;h.y=u.oa;m.Oa();
m.Nb(g.x,g.y);m.ml(h.x,h.y);if(this.$l.SH(m)){this.kl.$h(h,h);t?(this.kl.$h(g,g),n.L(g),t=!1):g.L(n);k.zc(h,g);var u=k.length(),q=.5>u;0==u?k.ka(1,0):(q||n.L(h),k.scale(d/u),f.ka(-k.y,k.x),l.ka(k.y,-k.x),g.sub(k),h.add(k),b[0].add(g,f),b[1].add(g,l),b[2].add(h,l),b[3].add(h,f),q?p=!0:this.Az(c,b))}else p&&(this.Az(c,b),p=!1),t=!0}p&&this.Az(c,b)}};d.prototype.TC=function(c){return a.J.truncate(c*this.BI+this.mJ)};d.prototype.UC=function(c){return a.J.truncate(c*this.zt+this.oJ)};d.ee=function(a,e,
b){return new d(a,e,b)};d.se=function(a,e,b){return new d(a,e,b)};d.prototype.jw=function(c,e,d){this.hg=Math.max(a.J.truncate(2*Math.sqrt(d)+.5),64);this.In=a.J.truncate((2*this.hg+31)/32);this.$l=new a.h;this.jl=e;d=0;for(var k=this.hg,f=this.In;8<=k;)d+=k*f,k=a.J.truncate(k/2),f=a.J.truncate((2*k+31)/32);this.Dh=a.J.gf(d,0);this.qj=new a.yy;d=new b(this.Dh,this.In,this);this.qj.uY(this.hg,this.hg,d);c.s(this.$l);this.$l.O(e,e);var k=new a.h,f=a.h.pa(1,1,this.hg-2,this.hg-2),l=e*f.N();e*=f.fa();
k.I(this.$l.Wf(),Math.max(l,this.$l.N()),Math.max(e,this.$l.fa()));this.xB=this.jl;this.kl=new a.Hd;this.kl.jU(k,f);new a.Hd;switch(c.G()){case 550:d.Jx(this.qj,2);this.mS();break;case 1607:d.Jx(this.qj,2);this.cL(this.qj,c,this.xB);break;case 1736:d.Jx(this.qj,1),this.lS(this.kl,c),d.Jx(this.qj,2),this.cL(this.qj,c,this.xB)}this.BI=this.kl.lb;this.zt=this.kl.gb;this.mJ=this.kl.Wb;this.oJ=this.kl.bc;this.ZP()};d.prototype.ZP=function(){this.qj.flush();for(var c=0,e=this.hg*this.In,d=this.hg,b=a.J.truncate(this.hg/
2),f=this.In,l=a.J.truncate((2*b+31)/32);8<d;){for(d=0;d<b;d++)for(var g=2*d,h=2*d+1,m=0;m<b;m++){var n=2*m,p=2*m+1,t=n>>4,n=2*(n&15),u=p>>4,p=2*(p&15),q=this.Dh[c+f*g+t]>>n&3,q=q|this.Dh[c+f*g+u]>>p&3,q=q|this.Dh[c+f*h+t]>>n&3,q=q|this.Dh[c+f*h+u]>>p&3;this.Dh[e+l*d+(m>>4)]|=q<<2*(m&15)}d=b;f=l;c=e;b=a.J.truncate(d/2);l=a.J.truncate((2*b+31)/32);e=c+f*d}};d.prototype.rm=function(a,e){if(!this.$l.contains(a,e))return 0;a=this.TC(a);e=this.UC(e);if(0>a||a>=this.hg||0>e||e>=this.hg)return 0;a=this.Dh[this.In*
e+(a>>4)]>>2*(a&15)&3;return 0==a?0:1==a?1:2};d.prototype.Sn=function(c){if(!c.Ma(this.$l))return 0;var e=this.TC(c.o),d=this.TC(c.v),b=this.UC(c.A);c=this.UC(c.B);0>e&&(e=0);0>b&&(b=0);d>=this.hg&&(d=this.hg-1);c>=this.hg&&(c=this.hg-1);if(e>d||b>c)return 0;for(var f=Math.max(d-e,1)*Math.max(c-b,1),l=0,g=this.In,h=this.hg,m=0;;){if(32>f||16>h){for(f=b;f<=c;f++)for(var n=e;n<=d;n++)if(m=this.Dh[l+g*f+(n>>4)]>>2*(n&15)&3,1<m)return 2;if(0==m)return 0;if(1==m)return 1}l+=g*h;h=a.J.truncate(h/2);g=a.J.truncate((2*
h+31)/32);e=a.J.truncate(e/2);b=a.J.truncate(b/2);d=a.J.truncate(d/2);c=a.J.truncate(c/2);f=Math.max(d-e,1)*Math.max(c-b,1)}};d.prototype.JT=function(){return this.hg*this.In};return d}();a.wy=f})(y||(y={}));(function(a){(function(a){a[a.contains=1]="contains";a[a.within=2]="within";a[a.equals=3]="equals";a[a.disjoint=4]="disjoint";a[a.touches=8]="touches";a[a.crosses=16]="crosses";a[a.overlaps=32]="overlaps";a[a.unknown=0]="unknown";a[a.intersects=1073741824]="intersects"})(a.QN||(a.QN={}));var b=
function(){function a(){}a.pa=function(c,e,d,b,f,g,l,h){var k=new a;k.ax=c;k.An=e;k.dk=d;k.rj=b;k.QI=f;k.F_=g;k.G_=l;k.H_=h;return k};return a}(),f=function(){function d(){}d.SE=function(c,e,b){if(!d.bz(c))return!1;var k=a.ma.ah(e,c,!1);e=!1;a.wl.IF(c)&&(e=e||c.Wu(k,b));k=c.G();1736!=k&&1607!=k||!a.wl.GF(c)||0==b||(e=e||c.Hj(b));1736!=k&&1607!=k||!a.wl.HF(c)||0==b||(e=e||c.AO());return e};d.bz=function(c){return a.wl.IF(c)||a.wl.GF(c)||a.wl.HF(c)};return d}();a.Fu=f;f=function(){function d(){this.Ph=
[]}d.YB=function(c,e,b,f,g){var k=c.G(),l=e.G();if(197==k){if(197==l)return d.qO(c,e,b,f);if(33==l)return 2==f?f=1:1==f&&(f=2),d.jG(e,c,b,f)}else if(33==k){if(197==l)return d.jG(c,e,b,f);if(33==l)return d.tO(c,e,b,f)}if(c.u()||e.u())return 4==f?!0:!1;var h=new a.h;c.s(h);var r=new a.h;e.s(r);var m=new a.h;m.I(h);m.Nb(r);b=a.ma.be(b,m,!1);if(d.Dk(h,r,b))return 4==f?!0:!1;h=!1;a.xl.Oc(k)&&(k=new a.Ua(c.description),k.dc(c,!0),c=k,k=1607);a.xl.Oc(l)&&(l=new a.Ua(e.description),l.dc(e,!0),e=l,l=1607);
if(197!=k&&197!=l){if(c.tb()<e.tb()||33==k&&550==l)2==f?f=1:1==f&&(f=2)}else 1736!=k&&197!=l&&(2==f?f=1:1==f&&(f=2));switch(k){case 1736:switch(l){case 1736:h=d.fu(c,e,b,f,g);break;case 1607:h=d.Pn(c,e,b,f,g);break;case 33:h=d.eu(c,e,b,f,g);break;case 550:h=d.du(c,e,b,f,g);break;case 197:h=d.cD(c,e,b,f,g)}break;case 1607:switch(l){case 1736:h=d.Pn(e,c,b,f,g);break;case 1607:h=d.LB(c,e,b,f,g);break;case 33:h=d.hu(c,e,b,f,g);break;case 550:h=d.gu(c,e,b,f,g);break;case 197:h=d.qD(c,e,b,f)}break;case 33:switch(l){case 1736:h=
d.eu(e,c,b,f,g);break;case 1607:h=d.hu(e,c,b,f,g);break;case 550:h=d.$t(e,c,b,f,g)}break;case 550:switch(l){case 1736:h=d.du(e,c,b,f,g);break;case 1607:h=d.gu(e,c,b,f,g);break;case 550:h=d.CB(c,e,b,f,g);break;case 33:h=d.$t(c,e,b,f,g);break;case 197:h=d.QJ(c,e,b,f)}break;case 197:switch(l){case 1736:h=d.cD(e,c,b,f,g);break;case 1607:h=d.qD(e,c,b,f);break;case 550:h=d.QJ(e,c,b,f)}}return h};d.qO=function(c,e,b,f){if(c.u()||e.u())return 4==f?!0:!1;var k=new a.h,g=new a.h,l=new a.h;c.s(k);e.s(g);l.I(k);
l.Nb(g);c=a.ma.be(b,l,!1);switch(f){case 4:return d.Dk(k,g,c);case 2:return d.QE(g,k,c);case 1:return d.QE(k,g,c);case 3:return d.We(k,g,c);case 8:return d.BP(k,g,c);case 32:return d.ZO(k,g,c);case 16:return d.CL(k,g,c)}return!1};d.jG=function(c,e,b,f){if(c.u()||e.u())return 4==f?!0:!1;c=c.w();var k=new a.h,g=new a.h;e.s(k);g.I(c);g.Nb(k);e=a.ma.be(b,g,!1);switch(f){case 4:return d.Cx(c,k,e);case 2:return d.WC(c,k,e);case 1:return d.CN(c,k,e);case 3:return d.oL(c,k,e);case 8:return d.VC(c,k,e)}return!1};
d.tO=function(c,e,b,f){if(c.u()||e.u())return 4==f?!0:!1;c=c.w();e=e.w();var k=new a.h;k.I(c);k.Nb(e);b=a.ma.be(b,k,!1);switch(f){case 4:return d.LN(c,e,b);case 2:return d.dL(e,c,b);case 1:return d.dL(c,e,b);case 3:return d.xL(c,e,b)}return!1};d.fu=function(a,e,b,f,g){switch(f){case 4:return d.gS(a,e,b);case 2:return d.Dx(e,a,b,g);case 1:return d.Dx(a,e,b,g);case 3:return d.hU(a,e,b);case 8:return d.kW(a,e,b);case 32:return d.gV(a,e,b,g)}return!1};d.Pn=function(a,e,b,f,g){switch(f){case 4:return d.ES(a,
e,b);case 1:return d.KB(a,e,b,g);case 8:return d.uW(a,e,b,g);case 16:return d.CP(a,e,b)}return!1};d.eu=function(a,e,b,f){switch(f){case 4:return d.VR(a,e,b);case 1:return d.vO(a,e,b);case 8:return d.cW(a,e,b)}return!1};d.du=function(a,e,b,f){switch(f){case 4:return d.AR(a,e,b);case 1:return d.sO(a,e,b);case 8:return d.RV(a,e,b);case 16:return d.sP(a,e,b)}return!1};d.cD=function(a,e,b,f,g){if(d.kQ(a,e,b))return 4==f?!0:!1;if(4==f)return!1;switch(f){case 2:return d.cX(a,e,b);case 1:return d.pO(a,e,
b);case 3:return d.eU(a,e,b);case 8:return d.jV(a,e,b,g);case 32:return d.dV(a,e,b,g);case 16:return d.DL(a,e,b,g)}return!1};d.LB=function(a,e,b,f){switch(f){case 4:return d.xZ(a,e,b);case 2:return d.mD(e,a,b);case 1:return d.mD(a,e,b);case 3:return d.NL(a,e,b);case 8:return d.sD(a,e,b);case 32:return d.bM(a,e,b);case 16:return d.oD(a,e,b)}return!1};d.hu=function(a,e,b,f){switch(f){case 4:return d.vZ(a,e,b);case 1:return d.QY(a,e,b);case 8:return d.xM(a,e,b)}return!1};d.gu=function(a,e,b,f){switch(f){case 4:return d.tZ(a,
e,b);case 1:return d.FX(a,e,b);case 8:return d.mM(a,e,b);case 16:return d.lZ(a,e,b)}return!1};d.qD=function(a,e,b,f){if(d.oZ(a,e,b))return 4==f?!0:!1;if(4==f)return!1;switch(f){case 2:return d.CM(a,e,b);case 1:return d.mX(a,e,b);case 3:return d.HL(a,e,b);case 8:return d.iM(a,e,b);case 32:return d.YL(a,e,b);case 16:return d.dZ(a,e,b)}return!1};d.CB=function(a,e,b,f){switch(f){case 4:return d.QL(a,e,b);case 2:return d.rJ(e,a,b);case 1:return d.rJ(a,e,b);case 3:return d.aM(a,e,b);case 32:return d.GM(a,
e,b)}return!1};d.$t=function(a,e,b,f){switch(f){case 4:return d.zJ(a,e,b);case 2:return d.RM(a,e,b);case 1:return d.nZ(a,e,b);case 3:return d.yx(a,e,b)}return!1};d.QJ=function(a,e,b,f){switch(f){case 4:return d.ML(a,e,b);case 2:return d.NM(a,e,b);case 1:return d.kZ(a,e,b);case 3:return d.XL(a,e,b);case 8:return d.KM(a,e,b);case 16:return d.GL(a,e,b)}return!1};d.hU=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(!d.We(k,f,b))return!1;k=d.wc(c,e,!1);if(4==k||1==k||2==k)return!1;if(d.pJ(c,e,
b))return!0;k=c.Rb();f=e.Rb();return Math.abs(k-f)>4*Math.max(c.D(),e.D())*b?!1:d.NB(c,e,b,!0)};d.gS=function(a,e,b){var c=d.wc(a,e,!0);return 4==c?!0:1==c||2==c||1073741824==c?!1:d.aD(a,e,b)};d.kW=function(a,e,b){var c=d.wc(a,e,!1);return 4==c||1==c||2==c?!1:d.gD(a,e,b,null)};d.gV=function(a,e,b,f){var c=d.wc(a,e,!1);return 4==c||1==c||2==c?!1:d.bD(a,e,b,f)};d.Dx=function(c,e,b,f){var k=new a.h,g=new a.h;c.s(k);e.s(g);if(!d.Ec(k,g,b))return!1;k=d.wc(c,e,!1);return 4==k||2==k?!1:1==k?!0:d.AL(c,e,
b,f)};d.ES=function(a,e,b){var c=d.wc(a,e,!0);return 4==c?!0:1==c||1073741824==c?!1:d.aD(a,e,b)};d.uW=function(a,e,b,f){var c=d.wc(a,e,!1);return 4==c||1==c?!1:d.iD(a,e,b,f)};d.CP=function(a,e,b){var c=d.wc(a,e,!1);return 4==c||1==c?!1:d.$C(a,e,b,null)};d.KB=function(c,e,b,f){var k=new a.h,g=new a.h;c.s(k);e.s(g);if(!d.Ec(k,g,b))return!1;k=d.wc(c,e,!1);return 4==k?!1:1==k?!0:d.BL(c,e,b,f)};d.VR=function(c,e,d){return 0==a.gd.VH(c,e,d)?!0:!1};d.cW=function(a,e,b){e=e.w();return d.dD(a,e,b)};d.vO=function(a,
e,b){e=e.w();return d.zL(a,e,b)};d.AR=function(c,e,b){var k=d.wc(c,e,!1);if(4==k)return!0;if(1==k)return!1;k=new a.h;c.s(k);k.O(b,b);for(var f=new a.b,g=0;g<e.D();g++)if(e.w(g,f),k.contains(f)){var l=a.gd.fe(c,f,b);if(1==l||2==l)return!1}return!0};d.RV=function(c,e,d){var b=this.wc(c,e,!1);if(4==b||1==b)return!1;b=new a.h;c.s(b);b.O(d,d);var k,f=!1,g;g=c;for(var l=!1,h=0;h<e.D();h++){k=e.Aa(h);if(b.contains(k))if(k=a.gd.fe(g,k,d),2==k)f=!0;else if(1==k)return!1;l||(!a.ff.qm(c,e.D()-1)||null!=c.ob&&
null!=c.ob.Mb?g=c:(g=new a.Ia,c.copyTo(g),g.Hj(1)),l=!0)}return f?!0:!1};d.sP=function(c,e,d){var b=this.wc(c,e,!1);if(4==b||1==b)return!1;var k=new a.h,b=new a.h,f=new a.h;c.s(k);e.s(f);b.I(k);b.O(d,d);var f=k=!1,g,l;l=c;for(var h=!1,m=0;m<e.D();m++){g=e.Aa(m);b.contains(g)?(g=a.gd.fe(l,g,d),0==g?f=!0:1==g&&(k=!0)):f=!0;if(k&&f)return!0;h||(!a.ff.qm(c,e.D()-1)||null!=c.ob&&null!=c.ob.Mb?l=c:(l=new a.Ia,c.copyTo(l),l.Hj(1)),h=!0)}return!1};d.sO=function(c,e,d){var b=new a.h,k=new a.h;c.s(b);e.s(k);
if(!this.Ec(b,k,d))return!1;k=this.wc(c,e,!1);if(4==k)return!1;if(1==k)return!0;var k=!1,f,g;g=c;for(var l=!1,h=0;h<e.D();h++){f=e.Aa(h);if(!b.contains(f))return!1;f=a.gd.fe(g,f,d);if(1==f)k=!0;else if(0==f)return!1;l||(!a.ff.qm(c,e.D()-1)||null!=c.ob&&null!=c.ob.Mb?g=c:(g=new a.Ia,c.copyTo(g),g.Hj(1)),l=!0)}return k};d.eU=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(!d.We(k,f,b))return!1;k=new a.Ia;k.jd(e,!1);return d.NB(c,k,b,!0)};d.kQ=function(c,e,b){var k=d.wc(c,e,!1);if(4==k)return!0;
if(1==k||2==k)return!1;var f=new a.h,k=new a.h;c.s(f);e.s(k);if(d.Ec(k,f,b))return!1;f=new a.b;k.Un(f);e=a.gd.fe(c,f,b);if(0!=e)return!1;k.SJ(f);e=a.gd.fe(c,f,b);if(0!=e)return!1;k.Vn(f);e=a.gd.fe(c,f,b);if(0!=e)return!1;k.VJ(f);e=a.gd.fe(c,f,b);if(0!=e)return!1;e=c.Pa(0);f=new a.h;f.I(k);f.O(b,b);for(var g=0,l=c.D();g<l;g++){var h=e.read(2*g),m=e.read(2*g+1);if(f.contains(h,m))return!1}return!d.WH(c,k,b)};d.jV=function(c,e,b,f){var k=d.wc(c,e,!1);if(4==k||1==k||2==k)return!1;var k=new a.h,g=new a.h;
c.s(k);e.s(g);if(d.Ec(g,k,b))return!1;if(g.N()<=b&&g.fa()<=b)return e=e.Bq(),d.dD(c,e,b);if(g.N()<=b||g.fa()<=b)return k=new a.Ua,g=new a.Wa,e.ig(0,g),k.Rf(g),e.ig(2,g),k.lineTo(g),d.iD(c,k,b,f);k=new a.Ia;k.jd(e,!1);return d.gD(c,k,b,f)};d.dV=function(c,e,b,f){var k=d.wc(c,e,!1);if(4==k||1==k||2==k)return!1;var k=new a.h,g=new a.h;c.s(k);e.s(g);if(d.Ec(g,k,b)||g.N()<=b||g.fa()<=b)return!1;k=new a.Ia;k.jd(e,!1);return d.bD(c,k,b,f)};d.cX=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return d.Ec(f,
k,b)};d.pO=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(!d.Ec(k,f,b))return!1;k=d.wc(c,e,!1);if(4==k||2==k)return!1;if(1==k)return!0;if(f.N()<=b&&f.fa()<=b)return e=e.Bq(),d.zL(c,e,b);if(f.N()<=b||f.fa()<=b)return f=new a.Ua,k=new a.Wa,e.ig(0,k),f.Rf(k),e.ig(2,k),f.lineTo(k),d.BL(c,f,b,null);f=new a.Ia;f.jd(e,!1);return d.AL(c,f,b,null)};d.DL=function(c,e,b,f){var k=new a.h,g=new a.h;c.s(k);e.s(g);if(d.Ec(g,k,b)||g.fa()>b&&g.N()>b||g.fa()<=b&&g.N()<=b)return!1;k=new a.Ua;g=new a.Wa;e.ig(0,
g);k.Rf(g);e.ig(2,g);k.lineTo(g);return d.$C(c,k,b,f)};d.NL=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return d.We(k,f,b)&&4!=d.wc(c,e,!1)?d.pJ(c,e,b)?!0:d.NB(c,e,b,!1):!1};d.xZ=function(c,e,d){return 4==this.wc(c,e,!1)?!0:(new a.Mm(c,e,d,!0)).next()?!this.eI(c,e,d):!1};d.sD=function(c,e,b){if(4==d.wc(c,e,!1))return!1;var k=new a.Sd(0);if(0!=d.QB(c,e,b,k))return!1;for(var f=new a.Ed,g=0;g<k.size;g+=2){var l=k.read(g),h=k.read(g+1);f.kv(l,h)}c=c.Gg();e=e.Gg();c.Jd(e,0,e.D());return d.xx(c,
f,b)};d.oD=function(c,e,b){if(4==d.wc(c,e,!1))return!1;var k=new a.Sd(0);if(0!=d.QB(c,e,b,k))return!1;for(var f=new a.Ed,g=0;g<k.size;g+=2){var l=k.read(g),h=k.read(g+1);f.kv(l,h)}c=c.Gg();e=e.Gg();c.Jd(e,0,e.D());return!d.xx(c,f,b)};d.bM=function(a,e,b){return 4==d.wc(a,e,!1)?!1:d.ZH(a,e,b)};d.mD=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return d.Ec(k,f,b)&&4!=d.wc(c,e,!1)?d.Wg(e,c,b,!1):!1};d.vZ=function(a,e,b){if(4==d.wc(a,e,!1))return!0;e=e.w();return!d.GA(a,e,b)};d.xM=function(a,
e,b){if(4==d.wc(a,e,!1))return!1;e=e.w();return d.fC(a,e,b)};d.QY=function(a,e,b){if(4==d.wc(a,e,!1))return!1;e=e.w();return d.xH(a,e,b)};d.tZ=function(a,e,b){return 4==d.wc(a,e,!1)?!0:!d.YH(a,e,b,!1)};d.mM=function(c,e,d){if(4==this.wc(c,e,!1))return!1;var b=c.Da(),k=new a.h,f=new a.h,g=new a.h;c.s(k);e.s(f);k.O(d,d);f.O(d,d);g.I(k);g.Ma(f);var l,h,k=null;l=c.ob;null!=l?(h=l.Mb,k=l.np,null==h&&(h=l=a.ma.Lj(c,g))):h=l=a.ma.Lj(c,g);var m=h.mf(),n=null;null!=k&&(n=k.mf());var p=new a.b,t=new a.b,u=
!1,q=d*d,k=new a.Gm(e.D());for(l=0;l<e.D();l++)k.write(l,0);for(l=0;l<e.D();l++)if(e.w(l,p),g.contains(p))if(f.I(p.x,p.y,p.x,p.y),null==n||(n.Ni(f,d),-1!=n.next())){m.Ni(f,d);for(var y=m.next();-1!=y;y=m.next())if(b.Tb(h.ja(y)),y=b.ba(),y.gc(y.oe(p,!1),t),a.b.sc(p,t)<=q){k.write(l,1);u=!0;break}}if(!u)return!1;c=c.Gg();b=new a.Ed;f=new a.b;for(l=0;l<e.D();l++)0!=k.read(l)&&(e.w(l,f),b.kv(f.x,f.y));return this.xx(c,b,d)};d.lZ=function(c,e,d){if(4==this.wc(c,e,!1))return!1;var b=c.Da(),k=new a.h,f=
new a.h,g=new a.h;c.s(k);e.s(f);k.O(d,d);f.O(d,d);g.I(k);g.Ma(f);var l,h,k=null;l=c.ob;null!=l?(h=l.Mb,k=l.np,null==h&&(h=l=a.ma.Lj(c,g))):h=l=a.ma.Lj(c,g);var m=h.mf(),n=null;null!=k&&(n=k.mf());var p=new a.b,t=new a.b,u=!1,q=!1,y=d*d,k=new a.Gm(e.D());for(l=0;l<e.D();l++)k.write(l,0);for(l=0;l<e.D();l++)if(e.w(l,p),g.contains(p))if(f.I(p.x,p.y,p.x,p.y),null!=n&&(n.Ni(f,d),-1==n.next()))q=!0;else{m.Ni(f,d);for(var x=!1,z=m.next();-1!=z;z=m.next())if(b.Tb(h.ja(z)),z=b.ba(),z.gc(z.oe(p,!1),t),a.b.sc(p,
t)<=y){k.write(l,1);x=u=!0;break}x||(q=!0)}else q=!0;if(!u||!q)return!1;c=c.Gg();b=new a.Ed;f=new a.b;for(l=0;l<e.D();l++)0!=k.read(l)&&(e.w(l,f),b.kv(f.x,f.y));return!this.xx(c,b,d)};d.FX=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(!d.Ec(k,f,b)||4==d.wc(c,e,!1)||!d.YH(c,e,b,!0))return!1;c=c.Gg();return!d.BJ(c,e,b)};d.HL=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return f.fa()>b&&f.N()>b?!1:d.We(k,f,b)};d.oZ=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return d.Ec(f,
k,b)?!1:!d.WH(c,f,b)};d.iM=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(f.fa()<=b&&f.N()<=b)return f=e.Bq(),d.fC(c,f,b);if(f.fa()<=b||f.N()<=b)return f=new a.Ua,k=new a.Wa,e.ig(0,k),f.Rf(k),e.ig(2,k),f.lineTo(k),d.sD(c,f,b);c=c.Da();e=new a.h;k=new a.h;e.I(f);k.I(f);e.O(-b,-b);k.O(b,b);for(var f=!1,g=new a.h,l=new a.h;c.Ya();)for(;c.Ca();){c.ba().s(g);l.I(e);l.Ma(g);if(!l.u()&&(l.fa()>b||l.N()>b))return!1;l.I(k);l.Ma(g);l.u()||(f=!0)}return f};d.YL=function(c,e,b){var k=new a.h,f=new a.h;
c.s(k);e.s(f);if(d.Ec(k,f,b)||d.Ec(f,k,b)||d.Ec(f,k,b)||f.fa()>b&&f.N()>b||f.fa()<=b&&f.N()<=b)return!1;k=new a.Ua;f=new a.Wa;e.ig(0,f);k.Rf(f);e.ig(2,f);k.lineTo(f);return d.ZH(c,k,b)};d.CM=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(!d.Ec(f,k,b)||f.fa()<=b&&f.N()<=b)return!1;if(f.fa()<=b||f.N()<=b)return d.Ec(f,k,b);c=c.Da();e=new a.h;e.I(f);e.O(-b,-b);for(var f=!1,k=new a.h,g=new a.h;c.Ya();)for(;c.Ca();)c.ba().s(k),e.Um(k)?f=!0:(g.I(e),g.Ma(k),!g.u()&&(g.fa()>b||g.N()>b)&&(f=!0));
return f};d.mX=function(c,e,b){var k=new a.h,f=new a.h;e.s(f);c.s(k);if(!d.Ec(k,f,b)||f.fa()>b&&f.N()>b)return!1;if(f.fa()<=b&&f.N()<=b)return e=e.Bq(),d.xH(c,e,b);k=new a.Ua;f=new a.Wa;e.ig(0,f);k.Rf(f);e.ig(2,f);k.lineTo(f);return d.Wg(k,c,b,!1)};d.dZ=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(d.Ec(f,k,b)||f.fa()<=b&&f.N()<=b)return!1;if(f.fa()<=b||f.N()<=b)return k=new a.Ua,f=new a.Wa,e.ig(0,f),k.Rf(f),e.ig(2,f),k.lineTo(f),d.oD(c,k,b);c=c.Da();e=new a.h;k=new a.h;k.I(f);e.I(f);k.O(-b,
-b);e.O(b,b);for(var g=f=!1,l=new a.h,h=new a.h;c.Ya();)for(;c.Ca();)if(c.ba().s(l),g||e.contains(l)||(g=!0),f||(h.I(k),h.Ma(l),!h.u()&&(h.fa()>b||h.N()>b)&&(f=!0)),f&&g)return!0;return!1};d.aM=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return d.We(k,f,b)?d.hM(c,e,b)?!0:d.PC(c,e,b,!1,!0,!1):!1};d.QL=function(a,e,b){return!d.BJ(a,e,b)};d.GM=function(a,e,b){return d.PC(a,e,b,!1,!1,!0)};d.rJ=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return d.Ec(k,f,b)?d.PC(e,c,b,!0,!1,!1):!1};
d.xx=function(c,e,d){d*=d;for(var b=new a.b,k=new a.b,f=0;f<e.D();f++){e.w(f,k);for(var g=!1,l=0;l<c.D();l++)if(c.w(l,b),a.b.sc(b,k)<=d){g=!0;break}if(!g)return!1}return!0};d.yx=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return d.We(k,f,b)};d.zJ=function(a,e,b){e=e.w();return d.Zt(a,e,b)};d.RM=function(a,e,b){return d.yx(a,e,b)};d.nZ=function(a,e,b){return!d.zJ(a,e,b)};d.XL=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);return f.fa()>b||f.N()>b?!1:d.We(k,f,b)};d.ML=function(c,e,
b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(d.Ec(f,k,b))return!1;e=new a.h;e.I(f);e.O(b,b);b=new a.b;for(f=0;f<c.D();f++)if(c.w(f,b),e.contains(b))return!1;return!0};d.KM=function(c,e,d){var b=new a.h,k=new a.h,f=new a.h;e.s(b);if(b.fa()<=d&&b.N()<=d)return!1;if(b.fa()<=d||b.N()<=d){e=new a.b;var g=!1;k.I(b);f.I(b);k.O(d,d);b.fa()>d?f.O(0,-d):f.O(-d,0);for(var l=0;l<c.D();l++)if(c.w(l,e),k.contains(e)){if(b.fa()>d){if(e.y>f.A&&e.y<f.B)return!1}else if(e.x>f.o&&e.x<f.v)return!1;g=!0}return g}k.I(b);
f.I(b);k.O(d,d);f.O(-d,-d);e=new a.b;g=!1;for(l=0;l<c.D();l++)if(c.w(l,e),k.contains(e)){if(f.Um(e))return!1;g=!0}return g};d.NM=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(!d.Ec(f,k,b))return!1;if(f.fa()<=b&&f.N()<=b)return d.We(k,f,b);if(f.fa()<=b||f.N()<=b){e=!1;var k=new a.h,g=new a.h;k.I(f);g.I(f);f.fa()>b?k.O(0,-b):k.O(-b,0);g.O(b,b);for(var l=new a.b,h=0;h<c.D();h++){c.w(h,l);if(!g.contains(l))return!1;f.fa()>b?l.y>k.A&&l.y<k.B&&(e=!0):l.x>k.o&&l.x<k.v&&(e=!0)}return e}e=!1;k=
new a.h;g=new a.h;k.I(f);g.I(f);k.O(-b,-b);g.O(b,b);l=new a.b;for(h=0;h<c.D();h++){c.w(h,l);if(!g.contains(l))return!1;k.Um(l)&&(e=!0)}return e};d.kZ=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(!d.Ec(k,f,b)||f.fa()>b||f.N()>b)return!1;e=e.Bq();return!d.Zt(c,e,b)};d.GL=function(c,e,b){var k=new a.h,f=new a.h;c.s(k);e.s(f);if(d.Ec(f,k,b)||f.fa()<=b&&f.N()<=b)return!1;if(f.fa()<=b||f.N()<=b){e=new a.h;k=new a.h;e.I(f);f.fa()>b?e.O(0,-b):e.O(-b,0);k.I(f);k.O(b,b);for(var g=new a.b,l=!1,h=
!1,m=0;m<c.D();m++)if(c.w(m,g),l||(f.fa()>b?g.y>e.A&&g.y<e.B&&(l=!0):g.x>e.o&&g.x<e.v&&(l=!0)),h||k.contains(g)||(h=!0),l&&h)return!0;return!1}e=new a.h;k=new a.h;e.I(f);e.O(-b,-b);k.I(f);k.O(b,b);g=new a.b;h=l=!1;for(m=0;m<c.D();m++)if(c.w(m,g),!l&&e.Um(g)&&(l=!0),h||k.contains(g)||(h=!0),l&&h)return!0;return!1};d.xL=function(c,e,d){return a.b.sc(c,e)<=d*d?!0:!1};d.LN=function(c,e,d){return a.b.sc(c,e)>d*d?!0:!1};d.dL=function(a,e,b){return d.xL(a,e,b)};d.oL=function(c,e,b){var k=new a.h;k.I(c);
return d.We(k,e,b)};d.Cx=function(c,e,d){var b=new a.h;b.I(e);b.O(d,d);return!b.contains(c)};d.VC=function(c,e,d){if(e.fa()<=d&&e.N()<=d)return!1;var b=new a.h,k=new a.h;b.I(e);b.O(d,d);if(!b.contains(c))return!1;if(e.fa()<=d||e.N()<=d){k.I(e);e.fa()>d?k.O(0,-d):k.O(-d,0);if(e.fa()>d){if(c.y>k.A&&c.y<k.B)return!1}else if(c.x>k.o&&c.x<k.v)return!1;return!0}k.I(e);k.O(-d,-d);return k.Um(c)?!1:!0};d.WC=function(c,e,d){if(e.fa()<=d&&e.N()<=d)return!0;if(e.fa()<=d||e.N()<=d){var b=new a.h;b.I(e);e.fa()>
d?b.O(0,-d):b.O(-d,0);var k=!1;e.fa()>d?c.y>b.A&&c.y<b.B&&(k=!0):c.x>b.o&&c.x<b.v&&(k=!0);return k}b=new a.h;b.I(e);b.O(-d,-d);return b.Um(c)};d.CN=function(a,e,b){return d.oL(a,e,b)};d.We=function(a,e,b){return d.Ec(a,e,b)&&d.Ec(e,a,b)};d.Dk=function(c,e,d){var b=new a.h;b.I(e);b.O(d,d);return!c.Yb(b)};d.BP=function(c,e,b){if(c.fa()<=b&&c.N()<=b){var k=c.Wf();return d.VC(k,e,b)}if(e.fa()<=b&&e.N()<=b)return k=e.Wf(),d.VC(k,c,b);c.fa()>b&&c.N()>b&&(e.fa()<=b||e.N()<=b)?k=e:(k=c,c=e);if(k.fa()<=b||
k.N()<=b){if(c.fa()<=b||c.N()<=b){e=new a.Hb;var f=new a.Hb,g=[0,0],l=[0,0],h=new a.b;k.Un(h);e.Mc(h);k.Vn(h);e.Zc(h);c.Un(h);f.Mc(h);c.Vn(h);f.Zc(h);e.Ma(f,null,g,l,b);return 1!=e.Ma(f,null,null,null,b)?!1:0==g[0]||1==g[1]||0==l[0]||1==l[1]}e=new a.h;f=new a.h;e.I(c);e.O(-b,-b);f.I(e);f.Ma(k);return!f.u()&&(f.fa()>b||f.N()>b)?!1:!0}c.O(b,b);f=new a.h;f.I(k);f.Ma(c);return f.u()||!f.u()&&f.fa()>b&&f.N()>b?!1:!0};d.ZO=function(c,e,b){if(d.Ec(c,e,b)||d.Ec(e,c,b)||c.fa()<=b&&c.N()<=b||e.fa()<=b&&e.N()<=
b)return!1;if(c.fa()<=b||c.N()<=b){if(e.fa()>b&&e.N()>b)return!1;var f=new a.Hb,k=new a.Hb,g=[0,0],l=[0,0],h=new a.b;c.Un(h);f.Mc(h);c.Vn(h);f.Zc(h);e.Un(h);k.Mc(h);e.Vn(h);k.Zc(h);f.Ma(k,null,g,l,b);return 2!=f.Ma(k,null,null,null,b)?!1:(0<g[0]||1>g[1])&&(0<l[0]||1>l[1])}if(e.fa()<=b||e.N()<=b)return!1;f=new a.h;f.I(c);f.Ma(e);return f.u()||f.fa()<=b||f.N()<=b?!1:!0};d.QE=function(c,e,b){if(!d.Ec(c,e,b))return!1;if(c.fa()<=b&&c.N()<=b)return c=c.Wf(),d.WC(c,e,b);if(e.fa()<=b&&e.N()<=b)return e=e.Wf(),
d.WC(e,c,b);if(c.fa()<=b||c.N()<=b)return d.Ec(c,e,b);if(e.fa()<=b||e.N()<=b){var f=new a.h;f.I(c);f.O(-b,-b);if(f.Um(e))return!0;c=new a.h;c.I(f);c.Ma(e);return c.u()||c.fa()<=b&&c.N()<=b?!1:!0}return d.Ec(c,e,b)};d.CL=function(c,e,b){if(d.Ec(c,e,b)||d.Ec(e,c,b)||c.fa()<=b&&c.N()<=b||e.fa()<=b&&e.N()<=b||e.fa()>b&&e.N()>b&&c.fa()>b&&c.N()>b)return!1;var f;c.fa()>b&&c.N()>b?f=e:(f=c,c=e);if(c.fa()>b&&c.N()>b){e=new a.h;var k=new a.h;k.I(c);k.O(-b,-b);e.I(k);e.Ma(f);return e.u()||e.fa()<=b&&e.N()<=
b?!1:!0}e=new a.Hb;var k=new a.Hb,g=[0,0],l=[0,0],h=new a.b;f.Un(h);e.Mc(h);f.Vn(h);e.Zc(h);c.Un(h);k.Mc(h);c.Vn(h);k.Zc(h);e.Ma(k,null,g,l,b);return 1!=e.Ma(k,null,null,null,b)?!1:0<g[0]&&1>g[1]&&0<l[0]&&1>l[1]};d.aD=function(c,e,d){var b,f,k=new a.h,g=new a.h,l=new a.Mm(c,e,d,!0);if(!l.next())return!0;if(this.eI(c,e,d))return!1;var h;h=c;var m;m=null;1736==e.G()&&(m=e);var n=!1,p=!1;do{b=l.Ql();f=l.Ml();f=e.Aa(e.wa(f));k.I(l.dA());k.O(d,d);if(k.contains(f)&&(f=a.gd.fe(h,f,0),0!=f)||1736==e.G()&&
(b=c.Aa(c.wa(b)),g.I(l.Hz()),g.O(d,d),g.contains(b)&&(f=a.gd.fe(m,b,0),0!=f)))return!1;n||(!a.ff.qm(c,e.aa()-1)||null!=c.ob&&null!=c.ob.Mb?h=c:(h=new a.Ia,c.copyTo(h),h.Hj(1)),n=!0);1736!=e.G()||p||(p=e,!a.ff.qm(p,c.aa()-1)||null!=e.ob&&null!=e.ob.Mb?m=e:(m=new a.Ia,p.copyTo(m),m.Hj(1)),p=!0)}while(l.next());return!0};d.Ec=function(c,e,d){var b=new a.h;b.I(c);b.O(d,d);return b.contains(e)};d.Yp=function(c,e,d){var b=new a.h;b.I(e);b.O(d,d);e=new a.b;c.Un(e);if(!b.contains(e))return!0;c.SJ(e);if(!b.contains(e))return!0;
c.VJ(e);if(!b.contains(e))return!0;c.Vn(e);return b.contains(e)?!1:!0};d.pJ=function(c,e,d){if(c.aa()!=e.aa()||c.D()!=e.D())return!1;var b=new a.b,f=new a.b,k=!0;d*=d;for(var g=0;g<c.aa();g++){if(c.Gc(g)!=e.Gc(g)){k=!1;break}for(var l=c.wa(g);l<e.Gc(g);l++)if(c.w(l,b),e.w(l,f),a.b.sc(b,f)>d){k=!1;break}if(!k)break}return k?!0:!1};d.hM=function(c,e,d){if(c.D()!=e.D())return!1;var b=new a.b,f=new a.b,k=!0;d*=d;for(var g=0;g<c.D();g++)if(c.w(g,b),e.w(g,f),a.b.sc(b,f)>d){k=!1;break}return k?!0:!1};d.PC=
function(c,e,d,b,f,g){var k=!1,l;c.D()>e.D()?(b&&(b=!1,k=!0),l=e):(l=c,c=e);e=null;if(f||g||k){e=new a.Gm(c.D());for(var h=0;h<c.D();h++)e.write(h,0)}var h=new a.h,m=new a.h,r=new a.h;l.s(h);c.s(m);h.O(d,d);m.O(d,d);r.I(h);r.Ma(m);for(var m=new a.b,n=new a.b,v=!0,p=a.ma.AF(c,r),t=p.mf(),u=d*d,q=0;q<l.D();q++)if(l.w(q,m),r.contains(m)){var y=!1;h.I(m.x,m.y,m.x,m.y);t.Ni(h,d);for(var x=t.next();-1!=x&&!(x=p.ja(x),c.w(x,n),a.b.sc(m,n)<=u&&((f||g||k)&&e.write(x,1),y=!0,b));x=t.next());if(!y&&(v=!1,f||
b))return!1}else{if(f||b)return!1;v=!1}if(g&&v)return!1;if(b)return!0;for(h=0;h<c.D();h++)if(1==e.read(h)){if(g)return!0}else if(f||k)return!1;return g?!1:!0};d.BJ=function(c,e,d){var b;c.D()>e.D()?b=e:(b=c,c=e);e=new a.h;var f=new a.h,k=new a.h;b.s(e);c.s(f);e.O(d,d);f.O(d,d);k.I(e);k.Ma(f);for(var f=new a.b,g=new a.b,l=d*d,h=a.ma.AF(c,k),m=h.mf(),n=0;n<b.D();n++)if(b.w(n,f),k.contains(f)){e.I(f.x,f.y,f.x,f.y);m.Ni(e,d);for(var p=m.next();-1!=p;p=m.next())if(c.w(h.ja(p),g),a.b.sc(f,g)<=l)return!0}return!1};
d.NB=function(a,e,b,f){return d.Wg(a,e,b,f)&&d.Wg(e,a,b,f)};d.Wg=function(c,e,f,g){function k(a,c){return p.VF(a,c)}var l=!0,h=[0,0],m=[0,0],r=0,n=new a.ia(0),p=new d,t,u=new a.h,q=new a.h,y=new a.h;c.s(u);e.s(q);u.O(f,f);q.O(f,f);y.I(u);y.Ma(q);c=c.Da();var q=e.Da(),x=null,z=x=null,A=e.ob;null!=A?(x=A.Mb,z=A.np,null==x&&(x=a.ma.Lj(e,y))):x=a.ma.Lj(e,y);e=x.mf();A=null;for(null!=z&&(A=z.mf());c.Ya();)for(;c.Ca();){var w=!1,C=c.ba();C.s(u);if(!u.Yb(y))return!1;if(null!=A&&(A.Ni(u,f),-1==A.next()))return l=
!1;z=C.Rb();e.Xn(C,f);for(t=e.next();-1!=t;t=e.next()){q.Tb(x.ja(t));t=q.ba();var D=C.Ma(t,null,h,m,f);if(2==D&&(!g||m[0]<=m[1])){var D=h[0],F=h[1],E=m[0],B=m[1];if(D*z<=f&&(1-F)*z<=f){w=!0;r=0;n.resize(0);p.Ph.length=0;for(var I=c.Db(),E=!0;E;){if(c.Ca()){C=c.ba();z=C.Rb();D=C.Ma(t,null,h,m,f);if(2==D&&(!g||m[0]<=m[1])&&(D=h[0],F=h[1],D*z<=f&&(1-F)*z<=f)){I=c.Db();continue}if(q.Ca()&&(t=q.ba(),D=C.Ma(t,null,h,m,f),2==D&&(!g||m[0]<=m[1])&&(D=h[0],F=h[1],D*z<=f&&(1-F)*z<=f))){I=c.Db();continue}}E=
!1}I!=c.Db()&&(c.Tb(I),c.ba());break}else I=c.Db(),t=b.pa(I,c.Ta,D,F,q.Db(),q.Ta,E,B),p.Ph.push(t),n.add(n.size)}}if(!w){if(r==p.Ph.length)return!1;1<n.size-r&&n.Gd(r,n.size,k);for(w=0;r<p.Ph.length;r++)if(t=p.Ph[n.get(r)],!(t.dk<w&&t.rj<w)){if(z*(t.dk-w)>f)return!1;w=t.rj;if(z*(1-w)<=f||1==w)break}if(z*(1-w)>f)return!1;r=0;n.resize(0);p.Ph.length=0}}return l};d.ZH=function(c,e,b){if(1>d.QB(c,e,b,null))return!1;var f=new a.h,k=new a.h;c.s(f);e.s(k);var g=d.Yp(f,k,b),f=d.Yp(k,f,b);return g&&f?!0:g&&
!f?!d.Wg(e,c,b,!1):f&&!g?!d.Wg(c,e,b,!1):!d.Wg(c,e,b,!1)&&!d.Wg(e,c,b,!1)};d.QB=function(c,e,f,g){function k(a,c){return q.VF(a,c)}var l,h;c.hA()>e.hA()?(l=e,h=c):(l=c,h=e);c=l.Da();e=h.Da();var m=[0,0],r=[0,0],n=-1,p=0,t,u=new a.ia(0),q=new d,y,x=new a.h,z=new a.h,A=new a.h;l.s(x);h.s(z);x.O(f,f);z.O(f,f);A.I(x);A.Ma(z);l=null;null!=g&&(l=new a.b);t=z=z=null;var w=h.ob;null!=w?(z=w.Mb,t=w.np,null==z&&(z=a.ma.Lj(h,A))):z=a.ma.Lj(h,A);h=z.mf();w=null;for(null!=t&&(w=t.mf());c.Ya();)for(t=0;c.Ca();){var C=
c.ba();C.s(x);if(x.Yb(A)&&(null==w||(w.Ni(x,f),-1!=w.next()))){var D=C.Rb();h.Xn(C,f);for(var F=h.next();-1!=F;F=h.next()){var E=z.ja(F);e.Tb(E);y=e.ba();var B=y.Rb(),I=C.Ma(y,null,m,r,f);if(0<I){var F=m[0],n=r[0],H=2==I?m[1]:NaN,M=2==I?r[1]:NaN;if(2==I){if(D*(H-F)>f)return n=1;var R=D*(H-F);if(e.Ca()){y=e.ba();I=C.Ma(y,null,m,null,f);if(2==I){var I=m[0],K=m[1],I=D*(K-I);if(R+I>f)return n=1}e.Tb(E);e.ba()}if(!e.kn()){e.Li();y=e.Li();I=C.Ma(y,null,m,null,f);if(2==I&&(I=m[0],K=m[1],I=D*(K-I),R+I>f))return n=
1;e.Tb(E);e.ba()}if(c.Ca()){E=c.Db();C=c.ba();I=C.Ma(y,null,m,null,f);if(2==I&&(I=m[0],K=m[1],I=D*(K-I),R+I>f))return n=1;c.Tb(E);c.ba()}if(!c.kn()){E=c.Db();c.Li();C=c.Li();I=C.Ma(y,null,m,null,f);if(2==I&&(I=m[0],K=m[1],I=B*(K-I),R+I>f))return n=1;c.Tb(E);c.ba()}y=b.pa(c.Db(),c.Ta,F,H,e.Db(),e.Ta,n,M);q.Ph.push(y);u.add(u.size)}n=0;null!=g&&(C.gc(F,l),g.add(l.x),g.add(l.y))}}if(p<q.Ph.length){u.Gd(p,u.size,k);C=0;for(F=q.Ph[u.get(p)].An;p<q.Ph.length;p++)if(y=q.Ph[u.get(p)],!(y.dk<C&&y.rj<C))if(D*
(y.dk-C)>f)t=D*(y.rj-y.dk),C=y.rj,F=y.An;else{y.An!=F?(t=D*(y.rj-y.dk),F=y.An):t+=D*(y.rj-y.dk);if(t>f)return n=1;C=y.rj;if(1==C)break}D*(1-C)>f&&(t=0);p=0;u.resize(0);q.Ph.length=0}}}return n};d.eI=function(c,e,d){var b=c.Da(),f=e.Da();for(c=new a.Mm(c,e,d,!1);c.next();){e=c.Ql();var k=c.Ml();b.Tb(e);f.Tb(k);e=b.ba();if(0<f.ba().Ma(e,null,null,null,d))return!0}return!1};d.YH=function(c,e,d,b){var f=c.Da(),k=new a.h,g=new a.h,l=new a.h;c.s(k);e.s(g);k.O(d,d);k.contains(g);g.O(d,d);l.I(k);l.Ma(g);
k=c.ob;null!=k?(k=k.Mb,null==k&&(k=a.ma.Lj(c,l))):k=a.ma.Lj(c,l);c=k.mf();for(var h=new a.b,m=new a.b,r=d*d,n=0;n<e.D();n++)if(e.w(n,h),l.contains(h)){g.I(h.x,h.y,h.x,h.y);c.Ni(g,d);for(var p=!1,t=c.next();-1!=t;t=c.next())if(f.Tb(k.ja(t)),t=f.ba(),t.gc(t.oe(h,!1),m),a.b.sc(m,h)<=r){p=!0;break}if(b){if(!p)return!1}else if(p)return!0}return b?!0:!1};d.GA=function(c,e,d){var b=new a.b,f=d*d,k=c.Da();c=c.ob;if(null!=c&&(c=c.Mb,null!=c)){var g=new a.h;g.I(e);d=c.Wz(g,d);for(g=d.next();-1!=g;g=d.next())if(k.Tb(c.ja(g)),
k.Ca()){var g=k.ba(),l=g.oe(e,!1);g.gc(l,b);if(a.b.sc(e,b)<=f)return!0}return!1}for(c=new a.h;k.Ya();)for(;k.Ca();)if(g=k.ba(),g.s(c),c.O(d,d),c.contains(e)&&(l=g.oe(e,!1),g.gc(l,b),a.b.sc(e,b)<=f))return!0;return!1};d.xH=function(a,e,b){return d.GA(a,e,b)&&!d.fC(a,e,b)};d.fC=function(a,e,b){a=a.Gg();return!d.Zt(a,e,b)};d.WH=function(c,e,d){if(c.jn()){var b=new a.Hb(e.o,e.A,e.o,e.B),f=new a.Hb(e.o,e.B,e.v,e.B),k=new a.Hb(e.v,e.B,e.v,e.A);e=new a.Hb(e.v,e.A,e.o,e.A);for(c=c.Da();c.Ya();)for(;c.Ca();){var g=
c.ba();if(g.Yb(b,d)||g.Yb(f,d)||g.Yb(k,d)||g.Yb(e,d))return!0}}else{b=new a.h;b.I(e);b.O(d,d);d=c.Pa(0);f=new a.b;k=new a.b;e=new a.b;for(var g=new a.b,l=0,h=c.aa();l<h;l++)for(var m=!0,n=c.wa(l),p=c.Gc(l);n<p;n++)if(m)d.fc(2*n,k),m=!1;else{d.fc(2*n,f);e.L(k);g.L(f);if(0!=b.fz(e,g))return!0;k.L(f)}}return!1};d.wc=function(c,e,b){var f=c.G(),k=e.G();if(a.T.gh(f)){var g=c.ob;if(null!=g&&(g=g.Hi,null!=g))if(33==k){var l=e.w(),l=g.rm(l.x,l.y);if(1==l)return 1;if(0==l)return 4}else{l=new a.h;e.s(l);l=
g.Sn(l);if(1==l)return 1;if(0==l)return 4;if(b&&a.T.gh(k)&&d.YC(e,g))return 1073741824}}if(a.T.gh(k)&&(g=e.ob,null!=g&&(g=g.Hi,null!=g)))if(33==f){c=c.w();l=g.rm(c.x,c.y);if(1==l)return 2;if(0==l)return 4}else{e=new a.h;c.s(e);l=g.Sn(e);if(1==l)return 2;if(0==l)return 4;if(b&&a.T.gh(f)&&d.YC(c,g))return 1073741824}return 0};d.YC=function(c,e){for(var d=c.D(),b=new a.b,f=0;f<d;f++)if(c.w(f,b),1==e.rm(b.x,b.y))return!0;return!1};d.gD=function(c,e,d,b){for(var f=1<=c.Kk(0)&&1<=e.Kk(0),k=c.Da(),g=e.Da(),
l=[0,0],h=[0,0],m=new a.Mm(c,e,d,!1),r=!1;m.next();){var n=m.Ql(),p=m.Ml();k.Tb(n);g.Tb(p);n=k.ba();p=g.ba().Ma(n,null,h,l,d);if(2==p){r=l[0];p=l[1];n=n.Rb();if(f&&(p-r)*n>d)return!1;r=!0}else if(0!=p){r=l[0];n=h[0];if(0<r&&1>r&&0<n&&1>n)return!1;r=!0}}if(!r)return!1;k=new a.h;g=new a.h;f=new a.h;c.s(k);e.s(g);k.O(1E3*d,1E3*d);g.O(1E3*d,1E3*d);f.I(k);f.Ma(g);return 10<c.D()&&(c=a.me.clip(c,f,d,0),c.u())||10<e.D()&&(e=a.me.clip(e,f,d,0),e.u())?!1:a.Om.fu(c,e,d,"F********",b)};d.bD=function(c,e,b,f){var k=
1<=c.Kk(0)&&1<=e.Kk(0),g=new a.h,l=new a.h,h=new a.h;c.s(g);e.s(l);for(var m=!1,r=d.Yp(g,l,b),n=d.Yp(l,g,b),p=c.Da(),t=e.Da(),u=[0,0],q=[0,0],y=new a.Mm(c,e,b,!1);y.next();){var x=y.Ql(),z=y.Ml();p.Tb(x);t.Tb(z);z=p.ba();x=t.ba().Ma(z,null,q,u,b);if(2==x){var x=u[0],A=u[1],z=z.Rb();if(k&&(A-x)*z>b&&(m=!0,r&&n))return!0}else if(0!=x&&(x=u[0],z=q[0],0<x&&1>x&&0<z&&1>z))return!0}k=new a.h;p=new a.h;k.I(g);k.O(1E3*b,1E3*b);p.I(l);p.O(1E3*b,1E3*b);h.I(k);h.Ma(p);g="";g=m?g+"**":g+"T*";if(r){if(10<e.D()&&
(e=a.me.clip(e,h,b,0),e.u()))return!1;g+="****"}else g+="T***";if(n){if(10<c.D()&&(c=a.me.clip(c,h,b,0),c.u()))return!1;g+="***"}else g+="T**";return a.Om.fu(c,e,b,g.toString(),f)};d.AL=function(c,e,b,f){var k=[!1],g=d.yL(c,e,b,k);if(k[0])return g;k=new a.h;e.s(k);k.O(1E3*b,1E3*b);return 10<c.D()&&(c=a.me.clip(c,k,b,0),c.u())?!1:a.Om.Dx(c,e,b,f)};d.yL=function(c,e,d,b){b[0]=!1;for(var f=c.Da(),k=e.Da(),g=[0,0],l=[0,0],h=new a.Mm(c,e,d,!1),m=!1;h.next();){var r=h.Ql(),n=h.Ml();f.Tb(r,-1);k.Tb(n,-1);
r=f.ba();r=k.ba().Ma(r,null,l,g,d);if(0!=r&&(m=!0,1==r&&(r=g[0],n=l[0],0<r&&1>r&&0<n&&1>n)))return b[0]=!0,!1}if(!m){b[0]=!0;g=new a.h;c.s(g);g.O(d,d);h=c;m=!1;l=new a.h;b=0;for(f=e.aa();b<f;b++)if(0<e.Ka(b)){e.ik(b,l);if(g.Yb(l)){if(k=e.Aa(e.wa(b)),k=a.ff.ln(h,k,0),0==k)return!1}else return!1;m||(!a.ff.qm(c,e.aa()-1)||null!=c.ob&&null!=c.ob.Mb?h=c:(k=new a.Ia,c.copyTo(k),k.Hj(1),h=k),m=!0)}if(1==c.aa()||1607==e.G())return!0;g=new a.h;e.s(g);g.O(d,d);l=e;h=!1;d=new a.h;b=0;for(f=c.aa();b<f;b++)if(0<
c.Ka(b)){c.ik(b,d);if(g.Yb(d)&&(k=c.Aa(c.wa(b)),k=a.ff.ln(l,k,0),1==k))return!1;h||(!a.ff.qm(e,c.aa()-1)||null!=e.ob&&null!=e.ob.Mb?l=e:(k=new a.Ia,e.copyTo(k),k.Hj(1),l=k),h=!0)}return!0}return!1};d.iD=function(c,e,d,b){for(var f=c.Da(),k=e.Da(),g=[0,0],l=[0,0],h=new a.Mm(c,e,d,!1),m=!1;h.next();){var r=h.Ql(),n=h.Ml();f.Tb(r);k.Tb(n);r=f.ba();r=k.ba().Ma(r,null,l,g,d);if(2==r)m=!0;else if(0!=r){m=g[0];r=l[0];if(0<m&&1>m&&0<r&&1>r)return!1;m=!0}}if(!m)return!1;k=new a.h;g=new a.h;f=new a.h;c.s(k);
e.s(g);k.O(1E3*d,1E3*d);g.O(1E3*d,1E3*d);f.I(k);f.Ma(g);return 10<c.D()&&(c=a.me.clip(c,f,d,0),c.u())||10<e.D()&&(e=a.me.clip(e,f,d,0),e.u())?!1:a.Om.Pn(c,e,d,"F********",b)};d.$C=function(c,e,b,f){for(var k=c.Da(),g=e.Da(),l=[0,0],h=[0,0],m=new a.Mm(c,e,b,!1),r=!1;m.next();){var n=m.Ql(),p=m.Ml();k.Tb(n);g.Tb(p);n=k.ba();n=g.ba().Ma(n,null,h,l,b);if(2==n)r=!0;else if(0!=n){r=l[0];n=h[0];if(0<r&&1>r&&0<n&&1>n)return!0;r=!0}}if(!r)return!1;g=new a.h;l=new a.h;h=new a.h;m=new a.h;k=new a.h;c.s(g);e.s(l);
return d.Yp(l,g,b)?(h.I(g),h.O(1E3*b,1E3*b),m.I(l),m.O(1E3*b,1E3*b),k.I(h),k.Ma(m),10<c.D()&&(c=a.me.clip(c,k,b,0),c.u())||10<e.D()&&(e=a.me.clip(e,k,b,0),e.u())?!1:b=a.Om.Pn(c,e,b,"T********",f)):b=a.Om.Pn(c,e,b,"T*****T**",f)};d.BL=function(c,e,b,f){var k=[!1],g=d.yL(c,e,b,k);if(k[0])return g;k=new a.h;e.s(k);k.O(1E3*b,1E3*b);return 10<c.D()&&(c=a.me.clip(c,k,b,0),c.u())?!1:a.Om.KB(c,e,b,f)};d.zL=function(c,e,d){return 1==a.gd.fe(c,e,d)?!0:!1};d.dD=function(c,e,d){return 2==a.gd.fe(c,e,d)?!0:!1};
d.Zt=function(c,e,d){var b=new a.b;d*=d;for(var f=0;f<c.D();f++)if(c.w(f,b),a.b.sc(b,e)<=d)return!1;return!0};d.prototype.VF=function(a,e){a=this.Ph[a];e=this.Ph[e];return a.An<e.An||a.An==e.An&&(a.ax<e.ax||a.ax==e.ax&&(a.dk<e.dk||a.dk==e.dk&&(a.rj<e.rj||a.rj==e.rj&&a.QI<e.QI)))?-1:1};return d}();a.Fd=f})(y||(y={}));(function(a){var b;(function(a){a[a.InteriorInterior=0]="InteriorInterior";a[a.InteriorBoundary=1]="InteriorBoundary";a[a.InteriorExterior=2]="InteriorExterior";a[a.BoundaryInterior=3]=
"BoundaryInterior";a[a.BoundaryBoundary=4]="BoundaryBoundary";a[a.BoundaryExterior=5]="BoundaryExterior";a[a.ExteriorInterior=6]="ExteriorInterior";a[a.ExteriorBoundary=7]="ExteriorBoundary";a[a.ExteriorExterior=8]="ExteriorExterior"})(b||(b={}));var f;(function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates";a[a.AreaLinePredicates=1]="AreaLinePredicates";a[a.LineLinePredicates=2]="LineLinePredicates";a[a.AreaPointPredicates=3]="AreaPointPredicates";a[a.LinePointPredicates=4]="LinePointPredicates";
a[a.PointPointPredicates=5]="PointPointPredicates"})(f||(f={}));b=function(){function d(){this.Ie=0;this.i=new a.Pu;this.H=[0,0,0,0,0,0,0,0,0];this.eb=[0,0,0,0,0,0,0,0,0];this.ga=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Gn=this.ix=-1}d.XB=function(c,e,d,b,f){if(9!=b.length)throw a.f.X("relation string length has to be 9 characters");for(var k=0;9>k;k++){var g=b.charAt(k);if("*"!=g&&"T"!=g&&"F"!=g&&"0"!=g&&"1"!=g&&"2"!=g)throw a.f.X("relation string");}k=this.ET(b,c.tb(),e.tb());if(0!=k)return a.Fd.YB(c,
e,d,k,f);k=new a.h;c.s(k);g=new a.h;e.s(g);var l=new a.h;l.I(k);l.Nb(g);d=a.ma.be(d,l,!1);c=this.aG(c,d);e=this.aG(e,d);if(c.u()||e.u())return this.rX(c,e,b);k=e.G();g=!1;switch(c.G()){case 1736:switch(k){case 1736:g=this.fu(c,e,d,b,f);break;case 1607:g=this.Pn(c,e,d,b,f);break;case 33:g=this.eu(c,e,d,b,f);break;case 550:g=this.du(c,e,d,b,f)}break;case 1607:switch(k){case 1736:g=this.Pn(e,c,d,this.Pq(b),f);break;case 1607:g=this.LB(c,e,d,b,f);break;case 33:g=this.hu(c,e,d,b,f);break;case 550:g=this.gu(c,
e,d,b,f)}break;case 33:switch(k){case 1736:g=this.eu(e,c,d,this.Pq(b),f);break;case 1607:g=this.hu(e,c,d,this.Pq(b),f);break;case 33:g=this.FW(c,e,d,b);break;case 550:g=this.$t(e,c,d,this.Pq(b),f)}break;case 550:switch(k){case 1736:g=this.du(e,c,d,this.Pq(b),f);break;case 1607:g=this.gu(e,c,d,this.Pq(b),f);break;case 550:g=this.CB(c,e,d,b,f);break;case 33:g=this.$t(c,e,d,b,f)}break;default:g=!1}return g};d.fu=function(c,e,b,f,g){var k=new d;k.xj();k.Bj(f);k.nK();var l=new a.h,h=new a.h;c.s(l);e.s(h);
f=!1;a.Fd.Dk(l,h,b)&&(k.lv(c,e),f=!0);f||(l=a.Fd.wc(c,e,!1),4==l?(k.lv(c,e),f=!0):1==l?(k.Ry(e),f=!0):2==l&&(k.kF(c),f=!0));f||(f=new a.fd,c=f.Jb(c),e=f.Jb(e),k.Fp(f,b,g),k.tq(c,e),k.i.qh());return d.zg(k.H,k.dd)};d.Dx=function(c,e,b,f){var k=new d;k.xj();k.Bj("T*****F**");k.nK();var g=new a.h,l=new a.h;c.s(g);e.s(l);var h=!1;a.Fd.Dk(g,l,b)&&(k.lv(c,e),h=!0);h||(g=a.Fd.wc(c,e,!1),4==g?(k.lv(c,e),h=!0):1==g?(k.Ry(e),h=!0):2==g&&(k.kF(c),h=!0));if(h)return g=this.zg(k.H,k.dd);h=new a.fd;c=h.Jb(c);g=
h.Jb(e);a.rk.V(h,b,f,!1);b=h.Se(g).Gg();h.zq(0,!0,!0);a.lo.V(h,c,-1,!1,f);if(0==h.D(c))return!1;a.lo.V(h,g,-1,!1,f);k.Xr(h,f);e=0==h.D(g);if(!e&&(k.tq(c,g),k.i.qh(),g=this.zg(k.H,k.dd),!g))return g;c=h.Se(c);h=new a.fd;c=h.Jb(c);g=h.Jb(b);k.Xr(h,f);k.Ie=0;k.xj();k.Bj(e?"T*****F**":"******F**");k.gC();k.tq(c,g);k.i.qh();return g=this.zg(k.H,k.dd)};d.Pn=function(c,e,b,f,g){var k=new d;k.xj();k.Bj(f);k.gC();var l=new a.h,h=new a.h;c.s(l);e.s(h);f=!1;a.Fd.Dk(l,h,b)&&(k.mv(c,e),f=!0);f||(l=a.Fd.wc(c,e,
!1),4==l?(k.mv(c,e),f=!0):1==l&&(k.lF(e),f=!0));f||(f=new a.fd,c=f.Jb(c),e=f.Jb(e),k.Fp(f,b,g),k.Fh=k.i.wq(),d.ov(e,k.i,k.Fh),k.tq(c,e),k.i.xq(k.Fh),k.i.qh());return d.zg(k.H,k.dd)};d.KB=function(c,e,b,f){var k=new d;k.xj();k.Bj("T*****F**");k.gC();var g=new a.h,l=new a.h;c.s(g);e.s(l);var h=!1;a.Fd.Dk(g,l,b)&&(k.mv(c,e),h=!0);h||(g=a.Fd.wc(c,e,!1),4==g?(k.mv(c,e),h=!0):1==g&&(k.lF(e),h=!0));if(h)return b=this.zg(k.H,k.dd);h=new a.fd;c=h.Jb(c);e=h.Jb(e);k.Fp(h,b,f);if(0==h.D(c))return!1;k.tq(c,e);
k.i.qh();return b=this.zg(k.H,k.dd)};d.du=function(c,e,b,f,g){var k=new d;k.xj();k.Bj(f);k.oK();var l=new a.h,h=new a.h;c.s(l);e.s(h);f=!1;a.Fd.Dk(l,h,b)&&(k.nv(c),f=!0);f||(l=a.Fd.wc(c,e,!1),4==l?(k.nv(c),f=!0):1==l&&(k.AP(),f=!0));f||(f=new a.fd,c=f.Jb(c),e=f.Jb(e),k.Fp(f,b,g),k.kz(c,e),k.i.qh());return d.zg(k.H,k.dd)};d.LB=function(c,e,b,f,g){var k=new d;k.xj();k.Bj(f);k.YX();f=new a.h;var l=new a.h;c.s(f);e.s(l);var h=!1;a.Fd.Dk(f,l,b)&&(k.cI(c,e),h=!0);h||4!=a.Fd.wc(c,e,!1)||(k.cI(c,e),h=!0);
h||(f=new a.fd,c=f.Jb(c),e=f.Jb(e),k.Fp(f,b,g),k.xi=k.i.wq(),k.Fh=k.i.wq(),d.ov(c,k.i,k.xi),d.ov(e,k.i,k.Fh),k.tq(c,e),k.i.xq(k.xi),k.i.xq(k.Fh),k.i.qh());return d.zg(k.H,k.dd)};d.gu=function(c,e,b,f,g){var k=new d;k.xj();k.Bj(f);k.CK();f=new a.h;var l=new a.h;c.s(f);e.s(l);var h=!1;a.Fd.Dk(f,l,b)&&(k.FA(c),h=!0);h||4!=a.Fd.wc(c,e,!1)||(k.FA(c),h=!0);h||(f=new a.fd,c=f.Jb(c),e=f.Jb(e),k.Fp(f,b,g),k.xi=k.i.wq(),d.ov(c,k.i,k.xi),k.kz(c,e),k.i.xq(k.xi),k.i.qh());return d.zg(k.H,k.dd)};d.CB=function(c,
e,b,f,g){var k=new d;k.xj();k.Bj(f);k.HK();f=new a.h;var l=new a.h;c.s(f);e.s(l);var h=!1;a.Fd.Dk(f,l,b)&&(k.FJ(),h=!0);h||(f=new a.fd,c=f.Jb(c),e=f.Jb(e),k.Fp(f,b,g),k.kz(c,e),k.i.qh());return d.zg(k.H,k.dd)};d.eu=function(c,e,b,f){var k=new d;k.xj();k.Bj(f);k.oK();var g=new a.h;c.s(g);e=e.w();var l=!1;a.Fd.Cx(e,g,b)&&(k.nv(c),l=!0);l||(b=a.gd.fe(c,e,b),1==b?(k.H[0]=0,k.H[2]=2,k.H[3]=-1,k.H[5]=1,k.H[6]=-1):2==b?(k.H[6]=-1,0!=c.hf()?(k.H[0]=-1,k.H[3]=0,k.H[2]=2,k.H[5]=1):(k.H[0]=0,k.H[3]=-1,k.H[5]=
-1,b=new a.h,c.s(b),k.H[2]=0==b.fa()&&0==b.N()?-1:1)):k.nv(c));return this.zg(k.H,f)};d.hu=function(c,e,b,f,g){var k=new d;k.xj();k.Bj(f);k.CK();var l=new a.h;c.s(l);f=e.w();var h=!1;a.Fd.Cx(f,l,b)&&(k.FA(c),h=!0);if(!h){var l=null,m=h=!1;if(k.ga[0]||k.ga[6])a.Fd.GA(c,f,b)?(k.ga[0]&&(l=a.Pi.Sm(c,g),m=!a.Fd.Zt(l,f,b),h=!0,k.H[0]=m?-1:0),k.H[6]=-1):(k.H[0]=-1,k.H[6]=0);k.ga[3]&&(null!=l&&l.u()?k.H[3]=-1:(h||(null==l&&(l=a.Pi.Sm(c,g)),m=!a.Fd.Zt(l,f,b),h=!0),k.H[3]=m?0:-1));k.ga[5]&&(null!=l&&l.u()?
k.H[5]=-1:h&&!m?k.H[5]=0:(null==l&&(l=a.Pi.Sm(c,g)),g=a.Fd.yx(l,e,b),k.H[5]=g?-1:0));k.ga[2]&&(0!=c.Rb()?k.H[2]=1:(g=new a.Ed(c.description),g.Jd(c,0,c.D()),c=a.Fd.yx(g,e,b),k.H[2]=c?-1:0))}return this.zg(k.H,k.dd)};d.$t=function(c,e,b,f){var k=new d;k.xj();k.Bj(f);k.HK();var g=new a.h;c.s(g);e=e.w();var l=!1;a.Fd.Cx(e,g,b)&&(k.FJ(),l=!0);if(!l){g=!1;l=!0;b*=b;for(var h=0;h<c.D();h++){var m=c.Aa(h);a.b.sc(m,e)<=b?g=!0:l=!1;if(g&&!l)break}g?(k.H[0]=0,k.H[2]=l?-1:0,k.H[6]=-1):(k.H[0]=-1,k.H[2]=0,k.H[6]=
0)}return d.zg(k.H,f)};d.FW=function(c,e,b,f){c=c.w();e=e.w();for(var k=[],g=0;9>g;g++)k[g]=-1;a.b.sc(c,e)<=b*b?k[0]=0:(k[2]=0,k[6]=0);k[8]=2;return d.zg(k,f)};d.zg=function(a,e){for(var c=0;9>c;c++)switch(e.charAt(c)){case "T":if(-1==a[c])return!1;break;case "F":if(-1!=a[c])return!1;break;case "0":if(0!=a[c])return!1;break;case "1":if(1!=a[c])return!1;break;case "2":if(2!=a[c])return!1}return!0};d.rX=function(c,e,d){var b=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(c.u()&&e.u()){for(var f=0;9>f;f++)b[f]=-1;
return this.zg(b,d)}f=!1;c.u()&&(c=e,f=!0);b[0]=-1;b[1]=-1;b[3]=-1;b[4]=-1;b[6]=-1;b[7]=-1;b[8]=2;e=c.G();a.T.Ic(e)?1736==e?0!=c.hf()?(b[2]=2,b[5]=1):(b[5]=-1,e=new a.h,c.s(e),b[2]=0==e.fa()&&0==e.N()?0:1):(e=0!=c.Rb(),b[2]=e?1:0,b[5]=a.Pi.Rq(c)?0:-1):(b[2]=0,b[5]=-1);f&&this.jL(b);return this.zg(b,d)};d.ET=function(a,e,b){return d.jQ(a)?3:d.rO(a)?4:d.fU(a,e,b)?8:d.iO(a,e,b)?16:d.NN(a)?1:d.YM(a,e,b)?32:0};d.jQ=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"F"==a.charAt(2)&&"*"==a.charAt(3)&&
"*"==a.charAt(4)&&"F"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};d.rO=function(a){return"F"==a.charAt(0)&&"F"==a.charAt(1)&&"*"==a.charAt(2)&&"F"==a.charAt(3)&&"F"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};d.fU=function(a,e,d){if(0==e&&0==d)return!1;if(2!=e||2!=d)if("F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"T"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)||
1==e&&1==d&&"F"==a.charAt(0)&&"T"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0;return 0!=d&&"F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"T"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};d.iO=function(a,e,d){return e>d?"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&
"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1:1==e&&1==d&&"0"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};d.NN=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};d.YM=function(a,e,d){if(e==d){if(1!=e)return"T"==a.charAt(0)&&"*"==a.charAt(1)&&
"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1;if("1"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0}return!1};d.ov=function(a,e,d){a=e.Ha(a);for(var c=e.rf;-1!=c;c=e.og(c))if(0!=(e.Nd(c)&a)){var b=e.kf(c);if(-1==b)e.eo(c,d,0);else{var f=b,k=0;do 0!=(e.Ah(f)&a)&&k++,f=e.qc(e.za(f));while(f!=b);e.eo(c,
d,k)}}};d.Pq=function(a){var c;c=""+a.charAt(0);c+=a.charAt(3);c+=a.charAt(6);c+=a.charAt(1);c+=a.charAt(4);c+=a.charAt(7);c+=a.charAt(2);c+=a.charAt(5);return c+=a.charAt(8)};d.prototype.xj=function(){for(var a=0;9>a;a++)this.H[a]=-2,this.eb[a]=-2};d.jL=function(a){var c=a[1],d=a[2],b=a[5];a[1]=a[3];a[2]=a[6];a[5]=a[7];a[3]=c;a[6]=d;a[7]=b};d.prototype.Bj=function(a){this.dd=a;for(a=0;9>a;a++)"*"!=this.dd.charAt(a)?(this.ga[a]=!0,this.Ie++):this.ga[a]=!1};d.prototype.KK=function(){for(var a=0;9>
a;a++)this.ga[a]&&-2==this.H[a]&&(this.H[a]=-1,this.ga[a]=!1)};d.prototype.vc=function(a){if(-2==this.H[a])return!1;if(-1==this.H[a])return this.ga[a]=!1,this.Ie--,!0;if("T"!=this.dd.charAt(a)&&"F"!=this.dd.charAt(a)){if(this.H[a]<this.eb[a])return!1;this.ga[a]=!1;this.Ie--;return!0}this.ga[a]=!1;this.Ie--;return!0};d.prototype.nK=function(){this.ix=0;this.eb[0]=2;this.eb[1]=1;this.eb[2]=2;this.eb[3]=1;this.eb[4]=1;this.eb[5]=1;this.eb[6]=2;this.eb[7]=1;this.eb[8]=2;this.ga[8]&&(this.H[8]=2,this.ga[8]=
!1,this.Ie--)};d.prototype.gC=function(){this.ix=1;this.Gn=3;this.eb[0]=1;this.eb[1]=0;this.eb[2]=2;this.eb[3]=1;this.eb[4]=0;this.eb[5]=1;this.eb[6]=1;this.eb[7]=0;this.eb[8]=2;this.ga[8]&&(this.H[8]=2,this.ga[8]=!1,this.Ie--)};d.prototype.YX=function(){this.ix=2;this.Gn=4;this.eb[0]=1;this.eb[1]=0;this.eb[2]=1;this.eb[3]=0;this.eb[4]=0;this.eb[5]=0;this.eb[6]=1;this.eb[7]=0;this.eb[8]=2;this.ga[8]&&(this.H[8]=2,this.ga[8]=!1,this.Ie--)};d.prototype.oK=function(){this.Gn=3;this.eb[0]=0;this.eb[1]=
-1;this.eb[2]=2;this.eb[3]=0;this.eb[4]=-1;this.eb[5]=1;this.eb[6]=0;this.eb[7]=-1;this.eb[8]=2;this.ga[1]&&(this.H[1]=-1,this.ga[1]=!1,this.Ie--);this.ga[4]&&(this.H[4]=-1,this.ga[4]=!1,this.Ie--);this.ga[7]&&(this.H[7]=-1,this.ga[7]=!1,this.Ie--);this.ga[8]&&(this.H[8]=2,this.ga[8]=!1,this.Ie--)};d.prototype.CK=function(){this.Gn=4;this.eb[0]=0;this.eb[1]=-1;this.eb[2]=1;this.eb[3]=0;this.eb[4]=-1;this.eb[5]=0;this.eb[6]=0;this.eb[7]=-1;this.eb[8]=2;this.ga[1]&&(this.H[1]=-1,this.ga[1]=!1,this.Ie--);
this.ga[4]&&(this.H[4]=-1,this.ga[4]=!1,this.Ie--);this.ga[7]&&(this.H[7]=-1,this.ga[7]=!1,this.Ie--);this.ga[8]&&(this.H[8]=2,this.ga[8]=!1,this.Ie--)};d.prototype.HK=function(){this.Gn=5;this.eb[0]=0;this.eb[1]=-1;this.eb[2]=0;this.eb[3]=-1;this.eb[4]=-1;this.eb[5]=-1;this.eb[6]=0;this.eb[7]=-1;this.eb[8]=2;this.ga[1]&&(this.H[1]=-1,this.ga[1]=!1,this.Ie--);this.ga[3]&&(this.H[3]=-1,this.ga[3]=!1,this.Ie--);this.ga[4]&&(this.H[4]=-1,this.ga[4]=!1,this.Ie--);this.ga[5]&&(this.H[5]=-1,this.ga[5]=
!1,this.Ie--);this.ga[7]&&(this.H[7]=-1,this.ga[7]=!1,this.Ie--);this.ga[8]&&(this.H[8]=2,this.ga[8]=!1,this.Ie--)};d.prototype.yP=function(a,e,d){var c=!0;this.ga[0]&&(this.wU(a,e,d),c=c&&this.vc(0));this.ga[1]&&(this.EH(a,e,1),c=c&&this.vc(1));this.ga[2]&&(this.FH(a,e,d,2),c=c&&this.vc(2));this.ga[3]&&(this.EH(a,d,3),c=c&&this.vc(3));this.ga[4]&&(this.EP(a,e,d),c=c&&this.vc(4));this.ga[5]&&(this.qF(a,d,5),c=c&&this.vc(5));this.ga[6]&&(this.FH(a,d,e,6),c=c&&this.vc(6));this.ga[7]&&(this.qF(a,e,7),
c=c&&this.vc(7));return c};d.prototype.lv=function(a,e){this.H[0]=-1;this.H[1]=-1;this.H[3]=-1;this.H[4]=-1;this.Cs(a,this.ga[2]?2:-1,this.dd.charAt(2),this.ga[5]?5:-1,this.dd.charAt(5));this.Cs(e,this.ga[6]?6:-1,this.dd.charAt(6),this.ga[7]?7:-1,this.dd.charAt(7))};d.prototype.Cs=function(c,e,d,b,f){if(-1!=e||-1!=b)("T"!=d&&"F"!=d&&-1!=e||"T"!=f&&"F"!=f&&-1!=b?0!=c.hf():1)?(-1!=e&&(this.H[e]=2),-1!=b&&(this.H[b]=1)):(-1!=b&&(this.H[b]=-1),-1!=e&&(d=new a.h,c.s(d),this.H[e]=0==d.fa()&&0==d.N()?0:
1))};d.prototype.Ry=function(a){this.H[2]=2;this.H[3]=-1;this.H[4]=-1;this.H[5]=1;this.H[6]=-1;this.H[7]=-1;this.Cs(a,this.ga[0]?0:-1,this.dd.charAt(0),this.ga[1]?1:-1,this.dd.charAt(1))};d.prototype.kF=function(a){this.Ry(a);d.jL(this.H)};d.prototype.mv=function(c,e){this.H[0]=-1;this.H[1]=-1;this.H[3]=-1;this.H[4]=-1;if(this.ga[6]){var d=this.dd.charAt(6),d="T"!=d&&"F"!=d?0!=e.Rb():!0;this.H[6]=d?1:0}this.ga[7]&&(d=a.Pi.Rq(e),this.H[7]=d?0:-1);this.Cs(c,this.ga[2]?2:-1,this.dd.charAt(2),this.ga[5]?
5:-1,this.dd.charAt(5))};d.prototype.lF=function(c){if(this.ga[0]){var e=this.dd.charAt(0),e="T"!=e&&"F"!=e?0!=c.Rb():!0;this.H[0]=e?1:0}this.ga[1]&&(c=a.Pi.Rq(c),this.H[1]=c?0:-1);this.H[2]=2;this.H[3]=-1;this.H[4]=-1;this.H[5]=1;this.H[6]=-1;this.H[7]=-1};d.prototype.nv=function(a){this.H[0]=-1;this.H[3]=-1;this.H[6]=0;this.Cs(a,this.ga[2]?2:-1,this.dd.charAt(2),this.ga[5]?5:-1,this.dd.charAt(5))};d.prototype.AP=function(){this.H[0]=0;this.H[2]=2;this.H[3]=-1;this.H[5]=1;this.H[6]=-1};d.prototype.cI=
function(c,e){this.H[0]=-1;this.H[1]=-1;this.H[3]=-1;this.H[4]=-1;if(this.ga[2]){var d=this.dd.charAt(2),d="T"!=d&&"F"!=d?0!=c.Rb():!0;this.H[2]=d?1:0}this.ga[5]&&(d=a.Pi.Rq(c),this.H[5]=d?0:-1);this.ga[6]&&(d=this.dd.charAt(6),d="T"!=d&&"F"!=d?0!=e.Rb():!0,this.H[6]=d?1:0);this.ga[7]&&(d=a.Pi.Rq(e),this.H[7]=d?0:-1)};d.prototype.FA=function(c){this.H[0]=-1;this.H[3]=-1;if(this.ga[2]){var e=this.dd.charAt(2),e="T"!=e&&"F"!=e?0!=c.Rb():!0;this.H[2]=e?1:0}this.ga[5]&&(c=a.Pi.Rq(c),this.H[5]=c?0:-1);
this.H[6]=0};d.prototype.FJ=function(){this.H[0]=-1;this.H[2]=0;this.H[6]=0};d.prototype.zP=function(a,e,d){var c=!0;this.ga[0]&&(this.xU(a,e),c=c&&this.vc(0));this.ga[1]&&(this.tU(a,e,d,this.Fh),c=c&&this.vc(1));this.ga[2]&&(this.uU(a,e),c=c&&this.vc(2));this.ga[3]&&(this.IP(a,e,d,this.Fh),c=c&&this.vc(3));this.ga[4]&&(this.FP(a,e,d,this.Fh),c=c&&this.vc(4));this.ga[5]&&(this.GP(a,e,d),c=c&&this.vc(5));this.ga[6]&&(this.cS(a,e),c=c&&this.vc(6));this.ga[7]&&(this.bS(a,e,d,this.Fh),c=c&&this.vc(7));
return c};d.prototype.mV=function(a,e,d){var c=!0;this.ga[0]&&(this.AU(a,e,d,this.xi,this.Fh),c=c&&this.vc(0));this.ga[1]&&(this.GH(a,e,d,this.xi,this.Fh,1),c=c&&this.vc(1));this.ga[2]&&(this.HH(a,e,d,2),c=c&&this.vc(2));this.ga[3]&&(this.GH(a,d,e,this.Fh,this.xi,3),c=c&&this.vc(3));this.ga[4]&&(this.KP(a,e,d,this.xi,this.Fh),c=c&&this.vc(4));this.ga[5]&&(this.rF(a,d,this.xi,5),c=c&&this.vc(5));this.ga[6]&&(this.HH(a,d,e,6),c=c&&this.vc(6));this.ga[7]&&(this.rF(a,e,this.Fh,7),c=c&&this.vc(7));return c};
d.prototype.mF=function(a,e,d){var c=!0;this.ga[0]&&(this.yU(a,e),c=c&&this.vc(0));this.ga[2]&&(this.vU(a,e),c=c&&this.vc(2));this.ga[3]&&(this.JP(a,e,d),c=c&&this.vc(3));this.ga[5]&&(this.HP(a,e),c=c&&this.vc(5));this.ga[6]&&(this.dS(a,e),c=c&&this.vc(6));return c};d.prototype.dI=function(a,e,d){var c=!0;this.ga[0]&&(this.BU(a,e,d,this.xi),c=c&&this.vc(0));this.ga[2]&&(this.zU(a,d),c=c&&this.vc(2));this.ga[3]&&(this.MP(a,e,d,this.xi),c=c&&this.vc(3));this.ga[5]&&(this.LP(a,e,d,this.xi),c=c&&this.vc(5));
this.ga[6]&&(this.eS(a,e,d),c=c&&this.vc(6));return c};d.prototype.EW=function(a,e,d){var c=!0;this.ga[0]&&(this.CU(a,e,d),c=c&&this.vc(0));this.ga[2]&&(this.IH(a,e,d,2),c=c&&this.vc(2));this.ga[6]&&(this.IH(a,d,e,6),c=c&&this.vc(6));return c};d.prototype.wU=function(a,e,d){2!=this.H[0]&&(a=this.i.Ff(a),0!=(a&e)&&0!=(a&d)&&(this.H[0]=2))};d.prototype.EH=function(a,e,d){if(1!=this.H[d]){var c=this.i.Ff(this.i.za(a));0!=(this.i.Ff(a)&e)&&0!=(c&e)&&(this.H[d]=1)}};d.prototype.FH=function(a,e,d,b){2!=
this.H[b]&&(a=this.i.Ff(a),0!=(a&e)&&0==(a&d)&&(this.H[b]=2))};d.prototype.EP=function(a,e,d){if(1!=this.H[4]){var c=this.i.Ah(a);0!=(c&e)&&0!=(c&d)?this.H[4]=1:0!=this.H[4]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)&&(a=this.i.Nd(this.i.Xf(a)),0!=(a&e)&&0!=(a&d)&&(this.H[4]=0))}};d.prototype.qF=function(a,e,d){if(1!=this.H[d]){var c=this.i.Ff(this.i.za(a));0==(this.i.Ff(a)&e)&&0==(c&e)&&(this.H[d]=1)}};d.prototype.xU=function(a,e){if(1!=this.H[0]){var c=this.i.Ff(this.i.za(a));0!=(this.i.Ff(a)&
e)&&0!=(c&e)&&(this.H[0]=1)}};d.prototype.tU=function(a,e,d,b){if(0!=this.H[1]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)){var c=this.i.Xf(a),f=this.i.Nd(c);0==(f&e)&&0!=(this.i.Ff(a)&e)&&(a=this.i.Hg(c,b),0!=(f&d)&&0!=a%2&&(this.H[1]=0))}};d.prototype.uU=function(a,e){2!=this.H[2]&&0!=(this.i.Ah(a)&e)&&(this.H[2]=2)};d.prototype.IP=function(a,e,d,b){if(1!=this.H[3]){var c=this.i.Ah(a);0!=(c&e)&&0!=(c&d)?this.H[3]=1:0!=this.H[3]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)&&(c=this.i.Xf(a),
a=this.i.Nd(c),0!=(a&e)&&(e=this.i.Hg(c,b),0!=(a&d)&&0==e%2&&(this.H[3]=0)))}};d.prototype.FP=function(a,e,d,b){if(0!=this.H[4]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)){var c=this.i.Xf(a);a=this.i.Nd(c);0!=(a&e)&&(e=this.i.Hg(c,b),0!=(a&d)&&0!=e%2&&(this.H[4]=0))}};d.prototype.GP=function(a,e,d){1!=this.H[5]&&(a=this.i.Ah(a),0!=(a&e)&&0==(a&d)&&(this.H[5]=1))};d.prototype.cS=function(a,e){if(1!=this.H[6]){var c=this.i.Ff(this.i.za(a));0==(this.i.Ff(a)&e)&&0==(c&e)&&(this.H[6]=1)}};d.prototype.bS=
function(a,e,d,b){if(0!=this.H[7]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)){var c=this.i.Xf(a),f=this.i.Nd(c);0==(f&e)&&0==(this.i.Ff(a)&e)&&(a=this.i.Hg(c,b),0!=(f&d)&&0!=a%2&&(this.H[7]=0))}};d.prototype.AU=function(a,e,d,b,f){if(1!=this.H[0]){var c=this.i.Ah(a);0!=(c&e)&&0!=(c&d)?this.H[0]=1:0!=this.H[0]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)&&(a=this.i.Xf(a),c=this.i.Nd(a),0!=(c&e)&&0!=(c&d)&&(e=this.i.Hg(a,b),f=this.i.Hg(a,f),0==e%2&&0==f%2&&(this.H[0]=0)))}};d.prototype.GH=function(a,
e,d,b,f,g){if(0!=this.H[g]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)){a=this.i.Xf(a);var c=this.i.Nd(a);0!=(c&e)&&0!=(c&d)&&(e=this.i.Hg(a,b),f=this.i.Hg(a,f),0==e%2&&0!=f%2&&(this.H[g]=0))}};d.prototype.HH=function(a,e,d,b){1!=this.H[b]&&(a=this.i.Ah(a),0!=(a&e)&&0==(a&d)&&(this.H[b]=1))};d.prototype.KP=function(a,e,d,b,f){if(0!=this.H[4]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)){a=this.i.Xf(a);var c=this.i.Nd(a);0!=(c&e)&&0!=(c&d)&&(e=this.i.Hg(a,b),f=this.i.Hg(a,f),0!=e%2&&0!=f%2&&(this.H[4]=
0))}};d.prototype.rF=function(a,e,d,b){0!=this.H[b]&&1!=this.i.Kb(this.i.Te(this.i.za(a)),this.vj)&&(a=this.i.Xf(a),0==(this.i.Nd(a)&e)&&0!=this.i.Hg(a,d)%2&&(this.H[b]=0))};d.prototype.yU=function(a,e){0!=this.H[0]&&0==(this.i.Nd(a)&e)&&0!=(this.i.Hk(this.i.Jz(a))&e)&&(this.H[0]=0)};d.prototype.vU=function(a,e){2!=this.H[2]&&0!=(this.i.Nd(a)&e)&&(this.H[2]=2)};d.prototype.JP=function(a,e,d){0!=this.H[3]&&(a=this.i.Nd(a),0!=(a&e)&&0!=(a&d)&&(this.H[3]=0))};d.prototype.HP=function(a,e){1!=this.H[5]&&
0!=(this.i.Nd(a)&e)&&(this.H[5]=1)};d.prototype.dS=function(a,e){0!=this.H[6]&&0==(this.i.Nd(a)&e)&&0==(this.i.Hk(this.i.Jz(a))&e)&&(this.H[6]=0)};d.prototype.BU=function(a,e,d,b){if(0!=this.H[0]){var c=this.i.Nd(a);0!=(c&e)&&0!=(c&d)&&0==this.i.Hg(a,b)%2&&(this.H[0]=0)}};d.prototype.zU=function(a,e){1!=this.H[2]&&(-1!=this.i.kf(a)?this.H[2]=1:0!=this.H[2]&&0==(this.i.Nd(a)&e)&&(this.H[2]=0))};d.prototype.MP=function(a,e,d,b){if(0!=this.H[3]){var c=this.i.Nd(a);0!=(c&e)&&0!=(c&d)&&0!=this.i.Hg(a,
b)%2&&(this.H[3]=0)}};d.prototype.LP=function(a,e,d,b){if(0!=this.H[5]){var c=this.i.Nd(a);0!=(c&e)&&0==(c&d)&&0!=this.i.Hg(a,b)%2&&(this.H[5]=0)}};d.prototype.eS=function(a,e,d){0!=this.H[6]&&(a=this.i.Nd(a),0==(a&e)&&0!=(a&d)&&(this.H[6]=0))};d.prototype.CU=function(a,e,d){0!=this.H[0]&&(a=this.i.Nd(a),0!=(a&e)&&0!=(a&d)&&(this.H[0]=0))};d.prototype.IH=function(a,e,d,b){0!=this.H[b]&&(a=this.i.Nd(a),0!=(a&e)&&0==(a&d)&&(this.H[b]=0))};d.prototype.tq=function(c,e){var d=!1;c=this.i.Ha(c);e=this.i.Ha(e);
this.vj=this.i.xh();for(var b=this.i.rf;-1!=b;b=this.i.og(b)){var f=this.i.kf(b);if(-1==f){if(-1!=this.Gn)switch(this.Gn){case 3:d=this.mF(b,c,e);break;case 4:d=this.dI(b,c,e);break;default:throw a.f.X("internal error");}}else{var g=f;do{var l=g;if(1!=this.i.Kb(l,this.vj)){do{switch(this.ix){case 0:d=this.yP(l,c,e);break;case 1:d=this.zP(l,c,e);break;case 2:d=this.mV(l,c,e);break;default:throw a.f.X("internal error");}if(d)break;this.i.Ob(l,this.vj,1);l=this.i.qc(l)}while(l!=g&&!d)}if(d)break;g=this.i.qc(this.i.za(l))}while(g!=
f);if(d)break}}d||this.KK();this.i.ni(this.vj)};d.prototype.kz=function(c,e){var d=!1;c=this.i.Ha(c);e=this.i.Ha(e);for(var b=this.i.rf;-1!=b;b=this.i.og(b)){switch(this.Gn){case 3:d=this.mF(b,c,e);break;case 4:d=this.dI(b,c,e);break;case 5:d=this.EW(b,c,e);break;default:throw a.f.ya();}if(d)break}d||this.KK()};d.prototype.Xr=function(a,e){this.i.Vr(a,e)};d.prototype.Fp=function(a,e,d){this.UR(a,e,d);this.Xr(a,d)};d.prototype.UR=function(c,e,d){a.rk.V(c,e,d,!1);c.zq(0,!0,!0);for(e=c.rd;-1!=e;e=c.Ue(e))1736==
c.hc(e)&&a.lo.V(c,e,-1,!1,d)};d.aG=function(c,e){var d=c.G();if(a.T.Oc(d))return d=new a.Ua(c.description),d.dc(c,!0),d;if(197==d){d=new a.h;c.s(d);if(d.fa()<=e&&d.N()<=e)return d=new a.Wa(c.description),c.Wf(d),d;if(d.fa()<=e||d.N()<=e)return d=new a.Ua(c.description),e=new a.Wa,c.ig(0,e),d.Rf(e),c.ig(2,e),d.lineTo(e),d;d=new a.Ia(c.description);d.jd(c,!1);return d}return c};return d}();a.Om=b})(y||(y={}));(function(a){var b=function(){function c(c){this.tn=new a.ia(0);this.Qw=new a.ia(0);this.lu=
new a.b;this.mu=new a.b;this.a=c;this.Ct=-1}c.prototype.ic=function(a){return this.a.ic(this.iA(a))};c.prototype.nw=function(a){var c=this.Qz(a);a=this.RG(a);if(this.a.Ra(c)==a){var e=c,c=a;a=e}this.a.Nc(c,this.lu);this.a.Nc(a,this.mu);return this.lu.y<this.mu.y};c.prototype.iA=function(a){var c=this.Qz(a);a=this.RG(a);return this.a.U(c)==a?c:a};c.prototype.Qz=function(a){return this.tn.get(a)};c.prototype.RG=function(a){return this.Qw.get(a)};c.prototype.BG=function(a){this.tn.set(a,this.Ct);this.Ct=
a};c.prototype.vJ=function(c){if(-1!=this.Ct){var e=this.Ct;this.Ct=this.tn.get(e);this.tn.set(e,c);this.Qw.set(e,this.a.U(c));return e}null==this.tn&&(this.tn=new a.ia(0),this.Qw=new a.ia(0));e=this.tn.size;this.tn.add(c);this.Qw.add(this.a.U(c));return e};c.prototype.bA=function(a){return this.a.ld(this.Qz(a))};return c}();a.KZ=b;var f=function(){function c(c){this.bf=c;this.Fe=new a.Hb;this.Bn=new a.Hb;this.RI=0;this.op=null;this.dB=-1}c.prototype.compare=function(a,c,d){d=a.ja(d);var e=this.bf.ib,
b;this.dB==c?b=this.RI:(this.op=e.ic(c),null==this.op?(a=e.a,a.pd(e.iA(c),this.Fe),this.op=this.Fe,b=this.Fe.pf(this.bf.Wh,0)):b=this.op.pf(this.bf.Wh,0),this.RI=b,this.dB=c);a=e.ic(d);var f;null==a?(a=e.a,a.pd(e.iA(d),this.Bn),a=this.Bn,f=this.Bn.pf(this.bf.Wh,0)):f=a.pf(this.bf.Wh,0);b==f&&(c=e.nw(c),d=e.nw(d),d=Math.min(c?this.op.oa:this.op.ra,d?a.oa:a.ra),c=.5*(d+this.bf.Wh),c==this.bf.Wh&&(c=d),b=this.op.pf(c,0),f=a.pf(c,0));return b<f?-1:b>f?1:0};c.prototype.reset=function(){this.dB=-1};return c}(),
d=function(){function c(){this.Ln=this.jm=null;this.hb=new a.tk;this.hb.NR();this.we=new f(this);this.hb.Ep(this.we)}c.prototype.xS=function(){var c=!1;this.Uw&&(c=this.yS());if(1==this.a.aa(this.Y)){var d=this.a.Pb(this.Y),c=this.a.fA(d);this.a.nC(d,!0);return 0>c?(c=this.a.cb(d),this.a.eK(c),this.a.sh(d,this.a.Ra(c)),!0):!1}this.hm=this.a.qz();this.kp=this.a.qz();for(d=this.a.Pb(this.Y);-1!=d;d=this.a.Sb(d))this.a.Zr(d,this.hm,0),this.a.Zr(d,this.kp,-1);d=new a.ia(0);this.Wh=NaN;var b=new a.b;this.Wt=
this.a.aa(this.Y);this.fp=this.a.Vd();this.Lt=this.a.Vd();for(var f=this.jm.xc(this.jm.Ge);-1!=f;f=this.jm.nb(f)){var g=this.jm.getData(f);this.a.Nc(g,b);b.y!=this.Wh&&0!=d.size&&(c=this.iu(d)||c,this.we.reset(),d.clear(!1));d.add(g);this.Wh=b.y;if(0==this.Wt)break}0<this.Wt&&(c=this.iu(d)||c,d.clear(!1));this.a.ke(this.fp);this.a.ke(this.Lt);for(d=this.a.Pb(this.Y);-1!=d;)if(3==this.a.Tj(d,this.hm)){this.a.nC(d,!0);b=d;for(d=this.a.Tj(d,this.kp);-1!=d;)f=this.a.Tj(d,this.kp),this.a.WV(this.Y,this.a.Sb(b),
d),b=d,d=f;d=this.a.Sb(b)}else this.a.nC(d,!1),d=this.a.Sb(d);this.a.aC(this.hm);this.a.aC(this.kp);return c};c.prototype.iu=function(a){return this.RW(a)};c.prototype.RW=function(c){var e=!1;null==this.ib&&(this.ib=new b(this.a));null==this.Ln?(this.Ln=new a.ia(0),this.Ln.yb(16)):this.Ln.clear(!1);this.QW(c);for(var d=0,f=c.size;d<f;d++){var g=c.get(d);-1!=g&&this.BH(g,-1)}for(d=0;d<this.Ln.size&&0<this.Wt;d++)if(c=this.Ln.get(d),g=this.ib.bA(this.hb.ja(c)),f=-1,0==this.a.Tj(g,this.hm)){for(var g=
this.hb.Ve(c),l=c,h;-1!=g;){var m=this.hb.ja(g),n=this.ib.bA(m),p=this.a.Tj(n,this.hm);if(0!=p){f=n;break}l=g;g=this.hb.Ve(g)}-1==g?(h=!0,g=l):(m=this.hb.ja(g),h=this.ib.nw(m),g=this.hb.nb(g),h=!h);do{m=this.hb.ja(g);n=this.ib.bA(m);p=this.a.Tj(n,this.hm);if(0==p&&(h!=this.ib.nw(m)&&(e=this.a.cb(n),this.a.eK(e),this.a.sh(n,this.a.Ra(e)),e=!0),this.a.Zr(n,this.hm,h?3:2),h||(l=this.a.Tj(f,this.kp),this.a.Zr(f,this.kp,n),this.a.Zr(n,this.kp,l)),this.Wt--,0==this.Wt))return e;f=n;l=g;g=this.hb.nb(g);
h=!h}while(l!=c)}return e};c.prototype.QW=function(a){for(var c=0,e=a.size;c<e;c++){var d=a.get(c),b=this.a.Sa(d,this.fp),f=this.a.Sa(d,this.Lt);if(-1!=b){var g=this.hb.ja(b);this.ib.BG(g);this.a.Va(d,this.fp,-1)}-1!=f&&(g=this.hb.ja(f),this.ib.BG(g),this.a.Va(d,this.Lt,-1));g=-1;-1!=b&&-1!=f?(this.hb.Ld(b,-1),this.hb.Ld(f,-1),a.set(c,-1)):g=-1!=b?b:f;-1!=g&&(this.BH(d,g)||this.hb.Ld(g,-1),a.set(c,-1))}};c.prototype.BH=function(c,d){var e=new a.b,b=new a.b;this.a.Nc(c,e);var f=this.a.U(c);this.a.Nc(f,
b);var k=!1;if(e.y<b.y){var k=!0,g=this.ib.vJ(c),l;-1==d?l=this.hb.addElement(g,-1):(l=d,this.hb.jk(l,g));g=this.a.Sa(f,this.fp);-1==g?this.a.Va(f,this.fp,l):this.a.Va(f,this.Lt,l);f=this.a.ld(c);0==this.a.Tj(f,this.hm)&&this.Ln.add(l)}f=this.a.Ra(c);this.a.Nc(f,b);e.y<b.y&&(k=!0,g=this.ib.vJ(f),-1==d?l=this.hb.addElement(g,-1):(l=d,this.hb.jk(l,g)),g=this.a.Sa(f,this.fp),-1==g?this.a.Va(f,this.fp,l):this.a.Va(f,this.Lt,l),f=this.a.ld(c),0==this.a.Tj(f,this.hm)&&this.Ln.add(l));return k};c.V=function(a,
d,b,f){var e=new c;e.a=a;e.Y=d;e.jm=b;e.Uw=f;return e.xS()};c.prototype.yS=function(){var c=new a.ia(0),d=new a.ia(0),b=-1,f=-1,g=new a.b;g.$c();for(var l=-1,h=-1,m=-1,n=new a.b,p=this.jm.xc(this.jm.Ge);-1!=p;p=this.jm.nb(p)){var t=this.jm.getData(p);this.a.Nc(t,n);var u=this.a.ld(t);g.ub(n)&&h==u?(-1==f&&(b=this.a.qz(),f=this.a.Vd()),-1==m&&(m=d.size,this.a.Va(l,f,m),d.add(1),-1==this.a.Tj(u,b)&&(this.a.Zr(u,b,l),c.add(u))),this.a.Va(t,f,m),d.BK(d.Fc()+1)):(m=-1,g.L(n));l=t;h=u}if(0==c.size)return!1;
g=new a.ia(0);l=new a.ia(0);h=0;for(m=c.size;h<m;h++){var u=c.get(h),q=this.a.Tj(u,b),t=this.a.Sa(q,f);g.clear(!1);l.clear(!1);g.add(q);l.add(t);for(t=this.a.U(q);t!=q;t=this.a.U(t)){var y=t,n=this.a.Sa(y,f);if(-1!=n)if(0==l.size)l.add(n),g.add(y);else if(l.Fc()==n){var p=g.Fc(),x=this.a.U(p),q=this.a.U(y);this.a.Kc(p,q);this.a.Lc(q,p);this.a.Kc(y,x);this.a.Lc(x,y);y=[!1];x=this.a.AH(this.Y,x,this.a.cb(u),y);this.a.Va(t,f,-1);y[0]&&this.a.jg(u,q);t=this.a.Ka(u);q=this.a.Ka(x);t-=q;this.a.mk(u,t);
d.set(n,d.get(n)-1);1==d.get(n)&&(d.set(n,0),l.Pf(),g.Pf());t=q=p}else g.add(t),l.add(n)}}this.a.aC(b);this.a.ke(f);return!0};return c}();a.RN=d})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.Cg=function(){this.tB=this.wb=null};b.prototype.get=function(){return this.tB};b.prototype.set=function(d){this.tB=d;if(null!=d)throw 322==d.G()&&(this.wb=d),a.f.ya();};b.prototype.create=function(d){if(322==d)this.Is();else throw a.f.X("Not Implemented");};b.prototype.Is=function(){null==
this.wb&&(this.wb=new a.Hb);this.tB=this.wb};return b}();a.Cg=b})(y||(y={}));(function(a){a=a.WN||(a.WN={});a[a.enumLineSeg=1]="enumLineSeg";a[a.enumBezierSeg=2]="enumBezierSeg";a[a.enumArcSeg=4]="enumArcSeg";a[a.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask";a[a.enumSegmentMask=7]="enumSegmentMask";a[a.enumDensified=8]="enumDensified"})(y||(y={}));(function(a){var b=function(){return function(a){this.zj=a;this.RC=this.SC=1;this.SB=this.RB=this.TB=0}}(),f=function(){function d(){this.ur=[0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.dl=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.cg=new a.Wa;this.ta=this.rx=0;this.$o=[];this.Tt=[];this.lx=[];this.xr=[];this.qB=[]}d.prototype.VB=function(a){if(null!=a){for(var c=0,d=a.length;c<d;c++)this.pX(a[c]);a.length=0}};d.prototype.pX=function(a){a.zj=null;this.xr.push(a)};d.prototype.zx=function(a){if(0===this.xr.length)var c=new b(a);else c=this.xr[this.xr.length-1],c.zj=a,--this.xr.length;return c};d.prototype.KT=function(a,d){return 0==a?this.Tt[d]:this.lx[d]};
d.prototype.FB=function(){this.rx>=this.qB.length&&this.qB.push(new a.Cg);var c=this.qB[this.rx];this.rx++;return c};d.prototype.clear=function(){this.VB(this.$o);this.VB(this.Tt);this.VB(this.lx);this.rx=0};d.prototype.Ap=function(a){this.$o.push(this.zx(a))};d.prototype.Rl=function(a){return 0==a?this.Tt.length:this.lx.length};d.prototype.Mq=function(a,d){return this.KT(a,d).zj};d.prototype.Ma=function(c,d){if(2!=this.$o.length)throw a.f.ya();this.ta=c;var e=a.Ub.Xx(.01*c),b=!1,f=this.$o[0],g=this.$o[1];
if(d||0!=(f.zj.xs(g.zj,c,!0)&5)){if(322==f.zj.G()&&(d=f.zj,322==g.zj.G())){var l=g.zj,h=a.Hb.Fy(d,l,null,this.ur,this.dl,c);if(0==h)throw a.Hb.Fy(d,l,null,this.ur,this.dl,c),a.f.ya();c=Array(9);a.J.Mv(c,null);for(var m=0;m<h;m++){var n=this.ur[m],p=this.dl[m],t=f.SB,u=1;0==n?(t=f.TB,u=f.SC):1==n&&(t=f.RB,u=f.RC);var q=g.SB,y=1;0==p?(q=g.TB,y=g.SC):1==p&&(q=g.RB,y=g.RC);var x=new a.b;t==q?(t=new a.b,d.gc(n,t),n=new a.b,l.gc(p,n),p=u+y,y/=p,a.Ub.bI(t,n,y,x),a.b.sc(x,t)+a.b.sc(x,n)>e&&(b=!0)):t>q?(d.gc(n,
x),n=new a.b,l.gc(p,n),a.b.sc(x,n)>e&&(b=!0)):(l.gc(p,x),t=new a.b,d.gc(n,t),a.b.sc(x,t)>e&&(b=!0));c[m]=x}f=0;g=-1;for(m=0;m<=h;m++)y=m<h?this.ur[m]:1,y!=f&&(e=this.FB(),d.yh(f,y,e),-1!=g&&e.get().Mc(c[g]),m!=h&&e.get().Zc(c[m]),f=y,this.Tt.push(this.zx(e.get()))),g=m;d=[0,0,0,0,0,0,0,0,0];for(m=0;m<h;m++)d[m]=m;1<h&&this.dl[0]>this.dl[1]&&(y=this.dl[0],this.dl[0]=this.dl[1],this.dl[1]=y,m=d[0],d[0]=d[1],d[1]=m);f=0;g=-1;for(m=0;m<=h;m++)y=m<h?this.dl[m]:1,y!=f&&(e=this.FB(),l.yh(f,y,e),-1!=g&&(f=
d[g],e.get().Mc(c[f])),m!=h&&(f=d[m],e.get().Zc(c[f])),f=y,this.lx.push(this.zx(e.get()))),g=m;return b}throw a.f.ya();}return!1};d.prototype.rA=function(c,d,b){d.copyTo(this.cg);if(1!=this.$o.length)throw a.f.ya();this.ta=c;var e=this.$o[0];if(b||e.zj.$u(d.w(),c,!0))if(322==e.zj.G()){c=e.zj;var f=c.oe(d.w(),!1);this.ur[0]=f;var k=e.SB;b=1;0==f?(k=e.TB,b=e.SC):1==f&&(k=e.RB,b=e.RC);e=new a.b;0==k?(k=new a.b,c.gc(f,k),d=d.w(),a.Ub.bI(k,d,1/(b+1),e)):0<k?(e=new a.b,c.gc(f,e)):e=d.w();b=0;f=-1;for(k=
0;1>=k;k++){d=1>k?this.ur[k]:1;if(d!=b){var g=this.FB();c.yh(b,d,g);-1!=f&&g.get().Mc(e);1!=k&&g.get().Zc(e);b=d;this.Tt.push(this.zx(g.get()))}f=k}this.cg.rb(e)}else throw a.f.ya();};return d}();a.cE=f})(y||(y={}));(function(a){var b=function(){function b(d){this.yt=this.Tk=this.wb=null;this.gm=this.vf=this.cd=this.Ze=this.Oh=this.Ta=0;this.bb=null;this.Sl=this.nn=!1;this.Ze=-1;this.Oh=this.cd=0;this.Ta=-1;this.bb=d;this.vf=this.vs(this.Oh);this.nn=!1;this.Tk=null;this.gm=-1;this.Sl=!1;this.yt=new a.b}
b.$p=function(d,c){if(0>c||c>=d.D())throw a.f.vd();var e=new b(d),f=d.bw(c);e.cd=c-d.wa(f);e.Oh=f+1;e.Ta=f;e.vf=e.vs(e.Ta);e.gm=e.bb.wa(e.Ta);e.Sl=e.bb.Qb(e.Ta);return e};b.Zp=function(d,c,e){if(0>c||c>=d.aa()||0>e)throw a.f.vd();var f=d.Qb(c)?0:1;if(e>=d.Ka(c)-f)throw a.f.vd();d=new b(d);d.Ze=-1;d.cd=e;d.Ta=c;d.Oh=d.cd+1;d.vf=d.vs(d.Oh);d.gm=d.bb.wa(d.Ta);d.Sl=d.bb.Qb(d.Ta);return d};b.prototype.xX=function(d){if(this.bb!=d.bb)throw a.f.La();this.Ze=d.Ze;this.cd=d.cd;this.Ta=d.Ta;this.Oh=d.Oh;this.vf=
d.vf;this.nn=d.nn;this.gm=d.gm;this.Tk=null;this.Sl=d.Sl};b.prototype.ba=function(){this.Ze!=this.cd&&this.PE();if(this.nn)this.cd=(this.cd+1)%this.vf;else{if(this.cd==this.vf)throw a.f.vd();this.cd++}return this.Tk};b.prototype.Li=function(){if(this.nn)this.cd=(this.vf+this.cd-1)%this.vf;else{if(0==this.cd)throw a.f.vd();this.cd--}this.cd!=this.Ze&&this.PE();return this.Tk};b.prototype.yX=function(){this.Ze=-1;this.cd=0};b.prototype.zX=function(){this.cd=this.vf;this.Ze=-1};b.prototype.Tb=function(a,
c){void 0===c&&(c=-1);if(0<=this.Ta&&this.Ta<this.bb.aa()){var d=this.NO();if(a>=d&&a<this.bb.Gc(this.Ta)){this.Ze=-1;this.cd=a-d;return}}d=0<=c&&c<this.bb.aa()&&a>=this.bb.wa(c)&&a<this.bb.Gc(c)?c:this.bb.bw(a);this.Oh=d+1;this.Ta=d;this.Ze=-1;this.cd=a-this.bb.wa(d);this.vf=this.vs(d);this.gm=this.bb.wa(this.Ta);this.Sl=this.bb.Qb(this.Ta)};b.prototype.Ya=function(){this.Ta=this.Oh;if(this.Ta>=this.bb.aa())return!1;this.Ze=-1;this.cd=0;this.vf=this.vs(this.Ta);this.gm=this.bb.wa(this.Ta);this.Sl=
this.bb.Qb(this.Ta);this.Oh++;return!0};b.prototype.yj=function(){this.vf=this.cd=this.Ze=-1;this.Oh=0;this.Ta=-1;this.Sl=!1;this.gm=-1};b.prototype.dC=function(d){if(0>d)throw a.f.vd();this.Oh=d;this.gm=this.vf=this.cd=this.Ze=this.Ta=-1;this.Sl=!1};b.prototype.vs=function(a){if(this.bb.Hc())return 0;var c=1;this.bb.Qb(a)&&(c=0);return this.bb.Ka(a)-c};b.prototype.Fo=function(){return this.Ze==this.vf-1&&this.bb.Qb(this.Ta)};b.prototype.iC=function(){this.nn=!0};b.prototype.Db=function(){return this.bb.kb.g[this.Ta]+
this.Ze};b.prototype.NO=function(){return this.bb.wa(this.Ta)};b.prototype.Ik=function(){return this.Fo()?this.bb.wa(this.Ta):this.Db()+1};b.prototype.kn=function(){return 0==this.Ze};b.prototype.Io=function(){return this.Ze==this.vf-1};b.prototype.Ca=function(){return this.cd<this.vf};b.prototype.nA=function(){return 0<this.cd};b.prototype.Vf=function(){var a=new b(this.bb);a.Ze=this.Ze;a.cd=this.cd;a.vf=this.vf;a.Ta=this.Ta;a.Oh=this.Oh;a.bb=this.bb;a.nn=this.nn;return a};b.prototype.PE=function(){if(0>
this.cd||this.cd>=this.vf)throw a.f.vd();this.Ze=this.cd;var d=this.Db();this.bb.tc();var c=this.bb.cf,e=1;null!=c&&(e=c.read(d)&7);c=this.bb.description;switch(e){case 1:null==this.wb&&(this.wb=new a.Hb);this.Tk=this.wb;break;case 2:throw a.f.X("internal error");case 4:throw a.f.ya();default:throw a.f.ya();}this.Tk.Fg(c);e=this.Ik();this.bb.Nc(d,this.yt);this.Tk.Mc(this.yt);this.bb.Nc(e,this.yt);this.Tk.Zc(this.yt);for(var b=1,f=c.Ea;b<f;b++)for(var g=c.zd(b),l=a.na.Xa(g),h=0;h<l;h++){var m=this.bb.Yc(g,
d,h);this.Tk.Sx(g,h,m);m=this.bb.Yc(g,e,h);this.Tk.Kx(g,h,m)}};b.prototype.SU=function(){return this.Ta==this.bb.aa()-1};b.prototype.Go=function(){var a=this.bb.NT();return null!=a?1!=(a.read(this.Ze)&7):!1};return b}();a.XN=b})(y||(y={}));(function(a){var b=function(){function b(d){d instanceof a.T?(this.II=d,this.Ba=-1,this.dj=1):(this.uV=d.slice(0),this.Ba=-1,this.dj=d.length)}b.prototype.Ha=function(){return this.Ba};b.prototype.next=function(){return this.Ba<this.dj-1?(this.Ba++,null!=this.II?
this.II:this.uV[this.Ba]):null};b.prototype.Re=function(){return!0};return b}();a.hd=b})(y||(y={}));(function(a){var b=function(){return function(){this.next=null}}(),f=function(){function d(){this.Lr=this.vx=this.wx=this.Pk=this.ai=0;this.tG=!1;this.WK=0;this.Yn=this.kg=this.Fm=this.hi=null;this.tm=0;this.$y=null;this.Pk=this.ai=-1}d.prototype.uY=function(c,d,b){this.ai=c;this.Pk=d;this.hi=this.Fm=null;this.Lr=0;this.$y=b;null==this.Yn&&(this.Yn=a.J.gf(384,0));this.ZK()};d.prototype.N=function(){return this.ai};
d.prototype.fa=function(){return this.Pk};d.prototype.flush=function(){0<this.tm&&(this.$y.oG(this.Yn,this.tm),this.tm=0)};d.prototype.ZK=function(){if(0<this.Lr){for(var a=0;a<this.Pk;a++){for(var d=this.Fm[a];null!=d;){var b=d,d=d.next;b.next=null}this.Fm[a]=null}this.hi=null}this.wx=this.Pk;this.vx=-1;this.Lr=0};d.prototype.XJ=function(a){this.tG=a==d.oy;for(a=this.wx;a<=this.vx;a++)this.rP(),this.iP(a),this.XR();this.ZK()};d.prototype.Py=function(c,d,f,g){if(d!=g){var e=1;d>g&&(e=c,c=f,f=e,e=
d,d=g,g=e,e=-1);if(!(0>g||d>=this.Pk)){0>c&&0>f?f=c=-1:c>=this.ai&&f>=this.ai&&(f=c=this.ai);var k=(f-c)/(g-d);g>this.Pk&&(g=this.Pk,f=k*(g-d)+c);0>d&&(c=k*(0-d)+c,d=0);var l=Math.max(this.ai+1,8388607);-8388607>c?(d=(0-c)/k+d,c=0):c>l&&(d=(this.ai-c)/k+d,c=this.ai);-8388607>f?g=(0-c)/k+d:f>l&&(g=(this.ai-c)/k+d);d=a.J.truncate(d);g=a.J.truncate(g);d!=g&&(f=new b,f.x=a.J.truncate(4294967296*c),f.y=d,f.B=g,f.RR=a.J.truncate(4294967296*k),f.dir=e,null==this.Fm&&(this.Fm=a.J.gf(this.Pk,null)),f.next=
this.Fm[f.y],this.Fm[f.y]=f,f.y<this.wx&&(this.wx=f.y),f.B>this.vx&&(this.vx=f.B),this.Lr++)}}};d.prototype.rP=function(){if(null!=this.hi){for(var a=!1,d=null,b=this.hi;null!=b;)if(b.y++,b.y==b.B){var f=b,b=b.next;null!=d?d.next=b:this.hi=b;f.next=null}else b.x+=b.RR,null!=d&&d.x>b.x&&(a=!0),d=b,b=b.next;a&&(this.hi=this.VK(this.hi))}};d.prototype.iP=function(a){if(!(a>=this.Pk)){var c=this.Fm[a];if(null!=c){this.Fm[a]=null;c=this.VK(c);this.Lr-=this.WK;a=this.hi;for(var d=!0,b=c,f=null;null!=a&&
null!=b;)a.x>b.x?(d&&(this.hi=b),d=b.next,b.next=a,null!=f&&(f.next=b),f=b,b=d):(d=a.next,a.next=b,null!=f&&(f.next=a),f=a,a=d),d=!1;null==this.hi&&(this.hi=c)}}};d.vG=function(a,d){return 0>a?0:a>d?d:a};d.prototype.XR=function(){if(null!=this.hi)for(var c=0,e=this.hi,b=a.J.truncate(a.J.fI(e.x)),f=e.next;null!=f;f=f.next)if(c=this.tG?c^1:c+f.dir,f.x>e.x){var g=a.J.truncate(a.J.fI(f.x));0!=c&&(e=d.vG(b,this.ai),b=d.vG(g,this.ai),b>e&&e<this.ai&&(this.Yn[this.tm++]=e,this.Yn[this.tm++]=b,this.Yn[this.tm++]=
f.y,this.tm==this.Yn.length&&(this.$y.oG(this.Yn,this.tm),this.tm=0)));e=f;b=g}};d.prototype.VK=function(c){for(var e=0,b=c;null!=b;b=b.next)e++;this.WK=e;if(1==e)return c;null==this.kg?this.kg=a.J.gf(Math.max(e,16),null):this.kg.length<e&&(this.kg=a.J.gf(Math.max(e,2*this.kg.length),null));for(var f=0,b=c;null!=b;b=b.next)this.kg[f++]=b;2==e?this.kg[0].x>this.kg[1].x&&(c=this.kg[0],this.kg[0]=this.kg[1],this.kg[1]=c):d.TM(this.kg,e,function(a,c){return a==c?0:a.x<c.x?-1:a.x>c.x?1:0});c=this.kg[0];
this.kg[0]=null;b=c;for(f=1;f<e;f++)b.next=this.kg[f],b=this.kg[f],this.kg[f]=null;b.next=null;return c};d.TM=function(a,d,b){if(d==a.length)a.sort(b);else{var c=a.slice(0,0),e=a.slice(d);d=a.slice(0,d).sort(b);a.length=0;a.push.apply(a,c.concat(d).concat(e))}};d.oy=0;d.K_=1;return d}();a.yy=f})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.Ri=function(a,c){var d=this.a.Sa(a,this.Fr);this.fm==d&&(this.fm=this.Me.nb(this.fm));this.Vo==d&&(this.Vo=this.Me.nb(this.Vo));this.Me.kd(this.vB,
d);this.yk(a);if(c&&(d=this.a.ld(a),-1!=d&&this.a.cb(d)==a)){c=this.a.U(a);if(c!=a){var b=this.a.ld(c);if(b==d){this.a.jg(d,c);return}c=this.a.Ra(a);if(c!=a&&(b=this.a.ld(c),b==d)){this.a.jg(d,c);return}}this.a.jg(d,-1);this.a.sh(d,-1)}};b.prototype.FE=function(){for(var d=!1,c=0,b=new a.b;;){c++;null==this.vi?(this.vi=new a.ia(0),this.ut=new a.ia(0),this.Xe=new a.ia(0)):(this.vi.clear(!1),this.ut.clear(!1),this.Xe.clear(!1));for(var f=this.Vo,g=0,l=!0;f!=this.fm;){var h=this.Me.getData(f),m=new a.b;
this.a.Nc(h,m);l&&(this.a.Nc(h,b),l=!1);var m=this.a.Ra(h),n=this.a.U(h);-559038737!=this.a.Sa(m,this.Ug)&&(this.vi.add(m),this.a.Va(m,this.Ug,-559038737),this.ut.add(h),this.Xe.add(g++));-559038737!=this.a.Sa(n,this.Ug)&&(this.vi.add(n),this.a.Va(n,this.Ug,-559038737),this.ut.add(h),this.Xe.add(g++));f=this.Me.nb(f)}if(2>this.vi.size)break;var p=this;this.Xe.Gd(0,this.Xe.size,function(a,c){return p.FO(a,c)});f=0;for(g=this.Xe.size;f<g;f++)l=this.Xe.get(f),l=this.vi.get(l),this.a.Va(l,this.Ug,f),
m=new a.b,this.a.Nc(l,m);m=this.RO(b);f=0;for(g=this.Xe.size;f<g;f++)l=this.Xe.get(f),-1!=l&&(l=this.vi.get(l),this.a.Va(l,this.Ug,-1));if(m)d=!0;else break}return d};b.prototype.RO=function(a){for(var c=!1,d=!0;d;){var d=!1,b=0;-1==this.Xe.get(b)&&(b=this.Qm(b));for(var f=this.Qm(b),g=0,l=this.Xe.size;g<l&&-1!=b&&-1!=f&&b!=f;g++){var h=this.Xe.get(b),f=this.Xe.get(f),h=this.vi.get(h),f=this.vi.get(f),m=this.a.U(h);this.a.pw(m,a)||(m=this.a.Ra(h));var n=this.a.U(f);this.a.pw(n,a)||(n=this.a.Ra(f));
var p=this.Yu(m,h),t=this.Yu(n,f),u=p?this.a.Ra(m):this.a.U(m),q=t?this.a.Ra(n):this.a.U(n),y=!1;this.mq(m)?y=!0:this.mq(n)?y=!0:this.mq(h)?y=!0:this.mq(f)?y=!0:this.mq(u)?y=!0:this.mq(q)&&(y=!0);!y&&this.a.Tq(h,f)&&(y=!0,this.IE(p,t,m,h,n,f));!y&&this.a.Tq(u,q)&&(y=!0,this.IE(!p,!t,m,u,n,q));y&&(c=!0);d=d||y;b=this.Qm(b);f=this.Qm(b)}}if(!c)for(b=0,-1==this.Xe.get(b)&&(b=this.Qm(b)),f=this.Qm(b),g=0,l=this.Xe.size;g<l&&-1!=b&&-1!=f&&b!=f;g++)h=this.Xe.get(b),f=this.Xe.get(f),h=this.vi.get(h),f=this.vi.get(f),
m=this.a.U(h),this.a.pw(m,a)||(m=this.a.Ra(h)),n=this.a.U(f),this.a.pw(n,a)||(n=this.a.Ra(f)),p=this.Yu(m,h),t=this.Yu(n,f),u=p?this.a.Ra(m):this.a.U(m),q=t?this.a.Ra(n):this.a.U(n),this.JO(p,t,h,m,u,f,n,q)&&(c=!0),b=this.Qm(b),f=this.Qm(b);return c};b.prototype.UO=function(){1736==this.a.hc(this.Y)&&1==this.a.xo(this.Y)&&(new a.Dg).xW(this.Uw,this.a,this.Y,this.je);var d=!1,c=!0;this.Ug=this.Fr=-1;var b=this.a.D(this.Y),f=new a.ia(0);f.yb(b);for(var g=this.a.Pb(this.Y);-1!=g;g=this.a.Sb(g))for(var l=
this.a.cb(g),h=0,m=this.a.Ka(g);h<m;h++)f.add(l),l=this.a.U(l);var n=this.a.Dd.g,p=this.a.Dd.ed;this.a.xb.tc();var t=this.a.xb.xa[0].g;f.Gd(0,b,function(a,c){var d=n[p*a],b=n[p*c],e=t[2*d],d=t[2*d+1],f=t[2*b],b=t[2*b+1],e=d<b?-1:d>b?1:e<f?-1:e>f?1:0;0==e&&(e=n[p*a+3],b=n[p*c+3],e=e<b?-1:e==b?0:1);return e});this.Fr=this.a.Vd();this.Me=new a.Xp;this.vB=this.Me.mi(0);this.Me.Wn(b);for(g=0;g<b;g++)l=f.get(g),h=this.Me.addElement(this.vB,l),this.a.Va(l,this.Fr,h);this.Ug=this.a.Vd();this.fm=-1;for(this.vE()&&
(d=!0);c;){c=!1;b=0;f=!1;do{f=!1;this.Vo=-1;for(var m=0,g=new a.b,h=new a.b,u=this.Me.xc(this.vB);-1!=u;)l=this.Me.getData(u),-1!=this.Vo?(this.a.Nc(l,h),g.ub(h))?m++:(g.L(h),this.fm=u,0<m&&(l=this.FE())&&(f=!0,-1!=this.fm&&(l=this.Me.getData(this.fm),this.a.Nc(l,g))),this.Vo=u=this.fm,m=0):(this.Vo=u,this.a.Nc(this.Me.getData(u),g),m=0),-1!=u&&(u=this.Me.nb(u));this.fm=-1;0<m&&(l=this.FE())&&(f=!0);if(10<b++)throw a.f.ya();f&&this.MO();this.vE()&&(f=!0);c=c||f&&!1;d=d||f}while(f)}this.a.ke(this.Fr);
this.a.ke(this.Ug);return d=a.RN.V(this.a,this.Y,this.Me,this.Uw)||d};b.prototype.Yu=function(a,c){return this.a.U(c)==a?!1:!0};b.prototype.JO=function(a,c,b,f,g,l,h,m){if(f==h)return this.yk(b),this.yk(l),!1;var d=this.a.Sa(b,this.Ug),e=this.a.Sa(g,this.Ug),k=this.a.Sa(l,this.Ug),n=this.a.Sa(m,this.Ug);b=[0,0,0,0,0,0,0,0];var r=[0,0,0,0];b[0]=0;r[0]=d;b[1]=0;r[1]=e;b[2]=1;r[2]=k;b[3]=1;r[3]=n;for(d=1;4>d;d++){e=r[d];k=b[d];for(n=d-1;0<=n&&r[n]>e;)r[n+1]=r[n],b[n+1]=b[n],n--;r[n+1]=e;b[n+1]=k}r=0;
0!=b[0]&&(r|=1);0!=b[1]&&(r|=2);0!=b[2]&&(r|=4);0!=b[3]&&(r|=8);if(5!=r&&10!=r)return!1;a==c?a?(this.a.Kc(m,f),this.a.Lc(f,m),this.a.Kc(g,h),this.a.Lc(h,g)):(this.a.Lc(m,f),this.a.Kc(f,m),this.a.Lc(g,h),this.a.Kc(h,g)):a?(this.a.Lc(f,l),this.a.Kc(l,f),this.a.Lc(h,g),this.a.Kc(g,h)):(this.a.Kc(f,l),this.a.Lc(l,f),this.a.Kc(h,g),this.a.Lc(g,h));return!0};b.prototype.IE=function(a,c,b,f,g,l){this.B_?this.TO():this.SO(a,c,b,f,g,l)};b.prototype.TO=function(){throw a.f.X("not implemented.");};b.prototype.SO=
function(a,c,b,f,g,l){if(a!=c)a?(this.a.Kc(b,g),this.a.Lc(g,b),this.a.Kc(l,f),this.a.Lc(f,l),this.po(g,b),this.Ri(g,!0),this.a.Mi(g,!0),this.yk(b),this.po(l,f),this.Ri(l,!0),this.a.Mi(l,!1)):(this.a.Kc(g,b),this.a.Lc(b,g),this.a.Kc(f,l),this.a.Lc(l,f),this.po(g,b),this.Ri(g,!0),this.a.Mi(g,!1),this.yk(b),this.po(l,f),this.Ri(l,!0),this.a.Mi(l,!0)),this.yk(f);else{var d=a?b:f,e=c?g:l;a=a?f:b;c=c?l:g;g=!1;this.a.Kc(d,e);this.a.Kc(e,d);this.a.Lc(a,c);this.a.Lc(c,a);for(l=c;l!=e;)b=this.a.Ra(l),f=this.a.U(l),
this.a.Lc(l,f),this.a.Kc(l,b),g=g||l==d,l=f;g||(b=this.a.Ra(e),f=this.a.U(e),this.a.Lc(e,f),this.a.Kc(e,b));this.po(e,d);this.Ri(e,!0);this.a.Mi(e,!1);this.yk(d);this.po(c,a);this.Ri(c,!0);this.a.Mi(c,!1);this.yk(a)}};b.prototype.vE=function(){for(var a=!1,c=this.a.Pb(this.Y);-1!=c;){for(var b=this.a.cb(c),f=0,g=this.a.Ka(c);f<g&&1<g;){var l=this.a.Ra(b),h=this.a.U(b);this.a.Tq(l,h)?(a=!0,this.Ri(b,!1),this.a.td(b,!0),this.Ri(h,!1),this.a.td(h,!0),b=l,f=0,g=this.a.Ka(c)):(b=h,f++)}if(2>this.a.Ka(c)){a=
this.a.cb(c);f=0;for(g=this.a.Ka(c);f<g;f++)this.Ri(a,!1),a=this.a.U(a);c=this.a.Qr(c);a=!0}else c=this.a.Sb(c)}return a};b.prototype.mq=function(a){for(var c=!1;;){var b=this.a.U(a),d=this.a.Ra(a);if(b==a)return this.Ri(a,!0),this.a.Mi(a,!1),!0;if(!this.a.Tq(b,d))break;c=!0;this.yk(d);this.yk(b);this.Ri(a,!0);this.a.Mi(a,!1);this.po(b,d);this.Ri(b,!0);this.a.Mi(b,!0);if(b==d)break;a=d}return c};b.prototype.MO=function(){for(var a=0,c=this.Me.xc(this.Me.Ge);-1!=c;c=this.Me.nb(c)){var b=this.Me.getData(c);
this.a.Aj(b,-1)}for(var f=0,g=this.a.Pb(this.Y);-1!=g;)if(c=this.a.cb(g),-1==c||-1!=this.a.ld(c))b=g,g=this.a.Sb(g),this.a.Rr(b);else{this.a.Aj(c,g);for(var l=1,b=this.a.U(c);b!=c;b=this.a.U(b))this.a.Aj(b,g),l++;this.a.Np(g,!1);this.a.mk(g,l);this.a.sh(g,this.a.Ra(c));f+=l;a++;g=this.a.Sb(g)}for(c=this.Me.xc(this.Me.Ge);-1!=c;c=this.Me.nb(c))b=this.Me.getData(c),-1==this.a.ld(b)&&(g=this.a.AH(this.Y,b,b,null),f+=this.a.Ka(g),a++);this.a.wm(this.Y,a);this.a.kk(this.Y,f);a=0;for(f=this.a.rd;-1!=f;f=
this.a.Ue(f))a+=this.a.D(f);this.a.yC(a)};b.prototype.Qm=function(a){for(var c=0,b=this.Xe.size-1;c<b;c++)if(a=(a+1)%this.Xe.size,-1!=this.Xe.get(a))return a;return-1};b.prototype.po=function(a,c){var b=this.a.Sa(c,this.Fr),d=this.a.Sa(c,this.Ug);this.a.IC(a,c);this.a.Va(c,this.Fr,b);this.a.Va(c,this.Ug,d)};b.prototype.yk=function(a){var c=this.a.Sa(a,this.Ug);-1!=c&&(this.Xe.set(c,-1),this.a.Va(a,this.Ug,-1))};b.V=function(a,c,e,f,g){var d=new b;d.a=a;d.Y=c;d.cB=e;d.Uw=f;d.je=g;return d.UO()};b.prototype.FO=
function(b,c){var d=this.vi.get(b),f=new a.b;this.a.Nc(d,f);var d=new a.b,g=this.vi.get(c);this.a.Nc(g,d);if(f.ub(d))return 0;b=this.ut.get(b);g=new a.b;this.a.Nc(b,g);c=this.ut.get(c);b=new a.b;this.a.Nc(c,b);c=new a.b;c.zc(f,g);f=new a.b;f.zc(d,b);return a.b.us(c,f)};return b}();a.lo=b})(y||(y={}));(function(a){(function(a){a[a.Local=0]="Local";a[a.Geographic=1]="Geographic";a[a.Projected=2]="Projected";a[a.Image=3]="Image";a[a.Unknown=4]="Unknown"})(a.YN||(a.YN={}));(function(a){a[a.Integer32=
0]="Integer32";a[a.Integer64=1]="Integer64";a[a.FloatingPoint=2]="FloatingPoint"})(a.IN||(a.IN={}));var b=function(){function b(){this.jq="";this.av=null;this.yg=0;this.kJ=this.tp=-1;this.Uh=null}b.prototype.yc=function(){return this.yg};b.prototype.Qs=function(){return 0};b.prototype.Rs=function(){return 0};b.prototype.Ss=function(){return 0};b.prototype.Ps=function(){return 0};b.prototype.Sz=function(){return 5.7295779513082306E10};b.prototype.Tz=function(){return 1E3};b.prototype.Rz=function(){return 1E3};
b.prototype.at=function(){return 1};b.prototype.re=function(){var b=.001;0!=this.yg?b=a.ts.tS(this.yg):null!=this.Uh&&(b=a.nE.uS(this.Uh));return b};b.prototype.lH=function(){return this.Uh};b.prototype.Od=function(){if(0!=this.yg)return a.oc.ze(a.ts.wG(this.yg));if(null!=this.Uh)return a.nE.vS(this.Uh)};b.Fb=function(b){if(0!=b.yg){if(!0===a.ts.RU(b.yg))return 1;if(!0===a.ts.TU(b.yg))return 2}return 4};b.prototype.Zs=function(){var b=this.yc();if(-1!=this.tp)return this.tp;this.tp=a.ts.rZ(b);return-1!=
this.tp?this.tp:b};b.create=function(d){if(0>=d)throw a.f.F("Invalid or unsupported wkid: "+d);var c=new b;c.yg=d;return c};b.nR=function(d){if(null==d||0==d.length)throw a.f.F("Cannot create SpatialReference from null or empty text.");var c=new b;c.Uh=d;return c};b.prototype.Eb=function(a){return this==a?!0:null==a||this.constructor!=a.constructor||this.yg!=a.yg||0==this.yg&&this.Uh!==a.Uh?!1:!0};b.OS=function(b,c){var d=Math.PI/180,f=new a.ea;a.oM.RS(b.w().x*d,b.w().y*d,c.w().x*d,c.w().y*d,f);return f.j};
b.prototype.toString=function(){return"[ tol: "+this.Bo()+"; wkid: "+this.yc()+"; wkt: "+this.lH()+"]"};b.prototype.jc=function(){if(""!==this.jq)return this.jq;var a=this.toString();if(Array.prototype.reduce)return this.jq="S"+a.split("").reduce(function(a,c){a=(a<<5)-a+c.charCodeAt(0);return a&a},0);var c=0;if(0===a.length)return"";for(var b=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b),c&=c;return this.jq="S"+c};b.prototype.Bo=function(){return this.re(0)};b.prototype.Ao=function(){return null!==
this.av?this.av:this.av=a.Nu.uR(this)};b.p_=!0;b.rv=2147483645;b.sv=9007199254740990;return b}();a.Td=b})(y||(y={}));(function(a){var b=function(b){function d(){b.apply(this,arguments);this.ij=null;this.lp=new a.dE;this.Ww=this.Er=null}K(d,b);d.uR=function(c){var b=new d;b.yg=c.yg;b.tp=c.tp;b.kJ=c.kJ;b.Uh=c.Uh;if(""!==b.Uh&&null!==b.Uh){c=d.OY(b.Uh);var f=d.kX(b.Uh);b.lp.Dy(c,f,a.ss.Integer64);b.Jy(c);b.yg=c.Zs()}else c=d.CX(b.yg),b.Jy(c),b.lp.Dy(c,null,a.ss.Integer64);return b};d.prototype.re=function(a){return this.lp.Bo(a)};
d.kX=function(c){if(0>=c.length)throw a.f.F();var b=null;try{b=a.PD.fromString(c)}catch(k){b=null}return null==b?null:d.rD(b,!0)};d.prototype.Jy=function(a){this.Qd=a;this.Er=this.Qd.Od()};d.prototype.Jc=function(){return 0==this.Fb()||3==this.Fb()?!1:this.Qd.Jc()};d.prototype.TH=function(){return 0==this.Fb()?!1:3==this.Fb()?this.ij.Fk().Jc():this.Qd.Jc()};d.prototype.Kg=function(){return null!=this.Qd?this.Qd.uf:null};d.prototype.cn=function(){return this.Qd.cn()};d.prototype.de=function(){return this.Qd.de()};
d.prototype.Ch=function(){return null!=this.Qd?this.Qd.ex:NaN};d.prototype.en=function(){return this.Qd.en()};d.prototype.Vs=function(){return this.Qd.Vs()};d.prototype.Sj=function(){return this.Qd.Sj()};d.prototype.gU=function(c){return a.SD.yz(this.Qd,c.Qd)};d.prototype.Lk=function(){return this.Qd.Lk()};d.prototype.Us=function(){return this.Qd.Us()};d.prototype.pi=function(){return 3==this.Fb()?this.ij.Fk().pi():this.Qd.pi()};d.prototype.Bh=function(){if(!this.Jc())throw a.f.F("!isPannable()");
var c=new a.h;this.Qd.Bh(c);return c};d.prototype.qe=function(){if(!this.Jc())throw a.f.F("!isPannable()");return this.Qd.gp};d.prototype.zT=function(){if(!this.Jc())throw a.f.F("!isPannable()");var c=new a.h;this.Qd.yT(c);return c};d.prototype.aw=function(){if(!this.Jc())throw a.f.F("!isPannable()");return this.Qd.aw()};d.prototype.$v=function(){if(!this.Jc())throw a.f.F("!isPannable()");return this.Qd.$v()};d.prototype.Ws=function(){return null!=this.ij?this.ij.Fk().Ws():this.Qd.Ws()};d.prototype.CS=
function(){return this.Qd.Tv()};d.prototype.hX=function(a){a.assign(this.lp)};d.prototype.Yi=function(){return this.Er.getUnitFactor()};d.prototype.eA=function(a){return this.lp.eA(a)};d.prototype.kc=function(){var c=this.Fb();if(1==c)return this;if(3==c)return this.ij.Fk().kc();if(0==c)throw a.f.X("invalid call");if(4===c)throw a.f.X("invalid call");if(null!==this.Ww)return this.Ww;c=this.Kg().getGeogcs();if(null==c)throw a.f.ya();return this.Ww=d.hG(c,this.lp.at())};d.hG=function(c,b){if(null==
c)throw a.f.F("null pointer.");var e=new d;c=d.Ou(c,!0);e.lp.Dy(c,null,b);e.Jy(c);e.yg=c.Zs();return e};d.prototype.Fb=function(){var c=this.Kg();if(null!=c)switch(c.getType()){case a.Vc.PE_TYPE_GEOGCS:return 1;case a.Vc.PE_TYPE_PROJCS:return 2}return 4};d.prototype.cA=function(c){var b=new a.b;this.Qd.cA(c,b);return b};d.prototype.Tv=function(){return this.Qd.Tv()};d.Ou=function(c,b){var e=c.getCode();if(0>=e&&(e=a.Tf.getCode(c),0<e)){var f=a.Tf.coordsys(e);if(null==f)throw a.f.F("Text to wkid mapping had failed: "+
e);return d.Ou(f,b)}if(b&&0<e&&(f=d.Lv[e]))return f;f=a.Ib.hw(c,e,!1);if(b=d.yH[f])return b;b=0>=e?c:a.Tf.coordsys(e);b=new a.SD(b);d.yH[f]=b;0<e&&(d.Lv[e]=b);return b};d.CX=function(c){if(0>=c)throw a.f.F("Invalid or unsupported wkid: "+c);var b=d.Lv[c];if(null!=b)return b;b=a.Tf.coordsys(c);if(null==b)throw a.f.F("Invalid or unsupported wkid: "+c);b=d.Ou(b,!1);b.Zs()!=c&&(d.Lv[c]=b);return b};d.OY=function(c){if(null==c||void 0===c||0==c.length)throw a.f.F("Cannot create SpatialReference from null or empty text.");
var b=null;try{b=a.Tf.fromString(a.Vc.PE_TYPE_COORDSYS,c)}catch(k){throw a.f.F("Cannot create SpatialReference from text. "+k.message);}if(null===b)throw a.f.F("Cannot create SpatialReference from text. ");return d.Ou(b,!0)};d.rD=function(c,b){var e=c.getCode();if(0>=e&&(e=a.Tf.getCode(c),0<e)){e=a.Tf.vertcs(e);if(null===e)throw a.f.F();return d.rD(e,b)}if(b&&0<e&&(b=d.wH[e]))return b;c=a.Ib.hw(c,e,!1);if(b=d.XH[c])return b;var f;0>=e||(f=a.Tf.vertcs(e));if(null===f)throw a.f.F();b=new a.EN(f);d.XH[c]=
b;0<e&&(d.wH[e]=b);return b};d.iK=function(c,b){var d;if(null===b||b.u())return null;var e=new a.h,f;null!==b&&1!=c.Fb()?(d=c.kc(),f=d.Kg(),d=a.qs.Hs(c,d,null,null),d=a.ns.local().V(b,d,null),d.s(e)):(f=c.Kg(),b.s(e));d=f.getPrimem().getLongitude();f=f.getUnit().getUnitFactor();return new a.ND(e.o,e.A,e.v,e.B,d,f)};d.DE=function(a){var c={name:"",steps:[],_pt:null,_entry:null},b=0;for(a=a.getEntries();b<a.length;b++){var d=a[b],f={x_:!1,X_:"",W_:-1,geogtran:null};0===d.getDirection()?f.isInverse=
!1:f.isInverse=!0;var g=d.getGeogtran().getCode();-1<g?f.wkid=g:f.wkt=d.getGeogtran().toString();c.steps.push(f)}return c};d.PT=function(c,b,f,g){void 0===f&&(f=null);f=d.iK(g,f);c=a.fq.getGTlist(c.Kg(),b.Kg(),2,a.fq.PE_GTLIST_OPTS_COMMON,f,1);b=null;c&&0<c.length&&(b=this.DE(c[0]),a.vy.destroy(c));null!==f&&f.destroy();return b};d.QT=function(c,b,f,g){var e;void 0===f&&(f=null);void 0===g&&(g=null);void 0===e&&(e=30);f=d.iK(g,f);c=a.fq.getGTlist(c.Kg(),b.Kg(),2,a.fq.PE_GTLIST_OPTS_COMMON,f,e);b=
[];if(c&&0<c.length){for(e=0;e<c.length;e++)b.push(this.DE(c[e]));a.vy.destroy(c)}null!==f&&f.destroy();return b};d.Lv={};d.yH={};d.wH={};d.XH={};return d}(a.Td);a.Nu=b})(y||(y={}));(function(a){(function(a){a[a.Integer32=0]="Integer32";a[a.Integer64=1]="Integer64";a[a.FloatingPoint=2]="FloatingPoint"})(a.ss||(a.ss={}));var b=a.ss,f=function(){function d(){this.kq()}d.prototype.assign=function(a){this.Xl=a.Xl;this.Yl=a.Yl;this.uj=a.uj;this.Sw=a.Sw;this.Kn=a.Kn;this.Rw=a.Rw;this.qx=a.qx;this.jl=a.jl;
this.Br=a.Br;this.Ar=a.Ar;this.Fn=a.Fn};d.prototype.Qs=function(){return this.Xl};d.prototype.Rs=function(){return this.Yl};d.prototype.Ss=function(){return this.Sw};d.prototype.Ps=function(){return this.Rw};d.prototype.Sz=function(){return this.uj};d.prototype.Tz=function(){return this.Kn};d.prototype.Rz=function(){return this.qx};d.prototype.at=function(){return this.Fn};d.prototype.kq=function(){this.Yl=this.Xl=0;this.uj=1;this.Sw=0;this.Kn=1;this.Rw=0;this.qx=1;this.Ar=this.Br=this.jl=2.220446049250313E-14;
this.Fn=b.FloatingPoint};d.prototype.Dy=function(c,d,f){this.kq();this.Fn=f;if(f!=b.FloatingPoint){var e=new a.h;c.YS(e);this.Xl=e.o;this.Yl=e.A}else this.Yl=this.Xl=-1.7976931348623157E308;e=c.uf.getType();e==a.Vc.PE_TYPE_GEOGCS?(e=(f==b.Integer64?1E-9:1/18E5)*c.de(),this.uj=1/e):e==a.Vc.PE_TYPE_PROJCS&&(e=(f==b.Integer64?1E-4:.001)*c.cn(),this.uj=1/e);null!=d?(e=(f==b.Integer32?.001:1E-4)*d.WI,this.Kn=1/e):this.Kn=1E4;this.qx=1E4;this.VO();this.jl=c.ex;this.Br=null!=d?.001*d.WI:.001;this.Ar=2.220446049250313E-14};
d.prototype.VO=function(){if(this.Fn!=b.FloatingPoint){var c=this.Fn==b.Integer64?a.Td.sv:a.Td.rv,d=c/this.uj,f=this.Xl+d,g=a.J.truncate((f-this.Xl)*this.uj);g>c&&(this.uj=c/(f-this.Xl));d=this.Yl+d;g=a.J.truncate((d-this.Yl)*this.uj);g>c&&(this.uj=c/(d-this.Yl))}};d.prototype.xC=function(a,b){switch(a){case 0:this.jl=b;case 1:this.Br=b;case 2:this.Ar=b}};d.prototype.Bo=function(a){switch(a){case 0:return this.jl;case 1:return this.Br;case 2:return this.Ar}return 0};d.prototype.VT=function(){var c=
new a.h;switch(this.at()){case b.Integer32:var d=a.Td.rv/this.Sz();c.I(this.Qs(),this.Rs(),this.Qs()+d,this.Rs()+d);break;case b.Integer64:d=a.Td.sv/this.Sz();c.I(this.Qs(),this.Rs(),this.Qs()+d,this.Rs()+d);break;case b.FloatingPoint:c.I(-1.7976931348623157E308,-1*1.7976931348623157E308,1.7976931348623157E308,1.7976931348623157E308);break;default:throw a.f.X("internal error");}return c};d.prototype.WT=function(){var c=new a.Ac;switch(this.at()){case b.Integer32:var d=a.Td.rv/this.Tz();c.I(this.Ss(),
this.Ss()+d);break;case b.Integer64:d=a.Td.sv/this.Tz();c.I(this.Ss(),this.Ss()+d);break;case b.FloatingPoint:c.I(-1*1.7976931348623157E308,1.7976931348623157E308);break;default:throw a.f.X("internal error");}return c};d.prototype.rT=function(){var c=new a.Ac;switch(this.at()){case b.Integer32:var d=a.Td.rv/this.Rz();c.I(this.Ps(),this.Ps()+d);break;case b.Integer64:d=a.Td.sv/this.Rz();c.I(this.Ps(),this.Ps()+d);break;case b.FloatingPoint:c.I(-1*1.7976931348623157E308,1.7976931348623157E308);break;
default:throw a.f.X("internal error");}return c};d.prototype.eA=function(a){if(this.Fn==b.FloatingPoint)return 0;switch(a){case 0:return 1/this.uj;case 1:return 1/this.Kn;case 2:return 1/this.Kn;default:return 0}};d.prototype.toString=function(){var a;a="SRPD [m_toleranceXY: "+this.jl.toString();a=a+";m_falseX: "+this.Xl.toString();a=a+";m_falseY: "+this.Yl.toString();a=a+";m_unitsXY: "+this.uj.toString();a=a+";m_falseZ: "+this.Sw.toString();a=a+";m_unitsZ: "+this.Kn.toString();a=a+";m_falseM: "+
this.Rw.toString();a=a+";m_toleranceZ: "+this.Br.toString();a=a+";m_toleranceM: "+this.Ar.toString();a=a+";m_precision: "+this.Fn.toString();return a+"] "};return d}();a.dE=f})(y||(y={}));(function(a){function b(a,c){89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);c*=.017453292519943;return[111319.49079327169*a,3189068.5*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function f(a,c,b){a=a/6378137*57.29577951308232;return b?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:
[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function d(c,b){var d=c.Vf();if(33===c.G()){var e=b(d.Be(),d.nf());d.rb(e[0],e[1])}else if(197===c.G())e=b(c.R.o,c.R.A,!0),c=b(c.R.v,c.R.B,!0),d.I(e[0],e[1],c[0],c[1]);else for(e=new a.b,c=0;c<d.D();c++){d.w(c,e);var f=b(e.x,e.y,!0);e.ka(f[0],f[1]);d.rb(c,e)}return d}function c(a){return d(a,f)}function e(a){return d(a,b)}var k=Math.PI/180,g=function(){function c(){}c.Qu=function(c){var b=Math.sqrt(.006694379990197414),
d=Math.sin(c.y*k);return a.b.pa(6378137*c.x*k,3167719.6636462314*(d/(1-.006694379990197414*d*d)-1/(2*b)*Math.log((1-b*d)/(1+b*d))))};c.CA=function(c,b,d,e){var f=1/298.257223563,g=Math.sin(d);d=Math.cos(d);var l=(1-f)*Math.tan(c);c=1/Math.sqrt(1+l*l);for(var h=l*c,m=Math.atan2(l,d),l=c*g,n=l*l,r=1-n,p=2.7233160610754688E11*r/4.040829998466145E13,t=1+p/16384*(4096+p*(-768+p*(320-175*p))),u=p/1024*(256+p*(-128+p*(74-47*p))),p=e/(6356752.31424518*t),v=2*Math.PI,q,y,x,A;1E-12<Math.abs(p-v);)x=Math.cos(2*
m+p),q=Math.sin(p),y=Math.cos(p),A=u*q*(x+u/4*(y*(-1+2*x*x)-u/6*x*(-3+4*q*q)*(-3+4*x*x))),v=p,p=e/(6356752.31424518*t)+A;e=h*q-c*y*d;r=f/16*r*(4+f*(4-3*r));return a.b.pa((b+(Math.atan2(q*g,c*y-h*q*d)-(1-r)*f*l*(p+r*q*(x+r*y*(-1+2*x*x)))))/k,Math.atan2(h*y+c*q*d,(1-f)*Math.sqrt(n+e*e))/k)};c.AM=function(a,c,b,d){var e=1/298.257223563,f=d-c,k=Math.atan((1-e)*Math.tan(a)),g=Math.atan((1-e)*Math.tan(b)),l=Math.sin(k),k=Math.cos(k),h=Math.sin(g),g=Math.cos(g),m=f,n,r=1E3,p,t,u,v,q,y,x;do{u=Math.sin(m);
v=Math.cos(m);t=Math.sqrt(g*u*g*u+(k*h-l*g*v)*(k*h-l*g*v));if(0===t)return 0;v=l*h+k*g*v;q=Math.atan2(t,v);y=k*g*u/t;p=1-y*y;u=v-2*l*h/p;isNaN(u)&&(u=0);x=e/16*p*(4+e*(4-3*p));n=m;m=f+(1-x)*e*y*(q+x*t*(u+x*v*(-1+2*u*u)))}while(1E-12<Math.abs(m-n)&&0<--r);if(0===r)return l=d-c,{azimuth:Math.atan2(Math.sin(l)*Math.cos(b),Math.cos(a)*Math.sin(b)-Math.sin(a)*Math.cos(b)*Math.cos(l)),geodesicDistance:6371008.771415059*Math.acos(Math.sin(a)*Math.sin(b)+Math.cos(a)*Math.cos(b)*Math.cos(d-c))};a=2.7233160610754688E11*
p/4.040829998466145E13;c=a/1024*(256+a*(-128+a*(74-47*a)));return{azimuth:Math.atan2(g*Math.sin(m),k*h-l*g*Math.cos(m)),NS:6356752.31424518*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(q-c*t*(u+c/4*(v*(-1+2*u*u)-c/6*u*(-3+4*t*t)*(-3+4*u*u)))),P_:Math.atan2(k*Math.sin(m),k*h*Math.cos(m)-l*g)}};c.zR=function(c){var b=c.hasAttribute(1),d=c.hasAttribute(2),e=[],f=c.aa(),k=null,g=null;b&&(k=c.Pa(1));d&&(g=c.Pa(2));for(var l=new a.b,h=0;h<f;h++){for(var m=c.wa(h),n=c.Ka(h),r=0,p=0,t=NaN,u=NaN,v=NaN,q=NaN,
y=c.Qb(h),x=[],A=m;A<m+n;A++){c.w(A,l);var q=v=NaN,z=[l.x,l.y];b&&(v=k.get(A),z.push(v));d&&(f=g.get(A),z.push(q));A==m&&y&&(r=l.x,p=l.y,t=v,u=q);x.push(z)}!y||r==l.x&&p==l.y&&(!b||isNaN(t)&&isNaN(v)||t==v)&&(!d||isNaN(u)&&isNaN(q)||u==q)||x.push(x[0].slice(0));e.push(x)}return e};c.Dz=function(a,b){a=c.zR(a);637.100877141506>b&&(b=637.100877141506);for(var d=[],e,f=0;f<a.length;f++){var g=a[f];d.push(e=[]);e.push([g[0][0],g[0][1]]);var l,h,m,n,r,p;l=g[0][0]*k;h=g[0][1]*k;for(r=0;r<g.length-1;r++)if(m=
g[r+1][0]*k,n=g[r+1][1]*k,l!==m||h!==n){n=c.AM(h,l,n,m);m=n.azimuth;n=n.NS;var t=n/b;if(1<t){for(p=1;p<=t-1;p++){var u=c.CA(h,l,m,p*b);e.push([u.x,u.y])}p=c.CA(h,l,m,(n+Math.floor(t-1)*b)/2);e.push([p.x,p.y])}h=c.CA(h,l,m,n);e.push([h.x,h.y]);l=h.x*k;h=h.y*k}}return{fK:d}};c.MS=function(b){for(var d=[],e=0;e<b.length;e++){var f=b[e],f=c.Dz(f,1E4);d.push(f)}b=[];for(var k=0;k<d.length;k++){for(var f=d[k],g=0,e=0;e<f.fK.length;e++){var l=f.fK[e],h=c.Qu(a.b.pa(l[0][0],l[0][1])),m=c.Qu(a.b.pa(l[l.length-
1][0],l[l.length-1][1])),n=m.x*h.y-h.x*m.y,r;for(r=0;r<l.length-1;r++)h=c.Qu(a.b.pa(l[r+1][0],l[r+1][1])),m=c.Qu(a.b.pa(l[r][0],l[r][1])),n+=m.x*h.y-h.x*m.y;g+=n}g/=1;b.push(g/-2)}return b};return c}();a.pM=g;g=function(){function b(){}b.WB=function(a,c,d,e,f,k,g){b.tD[a.jc()]=c;0==isNaN(d)&&(b.vD[a.jc()]=d);0==isNaN(e)&&(b.WD[a.jc()]=e);0==isNaN(f)&&(b.nD[a.jc()]=f);b.xD[a.jc()]=k;null!==g&&(b.zD[a.jc()]=g)};b.Hx=function(a,c,d){b.QD[a.jc()+"-"+c.jc()]=d};b.kc=function(c){c=b.tD[c.jc()];if(void 0==
c)throw a.f.df();return c};b.de=function(c){c=b.vD[c.jc()];if(void 0==c)throw a.f.df();return c};b.gw=function(c){c=b.WD[c.jc()];if(void 0==c)throw a.f.df();return c};b.Rv=function(c){c=b.nD[c.jc()];if(void 0==c)throw a.f.df();return c};b.Bh=function(c){c=b.zD[c.jc()];if(void 0==c)throw a.f.df();return a.h.pa(c[0],c[1],c[2],c[3])};b.Jc=function(c){c=b.xD[c.jc()];if(void 0==c)throw a.f.df();return c};b.Xg=function(c,d,e){if(d.Eb(e))return c;var f=b.QD[d.jc()+"-"+e.jc()];if(void 0!==f)return f(c,d,
e);throw a.f.df();};b.ku=function(){throw a.f.df();};b.SS=function(){throw a.f.df();};b.TW=function(){throw a.f.df();};b.Lk=function(){throw a.f.df();};b.qX=function(){var b=a.Td.create(102100),d=a.Td.create(3857),f=a.Td.create(4326);a.fb.WB(b,f,NaN,NaN,NaN,!1,null);a.fb.WB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]);a.fb.WB(d,f,NaN,NaN,NaN,!1,null);a.fb.Hx(b,f,c);a.fb.Hx(f,b,e);a.fb.Hx(d,f,c);a.fb.Hx(f,d,e)};b.tD=[];b.vD=[];b.WD=[];b.nD=[];b.xD=[];b.zD=[];b.QD=[];return b}();a.fb=g})(y||
(y={}));y.fb.qX();(function(a){var b=function(){function b(a){this.g=null;this.kh=-1;this.xd=this.size=this.Jf=0;this.ed=a}b.prototype.kd=function(a){a<this.Jf?(this.g[a*this.ed]=this.kh,this.kh=a):this.Jf--;this.size--};b.prototype.S=function(a,c){return this.g[a*this.ed+c]};b.prototype.P=function(a,c,b){this.g[a*this.ed+c]=b};b.prototype.Pe=function(){var b=this.kh;if(-1==b){if(this.Jf==this.xd){b=0!=this.xd?a.J.truncate(3*(this.xd+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.xd)throw a.f.vd();
this.Co(b)}b=this.Jf;this.Jf++}else this.kh=this.g[b*this.ed];this.size++;for(var c=b*this.ed+this.ed,e=b*this.ed;e<c;e++)this.g[e]=-1;return b};b.prototype.nl=function(b){var c=this.kh;if(-1==c){if(this.Jf==this.xd){c=0!=this.xd?a.J.truncate(3*(this.xd+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.xd)throw a.f.vd();this.Co(c)}c=this.Jf;this.Jf++}else this.kh=this.g[c*this.ed];this.size++;for(var d=c*this.ed,f=this.ed,g=0;g<f;g++)this.g[d+g]=b[g];return c};b.prototype.Vi=function(a){this.kh=-1;
this.size=this.Jf=0;a&&(this.g=null,this.xd=0)};b.prototype.Qe=function(a){a>this.xd&&this.Co(a)};b.prototype.$x=function(a,c,b){var d=this.g[this.ed*c+b];this.g[this.ed*c+b]=this.g[this.ed*a+b];this.g[this.ed*a+b]=d};b.Jm=function(){return-2};b.jo=function(){return-3};b.AA=function(a){return 0<=a};b.prototype.Co=function(a){null==this.g&&(this.g=[]);this.xd=a};return b}();a.ad=b;b=function(){function b(a){this.g=new Int32Array(0);this.kh=-1;this.xd=this.size=this.Jf=0;this.ed=a}b.prototype.kd=function(a){a<
this.Jf?(this.g[a*this.ed]=this.kh,this.kh=a):this.Jf--;this.size--};b.prototype.S=function(a,c){return this.g[a*this.ed+c]};b.prototype.P=function(a,c,b){this.g[a*this.ed+c]=b};b.prototype.Pe=function(){var b=this.kh;if(-1==b){if(this.Jf==this.xd){b=0!=this.xd?a.J.truncate(3*(this.xd+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.xd)throw a.f.vd();this.Co(b)}b=this.Jf;this.Jf++}else this.kh=this.g[b*this.ed];this.size++;for(var c=b*this.ed;c<b*this.ed+this.ed;c++)this.g[c]=-1;return b};b.prototype.nl=
function(b){var c=this.kh;if(-1==c){if(this.Jf==this.xd){c=0!=this.xd?a.J.truncate(3*(this.xd+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.xd)throw a.f.vd();this.Co(c)}c=this.Jf;this.Jf++}else this.kh=this.g[c*this.ed];this.size++;for(var d=c*this.ed,f=0;f<b.length;f++)this.g[d+f]=b[f];return c};b.prototype.Vi=function(a){this.kh=-1;this.size=this.Jf=0;a&&(this.g=null,this.xd=0)};b.prototype.Qe=function(a){a>this.xd&&this.Co(a)};b.prototype.$x=function(a,c,b){var d=this.g[this.ed*c+b];this.g[this.ed*
c+b]=this.g[this.ed*a+b];this.g[this.ed*a+b]=d};b.Jm=function(){return-2};b.jo=function(){return-3};b.AA=function(a){return 0<=a};b.prototype.Co=function(a){null==this.g&&(this.g=new Int32Array(0));var c=new Int32Array(this.ed*a);c.set(this.g,0);this.g=c;this.xd=a};return b}();a.ZN=b;!0===a.Xh.Bm&&(a.ad=a.ZN)})(y||(y={}));(function(a){var b;(function(a){a[a.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";a[a.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";a[a.enumInputModeSimplifyWinding=
5]="enumInputModeSimplifyWinding";a[a.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon"})(b||(b={}));var f=function(){function c(c){this.bf=c;this.Wh=NaN;this.pI=new a.Cg;this.qI=new a.Cg;this.ht=new a.Ac;this.it=new a.Ac}c.prototype.compare=function(a,c,b){a=a.ja(b);this.bf.PB(c,this.pI);this.bf.PB(a,this.qI);c=this.pI.get();a=this.qI.get();this.ht.I(c.ua,c.sa);this.it.I(a.ua,a.sa);if(this.ht.ha<this.it.ca)return-1;if(this.ht.ca>this.it.ha)return 1;b=c.ra==c.oa;var d=a.ra==a.oa;if(b||
d){if(b&&d)return 0;if(c.ra==a.ra&&c.ua==a.ua)return b?1:-1;if(c.oa==a.oa&&c.sa==a.sa)return b?-1:1}b=c.pf(this.Wh,this.ht.ca);d=a.pf(this.Wh,this.it.ca);b==d&&(b=Math.min(c.oa,a.oa),d=.5*(b+this.Wh),d==this.Wh&&(d=b),b=c.pf(d,this.ht.ca),d=a.pf(d,this.it.ca));return b<d?-1:b>d?1:0};c.prototype.QK=function(a){this.Wh=a};return c}(),d=function(){function c(c){this.bb=c;this.iJ=new a.Cg;this.cg=new a.b;this.bB=new a.Ac}c.prototype.dY=function(a){this.cg.L(a)};c.prototype.compare=function(a,c){this.bb.PB(a.ja(c),
this.iJ);a=this.iJ.get();this.bB.I(a.ua,a.sa);if(this.cg.x<this.bB.ca)return-1;if(this.cg.x>this.bB.ha)return 1;a=a.pf(this.cg.y,this.cg.x);return this.cg.x<a?-1:this.cg.x>a?1:0};return c}();b=function(){function c(){this.sI=this.cj=this.fj=this.SA=this.No=this.Ye=this.Rc=this.Eh=this.De=null;this.sp=this.Tg=-1;this.rI=!0;this.WA=!1;this.TA=NaN;this.mj=new a.$d;this.bQ=2147483647;this.aQ=a.J.truncate(-2147483648);this.xg=this.xe=this.km=this.qr=this.rn=this.pr=this.It=this.rf=-1;this.qa=0}c.prototype.dz=
function(a){this.TA=a};c.prototype.Nn=function(){null==this.De&&(this.De=new a.ad(8));var c=this.De.Pe();this.De.P(c,1,0);return c};c.prototype.eW=function(){null==this.Rc&&(this.Rc=new a.ad(8));var c=this.Rc.Pe();this.Rc.P(c,2,0);this.Rc.P(c,3,0);var b=this.Rc.Pe();this.Rc.P(b,2,0);this.Rc.P(b,3,0);this.yK(c,b);this.yK(b,c);return c};c.prototype.uJ=function(){null==this.Ye&&(this.Ye=new a.ad(8));var c=this.Ye.Pe();this.Ye.P(c,2,0);return c};c.prototype.PX=function(a,c){this.De.P(a,7,c)};c.prototype.co=
function(a,c){this.De.P(a,2,c)};c.prototype.OX=function(a,c){this.De.P(a,1,c)};c.prototype.eY=function(a,c){this.De.P(a,3,c)};c.prototype.bY=function(a,c){this.De.P(a,4,c)};c.prototype.Ur=function(a,c){this.De.P(a,5,c)};c.prototype.VS=function(a){return this.De.S(a,5)};c.prototype.NX=function(a,c){this.De.P(a,6,c)};c.prototype.$O=function(a,c){this.NX(c,a)};c.prototype.xK=function(a,c){this.Rc.P(a,1,c)};c.prototype.yK=function(a,c){this.Rc.P(a,4,c)};c.prototype.ym=function(a,c){this.Rc.P(a,5,c)};
c.prototype.xm=function(a,c){this.Rc.P(a,6,c)};c.prototype.UX=function(a,c){this.Rc.P(a,2,c)};c.prototype.Mx=function(a,c){this.Rc.P(a,3,c)};c.prototype.VG=function(a){return this.Rc.S(a,3)};c.prototype.tu=function(a,c){this.Rc.P(a,7,c)};c.prototype.wL=function(a,c){if(-1!=this.an(a))for(c=c?-1:a,a=this.an(a);-1!=a;a=this.ft(a))this.a.Va(this.Uj(a),this.qr,c)};c.prototype.dy=function(a,c){-1!=a&&(this.wL(a,c),this.wL(this.za(a),c))};c.prototype.ru=function(a,c){this.Ye.P(a,1,c)};c.prototype.rh=function(a,
c){this.Ye.P(a,2,c)};c.prototype.$n=function(a,c){this.Ye.P(a,3,c);this.LX(a,this.US(c));this.KX(c,a)};c.prototype.KX=function(a,c){this.Ye.P(a,4,c)};c.prototype.LX=function(a,c){this.Ye.P(a,5,c)};c.prototype.sK=function(a,c){this.Ye.P(a,6,c)};c.prototype.qK=function(a,c){this.Ye.P(a,7,c)};c.prototype.pK=function(a,c){this.No.write(a,c)};c.prototype.rK=function(a,c){this.SA.write(a,c)};c.prototype.gZ=function(c){var b=0,d=0,e=this.LG(c),f=new a.b,g=new a.b,l=new a.b;this.Xs(e,f);g.L(f);var h=e;do this.$m(h,
l),d+=a.b.Cb(g,l),this.Ef(this.za(h))!=c&&(b+=(l.x-f.x-(g.x-f.x))*(l.y-f.y+(g.y-f.y))*.5),g.L(l),h=this.qc(h);while(h!=e);this.No.write(c,b);this.SA.write(c,d)};c.prototype.AW=function(c){var b=new f(this),e=new a.tk;e.Qe(a.J.truncate(this.qa/2));e.Ep(b);for(var g=new a.ia(0),l=this.xh(),h=null,m=0,n=new a.b,p=this.rf;-1!=p;p=this.og(p)){m++;var t=this.kf(p);if(-1!=t){g.yf(0);if(!this.$Y(e,l,g,t)){this.w(p,n);b.QK(n.y);var u=t;do{var q=this.Kb(u,l);-1!=q&&(e.Ld(q,-1),this.Ob(u,l,-2));u=this.qc(this.za(u))}while(t!=
u);u=t;do q=this.Kb(u,l),-1==q&&(q=e.addElement(u,-1),g.add(q)),u=this.qc(this.za(u));while(t!=u)}for(t=g.size-1;0<=t;t--)q=g.get(t),u=e.ja(q),this.Ob(this.za(u),l,q),this.zW(e,q,c)}else-1==this.Jz(p)&&(null==h&&(h=new d(this)),this.w(p,n),h.dY(n),u=e.GX(h),t=this.km,-1!=u&&(q=e.ja(u),this.Ef(q)==this.Ef(this.za(q))&&(q=this.XG(e,u)),-1!=q&&(t=this.Ef(q))),this.$O(t,p))}this.ni(l)};c.prototype.zW=function(a,c,b){var d=a.ja(c),e=this.Ef(d);if(-1==this.vo(e)){var f=this.XG(a,c),k=this.za(d),g=this.Ef(k);
this.Dq(e);this.Dq(g);var l=this.vo(e),h=this.vo(g);-1==f&&-1==l&&(g==e?(this.$n(g,this.km),l=h=this.km):(-1==h&&(this.$n(g,this.km),h=this.km),this.$n(e,g),l=g));if(-1!=f){var m=this.Ef(f);-1==h&&(0>=this.Dq(m)?(h=this.vo(m),this.$n(g,h)):(this.$n(g,m),h=m),g==e&&(l=h))}-1==l&&this.aZ(e,g);0==b?this.ZW(a,c,d,f,e,g):5==b?this.$W(a,c,d,k,e,g):4==b&&this.YW(d,f,e,g)}};c.prototype.ZW=function(a,c,b,d,f,g){var e=this.Hk(f);if(-1!=d){var k=this.Hk(g),l=this.Hk(this.Ef(d));d=e&k&l;l^=l&this.Ah(b);l|=d;
0!=l&&(this.rh(g,k|l),this.rh(f,l|e),e=e||l)}for(c=a.nb(c);-1!=c;c=a.nb(c)){d=a.ja(c);b=this.Ef(this.za(d));f=this.Hk(b);g=this.Ah(d);k=this.Ef(d);l=this.Hk(k);d=f&l&e;e^=e&g;e|=d;if(0==e)break;this.rh(b,f|e);this.rh(k,l|e)}};c.prototype.$W=function(c,b,d,f,g,l){if(g!=l){d=this.Kb(d,this.xg);d+=this.Kb(f,this.xg);f=0;var e=new a.ia(0),k=new a.ia(0);k.add(0);for(var h=c.xc(-1);h!=b;h=c.nb(h)){var m=c.ja(h),n=this.za(m),p=this.Ef(m),r=this.Ef(n);if(p!=r){m=this.Kb(m,this.xg);m+=this.Kb(n,this.xg);f+=
m;n=!1;0!=e.size&&e.Fc()==r&&(k.Pf(),e.Pf(),n=!0);if(-1==this.vo(r))throw a.f.ya();n&&this.vo(r)==p||(k.add(f),e.add(p))}}f+=d;0!=e.size&&e.Fc()==l&&(k.Pf(),e.Pf());0!=f?0==k.Fc()&&(c=this.a.rd,c=this.Ha(c),this.rh(g,c)):0!=k.Fc()&&(c=this.a.rd,c=this.Ha(c),this.rh(g,c))}};c.prototype.YW=function(a,c,b,d){var e=this.Ha(this.a.rd);if(-1==c)this.rh(d,this.sp),a=this.Kb(a,this.Tg),0!=(a&1)?this.rh(b,e):this.rh(b,this.sp);else{var f=this.Hk(d);0==f&&(f=this.Hk(this.Ef(c)),this.rh(d,f));a=this.Kb(a,this.Tg);
0!=(a&1)?this.rh(b,f==e?this.sp:e):this.rh(b,f)}};c.prototype.$Y=function(a,c,b,d){var e=d,f=-1,k=-1,g=0;do{if(2==g)return!1;var l=this.Kb(e,c);if(-1!=l){if(-1!=f)return!1;f=l}else{if(-1!=k)return!1;k=e}g++;e=this.qc(this.za(e))}while(d!=e);if(-1==k||-1==f)return!1;this.Ob(a.ja(f),c,-2);a.jk(f,k);b.add(f);return!0};c.prototype.aZ=function(a,c){var b=this.Dq(a);if(0!=b){var d=this.Dq(c);0<b&&0>d?this.$n(a,c):0>b&&0<d?this.$n(a,c):(b=this.vo(c),-1!=b&&this.$n(a,b))}};c.prototype.sR=function(c,b){this.qr=
this.a.Vd();for(var d=0,e=b.size;d<e;d++){var f=b.get(d),k=this.a.Sa(f,this.rn),g=this.a.ng(this.a.ld(f)),l=this.a.hc(g);if(a.T.Ic(l)){var h=this.a.U(f);if(-1!=h){var m=this.a.Sa(h,this.rn);if(k!=m){var n=this.eW(),p=this.za(n),t=this.Eh.Pe();this.Eh.P(t,0,f);this.Eh.P(t,1,-1);this.tu(n,t);this.xK(n,k);t=this.kf(k);-1==t?(this.co(k,n),this.ym(n,p),this.xm(p,n)):(k=this.Te(t),this.ym(t,p),this.xm(p,t),this.xm(k,n),this.ym(n,k));this.xK(p,m);k=this.kf(m);-1==k?(this.co(m,p),this.xm(n,p),this.ym(p,n)):
(m=this.Te(k),this.ym(k,n),this.xm(n,k),this.xm(m,p),this.ym(p,m));g=this.Ha(g);0==c?(this.Ob(p,this.xe,0),this.Ob(n,this.xe,1736==l?g:0)):5==c?(m=new a.b,this.a.w(f,m),f=new a.b,this.a.w(h,f),k=h=0,0>m.compare(f)?h=1:k=-1,this.Ob(p,this.xe,0),this.Ob(n,this.xe,0),this.Ob(n,this.xg,h),this.Ob(p,this.xg,k)):7==c?(this.Ob(p,this.xe,this.sp),this.Ob(n,this.xe,1736==l?g:0)):4==c&&(this.Ob(p,this.xe,0),this.Ob(n,this.xe,0),this.Ob(n,this.Tg,1),this.Ob(p,this.Tg,1));l=1736==l?this.aQ:0;this.Mx(n,g|l);this.Mx(p,
g|l)}}}}};c.prototype.TV=function(a,c){var b=this.an(c);if(-1!=b){var d=this.an(a);this.Eh.P(b,1,d);this.tu(a,b);this.tu(c,-1)}a=this.za(a);c=this.za(c);b=this.an(c);-1!=b&&(d=this.an(a),this.Eh.P(b,1,d),this.tu(a,b),this.tu(c,-1))};c.prototype.BY=function(c){function b(a,c){return e.JQ(a,c)}var d=new a.ia(0);d.yb(10);for(var e=this,f=this.rf;-1!=f;f=this.og(f)){d.clear(!1);var g=this.kf(f);if(-1!=g){var l=g;do d.add(l),l=this.qc(this.za(l));while(l!=g);if(1<d.size){l=!0;if(2<d.size)d.Gd(0,d.size,
b),d.add(d.get(0));else if(0<this.IQ(d.get(0),d.get(1))){var h=d.get(0);d.set(0,d.get(1));d.set(1,h)}else l=!1;for(var m=h=d.get(0),n=this.Xf(m),p=this.za(m),t=-1,u=1,q=d.size;u<q;u++){var y=d.get(u),x=this.za(y),A=this.Jk(x);if(A==n&&y!=m){if(0==c)t=this.VG(m)|this.VG(y),this.Mx(m,t),this.Mx(p,t),this.Ob(m,this.xe,this.Kb(m,this.xe)|this.Kb(y,this.xe)),this.Ob(p,this.xe,this.Kb(p,this.xe)|this.Kb(x,this.xe));else if(-1!=this.xg)t=this.Kb(m,this.xg)+this.Kb(y,this.xg),x=this.Kb(p,this.xg)+this.Kb(x,
this.xg),this.Ob(m,this.xg,t),this.Ob(p,this.xg,x);else{if(7==c){this.mj=new a.$d(5,f,-1);return}-1!=this.Tg&&(t=this.Kb(m,this.Tg)+this.Kb(y,this.Tg),x=this.Kb(p,this.Tg)+this.Kb(x,this.Tg),this.Ob(m,this.Tg,t),this.Ob(p,this.Tg,x))}this.TV(m,y);this.rz(y);t=m;d.set(u,-1);y==h&&(d.set(0,-1),h=-1)}else this.dy(t,!1),t=-1,m=y,n=A,p=x}this.dy(t,!1);t=-1;if(l){h=-1;u=0;for(q=d.size;u<q;u++)if(y=d.get(u),-1!=y)if(-1==h)m=h=y,n=this.Xf(m),p=this.za(m);else if(y!=m&&(x=this.za(y),A=this.Jk(x),this.xm(p,
y),this.ym(y,p),m=y,n=A,p=x,7==c&&(this.Kb(y,this.xe)|this.Kb(this.Te(y),this.xe))==(this.sp|1))){this.mj=new a.$d(5,f,-1);return}this.co(f,h)}else{h=-1;u=0;for(q=d.size;u<q;u++)if(y=d.get(u),-1!=y){h=y;break}g!=h&&this.co(f,h)}}}}};c.prototype.YP=function(){for(var c=-1,b=this.xh(),d=this.rf;-1!=d;d=this.og(d)){var f=this.kf(d);if(-1!=f){var g=f;do{if(1!=this.Kb(g,b)){var l=this.uJ();this.ru(l,g);this.qK(l,c);-1!=c&&this.sK(c,l);var c=l,h=0,m=g;do h|=this.Kb(m,this.xe),this.UX(m,l),this.Ob(m,b,1),
m=this.qc(m);while(m!=g);this.rh(l,h)}g=this.qc(this.za(g))}while(g!=f)}}l=this.uJ();this.ru(l,-1);this.qK(l,c);-1!=c&&this.sK(c,l);this.km=l;this.No=a.Sd.yd(this.Ye.size,NaN);this.SA=a.Sd.yd(this.Ye.size,NaN);this.pK(this.km,Infinity);this.rK(this.km,Infinity);this.ni(b)};c.prototype.hT=function(a,c,b){c=-1!=c?c:this.kf(a);if(-1==c)return-1;for(a=c;;){if(1!=this.Kb(c,b))return c;c=this.qc(this.za(c));if(c==a)return-1}};c.prototype.uX=function(){for(var a=this.xh(),c=this.rf;-1!=c;c=this.og(c))for(var b=
-1;;){var d=this.hT(c,b,a);if(-1==d)break;for(var b=this.qc(this.za(d)),f=d;;){var g=this.qc(f),l=this.Te(f),h=this.za(f);if(l==h){this.DR(f);if(b==f||b==h)b=-1;if(f==d||l==d){d=g;if(f==d||l==d)break;f=g;continue}}else this.Ob(f,a,1);f=g;if(f==d)break}}};c.prototype.lC=function(c,b,d,f){this.qh();this.rI=f;this.a=c;this.pr=this.a.gG();c=new a.ia(0);c.yb(null!=d?this.a.D(d.get(0)):this.a.ud);var e=0,k=1,g=null!=d?d.get(0):this.a.rd;for(f=1;-1!=g;){this.a.wK(g,this.pr,k);for(var k=k<<1,l=this.a.Pb(g);-1!=
l;l=this.a.Sb(l))for(var h=this.a.cb(l),m=0,n=this.a.Ka(l);m<n;m++)c.add(h),h=this.a.U(h);a.T.Jo(this.a.hc(g))||(e+=this.a.aa(g));null!=d?(g=f<d.size?d.get(f):-1,f++):g=this.a.Ue(g)}this.sp=k;this.qa=c.size;this.a.Wx(c,this.qa);null==this.Eh&&(this.Eh=new a.ad(2),this.De=new a.ad(8),this.Rc=new a.ad(8),this.Ye=new a.ad(8));this.Eh.Qe(this.qa);this.De.Qe(this.qa+10);this.Rc.Qe(2*this.qa+32);this.Ye.Qe(Math.max(32,e));this.rn=this.a.Vd();d=new a.b;f=0;e=new a.b;d.$c();for(k=0;k<=this.qa;k++)if(k<this.qa?
(h=c.get(k),this.a.w(h,e)):e.$c(),!d.ub(e)){if(f<k){h=this.Nn();for(n=m=-1;f<k;f++)n=c.get(f),this.a.Va(n,this.rn,h),g=this.Eh.Pe(),this.Eh.P(g,0,n),this.Eh.P(g,1,m),m=g,l=this.a.ld(n),g=this.a.ng(l),g=this.Ha(g),this.OX(h,this.Nd(h)|g);this.PX(h,m);this.Ur(h,this.a.Za(n));-1!=this.It&&this.bY(this.It,h);this.eY(h,this.It);this.It=h;-1==this.rf&&(this.rf=h)}f=k;d.L(e)}this.xe=this.xh();5==b&&(this.xg=this.xh());4==b&&(this.Tg=this.xh());this.sR(b,c);0==this.mj.Ii&&(this.BY(b),0==this.mj.Ii&&(isNaN(this.TA)||
this.zQ()?(this.YP(),0==this.mj.Ii&&(this.ni(this.xe),this.xe=-1,this.rI&&this.AW(b))):this.WA=!0))};c.prototype.rz=function(a){var c=this.qc(a),b=this.Te(a),d=this.za(a),e=this.qc(d),f=this.Te(d);c!=d&&(this.xm(f,c),this.ym(c,f));b!=d&&(this.xm(b,e),this.ym(e,b));b=this.Jk(a);this.kf(b)==a&&(e!=a?this.co(b,e):this.co(b,-1));e=this.Jk(d);this.kf(e)==d&&(c!=d?this.co(e,c):this.co(e,-1));this.Rc.kd(a);this.Rc.kd(d)};c.prototype.XG=function(a,c){for(;;)if(c=a.Ve(c),-1!=c){var b=a.ja(c);if(this.Ef(b)!=
this.Ef(this.za(b)))return b}else return-1};c.prototype.Vr=function(a,c,b){void 0===b&&(b=!0);this.lC(a,0,null,b)};c.prototype.lK=function(c,b){var d=new a.ia(0);d.add(b);this.lC(c,4,d,1736==c.hc(b))};c.prototype.mK=function(c,b){var d=new a.ia(0);d.add(b);this.lC(c,5,d,!0)};c.prototype.qh=function(){null!=this.a&&(-1!=this.pr&&(this.a.tX(this.pr),this.pr=-1),-1!=this.rn&&(this.a.ke(this.rn),this.rn=-1),-1!=this.qr&&(this.a.ke(this.qr),this.qr=-1),-1!=this.xe&&(this.ni(this.xe),this.xe=-1),-1!=this.xg&&
(this.ni(this.xg),this.xg=-1),-1!=this.Tg&&(this.ni(this.Tg),this.Tg=-1),this.a=null,this.De.Vi(!0),this.Eh.Vi(!0),this.It=this.rf=-1,null!=this.Rc&&this.Rc.Vi(!0),null!=this.fj&&(this.fj.length=0),null!=this.cj&&(this.cj.length=0),null!=this.sI&&(this.sI.length=0),null!=this.Ye&&this.Ye.Vi(!0),this.km=-1,this.No=null)};c.prototype.kf=function(a){return this.De.S(a,2)};c.prototype.w=function(a,c){this.a.oH(this.VS(a),c)};c.prototype.Nd=function(a){return this.De.S(a,1)};c.prototype.og=function(a){return this.De.S(a,
4)};c.prototype.Jz=function(a){return this.De.S(a,6)};c.prototype.Zm=function(a){return this.De.S(a,7)};c.prototype.ft=function(a){return this.Eh.S(a,1)};c.prototype.Uj=function(a){return this.Eh.S(a,0)};c.prototype.Hg=function(a,c){c=this.cj[c];return c.size<=a?-1:c.read(a)};c.prototype.eo=function(a,c,b){c=this.cj[c];c.size<=a&&c.resize(this.De.size,-1);c.write(a,b)};c.prototype.wq=function(){null==this.cj&&(this.cj=[]);for(var c=a.ia.yd(this.De.xd,-1),b=0,d=this.cj.length;b<d;b++)if(null==this.cj[b])return this.cj[b]=
c,b;this.cj.push(c);return this.cj.length-1};c.prototype.xq=function(a){this.cj[a]=null};c.prototype.Jk=function(a){return this.Rc.S(a,1)};c.prototype.Xf=function(a){return this.Jk(this.za(a))};c.prototype.za=function(a){return this.Rc.S(a,4)};c.prototype.Te=function(a){return this.Rc.S(a,5)};c.prototype.qc=function(a){return this.Rc.S(a,6)};c.prototype.Ef=function(a){return this.Rc.S(a,2)};c.prototype.Ff=function(a){return this.Hk(this.Rc.S(a,2))};c.prototype.an=function(a){return this.Rc.S(a,7)};
c.prototype.Xs=function(a,c){this.w(this.Jk(a),c)};c.prototype.$m=function(a,c){this.w(this.Xf(a),c)};c.prototype.Ah=function(a){return this.Rc.S(a,3)&this.bQ};c.prototype.Kb=function(a,c){c=this.fj[c];return c.size<=a?-1:c.read(a)};c.prototype.Ob=function(a,c,b){c=this.fj[c];c.size<=a&&c.resize(this.Rc.size,-1);c.write(a,b)};c.prototype.xh=function(){null==this.fj&&(this.fj=[]);for(var c=a.ia.yd(this.Rc.xd,-1),b=0,d=this.fj.length;b<d;b++)if(null==this.fj[b])return this.fj[b]=c,b;this.fj.push(c);
return this.fj.length-1};c.prototype.ni=function(a){this.fj[a]=null};c.prototype.DR=function(a){var c=this.Ef(a),b=this.qc(a);b==this.za(a)&&(b=this.qc(b),b==a&&(b=-1));this.LG(c)==a&&this.ru(c,b);b=this.No.read(c);isNaN(b)||(this.pK(c,NaN),this.rK(c,NaN));this.dy(a,!0);this.rz(a)};c.prototype.ER=function(a){for(var c=0,b=a.size;c<b;c++){var d=a.get(c),e=this.Ef(this.za(d));this.ru(this.Ef(d),-1);this.ru(e,-1);this.dy(d,!0);this.rz(d)}};c.prototype.LG=function(a){return this.Ye.S(a,1)};c.prototype.Hk=
function(a){return this.Ye.S(a,2)};c.prototype.vo=function(a){return this.Ye.S(a,3)};c.prototype.US=function(a){return this.Ye.S(a,4)};c.prototype.Dq=function(a){var c=this.No.read(a);isNaN(c)&&(this.gZ(a),c=this.No.read(a));return c};c.prototype.Ha=function(a){return this.a.UG(a,this.pr)};c.prototype.jf=function(a){return this.a.Sa(a,this.rn)};c.prototype.kT=function(a){return this.a.Sa(a,this.qr)};c.prototype.jT=function(a,c){var b=this.kf(a);if(-1==b)return-1;var d=b,e=-1,f=-1;do{if(this.Xf(d)==
c)return d;if(-1==e){e=this.kf(c);if(-1==e)break;f=e}if(this.Xf(f)==a)return d=this.za(f);d=this.qc(this.za(d));f=this.qc(this.za(f))}while(d!=b&&f!=e);return-1};c.prototype.PB=function(c,b){b.Is();b=b.get();var d=new a.b;this.Xs(c,d);b.Mc(d);this.$m(c,d);b.Zc(d)};c.prototype.JQ=function(c,b){if(c==b)return 0;var d=new a.b;this.$m(c,d);var e=new a.b;this.$m(b,e);if(d.ub(e))return 0;b=new a.b;this.Xs(c,b);c=new a.b;c.zc(d,b);d=new a.b;d.zc(e,b);return a.b.us(c,d)};c.prototype.IQ=function(c,b){if(c==
b)return 0;var d=new a.b;this.$m(c,d);var e=new a.b;this.$m(b,e);if(d.ub(e))return 0;b=new a.b;this.Xs(c,b);c=new a.b;c.zc(d,b);d=new a.b;d.zc(e,b);return 0<=d.y&&0<c.y?a.b.us(c,d):0};c.prototype.zQ=function(){for(var c=a.Ub.Xx(this.TA),b=new a.b,d=new a.b,f=new a.b,g=new a.b,l=new a.b,h=this.rf;-1!=h;h=this.og(h)){var m=this.kf(h);if(-1!=m){var n=m;this.Xs(n,b);this.$m(n,d);l.zc(d,b);var p=l.pk();do{var t=n,n=this.qc(this.za(n));if(n!=t){this.$m(n,f);g.zc(f,b);var t=g.pk(),u=g.Ui(l);if(u*u/(t*p)*
Math.min(t,p)<=c)return!1;l.L(g);p=t;d.L(f)}}while(n!=m)}}return!0};return c}();a.Pu=b})(y||(y={}));(function(a){var b=function(){function b(){this.i=null;this.zI=new a.b;this.AI=new a.b;this.Mh=null;this.ot=!1;this.Wo=-1}b.prototype.Gf=function(a){return a<this.Mh.length?this.Mh[a]:!1};b.prototype.Hl=function(b,c,e,f){var d=a.T.lf(this.i.a.hc(e));if(2==a.T.lf(this.i.a.hc(c))&&1==d)this.yR(b,c,e,f);else throw a.f.ya();};b.prototype.Vr=function(b,c){null==this.i&&(this.i=new a.Pu);this.i.Vr(b,c)};
b.prototype.Wr=function(b,c,e){a.rk.V(b,c,e,!0);for(c=b.rd;-1!=c;c=b.Ue(c))1736==b.hc(c)&&a.lo.V(b,c,-1,this.ot,e);this.Vr(b,e)};b.prototype.RF=function(a,c,b,f,g){var d=this.i.a;if(1736==d.hc(a))for(a=d.Pb(a);-1!=a;a=d.Sb(a)){var e=d.cb(a);this.i.jf(e);this.i.jf(d.U(e));var k=this.i.kT(e);if(-1!=k){var l=this.i.Kb(k,b);if(1!=l&&2!=l)if(this.Gf(this.i.Ff(k))){this.i.Ob(k,b,1);var l=d.Yf(c,-1),h=k,m=this.i.jf(e),n=1;do{var p=this.hn(e,g);d.Kj(l,p);-1!=f&&this.i.eo(m,f,1);this.i.Ob(h,b,1);var h=this.i.qc(h),
t;do p=1==n?d.U(e):d.Ra(e),t=-1!=p?this.i.jf(p):-1;while(t==m);var r=this.i.Jk(h);if(r!=t){do p=1==n?d.Ra(e):d.U(e),t=-1!=p?this.i.jf(p):-1;while(t==m);r!=t?(t=r,p=this.i.Uj(this.i.Zm(t))):n=-n}m=t;e=p}while(h!=k);d.ao(l,!0)}else this.i.Ob(k,b,2)}}};b.prototype.mG=function(){for(var b=this.i.xh(),c=new a.ia(0),e=this.i.rf;-1!=e;e=this.i.og(e)){var f=this.i.kf(e),g=f;if(-1!=f){do{if(1!=this.i.Kb(g,b)){var l=this.i.za(g);this.i.Ob(l,b,1);this.i.Ob(g,b,1);this.Gf(this.i.Ff(g))&&this.Gf(this.i.Ff(l))&&
c.add(g)}g=this.i.qc(this.i.za(g))}while(g!=f)}}this.i.ni(b);this.i.ER(c)};b.prototype.hn=function(a,c){return-1==c?a:this.UT(a,c)};b.prototype.UT=function(a,c){var b=this.i.a,d,f,g=this.i.Zm(this.i.jf(a));do{d=this.i.Uj(g);f=b.ng(b.ld(d));if(f==c)return d;g=this.i.ft(g)}while(-1!=g);return a};b.prototype.ds=function(b,c,e){this.mG();var d=this.i.a,f=d.bh(1736),g=this.i.xh();this.gL(b,c,f,e,g,-1);this.i.ni(g);a.lo.V(d,f,1,this.ot,null);return f};b.prototype.gL=function(a,c,b,f,g,l){this.RF(a,b,g,
l,f);-1!=c&&this.RF(c,b,g,l,f);a=this.i.a;for(c=this.i.rf;-1!=c;c=this.i.og(c)){var d=this.i.kf(c);if(-1!=d){var e=d;do{var k=this.i.Kb(e,g);if(1!=k&&2!=k)if(this.Gf(this.i.Ff(e))){var k=a.Yf(b,-1),h=e;do{var m=this.i.an(h);-1!=m?m=this.i.Uj(m):(m=this.i.Uj(this.i.an(this.i.za(h))),m=this.i.a.U(m));m=this.hn(m,f);a.Kj(k,m);this.i.Ob(h,g,1);-1!=l&&(m=this.i.jf(m),this.i.eo(m,l,1));h=this.i.qc(h)}while(h!=e);a.ao(k,!0)}else this.i.Ob(e,g,2);e=this.i.qc(this.i.za(e))}while(e!=d)}}};b.prototype.TY=function(b,
c,e){var d=this.i.a,f=d.bh(1736),g=d.bh(1607),l=d.bh(550);this.mG();var h=-1,m=this.i.xh(),n=this.i.wq();this.gL(b,c,f,e,m,n);for(b=this.i.rf;-1!=b;b=this.i.og(b))if(c=this.i.kf(b),-1!=c){var p=c;do{var t=this.i.Kb(p,m),u=this.i.Kb(this.i.za(p),m),t=t|u;if(2==t)if(t=this.i.Ah(p),this.Gf(t)){var q=d.Yf(g,-1),y=p,t=this.Ix(b,d),t=this.hn(t,e);d.Kj(q,t);this.i.eo(b,n,1);do{t=this.i.Xf(y);u=this.Ix(t,d);u=this.hn(u,e);d.Kj(q,u);this.i.Ob(y,m,1);this.i.Ob(this.i.za(y),m,1);this.i.eo(t,n,1);y=this.i.qc(y);
t=this.i.Kb(y,m);u=this.i.Kb(this.i.za(y),m);t|=u;if(2!=t)break;t=this.i.Ah(y);if(!this.Gf(t)){this.i.Ob(y,m,1);this.i.Ob(this.i.za(y),m,1);break}}while(y!=p)}else this.i.Ob(p,m,1),this.i.Ob(this.i.za(p),m,1);p=this.i.qc(this.i.za(p))}while(p!=c)}for(b=this.i.rf;-1!=b;b=this.i.og(b))t=this.i.Hg(b,n),1!=t&&(t=this.i.Nd(b),this.Gf(t)&&(-1==h&&(h=d.Yf(l,-1)),c=this.i.Zm(b),-1!=c&&(c=this.i.Uj(c),t=this.hn(c,e),d.Kj(h,t))));this.i.xq(n);this.i.ni(m);a.lo.V(d,f,1,this.ot,null);e=[];e[0]=l;e[1]=g;e[2]=
f;return e};b.prototype.Ix=function(a,c){var b=-1;for(a=this.i.Zm(a);-1!=a;a=this.i.ft(a)){var d=this.i.Uj(a);-1==b&&(b=d);var f=this.i.Ha(c.ng(c.ld(d)));if(this.Gf(f)){b=d;break}}return b};b.prototype.MB=function(b,c){for(var d=this.i.Jk(c),f=this.i.Xf(c),g=0,l=0,h=this.i.Zm(d);-1!=h;h=this.i.ft(h)){var m=this.i.Uj(h),n=b.ld(m),p=this.i.Ha(b.ng(n)),t=b.U(m),u=b.Ra(m),n=b.cb(n);n==m&&(this.Wo=c);-1!=t&&this.i.jf(t)==f?(g++,this.Gf(p)&&(n==t&&(this.Wo=this.i.qc(c)),l++)):-1!=u&&this.i.jf(u)==f&&(g--,
this.Gf(p)&&(n==u&&(this.Wo=this.i.qc(c)),l--))}this.i.w(d,this.zI);this.i.w(f,this.AI);d=a.b.Cb(this.zI,this.AI);return(0!=l?l:g)*d};b.prototype.Fq=function(a){return this.i.Ah(a)|this.i.Ff(a)|this.i.Ff(this.i.za(a))};b.prototype.lL=function(a){for(var c=this.i.za(this.i.Te(a)),b=-1;c!=a;){if(this.Gf(this.Fq(c))){if(-1!=b)return-1;b=c}c=this.i.za(this.i.Te(c))}return-1!=b?this.i.za(b):-1};b.prototype.mL=function(a){for(var c=this.i.za(this.i.qc(a)),b=-1;c!=a;){if(this.Gf(this.Fq(c))){if(-1!=b)return-1;
b=c}c=this.i.za(this.i.qc(c))}return-1!=b?this.i.za(b):-1};b.prototype.bK=function(b,c,e,f,g){var d=this.i.a,k=b,l=this.i.za(k);this.i.Ob(k,e,1);this.i.Ob(l,e,1);var h=this.MB(d,k);this.Wo=-1;for(var m=k,n=-1,p=!1,t=1;;){var r=this.i.Te(k);if(r==l)break;l=this.i.qc(l);if(this.i.za(r)!=l)if(k=this.lL(k),-1==k)break;else p=!0,l=this.i.za(k);else k=r;if(k==b){n=b;break}r=this.Fq(k);if(!this.Gf(r))break;this.i.Ob(k,e,1);this.i.Ob(l,e,1);m=k;h+=this.MB(d,k);t++}if(-1==n)for(k=b,l=this.i.za(k),n=k;;){b=
this.i.qc(k);if(b==l)break;l=this.i.Te(l);if(this.i.za(b)!=l)if(k=this.mL(k),-1==k){p=!0;break}else l=this.i.za(k);else k=b;r=this.Fq(k);if(!this.Gf(r))break;this.i.Ob(k,e,1);this.i.Ob(l,e,1);n=k;h+=this.MB(d,k);t++}else if(-1!=this.Wo&&(m=this.Wo,n=this.i.Te(this.Wo),this.i.za(n)!=this.i.qc(this.i.za(m))&&(n=this.lL(m),-1==n)))throw a.f.ya();0<=h||(k=n,n=this.i.za(m),m=this.i.za(k));e=d.Yf(c,-1);k=m;m=this.i.Jk(m);p=this.i.Xf(n)==m&&p;h=this.Ix(m,d);h=this.hn(h,g);d.Kj(e,h);-1!=f&&this.i.eo(m,f,
1);m=0;for(t=p?a.J.truncate((t+1)/2):-1;;){b=this.i.Xf(k);h=this.Ix(b,d);h=this.hn(h,g);d.Kj(e,h);m++;-1!=f&&this.i.eo(b,f,1);p&&m==t&&(e=d.Yf(c,-1),d.Kj(e,h));if(k==n)break;b=this.i.qc(k);if(this.i.Te(this.i.za(k))!=this.i.za(b)){if(k=this.mL(k),-1==k)throw a.f.ya();}else k=b}};b.prototype.es=function(a){for(var c=this.i.a.bh(1607),b=this.i.xh(),d=this.i.rf;-1!=d;d=this.i.og(d)){var f=this.i.kf(d),g=f;do 1!=this.i.Kb(g,b)&&this.Gf(this.Fq(g))&&this.bK(g,c,b,-1,a),g=this.i.qc(this.i.za(g));while(g!=
f)}this.i.ni(b);return c};b.prototype.UY=function(a){for(var c=this.i.a,b=c.bh(1607),d=c.bh(550),f=this.i.xh(),g=this.i.wq(),l=-1,h=this.i.rf;-1!=h;h=this.i.og(h)){var m=this.i.kf(h),n=m;do{var p=this.i.Kb(n,f);1!=p&&(p=this.Fq(n),this.Gf(p)&&this.bK(n,b,f,g,a));n=this.i.qc(this.i.za(n))}while(n!=m)}for(h=this.i.rf;-1!=h;h=this.i.og(h))p=this.i.Hg(h,g),1!=p&&(p=this.i.Nd(h),this.Gf(p)&&(-1==l&&(l=c.Yf(d,-1)),m=this.i.Zm(h),-1!=m&&(m=this.i.Uj(m),m=this.hn(m,a),c.Kj(l,m))));this.i.ni(f);this.i.xq(g);
a=[];a[0]=d;a[1]=b;return a};b.prototype.Qp=function(){for(var a=this.i.a,c=a.bh(550),b=a.Yf(c,-1),f=this.i.rf;-1!=f;f=this.i.og(f))if(this.Gf(this.i.Nd(f))){for(var g=-1,l=this.i.Zm(f);-1!=l;l=this.i.ft(l)){var h=this.i.Uj(l);-1==g&&(g=h);var m=this.i.Ha(a.ng(a.ld(h)));if(this.Gf(m)){g=h;break}}a.Kj(b,g)}return c};b.prototype.Do=function(a){this.Mh=[];for(var c=0;c<a;c++)this.Mh[c]=!1};b.uD=function(b,c,e,f){var d=b.Ja(),g=Array(1E3);a.J.Mv(g,null);var k=a.J.gf(1E3,0),l=b.D(),h=!0,m=2==c.tb();if(1!=
c.tb()&&2!=c.tb())throw a.f.ya();for(var n=0;n<l;){var p=a.J.truncate(b.dX(g,n)-n);m?a.gd.eL(c,g,p,e,k):a.gd.fL(c,g,p,e,k);for(var t=0,u=0;u<p;u++){var q=0==k[u];f||(q=!q);q&&(h&&(h=!1,d.Jd(b,0,n)),t!=u&&d.Jd(b,n+t,n+u),t=u+1)}h||t==p||d.Jd(b,n+t,n+p);n+=p}return h?b:d};b.LH=function(d,c,e){return d instanceof a.Ed?b.uD(d,c,e,!0):c instanceof a.Wa?d.u()||c.u()?d.Ja():a.rk.xJ(e,d,c)?a.rk.EQ(d,c):d.Ja():b.wD(d,c,e,!0)};b.mw=function(d,c,e,f){var g=new a.h;d.s(g);var k=new a.h;c.s(k);var l=new a.h;l.I(g);
l.Nb(k);e=a.ma.be(e,l,!0);l=new a.h;l.I(k);k=a.ma.Bs(e);l.O(k,k);if(!g.Yb(l)){if(d.tb()<=c.tb())return b.bd(b.Bb(d.Ja()),d,"\x26");if(d.tb()>c.tb())return b.bd(b.Bb(c.Ja()),d,"\x26")}k=new b;g=new a.fd;l=g.Jb(b.Bb(d));c=g.Jb(b.Bb(c));k.Wr(g,e,f);f=k.mw(l,c);d=b.bd(g.Se(f),d,"\x26");a.T.Ic(d.G())&&(d.Zg(2,e),1736==d.G()&&d.Al());return d};b.wD=function(b,c,e,f){if(b.u())return b.Ja();if(c.u())return f?b.Ja():null;var d=[null],g=[0],k=2==c.tb();if(1!=c.tb()&&2!=c.tb())throw a.f.ya();d[0]=b.w();k?a.gd.eL(c,
d,1,e,g):a.gd.fL(c,d,1,e,g);c=0==g[0];f||(c=!c);return c?b.Ja():b};b.SZ=function(d,c,e){return d instanceof a.Ed?b.uD(d,c,e,!1):c instanceof a.Wa?d.u()?d.Ja():c.u()?d:a.rk.xJ(e,d,c)?d.Ja():d:b.wD(d,c,e,!1)};b.prototype.CJ=function(b,c,e,f,g){if(b.u())return b;var d=new a.fd;b=d.Jb(b);return this.ol(d,b,c,e,f,g)};b.prototype.yW=function(b,c,e,f,g,l){if(g&&550!=b.hc(c)){var d=new a.VD;d.LY(b,e);d.ih?(a.rk.V(b,e,l,!0),g=!1):this.i.dz(e)}else a.rk.V(b,e,l,!0),g=!1;f&&550!=b.hc(c)?this.i.mK(b,c):this.i.lK(b,
c);if(this.i.WA)return this.i.qh(),this.i=null,this.ol(b,c,e,f,!1,l);this.i.dz(NaN);l=this.i.Ha(c);this.Do(l+1);this.Mh[l]=!0;if(1736==b.hc(c)||f&&550!=b.hc(c))return b.Hp(c,0),c=this.ds(c,-1,-1),b=b.Se(c),b.Hp(0),g?b.Zg(1,0):(b.Zg(2,e),b.Al()),b;if(1607==b.hc(c))return c=this.es(-1),b=b.Se(c),g||b.Zg(2,e),b;if(550==b.hc(c))return c=this.Qp(),b=b.Se(c),g||b.Zg(2,e),b;throw a.f.ya();};b.prototype.ol=function(b,c,e,f,g,l){this.i=new a.Pu;try{return this.yW(b,c,e,f,g,l)}finally{this.i.qh()}};b.ol=function(a,
c,e,f,g){return(new b).CJ(a,c,e,f,g)};b.prototype.xW=function(b,c,e){this.ot=b;this.i=new a.Pu;b=c.xo(e);var d=c.hc(e);1!=b||550==d?this.i.lK(c,e):this.i.mK(c,e);if(!this.i.WA)if(this.i.dz(NaN),d=this.i.Ha(e),this.Do(d+1),this.Mh[d]=!0,1736==c.hc(e)||1==b&&550!=c.hc(e))c.Hp(e,0),b=this.ds(e,-1,-1),c.DC(b,e),c.$B(b);else if(1607==c.hc(e))b=this.es(-1),c.DC(b,e),c.$B(b);else if(550==c.hc(e))b=this.Qp(),c.DC(b,e),c.$B(b);else throw a.f.X("internal error");};b.CC=function(a,c,e,f){var d=new b;d.ot=!0;
return d.CJ(a,c,!1,e,f)};b.prototype.Wm=function(b,c){var d=a.T.lf(this.i.a.hc(b)),f=a.T.lf(this.i.a.hc(c));if(d>f)return b;var g=this.i.Ha(b),l=this.i.Ha(c);this.Do((g|l)+1);this.Mh[this.i.Ha(b)]=!0;if(2==d&&2==f)return this.ds(b,c,-1);if(1==d&&2==f||1==d&&1==f)return this.es(-1);if(0==d)return this.Qp();throw a.f.ya();};b.prototype.lG=function(b,c){var d=a.T.lf(this.i.a.hc(b)),f=a.T.lf(this.i.a.hc(c));if(d>f)return b;if(d<f)return c;var g=this.i.Ha(b),l=this.i.Ha(c);this.Do((g|l)+1);this.Mh[this.i.Ha(b)]=
!0;this.Mh[this.i.Ha(c)]=!0;this.Mh[this.i.Ha(b)|this.i.Ha(c)]=!0;if(2==d&&2==f)return this.ds(b,c,-1);if(1==d&&1==f)return this.es(-1);if(0==d&&0==f)return this.Qp();throw a.f.ya();};b.prototype.mw=function(b,c){var d=a.T.lf(this.i.a.hc(b)),f=a.T.lf(this.i.a.hc(c)),g=this.i.Ha(b),l=this.i.Ha(c);this.Do((g|l)+1);this.Mh[this.i.Ha(b)|this.i.Ha(c)]=!0;g=-1;1<this.i.a.Gr.Ea&&(g=b);if(2==d&&2==f)return this.ds(b,c,g);if(1==d&&0<f||1==f&&0<d)return this.es(g);if(0==d||0==f)return this.Qp();throw a.f.ya();
};b.prototype.uA=function(b,c){var d=a.T.lf(this.i.a.hc(b)),f=a.T.lf(this.i.a.hc(c)),g=this.i.Ha(b),l=this.i.Ha(c);this.Do((g|l)+1);this.Mh[this.i.Ha(b)|this.i.Ha(c)]=!0;g=-1;1<this.i.a.Gr.Ea&&(g=b);if(2==d&&2==f)return this.TY(b,c,g);if(1==d&&0<f||1==f&&0<d)return this.UY(g);if(0==d||0==f)return d=[],d[0]=this.Qp(),d;throw a.f.ya();};b.prototype.Pp=function(b,c){var d=a.T.lf(this.i.a.hc(b)),f=a.T.lf(this.i.a.hc(c)),g=this.i.Ha(b),l=this.i.Ha(c);this.Do((g|l)+1);this.Mh[this.i.Ha(b)]=!0;this.Mh[this.i.Ha(c)]=
!0;if(2==d&&2==f)return this.ds(b,c,-1);if(1==d&&1==f)return this.es(-1);if(0==d&&0==f)return this.Qp();throw a.f.ya();};b.Bb=function(b){var c=b.G();return 197==c?(c=new a.Ia(b.description),b.u()||c.jd(b,!1),c):33==c?(c=new a.Ed(b.description),b.u()||c.add(b),c):322==c?(c=new a.Ua(b.description),b.u()||c.dc(b,!0),c):b};b.bd=function(b,c,e){var d=b.G();return 197==d?(c=new a.Ia(b.description),b.u()||c.jd(b,!1),c):33!=d||"|"!=e&&"^"!=e?322==d?(c=new a.Ua(b.description),b.u()||c.dc(b,!0),c):33==d&&
"-"==e&&33==c.G()||550==d&&"\x26"==e&&33==c.G()?(c=new a.Wa(b.description),b.u()||b.Ae(0,c),c):b:(c=new a.Ed(b.description),b.u()||c.add(b),c)};b.Wm=function(d,c,e,f){if(d.u()||c.u()||d.tb()>c.tb())return b.bd(b.Bb(d),d,"-");var g=new a.h;d.s(g);var k=new a.h;c.s(k);if(!g.Yb(k))return b.bd(b.Bb(d),d,"-");var l=new a.h;l.I(g);l.Nb(k);e=a.ma.be(e,l,!0);k=new b;g=new a.fd;l=g.Jb(b.Bb(d));c=g.Jb(b.Bb(c));k.Wr(g,e,f);f=k.Wm(l,c);f=g.Se(f);d=b.bd(f,d,"-");a.T.Ic(d.G())&&(d.Zg(2,e),1736==d.G()&&d.Al());
return d};b.lG=function(d,c,e,f){if(d.tb()>c.tb())return b.bd(b.Bb(d),d,"|");if(d.tb()<c.tb()||d.u())return b.bd(b.Bb(c),d,"|");if(c.u())return b.bd(b.Bb(d),d,"|");var g=new a.h;d.s(g);var k=new a.h;c.s(k);var l=new a.h;l.I(g);l.Nb(k);e=a.ma.be(e,l,!0);if(!g.Yb(k.mT(e,e)))switch(d=b.Bb(d),c=b.Bb(c),d.G()){case 550:return d=a.T.ne(d),d.Jd(c,0,-1),d;case 1607:return d=a.T.ne(d),d.add(c,!1),d;case 1736:return d=a.T.ne(d),d.add(c,!1),d;default:throw a.f.ya();}k=new b;g=new a.fd;l=g.Jb(b.Bb(d));c=g.Jb(b.Bb(c));
k.Wr(g,e,f);c=k.lG(l,c);d=b.bd(g.Se(c),d,"|");a.T.Ic(d.G())&&(d.Zg(2,e),1736==d.G()&&d.Al());return d};b.QR=function(d,c,e){if(2>d.length)throw a.f.F("not enough geometries to dissolve");for(var f=0,g=0,l=d.length;g<l;g++)f=Math.max(d[g].tb(),f);var h=new a.h;h.Oa();for(var m=new a.fd,n=-1,p=0,t=-1,g=0,l=d.length;g<l;g++)if(d[g].tb()==f)if(d[g].u())-1==t&&(t=g);else{t=g;-1==n?n=m.Jb(b.Bb(d[g])):m.vP(n,b.Bb(d[g]));var u=new a.h;d[g].ac(u);h.Nb(u);p++}if(2>p)return b.Bb(d[t]);d=2==f;c=a.ma.be(0==f?
c:null,h,!0);return(new b).ol(m,n,c,d,!0,e)};b.uA=function(d,c,e,f){var g=[null,null,null],k=new a.h;d.s(k);var l=new a.h;c.s(l);var h=new a.h;h.I(k);h.Nb(l);e=a.ma.be(e,h,!0);h=new a.h;h.I(l);l=a.ma.Bs(e);h.O(l,l);if(!k.Yb(h)){if(d.tb()<=c.tb())return d=b.bd(b.Bb(d.Ja()),d,"\x26"),g[d.tb()]=d,g;if(d.tb()>c.tb())return d=b.bd(b.Bb(c.Ja()),d,"\x26"),g[d.tb()]=d,g}l=new b;k=new a.fd;h=k.Jb(b.Bb(d));c=k.Jb(b.Bb(c));l.Wr(k,e,f);f=l.uA(h,c);for(c=0;c<f.length;c++)l=b.bd(k.Se(f[c]),d,"\x26"),a.T.Ic(l.G())&&
(l.Zg(2,e),1736==l.G()&&l.Al()),g[l.tb()]=l;return g};b.Pp=function(d,c,e,f){if(d.tb()>c.tb())return b.bd(b.Bb(d),d,"^");if(d.tb()<c.tb()||d.u())return b.bd(b.Bb(c),d,"^");if(c.u())return b.bd(b.Bb(d),d,"^");var g=new a.h;d.s(g);var k=new a.h;c.s(k);var l=new a.h;l.I(g);l.Nb(k);e=a.ma.be(e,l,!0);k=new b;g=new a.fd;l=g.Jb(b.Bb(d));c=g.Jb(b.Bb(c));k.Wr(g,e,f);f=k.Pp(l,c);d=b.bd(g.Se(f),d,"^");a.T.Ic(d.G())&&(d.Zg(2,e),1736==d.G()&&d.Al());return d};b.M_=function(b,c,e){c=c.G();e=e.G();return 550==b.G()&&
(33==c||33==e)&&1>=b.D()?(e=new a.Wa(b.description),b.u()||b.Ae(0,e),e):b};b.prototype.zS=function(a,c){var b=this.i.a;a=b.Yf(a,-1);for(var d=c.size,f=0;f<d;f++){var g=c.get(f);b.Kj(a,g)}b.ao(a,!0)};b.prototype.VX=function(a,c){for(var b=this.i.a,d=b.rd;-1!=d;d=b.Ue(d))if(d==c)for(var f=b.Pb(d);-1!=f;f=b.Sb(f)){var g=b.cb(f);if(-1!=g)for(var l=b.U(g);-1!=l;){var g=this.i.jf(g),h=this.i.jf(l),g=this.i.jT(g,h);-1!=g&&(h=this.i.za(g),this.i.Ob(g,a,1),this.i.Ob(h,a,2));g=l;l=b.U(g)}}};b.prototype.SW=
function(b,c,e,f){e=this.i.Ha(e);f=this.i.Ha(f);var d=new a.ia(0);d.yb(256);for(var g=this.i.a,k=this.i.xh(),l=this.i.rf;-1!=l;l=this.i.og(l)){var h=this.i.kf(l);if(-1!=h){var m=h;do{if(1!=this.i.Kb(m,k)){var n=m,p=m,t=!1,u=0;do{this.i.Ob(n,k,1);if(!t){var q=this.i.Ah(n);0!=(q&f)&&0!=(this.i.Ff(n)&e)&&(p=n,t=!0)}t&&(d.add(this.i.Uj(this.i.Zm(this.i.Jk(n)))),-1!=b&&(q=this.i.Ah(n),0!=(q&f)&&(q=this.i.Kb(n,b),u|=q)));n=this.i.qc(n)}while(n!=p);t&&0<this.i.Dq(this.i.Ef(p))&&(n=g.bh(1736),this.zS(n,d),
-1!=c&&g.wK(n,c,u));d.clear(!1)}m=this.i.qc(this.i.za(m))}while(m!=h)}}this.i.ni(k)};b.prototype.yR=function(a,c,b,f){this.i.uX();var d=-1;-1!=a&&(d=this.i.xh(),this.VX(d,b));this.SW(d,a,c,b);var e=this.i.a;a=0;for(d=e.rd;-1!=d;d=e.Ue(d))d!=c&&d!=b&&(f.add(d),a++);f.Gd(0,a,function(a,c){a=e.fA(e.Pb(a));c=e.fA(e.Pb(c));return a<c?-1:a==c?0:1})};b.prototype.qh=function(){null!=this.i&&(this.i.qh(),this.i=null)};return b}();a.Dg=b})(y||(y={}));(function(a){var b=function(){function b(a){void 0!==a?this.Op(a):
this.oC()}b.prototype.Ux=function(){this.bc=this.Wb=this.zb=this.sb=this.gb=this.lb=0};b.prototype.Eb=function(a){return this==a?!0:a instanceof b?this.lb==a.lb&&this.sb==a.sb&&this.Wb==a.Wb&&this.zb==a.zb&&this.gb==a.gb&&this.bc==a.bc:!1};b.prototype.jc=function(){a.J.Zi();a.J.Zi();a.J.Zi();a.J.Zi();a.J.Zi();return a.J.Zi()};b.prototype.$h=function(a,c){var b=this.zb*a.x+this.gb*a.y+this.bc;c.x=this.lb*a.x+this.sb*a.y+this.Wb;c.y=b};b.prototype.WY=function(a,c,b,f,g){var d=2*c;f*=2;for(c=2*(c+g);d<
c;d+=2,f+=2){g=a[d];var e=a[d+1];b[f]=this.lb*g+this.sb*e+this.Wb;b[f+1]=this.zb*g+this.gb*e+this.bc}};b.prototype.YY=function(b,c,e){for(var d=0;d<c;d++){var f=b[d].x,g=b[d].y,l=this.lb*f+this.sb*g+this.Wb,f=this.zb*f+this.gb*g+this.bc;null!=e[d]?e[d].ka(l,f):e[d]=a.b.pa(l,f)}};b.prototype.multiply=function(a){b.multiply(this,a,this)};b.multiply=function(a,c,b){var d,e,f,g,l;d=a.lb*c.lb+a.zb*c.sb;e=a.sb*c.lb+a.gb*c.sb;f=a.Wb*c.lb+a.bc*c.sb+c.Wb;g=a.lb*c.zb+a.zb*c.gb;l=a.sb*c.zb+a.gb*c.gb;a=a.Wb*
c.zb+a.bc*c.gb+c.bc;b.lb=d;b.sb=e;b.Wb=f;b.zb=g;b.gb=l;b.bc=a};b.prototype.Vf=function(){var a=new b;a.lb=this.lb;a.sb=this.sb;a.Wb=this.Wb;a.zb=this.zb;a.gb=this.gb;a.bc=this.bc;return a};b.prototype.JC=function(b){if(!b.u()){for(var c=[],d=0;4>d;d++)c[d]=new a.b;b.OB(c);this.ZY(c,c);b.Lx(c,4)}};b.prototype.ZY=function(b,c){for(var d=0;d<b.length;d++){var f=new a.b,g=b[d];f.x=this.lb*g.x+this.sb*g.y+this.Wb;f.y=this.zb*g.x+this.gb*g.y+this.bc;c[d]=f}};b.prototype.jU=function(a,c){a.u()||c.u()||0==
a.N()||0==a.fa()?this.Ux():(this.sb=this.zb=0,this.lb=c.N()/a.N(),this.gb=c.fa()/a.fa(),this.Wb=c.o-a.o*this.lb,this.bc=c.A-a.A*this.gb)};b.prototype.XY=function(b){var c=new a.b,d=new a.b;c.ka(this.lb,this.zb);d.ka(this.sb,this.gb);c.sub(c);var f=.5*c.pk();c.ka(this.lb,this.zb);d.ka(this.sb,this.gb);c.add(d);c=.5*c.pk();return b*(f>c?Math.sqrt(f):Math.sqrt(c))};b.prototype.oC=function(){this.lb=1;this.zb=this.Wb=this.sb=0;this.gb=1;this.bc=0};b.prototype.Ho=function(b){if(void 0!==b){var c=a.b.pa(0,
1);this.$h(c,c);c.sub(a.b.pa(0,1));if(c.pk()>b*b)return!1;c.ka(0,0);this.$h(c,c);if(c.pk()>b*b)return!1;c.ka(1,0);this.$h(c,c);c.sub(a.b.pa(1,0));return c.pk()<=b*b}return 1==this.lb&&1==this.gb&&0==this.sb&&0==this.Wb&&0==this.zb&&0==this.bc};b.prototype.fh=function(a){return Math.abs(this.lb*this.gb-this.zb*this.sb)<=2*a*(Math.abs(this.lb*this.gb)+Math.abs(this.zb*this.sb))};b.prototype.Ag=function(a,c){this.lb=1;this.sb=0;this.Wb=a;this.zb=0;this.gb=1;this.bc=c};b.prototype.Op=function(a,c){void 0!==
c?(this.lb=a,this.zb=this.Wb=this.sb=0,this.gb=c,this.bc=0):this.Op(a,a)};b.prototype.wC=function(){this.lb=0;this.sb=1;this.Wb=0;this.zb=1;this.bc=this.gb=0};b.prototype.iY=function(a){this.jY(Math.cos(a),Math.sin(a))};b.prototype.jY=function(a,c){this.lb=a;this.sb=-c;this.Wb=0;this.zb=c;this.gb=a;this.bc=0};b.prototype.shift=function(a,c){this.Wb+=a;this.bc+=c};b.prototype.scale=function(a,c){this.lb*=a;this.sb*=a;this.Wb*=a;this.zb*=c;this.gb*=c;this.bc*=c};b.prototype.rotate=function(a){var c=
new b;c.iY(a);this.multiply(c)};b.prototype.inverse=function(a){if(void 0!==a){var c=this.lb*this.gb-this.sb*this.zb;0==c?a.Ux():(c=1/c,a.Wb=(this.sb*this.bc-this.Wb*this.gb)*c,a.bc=(this.Wb*this.zb-this.lb*this.bc)*c,a.lb=this.gb*c,a.sb=-this.sb*c,a.zb=-this.zb*c,a.gb=this.lb*c)}else this.inverse(this)};return b}();a.Hd=b})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.Ux=function(){this.bi=this.bc=this.Wb=this.Df=this.Af=this.zf=this.Cf=this.gb=this.sb=this.Sf=this.zb=this.lb=
0};b.prototype.Op=function(a,c,b){this.lb=a;this.sb=this.Sf=this.zb=0;this.gb=c;this.Af=this.zf=this.Cf=0;this.Df=b;this.bi=this.bc=this.Wb=0};b.prototype.JC=function(b){if(b.u())return b;for(var c=new a.qd[8],d=0;8>d;d++)c[d]=new a.qd;b.OB(c);this.transform(c,8,c);b.Lx(c);return b};b.prototype.transform=function(b,c,e){for(var d=0;d<c;d++){var f=new a.qd,g=b[d];f.x=this.lb*g.x+this.sb*g.y+this.zf*g.z+this.Wb;f.y=this.zb*g.x+this.gb*g.y+this.Af*g.z+this.bc;f.z=this.Sf*g.x+this.Cf*g.y+this.Df*g.z+
this.bi;e[d]=f}};b.prototype.Rp=function(b){var c=new a.qd;c.x=this.lb*b.x+this.sb*b.y+this.zf*b.z+this.Wb;c.y=this.zb*b.x+this.gb*b.y+this.Af*b.z+this.bc;c.z=this.Sf*b.x+this.Cf*b.y+this.Df*b.z+this.bi;return c};b.prototype.Vg=function(a){b.multiply(this,a,this)};b.multiply=function(a,c,b){var d,e,f,g,l,h,m,n,p,t,u;d=a.lb*c.lb+a.zb*c.sb+a.Sf*c.zf;e=a.lb*c.zb+a.zb*c.gb+a.Sf*c.Af;f=a.lb*c.Sf+a.zb*c.Cf+a.Sf*c.Df;g=a.sb*c.lb+a.gb*c.sb+a.Cf*c.zf;l=a.sb*c.zb+a.gb*c.gb+a.Cf*c.Af;h=a.sb*c.Sf+a.gb*c.Cf+a.Cf*
c.Df;m=a.zf*c.lb+a.Af*c.sb+a.Df*c.zf;n=a.zf*c.zb+a.Af*c.gb+a.Df*c.Af;p=a.zf*c.Sf+a.Af*c.Cf+a.Df*c.Df;t=a.Wb*c.lb+a.bc*c.sb+a.bi*c.zf+c.Wb;u=a.Wb*c.zb+a.bc*c.gb+a.bi*c.Af+c.bc;a=a.Wb*c.Sf+a.bc*c.Cf+a.bi*c.Df+c.bi;b.lb=d;b.zb=e;b.Sf=f;b.sb=g;b.gb=l;b.Cf=h;b.zf=m;b.Af=n;b.Df=p;b.Wb=t;b.bc=u;b.bi=a};b.inverse=function(b,c){var d=b.lb*(b.gb*b.Df-b.Cf*b.Af)-b.zb*(b.sb*b.Df-b.Cf*b.zf)+b.Sf*(b.sb*b.Af-b.gb*b.zf);if(0!=d){var f,g,l,h,m,n,p,t,u,q;t=1/d;d=(b.gb*b.Df-b.Cf*b.Af)*t;l=-(b.sb*b.Df-b.Cf*b.zf)*t;n=
(b.sb*b.Af-b.gb*b.zf)*t;f=-(b.zb*b.Df-b.Af*b.Sf)*t;h=(b.lb*b.Df-b.Sf*b.zf)*t;p=-(b.lb*b.Af-b.zb*b.zf)*t;g=(b.zb*b.Cf-b.Sf*b.gb)*t;m=-(b.lb*b.Cf-b.Sf*b.sb)*t;t*=b.lb*b.gb-b.zb*b.sb;u=-(b.Wb*d+b.bc*l+b.bi*n);q=-(b.Wb*f+b.bc*h+b.bi*p);b=-(b.Wb*g+b.bc*m+b.bi*t);c.lb=d;c.zb=f;c.Sf=g;c.sb=l;c.gb=h;c.Cf=m;c.zf=n;c.Af=p;c.Df=t;c.Wb=u;c.bc=q;c.bi=b}else throw a.f.X("math singularity");};b.prototype.Vf=function(){var a=new b;a.lb=this.lb;a.zb=this.zb;a.Sf=this.Sf;a.sb=this.sb;a.gb=this.gb;a.Cf=this.Cf;a.zf=
this.zf;a.Af=this.Af;a.Df=this.Df;a.Wb=this.Wb;a.bc=this.bc;a.bi=this.bi;return a};return b}();a.dO=b})(y||(y={}));(function(a){var b=function(b){function c(a){if(void 0!==a)b.call(this,a.jc(),a);else{b.call(this);this.wg=[];this.wg[0]=0;this.Ea=1;this.Sh=[];for(a=0;10>a;a++)this.Sh[a]=-1;this.Sh[this.wg[0]]=0}this.Yq=!0}K(c,b);c.prototype.Ud=function(a){this.hasAttribute(a)||(this.Sh[a]=0,this.BE())};c.prototype.removeAttribute=function(c){if(0==c)throw a.f.F("Position attribue cannot be removed");
this.hasAttribute(c)&&(this.Sh[c]=-1,this.BE())};c.prototype.reset=function(){this.wg[0]=0;this.Ea=1;for(var a=0;a<this.Sh.length;a++)this.Sh[a]=-1;this.Sh[this.wg[0]]=0;this.Yq=!0};c.prototype.Nz=function(){return f.zo().add(this)};c.Ig=function(){return f.zo().ST()};c.eq=function(){return f.zo().TT()};c.prototype.IO=function(){var c=this.jc();return new a.na(c,this)};c.prototype.BE=function(){for(var a=this.Ea=0,c=0;10>a;a++)0<=this.Sh[a]&&(this.wg[c]=a,this.Sh[a]=c,c++,this.Ea++);this.Yq=!0};c.prototype.jc=
function(){this.Yq&&(this.bm=this.zk(),this.Yq=!1);return this.bm};c.prototype.Eb=function(a){if(null==a)return!1;if(a==this)return!0;if(!(a instanceof c)||a.Ea!=this.Ea)return!1;for(var b=0;b<this.Ea;b++)if(this.wg[b]!=a.wg[b])return!1;return this.Yq!=a.Yq?!1:!0};c.prototype.RH=function(a){if(a.Ea!=this.Ea)return!1;for(var c=0;c<this.Ea;c++)if(this.wg[c]!=a.wg[c])return!1;return!0};c.ux=function(a,c){for(var b=[],d=0;d<a.Ea;d++)b[d]=-1;for(var d=0,e=a.Ea;d<e;d++)b[d]=c.mg(a.zd(d));return b};c.tT=
function(a,b){a=new c(a);a.Ud(b);return a.Nz()};c.uT=function(a,b){for(var d=null,e=0;10>e;e++)!a.hasAttribute(e)&&b.hasAttribute(e)&&(null==d&&(d=new c(a)),d.Ud(e));return null!=d?d.Nz():a};c.rs=function(a,b){a=new c(a);a.removeAttribute(b);return a.Nz()};return c}(a.na);a.ye=b;var f=function(){function a(){this.map=[];var a=new b;this.add(a);a=new b;a.Ud(1);this.add(a)}a.zo=function(){return a.hV};a.prototype.ST=function(){return a.aq};a.prototype.TT=function(){return a.bq};a.prototype.add=function(c){var b=
c.jc();if(null!=a.aq&&a.aq.jc()==b&&c.RH(a.aq))return a.aq;if(null!=a.bq&&a.bq.jc()==b&&c.RH(a.bq))return a.bq;var d=null;void 0!==this.map[b]&&(d=this.map[b]);null==d&&(d=c.IO(),1==d.Ea?a.aq=d:2==d.Ea&&1==d.zd(1)?a.bq=d:this.map[b]=d);return d};a.hV=new a;return a}()})(y||(y={}));var O=0==q.version.indexOf("4."),W;(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area";a[a.LinearOrAngular=3]="LinearOrAngular"})(W||(W={}));var Z={feet:9002,kilometers:9036,meters:9001,miles:9035,
"nautical-miles":9030,yards:9096},T={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},Y={degrees:9102,radians:9101};void 0===a.prototype.getCacheValue&&f.extend(a,{cache:null,getCacheValue:function(a){if(null===this.cache||void 0===this.cache)this.cache={};return this.cache[a]},setCacheValue:function(a,b){if(null===this.cache||void 0===this.cache)this.cache={};this.cache[a]=b}});var aa=y.Td.create(4326),
V=y.Td.create(102100);B=function(){function f(){}f.extendedSpatialReferenceInfo=function(a){if(null===a)return null;a=C(a);var b=a.Od();return{tolerance:a.Bo(),unitType:null==b?-1:b.nd,unitID:null==b?-1:b.yc(),unitBaseFactor:null==b?0:b.Ai,unitSquareDerivative:null==b?0:y.oc.kH(b).yc()}};f.clip=function(a,b){if(null===a)return null;b=y.cc.clip(A(a),A(b),F(a));return D(b,a.spatialReference)};f.cut=function(a,b){b=A(b);b=y.cc.Hl(A(a),b,F(a));for(var d=[],c=0;c<b.length;c++)d.push(D(b[c],a.spatialReference));
return d};f.contains=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.cc.contains(A(a),A(b),F(a))};f.crosses=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.cc.xR(A(a),A(b),F(a))};f.distance=function(a,f,d){if(null===a||null===f)throw Error("Illegal Argument Exception");return y.cc.Cb(A(a),A(f),F(a),y.oc.ze(b(d,3)))};f.equals=function(a,b){return null===a&&null!==b||null===b&&null!==a?!1:y.cc.Eb(A(a),A(b),F(a))};f.intersects=
function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.cc.MU(A(a),A(b),F(a))};f.touches=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.cc.touches(A(a),A(b),F(a))};f.within=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.cc.qZ(A(a),A(b),F(a))};f.disjoint=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.cc.PR(A(a),A(b),F(a))};f.overlaps=function(a,b){if(null===
a||null===b)throw Error("Illegal Argument Exception");return y.cc.nW(A(a),A(b),F(a))};f.relate=function(a,b,d){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.cc.XB(A(a),A(b),F(a),d)};f.isSimple=function(a){if(null===a)throw Error("Illegal Argument Exception");return y.cc.XU(A(a),F(a))};f.simplify=function(a){if(null===a)throw Error("Illegal Argument Exception");var b=y.cc.BC(A(a),F(a));return D(b,a.spatialReference)};f.convexHull=function(a,b){void 0===b&&(b=!1);if(null===
a)throw Error("Illegal Argument Exception");return!1===H(a)?(b=y.cc.gR(A(a),F(a)),D(b,a.spatialReference)):f.jZ(a,b)};f.jZ=function(a,b){for(var d=[],c=0;c<a.length;c++)d.push(A(a[c]));d=y.cc.hR(d,b);for(c=0;c<d.length;c++)d[c]=D(d[c],a[0].spatialReference);return d};f.difference=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return!1===H(a)?(b=y.cc.Wm(A(a),A(b),F(a)),D(b,a.spatialReference)):f.gM(a,b)};f.gM=function(a,b){for(var d=[],c=0;c<a.length;c++)d.push(A(a[c]));
d=y.cc.MR(d,A(b),F(b));for(c=0;c<d.length;c++)d[c]=D(d[c],b.spatialReference);return d};f.symmetricDifference=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return!1===H(a)?(b=y.cc.Pp(A(a),A(b),F(a)),D(b,a.spatialReference)):f.JM(a,b)};f.JM=function(a,b){for(var d=[],c=0;c<a.length;c++)d.push(A(a[c]));d=y.cc.NY(d,A(b),F(b));for(c=0;c<d.length;c++)d[c]=D(d[c],b.spatialReference);return d};f.intersect=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");
return!1===H(a)?(b=y.cc.Ma(A(a),A(b),F(a)),D(b,a.spatialReference)):f.vM(a,b)};f.vM=function(a,b){for(var d=[],c=0;c<a.length;c++)d.push(A(a[c]));d=y.cc.KU(d,A(b),F(b));for(c=0;c<d.length;c++)d[c]=D(d[c],b.spatialReference);return d};f.union=function(a,b){void 0===b&&(b=null);if(null===a)return null;!1===H(a)&&(a=[a],null!==b&&a.push(b));if(0===a.length)return null;b=[];for(var d=0;d<a.length;d++)b.push(A(a[d]));return D(y.cc.fZ(b,F(a[0])),a[0].spatialReference)};f.offset=function(a,g,d,c,e,k){var h=
0;if(null!=c&&void 0!=c)switch(c){case "round":h=0;break;case "bevel":h=1;break;case "miter":h=2;break;case "square":h=3}return!1===H(a)?(g=y.cc.offset(A(a),F(a),g,h,e,k,y.oc.ze(b(d,3))),D(g,a.spatialReference)):f.FM(a,g,d,h,e,k)};f.FM=function(a,f,d,c,e,g){if(null===a)return null;if(0===a.length)return[];for(var k=[],h=0;h<a.length;h++)k.push(A(a[h]));f=y.cc.lW(k,F(a[0]),f,c,e,g,y.oc.ze(b(d,3)));for(h=0;h<f.length;h++)f[h]=D(f[h],a[0].spatialReference);return f};f.buffer=function(a,g,d,c){void 0===
c&&(c=!1);if(!1===H(a))return g=y.cc.buffer(A(a),F(a),g,y.oc.ze(b(d,3)),!1,0,NaN),D(g,a.spatialReference);if("[object Array]"!==Object.prototype.toString.call(g)){for(var e=[],k=0;k<a.length;k++)e.push(g);g=e}if(g.length!=a.length){if(0==g.length)throw Error("Illegal Argument Exception");for(var e=[],h=0,k=0;k<a.length;k++)void 0===g[k]?e.push(h):(e.push(g[k]),h=g[k]);g=e}return f.pD(a,g,d,!1,c,"geodesic",NaN)};f.geodesicBuffer=function(a,g,d,c,e,k){if(!1===H(a))return void 0===e&&(e=NaN),g=y.cc.buffer(A(a),
F(a),g,y.oc.ze(b(d,0)),!0,t(c),e),D(g,a.spatialReference);if("[object Array]"!==Object.prototype.toString.call(g)){for(var h=[],l=0;l<a.length;l++)h.push(g);g=h}if(g.length!=a.length){if(0==g.length)throw Error("Illegal Argument Exception");for(var h=[],m=0,l=0;l<a.length;l++)void 0===g[l]?h.push(m):(h.push(g[l]),m=g[l]);g=h}return f.pD(a,g,d,!0,c,e,k)};f.pD=function(a,f,d,c,e,g,h){if(null===a)return null;if(0===a.length)return[];void 0===h&&(h=NaN);for(var k=[],l=0;l<a.length;l++)k.push(A(a[l]));
f=y.cc.PP(k,F(a[0]),f,y.oc.ze(b(d,0)),c,e,t(g),h);for(l=0;l<f.length;l++)f[l]=D(f[l],a[0].spatialReference);return f};f.nearestCoordinate=function(a,b,d){void 0===d&&(d=!0);b=y.cc.Yz(A(a),A(b),d);return{coordinate:D(b.Mz(),a.spatialReference),distance:b.Pz(),isRightSide:b.yA(),vertexIndex:b.Za(),isEmpty:b.u()}};f.nearestVertex=function(a,b){b=y.cc.Zz(A(a),A(b));return{coordinate:D(b.Mz(),a.spatialReference),distance:b.Pz(),isRightSide:b.yA(),vertexIndex:b.Za(),isEmpty:b.u()}};f.nearestVertices=function(a,
b,d,c){b=A(b);d=y.cc.$z(A(a),b,d,c);c=[];for(b=0;b<d.length;b++)!1===d[b].u()&&c.push({coordinate:D(d[b].Mz(),a.spatialReference),distance:d[b].Pz(),isRightSide:d[b].yA(),vertexIndex:d[b].Za(),isEmpty:d[b].u()});return c};f.generalize=function(a,f,d,c){f=y.cc.FS(A(a),F(a),f,d,y.oc.ze(b(c,3)));return D(f,a.spatialReference)};f.densify=function(a,f,d){f=y.cc.Ks(A(a),F(a),f,y.oc.ze(b(d,3)));return D(f,a.spatialReference)};f.geodesicDensify=function(a,f,d,c){void 0===c&&(c=0);f=y.cc.Dz(A(a),F(a),f,y.oc.ze(b(d,
3)),c);return D(f,a.spatialReference)};f.rotate=function(b,f,d){if(void 0===d||null===d)void 0!==b.x?d=b:void 0!==b.xmin?(!1===b instanceof a&&(b=O?u(b):n(b)),d=O?b.get("center"):b.getCenter()):(!1===b instanceof a&&(b=O?u(b):n(b)),d=O?b.get("extent").get("center"):b.getExtent().getCenter());f=O?y.Wp.rotate(b.toJSON?b.toJSON():b,f,d.toJSON?d.toJSON():d):y.Wp.rotate(b.toJson?b.toJson():b,f,d.toJson?d.toJson():d);O?(f=u(f),f.set("spatialReference",b.spatialReference)):(f=n(f),f.setSpatialReference(b.spatialReference));
return f};f.flipHorizontal=function(b,f){if(void 0===f||null===f)void 0!==b.x?f=b:void 0!==b.xmin?(!1===b instanceof a&&(b=O?u(b):n(b)),f=O?b.get("center"):b.getCenter()):(!1===b instanceof a&&(b=O?u(b):n(b)),f=O?b.get("extent").get("center"):b.getExtent().getCenter());f=O?y.Wp.yG(b.toJSON?b.toJSON():b,f.toJSON?f.toJSON():f):y.Wp.yG(b.toJson?b.toJson():b,f.toJson?f.toJson():f);O?(f=u(f),f.set("spatialReference",b.spatialReference)):(f=n(f),f.setSpatialReference(b.spatialReference));return f};f.flipVertical=
function(b,f){if(void 0===f||null===f)void 0!==b.x?f=b:void 0!==b.xmin?(!1===b instanceof a&&(b=O?u(b):n(b)),f=O?b.get("center"):b.getCenter()):(!1===b instanceof a&&(b=O?u(b):n(b)),f=O?b.get("extent").get("center"):b.getExtent().getCenter());f=O?y.Wp.zG(b.toJSON?b.toJSON():b,f.toJSON?f.toJSON():f):y.Wp.zG(b.toJson?b.toJson():b,f.toJson?f.toJson():f);O?(f=u(f),f.set("spatialReference",b.spatialReference)):(f=n(f),f.setSpatialReference(b.spatialReference));return f};f.planarArea=function(a,f){if(null===
a)throw Error("Illegal Argument Exception");return y.cc.vW(A(a),F(a),y.oc.ze(b(f,2)))};f.planarLength=function(a,f){if(null===a)throw Error("Illegal Argument Exception");return y.cc.wW(A(a),F(a),y.oc.ze(b(f,3)))};f.geodesicArea=function(a,f,d){if(null===a)throw Error("Illegal Argument Exception");return y.cc.LS(A(a),F(a),y.oc.ze(b(f,2)),t(d))};f.geodesicLength=function(a,f,d){if(null===a)throw Error("Illegal Argument Exception");return y.cc.PS(A(a),F(a),y.oc.ze(b(f,0)),t(d))};f._enableProjection=
function(a){f.EE=!0;y.zN.bind(a)};f.Mg=function(a){return C(a).Ao()};f._getTransformation=function(a,b,d){void 0===d&&(d=null);var c=null,e=null;if(d){if(!d.spatialReference)throw y.f.F("AOI missing Spatial Reference");c=A(d);e=C(d.spatialReference).Ao()}a=y.Nu.PT(C(a).Ao(),C(b).Ao(),c,e);return null!==a?a:null};f._getTransformationBySuitability=function(a,b,d){void 0===d&&(d=null);var c=null,e=null;if(d){if(!d.spatialReference)throw y.f.F("AOI missing Spatial Reference");c=A(d);e=C(d.spatialReference).Ao()}return y.Nu.QT(C(a).Ao(),
C(b).Ao(),c,e)};f.bZ=function(a,b,d){var c=null;if(d){var e=d.getGTListEntry();if(null!==e){for(var c=new y.my(null),g=0,h=e.steps;g<h.length;g++){var e=h[g],l=new y.io(e.geogtran);e.isInverse&&l.jt();c.add(l)}c=y.qs.Hs(f.Mg(a),f.Mg(b),c);d.assignCachedGe(a,b,c);return c}}if(null===c&&d&&d.steps&&0<d.steps.length){c=new y.my(null);g=0;for(h=d.steps;g<h.length;g++)e=h[g],-1!=e.wkid&&null!==e.wkid&&void 0!==e.wkid?c.add(y.io.create(e.wkid,e.isInverse)):c.add(y.io.eG(e.wkt,e.isInverse));c=y.qs.Hs(f.Mg(a),
f.Mg(b),c);d.assignCachedGe(a,b,c);return c}return y.qs.Hs(f.Mg(a),f.Mg(b),c)};f._project=function(a,b,d,c,e){void 0===c&&(c=null);void 0===e&&(e=!1);if(!1===this.EE)throw Error("Projection Engine must be enabled using enableProjection");if(0===a.length)return[];if(c){var g=c.getCachedGeTransformation(b,d);g||(g=f.bZ(b,d,c));b=[];var h=0}else g=y.qs.Hs(f.Mg(b),f.Mg(d),null),b=[],h=0;for(;h<a.length;h++)c=a[h],b.push(f.lD(c,d,g,e));return b};f.lD=function(a,b,d,c){a=y.cc.Xg(A(a),d);return c?Q(a):D(a,
b)};f.EE=!1;return f}();void 0===a.prototype.getCacheValue&&f.extend(a,{cache:null,getCacheValue:function(a){if(null===this.cache||void 0===this.cache)this.cache={};return this.cache[a]},setCacheValue:function(a,b){if(null===this.cache||void 0===this.cache)this.cache={};this.cache[a]=b}});return B})},"esri/views/3d/interactive/measurementTools/areaMeasurement3D/PathChanges":function(){define(["require","exports","../support/setUtils"],function(B,w,q){return function(){function a(){this.change="none";
this.updatedVertices=new Set}a.prototype.fullChange=function(){this.change="full"};a.prototype.incrementalChange=function(a){"none"===this.change&&(this.change="incremental");this.updatedVertices.add(a)};a.prototype.clear=function(){this.change="none";this.updatedVertices.clear()};a.prototype.assign=function(a){this.change=a.change;this.updatedVertices=q.clone(a.updatedVertices)};a.prototype.merge=function(a){var h=this;switch(this.change){case "none":this.assign(a);break;case "incremental":"incremental"===
a.change?a.updatedVertices.forEach(function(a){h.updatedVertices.add(a)}):"full"===a.change&&(this.change="full")}};return a}()})},"esri/views/3d/interactive/measurementTools/support/setUtils":function(){define(["require","exports"],function(B,w){Object.defineProperty(w,"__esModule",{value:!0});w.clone=function(q){var a=new Set;q.forEach(function(m){a.add(m)});return a}})},"esri/views/3d/interactive/measurementTools/support/Path":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/Collection ../../../../../core/accessorSupport/decorators ../../../support/Evented".split(" "),
function(B,w,q,a,m,h,p,x){return function(g){function f(){var a=null!==g&&g.apply(this,arguments)||this;a.vertices=new h;return a}q(f,g);Object.defineProperty(f.prototype,"front",{get:function(){return this.vertices.items[0]||null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"back",{get:function(){return this.vertices.items[this.vertices.length-1]||null},enumerable:!0,configurable:!0});f.prototype.clear=function(){this.vertices.removeAll();this.emit("cleared",{});this._notifyFrontBack()};
f.prototype.vertex=function(a){return this.vertices.items[a]};f.prototype.add=function(a){this.vertices.add(a);a=this.vertices.length-1;this._notifyFrontBack();this.emit("vertex-added",{index:a});return a};f.prototype.insert=function(a,f){this.vertices.splice(a,0,f);this._notifyFrontBack();this.emit("vertex-inserted",{index:a});return a};f.prototype.remove=function(a){this.vertices.removeAt(a);this._notifyFrontBack();this.emit("vertex-removed",{index:a})};f.prototype.update=function(a,f){null!=f&&
(this.vertices.splice(a,1,f),this._notifyFrontBack());this.emit("vertex-updated",{index:a})};f.prototype._notifyFrontBack=function(){this.notifyChange("front");this.notifyChange("back")};a([p.property({readOnly:!0})],f.prototype,"vertices",void 0);a([p.property({aliasOf:"vertices.length"})],f.prototype,"length",void 0);a([p.property({readOnly:!0})],f.prototype,"front",null);a([p.property({readOnly:!0})],f.prototype,"back",null);return f=a([p.subclass("esri.views.3d.interactive.measurementTools.support.Path")],
f)}(p.declared(m,x.Evented))})},"webSceneViewer/widgets/BasemapGallery/BasemapGalleryPane":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dojo/_base/window esri/core/Accessor esri/core/Handles esri/core/watchUtils esri/portal/Portal ./BasemapGallery ./BasemapGalleryViewModel ./BasemapGalleryPaneVM ../../support/layerUtils dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojo/i18n!webSceneViewer/widgets/nls/widgets".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y){B=function(a){return"basemap-gallery-pane"+(a?"__"+a:"")};var I=B(),M=B("container"),N=B("underground-container");return function(u){function w(a){a=u.call(this)||this;a.handles=new b;return a}q(w,u);w.prototype.initialize=function(){!this.viewModel&&this.appState&&(this.viewModel=new A({appState:this.appState}));h.add(this.node,M);this.initializeGallery();this.initializeGroundTransparency()};w.prototype.destroy=function(){this.gallery.destroy();
this.groundTransparencySlider.destroy()};Object.defineProperty(w.prototype,"portal",{get:function(){return this.appState.portal},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"view",{get:function(){return this.appState.view},enumerable:!0,configurable:!0});w.prototype.initializeGallery=function(){var a=this;this.galleryContainer=p.create("div",{className:I},this.node);this.gallery=new E({viewModel:new C({portal:this.portal||D.getDefault(),view:this.view})});this.gallery.viewModel.watch("activeItem",
function(b){b&&"ready"===b.state&&F.setBasemapInteractive(a.appState,b.basemap).catch(function(){})});this.gallery.placeAt(this.galleryContainer);this.gallery.startup()};w.prototype.initializeGroundTransparency=function(){var a=this,b=this.node.nextSibling;h.add(b,N);var m=p.create("div",{class:"containerTransparencySlider"},b);p.create("h3",{className:"text"},m).textContent=y.underground.groundTransparency;this.groundTransparencySlider=new H({value:100,minimum:0,maximum:100,intermediateChanges:!0,
showButtons:!1});new Q({count:21,class:"minorRules"},p.create("div",{},this.groundTransparencySlider.bottomDecoration));new Q({count:5,class:"majorRules"},p.create("div",{},this.groundTransparencySlider.bottomDecoration));new K({container:"bottomDecoration",class:"labelPercent",labels:["0","25","50","75","100"]},p.create("div",{},this.groundTransparencySlider.bottomDecoration));this.groundTransparencySlider.placeAt(m);this.groundTransparencySlider.startup();[".dijitRuleMark.dijitRuleMarkH",".labelPercent .dijitRuleLabelContainer.dijitRuleLabelContainerH"].forEach(function(b){f(b,
a.groundTransparencySlider.bottomDecoration).on("click",function(b){if(b=(b.currentTarget?b.currentTarget:b.srcElement).style.left)b=parseInt(b.replace("%",""),10),h.contains(n.doc.body.parentNode,"esriRtl")&&(b=100-b),a.updateGroundTransparency(b)})});this.handles.add(t.init(this.viewModel,"groundTransparency",this.updateTransparencySlider.bind(this)));this.handles.add(g(this.groundTransparencySlider,"change",this.updateGroundTransparency.bind(this)));p.create("div",{},b)};w.prototype.updateTransparencySlider=
function(a){this.groundTransparencySlider.set("value",a)};w.prototype.updateGroundTransparency=function(a){this.viewModel.groundTransparency=a;x.set(this.groundTransparencySlider.sliderHandle,"opacity",1-a/100)};a([m.property()],w.prototype,"appState",void 0);a([m.property()],w.prototype,"node",void 0);a([m.property({readOnly:!0})],w.prototype,"portal",null);a([m.property({readOnly:!0})],w.prototype,"view",null);a([m.property()],w.prototype,"viewModel",void 0);return w=a([m.subclass("webSceneViewer.widgets.BasemapGallery.BasemapGalleryPane")],
w)}(m.declared(u))})},"webSceneViewer/widgets/BasemapGallery/BasemapGallery":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators dijit/_TemplatedMixin dojo/dom-class dojo/_base/lang esri/core/Collection esri/core/watchUtils esri/widgets/Widgette esri/widgets/support/viewModelWiring dojo/i18n!webSceneViewer/widgets/nls/widgets ./BasemapGalleryViewModel ./BasemapGalleryItem".split(" "),function(B,w,q,a,m,
h,p,x,g,f,n,u,b,t,D){var E=function(a){return"sceneviewer-basemap-gallery"+(a?"__"+a:"")},C=E(),A=function(a,b){return E(b&&a)+"--"+(b||a)}("loading"),F=E("loading-container");return function(h){function n(a){a=h.call(this)||this;a._getActiveBasemapAttr=u.createGetterDelegate("activeBasemap");a._setActiveBasemapAttr=u.createSetterDelegate("activeBasemap");a._getViewAttr=u.createGetterDelegate("view");a._setViewAttr=u.createSetterDelegate("view");a.itemWidgets=new g;return a}q(n,h);n.prototype.getDefaults=
function(){return x.mixin(this.inherited(arguments),{viewModel:null})};n.prototype.destroy=function(){this.destroyItems()};n.prototype.postCreate=function(){var a=this;this.inherited(arguments);var b=this.itemsChanged.bind(this);this.own(f.on(this,"viewModel.items","change",b,b),f.init(this,"viewModel.state",function(b){p.toggle(a.domNode,"esri-disabled","disabled"===b)}),f.init(this,"viewModel.loaded",function(b){p.toggle(a.domNode,A,!b)}))};n.prototype.destroyItems=function(){this.itemWidgets.forEach(function(a){a.destroy()});
this.itemWidgets.removeAll()};n.prototype.itemsChanged=function(){var a=this;this.destroyItems();this.viewModel&&this.viewModel.items&&this.itemWidgets.addMany(this.viewModel.items.map(function(b){b=new D({viewModel:b});b.placeAt(a.flowContainerElement);return b}))};a([m.shared(b.basemapGallery)],n.prototype,"i18n",void 0);a([m.shared('\n    \x3cdiv class\x3d"'+C+'"\x3e\n      \x3cdiv class\x3d"'+F+' loading" title\x3d"${i18n.loadingBasemaps || \'\'}"\x3e\n      \x3c/div\x3e\n      \x3cdiv data-dojo-attach-point\x3d"flowContainerElement"\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  ')],
n.prototype,"templateString",void 0);a([m.property({type:t})],n.prototype,"viewModel",void 0);a([m.property({dependsOn:["viewModel.activeBasemap"]})],n.prototype,"activeBasemap",void 0);a([m.property({dependsOn:["viewModel.view"]})],n.prototype,"view",void 0);return n=a([m.subclass("webSceneViewer.widgets.BasemapGallery.BasemapGallery")],n)}(m.declared(n,h))})},"esri/widgets/Widgette":function(){define("../core/Accessor ../core/declare ../core/lang ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/window dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){function t(a){return function(b){this._set(a,b)}}function D(a,b){return function(f){E.call(this,a,b,f);this._set(a,f)}}function E(a,b,f){(Array.isArray(b)?b:[b]).forEach(function(b){var g=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":"function"===typeof f&&(f=f.bind(this));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;g.tagName?n.set(g,b,f):g.set(b,f);break;case "innerText":g.innerHTML="";g.appendChild(this.ownerDocument.createTextNode(f));
break;case "innerHTML":g.innerHTML=f;break;case "class":b=this._get(a),u.replace(g,f,b)}},this)}function C(a,b,f){g.around(a,b,function(b){return function(){f(a)||b.apply(a)}})}w.before(function(b,f){if(f.declaredClass===A||w.hasMixin(b,A)){var g=a.getPropertiesMetadata(f);Object.keys(g).forEach(function(a){var b=g[a];var f=b.set;a="function"===typeof f?f:null===f?t(b.name):"string"===typeof f||"object"===typeof f?D(a,f):void 0;b.set=a})}});var A="esri.widgets._WidgetBase";return B.createSubclass([h],
{declaredClass:A,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var f;(f=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null)&&Object.getOwnPropertyNames(f).forEach(function(a){b.set(a,f[a])},this);this.postMixInProperties();this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=x.body(this.ownerDocument);p.add(this);this.buildRendering();b.initialize();a&&(this.set(a),b.ctorArgs=null);b.initialize();this.initialize();
this.postCreate();if(this.domNode){var g;(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),g=!0);n.set(this.domNode,{widgetId:this.id,id:this.id});g&&(this.srcNodeRef=null)}this._created=!0;this.notifyChange("container");C(this,"startup",function(a){return a._started});C(this,"destroy",function(a){return a._beingDestroyed||a._destroyed});this.autoStart&&this.startup()},getDefaults:function(a){var b={};b.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||p.getUniqueId(this.declaredClass.replace(/\./g,
"_"));delete a.id;a.srcNodeRef&&(b.srcNodeRef=a.srcNodeRef,delete a.srcNodeRef);return q.mixin(this.inherited(arguments),b)},normalizeCtorArgs:function(a,b){a=a||{};if(b=a.container||a.srcNodeRef||b)a.srcNodeRef=f.byId(b);return a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:m.prototype.postMixInProperties,buildRendering:m.prototype.buildRendering,postCreate:m.prototype.postCreate,startup:m.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{autoStart:!0,
"class":{value:"",set:{node:"domNode",type:"class"}},domNode:{value:null},focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:m.prototype._setStyleAttr},widgetId:{}},destroyDescendants:m.prototype.destroyDescendants,destroyRecursive:m.prototype.destroyRecursive,destroyRendering:m.prototype.destroyRendering,emit:m.prototype.emit,on:function(a,f){return this.own(b(this.domNode,a,f))[0]},toString:m.prototype.toString,getChildren:m.prototype.getChildren,getParent:m.prototype.getParent,
isLeftToRight:m.prototype.isLeftToRight,placeAt:m.prototype.placeAt,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.domNode&&p.findWidgets(this.domNode,this.containerNode).forEach(b);this.destroyRendering(a);p.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widgette",
getDefaults:function(){return q.mixin(this.inherited(arguments),{viewModel:{}})},buildRendering:function(){this.inherited(arguments);u.add(this.domNode,"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{container:{get:function(){return this._created?this.domNode:this._get("container")},set:function(a){var b=this._get("container");this._created||b||!a||this._set("container",f.byId(a))}},viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",
a);u.toggle(this.domNode,"esri-hidden",!a)}}}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],function(B){function w(q,a){Array.isArray(a)||(a=[a]);return a.map(function(a){return q.viewModel.on(a,function(h){q.emit(a,h)})})}return{createGetterDelegate:function(q){var a="viewModel."+q;return function(){return this.get(a)}},createSetterDelegate:function(q){return function(a){var m=this.get("viewModel");m&&m.set(q,a)}},createMethodDelegate:function(q){var a="viewModel."+
q;return function(){var m=this.get(a);if(m)return m.apply(this.viewModel,arguments)}},setUpEventDelegates:function(q,a){var m=w(q,a),h=B.init(q,"viewModel",function(h,x){m.forEach(function(a){a.remove()});m.length=0;h&&(m=w(q,a));q.own.apply(q,m)});q.own(h)}}})},"webSceneViewer/widgets/BasemapGallery/BasemapGalleryViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators esri/Basemap esri/core/Accessor esri/core/Collection esri/core/Error esri/core/Handles esri/core/watchUtils esri/core/promiseUtils ../../support/layerUtils dojo/i18n!webSceneViewer/widgets/nls/widgets ./BasemapGalleryItemViewModel".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D){var E=x.ofType(D);return function(p){function x(a){a=p.call(this)||this;a.items=new E;a.loaded=!1;a.loadError=null;a.handles=new f;return a}q(x,p);x.prototype.initialize=function(){var a=this;n.init(this,"portal",function(){return a.refresh()});this.watch("view.map.basemap",function(){return a.selectMatchingItem()})};x.prototype.destroy=function(){this.handles.removeAll()};Object.defineProperty(x.prototype,"activeItem",{get:function(){return this.items.find(function(a){return a.active})},
set:function(a){a.active=!0},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"activeBasemap",{get:function(){return this.activeItem?this.activeItem.basemap:null},set:function(a){var f=this.items.find(function(f){return b.basemapEquals(f.basemap,a)});f&&(f.active=!0)},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"state",{get:function(){return this.get("view.ready")&&this.loaded?"ready":"disabled"},enumerable:!0,configurable:!0});x.prototype.updateLoaded=function(a,
b){void 0===a&&(a=!0);void 0===b&&(b=null);this._set("loaded",a);this._set("loadError",b)};x.prototype.refresh=function(){var a=this;this.updateLoaded(!1,null);this.handles.removeAll();var b={};this.refreshTask=b;this.portal?(this.handles.add({remove:function(){a.refreshTask={}}}),this.portal.load().then(function(){a.handles.add(a.watch(["portal.basemapGalleryGroupQuery","portal.user"],function(){return a.refresh()}));return a.portal.fetchBasemaps()}).then(function(f){b===a.refreshTask&&(a.items.removeAll(),
f=a.filterBasemaps(f),f.push(new h({title:t.basemapGallery.noBasemap,thumbnailUrl:"./images/no-basemap.svg"})),a.items.addMany(f.map(function(b){var f=new D({basemap:b,view:a.view});a.handles.add(n.when(f,"active",function(){return a.itemBecameActive(f)}));return f})),a.selectMatchingItem())}).then(function(){b===a.refreshTask&&a.updateLoaded(!0,null)}).catch(function(f){b===a.refreshTask&&(a.items.removeAll(),a.updateLoaded(!0,f))})):(this.updateLoaded(!0,new g("basemapgallery:portal-not-set","Portal to load basemaps from is not set")),
this.items.removeAll())};x.prototype.filterBasemaps=function(a){return a.filter(function(a){return"usgs national map"===a.title.toLowerCase()||-1!==a.title.toLowerCase().indexOf("bing maps")?!1:!0})};x.prototype.selectMatchingItem=function(){var a=this,f=this.get("view.map.basemap"),g=!1;this.handles.add({remove:function(){g=!0}});var h=!1;u.eachAlways(this.items.map(function(a){return a.basemap.load().then(function(){!g&&b.basemapEquals(f,a.basemap)&&(h=!0,a.active=!0)})}).toArray()).then(function(){g||
h||a.itemBecameActive(null)})};x.prototype.itemBecameActive=function(a){this.items.forEach(function(b){a!==b&&(b.active=!1)});this.notifyChange("activeItem")};a([m.property()],x.prototype,"activeItem",null);a([m.property({dependsOn:["activeItem"]})],x.prototype,"activeBasemap",null);a([m.property({type:E})],x.prototype,"items",void 0);a([m.property({readOnly:!0})],x.prototype,"loaded",void 0);a([m.property({readOnly:!0})],x.prototype,"loadError",void 0);a([m.property({readOnly:!0,dependsOn:["view.ready",
"loaded"]})],x.prototype,"state",null);a([m.property()],x.prototype,"portal",void 0);a([m.property()],x.prototype,"view",void 0);return x=a([m.subclass("webSceneViewer.widgets.BasemapGallery.BasemapGalleryViewModel")],x)}(m.declared(p))})},"webSceneViewer/widgets/BasemapGallery/BasemapGalleryItemViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators dojo/string dojo/i18n!webSceneViewer/widgets/nls/widgets esri/core/Accessor esri/core/Error esri/core/Handles esri/core/watchUtils esri/views/3d/terrain/terrainUtils esri/views/3d/terrain/TilingScheme ../../support/errorUtils ../../support/spatialReferenceUtils ../../support/layerUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E){return function(x){function A(a){a=x.call(this)||this;a.active=!1;a.error=null;a.isCompatibleWithView=!1;a.handles=new f;return a}q(A,x);A.prototype.initialize=function(){var a=this,b=function(){return a.checkFirstBaseLayerCompatibility()};this.handles.add([this.watch("basemap view.ready view.map.isLocked view.viewingMode view.spatialReference view.basemapTerrain.tilingScheme".split(" "),b),n.on(this,"basemap.baseLayers","change",b)]);b()};A.prototype.destroy=
function(){this.handles.destroy()};Object.defineProperty(A.prototype,"state",{get:function(){return this.isDisabled()?"disabled":"ready"},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"errorForDisplay",{get:function(){var a=this.error;if(!a)return"";switch(a.name){case "basemapgalleryitem:spatial-reference-unsupported-global":return p.basemapGallery.spatialReferenceUnsupportedGlobal;case "basemapgalleryitem:spatial-reference-unsupported-local":return p.basemapGallery.spatialReferenceUnsupportedLocal;
case "basemapgalleryitem:spatial-reference-incompatible":return p.basemapGallery.spatialReferenceIncompatible;case "basemapgalleryitem:tiling-scheme-unsupported-web-mercator-global":return p.basemapGallery.tilingSchemeUnsupportedGlobalWebMercator;case "basemapgalleryitem:tiling-scheme-unsupported-wgs84-global":return p.basemapGallery.tilingSchemeUnsupportedGlobalWGS84;case "basemapgalleryitem:tiling-scheme-unsupported-local":return p.basemapGallery.tilingSchemeUnsupportedLocal;case "basemapgalleryitem:tiling-scheme-incompatible":return p.basemapGallery.tilingSchemeIncompatible;
case "wsv-validatelayers:unsupported-basemap-layer-type":return h.substitute(p.basemapGallery.unsupportedLayerTypeForBasemap,{layerType:encodeURIComponent(null!=a.details?a.details.operationalLayerType:"")});default:return t.isRequestError(a)?p.basemapGallery.serviceUnavailable:a.message?a.message:a.toString()}},enumerable:!0,configurable:!0});A.prototype.isDisabled=function(){return this.basemap&&!this.basemap.loadError&&this.isCompatibleWithView?!1:!0};A.prototype.checkFirstBaseLayerCompatibility=
function(){var a=this;this.setCompatible(!1);if(!this.basemap)return this.setCompatible(!1,new g("basemapgalleryitem:no-basemap","Basemap is not set"));if(!this.get("view.ready"))return this.setCompatible(!1,new g("basemapgalleryitem:view-not-ready","View is not ready"));var b=this.basemap,f=function(){return b!==a.basemap||!a.get("view.ready")};b.load().then(function(){if(!f()){if(0===b.baseLayers.length)return a.setCompatible();var g=E.validateLayers(b.baseLayers.concat(b.referenceLayers),{context:"basemap"});
return g.errors.length?a.setCompatible(!1,g.errors[0]):b.baseLayers.getItemAt(0).load().then(function(b){f()||a.updateCompatibleWithView(b)})}}).catch(function(b){f()||a.setCompatible(!1,b)})};A.prototype.setCompatible=function(a,b){void 0===a&&(a=!0);void 0===b&&(b=null);this._set("isCompatibleWithView",a);this._set("error",b)};A.prototype.updateCompatibleWithView=function(a){var f=a.tileInfo;if(!f)return this.setCompatible();var h=this.view.get("viewingMode");if(!h)return this.setCompatible();if(!D.isSpatialReferenceSupported(h,
f.spatialReference))return this.setCompatible(!1,new g("basemapgalleryitem:spatial-reference-unsupported-"+h,"Basemap spatial reference is unsupported in "+h+" mode"));if("global"===h){var m=u.checkIfTileInfoSupportedForView(f,a.fullExtent,null,h);m&&a.compatibleTileInfo256&&!u.checkIfTileInfoSupportedForView(a.compatibleTileInfo256,a.fullExtent,null,h)&&(m=null);if(m)return a=void 0,a=f.spatialReference.isWebMercator?"web-mercator":"wgs84",this.setCompatible(!1,new g("basemapgalleryitem:tiling-scheme-unsupported-"+
a+"-global","Basemap tiling scheme is unsupported in global mode",{error:m}))}else if(b.checkUnsupported(f))return this.setCompatible(!1,new g("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode"));if(!this.view.get("map.isLocked"))return this.setCompatible();m=this.get("view.basemapTerrain.tilingScheme");if(!(!m||m.compatibleWith(f)||a.compatibleTileInfo256&&m.compatibleWith(a.compatibleTileInfo256)))return this.setCompatible(!1,new g("basemapgalleryitem:tiling-scheme-incompatible",
"Basemap tiling scheme is incompatible with the view"));this.setCompatible()};a([m.property()],A.prototype,"active",void 0);a([m.property()],A.prototype,"basemap",void 0);a([m.property({readOnly:!0})],A.prototype,"error",void 0);a([m.property({readOnly:!0})],A.prototype,"isCompatibleWithView",void 0);a([m.property({readOnly:!0,dependsOn:["view.ready","isCompatibleWithView"]})],A.prototype,"state",null);a([m.property()],A.prototype,"view",void 0);a([m.property({readOnly:!0,dependsOn:["error"]})],A.prototype,
"errorForDisplay",null);return A=a([m.subclass("webSceneViewer.widgets.BasemapGallery.BasemapGalleryItemViewModel")],A)}(m.declared(x))})},"webSceneViewer/widgets/BasemapGallery/BasemapGalleryItem":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators dijit/_TemplatedMixin dojo/dom-class esri/core/watchUtils esri/widgets/Widgette esri/widgets/support/viewModelWiring ./BasemapGalleryItemViewModel".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n){var u=function(a){return"sceneviewer-basemap-item"+(a?"__"+a:"")},b=u(),t=function(a,b){return u(b&&a)+"--"+(b||a)}("active"),D=u("thumbnail"),E=u("title-container");return function(g){function h(a){a=g.call(this)||this;a._getActiveBasemapAttr=f.createGetterDelegate("basemap");return a}q(h,g);h.prototype.postCreate=function(){var a=this;this.inherited(arguments);this.own(x.init(this,"viewModel.basemap.title",function(b){return a.updateTitle()}),x.init(this,"viewModel.basemap.thumbnailUrl",
function(b){return a.updateThumbnailUrl(b)}),x.init(this,"viewModel.state",function(b){p.toggle(a.domNode,"esri-disabled","disabled"===b);a.updateTitle()}),x.init(this,"viewModel.active",function(b){p.toggle(a.domNode,t,b)}),x.init(this,"viewModel.error",function(){return a.updateTitle()}))};h.prototype.updateTitle=function(){var a;a="disabled"===this.viewModel.state&&this.viewModel.error?this.viewModel.errorForDisplay:this.viewModel.basemap.title||"";this.titleElement.textContent=this.viewModel.basemap.title||
"";this.domNode.setAttribute("alt",a);this.domNode.setAttribute("title",a)};h.prototype.updateThumbnailUrl=function(a){this.thumbnailElement.src=a||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};h.prototype.activate=function(){"ready"===this.viewModel.state&&(this.viewModel.active=!0)};a([m.shared('\n    \x3cdiv class\x3d"'+b+'" data-dojo-attach-event\x3d"onclick: activate"\x3e\n      \x3cimg class\x3d"'+D+'" data-dojo-attach-point\x3d"thumbnailElement"/\x3e\n      \x3cdiv class\x3d"'+
E+'"\x3e\n        \x3cspan data-dojo-attach-point\x3d"titleElement"\x3e\x3c/span\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  ')],h.prototype,"templateString",void 0);a([m.property({type:n})],h.prototype,"viewModel",void 0);a([m.property({readOnly:!0,dependsOn:["viewModel.basemap"]})],h.prototype,"basemap",void 0);a([m.property({readOnly:!0,dependsOn:["viewModel.view"]})],h.prototype,"view",void 0);return h=a([m.subclass("webSceneViewer.widgets.BasemapGallery.BasemapGalleryItem")],h)}(m.declared(g,
h))})},"webSceneViewer/widgets/BasemapGallery/BasemapGalleryPaneVM":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators esri/core/Accessor".split(" "),function(B,w,q,a,m,h){return function(h){function p(){return null!==h&&h.apply(this,arguments)||this}q(p,h);Object.defineProperty(p.prototype,"groundTransparency",{get:function(){return 100*(1-this.appState.view.map.ground.opacity)},set:function(a){this.appState.view.map.ground.opacity=
1-a/100},enumerable:!0,configurable:!0});a([m.property()],p.prototype,"appState",void 0);a([m.property({dependsOn:["appState.view.map.ground.opacity"]})],p.prototype,"groundTransparency",null);return p=a([m.subclass("webSceneViewer.widgets.BasemapGallery.BasemapGalleryPaneVM")],p)}(m.declared(h))})},"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q){var K=w("dijit.form._SliderMover",n,{onMouseMove:function(a){var b=this.widget,f=b._abspos;f||(f=b._abspos=m.position(b.sliderBarContainer,!0),b._setPixelValue_=x.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-f[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?f[b._pixelCount]-a:a,f[b._pixelCount],!1)},destroy:function(a){n.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,
!0)}});q=w("dijit.form.HorizontalSlider",[F,H],{templateString:Q,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:D.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",
_onKeyUp:function(a){this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey||this._setValueAttr(this.value,!0)},_onKeyDown:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey||a.metaKey)){switch(a.keyCode){case p.HOME:this._setValueAttr(this.minimum,!1);break;case p.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?p.RIGHT_ARROW:p.LEFT_ARROW:case !1===this._descending?p.DOWN_ARROW:p.UP_ARROW:case !1===this._descending?p.PAGE_DOWN:p.PAGE_UP:this.increment(a);
break;case this._descending||this.isLeftToRight()?p.LEFT_ARROW:p.RIGHT_ARROW:case !1===this._descending?p.UP_ARROW:p.DOWN_ARROW:case !1===this._descending?p.PAGE_UP:p.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){this.disabled||this.readOnly||(g("ie")||E.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&
this.clickSelect){E.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=m.position(this.sliderBarContainer,!0),f=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-f:f,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,f){if(!this.disabled&&!this.readOnly){var g=this.discreteValues;if(1>=g||Infinity==g)g=b;g--;this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*Math.round(a/
(b/g))/g+this.minimum,this.maximum),this.minimum),f)}},_setValueAttr:function(b,f){this._set("value",b);this.valueNode.value=b;this.focusNode.setAttribute("aria-valuenow",b);this.inherited(arguments);var g=this.maximum>this.minimum?(b-this.minimum)/(this.maximum-this.minimum):0,h=!1===this._descending?this.remainingBar:this.progressBar,m=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(f&&0<this.slideDuration&&
h.style[this._progressPixelSize]){var n=this,p={},t=parseFloat(h.style[this._progressPixelSize]),u=this.slideDuration*(g-t/100);0!=u&&(0>u&&(u=0-u),p[this._progressPixelSize]={start:t,end:100*g,units:"%"},this._inProgressAnim=a.animateProperty({node:h,duration:u,onAnimate:function(a){m.style[n._progressPixelSize]=100-parseFloat(a[n._progressPixelSize])+"%"},onEnd:function(){delete n._inProgressAnim},properties:p}),this._inProgressAnim.play())}else h.style[this._progressPixelSize]=100*g+"%",m.style[this._progressPixelSize]=
100*(1-g)+"%"},_bumpValue:function(a,b){if(!(this.disabled||this.readOnly||this.maximum<=this.minimum)){var f=h.getComputedStyle(this.sliderBarContainer),g=m.getContentBox(this.sliderBarContainer,f),f=this.discreteValues;if(1>=f||Infinity==f)f=g[this._pixelCount];f--;a=Math.round((this.value-this.minimum)*f/(this.maximum-this.minimum))+a;0>a&&(a=0);a>f&&(a=f);a=a*(this.maximum-this.minimum)/f+this.minimum;this._setValueAttr(a,b)}},_onClkBumper:function(a){this.disabled||this.readOnly||!this.clickSelect||
this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==p.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==p.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){this.focused&&(a.stopPropagation(),a.preventDefault(),this._bumpValue(0>a.wheelDelta?-1:1,!0))},
startup:function(){this._started||(B.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,f){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](f)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display=
"");var a=u('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id));this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(C.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),C.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(t(this.domNode,
b.wheel,x.hitch(this,"_mouseWheeled")));var a=w(K,{widget:this});this._movable=new f(this.sliderHandle,{mover:a});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});q._Mover=K;return q})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(B,w,q,a,m,h){a=B("dojo.dnd.move.constrainedMoveable",
h,{constraints:function(){},within:!1,constructor:function(a,h){h||(h={});this.constraints=h.constraints;this.within=h.within},onFirstMove:function(a){var h=this.constraintBox=this.constraints.call(this,a);h.r=h.l+h.w;h.b=h.t+h.h;this.within&&(a=w.getMarginSize(a.node),h.r-=a.w,h.b-=a.h)},onMove:function(a,h){var g=this.constraintBox,f=a.node.style;this.onMoving(a,h);h.l=h.l<g.l?g.l:g.r<h.l?g.r:h.l;h.t=h.t<g.t?g.t:g.b<h.t?g.b:h.t;f.left=h.l+"px";f.top=h.t+"px";this.onMoved(a,h)}});m=B("dojo.dnd.move.boxConstrainedMoveable",
a,{box:{},constructor:function(a,h){var g=h&&h.box;this.constraints=function(){return g}}});B=B("dojo.dnd.move.parentConstrainedMoveable",a,{area:"content",constructor:function(a,h){var g=h&&h.area;this.constraints=function(){var a=this.node.parentNode,h=q.getComputedStyle(a),m=w.getMarginBox(a,h);if("margin"==g)return m;var b=w.getMarginExtents(a,h);m.l+=b.l;m.t+=b.t;m.w-=b.w;m.h-=b.h;if("border"==g)return m;b=w.getBorderExtents(a,h);m.l+=b.l;m.t+=b.t;m.w-=b.w;m.h-=b.h;if("padding"==g)return m;b=
w.getPadExtents(a,h);m.l+=b.l;m.t+=b.t;m.w-=b.w;m.h-=b.h;return m}}});return{constrainedMoveable:a,boxConstrainedMoveable:m,parentConstrainedMoveable:B}})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(B,w,q,a,m,h){var p=h.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?
this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(q.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,g,f,h,m,b,p,w){if(m!=this._obj){this.stop();this._initialDelay=p||500;this._subsequentDelay=b||.9;this._minDelay=w||10;this._obj=m;this._node=f;this._count=this._currentTimeout=-1;this._callback=q.hitch(g,h);this._evt={faux:!0};for(var n in a)"layerX"!=n&&"layerY"!=n&&(g=a[n],"function"!=typeof g&&"undefined"!=
typeof g&&(this._evt[n]=g));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(h,g,f,m,u,b,t){var n="keyCode"in g?"keyCode":"charCode"in g?"charCode":"charOrCode",x=[a(h,"keyCode"in g?"keydown":"charCode"in g?"keypress":w._keypress,q.hitch(this,function(a){a[n]!=g[n]||void 0!==g.ctrlKey&&g.ctrlKey!=a.ctrlKey||void 0!==g.altKey&&g.altKey!=a.altKey||void 0!==
g.metaKey&&g.metaKey!=(a.metaKey||!1)||void 0!==g.shiftKey&&g.shiftKey!=a.shiftKey?p._obj==g&&p.stop():(a.stopPropagation(),a.preventDefault(),p.trigger(a,f,h,m,g,u,b,t))})),a(h,"keyup",q.hitch(this,function(){p._obj==g&&p.stop()}))];return{remove:function(){B.forEach(x,function(a){a.remove()})}}},addMouseListener:function(h,g,f,n,u,b){var t=[a(h,"mousedown",q.hitch(this,function(a){a.preventDefault();p.trigger(a,g,h,f,h,n,u,b)})),a(h,"mouseup",q.hitch(this,function(a){this._obj&&a.preventDefault();
p.stop()})),a(h,"mouseout",q.hitch(this,function(a){this._obj&&a.preventDefault();p.stop()})),a(h,"dblclick",q.hitch(this,function(a){a.preventDefault();9>m("ie")&&(p.trigger(a,g,h,f,h,n,u,b),setTimeout(q.hitch(this,p.stop),50))}))];return{remove:function(){B.forEach(t,function(a){a.remove()})}}},addListener:function(a,g,f,h,m,b,p,q){var n=[this.addKeyListener(g,f,h,m,b,p,q),this.addMouseListener(a,h,m,b,p,q)];return{remove:function(){B.forEach(n,function(a){a.remove()})}}}};return p})},"dijit/form/HorizontalRule":function(){define(["dojo/_base/declare",
"../_Widget","../_TemplatedMixin"],function(B,w,q){return B("dijit.form.HorizontalRule",[w,q],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',_genHTML:function(a){return this._positionPrefix+a+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){this.inherited(arguments);
var a;if(1==this.count)a=this._genHTML(50,0);else{var m,h=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){a=this._genHTML(0,0);for(m=1;m<this.count-1;m++)a+=this._genHTML(h*m,m);a+=this._genHTML(100,this.count-1)}else{a=this._genHTML(100,0);for(m=1;m<this.count-1;m++)a+=this._genHTML(100-h*m,m);a+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=a}})})},"dijit/form/HorizontalRuleLabels":function(){define("dojo/_base/declare dojo/has dojo/number dojo/query dojo/_base/lang ./HorizontalRule".split(" "),
function(B,w,q,a,m,h){B=B("dijit.form.HorizontalRuleLabels",h,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"\x3e',_suffix:"\x3c/div\x3e\x3c/div\x3e",
_calcPosition:function(a){return a},_genHTML:function(a,h){h=this.labels[h];return this._positionPrefix+this._calcPosition(a)+this._positionSuffix+this.labelStyle+this._genDirectionHTML(h)+this._labelPrefix+h+this._suffix},_genDirectionHTML:function(a){return""},getLabels:function(){var h=this.labels;!h.length&&this.srcNodeRef&&(h=a("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!h.length&&1<this.count)for(var h=[],m=this.minimum,g=(this.maximum-m)/(this.count-1),f=0;f<
this.count;f++)h.push(f<this.numericMargin||f>=this.count-this.numericMargin?"":q.format(m,this.constraints)),m+=g;return h},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}});w("dojo-bidi")&&B.extend({_setTextDirAttr:function(h){this.textDir!=h&&(this._set("textDir",h),a(".dijitRuleLabelContainer",this.domNode).forEach(m.hitch(this,function(a){a.style.direction=this.getTextDir(a.innerText||a.textContent||"")})))},_genDirectionHTML:function(a){return this.textDir?
"direction:"+this.getTextDir(a)+";":""}});return B})},"webSceneViewer/widgets/MenuContainer/MenuContainer":function(){define("esri/core/declare dojo/dom-class dojo/dom-construct dojo/on ../LayersLoading/LayersLoadingProgressBar ../LayersLoading/LayersLoadingViewModel esri/core/domUtils ../Tooltip/Tooltip".split(" "),function(B,w,q,a,m,h,p,x){return B(null,{name:"MenuContainer",baseClass:"MenuContainer",_expanded:!1,viewModel:null,activeMenuIndex:null,appState:null,constructor:function(a,f){this.viewModel=
a.viewModel;f=q.create("div",{"class":"MenuContainer vertical"},f);this.tabsContainer=q.create("div",{"class":"MenuTabsContainer"},f);this.tabsContainerShadow=q.create("div",{"class":"MenuTabsContainerShadowDiv"},this.tabsContainer);this.panesContainer=q.create("div",{"class":"MenuPanesContainer"},f);this.panes=[];this.viewModel.activeMainMenuIndex=this.activeMenuIndex=-1;this.viewModel.activeSubMenuIndex=null;this.appState=a.appState},add:function(g){var f=q.create("div",{"class":"tab inactive "+
(g.show?"":" hide")});q.create("div",{"class":g.id+"_icon"},f);(new x({connectId:f,label:g.tooltip?g.tooltip:g.title,position:["before"],showDelay:0,duration:0,hideDelay:0,appState:this.appState})).startup();this.tabsContainerShadow.appendChild(f);var n=this.panes.length;f.onclick=function(){this.viewModel.activeMainMenuIndex=this.viewModel.activeMainMenuIndex===n?-1:n;this.viewModel.activeSubMenuIndex=1!==this.viewModel.activeMainMenuIndex?null:this.viewModel.activeSubMenuIndex}.bind(this,g);var u=
q.create("div",{"class":"pane"},this.panesContainer),b=q.create("div",{"class":"paneShadow"},u),t=q.create("div",{"class":"paneHeader"},b);this.middleContainer=q.create("div",{"class":"paneContent"},b);q.create("div",{"class":"paneFooter"},b);g.layersLoadingProgressBar&&(this.layersLoadingProgressBar=new m({container:b,viewModel:new h({layerViews:this.appState.view.allLayerViews,allowedLayers:this.appState.view.map.allOperationalLikeLayers})}));b=q.create("div",{"class":"closeButtonContainer"},t);
q.create("div",{"class":"closeButton"},b);a(b,"click",function(){this.viewModel.activeMainMenuIndex=-1;this.viewModel.activeSubMenuIndex=null}.bind(this));b="paneTitle";g.hideTitle&&(b+=" hide");q.create("div",{"class":b,innerHTML:g.title},t);this.panes.push({tab:f,pane:u,config:g});p.hide(u);return this.middleContainer},setActive:function(a,f){if(!(f&&a===this.activeMenuIndex||!f&&a!==this.activeMenuIndex)){if(-1!==this.activeMenuIndex){var g=this.panes[this.activeMenuIndex];p.hide(g.pane);w.replace(g.tab,
"inactive","active");g.config.close&&g.config.close()}f&&-1!==a?(this.activeMenuIndex=a,a=this.panes[this.activeMenuIndex],p.show(a.pane),w.replace(a.tab,"active","inactive"),x.hide(a.tab),a.config.open&&a.config.open()):this.activeMenuIndex=-1}}})})},"webSceneViewer/widgets/LayersLoading/LayersLoadingProgressBar":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/widgets/BrowseItems/plugins/PluginConfigurableApps esri/core/accessorSupport/decorators esri/widgets/Widget esri/widgets/support/widget dojo/on esri/core/watchUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(m){function n(){var a=null!==m&&m.apply(this,arguments)||this;a._finishProgress=!1;return a}q(n,m);n.prototype.postInitialize=function(){var a=this;this.own(f.init(this,"loading",function(b){b?(a.showProgress=!0,a._finishProgress=!1):a._progressBar&&0===a._progressBar.offsetHeight&&0===a._progressBar.offsetWidth?a.showProgress=!1:a._progressBar&&"100%"===a._progressBar.style.width?a.showProgress=!1:a._finishProgress=!0}))};n.prototype.onAfterCreate=function(a){var b=
this;this._progressBar=a;this.own(g(a,"transitionend, webkitTransitionEnd",function(){b._finishProgress&&(b.showProgress=!1)}))};n.prototype.render=function(){var a,f="width: "+100*this.progress+"%";this.showProgress||(f="width: 0%");return x.tsx("div",null,x.tsx("div",{class:"layer-loading-progress-bar"},x.tsx("div",{style:f,class:this.classes("progress-bar",(a={},a["layer-loading-active"]=this.showProgress,a)),bind:this,afterCreate:this.onAfterCreate})))};a([h.property()],n.prototype,"viewModel",
void 0);a([h.aliasOf("viewModel.loading"),x.renderable()],n.prototype,"loading",void 0);a([h.aliasOf("viewModel.progress"),x.renderable()],n.prototype,"progress",void 0);a([h.property(),x.renderable()],n.prototype,"showProgress",void 0);return n=a([h.subclass("webSceneViewer.widgets.LayersLoading.LayersLoadingProgressBar")],n)}(h.declared(p))})},"webSceneViewer/widgets/LayersLoading/LayersLoadingViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators esri/core/Accessor esri/core/Handles esri/core/watchUtils esri/core/Collection ../../support/layerUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f){function n(a){var b=1;0!==a.length&&(b=a.filter(function(a){return!a.updating}).length/a.length);return b}function u(a){var b=0;0!==a.length&&(b=a.reduce(function(a,b){return b.updating?"updatingPercentage"in b?a+(100-b.updatingPercentage)/100:a+0:a+1},0)/a.length);return b}function b(a){var b=0;0!==a.length&&(b=a.reduce(function(a,b){return b.updating?void 0!==b.updatingPercentage?a+(100-b.updatingPercentage)/100:a+.2:a+1},0)/a.length,b=Math.max(b,.2));return b}return function(h){function t(a){var b=
h.call(this,a)||this;b.loading=!1;b.progress=0;b._handles=new p;b.method="adjusted-sum";x.init(b,"layerViews",function(a){b._allowedLayerViews=b._getAllowedLayerViews(a,b.allowedLayers);b._connect()});x.init(b,"allowedLayers",function(a){b._allowedLayerViews=b._getAllowedLayerViews(b.layerViews,a);b._connect()});return b}q(t,h);w=t;Object.defineProperty(t.prototype,"method",{set:function(a){this.method!==a&&(this._set("method",a),this._progressCalculationFunc=w._methods[a],this._updateLoading())},
enumerable:!0,configurable:!0});t.prototype._getAllowedLayerViews=function(a,b){a&&(a=a.filter(function(a){return a.layer.id?!f.isInternalLayer(a.layer):!0}),b&&(a=a.filter(function(a){return b.some(function(b){return a.layer===b})})));return a};t.prototype._connect=function(){var a=this;this._handles.removeAll();this._allowedLayerViews&&(this._allowedLayerViews.forEach(function(b){a._handles.add(x.init(b,["updating","updatingPercentage","updatingPercentageValue"],function(){a._updateLoading()}))}),
this._allowedLayerViews.forEach(function(b){a._handles.add(x.watch(b.layer,["visible","listMode"],function(){a._updateLoading()}))}),this.layerViews instanceof g&&this._handles.add(this.layerViews.on("change",function(b){if(b.added||b.removed||b.moved)a._allowedLayerViews=a._getAllowedLayerViews(a.layerViews,a.allowedLayers),a._connect()})),this.allowedLayers&&this._handles.add(this.allowedLayers.on("change",function(b){if(b.added||b.removed||b.moved)a._allowedLayerViews=a._getAllowedLayerViews(a.layerViews,
a.allowedLayers),a._connect()})),this._updateLoading())};t.prototype._updateLoading=function(){if(this._allowedLayerViews){var a=this._getListedLayerViews(this._allowedLayerViews),b=a.some(function(a){return a.updating});this.loading!==b&&this._set("loading",b);this._updateProgress(a)}else this.loading&&this._set("loading",!1)};t.prototype._getListedLayerViews=function(a){return a.filter(function(a){return!a.suspended&&"show"===a.layer.listMode&&a.layer.visible})};t.prototype._updateProgress=function(a){a=
this._progressCalculationFunc(a);this._set("progress",a)};var w;t._methods={"layer-count":n,sum:u,"adjusted-sum":b};a([m.property()],t.prototype,"method",null);a([m.property()],t.prototype,"layerViews",void 0);a([m.property()],t.prototype,"allowedLayers",void 0);a([m.property({readOnly:!0})],t.prototype,"loading",void 0);a([m.property({readOnly:!0})],t.prototype,"progress",void 0);return t=w=a([m.subclass("webSceneViewer.widgets.LayersLoading.LayersLoadingViewModel")],t)}(m.declared(h))})},"webSceneViewer/widgets/LayerWidget/LayerWidget":function(){define("esri/core/declare esri/core/watchUtils esri/core/scheduling dojo/dom-class dojo/dom-construct dijit/_WidgetBase ./LayerItem ../../support/layerUtils dojo/i18n!../nls/widgets".split(" "),
function(B,w,q,a,m,h,p,x,g){return B([h],{appState:void 0,layerItems:void 0,_eventHandlers:null,_layersChangeHandle:null,_initialCollapsedState:[],isReloading:!1,delayedReload:null,onReload:null,constructor:function(a,g){this.layerItems=[];this._eventHandlers=[]},destroy:function(){this._destroyEventHandlers();this._destroyAllLayerItems();this.delayedReload&&this.delayedReload.remove()},_destroyEventHandlers:function(){if(this._eventHandlers){for(var a=0;a<this._eventHandlers.length;a++){var g=this._eventHandlers[a];
g.remove();g=null}this._eventHandlers=[]}},postMixInProperties:function(){},postCreate:function(){this._init();this.startup()},_init:function(){w.whenOnce(this.appState.view,"ready",function(){a.add(this.domNode,"LayerWidget")}.bind(this));this.own(w.init(this.appState.view,"ready",this._viewReady.bind(this)))},_viewReady:function(a){this._layersChangeHandle&&(this._layersChangeHandle.remove(),this._layersChangeHandle=null);a&&(this._layersChangeHandle=this.appState.view.map.allOperationalLikeLayers.on("change",
this.reload.bind(this)));this.updateUIReload()},reload:function(){this.isReloading||(this.isReloading=!0,this.delayedReload=q.schedule(function(){this.updateUIReload();this.isReloading=!1}.bind(this)))},updateUIReload:function(){this._destroyEventHandlers();this._destroyAllLayerItems();this._setupAllLayerItems();if(this.onReload)this.onReload();this.emit("reloaded")},_destroyAllLayerItems:function(){for(var a=0;a<this.layerItems.length;a++)this.layerItems[a].destroy();this.layerItems.length=0;this.emptyListText&&
(this.domNode.removeChild(this.emptyListText),this.emptyListText=0)},_setupAllLayerItems:function(){if(this.appState.view.ready){for(var a=!1,h=this.appState.view.map.layers,p=h.length-1;0<=p;p--){var b=h.getItemAt(p);x.isInternalLayer(b)||(this._addLayerItem(b,h.length-p-1),a=!0)}a||(this.emptyListText=m.create("div",{"class":"noLayersLabel",innerHTML:g.layerItem.noLayers},this.domNode));0<this.appState.view.map.ground.layers.length&&this._addLayerItem(this.appState.view.map.ground,a?h.length:1)}},
_addLayerItem:function(a,g,h){a=this._createLayerItem(a);a.placeAt(h?h:this.domNode,g);this.layerItems.push(a)},_createLayerItem:function(a){return new p({appState:this.appState,layer:a,layerWidget:this})}})})},"webSceneViewer/widgets/LayerWidget/LayerItem":function(){define("esri/core/declare esri/core/has dojo/dom-construct dojo/dom-class dojo/on ../LayersLoading/LayersLoadingPulsingDot ../LayersLoading/LayersLoadingViewModel ../FeatureDisplayLimit/FeatureDisplayLimit ../FeatureDisplayLimit/FeatureDisplayLimitViewModel dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./templates/LayerItem.html dijit/form/RadioButton dijit/form/CheckBox esri/layers/GroupLayer esri/Ground esri/core/watchUtils ../../support/layerUtils ../../support/errorUtils dojo/i18n!../nls/widgets".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K){var y=B([f,n,u,b],{name:"LayerItem",templateString:t,appState:void 0,layer:void 0,hideLine:!1,isGround:!1,_setLayerAttr:function(b){this._set("layer",b);b&&b instanceof C?(this.isGroupLayer=!0,this.domNode&&a.add(this.domNode,"GroupLayerItem")):b instanceof A&&(this.isGround=!0,this.domNode&&a.add(this.domNode,"GroupLayerItem GroundGroup"))},parentGroup:void 0,parentLayerItem:void 0,layerTitle:void 0,_setLayerTitleAttr:function(a){this._set("layerTitle",
a);this.titleNode&&(this.titleNode.textContent=a,this.titleNode.title=a)},layerVisible:void 0,_setLayerVisibleAttr:function(a){this._set("layerVisible",a);this._layerVisDijitButton&&this._layerVisDijitButton.get("checked")!==a&&this._layerVisDijitButton.set("checked",a,!1)},layerWidget:void 0,isGroupLayer:!1,layerItems:void 0,constructor:function(a,b){this.layerItems=[];this._i18n=K;h;x},postMixInProperties:function(){},_showGround:function(){if(0<this.appState.view.map.ground.layers.length)for(var a=
0;a<this.appState.view.map.ground.layers.length;a++)if("hide"!==this.appState.view.map.ground.layers.getItemAt(a).listMode)return!0;return!1},postCreate:function(){this.isGround?("LayerItem"!==this.name||this._showGround()||a.add(this.LayerItem,"hide"),a.add(this.LayerItem,"ground"),this.set("layerTitle",K.layerItem.ground),this.hideLine||q.create("hr",{},this.LayerItem,0)):(a.add(this.domNode,"disable"),this.set("layerTitle",this.layer.title||this.layer.id));this.own(this.layer.watch("title",function(a){this.set("layerTitle",
this.layer.title)}.bind(this)));this.own(F.init(this.layer,"visible",function(a){this.set("layerVisible",a)}.bind(this)));void 0!==this.parentGroup&&"hide"!==this.layer.listMode||a.add(this.domNode,this.layer.listMode);var b=K.layerItem.showHide,b=w("mac")?b+(" "+K.layerItem.showHideShortcutMac):b+(" "+K.layerItem.showHideShortcut);this._layerVisDijitButton=this.parentGroup&&"exclusive"===this.parentGroup.visibilityMode?new D({name:this.parentGroup.id+"_radiogroup_"+this.id,checked:this.layerVisible},
this.layerVisInputCheckbox):new E({checked:this.layerVisible,title:b},this.layerVisInputCheckbox);this.own(m(this._layerVisDijitButton,"click",this._layerVisInputCheckboxChange.bind(this)));this.own(this.layer.watch("visibilityMode",function(a){this.layerWidget.reload()}.bind(this)));this.own(this.layer.watch("listMode",function(a){this.layerWidget.reload()}.bind(this)));this.isGround||this.appState.view.whenLayerView(this.layer).then(function(b){this.layerLoading&&(this.layerLoading.viewModel=new p({layerViews:[b]}));
this.featureDisplayLimit&&"displayLimitExceeded"in b&&(this.featureDisplayLimit.viewModel=new g({layerView:b}));a.remove(this.domNode,"disable")}.bind(this)).catch(function(b){a.add(this.LayerItem,"error");a.remove(this.domNode,"disable");this.LayerItem.title=Q.layerAddError(this.layer,b,this.appState.view,!1).message;this.titleNode&&(this.titleNode.title=Q.layerAddError(this.layer,b,this.appState.view,!1).message);this._layerVisDijitButton&&this._layerVisDijitButton.domNode.firstChild.removeAttribute("title")}.bind(this));
this._init()},_addLayerItem:function(a,b){a=new y({appState:this.appState,layer:a,layerWidget:this.layerWidget,parentGroup:this.layer,parentLayerItem:this});a.placeAt(this.layersDomNode,b);this.layerItems.push(a)},_init:function(){if(this.isGroupLayer||this.isGround)"hide-children"!==this.layer.listMode?this._initGroupLayerItems():this.isGroupLayer&&this.own(F.on(this.layer,"layers","change",function(a){this.layerWidget.reload()}.bind(this)));var b=function(){this.layer.fullExtent&&a.remove(this.layerFrameButton,
"inactive")}.bind(this);this.layer.loaded||this.layer instanceof C||this.isGround?b():this.layer.when(function(){b()});this.layerFrameButton.title=K.layerItemEditable.zoomToLayer},_initGroupLayerItems:function(){if(this.isGroupLayer||this.isGround){var b=q.create("div",{className:"layersContainer"});this.domNode.appendChild(b);this.layersDomNode=q.create("div",{className:"layers"});b.appendChild(this.layersDomNode);q.create("div",{className:"layersLine"},this.layersDomNode);for(b=this.layer.layers.get("length")-
1;0<=b;b--){var f=this.layer.layers.getItemAt(b);this._addLayerItem(f)}0===this.layer.layers.get("length")&&(a.add(this.layersDomNode,"emptyPlaceholder"),q.create("div",{"class":"emptyPlaceholderText",innerHTML:this.isGround?"+ "+K.layerItemEditable.addDefaultElevation:K.layerItemEditable.dragHere},this.layersDomNode),this.isGround&&m(this.layersDomNode,"click",function(){this._resetDefaultGround()}.bind(this)));this.own(F.on(this.layer,"layers","change",function(a){this.layerWidget.reload()}.bind(this)))}},
_resetDefaultGround:function(){H.resetInteractiveDefaultGround(this.appState).then(function(){this.appState.view.map.hasUnsavedChanges=!0}.bind(this))},destroy:function(){this.layerItems.forEach(function(a){a.destroy()});this.layerItems.length=0;this._layerVisDijitButton.destroy();q.empty(this.domNode);q.destroy(this.domNode)},_layerVisInputCheckboxChange:function(a){var b=this._layerVisDijitButton.checked,f=this.layer.parent instanceof C&&"exclusive"===this.layer.parent.visibilityMode;!a.metaKey&&
!a.ctrlKey||f?this.layer.visible=b:this._toggleMultipleLayerVisibility(b,this.layer.parent.layers.items);b&&this.layer.parent instanceof C&&!this.layer.parent.visible&&(this.layer.parent.visible=!0)},_toggleMultipleLayerVisibility:function(a,b){for(var f=0;f<b.length;f++)b[f].visible=a},_layerFrameButtonClick:function(){H.goToInteractive(this.appState,this.layer)},_layerFrameButtonDoubleClick:function(){H.goToInteractive(this.appState,this.layer,!0)}});return y})},"webSceneViewer/widgets/LayersLoading/LayersLoadingPulsingDot":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/widgets/BrowseItems/plugins/PluginConfigurableApps esri/core/accessorSupport/decorators esri/widgets/Widget esri/widgets/support/widget dojo/on esri/core/watchUtils".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return function(m){function n(){var a=null!==m&&m.apply(this,arguments)||this;a._finishLoading=!1;return a}q(n,m);n.prototype.postInitialize=function(){var a=this;f.init(this,"loading",function(b){b?(a.showLoading=!0,a._finishLoading=!1):a._dot&&0===a._dot.offsetHeight&&0===a._dot.offsetWidth?a.showLoading=!1:a._finishLoading=!0})};n.prototype.onAfterCreate=function(a){var b=this;this._dot=a;this.own(g(a,"animationiteration, webkitAnimationIteration",function(){b._finishLoading&&
(b.showLoading=!1)}))};n.prototype.render=function(){var a;return x.tsx("div",{class:this.classes("layer-loading",(a={},a["layer-loading-dot"]=this.showLoading,a["layer-loading-dot-fade-out"]=!this.showLoading,a)),bind:this,afterCreate:this.onAfterCreate})};a([h.property()],n.prototype,"viewModel",void 0);a([h.aliasOf("viewModel.loading")],n.prototype,"loading",void 0);a([h.property(),x.renderable()],n.prototype,"showLoading",void 0);a([h.property()],n.prototype,"dojoAttachPoint",void 0);a([h.property()],
n.prototype,"template",void 0);return n=a([h.subclass("webSceneViewer.widgets.LayersLoading.LayersLoadingPulsingDot")],n)}(h.declared(p))})},"webSceneViewer/widgets/FeatureDisplayLimit/FeatureDisplayLimit":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/widgets/BrowseItems/plugins/PluginConfigurableApps esri/core/accessorSupport/decorators esri/widgets/Widget esri/widgets/support/widget".split(" "),function(B,w,q,a,m,h,p,x){return function(g){function f(){return null!==
g&&g.apply(this,arguments)||this}q(f,g);f.prototype.startup=function(){};f.prototype.render=function(){var a;return x.tsx("div",null,x.tsx("span",{class:this.classes("feature-display-limit esri-icon-notice-triangle",(a={},a["feature-display-limit--hide"]=!this.displayLimitExceeded,a))}))};a([h.property()],f.prototype,"viewModel",void 0);a([h.aliasOf("viewModel.displayLimitExceeded"),x.renderable()],f.prototype,"displayLimitExceeded",void 0);a([h.property()],f.prototype,"dojoAttachPoint",void 0);a([h.property()],
f.prototype,"template",void 0);return f=a([h.subclass("webSceneViewer.widgets.FeatureDisplayLimit.FeatureDisplayLimit")],f)}(h.declared(p))})},"webSceneViewer/widgets/FeatureDisplayLimit/FeatureDisplayLimitViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators esri/core/Accessor".split(" "),function(B,w,q,a,m,h){return function(h){function p(){return null!==h&&h.apply(this,arguments)||this}q(p,
h);a([m.property()],p.prototype,"layerView",void 0);a([m.aliasOf("layerView.displayLimitExceeded")],p.prototype,"displayLimitExceeded",void 0);return p=a([m.subclass("webSceneViewer.widgets.FeatureDisplayLimit.FeatureDisplayLimitViewModel")],p)}(m.declared(h))})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(B,w,q){return B("dijit.form.RadioButton",[w,q],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(B,w,q,a,m,h){return w("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var p=[];m("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(a.hitch(this,function(a){a.name==this.name&&a.form==this.focusNode.form&&(a=h.getEnclosingWidget(a))&&p.push(a)}));return p},_setCheckedAttr:function(h){this.inherited(arguments);this._created&&h&&B.forEach(this._getRelatedWidgets(),a.hitch(this,function(a){a!=this&&a.checked&&a.set("checked",!1)}))},_getSubmitValue:function(a){return null==
a?"on":a},_onClick:function(h){if(this.checked||this.disabled)return h.stopPropagation(),h.preventDefault(),!1;if(this.readOnly)return h.stopPropagation(),h.preventDefault(),B.forEach(this._getRelatedWidgets(),a.hitch(this,function(a){q.set(this.focusNode||this.domNode,"checked",a.checked)})),!1;var m=!1,g;B.some(this._getRelatedWidgets(),function(a){return a.checked?(g=a,!0):!1});this.checked=!0;g&&(g.checked=!1);if(!1===this.onClick(h)||h.defaultPrevented)m=!0;this.checked=!1;g&&(g.checked=!0);
m?h.preventDefault():this.set("checked",!0);return!m}})})},"webSceneViewer/widgets/EnvironmentSettings/EnvironmentSettings":function(){define("esri/core/declare esri/core/has dojo/_base/kernel dojo/dom-class dojo/dom dojo/on dojo/dom-construct dojo/query dojo/_base/window dojo/dom-style dojo/_base/lang dojo/aspect dojo/date dijit/form/HorizontalSlider dijit/form/HorizontalRuleLabels dijit/form/HorizontalRule dijit/form/CheckBox dijit/form/FilteringSelect dijit/InlineEditBox dijit/form/DateTextBox dijit/Tooltip dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/core/watchUtils ./environmentSettingsUtils dojo/i18n!../nls/widgets dojo/text!./templates/EnvironmentSettings.html".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I,M,N,P,S){return B([K,y,I],{templateString:S,viewModel:null,_i18n:P,_yearPlaying:!1,_dayPlaying:!1,_timezoneOffset:null,_onMonthChangedHandler:null,constructor:function(a,b){},postCreate:function(){M.whenOnce(this.viewModel.view,"ready",function(){this.createWidget()}.bind(this))},startup:function(){this.inherited(arguments)},_sliderChange:function(a){this.viewModel.lightingDateSliderPos=a},_stopPlaying:function(){this.viewModel.dayPlaying=this.viewModel.yearPlaying=
!1},_gmtSelectChange:function(a){a=parseInt(a,10);this.viewModel.dayPlaying=!1;this.viewModel.yearPlaying=!1;this.viewModel.lightingUTCOffset=parseInt(a,10)},_sliderTooltipChange:function(a){this.viewModel.lightingDateString=a;this.viewModel.dayPlaying=!1;this.viewModel.yearPlaying=!1;this.viewModel.enableShadowsOnFirstInteraction&&(this.viewModel.directShadowsEnabled=!0,this.viewModel.enableShadowsOnFirstInteraction=!1)},_datePickerChange:function(a){void 0!==a&&(this.viewModel.dayPlaying=!1,this.viewModel.lightingDateLocalDate=
a)},_directShadowChange:function(a){this.viewModel.directShadowsEnabled=a},_updateTimeSliderFieldPosition:function(){var b=f.getComputedStyle(this.sliderTooltipInlineEdit.domNode).width.replace("px",""),b=this.timeSlider.value/24*190-("auto"===b?45:b)/2+30;a.contains(g.doc.body.parentNode,"esriRtl")?this.sliderTooltipInlineEditContainer.setAttribute("style","right: "+b+"px;"):this.sliderTooltipInlineEditContainer.setAttribute("style","left: "+b+"px;")},_createWatchHandlers:function(){M.init(this.viewModel,
"lightingDateSliderPos",function(a){a!==this.timeSlider.value&&(this.timeSlider._lastReportedValue=a,this.timeSlider.set("value",a),this._updateTimeSliderFieldPosition())}.bind(this));M.init(this.viewModel,"lightingDateString",function(a){a!==this.sliderTooltipInlineEdit.value&&(this.sliderTooltipInlineEdit.value=a,this.sliderTooltipInlineEdit.displayNode.innerHTML=a)}.bind(this));M.init(this.viewModel,"lightingDateLocalDate",function(a){this.datePicker.set("value",a)}.bind(this));M.init(this.viewModel,
"lightingUTCOffset",function(a){a=""+a;a!==this.gmtSelect.value&&(this.gmtSelect._lastReportedValue=a,this.gmtSelect.set("value",a))}.bind(this));M.init(this.viewModel,"directShadowsAvailable",function(a){a?(this.directShadowButton.set("disabled",!1),this.directShadowButton.domNode.title=P.environmentSettings.directShadow,this.directShadowButtonLabel.title=P.environmentSettings.directShadow):(this.directShadowButton.set("disabled",!0),this.directShadowButton.domNode.title=P.environmentSettings.notSupportedInHW,
this.directShadowButtonLabel.title=P.environmentSettings.notSupportedInHW)}.bind(this));M.init(this.viewModel,"directShadowsEnabled",function(b){this.directShadowButton.set("checked",b);b?a.add(this.timeSlider.domNode,"shadow"):a.remove(this.timeSlider.domNode,"shadow")}.bind(this));M.init(this.viewModel,"dayPlaying",function(b){b?(a.remove(this.playDay,"play"),a.add(this.playYear,"play"),this.playDay.title=P.environmentSettings.pause,this.playYear.title=P.environmentSettings.playYear):(a.add(this.playDay,
"play"),this.playDay.title=this._getPlayDayTooltip())}.bind(this));M.init(this.viewModel,"yearPlaying",function(b){b?(a.remove(this.playYear,"play"),a.add(this.playDay,"play"),this.playYear.title=P.environmentSettings.pause,this.playDay.title=this._getPlayDayTooltip()):(a.add(this.playYear,"play"),this.playYear.title=P.environmentSettings.playYear)}.bind(this));h(g.doc,"keydown",function(a){69===(a.charCode||a.keyCode)&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),this._playDay())}.bind(this));u.after(this.datePicker,
"openDropDown",n.hitch(this,"_calendarOpened"),!0)},_calendarOpened:function(a){this.viewModel.yearPlaying=!1;this.viewModel.dayPlaying=!1;this._onMonthChangedHandler&&this._onMonthChangedHandler.remove();this._onMonthChangedHandler=u.after(this.datePicker.dropDown,"_onMonthSelect",n.hitch(this,"_monthChanged"),!0)},_monthChanged:function(a){a=parseInt(a,10);var f=this.datePicker.value;f.setMonth(a);if(f.getMonth()!==a){var g=new Date(f);g.setDate(1);g.setMonth(a);g=b.getDaysInMonth(g);f.setDate(g);
f.setMonth(a)}this.datePicker.set("value",f)},_playYear:function(){this.viewModel.dayPlaying=!1;this.viewModel.yearPlaying=!this.viewModel.yearPlaying},_playDay:function(){this.viewModel.yearPlaying=!1;this.viewModel.dayPlaying=!this.viewModel.dayPlaying},_getPlayDayTooltip:function(){return w("mac")?P.environmentSettings.playDay+" "+P.environmentSettings.playDayKeyShortcutMac:P.environmentSettings.playDay+" "+P.environmentSettings.playDayKeyShortcut},createWidget:function(){this.playDay.title=this._getPlayDayTooltip();
this.own(h(document.body,"click",function(a){if(this.viewModel.dayPlaying||this.viewModel.yearPlaying)a=a.target?a.target:a.srcElement,m.isDescendant(a,this.playDay)||m.isDescendant(a,this.playYear)||this.viewModel.view.interacting||(this.viewModel.dayPlaying=!1,this.viewModel.yearPlaying=!1)}.bind(this)));N.canParseLocaleDate(q.locale)||(this.sliderTooltipInlineEdit.disabled=!0);a.add(this.gmtSelect._popupStateNode,"GMTSelectPopupMenu");this.gmtSelect.store=N.getGMTOffsets();this.gmtSelect.textbox.readOnly=
!0;f.set(this.gmtSelect.textbox,"cursor","pointer");this.gmtSelect.textbox.onclick=function(){this.gmtSelect.loadDropDown()}.bind(this);this._createWatchHandlers();var b=x(".dijitSliderDecorationB",this.timeSlider.domNode);if(1===b.length){var n=N.getTimeSliderLabelArray(q.locale).map(this.styleTimeLabel),t=p.create("div");b[0].appendChild(t);new D({container:"bottomDecoration",style:"font-size: 10px; width: 190px;",labels:n},t);x(".envSunHorizontalSlider .dijitRuleLabel").on("click",function(a){a=
a.target?a.target:a.srcElement;"AmPmLabel"===a.className&&(a=a.parentNode);a=a.getAttribute("time");this.viewModel.lightingDateLabelString=a}.bind(this))}x(".envSunHorizontalSlider .dijitRuleMark.dijitRuleMarkH").on("click",function(b){b=(b.target?b.target:b.srcElement).getAttribute("style");b=b.replace(";","");b=b.replace("left:","");b=b.replace("%","");a.contains(g.doc.body.parentNode,"esriRtl")&&(b=100-b);b=Math.round(b/100*24)+"";this.viewModel.lightingDateLabelString="24"===b?"23:59":b}.bind(this))},
styleTimeLabel:function(a){var b=a.label;0<b.search(/(AM|PM)/)&&(b=b.replace(/[^ -~]/g,""),b=b.replace(" AM",'\x3cbr\x3e\x3cdiv class\x3d"AmPmLabel"\x3eAM\x3c/div\x3e'),b=b.replace(" PM",'\x3cbr\x3e\x3cdiv class\x3d"AmPmLabel"\x3ePM\x3c/div\x3e'),b=b.replace(":00",""));return b='\x3cdiv time\x3d"'+a.value+'"\x3e'+b+"\x3c/div\x3e"}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(B,w,q,a,m){return B("dijit.form.FilteringSelect",
[a,m],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(a,m,q,g){m&&m[this.searchAttr]!==this._lastQuery||!m&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery||(a.length?this.set("item",a[0],g):this.set("value","",g||void 0===g&&!this.focused,this.textbox.value,null))},_openResultList:function(a,
m,q){m[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(a,m,x,g){this._onChangeActive||(m=null);if(void 0===g){if(null===a||""===a)if(a="",!w.isString(x)){this._setDisplayedValueAttr(x||"",m);return}var f=this;this._lastQuery=a;q(this.store.get(a),function(a){f._callbackSetLabel(a?[a]:[],void 0,void 0,m)})}else this.valueNode.value=
a,this.inherited(arguments,[a,m,x,g])},_setItemAttr:function(a,m,q){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(a,m){null==a&&(a="");if(!this._created){if(!("displayedValue"in this.params))return;m=!1}if(this.store){this.closeDropDown();var h=w.clone(this.query),g=this._getDisplayQueryString(a),f;this.store._oldAPI?f=g:(f=this._patternToRegExp(g),f.toString=function(){return g});
this._lastQuery=h[this.searchAttr]=f;this._lastDisplayedValue=this.textbox.value=a;this._set("displayedValue",a);var n=this,p={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};w.mixin(p,this.fetchProperties);this._fetchHandle=this.store.query(h,p);q(this._fetchHandle,function(a){n._fetchHandle=null;n._callbackSetLabel(a||[],h,p,m)},function(a){n._fetchHandle=null;n._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},
"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(B,w,q,a){return B("dijit.form.MappedTextBox",a,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return null!=a?"string"==typeof a?a:this.serialize(a,this.constraints):""},validate:function(){this.valueNode.value=
this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=q.place("\x3cinput type\x3d'hidden'"+(this.name?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(B,w,q,a,m,h,p,x,g){return B("dijit.form.ComboBoxMixin",[x,h],{dropDownClass:p,hasDownArrow:!0,templateString:g,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(f){f.get||a.mixin(f,{_oldAPI:!0,get:function(a){var f=new w;this.fetchItemByIdentity({identity:a,
onItem:function(a){f.resolve(a)},onError:function(a){f.reject(a)}});return f.promise},query:function(f,g){var b=new w(function(){h.abort&&h.abort()});b.total=new w;var h=this.fetch(a.mixin({query:f,onBegin:function(a){b.total.resolve(a)},onComplete:function(a){b.resolve(a)},onError:function(a){b.reject(a)}},g));return m(b)}});this._set("store",f)},postMixInProperties:function(){var f=this.params.store||this.store;f&&this._setStoreAttr(f);this.inherited(arguments);if(!this.params.store&&this.store&&
!this.store._oldAPI){var g=this.declaredClass;a.mixin(this.store,{getValue:function(a,b){q.deprecated(g+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[b]},getLabel:function(a){q.deprecated(g+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(f){q.deprecated(g+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],
a.hitch(this,function(a){(new a({objectStore:this})).fetch(f)}))}})}},buildRendering:function(){this.inherited(arguments);this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(B,w,q){var a=function(m){function h(h){m[h]=function(){var g=arguments,f=q(m,function(f){Array.prototype.unshift.call(g,f);return a(B[h].apply(B,g))});if("forEach"!==h||p)return f}}
if(!m)return m;var p=!!m.then;p&&(m=w.delegate(m));h("forEach");h("filter");h("map");null==m.total&&(m.total=q(m,function(a){return a.length}));return m};w.setObject("dojo.store.util.QueryResults",a);return a})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(B,w,q,a,m,h,p,x,g,f,n){w=w("dijit.form._AutoCompleterMixin",n,{item:null,
autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(x("ie")){var f=a.ownerDocument.selection.createRange().duplicate();a=a.createTextRange();f.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",f),b=String(a.text).replace(/\r/g,"").length}catch(D){}}return b},_setCaretPos:function(a,b){b=parseInt(b);f.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);
this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(f){if(!(32<=f.charCode)){var b=f.charCode||f.keyCode;if(b!=a.ALT&&b!=a.CTRL&&b!=a.META&&b!=a.SHIFT){var g=this.dropDown,h=null;this._abortQuery();this.inherited(arguments);if(!(f.altKey||f.ctrlKey||f.metaKey))switch(this._opened&&(h=g.getHighlightedOption()),b){case a.PAGE_DOWN:case a.DOWN_ARROW:case a.PAGE_UP:case a.UP_ARROW:this._opened&&this._announceOption(h);f.stopPropagation();f.preventDefault();break;case a.ENTER:if(h){if(h==
g.nextButton){this._nextSearch(1);f.stopPropagation();f.preventDefault();break}else if(h==g.previousButton){this._nextSearch(-1);f.stopPropagation();f.preventDefault();break}f.stopPropagation();f.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case a.TAB:b=this.get("displayedValue");if(g&&(b==g._messages.previousMessage||b==g._messages.nextMessage))break;h&&this._selectOption(h);case a.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},
_autoCompleteText:function(a){var b=this.focusNode;f.selectInputText(b,b.value.length);var g=this.ignoreCase?"toLowerCase":"substr";0==a[g](0).indexOf(this.focusNode.value[g](0))?(g=this.autoComplete?this._getCaretPos(b):b.value.length,g+1>b.value.length&&(b.value=a,f.selectInputText(b,g))):(b.value=a,f.selectInputText(b))},_openResultList:function(a,b,f){var g=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();a.length||0!=f.start?(this._nextSearch=this.dropDown.onPage=m.hitch(this,
function(b){a.nextPage(-1!==b);this.focus()}),this.dropDown.createOptions(a,f,m.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in f?(f.direction?this.dropDown.highlightFirstOption():f.direction||this.dropDown.highlightLastOption(),g&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(b[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},
_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;!b||a!=b._messages.previousMessage&&a!=b._messages.nextMessage?"undefined"==typeof this.item?
(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,f){var g="";a&&(f||(f=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),g=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):f);this.set("value",g,b,f,a)},_announceOption:function(a){if(a){var b;
if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var f=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(f,this.searchAttr):f[this.searchAttr]).toString();this.set("item",f,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",q.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&
this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (m.isString(this.dropDownClass)?m.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:m.hitch(this,
this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef&&(this.store=new g({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=h('label[for\x3d"'+
this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",a[0].id));this.inherited(arguments);B.after(this,"onSearch",m.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var f=(this.ignoreCase?"i":"")+("all"==
this.highlightMatch?"g":""),g=this.queryExpr.indexOf("${0}");b=p.escapeString(b);return this._escapeHtml(a.replace(new RegExp((0==g?"^":"")+"("+b+")"+(g==this.queryExpr.length-4?"$":""),f),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=null;this.inherited(arguments)},
labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,f,g){this._set("item",g||null);null==a&&(a="");this.inherited(arguments)}});x("dojo-bidi")&&w.extend({_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}});return w})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),
function(B,w,q,a,m,h){function p(a){return{id:a.value,value:a.value,name:q.trim(a.innerText||a.textContent||"")}}return B("dijit.form.DataList",m,{constructor:function(m,g){this.domNode=w.byId(g);q.mixin(this,m);this.id&&h.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:a("option",this.domNode).map(p)}])},destroy:function(){h.remove(this.id)},fetchSelectedItem:function(){var h=a("\x3e option[selected]",this.domNode)[0]||a("\x3e option",this.domNode)[0];return h&&p(h)}})})},
"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(B,w,q){return B("dojo.store.Memory",null,{constructor:function(a){for(var m in a)this[m]=a[m];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:q,get:function(a){return this.data[this.index[a]]},getIdentity:function(a){return a[this.idProperty]},put:function(a,m){var h=this.data,p=this.index,q=this.idProperty,q=a[q]=m&&"id"in m?m.id:q in a?a[q]:Math.random();
if(q in p){if(m&&!1===m.overwrite)throw Error("Object already exists");h[p[q]]=a}else p[q]=h.push(a)-1;return q},add:function(a,m){(m=m||{}).overwrite=!1;return this.put(a,m)},remove:function(a){var m=this.index,h=this.data;if(a in m)return h.splice(m[a],1),this.setData(h),!0},query:function(a,m){return w(this.queryEngine(a,m)(this.data))},setData:function(a){a.items?(this.idProperty=a.identifier||this.idProperty,a=this.data=a.items):this.data=a;this.index={};for(var m=0,h=a.length;m<h;m++)this.index[a[m][this.idProperty]]=
m}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(B){return function(w,q){function a(a){a=B.filter(a,w);var h=q&&q.sort;h&&a.sort("function"==typeof h?h:function(a,f){for(var g,m=0;g=h[m];m++){var b=a[g.attribute],p=f[g.attribute],b=null!=b?b.valueOf():b,p=null!=p?p.valueOf():p;if(b!=p)return!!g.descending==(null==b||b>p)?-1:1}return 0});if(q&&(q.start||q.count)){var m=a.length;a=a.slice(q.start||0,(q.start||0)+(q.count||Infinity));a.total=m}return a}switch(typeof w){default:throw Error("Can not query with a "+
typeof w);case "object":case "undefined":var m=w;w=function(a){for(var h in m){var q=m[h];if(q&&q.test){if(!q.test(a[h],a))return!1}else if(q!=a[h])return!1}return!0};break;case "string":if(!this[w])throw Error("No filter function "+w+" was found in store");w=this[w];case "function":}a.matches=w;return a}})},"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),function(B,w,q,a,m,h,p){return B("dijit.form._SearchMixin",
null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(a){this._set("list",a)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return new RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,f,h,m){return h?".*":m?".":f?f:"\\"+a})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());
this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&!this.readOnly){a=a.charOrCode;this._prev_key_backspace=!1;if(a==w.DELETE||a==w.BACKSPACE)this._maskValidSubsetError=this._prev_key_backspace=!0;if(this.store)this.searchTimer=this.defer("_startSearchFromInput",
1);else this.onSearch()}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(a){this._abortQuery();var g=this,f=q.clone(this.query),n={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},p=m.substitute(this.queryExpr,[a.replace(/([\\\*\?])/g,"\\$1")]),b,t=function(){var a=g._fetchHandle=g.store.query(f,n);g.disabled||g.readOnly||b!==g._lastQuery||h(a,function(m){g._fetchHandle=null;g.disabled||g.readOnly||
b!==g._lastQuery||h(a.total,function(a){m.total=a;var b=g.pageSize;if(isNaN(b)||b>m.total)b=m.total;m.nextPage=function(a){n.direction=a=!1!==a;n.count=b;a?(n.start+=m.length,n.start>=m.total&&(n.count=0)):(n.start-=b,0>n.start&&(n.count=Math.max(b+n.start,0),n.start=0));0>=n.count?(m.length=0,g.onSearch(m,f,n)):t()};g.onSearch(m,f,n)})},function(a){g._fetchHandle=null;g._cancelingQuery||console.error(g.declaredClass+" "+a.toString())})};q.mixin(n,this.fetchProperties);this.store._oldAPI?b=p:(b=this._patternToRegExp(p),
b.toString=function(){return p});this._lastQuery=f[this.searchAttr]=b;this._queryDeferHandle=this.defer(t,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var a=this.list;a&&(this.store=p.byId(a))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(B,
w,q,a,m,h,p,x){return B("dijit.form._ComboBoxMenu",[m,h,x,p],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",baseClass:"dijitComboBoxMenu",
postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(w.add(this.previousButton,"dijitMenuItemRtl"),w.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");a.setAttribute("role","option");return a},onHover:function(a){w.add(a,"dijitMenuItemHover")},onUnhover:function(a){w.remove(a,"dijitMenuItemHover")},
onSelect:function(a){w.add(a,"dijitMenuItemSelected")},onDeselect:function(a){w.remove(a,"dijitMenuItemSelected")},_page:function(a){var f=0,g=this.domNode.scrollTop,h=q.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();f<h;){var b=this.getHighlightedOption();if(a){if(!b.previousSibling||"none"==b.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!b.nextSibling||"none"==b.nextSibling.style.display)break;this.selectNextNode()}b=this.domNode.scrollTop;
f+=(b-g)*(a?-1:1);g=b}},handleKey:function(g){switch(g.keyCode){case a.DOWN_ARROW:return this.selectNextNode(),!1;case a.PAGE_DOWN:return this._page(!1),!1;case a.UP_ARROW:return this.selectPreviousNode(),!1;case a.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(B,w,q,a,m){var h=w("dijit.form._ComboBoxMenuMixin"+(a("dojo-bidi")?
"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=m.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(a){this._set("value",a);this.onChange(a)},onClick:function(a){if(a==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(a==this.nextButton)this._setSelectedAttr(null),
this.onPage(1);else this.onChange(a)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(a,h){var g=this._createMenuItem();a=h(a);a.html?g.innerHTML=a.label:g.appendChild(g.ownerDocument.createTextNode(a.label));""==g.innerHTML&&(g.innerHTML="\x26#160;");return g},createOptions:function(a,h,g){this.items=a;this.previousButton.style.display=0==h.start?"none":"";q.set(this.previousButton,"id",this.id+"_prev");B.forEach(a,function(a,f){a=
this._createOption(a,g);a.setAttribute("item",f);q.set(a,"id",this.id+f);this.nextButton.parentNode.insertBefore(a,this.nextButton)},this);var f=!1;a.total&&!a.total.then&&-1!=a.total?h.start+h.count<a.total?f=!0:h.start+h.count>a.total&&h.count==a.length&&(f=!0):h.count==a.length&&(f=!0);this.nextButton.style.display=f?"":"none";q.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var a=this.containerNode;2<a.childNodes.length;)a.removeChild(a.childNodes[a.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});a("dojo-bidi")&&(h=w("dijit.form._ComboBoxMenuMixin",
h,{_createOption:function(){var a=this.inherited(arguments);this.applyTextDir(a);return a}}));return h})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(B,w,q,a){return B("dijit.form._ListMouseMixin",a,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover",
"_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(a,h){this._setSelectedAttr(h,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(h)})},_onMouseDown:function(a,h){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(h,!1)},_onMouseUp:function(a,h){this._isDragging=!1;var m=this.selected,q=this._hoveredNode;m&&h==m?this.defer(function(){this._onClick(a,
m)}):q&&this.defer(function(){this._onClick(a,q)})},_onMouseOut:function(a,h){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(a,h){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=h;this.onHover(h);this._isDragging&&this._setSelectedAttr(h,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on",
"dojo/window"],function(B,w,q){return B("dijit.form._ListBase",null,{selected:null,_listConnect:function(a,m){var h=this;return h.own(w(h.containerNode,w.selector(function(a,h,g){return a.parentNode==g},a),function(a){h[m](a,this)}))},selectFirstNode:function(){for(var a=this.containerNode.firstChild;a&&"none"==a.style.display;)a=a.nextSibling;this._setSelectedAttr(a,!0)},selectLastNode:function(){for(var a=this.containerNode.lastChild;a&&"none"==a.style.display;)a=a.previousSibling;this._setSelectedAttr(a,
!0)},selectNextNode:function(){var a=this.selected;if(a){for(a=a.nextSibling;a&&"none"==a.style.display;)a=a.nextSibling;a?this._setSelectedAttr(a,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var a=this.selected;if(a){for(a=a.previousSibling;a&&"none"==a.style.display;)a=a.previousSibling;a?this._setSelectedAttr(a,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(a,m){if(this.selected!=a){var h=this.selected;if(h)this.onDeselect(h);
a&&(m&&q.scrollIntoView(a),this.onSelect(a));this._set("selected",a)}else if(a)this.onSelect(a)}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I,M){F=a("dijit._InlineEditor",[A,F,H],{templateString:M,contextRequire:B,postMixInProperties:function(){this.inherited(arguments);this.messages=g.getLocalization("dijit","common",this.lang);w.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var a="string"==typeof this.editor?u.getObject(this.editor)||B(this.editor):this.editor,b=this.sourceStyle,
f="line-height:"+b.lineHeight+";",g=x.getComputedStyle(this.domNode);w.forEach(["Weight","Family","Size","Style"],function(a){g["font"+a]!=b["font"+a]&&(f+="font-"+a+":"+b["font"+a]+";")},this);w.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(a){this.domNode.style[a]=b[a]},this);var h=this.inlineEditBox.width;"100%"==h?(f+="width:100%;",this.domNode.style.display="block"):f+="width:"+(h+(Number(h)==h?"px":""))+";";h=u.delegate(this.inlineEditBox.editorParams,
{style:f,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new a(h,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,p.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var a=this.editWidget;this.inlineEditBox.autoSave?this.own(q.after(a,"onChange",u.hitch(this,"_onChange"),!0),b(a,"keydown",u.hitch(this,"_onKeyDown"))):"intermediateChanges"in a&&(a.set("intermediateChanges",
!0),this.own(q.after(a,"onChange",u.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a||"_getDisplayedValueAttr"in a?"displayedValue":
"value"))},_onKeyDown:function(a){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!a.altKey&&!a.ctrlKey&&(a.keyCode==n.ESCAPE?(a.stopPropagation(),a.preventDefault(),this.cancel(!0)):a.keyCode==n.ENTER&&"INPUT"==a.target.tagName&&(a.stopPropagation(),a.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&C.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(C._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){y.selectInputText(this.editWidget.focusNode)}))}});A=a("dijit.InlineEditBox"+(t("dojo-bidi")?"_NoBidi":""),A,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:I,editorWrapper:F,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=t("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(b(this.displayNode,E,u.hitch(this,"_onClick")),b(this.displayNode,"mouseover, focus",u.hitch(this,"_onMouseOver")),b(this.displayNode,"mouseout, blur",u.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=u.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);h.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(a){f.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.domNode.setAttribute("aria-disabled",a?"true":"false");a?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);h.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",a);this._set("disabled",a)},_onMouseOver:function(){this.disabled||h.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){h.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(a){this.disabled||(a&&(a.stopPropagation(),a.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
m.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var a=p.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?u.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:x.getComputedStyle(this.displayNode),save:u.hitch(this,"save"),cancel:u.hitch(this,"cancel"),
textDir:this.textDir},a);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var b=this.wrapperWidget;h.add(this.displayNode,"dijitOffScreen");h.remove(b.domNode,"dijitOffScreen");x.set(b.domNode,{visibility:"visible"});m.set(this.displayNode,"tabIndex","-1");var f=b.editWidget,g=this;D(f.onLoadDeferred,u.hitch(b,function(){f.set("displayedValue"in f||"_setDisplayedValueAttr"in f?"displayedValue":"value",g.value);this.defer(function(){b.saveButton&&b.saveButton.set("disabled",
"intermediateChanges"in f);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(a){var b=this.wrapperWidget;x.set(b.domNode,{visibility:"hidden"});h.add(b.domNode,"dijitOffScreen");h.remove(this.displayNode,"dijitOffScreen");m.set(this.displayNode,"tabIndex",this._savedTabIndex);a&&
C.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this._set("editing",!1);var b=this.wrapperWidget.getValue();this.set("value",b);this._showText(a)}},setValue:function(a){f.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(a){a=u.trim(a);var b=this.renderAsHtml?a:a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":b||this.noValueIndicator;this._set("value",a);this._started&&this.defer(function(){this.onChange(a)})},getValue:function(){f.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(a){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(a))}});t("dojo-bidi")&&(A=a("dijit.InlineEditBox",
A,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));A._InlineEditor=F;return A})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(B,w,q){return B("dijit.form.DateTextBox",q,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:w,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C){var A=a("dijit.Calendar",[b,t,D],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){x.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new A._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:f.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(n(this.domNode,"keydown",f.hitch(this,"_onKeyDown")),n(this.dateRowsNode,"mouseover",f.hitch(this,"_onDayMouseOver")),n(this.dateRowsNode,"mouseout",f.hitch(this,"_onDayMouseOut")),n(this.dateRowsNode,"mousedown",f.hitch(this,"_onDayMouseDown")),n(this.dateRowsNode,"mouseup",f.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var f=this.currentFocus.getDate();b.setDate(Math.min(f,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=h.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(h.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||
a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",h.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),h.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate")&&(h.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&h.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,f,h=this.currentFocus;switch(a.keyCode){case g.RIGHT_ARROW:b=1;case g.LEFT_ARROW:f="day";this.isLeftToRight()||(b*=-1);break;case g.DOWN_ARROW:b=1;case g.UP_ARROW:f="week";break;case g.PAGE_DOWN:b=1;case g.PAGE_UP:f=a.ctrlKey||a.altKey?"year":"month";break;case g.END:h=this.dateModule.add(h,"month",1),f="day";case g.HOME:h=new this.dateClassObj(h);h.setDate(1);break;default:return!0}f&&(h=this.dateModule.add(h,f,b));this._setCurrentFocusAttr(h);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});A._MonthDropDownButton=a("dijit.Calendar._MonthDropDownButton",C,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new A._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==u("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});A._MonthDropDown=a("dijit.Calendar._MonthDropDown",[t,E,D],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";B.forEach(a,function(a,b){p.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(m.get(a.target,"month"))},onChange:function(){}});return A})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E){var C=w("dijit.CalendarLite",[t,D],{templateString:E,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=
new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=h.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){if(a||
0===a)a=new this.dateClassObj(a),a.setHours(1,0,0,0);return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),f=this.dateModule.getDaysInMonth(a),h=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),n=new this.dateClassObj,p=0<=this.dayOffset?this.dayOffset:q.getFirstDayOfWeek(this.lang);p>
b&&(p-=7);if(!this.summary){var t=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",t[a.getMonth()])}this._date2cell={};B.forEach(this.dateCells,function(t,q){var u=q+p,y=new this.dateClassObj(a),x="dijitCalendar",A=0;u<b?(u=h-b+u+1,A=-1,x+="Previous"):u>=b+f?(u=u-b-f+1,A=1,x+="Next"):(u=u-b+1,x+="Current");A&&(y=this.dateModule.add(y,"month",A));y.setDate(u);this.dateModule.compare(y,n,"date")||(x="dijitCalendarCurrentDate "+x);this.isDisabledDate(y,
this.lang)?(x="dijitCalendarDisabledDate "+x,t.setAttribute("aria-disabled","true")):(x="dijitCalendarEnabledDate "+x,t.removeAttribute("aria-disabled"),t.setAttribute("aria-selected","false"));(A=this.getClassForDate(y,this.lang))&&(x=A+" "+x);t.className=x+"Month dijitCalendarDateTemplate";x=y.valueOf();this._date2cell[x]=t;t.dijitDateValue=x;x=y.getDateLocalized?y.getDateLocalized(this.lang):y.getDate();this._setText(this.dateLabels[q],x);g.set(t,"aria-label",m.format(y,{selector:"date",formatLength:"long"}))},
this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,f=new this.dateClassObj;B.forEach(["previous","current","next"],function(a){f.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(f,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(b){this.dateModule=b.datePackage?f.getObject(b.datePackage,
!1):a;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?f.getObject(b.datePackage+".locale",!1):m},_createMonthWidget:function(){return C._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,f=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),g=0<=this.dayOffset?this.dayOffset:q.getFirstDayOfWeek(this.lang);this.dayCellsHtml=b.substitute([a,
a,a,a,a,a,a].join(""),{d:""},function(){return f[g++%7]});a=b.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);p.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=f.hitch(this,function(a,
b,g){this[a].dojoClick=!0;return n(this[a],"click",f.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,g))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var f=this.currentFocus,g=this._getNodeByDate(f);a=this._patchDate(a);this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(f,a,"month")||(this._populateGrid(),
this._populateControls(),this._markSelectedDates([this.value]));a=this._getNodeByDate(a);a.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&a.focus();g&&g!=a&&(u("webkit")?g.setAttribute("tabIndex","-1"):g.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue&&0!==a.dijitDateValue;a=a.parentNode);a&&!x.contains(a,"dijitCalendarDisabledDate")&&this.set("value",
a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,b){x.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}B.forEach(this._selectedCells||[],f.partial(b,!1));this._selectedCells=B.filter(B.map(a,this._getNodeByDate,this),function(a){return a});B.forEach(this._selectedCells,f.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});
C._MonthWidget=w("dijit.CalendarLite._MonthWidget",t,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),f=6==u("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+B.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=f+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return C})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),
function(B,w,q,a,m,h,p,x,g,f){return B("dijit.form.DropDownButton",[p,x,g],{baseClass:"dijitDropDownButton",templateString:f,_fillContent:function(){var a=this.srcNodeRef,f=this.containerNode;if(a&&f)for(;a.hasChildNodes();){var b=a.firstChild;b.hasAttribute&&(b.hasAttribute("data-dojo-type")||b.hasAttribute("dojoType")||b.hasAttribute("data-"+w._scopeName+"-type")||b.hasAttribute(w._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(b)):
f.appendChild(b)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=m.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&h.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var f=this.dropDown,b=f.on("load",q.hitch(this,function(){b.remove();a()}));f.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},
"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(B,w,q,a,m,h,p,x){new Date("X");return a("dijit.form._DateTimeTextBox",[h,p],{templateString:x,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:w.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type",
"text")},compare:function(a,f){var g=this._isInvalidDate(a),h=this._isInvalidDate(f);if(g||h)return g&&h?0:g?-1:1;a=this.format(a,this._unboundedConstraints);f=this.format(f,this._unboundedConstraints);g=this.parse(a,this._unboundedConstraints);h=this.parse(f,this._unboundedConstraints);return a==f?0:B.compare(g,h,this._selector)},autoWidth:!0,format:function(a,f){return a?this.dateLocaleModule.format(a,f):""},parse:function(a,f){return this.dateLocaleModule.parse(a,f)||(this._isEmpty(a)?null:void 0)},
serialize:function(a,f){a.toGregorian&&(a=a.toGregorian());return q.toISOString(a,f)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){a=a||{};this.dateModule=a.datePackage?m.getObject(a.datePackage,!1):B;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=a.datePackage?m.getObject(a.datePackage+".locale",!1):w;this._set("pattern",this.dateLocaleModule.regexp);
this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector;a.fullYear=!0;var f=q.fromISOString;"string"==typeof a.min&&(a.min=f(a.min),this.dateClassObj instanceof Date||(a.min=new this.dateClassObj(a.min)));"string"==typeof a.max&&
(a.max=f(a.max),this.dateClassObj instanceof Date||(a.max=new this.dateClassObj(a.max)));this.inherited(arguments);this._unboundedConstraints=m.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,f,h){void 0!==a&&("string"==typeof a&&(a=q.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));this.inherited(arguments,
[a,f,h]);this.value instanceof Date&&(this.filterString="");!1!==f&&this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,f){if("value"==a){f instanceof Date&&!(this.dateClassObj instanceof Date)&&(f=new this.dateClassObj(f));var g=this._get("value");if(g instanceof this.dateClassObj&&0==this.compare(f,g))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&
this.dropDown.destroy();var f=m.isString(this.popupClass)?m.getObject(this.popupClass,!1):this.popupClass,g=this,h=this.get("value");this.dropDown=new f({onChange:function(a){g.set("value",a,!0)},id:this.id+"_popup",dir:g.dir,lang:g.lang,value:h,textDir:g.textDir,currentFocus:this._isInvalidDate(h)?this.dropDownDefaultValue:h,constraints:g.constraints,filterString:g.filterString,datePackage:g.datePackage,isDisabledDate:function(a){return!g.rangeCheck(a,g.constraints)}});this.inherited(arguments)},
_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,f){this._setValueAttr(this.parse(a,this.constraints),f,a)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(B,w,q){return B("dijit.form.RangeBoundTextBox",q,{rangeMessage:"",rangeCheck:function(a,m){return("min"in m?0<=this.compare(a,m.min):!0)&&("max"in m?0>=this.compare(a,m.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),
this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value");if(null==a)return!1;var m=!1;"min"in this.constraints&&(m=this.constraints.min,m=0>this.compare(a,"number"==typeof m&&0<=m&&0!=a?0:m));!m&&"max"in this.constraints&&(m=this.constraints.max,m=0<this.compare(a,"number"!=typeof m||0<m?m:0));return m},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&
!this.required||this.isInRange(a))},getErrorMessage:function(a){var m=this.get("value");return null==m||""===m||"number"==typeof m&&isNaN(m)||this.isInRange(a)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=w.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"webSceneViewer/widgets/EnvironmentSettings/environmentSettingsUtils":function(){define("require exports dojo/date/locale dojo/store/Memory esri/views/3d/lib/SunCalc dojo/i18n!webSceneViewer/widgets/nls/widgets".split(" "),
function(B,w,q,a,m,h){function p(a,f){f=new Date(f);f.setUTCFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate());return f}function x(a,f){a=new Date(a.getTime());a.setUTCHours(a.getUTCHours()+f);return a}function g(a,f,g){a:{u[f]||(u[f]=[{locale:f,formatLength:"short",selector:"time"},{locale:f,timePattern:"h a",selector:"time"},{locale:f,timePattern:"H:m",selector:"time"},{locale:f,timePattern:"H",selector:"time"},{locale:"en",formatLength:"short",selector:"time"},{locale:"en",timePattern:"h a",
selector:"time"},{locale:"en",timePattern:"H:m",selector:"time"},{locale:"en",timePattern:"H",selector:"time"}]);f=u[f];for(var b=0;b<f.length;++b){var h=q.parse(g,f[b]);if(h){g=h;f=g.getHours();b=g.getMinutes();g=1E3*g.getSeconds()+6E4*b+36E5*f;break a}}g=NaN}return p(a,g)}function f(a,f){var b=new Date(f.getTime());b.setHours(f.getUTCHours());b.setMinutes(f.getUTCMinutes());b.setSeconds(f.getUTCSeconds());b.setMilliseconds(f.getUTCMilliseconds());return q.format(b,{locale:a,selector:"time"})}Object.defineProperty(w,
"__esModule",{value:!0});var n=/^(\d{1,2})(?:[:.](\d{1,2}))?(?:[:.](\d{1,2}))?\s*([AP]M)?/i;w.parseDateStr=function(a){a=a.match(n);if(!a)return null;var b=a[4]?a[4].toLowerCase():null;if(a[1])var f=parseInt(a[1],10),b="am"===b?f%12:"pm"===b?f%12+12:f%24;else b=0;f=a[2]?parseInt(a[2],10):0;return 1E3*(a[3]?parseInt(a[3],10):0)+6E4*f+36E5*b};var u={};w.makeTime=p;w.makeDate=function(a,f){a=new Date(a.getTime());a.setUTCFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate());return a};w.roundDate=
function(a,f){return new Date(Math.round(a.getTime()/f)*f)};w.dateAddHours=x;w.timeStringToDateTime=g;w.sliderPosToDateTime=function(a,f){return p(a,36E5*f)};w.localDateToDateTime=function(a,f){a=new Date(a.getTime());a.setUTCFullYear(f.getFullYear(),f.getMonth(),f.getDate());return a};w.dateTimeToTimeString=f;w.dateTimeToSliderPos=function(a){var b=a.getUTCHours(),f=a.getUTCMinutes(),g=a.getUTCSeconds();a=a.getUTCMilliseconds();return b+f/60+g/3600+a/36E5};w.dateTimeToLocalDate=function(a){var b=
new Date(0);b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);b.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate());return b};w.canParseLocaleDate=function(a){var b=new Date(1970,1,1,12,30),h=f(a,b);a=g(b,a,h);return b.getTime()===a.getTime()};w.getGMTOffsets=function(b){return new a({idProperty:"abbr",data:[{name:"UTC-12",abbr:"-12",label:"UTC-12\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneDateline+"\x3c/div\x3e"},{name:"UTC-11",abbr:"-11",label:"UTC-11\x3cbr/\x3e\x3cdiv\x3e"+
h.environmentSettings.timezoneSamoa+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneHAST,abbr:"-10",label:"UTC-10 ("+h.environmentSettings.timezoneHAST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneHawaii+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneAKST,abbr:"-9",label:"UTC-9 ("+h.environmentSettings.timezoneAKST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAlaska+"\x3c/div\x3e"},{name:h.environmentSettings.timezonePST,abbr:"-8",label:"UTC-8 ("+h.environmentSettings.timezonePST+
")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBaja+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneMST,abbr:"-7",label:"UTC-7 ("+h.environmentSettings.timezoneMST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneMountain+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneMST,abbr:"-7",label:"UTC-7 ("+h.environmentSettings.timezoneMST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneLaPaz+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneMST,abbr:"-7",label:"UTC-7 ("+
h.environmentSettings.timezoneMST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneArizona+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCST,abbr:"-6",label:"UTC-6 ("+h.environmentSettings.timezoneCST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneSaskatchewan+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCST,abbr:"-6",label:"UTC-6 ("+h.environmentSettings.timezoneCST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneCentralAmerica+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCST,
abbr:"-6",label:"UTC-6 ("+h.environmentSettings.timezoneCST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneCentralTime+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCST,abbr:"-6",label:"UTC-6 ("+h.environmentSettings.timezoneCST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneMexico+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEST,abbr:"-5",label:"UTC-5 ("+h.environmentSettings.timezoneEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneEasternUS+"\x3c/div\x3e"},
{name:h.environmentSettings.timezoneEST,abbr:"-5",label:"UTC-5 ("+h.environmentSettings.timezoneEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneLima+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEST,abbr:"-5",label:"UTC-5 ("+h.environmentSettings.timezoneEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneIndiana+"\x3c/div\x3e"},{name:"UTC-4",abbr:"-4",label:"UTC-4\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAtlantic+"\x3c/div\x3e"},{name:"UTC-4",abbr:"-4",label:"UTC-4\x3cbr/\x3e\x3cdiv\x3e"+
h.environmentSettings.timezoneCuiaba+"\x3c/div\x3e"},{name:"UTC-4",abbr:"-4",label:"UTC-4\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneSantiago+"\x3c/div\x3e"},{name:"UTC-4",abbr:"-4",label:"UTC-4\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneManaus+"\x3c/div\x3e"},{name:"UTC-4",abbr:"-4",label:"UTC-4\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAsuncion+"\x3c/div\x3e"},{name:"UTC-3",abbr:"-3",label:"UTC-3\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBrasilia+"\x3c/div\x3e"},
{name:"UTC-3",abbr:"-3",label:"UTC-3\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneGreenland+"\x3c/div\x3e"},{name:"UTC-3",abbr:"-3",label:"UTC-3\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneMontevideo+"\x3c/div\x3e"},{name:"UTC-3",abbr:"-3",label:"UTC-3\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneCayenne+"\x3c/div\x3e"},{name:"UTC-3",abbr:"-3",label:"UTC-3\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBuenosAires+"\x3c/div\x3e"},{name:"UTC-2",abbr:"-2",label:"UTC-2\x3cbr/\x3e\x3cdiv\x3e"+
h.environmentSettings.timezoneMidAtlantic+"\x3c/div\x3e"},{name:"UTC-1",abbr:"-1",label:"UTC-1\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAzores+"\x3c/div\x3e"},{name:"UTC-1",abbr:"-1",label:"UTC-1\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneCaboVerde+"\x3c/div\x3e"},{name:"GMT",abbr:"0",label:"UTC (GMT)\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneDublin+"\x3c/div\x3e"},{name:"GMT",abbr:"0",label:"UTC (GMT)\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneReykjavik+
"\x3c/div\x3e"},{name:"GMT",abbr:"0",label:"UTC (GMT)\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneCasablanca+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCET,abbr:"1",label:"UTC+1 ("+h.environmentSettings.timezoneCET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBelgrade+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCET,abbr:"1",label:"UTC+1 ("+h.environmentSettings.timezoneCET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneSarajevo+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCET,
abbr:"1",label:"UTC+1 ("+h.environmentSettings.timezoneCET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBrussels+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCET,abbr:"1",label:"UTC+1 ("+h.environmentSettings.timezoneCET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneWCAfrica+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCET,abbr:"1",label:"UTC+1 ("+h.environmentSettings.timezoneCET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAmsterdam+"\x3c/div\x3e"},
{name:h.environmentSettings.timezoneCET,abbr:"1",label:"UTC+1 ("+h.environmentSettings.timezoneCET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneWindhoek+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneMinsk+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneCairo+
"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneHelsinki+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAthens+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneJerusalem+
"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAmman+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBeirut+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneHarare+
"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneDamascus+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneEET,abbr:"2",label:"UTC+2 ("+h.environmentSettings.timezoneEET+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneIstanbul+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneMSK,abbr:"3",label:"UTC+3 ("+h.environmentSettings.timezoneMSK+")\x3cbr/\x3e\x3cdiv\x3e"+
h.environmentSettings.timezoneKuwait+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneMSK,abbr:"3",label:"UTC+3 ("+h.environmentSettings.timezoneMSK+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBaghdad+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneMSK,abbr:"3",label:"UTC+3 ("+h.environmentSettings.timezoneMSK+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneNairobi+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneMSK,abbr:"3",label:"UTC+3 ("+h.environmentSettings.timezoneMSK+
")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneKaliningrad+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneGST,abbr:"4",label:"UTC+4 ("+h.environmentSettings.timezoneGST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneMoscow+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneGST,abbr:"4",label:"UTC+4 ("+h.environmentSettings.timezoneGST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneMuscat+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneGST,abbr:"4",label:"UTC+4 ("+
h.environmentSettings.timezoneGST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBaku+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneGST,abbr:"4",label:"UTC+4 ("+h.environmentSettings.timezoneGST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneYerevan+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneGST,abbr:"4",label:"UTC+4 ("+h.environmentSettings.timezoneGST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneTbilisi+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneGST,
abbr:"4",label:"UTC+4 ("+h.environmentSettings.timezoneGST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezonePortLouis+"\x3c/div\x3e"},{name:"UTC+5",abbr:"5",label:"UTC+5\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneTashkent+"\x3c/div\x3e"},{name:"UTC+5",abbr:"5",label:"UTC+5\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneIslamabad+"\x3c/div\x3e"},{name:"UTC+6",abbr:"6",label:"UTC+6\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneEkaterinburg+"\x3c/div\x3e"},{name:"UTC+6",
abbr:"6",label:"UTC+6\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAstana+"\x3c/div\x3e"},{name:"UTC+6",abbr:"6",label:"UTC+6\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneDhaka+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneICT,abbr:"7",label:"UTC+7 ("+h.environmentSettings.timezoneICT+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneNovosibirsk+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneICT,abbr:"7",label:"UTC+7 ("+h.environmentSettings.timezoneICT+")\x3cbr/\x3e\x3cdiv\x3e"+
h.environmentSettings.timezoneBangkok+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCCT,abbr:"8",label:"UTC+8 ("+h.environmentSettings.timezoneCCT+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneKrasnoyarsk+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCCT,abbr:"8",label:"UTC+8 ("+h.environmentSettings.timezoneCCT+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBeijing+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCCT,abbr:"8",label:"UTC+8 ("+h.environmentSettings.timezoneCCT+
")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneSingapore+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCCT,abbr:"8",label:"UTC+8 ("+h.environmentSettings.timezoneCCT+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneTaipei+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCCT,abbr:"8",label:"UTC+8 ("+h.environmentSettings.timezoneCCT+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezonePerth+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneCCT,abbr:"8",label:"UTC+8 ("+
h.environmentSettings.timezoneCCT+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneUlaanbaatar+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneJST,abbr:"9",label:"UTC+9 ("+h.environmentSettings.timezoneJST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneIrkutsk+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneJST,abbr:"9",label:"UTC+9 ("+h.environmentSettings.timezoneJST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneSeoul+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneJST,
abbr:"9",label:"UTC+9 ("+h.environmentSettings.timezoneJST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneOsaka+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneAEST,abbr:"10",label:"UTC+10 ("+h.environmentSettings.timezoneAEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneYakutsk+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneAEST,abbr:"10",label:"UTC+10 ("+h.environmentSettings.timezoneAEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneCanberra+"\x3c/div\x3e"},
{name:h.environmentSettings.timezoneAEST,abbr:"10",label:"UTC+10 ("+h.environmentSettings.timezoneAEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneBrisbane+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneAEST,abbr:"10",label:"UTC+10 ("+h.environmentSettings.timezoneAEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneHobart+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneAEST,abbr:"10",label:"UTC+10 ("+h.environmentSettings.timezoneAEST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneGuam+
"\x3c/div\x3e"},{name:"UTC+11",abbr:"11",label:"UTC+11\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneVladivostok+"\x3c/div\x3e"},{name:"UTC+11",abbr:"11",label:"UTC+11\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneSolomon+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneNZST,abbr:"12",label:"UTC+12 ("+h.environmentSettings.timezoneNZST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneMagadan+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneNZST,abbr:"12",label:"UTC+12 ("+
h.environmentSettings.timezoneNZST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneFiji+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneNZST,abbr:"12",label:"UTC+12 ("+h.environmentSettings.timezoneNZST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneAuckland+"\x3c/div\x3e"},{name:h.environmentSettings.timezoneNZST,abbr:"12",label:"UTC+12 ("+h.environmentSettings.timezoneNZST+")\x3cbr/\x3e\x3cdiv\x3e"+h.environmentSettings.timezoneNukualofa+"\x3c/div\x3e"}]})};w.getTimeSliderLabelArray=
function(a){return[{label:f(a,new Date(Date.UTC(2E3,1,1,0,0))),value:"0:00"},{label:f(a,new Date(Date.UTC(2E3,1,1,6,0))),value:"6:00"},{label:f(a,new Date(Date.UTC(2E3,1,1,12,0))),value:"12:00"},{label:f(a,new Date(Date.UTC(2E3,1,1,18,0))),value:"18:00"},{label:f(a,new Date(Date.UTC(2E3,1,1,24,0))),value:"23:59"}]};w.calculatePlaySpeed=function(a,f,g){if(isNaN(a.getTime())&&isNaN(f.getTime()))return 3E5;g=g.getTime();a=a.getTime();f=f.getTime();var b=a-36E5,h=a+36E5,m=f-48E5,n=f+24E5,p=3E5;if(g>=
b&&g<=h)p=12E5>=g-b?18E5-(g-b)/12E5*16E5:6E5>=h-g?3E5-(h-g)/12E5*2E5:2E5;else if(g>=m&&g<=n)p=6E5>=g-m?3E5-(g-m)/12E5*2E5:12E5>=n-g?18E5-(n-g)/12E5*16E5:2E5;else if(g<a||g>f)p=18E5;return p};w.getSunriseAndSunsetTimes=function(a,f,g,h){g=m.getTimes(a,f,g);f=g.sunrise;g=g.sunset;a=x(a,h);var b=x(f,h);h=x(g,h);if(a.getUTCDate()!==b.getUTCDate()||a.getUTCDate()!==h.getUTCDate())h=0<a.getTime()-b.getTime()?1:-1,f.setUTCDate(f.getUTCDate()+h),g.setUTCDate(g.getUTCDate()+h);return{sunrise:f,sunset:g}}})},
"webSceneViewer/widgets/EnvironmentSettings/EnvironmentSettingsViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators esri/core/Accessor esri/core/Evented esri/core/scheduling dojo/_base/kernel ./environmentSettingsUtils esri/core/watchUtils esri/core/Handles esri/views/3d/support/earthUtils".split(" "),function(B,w,q,a,m,h,p,x,g,f,n,u,b){return function(h){function p(a){a=h.call(this)||this;a._handles=
new u;a.lightingUpdateInterval=200;a.cachedLightingDateUTC=new Date(0);a.cachedDisplayUTCOffset=0;a.enableShadowsOnFirstInteraction=!0;a._lastLightingUpdate=0;a._nextLightingUpdate=null;a.dayPlaying=!1;return a}q(p,h);p.prototype.initialize=function(){var a=this;this._handles.add(n.init(this,"view",function(){return a.view.when(function(){return a._updateLighting(null)})}));this._handles.add(n.on(this,"view.environment.lighting","date-will-change",function(b){a._scheduleUpdateLighting(b.date)}));
var b=function(b){var f=a.get("view.environment.lighting");if(f){if(b)b=b.timezoneOffset;else{if(null!=f.displayUTCOffset)return;b=f._calculateTimezoneOffset(f.positionTimezoneInfo)}f.displayUTCOffset=b;a._scheduleUpdateLighting(null)}};this._handles.add(n.on(this,"view.environment.lighting","timezone-will-change",b,b.bind(this,null)));this._handles.add(n.init(this,"view.stationary",function(){(a.dayPlaying||a.yearPlaying)&&a._updateSunriseAndSunset()}))};p.prototype.destroy=function(){this._handles.destroy();
this._handles=null;this._nextLightingUpdate&&(clearTimeout(this._nextLightingUpdate),this._nextLightingUpdate=null);this.view=null};Object.defineProperty(p.prototype,"lightingDateDisplay",{get:function(){return f.dateAddHours(this.cachedLightingDateUTC,this.cachedDisplayUTCOffset)},set:function(a){a=f.dateAddHours(a,-this.cachedDisplayUTCOffset);a.getTime()!==this.view.environment.lighting.date.getTime()&&(this.view.environment.lighting.date=a,this._updateLighting(null))},enumerable:!0,configurable:!0});
Object.defineProperty(p.prototype,"lightingUTCOffset",{get:function(){return this.cachedDisplayUTCOffset},set:function(a){a!==this.lightingUTCOffset&&(this.view.environment.lighting.displayUTCOffset=a,this._updateLighting(null))},enumerable:!0,configurable:!0});p.prototype.timezoneFromCamera=function(a){a=b.positionToTimezone(a.camera.position);return Math.round(a.hours+a.minutes/60+a.seconds/3600)};Object.defineProperty(p.prototype,"lightingDateLocalDate",{get:function(){return f.dateTimeToLocalDate(this.lightingDateDisplay)},
set:function(a){a.getTime()!==this.lightingDateLocalDate.getTime()&&(this.lightingDateDisplay=f.localDateToDateTime(this.lightingDateDisplay,a))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"lightingDateString",{get:function(){return f.dateTimeToTimeString(g.locale,this.lightingDateDisplay)},set:function(a){a!==this.lightingDateString&&(this.lightingDateDisplay=f.timeStringToDateTime(this.lightingDateDisplay,g.locale,a))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"lightingDateLabelString",{set:function(a){a!==this.lightingDateString&&(this.lightingDateDisplay=f.timeStringToDateTime(this.lightingDateDisplay,g.locale,a),this.enableShadowsOnFirstInteraction&&(this.directShadowsEnabled=!0,this.enableShadowsOnFirstInteraction=!1))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"lightingDateSliderPos",{get:function(){return f.dateTimeToSliderPos(this.lightingDateDisplay)},set:function(a){a!==this.lightingDateSliderPos&&(a=f.sliderPosToDateTime(this.lightingDateDisplay,
a),this.lightingDateDisplay=f.roundDate(a,3E5),this.yearPlaying=this.dayPlaying=!1,this.enableShadowsOnFirstInteraction&&(this.directShadowsEnabled=!0,this.enableShadowsOnFirstInteraction=!1))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"directShadowsAvailable",{get:function(){return void 0!==this.view._stage.getRenderParams().shadowMap},enumerable:!0,configurable:!0});p.prototype._updateLighting=function(a){this._lastLightingUpdate=Date.now();if(this.get("view.environment")){a=
a||this.view.environment.lighting.date;var b=this.view.environment.lighting.displayUTCOffset,b=null!==b?b:this.timezoneFromCamera(this.view);this.cachedLightingDateUTC.getTime()!==a.getTime()&&(this.cachedLightingDateUTC=new Date(a.getTime()));this.cachedDisplayUTCOffset!==b&&(this.cachedDisplayUTCOffset=b)}};p.prototype._scheduleUpdateLighting=function(a){var b=this;if(!this._nextLightingUpdate){var f=Date.now()-this._lastLightingUpdate,f=this.lightingUpdateInterval-f;0>=f?x.schedule(function(){return b._updateLighting(a)}):
this._nextLightingUpdate=setTimeout(function(){b._updateLighting(null);b._nextLightingUpdate=null},f)}};p.prototype._play=function(){var a=this,b=this.view;if(b.environment&&(this.dayPlaying||this.yearPlaying)){var g=(new Date).getTime()-this._lastTime;if(this.dayPlaying){if(this._lastTime=(new Date).getTime(),g*=f.calculatePlaySpeed(this._sunrise,this._sunset,b.environment.lighting.date)/100,0<g){var h=new Date(b.environment.lighting.date.getTime()+g),m=((h.getUTCHours()+b.environment.lighting.displayUTCOffset)%
24+24)%24,n=((b.environment.lighting.date.getUTCHours()+b.environment.lighting.displayUTCOffset)%24+24)%24;m<n&&(h=new Date(b.environment.lighting.date.getTime()+g-864E5));b.environment.lighting.date=h}}else 1E3<g&&(this._lastTime=(new Date).getTime(),g=(b.environment.lighting.date.getUTCMonth()+1)%12,h=new Date(b.environment.lighting.date.getTime()),h.setUTCMonth(g),b.environment.lighting.date=h);requestAnimationFrame(function(){return a._play()})}};p.prototype._updateSunriseAndSunset=function(){var a=
f.getSunriseAndSunsetTimes(this.view.environment.lighting.date,this.view.camera.position.latitude,this.view.camera.position.longitude,this.view.environment.lighting.displayUTCOffset);this._sunrise=new Date(a.sunrise);this._sunset=new Date(a.sunset)};Object.defineProperty(p.prototype,"dayPlaying",{get:function(){return this._get("dayPlaying")},set:function(a){this.dayPlaying!==a&&(this._set("dayPlaying",a),a&&(this._updateSunriseAndSunset(),this._lastTime=(new Date).getTime(),this._play(),this.enableShadowsOnFirstInteraction&&
(this.directShadowsEnabled=!0,this.enableShadowsOnFirstInteraction=!1)))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"yearPlaying",{get:function(){return this._get("yearPlaying")},set:function(a){this.yearPlaying!==a&&(this._set("yearPlaying",a),a&&(this._updateSunriseAndSunset(),this._lastTime=(new Date).getTime(),this._play(),this.enableShadowsOnFirstInteraction&&(this.directShadowsEnabled=!0,this.enableShadowsOnFirstInteraction=!1)))},enumerable:!0,configurable:!0});a([m.shared("esri.widgets.EnvironmentSettings.EnvironmentSettingsViewModel")],
p.prototype,"declaredClass",void 0);a([m.property()],p.prototype,"view",void 0);a([m.property()],p.prototype,"lightingUpdateInterval",void 0);a([m.property()],p.prototype,"cachedLightingDateUTC",void 0);a([m.property()],p.prototype,"cachedDisplayUTCOffset",void 0);a([m.property()],p.prototype,"enableShadowsOnFirstInteraction",void 0);a([m.property({dependsOn:["cachedDisplayUTCOffset","cachedLightingDateUTC"]})],p.prototype,"lightingDateDisplay",null);a([m.property({dependsOn:["cachedDisplayUTCOffset"]})],
p.prototype,"lightingUTCOffset",null);a([m.property({dependsOn:["lightingDateDisplay"]})],p.prototype,"lightingDateLocalDate",null);a([m.property({dependsOn:["lightingDateDisplay"]})],p.prototype,"lightingDateString",null);a([m.property({dependsOn:["lightingDateDisplay"]})],p.prototype,"lightingDateLabelString",null);a([m.property({dependsOn:["lightingDateDisplay"]})],p.prototype,"lightingDateSliderPos",null);a([m.property({aliasOf:"view.environment.lighting.directShadowsEnabled"})],p.prototype,"directShadowsEnabled",
void 0);a([m.property({dependsOn:["view"],readOnly:!0})],p.prototype,"directShadowsAvailable",null);a([m.property()],p.prototype,"dayPlaying",null);a([m.property()],p.prototype,"yearPlaying",null);a([m.property()],p.prototype,"_lastTime",void 0);a([m.property()],p.prototype,"_sunrise",void 0);a([m.property()],p.prototype,"_sunset",void 0);return p=a([m.subclass()],p)}(m.declared(h,h,p))})},"webSceneViewer/widgets/Settings/Settings":function(){define("esri/core/declare esri/core/watchUtils dojo/dom-class dojo/query dojo/_base/window dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../support/persistedSettingsUtils dojo/i18n!../nls/widgets dojo/text!./templates/Settings.html".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n){var u={};u[u[0]="low"]=0;u[u[1]="medium"]=1;u[u[2]="high"]=2;return B([h,p,x],{view:void 0,templateString:n,_i18n:f,appState:null,constructor:function(a,f){this.view=a.appState.view},destroy:function(){},startup:function(){this.inherited(arguments)},_sliderChange:function(b){this.view.qualityMode=u[b];var f=a(".dijitRuleLabelsContainer",this.qualitySlider.domNode);if(0<f.length&&f[0].childNodes.length>b)for(var f=f[0],g=0;g<f.childNodes.length;g++)g===b?q.add(f.childNodes[g].firstChild,
"selected"):q.remove(f.childNodes[g].firstChild,"selected")},postCreate:function(){w.whenOnce(this.view,"ready",function(){this.createWidget()}.bind(this))},createWidget:function(){w.init(this.view,"qualityMode",function(a){this.qualitySlider.set("value",u[a])}.bind(this));w.init(this.view,"inputManager.mode",this._inputModeChanged.bind(this));w.init(this.view,"inputManager.primaryDragAction",this._inputPrimaryChanged.bind(this));this._assignTooltipsToQualitySlider();this._assignClickHandlersToQualitySlider()},
_assignClickHandlersToQualitySlider:function(){a(".qualitySlider .dijitRuleLabel").on("click",function(a){a=a.target?a.target:a.srcElement;a=a.parentNode;a=a.getAttribute("style").replace(";","");a=a.replace("left:","");a=a.replace("%","").trim();a=parseInt(a,10);q.contains(m.doc.body.parentNode,"esriRtl")&&(a=100-a);switch(a){case 0:this.qualitySlider.set("value",0);break;case 50:this.qualitySlider.set("value",1);break;default:this.qualitySlider.set("value",2)}}.bind(this));a(".qualitySlider .dijitRuleMark.dijitRuleMarkH").on("click",
function(a){a=(a.target?a.target:a.srcElement).getAttribute("style");a=a.replace(";","");a=a.replace("left:","");a=a.replace("%","").trim();a=parseInt(a,10);q.contains(m.doc.body.parentNode,"esriRtl")&&(a=100-a);switch(a){case 0:this.qualitySlider.set("value",0);break;case 50:this.qualitySlider.set("value",1);break;default:this.qualitySlider.set("value",2)}}.bind(this))},_inputModeChanged:function(a){var b="pro"===a;this.WSVNavigationRadioButton.set("checked","default"===a);this.ProNavigationRadioButton.set("checked",
b)},_inputPrimaryChanged:function(a){switch(a){case "pan":q.remove(this.navigationImage,"primRotation");break;case "rotate":q.add(this.navigationImage,"primRotation")}},_assignTooltipsToQualitySlider:function(){for(var b=a(".qualitySlider .dijitRuleLabel"),g=0;g<b.length;g++){var h=b[g],n=h.parentNode.getAttribute("style"),n=n.replace(";",""),n=n.replace("left:",""),n=n.replace("%","").trim(),n=parseInt(n,10);q.contains(m.doc.body.parentNode,"esriRtl")&&(n=100-n);switch(n){case 0:h.title=f.settings.qualityLow;
break;case 50:break;default:h.title=f.settings.qualityHigh}}},_navigationModeChanged:function(a){this.view.inputManager.mode=a?"pro":"default";a?(g.set("navigationMode","pro"),q.add(this.navigationImage,"proNav")):(g.set("navigationMode","default"),q.remove(this.navigationImage,"proNav"))}})})},"webSceneViewer/widgets/ShareDialog/ShareDialog":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators dijit/_WidgetsInTemplateMixin dijit/_TemplatedMixin ../Tooltip/Tooltip dijit/form/TextBox dijit/form/Select dijit/form/NumberTextBox dijit/form/CheckBox dojo/dom dojo/query dojo/dom-class dojo/_base/lang dojo/_base/window dojo/has esri/core/watchUtils esri/widgets/Widgette esri/widgets/support/viewModelWiring dojo/i18n!webSceneViewer/widgets/nls/widgets ./ShareDialogViewModel".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y){u;return function(h){function p(a){a=h.call(this)||this;a._getViewAttr=Q.createGetterDelegate("view");a._setViewAttr=Q.createSetterDelegate("view");return a}q(p,h);p.prototype.getDefaults=function(){return E.mixin(this.inherited(arguments),{viewModel:null})};p.prototype.destroy=function(){};p.prototype.postCreate=function(){this.inherited(arguments);this.setupShortenLinkButton();this.setupLinkUrlTextBox();this.setupEmbedCodeTextArea();this.setupEmbedSizeOptions();
this.setupShareButtons();this.setupShareMessage();D.toggle(this._linkShareContainer,"noCopyToClipboard",!!A("ios"));D.toggle(this._embedShareContainerInput,"noCopyToClipboard",!!A("ios"));this.startup();this.setupToolTip()};p.prototype.setupShortenLinkButton=function(){var a=this;this.own(this._shortenLinkButton.on("change",function(){a.viewModel.shortUrlEnabled=!!a._shortenLinkButton.get("checked")}),F.init(this.viewModel,"shortUrlEnabled",function(b){a._shortenLinkButton.set("checked",b)}),F.init(this.viewModel,
"supportsShortUrl",function(b){D.toggle(a._shortenLinkContainer,"hide",!b)}))};p.prototype.setupLinkUrlTextBox=function(){var a=this;this._linkUrlTextBox=new g({id:"linkShare",class:"shareLinkUrl input-group-input",onclick:"this.select();",onmouseup:"return false;",readOnly:!A("ios")});this._linkUrlTextBox.placeAt(this._linkShareContainer,1);this.own(this.viewModel.watch("url",function(b){return a._linkUrlTextBox.set("value",b)}))};p.prototype.setupEmbedCodeTextArea=function(){this._embedCodeTextArea=
new g({id:"shareEmbedCode",class:"shareEmbedCode input-group-input",onclick:"this.select();",onmouseup:"return false;",readOnly:!A("ios")});this._embedCodeTextArea.placeAt(this._embedShareContainerInput,1)};p.prototype.setupEmbedSizeOptions=function(){var a=this,b={small:K.share.smallSize,medium:K.share.mediumSize,large:K.share.largeSize,custom:K.share.customSize},g=["small","medium","large"].map(function(f){return{label:b[f],value:f,selected:a.viewModel.embedSizeType===f}});this._embedSizeOptions=
new f({options:g,class:"sizeOptionsSelect"});this._embedSizeOptions.placeAt(this._sizeSelect);this._widthTextBox=new n({class:"sizeTextBox",constraints:{pattern:"#",places:0}});this._widthTextBox.placeAt(this._customSizeContainer,1);this._heightTextBox=new n({class:"sizeTextBox",constraints:{pattern:"#",places:0}});this._heightTextBox.placeAt(this._customSizeContainer,3);this.own(F.init(this.viewModel,"embedSize",function(b){var f=b[1];a._widthTextBox.set("value",b[0]);a._heightTextBox.set("value",
f)}),F.init(this.viewModel,"embedSizeType",function(b){D.toggle(a._customSizeContainer,"disable","custom"!==b)}),F.init(this.viewModel,"embedCode",function(b){a._embedCodeTextArea.set("value",b)}),this._embedSizeOptions.on("change",function(b){a.viewModel.embedSizeType=b}),this._widthTextBox.on("change",function(b){a.viewModel.embedSize=[b,a.viewModel.embedSize[1]]}),this._heightTextBox.on("change",function(b){a.viewModel.embedSize=[a.viewModel.embedSize[0],b]}))};p.prototype.setupShareButtons=function(){var a=
this;this.own(F.init(this.viewModel,"facebookEnabled",function(b){D.toggle(a._facebookShareButton,"hide",!b)}),F.init(this.viewModel,"twitterEnabled",function(b){D.toggle(a._twitterShareButton,"hide",!b)}),F.init(this.viewModel,"emailEnabled",function(b){D.toggle(a._emailShareButton,"hide",!b)}),F.init(this.viewModel,"embedEnabled",function(b){D.toggle(a._embedShareContainer,"hide",!b)}),F.init(this.viewModel,"createAppEnabled",function(b){D.toggle(a._createAppContainer,"hide",!b)}),F.init(this.viewModel,
"hasSavedItem",function(b){a.toggleToolTipShareButton(b);D.toggle(a._createAppButton,"disable",!b)}),this.viewModel.on("share-email",function(b){a.emit("share-email",b)}))};p.prototype.createToolTipShareButton=function(){this._createAppButtonToolTip=new x({connectId:this._createAppButtonContainer,label:K.share.createAppNotAllowed,showDelay:0,appState:this.appState})};p.prototype.toggleToolTipShareButton=function(a){a?this._createAppButtonToolTip&&this._createAppButtonToolTip.destroy():this.createToolTipShareButton()};
p.prototype.setupShareMessage=function(){var a=this;this.own(F.init(this.viewModel,"message",function(b){a._shareMessageText.innerHTML=b;D.toggle(a._shareMessage,"show",!!b)}),F.init(this.viewModel,"changeSettingsUrl",function(b){a._changeSettingsLink.setAttribute("href",b||"#");D.toggle(a._changeSettingsLink,"show",!!b)}))};p.prototype.setupToolTip=function(){var a=this;t(".tooltip",this.domNode).forEach(function(b){new x({connectId:b,label:b.getAttribute("aria-label"),appState:a.appState})})};p.prototype.buildRendering=
function(){this.inherited(arguments);D.remove(this.domNode,"esri-widget")};p.prototype._onFacebookShareButtonClick=function(){this.viewModel.shareToFacebook()};p.prototype._onTwitterShareButtonClick=function(){this.viewModel.shareToTwitter()};p.prototype._onEmailShareButtonClick=function(){this.viewModel.shareToEmail()};p.prototype._moreOptionsExpandCollapse=function(){D.toggle(this._moreOptionsContainer,"collapsed");D.toggle(this._moreOptionsIcon,"rotate")};p.prototype._onCreateAppButtonClick=function(){this.viewModel.showCreateAppDialog()};
p.prototype._copyLinkToClipBoard=function(a){if(a.target&&a.target.attributes["data-targeted-input"]){a=b.byId(a.target.attributes["data-targeted-input"].value);try{a.select(),C.doc.execCommand("copy"),a.blur()}catch(P){console.log("copy to clipboard not supported")}}};a([m.shared(K.share)],p.prototype,"i18n",void 0);a([m.shared('\n    \x3cdiv class\x3d"shareDialog"\x3e\n      \x3cdiv class\x3d"linkShare"\x3e\n        \x3cdiv class\x3d"input-group js-copy-group" data-dojo-attach-point\x3d"_linkShareContainer"\x3e\n          \x3cspan class\x3d"js-copy-copyToClipboard-tooltip input-group-button tooltip" aria-label\x3d"'+
K.share.copyToClipboard+'"\x3e\n            \x3cbutton aria-label\x3d"'+K.share.copyToClipboard+'" class\x3d"js-copy-copyToClipboard-btn btn btn-clear icon-ui-duplicate icon-ui-flush" data-targeted-input\x3d"linkShare" data-dojo-attach-event\x3d"click: _copyLinkToClipBoard"\x3e\x3c/button\x3e\n          \x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"shareLinkIcons"\x3e\n          \x3cdiv class\x3d"email" data-dojo-attach-event\x3d"click:_onEmailShareButtonClick" data-dojo-attach-point\x3d"_emailShareButton"\x3e\x3c/div\x3e\n          \x3cdiv class\x3d"facebook" data-dojo-attach-event\x3d"click:_onFacebookShareButtonClick" data-dojo-attach-point\x3d"_facebookShareButton"\x3e\x3c/div\x3e\n          \x3cdiv class\x3d"twitter" data-dojo-attach-event\x3d"click:_onTwitterShareButtonClick" data-dojo-attach-point\x3d"_twitterShareButton"\x3e\x3c/div\x3e\n          \x3clabel data-dojo-attach-point\x3d"_shortenLinkContainer"\x3e\n            \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" class\x3d"shortenLink" data-dojo-attach-point\x3d"_shortenLinkButton"\x3e\n            \x3cspan\x3e'+
K.share.shortenLink+'\x3c/span\x3e\n          \x3c/label\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"embedShare" data-dojo-attach-point\x3d"_embedShareContainer"\x3e\n        \x3cdiv class\x3d"shareEmbedText paneTitle"\x3e'+K.share.embed+'\x3c/div\x3e\n        \x3cdiv class\x3d"input-group js-copy-group" data-dojo-attach-point\x3d"_embedShareContainerInput"\x3e\n          \x3cspan class\x3d"js-copy-copyToClipboard-tooltip input-group-button tooltip" aria-label\x3d"'+K.share.copyToClipboard+
'"\x3e\n            \x3cbutton aria-label\x3d"'+K.share.copyToClipboard+'" class\x3d"js-copy-copyToClipboard-btn btn btn-clear icon-ui-duplicate icon-ui-flush" data-targeted-input\x3d"shareEmbedCode" data-dojo-attach-event\x3d"click: _copyLinkToClipBoard"\x3e\x3c/button\x3e\n          \x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_moreOptionsContainer" class\x3d"moreOptionsContainer"\x3e\n          \x3cdiv class\x3d"sizeSelect" data-dojo-attach-point\x3d"_sizeSelect"\x3e\x3c/div\x3e\n          \x3cdiv class\x3d"customSize disable" style\x3d"display:none;" data-dojo-attach-point\x3d"_customSizeContainer"\x3e\n          \x3cdiv class\x3d"timesConnector" style\x3d"display:none:"\x3eX\x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"createAppShare" data-dojo-attach-point\x3d"_createAppContainer"\x3e\n        \x3cdiv class\x3d"createAppText paneTitle"\x3e'+
K.viewerTools.moreTools+'\x3c/div\x3e\n        \x3cspan data-dojo-attach-point\x3d"_createAppButtonContainer"\x3e\n          \x3cbutton id\x3d"createAppShareButton" data-dojo-attach-point\x3d"_createAppButton" class\x3d"greenButton smallButton" data-dojo-attach-event\x3d"click:_onCreateAppButtonClick"\x3e'+K.createApp.title+'\x3c/button\x3e\n         \x3c/span\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"infoMessage" data-dojo-attach-point\x3d"_shareMessage"\x3e\n        \x3cdiv class\x3d"infoIcon"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"_shareMessageText" class\x3d"infoMessageText"\x3e\x3c/div\x3e\n        \x3ca href\x3d""  target\x3d"_blank" data-dojo-attach-point\x3d"_changeSettingsLink" class\x3d"changeSettingsLink"\x3e'+
K.share.changeShareSettings+"\x3c/a\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  ")],p.prototype,"templateString",void 0);a([m.property()],p.prototype,"appState",void 0);a([m.property({type:y.ShareDialogViewModel})],p.prototype,"viewModel",void 0);a([m.property({dependsOn:["viewModel.view"]})],p.prototype,"view",void 0);return p=a([m.subclass("webSceneViewer.widgets.ShareDialog.ShareDialog")],p)}(m.declared(H,p,h))})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F){function H(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(x.hitch(this,a,b))}}var Q=w("dijit.form._SelectMenu",b,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;
x.isArray(b)&&(b=b[b.length-1]);b&&B.forEach(this.parentWidget._getChildren(),function(f){f.option&&b===f.option.value&&(a=!0,this.focusChild(f,!1))},this);a||this.inherited(arguments)}});m=w("dijit.form.Select"+(f("dojo-bidi")?"_NoBidi":""),[n,u,C],{baseClass:"dijitSelect dijitValidationTextBox",templateString:F,_buttonInputDisabled:f("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var b=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=b?b:0].value)}this.dropDown=new Q({id:this.id+"_menu",parentWidget:this});a.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(a.value||a.label){var b=x.hitch(this,"_setValueAttr",a);a=new t({option:a,label:("text"===this.labelType?(a.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a.label)||this.emptyLabel,
onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a}return new D({ownerDocument:this.ownerDocument})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(K){}},focusChild:function(a){a&&this.set("value",
a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=A.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,f,g){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{B.forEach(this._getChildren(),function(a){a.destroyRecursive()});
var b=new t({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);q.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",
_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=("text"===this.labelType?(a||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):a)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+
this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?E.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):E.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||
"")},reset:function(){this.inherited(arguments);E.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=h.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var a=this._keyNavCodes;delete a[p.LEFT_ARROW];delete a[p.RIGHT_ARROW]},_setStyleAttr:function(b){this.inherited(arguments);
a.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);E.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){E.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
f("dojo-bidi")&&(m=w("dijit.form.Select",m,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));m._Menu=Q;m.prototype._onContainerKeydown=H("_onContainerKeydown");m.prototype._onContainerKeypress=H("_onContainerKeypress");return m})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b){return m("dijit.form._FormSelectWidget",b,{multiple:!1,options:null,store:null,_setStoreAttr:function(a){this._created&&this._deprecatedSetStore(a)},query:null,_setQueryAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:a})},queryOptions:null,_setQueryOptionsAttr:function(a){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:a})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(a){var b=this.options||[];if(null==a)return b;if(g.isArrayLike(a))return B.map(a,"return this.getOptions(item);",this);g.isString(a)&&(a={value:a});g.isObject(a)&&(B.some(b,function(b,f){for(var g in a)if(!(g in b)||b[g]!=a[g])return!1;a=f;return!0})||(a=-1));return 0<=a&&a<b.length?b[a]:null},addOption:function(a){B.forEach(g.isArrayLike(a)?a:[a],function(a){a&&g.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions(g.isArrayLike(a)?
a:[a]);B.forEach(a,function(a){a&&(this.options=B.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){B.forEach(g.isArrayLike(a)?a:[a],function(a){var b=this.getOptions({value:a.value}),f;if(b)for(f in a)b[f]=a[f]},this);this._loadChildren()},setStore:function(a,b,f){x.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(a,b,f)},_deprecatedSetStore:function(b,f,h){var m=this.store;h=h||{};if(m!==b){for(var p;p=this._notifyConnections.pop();)p.remove();b.get||(g.mixin(b,{_oldAPI:!0,get:function(a){var b=new w;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var f=new w(function(){h.abort&&h.abort()});f.total=new w;var h=this.fetch(g.mixin({query:a,onBegin:function(a){f.total.resolve(a)},
onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},b));return new u(f)}}),b.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[q.after(b,"onNew",g.hitch(this,"_onNewItem"),!0),q.after(b,"onDelete",g.hitch(this,"_onDeleteItem"),!0),q.after(b,"onSet",g.hitch(this,"_onSetItem"),!0)]));this._set("store",b)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);h.query&&this._set("query",h.query);h.queryOptions&&this._set("queryOptions",h.queryOptions);b&&b.query&&(this._loadingStore=!0,this.onLoadDeferred=new w,this._queryRes=b.query(this.query,this.queryOptions),n(this._queryRes,g.hitch(this,function(m){if(this.sortByLabel&&!h.sort&&m.length)if(b.getValue)m.sort(a.createSortFunction([{attribute:b.getLabelAttributes(m[0])[0]}],b));else{var n=this.labelAttr;m.sort(function(a,b){return a[n]>b[n]?1:b[n]>
a[n]?-1:0})}h.onFetch&&(m=h.onFetch.call(this,m,h));B.forEach(m,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(g.hitch(this,function(a,b,f){b==f?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=f&&this._onNewItem(a))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:f);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(m):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),g.hitch(this,function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)})));return m},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=g.isArrayLike(a)?B.map(a,function(a){return g.isObject(a)?a:{value:a}}):g.isObject(a)?[a]:[{value:a}];a=B.filter(this.getOptions(a),function(a){return a&&a.value});var f=this.getOptions()||[];this.multiple||a[0]&&a[0].value||!f.length||(a[0]=
f[0]);B.forEach(f,function(b){b.selected=B.some(a,function(a){return a.value===b.value})});f=B.map(a,function(a){return a.value});if("undefined"!=typeof f&&"undefined"!=typeof f[0]){var h=B.map(a,function(a){return a.label});this._setDisplay(this.multiple?h:h[0]);this.inherited(arguments,[this.multiple?f:f[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=B.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?
a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(B.forEach(this._getChildren(),function(a){a.destroyRecursive()}),B.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;B.forEach(this._getChildren(),function(f){var g=B.some(a,function(a){return f.option&&
a===f.option.value});g&&!b.multiple&&(b.focusedChild=f);p.toggle(f.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),g);f.domNode.setAttribute("aria-selected",g?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=B.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?B.map(B.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},
_onNewItem:function(a,b){b&&b.parent||this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=this.store,f=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:f?b.getIdentity(a):null,label:f,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},
scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);h.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?f("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+x._scopeName+"-value")||a.getAttribute("value"),
label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);q.after(this,"onChange",g.hitch(this,"_updateSelection"));var a=this.store;a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(a,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(B){var w={};B.setObject("dojo.data.util.sorter",w);w.basicComparator=function(q,a){var m=-1;null===q&&(q=void 0);null===a&&(a=void 0);if(q==a)m=0;else if(q>a||null==q)m=1;return m};w.createSortFunction=function(q,a){function m(a,f,g,h){return function(b,m){b=h.getValue(b,a);m=h.getValue(m,a);
return f*g(b,m)}}for(var h=[],p,x=a.comparatorMap,g=w.basicComparator,f=0;f<q.length;f++){p=q[f];var n=p.attribute;if(n){p=p.descending?-1:1;var u=g;x&&("string"!==typeof n&&"toString"in n&&(n=n.toString()),u=x[n]||g);h.push(m(n,p,u,a))}}return function(a,f){for(var b=0;b<h.length;){var g=h[b++](a,f);if(0!==g)return g}return 0}};return w})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(B,w,q,a,m,h){return B("dijit.MenuSeparator",[q,a,m],{templateString:h,buildRendering:function(){this.inherited(arguments);w.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(B,w,q,a,m,h){var p=function(a){a=a||{};var f=q.getLocalization("dojo.cldr","number",q.normalizeLocale(a.locale)),g=a.pattern?a.pattern:f[(a.type||
"decimal")+"Format"];a="number"==typeof a.places?a.places:"string"===typeof a.places&&0<a.places.length?a.places.replace(/.*,/,""):-1!=g.indexOf(".")?g.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:f.decimal,places:a}},x=B("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(w.delegate(a,this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:m.format,_regExpGenerator:m.regexp,
_decimalInfo:p(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(a){var f="number"==typeof a.places?a.places:0;f&&f++;"number"!=typeof a.max&&(a.max=9*Math.pow(10,15-f));"number"!=typeof a.min&&(a.min=-9*Math.pow(10,15-f));this.inherited(arguments,[a]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value);this._decimalInfo=p(a)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var a=this.get("value");
"number"!=typeof a||isNaN(a)||(a=this.format(a,this.constraints),void 0!==a&&(this.textbox.value=a));this.inherited(arguments)}},format:function(a,f){var g=String(a);if("number"!=typeof a)return g;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,f))&&!1!==f.exponent&&/\de[-+]?\d/i.test(g))return g;this.editOptions&&this.focused&&(f=w.mixin({},f,this.editOptions));return this._formatter(a,f)},_parser:m.parse,parse:function(a,f){var g=w.mixin({},f,this.editOptions&&this.focused?this.editOptions:
{});if(this.focused&&null!=g.places){var h=g.places,h="number"===typeof h?h:Number(h.split(",").pop());g.places="0,"+h}g=this._parser(a,g);this.editOptions&&this.focused&&isNaN(g)&&(g=this._parser(a,f));return g},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){if(null==a||"string"==typeof a&&""==a)return NaN;"number"!=typeof a||isNaN(a)||0==a||(a=m.round(a,this._decimalInfo.places));return this.inherited(arguments,[a])},serialize:function(a,
f){return"number"!=typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=w.hitch(w.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(a,!0)},_setValueAttr:function(a,f,h){if(void 0!==a&&void 0===h)if(h=String(a),"number"==typeof a)if(isNaN(a))h="";else{if("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(h))h=void 0}else a?a=void 0:(h="",a=NaN);this.inherited(arguments,[a,f,h])},_getValueAttr:function(){var a=
this.inherited(arguments);if(isNaN(a)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+m._realNumberRegexp(w.delegate(this.constraints))+"$")).test(this.textbox.value))return a=Number(this.textbox.value),isNaN(a)?void 0:a}else return a},isValid:function(a){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var f=this.get("value");return!isNaN(f)&&this.rangeCheck(f,this.constraints)?!1!==this.constraints.exponent&&
/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1},_isValidSubset:function(){var g="number"==typeof this.constraints.min,f="number"==typeof this.constraints.max,h=this.get("value");if(isNaN(h)||!g&&!f)return this.inherited(arguments);var m=h|0,b=0>h,p=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),q=(this.maxLength||20)-this.textbox.value.length,x=p?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",m=p?m+"."+x:m+"",q=a.rep("9",q),p=h;b?p=Number(m+
q):h=Number(m+q);return!(g&&h<this.constraints.min||f&&p>this.constraints.max)}});B=B("dijit.form.NumberTextBox",[h,x],{baseClass:"dijitTextBox dijitNumberTextBox"});B.Mixin=x;return B})},"webSceneViewer/widgets/ShareDialog/ShareDialogViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators dojo/string dojo/dom-construct dojo/_base/window esri/core/Accessor esri/core/Handles esri/core/watchUtils esri/core/Evented esri/layers/mixins/PortalLayer ../../widgets/CreateAppDialog/CreateAppDialog ../../support/urlUtils dojo/i18n!webSceneViewer/widgets/nls/widgets".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E){Object.defineProperty(w,"__esModule",{value:!0});B=function(g){function u(a){a=g.call(this)||this;a.shortUrlEnabled=!1;a.urlWithoutParams=function(a){return D.urlWithoutParams(a)};a.currentUrlParams=function(){return D.urlParams()};a.minimumEmbedSize=[400,400];a.shortUrlCache=[];a.updateShortUrlTasks={};a.handles=new f;a.createAppDialogInstance=null;return a}q(u,g);u.prototype.initialize=function(){var a=this,b=function(){return a.notifyChange("status")};
this.handles.add(n.on(this.view,"map.allLayers","change",b,b));this.embedSizeType="small";this.watch("view.camera",function(){return a.shortUrlEnabled=!1},!0);this.watch(["baseUrl","shortUrlEnabled","active"],function(){return a.updateUrls()},!0);this.updateUrls()};u.prototype.destroy=function(){this.handles.removeAll()};Object.defineProperty(u.prototype,"active",{set:function(a){a!==this.active&&(this._set("active",a),this.shortUrlEnabled=a?!0:this.shortUrlEnabled)},enumerable:!0,configurable:!0});
Object.defineProperty(u.prototype,"supportsSocialMedia",{get:function(){return!this.portal||this.portal.canShareViaSocialMedia()},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"twitterEnabled",{get:function(){return this.supportsSocialMedia&&"public"===this.status},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"facebookEnabled",{get:function(){return this.supportsSocialMedia&&"public"===this.status},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,
"emailEnabled",{get:function(){return"public"===this.status},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"embedEnabled",{get:function(){return"public"===this.status},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"createAppEnabled",{get:function(){return this.portal&&this.portal.isSignedIn()},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"status",{get:function(){var a=this.portalItem;if(!this.portal||!this.portal.userCanShareWithPublic())return"unauthorized";
if(this.hasSavedItem&&a.access&&"public"!==a.access)return"private-scene";a=this.view.map.allLayers.some(function(a){return a.isInstanceOf(b)&&a.portalItem&&a.portalItem.access&&"public"!==a.portalItem.access});return this.hasSavedItem&&a?"private-layers":"public"},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"changeSettingsUrl",{get:function(){if("private-scene"===this.status)return this.portal.getItemLink(this.portalItem)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,
"message",{get:function(){return"private-scene"===this.status?E.share.shareNotPublic:"private-layers"===this.status?E.share.shareNotPublicLayer:this.view.map&&this.view.map.hasUnsavedChanges?E.share.shareUnsaved:""},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"supportsShortUrl",{get:function(){return D.supportsShortUrl()},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"baseUrl",{get:function(){if(!this.view.stationary||!this.view.map||!this.active)return this._get("baseUrl");
var a=this.portal?this.portal.getSceneViewerUrl(!this.supportsSubdomain):"",b=[];if(this.hasSavedItem&&0!==a.indexOf("../"))b.push({name:"webscene",value:this.portalItem.id});else{var a=this.urlWithoutParams(a),f=this.currentUrlParams(),g;for(g in f)"viewpoint"!==g&&b.push({name:g,value:f[g]})}this.view.camera&&b.push({name:"viewpoint",value:D.encodeCamera(this.view.camera,"local"===this.view.viewingMode)});b.length&&(b=b.map(function(a){return a.name+"\x3d"+a.value}).join("\x26"),a=a+"?"+b);return a},
enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"hasSavedItem",{get:function(){return!!this.get("portalItem.id")},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"itemIsPublic",{get:function(){return this.hasSavedItem&&"public"===this.get("portalItem.access")},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"supportsSubdomain",{get:function(){return this.portal&&0!==this.portal.url.indexOf("../")?this.hasSavedItem?!this.itemIsPublic:!1:!1},enumerable:!0,
configurable:!0});Object.defineProperty(u.prototype,"embedSizeType",{get:function(){return this._get("embedSizeType")},set:function(a){this._set("embedSizeType",a);switch(a){case "small":this._set("embedSize",[500,400]);break;case "medium":this._set("embedSize",[800,600]);break;case "large":this._set("embedSize",[1080,720])}},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"embedSize",{get:function(){return this._get("embedSize")||[0,0]},set:function(a){var b=this._get("embedSize"),
f=b[0],b=b[1];a=[Math.max(this.minimumEmbedSize[0],a[0]),Math.max(this.minimumEmbedSize[1],a[1])];a[0]===f&&a[1]===b||this._set("embedSize",a)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"embedCode",{get:function(){var a=this.embedSize;return'\x3ciframe width\x3d"'+a[0]+'" height\x3d"'+a[1]+'" frameborder\x3d"0" scrolling\x3d"no" allowfullscreen src\x3d"'+this.embedUrl+'"\x3e\x3c/iframe\x3e'},enumerable:!0,configurable:!0});u.prototype.updateUrls=function(){this.updateUrl("url",
this.baseUrl);this.updateUrl("embedUrl",this.makeEmbedUrl(this.baseUrl))};u.prototype.makeEmbedUrl=function(a){if(!a)return a;var b=-1===a.indexOf("?")?"?":"\x26";return""+a+b+"ui\x3dmin"};u.prototype.updateUrl=function(a,b){var f=this;this.updateShortUrlTasks[a]&&(this.updateShortUrlTasks[a].cancel(),this.updateShortUrlTasks[a]=null);if(this.shortUrlEnabled&&this.supportsShortUrl&&this.active){for(var g=0,h=this.shortUrlCache;g<h.length;g++){var m=h[g];if(m.baseUrl===b){this._set(a,m.shortUrl);return}}this.updateShortUrlTasks[a]=
this.createShortUrl(b).always(function(g){f.updateShortUrlTasks[a]=null;"string"===typeof g&&(f.shortUrlCache.push({baseUrl:b,shortUrl:g}),10<f.shortUrlCache.length&&f.shortUrlCache.shift(),f._set(a,g))})}else this._set(a,b)};u.prototype.openUrl=function(a,b){b.newWindow?window.open(a,"_blank"):document.location.href=a};u.prototype.shareToFacebook=function(){var a="http://www.facebook.com/sharer/sharer.php?s\x3d100\x26u\x3d"+encodeURIComponent(this.url);this.openUrl(a,{newWindow:!0})};u.prototype.shareToTwitter=
function(){var a=h.substitute(E.share.shareTwitterTxt,{sceneName:this.portalItem?this.portalItem.title:""}),b=this.url,f=140-(b.length+1);a.length+14>f&&(a=a.substr(0,f-3)+"...");a="http://twitter.com/intent/tweet?text\x3d"+encodeURIComponent(""+a+b+"\n@ArcGISOnline");this.openUrl(a,{newWindow:!0})};u.prototype.shareToEmail=function(){var a=h.substitute(E.share.shareEmailSubject,{sceneName:this.portalItem?this.portalItem.title:""}),b=E.share.shareEmailTxt1+"\r\n"+this.url+"\r\n\r\n"+E.share.shareEmailTxt2,
a="mailto:?subject\x3d"+encodeURIComponent(a)+"\x26body\x3d"+encodeURIComponent(b);this.portal&&this.portal.isSignedIn()&&this.portal.userHasEditingPrivileges()?this.emit("share-email",{mailUrl:a}):this.openUrl(a,{newWindow:!1})};u.prototype.showCreateAppDialog=function(){var a=this;(null==this.createAppDialogInstance||this.createAppDialogInstance.destroyed)&&function(){var b=p.toDom("\x3cdiv\x3e\x3c/div\x3e");p.place(b,x.body());a.createAppDialogInstance=new t({portal:a.portal,portalItem:a.portalItem,
isMobile:a.isMobile,container:b});a.createAppDialogInstance.on("hide",function(b){a.createAppDialogInstance.destroy()})}();this.createAppDialogInstance.show()};u.prototype.createShortUrl=function(a){return D.createShortUrl(a)};a([m.property({value:!1})],u.prototype,"active",null);a([m.property()],u.prototype,"portal",void 0);a([m.property()],u.prototype,"view",void 0);a([m.property()],u.prototype,"isMobile",void 0);a([m.aliasOf("view.map.portalItem")],u.prototype,"portalItem",void 0);a([m.property({readOnly:!0,
dependsOn:["portal.user"]})],u.prototype,"supportsSocialMedia",null);a([m.property({readOnly:!0,dependsOn:["supportsSocialMedia","status"]})],u.prototype,"twitterEnabled",null);a([m.property({readOnly:!0,dependsOn:["supportsSocialMedia","status"]})],u.prototype,"facebookEnabled",null);a([m.property({readOnly:!0,dependsOn:["status"]})],u.prototype,"emailEnabled",null);a([m.property({readOnly:!0,dependsOn:["status"]})],u.prototype,"embedEnabled",null);a([m.property({readOnly:!0,dependsOn:["portal",
"portal.user"]})],u.prototype,"createAppEnabled",null);a([m.property({readOnly:!0,dependsOn:["portalItem.id","portalItem.access","view.map.hasUnsavedChanges"]})],u.prototype,"status",null);a([m.property({readOnly:!0,dependsOn:["status"]})],u.prototype,"changeSettingsUrl",null);a([m.property({readOnly:!0,dependsOn:["status"]})],u.prototype,"message",null);a([m.property()],u.prototype,"shortUrlEnabled",void 0);a([m.property({readOnly:!0})],u.prototype,"supportsShortUrl",null);a([m.property()],u.prototype,
"urlWithoutParams",void 0);a([m.property()],u.prototype,"currentUrlParams",void 0);a([m.property({readOnly:!0,dependsOn:["portalItem.id","view.stationary","active","view.camera"]})],u.prototype,"baseUrl",null);a([m.property({readOnly:!0})],u.prototype,"embedUrl",void 0);a([m.property({readOnly:!0})],u.prototype,"url",void 0);a([m.property({readOnly:!0,dependsOn:["portalItem.id"]})],u.prototype,"hasSavedItem",null);a([m.property({readOnly:!0,dependsOn:["hasSavedItem","portalItem.access"]})],u.prototype,
"itemIsPublic",null);a([m.property({readOnly:!0,dependsOn:["portal","hasSavedItem","itemIsPublic"]})],u.prototype,"supportsSubdomain",null);a([m.property()],u.prototype,"embedSizeType",null);a([m.property()],u.prototype,"minimumEmbedSize",void 0);a([m.property()],u.prototype,"embedSize",null);a([m.property({readOnly:!0,dependsOn:["embedSize","embedUrl"]})],u.prototype,"embedCode",null);return u=a([m.subclass("webSceneViewer.widgets.ShareDialog.ShareDialogViewModel")],u)}(m.declared(g,u));w.ShareDialogViewModel=
B})},"webSceneViewer/widgets/CreateAppDialog/CreateAppDialog":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/widgets/BrowseItems/plugins/PluginConfigurableApps esri/core/accessorSupport/decorators dojo/dom-class dojo/topic dojo/dom-construct dojo/io-query dojo/aspect dojox/widget/Wizard dojox/widget/WizardPane ../Dialog/ClosableDialog dijit/layout/ContentPane dijit/layout/TabContainer dijit/_WidgetsInTemplateMixin esri/core/watchUtils esri/widgets/Widget esri/widgets/BrowseItems esri/widgets/support/widget ./CreateAppSaveForm ./CreateAppDialogViewModel dojo/i18n!webSceneViewer/widgets/nls/widgets ./utils".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I,M){return function(m){function w(a){a=m.call(this,a)||this;a.viewModel=new y;a.isMobile=!1;a.wizShowingForm=!1;return a}q(w,m);w.prototype.postInitialize=function(){var a=this;this.viewModel._getShareGroups();this._createDijitWidgets();this.own(this.dlg.on("hide",function(b){a.emit("hide",b)}))};w.prototype.render=function(){return Q.tsx("div",{bind:this.dlg.domNode,afterCreate:this._attachToNode,class:"create-app-dialog"})};w.prototype.show=
function(){this.dlg.show()};w.prototype._createDijitWidgets=function(){var a=this;this.browseWidget=new H({portalUrl:this.portal.url,sortDescending:!1,sort:"title",pluginId:"esri/widgets/BrowseItems/plugins/PluginConfigurableApps",pagingLinks:3,itemsPerPage:6,showInfoPanel:!0,style:"width:100%;height:100%",filterType:"3d"});this.wiz=new u({cancelButtonLabel:I.createApp.cancel,class:"esriCreateApp",hideDisabled:!0,cancelFunction:function(){a.dlg.hide()}});var f=this.viewModel.isWebAppBuilderEnabled?
this._createTabsWith(this.browseWidget):this.browseWidget,h=(new b({content:f.domNode})).placeAt(this.wiz),f=g.toDom('\x3cdiv class\x3d"templated-app-form-container"\x3e\x3c/div\x3e');(new b({content:f,class:"templated-app-form-container"})).placeAt(this.wiz);this.form=new K({portal:this.portal,portalItem:this.portalItem,container:f});this.own(this.wiz.watch("selectedChildWidget",function(b,f,g){a.wizShowingForm=g===h;p.toggle(a.wiz.previousButton.domNode,"hide",a.wizShowingForm);p.toggle(a.wiz.doneButton.domNode,
"hide",a.wizShowingForm);!a.wizShowingForm&&a.viewModel.working&&p.remove(a.spinner,"hide")}));n.after(this.wiz,"_checkButtons",function(){a.wiz.doneButton.domNode.style.display="block"});this.dlg=new t({title:I.createApp.title,content:this.wiz.domNode,class:"browseItemDialog saveDialog",draggable:!1,autoCenter:!0});this.spinner=g.create("div",{class:"spinner hide",innerHTML:I.createApp.pleaseWait},this.dlg.domNode,"first");A.whenFalse(this.viewModel,"working",function(){p.add(a.spinner,"hide")});
this.browseWidget.startup();this._handleActions();this.own([{remove:function(){a.dlg.destroyRecursive()}},{remove:function(){a.form.destroy()}}])};w.prototype._attachToNode=function(a){a.appendChild(this)};w.prototype._saveTemplatedApp=function(){var a=this;p.remove(this.spinner,"hide");this.viewModel.saveTemplatedApp().then(function(b){b=a.selectedTemplate.typeKeywords&&-1<a.selectedTemplate.typeKeywords.indexOf("selfConfigured")?b.url+"\x26edit\x3dtrue":a.portal.getBaseUrl()+"/home/webmap/configureApp.html?appid\x3d"+
b.id;a.dlg.hide();var f=M.handleSafariLimitation(a.isMobile);f&&(f.location=b);a.dlg.hide()},function(a){console.error(a)})};w.prototype._handleActions=function(){var a=this;p.add(this.wiz.nextButton.domNode,["calcite","dijitHidden"]);p.add(this.wiz.cancelButton.domNode,["calcite","cancel"]);p.add(this.wiz.previousButton.domNode,["calcite","cancel","hide"]);p.add(this.wiz.doneButton.domNode,["calcite","cancel","hide"]);this.wiz.doneButton.domNode.style.display="block";this.wiz.doneButton.onClick=
function(){a._saveTemplatedApp()};this.own(x.subscribe("/esri/browseitems/close",function(b,f){a.selectedTemplate=f;"create-app"===b?(a.wiz.nextButton.onClick(),p.remove(a.wiz.previousButton.domNode,"hide"),p.remove(a.wiz.doneButton,"hide")):"on-view-item"===b?a.portal.getItemLink(f):"download-app"===b?M.downloadWebMappingApp(f,a.portal).catch(function(a){console.error(a)}):"preview-app"===b&&M.previewInTemplate(a.portalItem,f,a.portal).catch(function(a){console.error(a)})}))};w.prototype._createTabsWith=
function(a){var b=this,f=new E({className:"createAppTabContainer"}),g=new D({title:I.createApp.templates,content:a.domNode}),h=new D({title:"Web AppBuilder"}),m=new K({portal:this.portal,portalItem:this.portalItem,container:h.domNode});f.addChild(g);f.addChild(h);f.watch("selectedChildWidget",function(a,f,l){p.add(b.wiz.nextButton.domNode,"hide");g===l&&(p.add(b.wiz.previousButton.domNode,"hide"),p.add(b.wiz.doneButton.domNode,"hide"),b.wiz.doneButton.onClick=function(){b._saveTemplatedApp()});h===
l&&(p.remove(b.wiz.doneButton.domNode,"hide"),p.add(b.wiz.previousButton.domNode,"hide"),b.wiz.doneButton.onClick=function(){b._redirectToWAB(m)})});this.own([{remove:function(){f.destroyRecursive()}},{remove:function(){m.destroy()}}]);return f};w.prototype._redirectToWAB=function(a){a={title:a.title,tags:a.tags.join(","),summary:a.description,webmap:this.portalItem.id,appType:"HTML3D"};a=this.portal.getBaseUrl()+"/apps/webappbuilder/index.html?"+f.objectToQuery(a);window.open(a,"_blank");this.dlg.hide()};
a([h.aliasOf("viewModel.portal")],w.prototype,"portal",void 0);a([h.aliasOf("viewModel.portalItem")],w.prototype,"portalItem",void 0);a([h.aliasOf("viewModel.selectedTemplate")],w.prototype,"selectedTemplate",void 0);a([h.property({type:y})],w.prototype,"viewModel",void 0);a([h.property()],w.prototype,"isMobile",void 0);a([Q.renderable()],w.prototype,"dlg",void 0);a([Q.renderable()],w.prototype,"wiz",void 0);a([Q.renderable()],w.prototype,"browseWidget",void 0);a([h.aliasOf("viewModel.form")],w.prototype,
"form",void 0);return w=a([h.subclass("webSceneViewer.widgets.CreateAppDialog")],w)}(h.declared(F,C))})},"dojox/widget/Wizard":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dijit/layout/StackContainer dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/i18n dojo/text!./Wizard/Wizard.html dojo/i18n!dijit/nls/common dojo/i18n!./nls/Wizard dijit/form/Button".split(" "),function(B,w,q,a,m,h,p,x){return w("dojox.widget.Wizard",[a,m,h],{templateString:x,nextButtonLabel:"",
previousButtonLabel:"",cancelButtonLabel:"",doneButtonLabel:"",cancelFunction:null,hideDisabled:!1,postMixInProperties:function(){this.inherited(arguments);var a=B.mixin({cancel:p.getLocalization("dijit","common",this.lang).buttonCancel},p.getLocalization("dojox.widget","Wizard",this.lang)),f;for(f in a)this[f+"ButtonLabel"]||(this[f+"ButtonLabel"]=a[f])},startup:function(){this._started||(this.inherited(arguments),this.connect(this.nextButton,"onClick","_forward"),this.connect(this.previousButton,
"onClick","back"),this.cancelFunction?(B.isString(this.cancelFunction)&&(this.cancelFunction=B.getObject(this.cancelFunction)),this.connect(this.cancelButton,"onClick",this.cancelFunction)):this.cancelButton.domNode.style.display="none",this.connect(this.doneButton,"onClick","done"),this._subscription=q.subscribe(this.id+"-selectChild",B.hitch(this,"_checkButtons")),this._started=!0)},resize:function(){this.inherited(arguments);this._checkButtons()},_checkButtons:function(){var a=this.selectedChildWidget,
f=a.isLastChild||this.nextButton.get("disabled");this.nextButton.set("disabled",f);this._setButtonClass(this.nextButton);a.doneFunction?(this.doneButton.domNode.style.display="",f&&(this.nextButton.domNode.style.display="none")):this.doneButton.domNode.style.display="none";this.previousButton.set("disabled",!this.selectedChildWidget.canGoBack);this._setButtonClass(this.previousButton)},_setButtonClass:function(a){a.domNode.style.display=this.hideDisabled&&a.disabled?"none":""},_forward:function(){this.selectedChildWidget._checkPass()&&
this.forward()},done:function(){this.selectedChildWidget.done()},destroy:function(){q.unsubscribe(this._subscription);this.inherited(arguments)}})})},"dojox/widget/WizardPane":function(){define(["dojo/_base/lang","dojo/_base/declare","dijit/layout/ContentPane"],function(B,w,q){return w("dojox.widget.WizardPane",q,{canGoBack:!0,passFunction:null,doneFunction:null,startup:function(){this.inherited(arguments);this.isFirstChild&&(this.canGoBack=!1);B.isString(this.passFunction)&&(this.passFunction=B.getObject(this.passFunction));
B.isString(this.doneFunction)&&this.doneFunction&&(this.doneFunction=B.getObject(this.doneFunction))},_onShow:function(){this.isFirstChild&&(this.canGoBack=!1);this.inherited(arguments)},_checkPass:function(){var a=!0;if(this.passFunction&&B.isFunction(this.passFunction)){var m=this.passFunction();switch(typeof m){case "boolean":a=m;break;case "string":alert(m),a=!1}}return a},done:function(){this.doneFunction&&B.isFunction(this.doneFunction)&&this.doneFunction()}})})},"esri/widgets/BrowseItems":function(){define("dojo/_base/declare dojo/_base/window dojo/_base/event dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/dom dojo/dom-construct dojo/mouse dojo/topic dojo/query dojo/parser dijit/registry dijit/TooltipDialog dijit/popup dojo/promise/all dojo/Deferred dgrid/Grid dgrid/extensions/Pagination dgrid/extensions/DijitRegistry dgrid/OnDemandGrid dgrid/Selection dgrid/Selector dgrid/Keyboard dgrid/util/touch dstore/Memory dstore/QueryResults dstore/Trackable dstore/legacy/StoreAdapter dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../portal/Portal ../portal/PortalItem ../portal/PortalQueryResult ../portal/PortalQueryParams ../core/Evented ../core/PluginTarget ./BrowseItems/_AppTemplateFiltersMixin ../core/lang ../config ../request ../geometry/support/webMercatorUtils ../tasks/GeometryService ../geometry/SpatialReference dojo/i18n!./BrowseItems/nls/BrowseItems dojo/NodeList-dom".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y,I,M,N,P,S,O,W,Z,T,Y,aa,V,l,R,z,d,c,e,k,r,v,G,J,L,U,X){var ca=B([O,Z],{idProperty:"id",constructor:function(a){B.safeMixin(this,a)},get:function(a,c){return this.portal.queryItems(new d({query:"id:"+a})).then(function(a){return new R(r.mixin(a,{portal:this.portal}))})},getIdentity:function(a){return a[this.idProperty]},fetchRange:function(a){var c=a.start,b=a.end;a=this.fetch();return new W(a.then(function(a){return a.slice(c,b)}),{totalLength:a.then(function(a){return a.length})})},
fetch:function(){var a,c,b=new H;this.query&&this.queryOptions||b.reject("query parameters missing for ItemStore");a="object"===typeof this.query?this.query:{query:t};if(c=this.queryOptions){a=r.mixin(a,{num:c.count,start:(c.start||0)+1});if(c.sort&&c.sort.length){var e=c.sort[0];a=r.mixin(a,{sortField:"created"===e.attribute?"uploaded":e.attribute,sortOrder:e.descending?"desc":"asc"})}c.useExtent&&c.extent&&(a.extent=c.extent)}a=new d(a);this.portal.queryItems(a).then(function(a){b.resolve(a.results)});
return new W(b)}});w={base:"esri-browseitems",button:"esri-button",close:"esri-button esri-close",loader:"esri-loaderthrob",templatePanel:"template-info-panel"};return B([Y,aa,V,e],{templateString:'\x3cdiv\x3e\x3cdiv class\x3d"top-bar"\x3e\x3cdiv  class\x3d"instructions"\x3e\x3cspan class\x3d"messageLeft hide" data-dojo-attach-point\x3d"messageNodeLeft"\x3e\x3c/span\x3e\x3cspan class\x3d"messageRight hide" data-dojo-attach-point\x3d"messageNodeRight"\x3e\x3c/span\x3e\x3ca tabIndex\x3d"-1" data-dojo-attach-point\x3d"helpLink" class\x3d"esriHelpIcon hide" title\x3d"${i18n.learnMoreConfigurableApps}" href\x3d"#" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"_searchBox" class\x3d"searchBar"\x3e\x3cinput tabIndex\x3d"1" placeholder\x3d"${i18n.searchTitle}" class\x3d"esriSearchBox dijitTextBox" type\x3d"search"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"gallery"\x3e\x3cdiv class\x3d"gallery-left  quiet-scroll"\x3e\x3cul class\x3d"filters"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"templates gallery-right"\x3e\x3cp id\x3d"${id}_filterTitle" class\x3d"filter-title hide" data-dojo-attach-point\x3d"filterDescription"\x3e\x3c/p\x3e\x3cdiv id\x3d"${id}_grid"class\x3d"dgrid-autoheight quiet-scroll"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  class\x3d"${_css.loader}"\x3e\x3c/div\x3e\x3cdiv  data-dojo-attach-point\x3d"infoPanel" class\x3d"${_css.templatePanel}"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
galleryTemplate:"\x3cdiv style\x3d'opacity:1;' class\x3d'grid-item gallery-view'\x3e${item:_formatThumbnail}${item:_formatItemTitle}\x3cp class\x3d\"template-overlay\" style\x3d\"display:none;\"\x3e${i18n.selectDetails}\x3c/p\x3e\x3c/div\x3e",infoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"${_css.button}" id\x3d"on-next"\x3e${i18n.configure}\x3c/button\x3e\x3cbutton class\x3d"${_css.close}" id\x3d"close-panel"\x3e${i18n.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
showInfoPanel:!0,i18n:X,baseClass:w.base,_css:w,postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.self?(this._portal=new l({url:this.portalUrl,self:this.self}),this._init(),this._portal.on("load",this._fetchData.bind(this))):(this._portal=new l({url:this.portalUrl,authMode:"immediate"}),this._portal.load().then(function(a){this._user=this._portal.user;this._init();this._fetchData()}.bind(this)))},_init:function(){this._canSearchPublic=this.self?
this.self.canSearchPublic:this._portal.canSearchPublic;this.query=r.mixin(this.query||{},{get:function(a){return this[a]&&this[a].length?"("+this[a].join(" OR ")+") ":""},toString:function(){return{query:this.get("groups")+this.get("tags")+this.get("persistentTypekeywords")+this.get("typekeywords")+this.get("types")+this.get("custom")+(this.query||"")+(this.search||"")+' -type:"Attachment"'}}});this.self?this.self.canSearchPublic=!0:this._portal.canSearchPublic=!0;this.galleryTemplate=this.plugin&&
this.plugin.galleryTemplate||this.galleryTemplate;this.infoPanelTemplate=this.plugin&&this.plugin.infoPanelTemplate||this.infoPanelTemplate;if(this.helpLinkUrl=this.plugin&&this.plugin.helpLinkUrl||"")h.set(this.helpLink,"href",this.helpLinkUrl),a.remove(this.helpLink,"hide");t(".templates",this.domNode).addClass("fade");t(".dgrid-footer",this.domNode).addClass("hide")},destroy:function(){this.inherited(arguments);this._grid&&this._grid.destroy();this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove());
this._queryTimer&&clearTimeout(this._queryTimer);this._grid=this._portal=null},_setItemQueryAttr:function(a){this.itemQuery=a},_setPluginIdAttr:function(a){this.addPlugin(a)},_setMessageAttr:function(a){this.set("messageRight",a)},_setMessageRightAttr:function(c){h.set(this.messageNodeRight,"innerHTML",c);a.remove(this.messageNodeRight,"hide")},_setMessageLeftAttr:function(c){h.set(this.messageNodeLeft,"innerHTML",c);a.remove(this.messageNodeLeft,"hide")},_setDisabledAttr:function(c){E.findWidgets(this.domNode).concat(E.findWidgets(this._content)).forEach(function(a){a.set("disabled",
c)});a[c?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_setSortAttr:function(a){this.sortAttribute=a},_setSortDescendingAttr:function(a){this.sortDescending=a},_getSelectionAttr:function(){var a=this._grid.selection,c;for(c in a)if(a.hasOwnProperty(c))break;return c&&this._grid.row(c).data},_setGalleryTemplateAttr:function(a){null!=a&&(this.galleryTemplate=a)},_setFormatThumbnailAttr:function(a){null!=a&&"function"===typeof a&&(this._formatThumbnail=a)},_setFormatItemTitleAttr:function(a){null!=
a&&"function"===typeof a&&(this._formatItemTitle=a)},_setRowsPerPageAttr:function(a){this._set("rowsPerPage",a)},_setPagingLinksAttr:function(a){this._set("pagingLinks",a)},_getQueryAttr:function(){return this.query},_setQueryAttr:function(a){this._set("query",a);this._grid&&(this._grid.collection.query=a.toString(),this._grid.refresh())},_setExtentAttr:function(a){a&&this._set("extent",a)},_setUseExtentAttr:function(a){this._set("useExtent",a)},_setFetchTimeoutAttr:function(a){this._set("fetchTimeout",
a)},_setShowInfoPanelAttr:function(a){this._set("showInfoPanel",a)},_setFilterTypeAttr:function(a){this._set("filterType",a)},_validate:function(){return!!this.get("selection")},_getPortalAttr:function(){return this._portal},reset:function(){t(".esriSearchBox",this._searchBox).forEach(function(a){h.set(a,"value","")});this.query.search="";if(this.plugin.filters){var c=[],b=[];t("li.active",this.domNode).forEach(function(d){a.remove(d,"active");var e=this.plugin.filters[d.childNodes[0].id];d=(e.tags||
[]).map(function(a){return'tags:"'+a+'"'},this);e=(e.typekeywords||[]).map(function(a){return'typekeywords:"'+a+'"'},this);c.push(d);b.push(e)},this);this.query.tags=(this.query.tags||[]).filter(function(a){return-1!==c.indexOf(a)});this.query.typekeywords=(this.query.typekeywords||[]).filter(function(a){return-1!==b.indexOf(a)});f.byId("all").click()}},_clearQueryTimeout:function(){clearTimeout(this._queryTimer);this._queryTimer=null},_clearClosePanelTimeout:function(){clearTimeout(this._panelClosing);
this._panelClosing=null;(this._panelClickHandles||[]).forEach(function(a){a&&"function"===typeof a.remove&&a.remove()});n.empty(this.infoPanel)},_createGrid:function(){var c=B([Q,K,M,y]),d=this.query,e=function(a){a.snippet=a.snippet||"";var c=n.create("div");a=p.substitute(this.galleryTemplate,{item:a,i18n:this.i18n},null,this);n.place(a,c);return c}.bind(this),g={sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]};this.get("useExtent")&&(g.extent=this.get("extent"),
g.useExtent=this.get("useExtent"));d=new ca({portal:this._portal,query:d.toString(),queryOptions:g});this._grid=new c({collection:d,selectionMode:"single",pagingLinks:this.get("pagingLinks")||2,rowsPerPage:this.get("itemsPerPage")||this.plugin&&this.plugin.rowsPerPage||6,loadingMessage:"Loading items...",showLoadingMessage:!1,renderRow:e,noDataMessage:this.i18n.noItemsToDisplay},this.id+"_grid");this._grid.startup();this.own(x(this.domNode,"click",function(a){f.byId("close-panel")&&f.byId("close-panel").click()}),
this._grid.on(x.selector(".dgrid-content .dgrid-row",u.enter),function(c){!1===a.contains(this.domNode,"showing")&&this.showInfoPanel&&this._showOverlay(!0,c)}.bind(this)),this._grid.on(x.selector(".dgrid-content .dgrid-row",u.leave),function(a){this._showOverlay(!1,a)}.bind(this)),this._grid.on(".dgrid-row:click",function(c){var d;!1===a.contains(this.domNode,"showing")&&this.showInfoPanel&&(c.preventDefault(),q.stop(c),this._clearClosePanelTimeout(),d=this.get("selection"),this._showOverlay(!1,
c),this.showInfoPanel&&this.infoPanelTemplate?n.place(p.substitute(this.infoPanelTemplate,{item:d,i18n:this.i18n,_css:this._css},function(a){return null!=a?a:""},this),this.infoPanel):m.set(this.infoPanel,"display","none"),a.add(this.domNode,"showing"),this._panelClickHandles=[t(".template-info-showing .thumbnail img",this.domNode).on("error",function(a){h.set(a.target,"src",d.thumbnailUrl)}),t(".panel-actions ."+this._css.button+"").on("click",function(c){c.preventDefault();q.stop(c);"close-panel"===
c.target.id?(a.remove(this.domNode,"showing"),this._panelClosing=setTimeout(function(){[].forEach(function(a){a&&"function"===typeof a.remove&&a.remove()})},250)):b.publish("/esri/browseitems/close",c.target.id,this.get("selection"))}.bind(this)),t("."+this._css.templatePanel+"").on("click",function(a){a.preventDefault();q.stop(a)})])}.bind(this)),this._grid.on("dgrid-refresh-complete",function(a){t(".templates",this.domNode).removeClass("fade");t("."+this._css.loader+"",this.domNode).addClass("hide");
t(".dgrid-footer",this.domNode)[this._grid._total<=this._grid.rowsPerPage?"addClass":"removeClass"]("hide")}.bind(this)),this._grid.on("refresh",function(){this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove(),this._img_connect_error=this._img_connect=null);this._img_connect=t(".grid-item-thumb",this._grid.domNode).on("load",function(a){(a=this._grid.row(a))&&a.element&&t(".grid-item",a.element).addClass("fadeIn").style("opacity","1")}.bind(this));this._img_connect_error=
t(".grid-item-thumb",this._grid.domNode).on("error",function(a){h.set(a.target,"src",this._portal.staticImagesUrl+"/desktopapp.png")}.bind(this))}.bind(this)),x(this._searchBox,"keyup",function(a){a.preventDefault();this._clearQueryTimeout();this._queryTimer=setTimeout(function(){this.query.search=h.get(a.target,"value");this._fetchItems(this.query).then(function(){this._clearQueryTimeout()}.bind(this))}.bind(this),this.searchKeypressDelay||450)}.bind(this)),x(this._searchBox,"search",function(a){this._queryTimer||
(a.preventDefault(),this.query.search=h.get(a.target,"value"),this._fetchItems(this.query))}.bind(this)));this.useExtent&&this.own(this.watch("extent",function(a,c,b){this._grid.queryOptions.extent=this.get("extent");this._grid.queryOptions.useExtent=this.get("useExtent");this._grid.query.bbox=this._grid.queryOptions.useExtent?this._grid.queryOptions.extent:"";this._grid.refresh()}),this.watch("useExtent",function(a,c,b){this._grid.queryOptions.extent=this.get("extent");this._grid.queryOptions.useExtent=
b;this._grid.query.bbox=this._grid.queryOptions.useExtent?this._grid.queryOptions.extent:"";this._grid.refresh()}));this.showInfoPanel||this.own(this._grid.on("dgrid-select,dgrid-deselect",function(a){a={selection:this.get("selection")};this.emit("select-change",a)}.bind(this)))},_createFilters:function(){if(this.plugin&&this.plugin.filters){var c=this.plugin.filters,b=this.plugin.filterStrings,d,e=t(".filters",this.domNode)[0];for(d in c)n.create("li",{"class":"all"===d?"active":"",innerHTML:"\x3ca id\x3d'"+
d+"'  href\x3d'#'\x3e"+b[d].title+"\x3c/a\x3e"},e);this.own(x(e,"li a:click",function(d){d.preventDefault();var f=d.target;t(".active",e).removeClass("active");a.add(f.parentNode,"active");t(".templates",this.domNode).addClass("fade");setTimeout(function(){a["all"===f.id?"add":"remove"](this.filterDescription,"hide");h.set(this.filterDescription,"innerHTML",b[f.id].description||"")}.bind(this),225);d=r.mixin({},c[f.id]||{});this.query.tags=(d.tags||[]).map(function(a){return'tags:"'+a+'"'});this.query.typekeywords=
[].concat((d.typekeywords||[]).map(function(a){return'typekeywords:"'+a+'"'}));this._fetchItems(this.query)}.bind(this)));a.add(this.domNode,"filters")}else a.add(this.domNode,"nofilters"+(this.plugin&&this.plugin.extraClasses?" "+this.plugin.extraClasses.join(" "):""))},_showOverlay:function(a,c){(c=this._grid.row(c))&&t(".template-overlay",c.element).style("display",a?"":"none")},_fetchData:function(){return this.plugin&&this.plugin.fetchData?this.plugin.fetchData():this._fetchItems(this.itemQuery)},
_fetchItems:function(a,c){var b={sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]},d=new H;this.get("useExtent")&&(b.extent=this.get("extent"),b.useExtent=this.get("useExtent"));t(".templates",this.domNode).addClass("fade");t(".dgrid-footer",this.domNode).addClass("hide");t("."+this._css.loader+"",this.domNode).removeClass("hide");setTimeout(function(){this.query=r.mixin(this.query,a);this._grid?(this._grid.collection.query=this.query.toString(),this._grid.collection.queryOptions=
b,this._grid.refresh()):(this._createFilters(),this._createGrid());d.resolve(this._grid)}.bind(this),60);return d},_formatThumbnail:function(a){return"\x3cimg class\x3d'grid-item-thumb' width\x3d'187px' height\x3d'125px' alt\x3d'' src\x3d'"+(a.thumbnailUrl||this._portal.staticImagesUrl+"/desktopapp.png")+"'\x3e"},_formatInfoPanelImage:function(a){var c=a.screenshots&&a.screenshots.length?a.screenshots[0]:null;return c?a.itemUrl+"/info/"+c:a.thumbnailUrl},_formatItemTitle:function(a){return"\x3ch5\x3e"+
(a.title||a.name||"\x3cNo Title\x3e")+"\x3c/h5\x3e"},clear:function(){this._grid.clearSelection()}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(B,w,q,a,m,h,p,x,g,f,n,u,b){B=B("dijit.TooltipDialog",[x,n,f,g],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,
_lastFocusItem:null,templateString:u,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(h(this.domNode,"keydown",m.hitch(this,"_onKey")))},orient:function(a,b,f){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+f];w.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems();p.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==
a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(b){if(b.keyCode==a.ESCAPE)this.defer("onCancel"),b.stopPropagation(),b.preventDefault();else if(b.keyCode==a.TAB){var f=b.target;
this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(b.stopPropagation(),b.preventDefault()):f==this._firstFocusItem&&b.shiftKey?(p.focus(this._lastFocusItem),b.stopPropagation(),b.preventDefault()):f!=this._lastFocusItem||b.shiftKey?b.stopPropagation():(p.focus(this._firstFocusItem),b.stopPropagation(),b.preventDefault())}}});q("dojo-bidi")&&B.extend({_setTitleAttr:function(a){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a;this._set("title",
a)},_setTextDirAttr:function(a){this._created&&this.textDir==a||(this._set("textDir",a),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return B})},"dgrid/Grid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./List ./util/misc dojo/_base/sniff".split(" "),function(B,w,q,a,m,h,p,x){function g(a,g){g&&g.nodeType&&a.appendChild(g)}B=B(p,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,
showHeader:!0,column:function(a){return"object"!==typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,g){if(a.column&&a.element)return a;a.target&&a.target.nodeType&&(a=a.target);var f;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var b=a.columnId;if(b){g=b;f=a;break}a=a.parentNode}while(a&&a!==this.domNode)}if(!f&&"undefined"!==typeof g){var h=this.row(a);if(b=h&&h.element)for(var b=b.getElementsByTagName("td"),m=0;m<b.length;m++)if(b[m].columnId===g){f=b[m];break}}if(null!=
a)return{row:h||this.row(a),column:g&&this.column(g),element:f}},createRowCells:function(a,g,m,b,p){var f=q.create("table",{className:"dgrid-row-table",role:"presentation"}),n=9>h("ie")?q.create("tbody",null,f):f,t,u,w,B,Q,K,y,I,M,N;m=m||this.subRows;u=0;for(w=m.length;u<w;u++)for(K=m[u],t=q.create("tr",null,n),K.className&&(t.className=K.className),B=0,Q=K.length;B<Q;B++){y=K[B];I=y.id;M=y.field?" field-"+x.escapeCssIdentifier(y.field,"-"):"";(N="function"===typeof y.className?y.className(b):y.className)&&
(M+=" "+N);M=q.create(a,{className:"dgrid-cell"+(I?" dgrid-column-"+x.escapeCssIdentifier(I,"-"):"")+M,role:"th"===a?"columnheader":"gridcell"});M.columnId=I;if(I=y.colSpan)M.colSpan=I;if(I=y.rowSpan)M.rowSpan=I;g(M,y,b,p);t.appendChild(M)}return f},_createBodyRowCell:function(a,h,m,b){var f=m;h.get?f=h.get(m):"field"in h&&"_item"!==h.field&&(f=m[h.field]);h.renderCell?g(a,h.renderCell(m,f,a,b)):this._defaultRenderCell.call(h,m,f,a,b)},_createHeaderRowCell:function(a,h){var f=h.headerNode=a,b=h.field;
b&&(a.field=b);h.renderHeaderCell?g(f,h.renderHeaderCell(f)):("label"in h||h.field)&&f.appendChild(document.createTextNode("label"in h?h.label:h.field));!1!==h.sortable&&b&&"_item"!==b&&(a.sortable=!0,a.className+=" dgrid-sortable")},left:function(a,g){a.element||(a=this.cell(a));return this.cell(this._move(a,-(g||1),"dgrid-cell"))},right:function(a,g){a.element||(a=this.cell(a));return this.cell(this._move(a,g||1,"dgrid-cell"))},_defaultRenderCell:function(a,g,h){if(this.formatter){var b=this.formatter,
f=this.grid.formatterScope;h.innerHTML="string"===typeof b&&f?f[b](g,a):this.formatter(g,a)}else null!=g&&h.appendChild(document.createTextNode(g))},renderRow:function(a,g){a=this.createRowCells("td",w.hitch(this,"_createBodyRowCell"),g&&g.subRows,a,g);g=q.create("div",{role:"row"});g.appendChild(a);return g},renderHeader:function(){var a=this,g=this.headerNode;g.setAttribute("role","row");q.empty(g);var p=this.createRowCells("th",w.hitch(this,"_createHeaderRowCell"),this.subRows&&this.subRows.headerRows);
this._rowIdToObject[p.id=this.id+"-header"]=this.columns;g.appendChild(p);this._sortListener&&this._sortListener.remove();this._sortListener=m(p,"click,keydown",function(b){if("click"===b.type||32===b.keyCode||!h("opera")&&13===b.keyCode){var f=b.target,n,p;do if(f.sortable){n=f.field||f.columnId;p=a.sort[0];n=a.hasNeutralSort&&p&&p.property===n&&p.descending?[]:[{property:n,descending:p&&p.property===n&&!p.descending}];p={bubbles:!0,cancelable:!0,grid:a,parentType:b.type,sort:n};m.emit(b.target,
"dgrid-sort",p)&&(a._sortNode=f,a.set("sort",n));break}while((f=f.parentNode)&&f!==g)}})},resize:function(){var a=this.headerNode.firstChild,g=this.contentNode,h;this.inherited(arguments);g.style.width="";g&&a&&(h=a.offsetWidth)>g.offsetWidth&&(g.style.width=h+"px")},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(){this.inherited(arguments);this.updateSortArrow(this.sort)},_findSortArrowParent:function(a){var f=
this.columns,g;for(g in f){var b=f[g];if(b.field===a)return b.headerNode}},updateSortArrow:function(f,g){this._lastSortedArrow&&(a.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),q.destroy(this._lastSortedArrow),delete this._lastSortedArrow);g&&(this.sort=f);f[0]&&(g=f[0].property,f=f[0].descending,g=this._sortNode||this._findSortArrowParent(g),delete this._sortNode,g&&(g=g.contents||g,this._lastSortedArrow=q.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"\x26nbsp;",
role:"presentation"},g,"first"),a.add(g,"dgrid-sort-"+(f?"down":"up")),this.resize()))},styleColumn:function(a,g){return this.addCssRule("#"+x.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+x.escapeCssIdentifier(a,"-"),g)},_configColumns:function(a,g){var f=[],b=g instanceof Array;x.each(g,function(h,m){"string"===typeof h&&(g[m]=h={label:h});b||h.field||(h.field=m);m=h.id=h.id||(isNaN(m)?m:a+m);this._configColumn&&(this._configColumn(h,g,a),m=h.id);b&&(this.columns[m]=h);h.grid=this;f.push(h)},
this);return b?g:f},_destroyColumns:function(){this.cleanup()},configStructure:function(){var a=this.subRows,g=this._columns=this.columns;this.columns=!g||g instanceof Array?{}:g;if(a)for(g=0;g<a.length;g++)a[g]=this._configColumns(g+"-",a[g]);else this.subRows=[this._configColumns("",g)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=
a;this._updateColumns()},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});B.appendIfNode=g;return B})},"dgrid/List":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./util/misc dojo/_base/sniff".split(" "),function(B,w,q,a,m,h,p){function x(a,
b){a.className="dgrid-scrollbar-measure";document.body.appendChild(a);b=a["offset"+b]-a["client"+b];a.className="";a.parentNode&&document.body.removeChild(a);return b}function g(b){a.replace(this.domNode,b,this._class||"");this._class=b}function f(){return this._class}var n=[];h("mozilla")&&n.push("has-mozilla");h("touch")&&n.push("has-touch");a.add(document.documentElement,n);h.add("pointer",function(a){return"PointerEvent"in a?"pointer":"MSPointerEvent"in a?"MSPointer":!1});var u,b;h.add("dom-scrollbar-width",
function(a,b,f){return x(f,"Width")});h.add("dom-scrollbar-height",function(a,b,f){return x(f,"Height")});h.add("dom-rtl-scrollbar-left",function(a,b,f){a=document.createElement("div");f.className="dgrid-scrollbar-measure";f.setAttribute("dir","rtl");f.appendChild(a);document.body.appendChild(f);b=!!h("ie")||!!h("trident")||/\bEdge\//.test(navigator.userAgent)||a.offsetLeft>=h("dom-scrollbar-width");f.className="";f.parentNode&&document.body.removeChild(f);q.destroy(a);f.removeAttribute("dir");return b});
var t=0,D=function(){this._started&&this.resize()},E=B(null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!0,highlightDuration:250,resizeThrottleDelay:p.defaultDelay,resizeThrottleMethod:"throttleDelayed",postscript:function(a,b){var f=this;(this._Row=function(a,b,f){this.id=a;this.data=b;this.element=f}).prototype.remove=function(){f.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",
create:function(a,b){b=this.domNode=b||document.createElement("div");var f;a&&(this.params=a,B.safeMixin(this,a),f=a["class"]||a.className||b.className);this.sort=this.sort||[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=b.id=b.id||this.id||E.autoIdPrefix+t++;this.buildRendering();f&&g.call(this,f);this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var b=this.domNode,f=this.addUiClasses,
g=this,n,t,u;u=this.isRTL="rtl"===(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();b.className="";b.setAttribute("role","grid");a.add(b,"dgrid dgrid-"+this.listType+(f?" ui-widget":""));n=this.headerNode=q.create("div",{className:"dgrid-header dgrid-header-row"+(f?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},b);t=this.bodyNode=q.create("div",{className:"dgrid-scroller"},b);h("ff")&&(t.tabIndex=-1);this.headerScrollNode=q.create("div",
{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+(f?" ui-widget-header":"")},b);this.footerNode=q.create("div",{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},b);u&&(b.className+=" dgrid-rtl"+(h("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));m(t,"scroll",function(a){g.showHeader&&(n.scrollLeft=a.scrollLeft||t.scrollLeft);a.stopPropagation();m.emit(b,"scroll",{scrollTarget:t})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=q.create("div",
{className:"dgrid-content"+(f?" ui-widget-content":"")},this.bodyNode);"string"===typeof this.resizeThrottleMethod&&p[this.resizeThrottleMethod]?f=p[this.resizeThrottleMethod](D,this,this.resizeThrottleDelay):"function"===typeof this.resizeThrottleMethod?f=this.resizeThrottleMethod(w.hitch(this,D),this.resizeThrottleDelay):(console.warn("Invalid value specified for resizeThrottleMethod:  "+this.resizeThrottleMethod),f=p.throttleDelayed(D,this,this.resizeThrottleDelay));this._resizeHandle=m(window,
"resize",f);this._listeners.push(this._resizeHandle)},postCreate:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this.sort))},configStructure:function(){},resize:function(){var a=this.bodyNode,f=this.footerNode,f=this.showFooter?f.offsetHeight:0;this.headerScrollNode.style.height=a.style.marginTop=this.headerNode.offsetHeight+"px";a.style.marginBottom=f+"px";u||(u=h("dom-scrollbar-width"),b=h("dom-scrollbar-height"),h("ie")&&
(u++,b++),p.addCssRule(".dgrid-scrollbar-width","width: "+u+"px"),p.addCssRule(".dgrid-scrollbar-height","height: "+b+"px"),17!==u&&(p.addCssRule(".dgrid-header-row","right: "+u+"px"),p.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+u+"px")))},addCssRule:function(a,b){a=p.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(a);return a},on:function(a,b){return m(this.domNode,a,b)},cleanup:function(){for(var a in this._rowIdToObject)if(this._rowIdToObject[a]!==this.columns){var b=document.getElementById(a);
b&&this.removeRow(b,!0)}},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();this._listeners=null}this._started=!1;this.cleanup();q.destroy(this.domNode)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoRowId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},highlightRow:function(b,f){var g="dgrid-highlight"+(this.addUiClasses?" ui-state-highlight":"");b=b.element||b;a.add(b,g);setTimeout(function(){a.remove(b,g)},f||
this.highlightDuration)},adjustRowIndices:function(b){var f=b.rowIndex;if(-1<f){do-1<b.rowIndex&&(this.maintainOddEven&&a.contains(b,"dgrid-row")&&a.replace(b,1===f%2?"dgrid-row-odd":"dgrid-row-even",0===f%2?"dgrid-row-odd":"dgrid-row-even"),b.rowIndex=f++);while((b=b.nextSibling)&&b.rowIndex!==f)}},renderArray:function(a,b,f){f=f||{};var g=f.start||0,h=document.createDocumentFragment(),m=[],n=0,p=a.length;b||(this._lastCollection=a);for(;n<p;)m[n]=this.insertRow(a[n],h,null,g++,f),n++;(a=b?b.parentNode:
this.contentNode)&&a.parentNode&&(a!==this.contentNode||p)&&(a.insertBefore(h,b||null),p&&this.adjustRowIndices(m[p-1]));return m},renderHeader:function(){},_autoRowId:0,insertRow:function(a,b,f,g,h){var m=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(a):this._autoRowId++),n=document.getElementById(m),p=n&&n.previousSibling;n&&(n===f&&(f=(f.connected||f).nextSibling),this.removeRow(n,!1,h));n=this.renderRow(a,h);n.className=(n.className||"")+" dgrid-row "+
(1===g%2?"dgrid-row-odd":"dgrid-row-even")+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[n.id=m]=a;b.insertBefore(n,f||null);n.rowIndex=g;p&&p.rowIndex!==n.rowIndex-1&&this.adjustRowIndices(p);return n},renderRow:function(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));return b},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||q.destroy(a)},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&
(a=a.target);if(a.nodeType){do{var f=a.id;if(b=this._rowIdToObject[f])return new this._Row(f.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!==this.domNode)}else return"object"===typeof a?b=this.collection.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,f,g){var h,m;m=h=a.element;b=b||1;do if(a=h[0>b?"previousSibling":"nextSibling"]){do if((h=a)&&-1<
(h.className+" ").indexOf(f+" ")){m=h;b+=0>b?1:-1;break}while(a=(!g||!h.hidden)&&h[0>b?"lastChild":"firstChild"])}else if(h=h.parentNode,!h||h===this.bodyNode||h===this.headerNode)break;while(b);return m},up:function(a,b,f){a.element||(a=this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",f))},down:function(a,b,f){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",f))},scrollTo:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&
(this.bodyNode.scrollTop=a.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var f in a)this.set(f,a[f]);else f="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[f]?this[f].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:f,
_setClass:g,_getClassName:f,_setClassName:g,_setSort:function(a,b){this.sort="string"!==typeof a?a:[{property:a,descending:b}];this._applySort()},_applySort:function(){this.refresh();if(this._lastCollection){var a=this.sort;if(a&&0<a.length){var b=a[0].property,f=!!a[0].descending;this._lastCollection.sort(function(a,g){a=a[b];g=g[b];void 0===a&&(a="");void 0===g&&(g="");return a===g?0:a>g!==f?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(b){var f=this.headerNode;this.showHeader=
b;a.toggle(f,"dgrid-header-hidden",!b);this.renderHeader();this.resize();b&&(f.scrollLeft=this.getScrollPosition().x)},_setShowFooter:function(b){this.showFooter=b;a.toggle(this.footerNode,"dgrid-footer-hidden",!b);this.resize()}});E.autoIdPrefix="dgrid_";return E})},"dgrid/util/misc":function(){define(["dojo/has"],function(B){var w=[],q,a,m,h=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,p=setTimeout,x=clearTimeout;B.add("requestidlecallback",function(a){return"function"===typeof a.requestIdleCallback});var g=
{defaultDelay:15,throttle:function(a,h,m){var b=!1;m=m||g.defaultDelay;return function(){b||(b=!0,a.apply(h,arguments),p(function(){b=!1},m))}},throttleDelayed:function(a,h,m){var b=!1;m=m||g.defaultDelay;return function(){if(!b){b=!0;var f=arguments;p(function(){b=!1;a.apply(h,f)},m)}}},debounce:function(a,h,m){var b;m=m||g.defaultDelay;return function(){b&&(x(b),b=null);var f=arguments;b=p(function(){b=null;a.apply(h,f)},m)}},each:function(a,g,h){var b,f;if(a)if("number"===typeof a.length)for(b=
0,f=a.length;b<f;b++)g.call(h,a[b],b,a);else for(b in a)g.call(h,a[b],b,a)},addCssRule:function(f,g){q||(q=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(q),q=q.sheet||q.styleSheet,a=q.deleteRule?"deleteRule":"removeRule",m=q.cssRules?"cssRules":"rules");var h=w.length;w[h]=(q.cssRules||q.rules).length;q.addRule?q.addRule(f,g):q.insertRule(f+"{"+g+"}",w[h]);return{get:function(a){return q[m][w[h]].style[a]},set:function(a,f){"undefined"!==typeof w[h]&&(q[m][w[h]].style[a]=
f)},remove:function(){var b=w[h],f,g;if(void 0!==b)for(q[a](b),w[h]=void 0,f=h+1,g=w.length;f<g;f++)w[f]>b&&w[f]--}}},escapeCssIdentifier:function(a,g){return"string"===typeof a?a.replace(h,g||"\\$1"):a}};return g})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/query dojo/string dojo/has dojo/keys dojo/when ../util/misc dojo/i18n!./nls/pagination dojo/_base/sniff".split(" "),function(B,
w,q,a,m,h,p,x,g,f,n,u,b,t){function D(a){a._removeNoDataNode()||a.cleanup();a.contentNode.innerHTML=""}function E(a){if(a.loadingNode)a._loadingCount--,a._loadingCount||(m.destroy(a.loadingNode),delete a.loadingNode);else if(a._oldPageNodes){for(var b in a._oldPageNodes)a.removeRow(a._oldPageNodes[b]);delete a._oldPageNodes}delete a._isLoading}return w(B,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:t,
showFooter:!0,_currentPage:1,_loadingCount:0,buildRendering:function(){this.inherited(arguments);var a=this,b=this.paginationNode=m.create("div",{className:"dgrid-pagination"},this.footerNode),f=this.paginationStatusNode=m.create("div",{className:"dgrid-status"},b),g=this.i18nPagination;"function"===typeof this._processScroll&&(this.bodyNode.innerHTML=g.notCompatibleWithOnDemand,console.warn(g.notCompatibleWithOnDemand));f.tabIndex=0;this._updatePaginationSizeSelect();this._updateRowsPerPageOption();
this._updatePaginationStatus(this._total);b=this.paginationNavigationNode=m.create("div",{className:"dgrid-navigation"},b);this.firstLastArrows&&(this.paginationFirstNode=m.create("span",{"aria-label":g.gotoFirst,className:"dgrid-first dgrid-page-link",innerHTML:"\u00ab",tabIndex:0},b));this.previousNextArrows&&(this.paginationPreviousNode=m.create("span",{"aria-label":g.gotoPrev,className:"dgrid-previous dgrid-page-link",innerHTML:"\u2039",tabIndex:0},b));this.paginationLinksNode=m.create("span",
{className:"dgrid-pagination-links"},b);this.previousNextArrows&&(this.paginationNextNode=m.create("span",{"aria-label":g.gotoNext,className:"dgrid-next dgrid-page-link",innerHTML:"\u203a",tabIndex:0},b));this.firstLastArrows&&(this.paginationLastNode=m.create("span",{"aria-label":g.gotoLast,className:"dgrid-last dgrid-page-link",innerHTML:"\u00bb",tabIndex:0},b));this._listeners.push(p(b,".dgrid-page-link:click,.dgrid-page-link:keydown",function(b){if("keydown"!==b.type||13===b.keyCode){b=this.className;
var f,g;a._isLoading||-1<b.indexOf("dgrid-page-disabled")||(f=a._currentPage,g=Math.ceil(a._total/a.rowsPerPage),this===a.paginationPreviousNode?a.gotoPage(f-1):this===a.paginationNextNode?a.gotoPage(f+1):this===a.paginationFirstNode?a.gotoPage(1):this===a.paginationLastNode?a.gotoPage(g):"dgrid-page-link"===b&&a.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxChangeHandle&&this._pagingTextBoxChangeHandle.remove();this._pagingTextBoxKeyPressHandle&&
this._pagingTextBoxKeyPressHandle.remove()},_updatePaginationSizeSelect:function(){var b=this.pageSizeOptions,f=this.paginationSizeSelect,g;if(b&&b.length){f||(f=this.paginationSizeSelect=m.create("select",{"aria-label":this.i18nPagination.rowsPerPage,className:"dgrid-page-size"},this.paginationNode),g=this._paginationSizeChangeHandle=p(f,"change",a.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(g));for(g=f.options.length=0;g<b.length;g++)m.create("option",
{innerHTML:b[g],selected:this.rowsPerPage===b[g],value:b[g]},f);this._updateRowsPerPageOption()}else b&&b.length||!f||(m.destroy(f),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,b=this.pageSizeOptions,f=this.paginationSizeSelect;f&&(0>q.indexOf(b,a)?this._setPageSizeOptions(b.concat([a])):
f.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=a;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(a){function b(a){a=+a;!isNaN(a)&&0<a&&a<=E&&q.gotoPage(a)}function f(a,f){var g,h=!0;q.pagingTextBox&&a===C&&1<E?(f=m.create("input",{"aria-label":u.jumpPage,className:"dgrid-page-input",type:"text",value:C},w),q._pagingTextBoxChangeHandle=p(f,"change",function(){h&&b(+this.value);h=!0}),q._pagingTextBoxKeyPressHandle=p(f,"keypress",function(a){a.keyCode===n.ENTER&&
(h=!1,b(+this.value))}),W&&"INPUT"===W.tagName&&f.focus()):(g=a===C,f=m.create("span",{"aria-label":u.gotoPage,className:"dgrid-page-link"+(g?" dgrid-page-disabled":""),innerHTML:a+(f?" ":""),tabIndex:g?-1:0},w),Z===a&&(g?a<E?Z++:T.focus():f.focus()),g||(T=f))}function g(a,b){h.toggle(a,"dgrid-page-disabled",b);a.tabIndex=b?-1:0}function t(){m.create("span",{className:"dgrid-page-skip",innerHTML:"..."},w)}var q=this,u=this.i18nPagination,w=this.paginationLinksNode,C=this._currentPage,D=this.pagingLinks,
B=this.paginationNavigationNode,E=Math.ceil(a/this.rowsPerPage);a=this._pagingTextBoxKeyPressHandle;var O=this._pagingTextBoxChangeHandle,W=document.activeElement,Z,T;W&&this.paginationNavigationNode.contains(W)?"dgrid-page-link"===W.className&&(Z=+W.innerHTML):W=null;a&&a.remove();O&&O.remove();w.innerHTML="";x(".dgrid-first, .dgrid-previous",B).forEach(function(a){g(a,1===C)});x(".dgrid-last, .dgrid-next",B).forEach(function(a){g(a,C>=E)});if(D&&0<E){f(1,!0);B=C-D;for(2<B?t():B=2;B<Math.min(C+D+
1,E);B++)f(B,!0);C+D+1<E&&t();1<E&&f(E)}else q.pagingTextBox&&f(C);W&&-1===W.tabIndex&&(D=x('[tabindex\x3d"0"]',this.paginationNavigationNode),W===this.paginationPreviousNode||W===this.paginationFirstNode?W=D[0]:D.length&&(W=D[D.length-1]),W&&W.focus())},_updatePaginationStatus:function(a){var b=this.rowsPerPage,f=Math.min(a,(this._currentPage-1)*b+1);this.paginationStatusNode.innerHTML=g.substitute(this.i18nPagination.status,{start:f,end:Math.min(a,f+b-1),total:a})},refresh:function(a){var b=this,
f=a&&a.keepCurrentPage?Math.min(this._currentPage,Math.ceil(this._total/this.rowsPerPage)):1;this.inherited(arguments);return this.gotoPage(f).then(function(a){b._emitRefreshComplete();return a})},_onNotification:function(a,b,f){a=this.rowsPerPage;var g=this._currentPage*a;"add"===b.type&&b.index<g||"delete"===b.type&&b.previousIndex<g||"update"===b.type&&Math.floor(b.index/a)!==Math.floor(b.previousIndex/a)?this.gotoPage(Math.min(this._currentPage,Math.ceil(b.totalLength/this.rowsPerPage))||1):f===
this._renderedCollection&&b.totalLength!==this._total&&(this._updatePaginationStatus(b.totalLength),this._updateNavigation(b.totalLength))},renderQueryResults:function(a,b){var f=this,g=this.inherited(arguments);b||(this._topLevelRequest&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof g.cancel&&(this._topLevelRequest=g),g.then(function(){f._topLevelRequest&&delete f._topLevelRequest}));return g},insertRow:function(){var a=this._oldPageNodes,b=this.inherited(arguments);
a&&b===a[b.id]&&delete a[b.id];return b},gotoPage:function(a){var b=this,f=(this._currentPage-1)*this.rowsPerPage;if(!this._renderedCollection)return console.warn("Pagination requires a collection to operate."),u([]);this._renderedCollection.releaseRange&&this._renderedCollection.releaseRange(f,f+this.rowsPerPage);return this._trackError(function(){var f=b.rowsPerPage,g=(a-1)*f,h={start:g,count:f},n,p=b.contentNode,t,q,u;if(b.showLoadingMessage)b._loadingCount++,D(b),b.loadingNode=m.create("div",
{className:"dgrid-loading",innerHTML:b.loadingMessage},p);else for(b._oldPageNodes=t={},p=p.children,q=0,u=p.length;q<u;q++)t[p[q].id]=p[q];b._isLoading=!0;n=b._renderedCollection.fetchRange({start:g,end:g+f});return b.renderQueryResults(n,null,h).then(function(h){E(b);b.scrollTo({y:0});b._rows&&(b._rows.min=g,b._rows.max=g+f-1);n.totalLength.then(function(f){f||b._insertNoDataNode();b._total=f;b._currentPage=a;b._rowsOnPage=h.length;b._updatePaginationStatus(f);b._updateNavigation(f)});return n},
function(a){E(b);throw a;})})}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/dom-construct dojo/has dojo/on dojo/when".split(" "),function(B,w,q,a,m,h,p,x){function g(a){if("object"!==typeof a)a=Error(a);else if("cancel"===a.dojoType)return;p.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})&&console.error(a)}return B(null,{collection:null,_renderedCollection:null,_rows:null,_observerHandle:null,shouldTrackCollection:!0,
getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={};this._updating={};this._columnsWithSet={};a.before(this,"configStructure",w.hitch(this,function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments);this._renderedCollection&&this._cleanupCollection();this._refreshTimeout&&clearTimeout(this._refreshTimeout)},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a);this.inherited(arguments)},_setCollection:function(a){this._renderedCollection&&
(this.cleanup(),this._cleanupCollection({shouldRevert:!a||a.storage!==this._renderedCollection.storage}));this.collection=a;if(this._started){if(a){var f=a;this.sort&&0<this.sort.length&&(f=a.sort(this.sort));f.track&&this.shouldTrackCollection&&(f=f.track(),this._rows=[],this._observerHandle=this._observeCollection(f,this.contentNode,{rows:this._rows}));this._renderedCollection=f}this.refresh()}},_setStore:function(){this.collection||console.debug("set('store') call detected, but you probably meant set('collection')")},
_getTotal:function(){return this._total},_cleanupCollection:function(a){a=a||{};this._renderedCollection.tracking&&this._renderedCollection.tracking.remove();this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=this._rows=null);!1!==a.shouldRevert&&(this.dirty={});this._renderedCollection=this.collection=null},_applySort:function(){this.collection?this.set("collection",this.collection):this.store&&console.debug("_StoreMixin found store property but not collection; this is often the sign of a mistake during migration from 0.3 to 0.4")},
_emitRefreshComplete:function(){var a=this;this._refreshTimeout=setTimeout(function(){p.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a});a._refreshTimeout=null},0)},_insertNoDataNode:function(a){this._removeNoDataNode();a=a||this.contentNode;var f=this.noDataNode=m.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage});a.insertBefore(f,this._getFirstRowSibling?this._getFirstRowSibling(a):null);return f},_removeNoDataNode:function(){return this.noDataNode?
(m.destroy(this.noDataNode),delete this.noDataNode,!0):!1},row:function(){var a=this.inherited(arguments);a&&a.data&&"undefined"!==typeof a.id&&(a.id=this.collection.getIdentity(a.data));return a},refresh:function(){var a=this.inherited(arguments);this.collection||this._insertNoDataNode();return a},refreshCell:function(a){if(!this.collection||!this._createBodyRowCell)throw Error("refreshCell requires a Grid with a collection.");this.inherited(arguments);return this.collection.get(a.row.id).then(w.hitch(this,
"_refreshCellFromItem",a))},_refreshCellFromItem:function(a,g,h){var b=a.element;m.empty(b);var f=this.dirty&&this.dirty[a.row.id];f&&(g=w.delegate(g,f));this._createBodyRowCell(b,a.column,g,h)},renderArray:function(){var a=this.inherited(arguments);this.collection||a.length&&this.noDataNode&&m.destroy(this.noDataNode);return a},insertRow:function(a,g,h,b,p){var f=this.collection,n=this.dirty,f=f&&f.getIdentity(a),t;f in n&&!(f in this._updating)&&(t=n[f]);t&&(a=w.delegate(a,t));n=this.inherited(arguments);
p&&p.rows&&(p.rows[b]=n);this.noDataNode&&(m.destroy(this.noDataNode),this.noDataNode=null);return n},updateDirty:function(a,g,h){var b=this.dirty,f=b[a];f||(f=b[a]={});f[g]=h},save:function(){function a(a,f){return function(m){var n=g._columnsWithSet,t=g._updating,q,u;if("function"===typeof m.set)m.set(f);else for(q in f)m[q]=f[q];for(q in n)u=n[q].set(m),void 0!==u&&(m[q]=u);t[a]=!0;return h.put(m).then(function(f){delete b[a];delete t[a];p[a]=f;return p})}}var g=this,h=this.collection,b=this.dirty,
m=new q,p={},x=function(a){var b;return g.getBeforePut||!(b=g.row(a).data)?function(){return h.get(a)}:function(){return b}},w=m.then(function(){return p}),A;for(A in b)var B=a(A,b[A]),w=w.then(x(A)).then(B);m.resolve();return w},revert:function(){this.dirty={};this.refresh()},_trackError:function(a){"string"===typeof a&&(a=w.hitch(this,a));var f=this,h;try{h=x(a())}catch(b){a=new q,a.reject(b),h=a.promise}h.otherwise(function(a){g.call(f,a)});return h},removeRow:function(a,g,h){var b={element:a};
g||this.up(b).element!==a||this.down(b).element!==a||this._insertNoDataNode();(b=h&&h.rows||this._rows)&&delete b[a.rowIndex];return this.inherited(arguments)},renderQueryResults:function(a,g,h){h=w.mixin({rows:this._rows},h);var b=this;return a.then(function(a){a=b.renderArray(a,g,h);delete b._lastCollection;return a})},_observeCollection:function(a,g,h){var b=this,f=h.rows,m,n=[a.on("delete, update",function(a){var n=a.previousIndex,p=a.index;void 0!==n&&f[n]&&("max"in f&&(void 0===p||p<f.min||
p>f.max)&&f.max--,m=f[n],m.parentNode===g&&b.removeRow(m,!1,h),f.splice(n,1),("delete"===a.type||"update"===a.type&&(n<p||void 0===p))&&f[n]&&f[n].rowIndex--);"delete"===a.type&&(m=null)}),a.on("add, update",function(a){var n=a.previousIndex,p=a.index;if(void 0!==p&&(!("max"in f)||p>=f.min&&p<=f.max)){"max"in f&&(void 0===n||n<f.min||n>f.max)&&f.max++;if(f.length){if(n=f[p],!n&&(n=f[p-1]))n=(n.connected||n).nextSibling}else n=b._getFirstRowSibling&&b._getFirstRowSibling(g);m&&n&&m.id===n.id&&(n=(n.connected||
n).nextSibling);n&&!n.parentNode&&(n=document.getElementById(n.id));f.splice(p,0,void 0);m=b.insertRow(a.target,g,n,p,h);b.highlightRow(m)}m=null}),a.on("add, delete, update",function(g){var h="undefined"!==typeof g.previousIndex?g.previousIndex:Infinity,m="undefined"!==typeof g.index?g.index:Infinity,n=Math.min(h,m);h!==m&&f[n]&&b.adjustRowIndices(f[n]);Infinity!==h&&b._processScroll&&(f[h]||f[h-1])&&b._processScroll();b._onNotification(f,g,a);a===b._renderedCollection&&"totalLength"in g&&(b._total=
g.totalLength)})];return{remove:function(){for(;0<n.length;)n.pop().remove()}}},_onNotification:function(){}})})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/_WidgetBase","dijit/registry"],function(B,w,q,a){var m=q.prototype;return B(null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:!0,buildRendering:function(){a.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);
var a=this.getParent();a&&a.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);a.remove(this.id)},getChildren:function(){return[]},getParent:function(){return a.getEnclosingWidget(this.domNode.parentNode)},isLeftToRight:function(){return!this.isRTL},placeAt:function(a,p){return m.placeAt.call(this,a,p)},resize:function(a){a&&w.setMarginBox(this.domNode,a);this.inherited(arguments)},_set:function(a,m){this[a]=m},
watch:function(){}})})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(B,w,q){return B([w,q],{})})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/when dojo/query ./util/misc".split(" "),function(B,w,q,a,m,h,p,x,g){function f(a){return a&&(0<=a.className.indexOf("dgrid-row")||0<=a.className.indexOf("dgrid-loading"))}function n(a){return a&&0<=a.className.indexOf("dgrid-preload")}
var u=0;return q([B,w],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:g.defaultDelay,keepScrollPosition:!1,rowHeight:0,_deleteQueue:[],postCreate:function(){this.inherited(arguments);var a=this;h(this.bodyNode,"scroll",g[this.pagingMethod](function(b){a._processScroll(b)},null,this.pagingDelay))},renderQuery:function(b,f){var g=this,h=f&&f.container||this.contentNode,n,t,q,x,w=0,B=f&&f.start||0;"level"in
b&&(w=x=b.level);n={query:b,count:0,level:w,top:!1};var y={node:m.create("div",{className:"dgrid-preload",style:{height:"0"}},h),count:0,query:b,next:n,level:w,top:!0};t=y.node;t.rowIndex=0;n.previous=y;q=n.node=m.create("div",{className:"dgrid-preload",style:{height:"0"}},h);y.id=u++;t.setAttribute("data-preloadid",y.id);n.id=u++;q.setAttribute("data-preloadid",n.id);q.rowIndex=this.minRowsPerPage;g._insertPreload(y);var I=m.create("div",{className:"dgrid-loading"},q,"before");m.create("div",{className:"dgrid-below"},
I).innerHTML=this.loadingMessage;f=a.mixin({start:0,count:this.minRowsPerPage},f);null!=x&&(f.queryLevel=x);return this._trackError(function(){var a=b(f);return g.renderQueryResults(a,q,f).then(function(b){return a.totalLength.then(function(a){var h=b.length,u=q.parentNode;!g._rows||"queryLevel"in f||(g._rows.min=0,g._rows.max=h===a?Infinity:h-1);m.destroy(I);"queryLevel"in f||(g._total=a);0===a&&u&&(g.noDataNode&&m.destroy(g.noDataNode),g._insertNoDataNode(u));y.count=B;n.count=a-h-B;q.rowIndex=
B+h;a?g._updatePreloadRowHeights(y):(q.style.display="none",t.style.display="none");g._previousScrollPosition&&u.offsetHeight&&(g.scrollTo(g._previousScrollPosition),delete g._previousScrollPosition);return p(g._processScroll()).then(function(){return b})})}).otherwise(function(a){m.destroy(I);throw a;})})},_insertPreload:function(a){var b=this.preload;if(b){for(;b.node.compareDocumentPosition(a.node)&Node.DOCUMENT_POSITION_PRECEDING;)if(b=b.previous,null==b)return;for(;b.node.compareDocumentPosition(a.node)&
Node.DOCUMENT_POSITION_FOLLOWING&&b.next;)b=b.next;b.previous.next=a;a.previous=b.previous;a=a.next;a.next=b;b.previous=a}else this.preload=a},refresh:function(a){var b=this,f=a&&a.keepScrollPosition;"undefined"===typeof f&&(f=this.keepScrollPosition);f&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this._renderedCollection)return this.renderQuery(function(a){return b._renderedCollection.fetchRange({start:a.start,end:a.start+a.count})}).then(function(){b._emitRefreshComplete()})},
resize:function(){this.inherited(arguments);this._processScroll()},cleanup:function(){this.inherited(arguments);this.preload=null},renderQueryResults:function(a){var b=this.inherited(arguments),f=this._getRenderedCollection(this.preload);f&&f.releaseRange&&b.then(function(b){b[0]&&!b[0].parentNode.tagName&&a.totalLength.then(function(){f.releaseRange(b[0].rowIndex,b[b.length-1].rowIndex+1)})});return b},_getFirstRowSibling:function(a){return a.lastChild},_calcRowHeight:function(a){var b=a.nextSibling;
return b&&!/\bdgrid-preload\b/.test(b.className)?b.offsetTop-a.offsetTop:a.offsetHeight},_calcAverageRowHeight:function(a){for(var b=a.length,f=0,g=0;g<b;g++)f+=this._calcRowHeight(a[g]);return b&&f?f/b:0},_updatePreloadRowHeights:function(){var a=this.preload;if(a){for(;a.previous;)a=a.previous;for(;a;)a.rowHeight||(a.rowHeight=this.rowHeight||this._calcAverageRowHeight(a.node.parentNode.querySelectorAll(".dgrid-row")),this._adjustPreloadHeight(a)),a=a.next}},lastScrollTop:0,_processScroll:function(a){function b(a,
b){b=b?"next":"previous";for(var f;f=a[b];)a=f;return a}function g(a,g){function h(){var b;a:{b=!g;for(var f=a;f=f[g?"previous":"next"];)if(b===f.top){b=f;break a}b=void 0}if(b&&c!==b&&!n(b.top?b.node.nextSibling:b.node.previousSibling))return d(),a=b,m=a.node,e=g?a.node.offsetTop-B:w-(a.node.offsetTop+a.node.offsetHeight),y=(b=l(m))&&b.rowIndex,x=void 0,b}function l(a){var c=n(a);(a=a[p])&&!f(a)&&(a=c&&n(a)?null:(c=h())?c:l(a));return a}function d(){a.count+=t;g&&(m.rowIndex-=t);u._adjustPreloadHeight(a);
t=0;u._releaseRange(a,g,y,x)}var c=a;a=b(a,g);var e=g?a.node.offsetTop-B:w-(a.node.offsetTop+a.node.offsetHeight),k=u.farOffRemoval,m=a.node,p=g?"previousSibling":"nextSibling",t=0,q=0,y,x;if(e>2*k){var A;y=(A=l(m))&&A.rowIndex;for(x=void 0;A&&c!==a;){var D=u._calcRowHeight(A);q+D+k>e||!f(A)?A=h():(q+=D,t+=A.count||1,u._pruneRow(A,g),"rowIndex"in A&&(x=A.rowIndex),A=l(A))}d();u._deleteNodeQueue()}}function h(a,b){do a=b?a.next:a.previous;while(a&&!a.node.offsetWidth);return a}var p=this.preload,q;
this._updatePreloadRowHeights();if(q=p&&p.rowHeight){var u=this,x=u.bodyNode,w=a&&a.scrollTop||this.getScrollPosition().y,B=x.offsetHeight+w,y;a=u.lastScrollTop;var x=u.bufferRows*q,I=x-q,M,N=!0;for(u.lastScrollTop=w;p&&!p.node.offsetWidth;)p=p.previous;for(;p&&p!==y;){y=u.preload;u.preload=p;q=p.node;var P=q.offsetTop;if(B+1+I<P)p=h(p,N=!1);else if(w-1-I>P+q.offsetHeight)p=h(p,N=!0);else{var P=((q.top?w-x:B)-P)/p.rowHeight,S=(B-w+2*x)/p.rowHeight,S=S+Math.min(Math.abs(Math.max(Math.min((w-a)*p.rowHeight,
u.maxRowsPerPage/2),u.maxRowsPerPage/-2)),10);q.top&&(P-=S);P=Math.max(P,0);10>P&&0<P&&S+P<u.maxRowsPerPage&&(S+=Math.max(0,P),P=0);S=Math.min(Math.max(S,u.minRowsPerPage),u.maxRowsPerPage,p.count);if(0===S)p=h(p,N);else{var S=Math.ceil(S),P=Math.min(Math.floor(P),p.count-S),O={};p.count-=S;var W=q,Z,T=u.queryRowsOverlap,Y=!p.top&&p;Y?(p.previous&&(g(p),0<P&&n(q.previousSibling)?(P=Math.min(p.count,P),p.previous.count+=P,u._adjustPreloadHeight(p.previous,!0),q.rowIndex+=P,T=0):S+=P,p.count-=P),O.start=
q.rowIndex-T,O.count=Math.min(S+T,u.maxRowsPerPage),q.rowIndex=O.start+O.count):(p.next&&(W=q.nextSibling,g(p,!0),n(q.nextSibling)?(p.next.count+=p.count-P,p.next.node.rowIndex=P+S,u._adjustPreloadHeight(p.next),p.count=P,T=0,W=p.next.node):Z=!0),O.start=p.count,O.count=Math.min(S+T,u.maxRowsPerPage),O.scrollingUp=!0);Z&&W&&W.offsetWidth&&(Z=W.offsetTop);u._adjustPreloadHeight(p);"level"in p.query&&(O.queryLevel=p.query.level);if("queryLevel"in O||!(O.start>u._total||0>O.count)){var aa=m.create("div",
{className:"dgrid-loading",style:{height:S*p.rowHeight+"px"}},W,"before");m.create("div",{className:"dgrid-"+(Y?"below":"above"),innerHTML:u.loadingMessage},aa);aa.count=S;u._trackError(function(){(function(a,b,f){var g=p.query(O);M=u.renderQueryResults(g,a,O).then(function(d){var c=u._rows;!c||"queryLevel"in O||!d.length||(b?(c.max<=c.min&&(c.min=d[0].rowIndex),c.max=d[d.length-1].rowIndex):(c.max<=c.min&&(c.max=d[d.length-1].rowIndex),c.min=d[0].rowIndex));W=a.nextSibling;m.destroy(a);f&&W&&W.offsetWidth&&
u.scrollTo({y:u.bodyNode.scrollTop+W.offsetTop-f});g.totalLength.then(function(a){"queryLevel"in O||(u._total=a,u._rows&&u._rows.max>=u._total-1&&(u._rows.max=Infinity));b&&(b.count=a-b.node.rowIndex,u._adjustPreloadHeight(b))});u._processScroll();return d},function(b){m.destroy(a);throw b;})})(aa,Y,Z)});p=p.previous}}}}return M}},_adjustPreloadHeight:function(a,f){a.node.style.height=this._calculatePreloadHeight(a,f)+"px"},_calculatePreloadHeight:function(a,f){return Math.min(a.count*a.rowHeight,
f?Infinity:this.maxEmptySpace)},_pruneRow:function(a,f,g){this.removeRow(a,!0,g);this._queueNodeForDeletion(a)},_queueNodeForDeletion:function(a){this._deleteQueue.push(a)},_deleteNodeQueue:function(){for(var a=document.createElement("div"),f=this._deleteQueue,g=f.length;g--;)a.appendChild(f[g]);this._deleteQueue=[];setTimeout(function(){m.destroy(a)},1)},_removePreloads:function(a){if(a&&a.length){var b=this,f=this._getHeadPreload();a.forEach(function(a){if(a=b._findPreload(a,f))a.previous&&(a.previous.next=
a.next),a.next&&(a.next.previous=a.previous)})}},_getHeadPreload:function(){var a=this.preload;if(a)for(;a.previous;)a=a.previous;return a},_findPreload:function(a,f){for(f||(f=this._getHeadPreload());f;){if(f.node===a)return f;f=f.next}},_getRenderedCollection:function(){return this._renderedCollection},_releaseRange:function(a,f,g,h){if(a){var b=a.level;a=this._getRenderedCollection(a);null!=h&&a.releaseRange&&"number"===typeof g&&"number"===typeof h&&(f?a.releaseRange(h,g+1):a.releaseRange(g,h+
1),this._rows&&!b&&(this._rows[f?"max":"min"]=h,this._rows.max>=this._total-1&&(this._rows.max=Infinity)))}}})})},"dgrid/Selection":function(){define("dojo/_base/declare dojo/dom-class dojo/on dojo/has dojo/aspect ./List dojo/has!touch?./util/touch dojo/query dojo/_base/sniff dojo/dom".split(" "),function(B,w,q,a,m,h,p){function x(a,b){b=a.unselectable=b?"on":"";a=a.getElementsByTagName("*");for(var f=a.length;--f;)"INPUT"!==a[f].tagName&&"TEXTAREA"!==a[f].tagName&&(a[f].unselectable=b)}function g(b,
f){var g=b.bodyNode,h=f?"text":21>a("ff")?"-moz-none":"none";n&&"msUserSelect"!==n?g.style[n]=h:a("dom-selectstart")?f||b._selectstartHandle?f&&b._selectstartHandle&&(b._selectstartHandle.remove(),delete b._selectstartHandle):b._selectstartHandle=q(g,"selectstart",function(a){var b=a.target&&a.target.tagName;"INPUT"!==b&&"TEXTAREA"!==b&&a.preventDefault()}):(x(g,!f),f||b._unselectableHandle)?f&&b._unselectableHandle&&(b._unselectableHandle.remove(),delete b._unselectableHandle):b._unselectableHandle=
m.after(b,"renderRow",function(a){x(a,!0);return a})}a.add("dom-comparedocumentposition",function(a,b,f){return!!f.compareDocumentPosition});a.add("dom-selectstart","undefined"!==typeof document.onselectstart);var f=a("mac")?"metaKey":"ctrlKey",n=a("css-user-select"),u=(h=a("pointer"))&&"MS"===h.slice(0,2),b=h?h+(u?"Down":"down"):"mousedown",t=h?h+(u?"Up":"up"):"mouseup";"WebkitUserSelect"===n&&"undefined"!==typeof document.documentElement.style.msUserSelect&&(n=!1);return B(null,{selectionDelegate:".dgrid-row",
selectionEvents:b+","+t+",dgrid-cellfocusin",selectionTouchEvents:a("touch")?p.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var a=this.selectionMode;this.selectionMode="";this._setSelectionMode(a)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&
this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(a){a!==this.selectionMode&&(this.clearSelection(),this.selectionMode=a,this._selectionHandlerName="_"+a+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},_setAllowTextSelection:function(a){"undefined"!==typeof a?g(this,a):g(this,"none"===this.selectionMode);this.allowTextSelection=a},_handleSelect:function(a,
f){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(f))&&("dgrid-cellfocusin"!==a.type||"mousedown"!==a.parentType)&&(a.type!==t||f===this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=a;if(!a.keyCode||!a.ctrlKey||32===a.keyCode)if(!a.shiftKey&&a.type===b&&this.isSelected(f))this._waitForMouseUp=f;else this[this._selectionHandlerName](a,f);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(a,b){a=a.keyCode?a.ctrlKey:a[f];this._lastSelected===
b?this.select(b,null,!a||!this.isSelected(b)):(this.clearSelection(),this.select(b),this._lastSelected=b)},_multipleSelectionHandler:function(a,b){var g=this._lastSelected,h=a.keyCode?a.ctrlKey:a[f],m;a.shiftKey||(m=h?null:!0,g=null);this.select(b,g,m);g||(this._lastSelected=b)},_extendedSelectionHandler:function(a,b){(2===a.button?this.isSelected(b):a.keyCode?a.ctrlKey:a[f])||this.clearSelection(null,!0);this._multipleSelectionHandler(a,b)},_toggleSelectionHandler:function(a,b){this.select(b,null,
null)},_initSelectionEvents:function(){var b=this,g=this.contentNode,h=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};a("touch")&&!a("pointer")&&this.selectionTouchEvents?(q(g,p.selector(h,this.selectionTouchEvents),function(a){b._handleSelect(a,this);b._ignoreMouseSelect=this}),q(g,q.selector(h,this.selectionEvents),function(a){b._ignoreMouseSelect!==this?b._handleSelect(a,this):a.type===t&&(b._ignoreMouseSelect=null)})):q(g,q.selector(h,this.selectionEvents),function(a){b._handleSelect(a,
this)});this.addKeyHandler&&this.addKeyHandler(32,function(a){b._handleSelect(a,a.target)});if(this.allowSelectAll)this.on("keydown",function(a){a[f]&&65===a.keyCode&&!/\bdgrid-input\b/.test(a.target.className)&&(a.preventDefault(),b[b.allSelected?"clearSelection":"selectAll"]())});this._setCollection&&m.before(this,"_setCollection",function(a){b._updateDeselectionAspect(a)});this._updateDeselectionAspect()},_updateDeselectionAspect:function(a){function b(a,b){if((a=f.row(a))&&f.selection[a.id])f[b](a)}
var f=this,g;this._removeDeselectSignals&&this._removeDeselectSignals();g=a&&a.track&&this._observeCollection?[m.before(this,"_observeCollection",function(a){g.push(a.on("delete",function(a){"undefined"===typeof a.index&&b(a.id,"deselect")}))}),m.after(this,"_observeCollection",function(a){g.push(a.on("update",function(f){"undefined"!==typeof f.index&&b(a.getIdentity(f.target),"select")}))},!0)]:[m.before(this,"removeRow",function(a,b){b||(a=this.row(a))&&a.id in this.selection&&this.deselect(a)})];
this._removeDeselectSignals=function(){for(var a=g.length;a--;)g[a].remove();g=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(a){var b=this._selectionEventQueues[a],f=this._selectionTriggerEvent,g;g={bubbles:!0,grid:this};f&&(g.parentType=f.type);g[this._selectionTargetType]=b;this._selectionEventQueues[a]=[];q.emit(this.contentNode,"dgrid-"+a,g)},_fireSelectionEvents:function(){var a=this._selectionEventQueues,b;for(b in a)a[b].length&&this._fireSelectionEvent(b)},_select:function(a,
b,f){var g,h,m;"undefined"===typeof f&&(f=!0);a.element||(a=this.row(a));if(!1===f||this.allowSelect(a))if(g=this.selection,h=!!g[a.id],null===f&&(f=!h),m=a.element,f||this.allSelected?g[a.id]=f:delete this.selection[a.id],m&&(f?w.add(m,"dgrid-selected"+(this.addUiClasses?" ui-state-active":"")):w.remove(m,"dgrid-selected ui-state-active")),f!==h&&m&&this._selectionEventQueues[(f?"":"de")+"select"].push(a),b)if(b.element||(b=this.row(b)),b){if(b=b.element)for(g=this._determineSelectionDirection(m,
b),g||(b=document.getElementById(b.id),g=this._determineSelectionDirection(m,b));a.element!==b&&(a=this[g](a));)this._select(a,null,f)}else this._lastSelected=m,console.warn("The selection range has been reset because the beginning of the selection is no longer in the DOM. If you are using OnDemandList, you may wish to increase farOffRemoval to avoid this, but note that keeping more nodes in the DOM may impact performance.")},_determineSelectionDirection:a("dom-comparedocumentposition")?function(a,
b){a=b.compareDocumentPosition(a);return a&1?!1:2===a?"down":"up"}:function(a,b){return 1>b.sourceIndex?!1:b.sourceIndex>a.sourceIndex?"down":"up"},select:function(a,b,f){this._select(a,b,f);this._fireSelectionEvents()},deselect:function(a,b){this.select(a,b,!1)},clearSelection:function(a,b){this.allSelected=!1;for(var f in this.selection)a!==f&&this._select(f,null,!1);b||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var a in this._rowIdToObject){var b=
this.row(this._rowIdToObject[a]);this._select(b.id,null,!0)}this._fireSelectionEvents()},isSelected:function(a){if("undefined"===typeof a||null===a)return!1;a.element||(a=this.row(a));return a.id in this.selection?!!this.selection[a.id]:this.allSelected&&(!a.data||this.allowSelect(a))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var a=this.inherited(arguments),b=this.selection,f,g,h;for(f=0;f<a.length;f++)g=
this.row(a[f]),(h=g.id in b?b[g.id]:this.allSelected)&&this.select(g,null,h);this._fireSelectionEvents();return a}})})},"dgrid/Selector":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/sniff dojo/dom-construct dojo/dom-class ./Selection".split(" "),function(B,w,q,a,m,h){return B(h,{postCreate:function(){this.inherited(arguments);this.on(".dgrid-selector:click,.dgrid-selector:keydown",w.hitch(this,"_handleSelectorClick"));this.on("dgrid-select",w.hitch(this,"_changeSelectorInput",
!0));this.on("dgrid-deselect",w.hitch(this,"_changeSelectorInput",!1))},_defaultRenderSelectorInput:function(h,q,g,f){var n=h.grid;m.add(g,"dgrid-selector");return g.input=a.create("input",{"aria-checked":q,checked:q,disabled:!n.allowSelect(n.row(f)),tabIndex:isNaN(h.tabIndex)?-1:h.tabIndex,type:h.selector},g)},_configureSelectorColumn:function(a){var h=this,g=a.selector;this._selectorColumns.push(a);this._selectorSingleRow=this._selectorSingleRow||"radio"===a.selector;var f="function"===typeof g?
g:this._defaultRenderSelectorInput;a.sortable=!1;a.renderCell=function(g,m,b){m=(m=g&&h.row(g))&&h.selection[m.id];f(a,!!m,b,g)};a.renderHeaderCell=function(g){var m="label"in a?a.label:a.field||"";"radio"!==a.selector&&h.allowSelectAll?(a._selectorHeaderCheckbox=f(a,!1,g,{}),h._hasSelectorHeaderCheckbox=!0):g.appendChild(document.createTextNode(m))}},_handleSelectorClick:function(a){if("INPUT"!==a.target.nodeName||"keydown"!==a.type||32!==a.keyCode){var h=this.cell(a).row;if("click"===a.type||32===
a.keyCode||!q("opera")&&13===a.keyCode||0===a.keyCode){this._selectionTriggerEvent=a;if(h){if(this.allowSelect(h)){var g=this._lastSelected&&this.row(this._lastSelected);this._selectorSingleRow?g&&g.id===h.id||(this.clearSelection(),this.select(h,null,!0),this._lastSelected=h.element):h&&(a.shiftKey?this._changeSelectorInput(!0,{rows:[h]}):g=null,g=a.shiftKey?g:null,this.select(g||h,h,g?void 0:null),this._lastSelected=h.element)}}else this[this.allSelected?"clearSelection":"selectAll"]();this._selectionTriggerEvent=
null}}},_changeSelectorInput:function(a,h){this._selectorColumns.length&&this._updateRowSelectors(a,h);this._hasSelectorHeaderCheckbox&&this._updateHeaderCheckboxes()},_updateRowSelectors:function(a,h){h=h.rows;for(var g=h.length,f=this._selectorColumns.length,m=0;m<g;m++)for(var p=0;p<f;p++){var b=this.cell(h[m],this._selectorColumns[p].id).element;b&&(b=(b.contents||b).input)&&!b.disabled&&(b.checked=a,b.setAttribute("aria-checked",a))}},_updateHeaderCheckboxes:function(){for(var a=this._selectorColumns.length,
h=0;h<a;h++){var g="false",f,m,q=this._selectorColumns[h]._selectorHeaderCheckbox;if(q){f=this.selection;m=!1;for(var b in f)if(f[b]!=this.allSelected){m=!0;break}q.indeterminate=m;q.checked=this.allSelected;m?g="mixed":this.allSelected&&(g="true");q.setAttribute("aria-checked",g)}}},configStructure:function(){this.inherited(arguments);var a=this.columns;this._selectorColumns=[];this._hasSelectorHeaderCheckbox=this._selectorSingleRow=!1;for(var h in a)a[h].selector&&this._configureSelectorColumn(a[h])},
_handleSelect:function(a){var h=this.cell(a).column;h&&h.selector||this.inherited(arguments)}})})},"dgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/dom-class dojo/on dojo/_base/lang dojo/has ./util/misc dojo/_base/sniff".split(" "),function(B,w,q,a,m,h,p){function x(a){a.preventDefault()}var g={checkbox:1,radio:1,button:1},f=/\bdgrid-cell\b/,n=/\bdgrid-row\b/,u=B(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);
this.keyMap||(this.keyMap=m.mixin({},u.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=m.mixin({},u.defaultHeaderKeyMap))},postCreate:function(){function b(a){var b=a.target;return b.type&&(!g[b.type]||32===a.keyCode)}function h(g){function h(){m._focusedHeaderNode&&(m._focusedHeaderNode.tabIndex=-1);if(m.showHeader){if(q)for(var a=m.headerNode.getElementsByTagName("th"),b=0,f;f=a[b];++b){if(t.test(f.className)){m._focusedHeaderNode=y=f;break}}else m._focusedHeaderNode=y=m.headerNode;y&&(y.tabIndex=
m.tabIndex)}}function p(){var a=m._focusedNode||y;if(!t.test(a.className)||!g.contains(a)){for(var b=g.getElementsByTagName("*"),f=0,h;h=b[f];++f)if(t.test(h.className)){a=m._focusedNode=h;break}y.tabIndex=-1;a.tabIndex=m.tabIndex}}var q=m.cellNavigation,t=q?f:n,u=g===m.headerNode,y=g;u?(h(),w.after(m,"renderHeader",h,!0)):(w.after(m,"renderArray",p,!0),w.after(m,"_onNotification",function(a,b){0===b.totalLength?g.tabIndex=0:1===b.totalLength&&"add"===b.type&&p()},!0));m._listeners.push(a(g,"mousedown",
function(a){b(a)||m._focusOnNode(a.target,u,a)}));m._listeners.push(a(g,"keydown",function(a){if(!a.metaKey&&!a.altKey){var f=m[u?"headerKeyMap":"keyMap"][a.keyCode];f&&!b(a)&&f.call(m,a)}}))}this.inherited(arguments);var m=this;this.tabableHeader&&(h(this.headerNode),a(this.headerNode,"dgrid-cellfocusin",function(){m.scrollTo({x:this.scrollLeft})}));h(this.contentNode);this._debouncedEnsureScroll=p.debounce(this._ensureScroll,this)},_pruneRow:function(){var a=this._focusedNode;this._focusedNode=
null;this.inherited(arguments);this._focusedNode=a},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b=this,f=document.activeElement===this._focusedNode,g=this[this.cellNavigation?"cell":"row"](this._focusedNode),h=g.row||g,m;a=a.element||a;a===h.element&&((m=this.down(h,1,!0))&&m.element!==a||(m=this.up(h,1,!0)),this._removedFocus={active:f,rowId:h.id,columnId:g.column&&g.column.id,siblingId:m&&m.element!==a?m.id:void 0},setTimeout(function(){b._removedFocus&&b._restoreFocus(h.id)},
0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(){var a=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(a);return a},_restoreFocus:function(a){var b=this._removedFocus,f;if((a=(a=a&&this.row(a))&&a.element&&a.id===b.rowId?a:"undefined"!==typeof b.siblingId&&this.row(b.siblingId))&&a.element){if(!a.element.parentNode.parentNode){b.wait=!0;return}"undefined"!==typeof b.columnId&&(f=this.cell(a,b.columnId))&&f.element&&(a=f);b.active&&
0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(q.add(a.element,"dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},addKeyHandler:function(a,b,f){return w.after(this[f?"headerKeyMap":"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},
_ensureColumnScroll:function(a){var b=this.getScrollPosition().x,f=a.offsetLeft;if(b>f)this.scrollTo({x:f});else{var g=this.bodyNode.clientWidth;a=a.offsetWidth;var h=f+a;b+g<h&&this.scrollTo({x:g>a?h-g:f})}},_ensureScroll:function(a,b){!a.column&&!a.row&&a.data&&a.element?this._ensureRowScroll(a.element):(this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!b&&this._ensureRowScroll(a.row.element),this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(a.element))},
_focusOnNode:function(b,g,h){var p="_focused"+(g?"Header":"")+"Node",t=this[p],u=this.cellNavigation?"cell":"row",y=this[u](b),x,w,A,B,C;if(b=y&&y.element){if(this.cellNavigation)for(x=b.getElementsByTagName("input"),C=0,A=x.length;C<A;C++)if(w=x[C],(-1!==w.tabIndex||"_dgridLastValue"in w)&&!w.disabled){w.focus();B=!0;break}null!==h&&(h=m.mixin({grid:this},h),h.type&&(h.parentType=h.type),h.bubbles||(h.bubbles=!0));t&&(q.remove(t,"dgrid-focus"),t.removeAttribute("tabindex"),h&&(h[u]=this[u](t),a.emit(t,
"dgrid-cellfocusout",h)));t=this[p]=b;h&&(h[u]=y);p=this.cellNavigation?f:n;!B&&p.test(b.className)&&(b.tabIndex=this.tabIndex,b.focus());q.add(b,"dgrid-focus");h&&a.emit(t,"dgrid-cellfocusin",h);this._debouncedEnsureScroll(y,g)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a){(a=a||this._focusedNode)?this._focusOnNode(a,!1):(this._removedFocus&&(this._removedFocus.active=!0),this.contentNode.focus())}}),b=u.moveFocusVertical=function(a,b){var f=this.cellNavigation,
g=this[f?"cell":"row"](a),g=f&&g.column.id;b=this.down(this._focusedNode,b,!0);f&&(b=this.cell(b,g));this._focusOnNode(b,!1,a);a.preventDefault()};B=u.moveFocusUp=function(a){b.call(this,a,-1)};h=u.moveFocusDown=function(a){b.call(this,a,1)};var t=u.moveFocusPageUp=function(a){b.call(this,a,-this.pageSkip)},D=u.moveFocusPageDown=function(a){b.call(this,a,this.pageSkip)},E=u.moveFocusHorizontal=function(a,b){if(this.cellNavigation){var f=!this.row(a);this._focusOnNode(this.right(this["_focused"+(f?
"Header":"")+"Node"],b),f,a);a.preventDefault()}},C=u.moveFocusLeft=function(a){E.call(this,a,-1)},A=u.moveFocusRight=function(a){E.call(this,a,1)},F=u.moveHeaderFocusEnd=function(a,b){var f;this.cellNavigation&&(f=this.headerNode.getElementsByTagName("th"),this._focusOnNode(f[b?0:f.length-1],!0,a));a.preventDefault()},H=u.moveHeaderFocusHome=function(a){F.call(this,a,!0)},Q=u.moveFocusEnd=function(a,b){var f=this.cellNavigation,g=this.contentNode,h=g.scrollTop+(b?0:g.scrollHeight),g=g[b?"firstChild":
"lastChild"],m=-1<g.className.indexOf("dgrid-preload"),n=m?g[(b?"next":"previous")+"Sibling"]:g,p;a.preventDefault();this.scrollTo({y:h});if(m){for(;n&&0>n.className.indexOf("dgrid-row");)n=n[(b?"next":"previous")+"Sibling"];if(!n)return}!m||1>g.offsetHeight?(f&&(n=this.cell(n,this.cell(a).column.id)),this._focusOnNode(n,!1,a)):p=w.after(this,"renderArray",function(g){var h=g[b?0:g.length-1];f&&(h=this.cell(h,this.cell(a).column.id));this._focusOnNode(h,!1,a);p.remove();return g})},K=u.moveFocusHome=
function(a){Q.call(this,a,!0)};u.defaultKeyMap={32:x,33:t,34:D,35:Q,36:K,37:C,38:B,39:A,40:h};u.defaultHeaderKeyMap={32:x,35:F,36:H,37:C,39:A};return u})},"dgrid/util/touch":function(){define(["dojo/on","dojo/query"],function(B,w){function q(m,h,p,q){if(!(1<p.targetTouches.length)){var g=p.changedTouches[0],f=g.screenX,n=g.screenY;q&&p.preventDefault();var u=B(m,"touchend",function(b){var g=b.changedTouches[0];b.targetTouches.length||(Math.abs(g.screenX-f)<a.tapRadius&&Math.abs(g.screenY-n)<a.tapRadius&&
(q&&b.preventDefault(),h.call(this,b)),u.remove())})}}var a={tapRadius:10,dbltapTime:250,selector:function(a,h,p){return function(m,g){var f=h.bubble;f?h=f:!1!==p&&(p=!0);return B(m,h,function(f){var h=f.target;3===h.nodeType&&(h=h.parentNode);for(;!w.matches(h,a,m);)if(h===m||!p||!(h=h.parentNode))return;return g.call(h,f)})}},countCurrentTouches:function(a,h){if(!("touches"in a))return-1;var m,q,g;for(q=m=0;g=a.touches[m];++m)h.contains(g.target)&&++q;return q},tap:function(a,h){return B(a,"touchstart",
function(m){q(a,h,m)})},dbltap:function(m,h){var p,x;return B(m,"touchstart",function(g){p?q(m,function(f){if(p){var g=f.changedTouches[0];Math.abs(g.screenX-p.screenX)<a.tapRadius&&Math.abs(g.screenY-p.screenY)<a.tapRadius&&(x&&clearTimeout(x),p=x=null,h.call(this,f))}},g,!0):q(m,function(f){p=f.changedTouches[0];x=setTimeout(function(){p=x=null},a.dbltapTime)},g)})}};return a})},"dstore/Memory":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array ./Store ./Promised ./SimpleQuery ./QueryResults".split(" "),
function(B,w,q,a,m,h,p){return B([a,m,h],{constructor:function(){this.storage.version=0},postscript:function(){this.inherited(arguments);this.setData(this.data||[])},data:null,autoEmitEvents:!1,getSync:function(a){return this.storage.fullData[this.storage.index[a]]},putSync:function(a,g){g=g||{};var f=this.storage,h=f.index,m=f.fullData,b=this.Model;!b||a instanceof b||(a=this._restore(a));var p=this.getIdentity(a);null==p&&(this._setIdentity(a,"id"in g?g.id:Math.random()),p=this.getIdentity(a));
f.version++;var f=p in h?"update":"add",b={target:a},q;if("update"===f){if(!1===g.overwrite)throw Error("Object already exists");m.splice(q=h[p],1);p=q}else p=this.defaultNewToStart?0:m.length;if("beforeId"in g){var x=g.beforeId;null===x?g=m.length:(g=h[x],q<g&&--g);void 0!==g?b.beforeId=x:(console.error("options.beforeId was specified but no corresponding index was found"),g=p)}else g=p;m.splice(g,0,a);q=isFinite(q)?Math.min(q,g):g;for(g=m.length;q<g;++q)h[this.getIdentity(m[q])]=q;this.emit(f,b);
return a},addSync:function(a,g){(g=g||{}).overwrite=!1;return this.putSync(a,g)},removeSync:function(a){var g=this.storage,f=g.index,g=g.fullData;if(a in f)return f=g.splice(f[a],1)[0],this._reindex(),this.emit("delete",{id:a,target:f}),!0},setData:function(a){this.parse&&(a=this.parse(a));a.items&&(this.idProperty=a.identifier||this.idProperty,a=a.items);this.storage.fullData=this.data=a;this._reindex()},_reindex:function(){for(var a=this.storage,g=a.index={},f=a.fullData,h=this.Model,m=Object.prototype,
b=0,p=f.length;b<p;b++){var q=f[b];if(h&&!(q instanceof h)){var w=this._restore(q,q.__proto__===m);q!==w&&(f[b]=q=w)}g[this.getIdentity(q)]=b}a.version++},fetchSync:function(){var a=this.data;if(!a||a._version!==this.storage.version){for(var a=this.storage.fullData,g=this.queryLog,f=0,h=g.length;f<h;f++)a=g[f].querier(a);a._version=this.storage.version;this.data=a}return new p(a)},fetchRangeSync:function(a){var g=this.fetchSync();return new p(g.slice(a.start,a.end),{totalLength:g.length})},_includePropertyInSubCollection:function(a){return"data"!==
a&&this.inherited(arguments)}})})},"dstore/Store":function(){define("dojo/_base/lang dojo/_base/array dojo/aspect dojo/has dojo/when dojo/Deferred dojo/_base/declare ./QueryMethod ./Filter dojo/Evented".split(" "),function(B,w,q,a,m,h,p,x,g,f){function n(a){return function(b,f){var g=this;m(b,function(b){b={target:b};var h=f[1]||{};"beforeId"in h&&(b.beforeId=h.beforeId);g.emit(a,b)});return b}}a.add("object-proto",!!{}.__proto__&&!{}.watch);var u=a("object-proto");return p(f,{constructor:function(a){a&&
p.safeMixin(this,a);this.Model&&this.Model.createSubclass&&(this.Model=this.Model.createSubclass([]).extend({_store:this}));this.storage=new f;var b=this;this.autoEmitEvents&&(q.after(this,"add",n("add")),q.after(this,"put",n("update")),q.after(this,"remove",function(a,f){m(a,function(){b.emit("delete",{id:f[0]})});return a}))},autoEmitEvents:!0,idProperty:"id",queryAccessors:!0,getIdentity:function(a){return a.get?a.get(this.idProperty):a[this.idProperty]},_setIdentity:function(a,f){a.set?a.set(this.idProperty,
f):a[this.idProperty]=f},forEach:function(a,f){var b=this;return m(this.fetch(),function(g){for(var h=0,m;void 0!==(m=g[h]);h++)a.call(f,m,h,b);return g})},on:function(a,f){return this.storage.on(a,f)},emit:function(a,f){f=f||{};f.type=a;try{return this.storage.emit(a,f)}finally{return f.cancelable}},parse:null,stringify:null,Model:null,_restore:function(a,f){var b=this.Model;if(b&&a){var g=b.prototype,h=g._restore;h?a=h.call(a,b,f):u&&f?a.__proto__=g:a=B.delegate(g,a)}return a},create:function(a){return new this.Model(a)},
_createSubCollection:function(a){var b=B.delegate(this.constructor.prototype),f;for(f in this)this._includePropertyInSubCollection(f,b)&&(b[f]=this[f]);return p.safeMixin(b,a)},_includePropertyInSubCollection:function(a,f){return!(a in f)||f[a]!==this[a]},queryLog:[],filter:new x({type:"filter",normalizeArguments:function(a){var b=this.Filter;return a instanceof b?[a]:[new b(a)]}}),Filter:g,sort:new x({type:"sort",normalizeArguments:function(a,f){var b;"function"===typeof a?b=[a]:(b=a instanceof Array?
a.slice():"object"===typeof a?[].slice.call(arguments):[{property:a,descending:f}],b=w.map(b,function(a){a=B.mixin({},a);a.descending=!!a.descending;return a}),b=[b]);return b}}),select:new x({type:"select"}),_getQuerierFactory:function(a){return this["_create"+(a[0].toUpperCase()+a.substr(1))+"Querier"]}})})},"dstore/QueryMethod":function(){define([],function(){return function(B){var w=B.type,q=B.normalizeArguments,a=B.applyQuery,m=B.querierFactory;return function(){var h=Array.prototype.slice.call(arguments),
p=q?q.apply(this,h):h,h={type:w,arguments:h,normalizedArguments:p},x=this._getQuerierFactory(w)||m;x&&(h.querier=x.apply(this,p));p=this._createSubCollection({queryLog:this.queryLog.concat(h)});return a?a.call(this,p,h):p}}})},"dstore/Filter":function(){define(["dojo/_base/declare"],function(B){function w(a){return function(){var m=this.constructor,h=new m;h.type=a;h.args=Array.prototype.slice.call(arguments);return this.type?w("and").call(m.prototype,this,h):h}}function q(a){return function(){for(var m=
this.constructor,h=[],p=0;p<arguments.length;p++){var q=arguments[p];h.push(q instanceof m?q:new m(q))}m=new m;m.type=a;m.args=h;this.type===a?m.args=this.args.concat(h):this.type?h.unshift(this):1===h.length&&(m.type=h[0].type,m.args=h[0].args.slice());return m}}B=B(null,{constructor:function(a){var m=typeof a;switch(m){case "object":var m=this,h;for(h in a)var p=a[h],m=p instanceof this.constructor?m[p.type](h,p.args[0]):p&&p.test?m.match(h,p):m.eq(h,p);this.type=m.type;this.args=m.args;break;case "function":case "string":this.type=
m,this.args=[a]}},and:q("and"),or:q("or"),eq:w("eq"),ne:w("ne"),lt:w("lt"),lte:w("lte"),gt:w("gt"),gte:w("gte"),contains:w("contains"),"in":w("in"),match:w("match")});B.filterCreator=w;B.logicalOperatorCreator=q;return B})},"dstore/Promised":function(){define(["dojo/_base/declare","dojo/Deferred","./QueryResults","dojo/when"],function(B,w,q,a){function m(h,m){return function(){var p=new w;try{p.resolve(this[h].apply(this,arguments))}catch(g){p.reject(g)}return m?(p=new q(p.promise),p.totalLength=
a(p.totalLength),p):p.promise}}return B(null,{get:m("getSync"),put:m("putSync"),add:m("addSync"),remove:m("removeSync"),fetch:m("fetchSync",!0),fetchRange:m("fetchRangeSync",!0)})})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(B,w){function q(a,m){return w(this,function(h){for(var p=0,q=h.length;p<q;p++)a.call(m,h[p],p,h)})}return function(a,m){var h=m&&"totalLength"in m;if(a.then){a=B.delegate(a);var p=a.then(function(a){var g=h?m.totalLength:a.totalLength||a.length;
a.totalLength=g;return!h&&g});a.totalLength=h?m.totalLength:p;a.response=m&&m.response}else a.totalLength=h?m.totalLength:a.length;a.forEach=q;return a}})},"dstore/SimpleQuery":function(){define(["dojo/_base/declare","dojo/_base/array"],function(B,w){function q(a,h){if(-1<a.indexOf(".")){var m=a.split("."),q=m.length;return function(a){for(var f=0;f<q;f++)a=a&&(h&&a.get?a.get(m[f]):a[m[f]]);return a}}return function(g){return g.get?g.get(a):g[a]}}var a={eq:function(a,h){return a===h},"in":function(a,
h){return-1<w.indexOf(h.data||h,a)},ne:function(a,h){return a!==h},lt:function(a,h){return a<h},lte:function(a,h){return a<=h},gt:function(a,h){return a>h},gte:function(a,h){return a>=h},match:function(a,h,p){return h.test(a,p)},contains:function(a,h,p,q){var g=this;h=h.data?h.data:Array.isArray(h)?h:[h];return w.every(h,function(f){if("object"===typeof f&&f.type){var h=g._getFilterComparator(f.type);return w.some(a,function(a){return h.call(g,a,f.args[1],p,q)})}return-1<w.indexOf(a,f)})}};return B(null,
{_createFilterQuerier:function(a){function h(a){var f,g,b=a.type;a=a.args;var p=x._getFilterComparator(b);if(p){var w=a[0],B=q(w,m),C=a[1];C&&C.fetchSync&&(C=C.fetchSync());return function(a){return p.call(x,B(a),C,a,w)}}switch(b){case "and":case "or":for(var A=0,F=a.length;A<F;A++)g=h(a[A]),f=f?function(a,f){return"and"===b?function(b){return a(b)&&f(b)}:function(b){return a(b)||f(b)}}(f,g):g;return f;case "function":return a[0];case "string":f=x[a[0]];if(!f)throw Error("No filter function "+a[0]+
" was found in the collection");return f;case void 0:return function(){return!0};default:throw Error('Unknown filter operation "'+b+'"');}}var m=this.queryAccessors,x=this,g=h(a);return function(a){return w.filter(a,g)}},_getFilterComparator:function(m){return a[m]||this.inherited(arguments)},_createSelectQuerier:function(a){return function(h){var m=a.length;return w.map(h,a instanceof Array?function(h){for(var g={},f=0;f<m;f++){var n=a[f];g[n]=h[n]}return g}:function(h){return h[a]})}},_createSortQuerier:function(a){var h=
this.queryAccessors;return function(m){m=m.slice();m.sort("function"==typeof a?a:function(m,g){for(var f=0;f<a.length;f++){var n,p=a[f];if("function"==typeof p)n=p(m,g);else{n=p.get||(p.get=q(p.property,h));var p=p.descending,b=n(m);n=n(g);null!=b&&(b=b.valueOf());null!=n&&(n=n.valueOf());n=b===n?0:!!p===("undefined"===typeof n||null===n&&"undefined"!==typeof b||null!=b&&b<n)?1:-1}if(0!==n)return n}return 0});return m}}})})},"dstore/Trackable":function(){define("dojo/_base/lang dojo/_base/declare dojo/aspect dojo/when dojo/promise/all dojo/_base/array dojo/on".split(" "),
function(B,w,q,a,m,h,p){function x(a,f,b){for(var g=a.length-1;0<=g;--g){var h=a[g],m=h.start,h=m+h.count;if(f>h){a.splice(g+1,0,{start:f,count:b-f});return}b>=m&&(f=Math.min(f,m),b=Math.max(b,h),a.splice(g,1))}a.unshift({start:f,count:b-f})}var g=0,f={track:function(){function f(){return function(){var b=this,f=this.inherited(arguments);a(f,function(a){a=b._results=a.slice();b._partialResults&&(b._partialResults=null);b._ranges=[];x(b._ranges,0,a.length)});return f}}function m(){return function(b){var f=
this,g=b.start,h=b.end,m=this.inherited(arguments);this._results||a(m,function(b){return a(b.totalLength,function(a){var m=f._partialResults||(f._partialResults=[]);h=Math.min(h,g+b.length);m.length=a;a=[g,h-g].concat(b);m.splice.apply(m,a);x(f._ranges,g,h);return b})});return m}}function b(b,f){g++;var m=f.target;f=B.delegate(f,H[b]);var n=f.beforeId;a(A._results||A._partialResults,function(a){if(a){var g,p,q,u=A._ranges,y,w="id"in f?f.id:t.getIdentity(m),x=-1,B=-1,C=-1,l=-1,D;if("delete"===b||"update"===
b)for(g=0;-1===x&&g<u.length;++g)for(y=u[g],p=y.start,q=p+y.count;p<q;++p)if(t.getIdentity(a[p])==w){x=f.previousIndex=p;B=g;D=n==w;a.splice(x,1);y.count--;for(p=g+1;p<u.length;++p)u[p].start--;break}if("add"===b||"update"===b){if(F){if(F([m]).length){var z=0;q=u.length-1;for(D=-1;z<=q&&-1===C;)g=z+Math.round((q-z)/2),y=u[g],B=a.slice(y.start,y.start+y.count),void 0!==n&&(D=null===n?B.length:Q(B,n)),-1===D&&(D=x>=Math.max(0,y.start-1)&&x<=y.start+y.count?x:t.defaultNewToStart?0:B.length),B.splice(D,
0,m),p=h.indexOf(F(B),m),w=y.start+p,0===p&&0!==y.start?q=g-1:p>=B.length-1&&w<a.length?z=g+1:(C=w,l=g);if(-1===C&&0<z&&z<u.length)var d=!0}}else{p=-1;if(void 0===n||D)"update"===b?(C=x,l=B):t.defaultNewToStart?p=C=0:(C=a.length,p=u.length-1);else if(null===n)C=a.length,p=u.length-1;else for(g=0,q=u.length;-1===l&&g<q;++g)y=u[g],C=Q(a,n,y.start,y.start+y.count),-1!==C&&(l=g);-1!==p&&-1===l&&(y=u[p])&&y.start<=C&&C<=y.start+y.count&&(l=p)}if(-1<C&&-1<l)for(f.index=C,a.splice(C,0,m),u[l].count++,g=
l+1;g<u.length;++g)u[g].start++;else if(d)for(f.beforeIndex=u[z].start,g=z;g<u.length;++g)u[g].start++}f.totalLength=a.length}(a=A["on_tracked"+b])&&a.call(A,f)})}var t=this.store||this,D=[],E={add:1,update:1,"delete":1},C;for(C in E)D.push(this.on(C,function(a){return function(f){b(a,f)}}(C)));var A=w.safeMixin(B.delegate(this),{_ranges:[],fetch:f(),fetchRange:m(),releaseRange:function(a,b){if(this._partialResults){a:for(var f=this._ranges,g=0,h;h=f[g];++g){var m=h.start,n=m+h.count;if(a<=m)if(b>=
n)f.splice(g,1);else{h.start=b;h.count=n-h.start;break a}else if(a<n)if(b>m){f.splice(g,1,{start:m,count:a-m},{start:b,count:n-b});break a}else h.count=a-h.start}for(;a<b;++a)delete this._partialResults[a]}},on:function(a,b){var f=this,g=this.getInherited(arguments);return p.parse(A,a,b,function(a,h){return h in E?q.after(A,"on_tracked"+h,b,!0):g.call(f,h,b)})},tracking:{remove:function(){for(;0<D.length;)D.pop().remove();this.remove=function(){}}},track:null});this.fetchSync&&(w.safeMixin(A,{fetchSync:f(),
fetchRangeSync:m()}),A.fetchSync());var F;h.forEach(this.queryLog,function(a){var b=F,f=a.querier;f&&(F=b?function(a){return f(b(a))}:f)});var H={add:{index:void 0},update:{previousIndex:void 0,index:void 0},"delete":{previousIndex:void 0}},Q=function(a,b,f,g){g=void 0!==g?g:a.length;for(f=void 0!==f?f:0;f<g;++f)if(t.getIdentity(a[f])===b)return f;return-1};return A}};m=w(null,f);m.create=function(a,g){a=w.safeMixin(B.delegate(a),f);w.safeMixin(a,g);return a};return m})},"dstore/legacy/StoreAdapter":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/when ../Store ../QueryResults".split(" "),
function(B,w,q,a,m,h){w=function(a){return function(){var h=this.objectStore;return h[a].apply(h,arguments)}};return B(m,{objectStore:null,get:function(){var h=this,m=this.objectStore;return a(m.get.apply(m,arguments),function(a){return h._restore(a)})},put:w("put"),add:w("add"),remove:w("remove"),getIdentity:w("getIdentity"),_setIdentity:function(a,h){return a[this.objectStore.idProperty]=h},fetch:function(){return this.fetchRange()},fetchRange:function(m){function p(a){for(var b=0;b<a.length;b++){var f=
a[b],g=f.type,f=f.args;if("and"===g)p(f);else if("eq"===g||"match"===g)w[f[0]]=f[1];else if("string"===g)w=f[0];else if(g)throw Error('"'+g+" operator can not be converted to a legacy store query");}}var g={},f=this.queryLog,n=function(a){return q.map(q.filter(f,function(b){return b.type===a}),function(a){return a.normalizedArguments[0]})},u=n("sort").pop();if(u&&(g.sort=u,u instanceof Array))for(var b=0;b<u.length;b++){var t=u[b];t.attribute=t.property}m&&(g.count=m.end-((g.start=m.start)||0));var w=
{};p(n("filter"));return(m=this.objectStore.query(w,g))?new h(a(m.map(this._restore,this)),{totalLength:a(m.total)}):a(m)}})})},"esri/core/PluginTarget":function(){define(["require","dojo/aspect","dojo/when","./promiseUtils"],function(B,w,q,a){function m(){w.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}m.prototype={addPlugin:function(h,m){var p=this,g=this._plugins;return a.create(function(a,n){try{B([h],function(f){h in g?a({id:g[h].declaredId||h.replace(/\//g,".")}):
(g[h]=f,q(f.add(p,m),function(){var b={id:f.declaredId||h.replace(/\//g,".")};p.emit("plugin-add",b);a(b)},function(a){n(a)}))})}catch(u){n(u)}})},removePlugin:function(a){if(a in this._plugins){var h=this._plugins[a];h.remove(this);delete this._plugins[a];this.emit("plugin-remove",{id:h.declaredId||a.replace(/\//g,".")})}},_pluginsHandler:function(){Array.prototype.slice.call(arguments).some(function(a){if(a&&a.plugins&&a.plugins instanceof Array){a=a.plugins;var h,m,g;for(g=0;g<a.length;g++)h=a[g],
m=h instanceof Object?h.id:h,this.addPlugin(m,h.options);return!0}},this)}};return m})},"webSceneViewer/widgets/CreateAppDialog/CreateAppSaveForm":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox esri/widgets/Widget esri/widgets/Tags dijit/form/CheckBox esri/widgets/support/widget dojo/i18n!webSceneViewer/widgets/nls/widgets".split(" "),function(B,
w,q,a,m,h,p,x,g,f,n,u){return function(b){function h(a){a=b.call(this,a)||this;a.title="";a.description="";a.tags=[];a.shareSameLevel=!1;a.shareGroups=[];a.shareGroupsText="";return a}q(h,b);h.prototype.postInitialize=function(){var a=this;this._tagsWidget=new g({required:!0,placeHolder:"placeholder"});this._tagsWidget.startup();this.own(this._tagsWidget.watch("value",function(b,f){a.tags=b.split(",")}));this.portalItem&&this._tagsWidget.set("value",this.portalItem.tags);this.portal&&this.portal.getTags().then(function(b){a._tagsWidget.set("knownTags",
b)});this._titleInput=new p({required:!0,class:"marginBelow",trim:!1,maxLength:100});this.own(this._titleInput.on("change",function(b){a.title=b}));this.portalItem&&this._titleInput.set("value",""+this.portalItem.title);this._descriptionInput=new p({required:!1,trim:!1,maxLength:250});this.own(this._descriptionInput.on("change",function(b){a.description=b}));this.portalItem&&this._descriptionInput.set("value",this.portalItem.snippet?this.portalItem.snippet:"");this._checkBox=new f({checked:this.portalItem?
"private"===this.portalItem.access:!1,value:"off",onChange:function(b){a.shareSameLevel=b}});this.watch("shareGroups",function(){a.shareGroupsText=a.portalItem&&"public"===a.portalItem.access?"("+u.share.everyone+")":0===a.shareGroups.length?"":"("+a.shareGroups.join(",")+")"});this.own([{remove:function(){a._tagsWidget.destroyRecursive()}},{remove:function(){a._descriptionInput.destroyRecursive()}},{remove:function(){a._titleInput.destroyRecursive()}}])};h.prototype.render=function(){return n.tsx("div",
{bind:this},n.tsx("form",null,n.tsx("div",null,n.tsx("label",{for:"CreateAppFormTitle","data-dojo-attach-point":"labelTitle"},u.share.title,":"),n.tsx("div",{bind:this._titleInput.domNode,afterCreate:this._attachToNode})),n.tsx("div",null,n.tsx("label",{for:"CreateAppFormTags",class:"tagsLabel"},u.share.tags,":"),n.tsx("div",{class:"dijitInline","data-dojo-attach-point":"tagsWidgetDiv",bind:this._tagsWidget.domNode,afterCreate:this._attachToNode})),n.tsx("div",null,n.tsx("label",{for:"CreateAppFormDescription",
"data-dojo-attach-point":"labelDescription"},u.share.summary,": (",u.share.optional,")"),n.tsx("div",{bind:this._descriptionInput.domNode,afterCreate:this._attachToNode})),n.tsx("div",{class:"marginTop"},n.tsx("div",{id:"publish-webmap-sharing",class:"checkBoxContainer","data-dojo-attach-point":"_shareSameLevel",bind:this._checkBox.domNode,afterCreate:this._attachToNode}),n.tsx("label",{class:"forCheckBox",for:"publish-webmap-sharing"},u.share.shareSameLevel," ",this.shareGroupsText))))};h.prototype._attachToNode=
function(a){a.appendChild(this)};a([m.property()],h.prototype,"portal",void 0);a([m.property()],h.prototype,"portalItem",void 0);a([m.property()],h.prototype,"_checkBox",void 0);a([n.renderable(),m.property()],h.prototype,"title",void 0);a([n.renderable(),m.property()],h.prototype,"description",void 0);a([n.renderable(),m.property()],h.prototype,"tags",void 0);a([n.renderable(),m.property()],h.prototype,"shareSameLevel",void 0);a([m.property()],h.prototype,"shareGroups",void 0);a([n.renderable(),
m.property()],h.prototype,"shareGroupsText",void 0);return h=a([m.subclass("webSceneViewer.widgets.CreateAppSaveForm")],h)}(m.declared(x,h))})},"esri/widgets/Tags":function(){define("../core/has dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/html dojo/keys dojo/on dojo/query dojo/string dstore/Memory dijit/focus dijit/form/TextBox dijit/registry dijit/Tooltip dijit/_OnDijitClickMixin dijit/_TemplatedMixin ./Widgette dgrid/OnDemandGrid dgrid/Selection dgrid/Keyboard dojo/i18n!./Tags/nls/Tags dojo/NodeList-traverse dojo/NodeList-manipulate".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K,y){return F.createSubclass([C,A],{declaredClass:"esri.widgets.Tags",templateString:'\x3cdiv class\x3d"${baseClass}"\x3e\x3c/div\x3e',baseClass:"esri-tags",constructor:function(a){this._idProperty="tag";this._tags=[];this._selRows=[];this._CHOICE_ALL_SELECTOR=this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE+this._CSS_STYLES.ALL_SELECTOR;this._CHOICE_FOCUS=this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.SEARCH_CHOICE_FOCUS;this._CHOICE_FOCUS_ALL=
this._CHOICE_FOCUS+this._CSS_STYLES.ALL_SELECTOR},postMixInProperties:function(){this.inherited(arguments);var a=(new Date).getTime();this._tagsId="userTags-"+a;this._gridId="grid-"+a;this._filterId="filter-"+a;this.i18n=y},postCreate:function(){this._attachmentNode=m.create("div",{id:this._tagsId,className:"grid_1"},this.domNode);this._createContainerNode();this._createTagList();this._createDropDownList();this._createInput();var b=[{field:this._idProperty}],f=[{property:this._idProperty,ascending:!0}];
this._store=new u({idProperty:this._idProperty,data:[]});this._grid=new (H.createSubclass([Q,K]))({collection:this._store,showHeader:!1,noDataMessage:this.i18n.noTagsFound,selectionMode:"extended",allowSelectAll:!0,cellNavigation:!1,columns:b,sort:f,renderRow:this._renderItem},this._dropDownList);this._grid.startup();a.add(this._grid.domNode,"grid-height-limiter");var h;this.own(this._inputTextBox.watch("value",function(){h&&(clearTimeout(h),h=null);this._grid.refresh()}.bind(this)));this.own(this._grid.on(".dgrid-row:click",
function(a){var b="";this._shiftKeyPressed||this._metaKeyPressed?a.shiftKey||a.metaKey||a.ctrlKey||(b=this._selRows[0],this._createTags(b),this._store.remove(b),this._grid.refresh(),this._resetInputTextBox()):(b=this._grid.row(a).data.tag,this._createTags(b),this._store.remove(b),this._grid.refresh(),this._resetInputTextBox())}.bind(this)));this.own(this._grid.on("dgrid-deselect",function(a){this._selRows=[];for(var b in this._grid.selection)this._grid.selection.hasOwnProperty(b)&&this._selRows.push(b)}.bind(this)));
this.own(this._grid.on("dgrid-select",function(a){this._selRows=[];for(var b in this._grid.selection)this._grid.selection.hasOwnProperty(b)&&this._selRows.push(b)}.bind(this)));this.own(g(this.domNode,"keydown",this._keydownHandler.bind(this)));this.own(g(this.domNode,"keyup",this._keyupHandler.bind(this)));window.onkeydown=function(a){if(a.shiftKey||a.ctrlKey||224===a.keyCode)this._metaKeyPressed=!0}.bind(this);this.own(g(document,"onkeydown",function(a){this._metaKeyPressed=this._shiftKeyPressed=
!0}.bind(this)))},_attachmentNode:"",_autocompleteList:"",_grid:"",_store:"",_idProperty:"",_gridId:"",_filterId:"",_placeHolder:"",_noDataMsg:"",_inputTextBox:"",_gridHasFocus:!1,_metaKeyPressed:!1,_shiftKeyPressed:!1,_CSS_STYLES:{CLASS_SELECTOR:".",ALL_SELECTOR:"\x3e",MULTI:"select2-container select2-container-multi",CHOICES:"select2-choices",CHOICE:"select2-search-choice",SEARCH_CHOICE_FOCUS:"select2-search-choice-focus",SEARCH_FIELD:"select2-search-field",CLOSE_ICON:"select2-search-choice-close"},
_selRows:[],_CHOICE_SELECTOR:"",_CHOICE_FOCUS:"",_CHOICE_FOCUS_ALL:"",properties:{knownTags:{set:function(a){var b=[],f=this._tags,g;for(g=0;g<a.length;g++)0>f.indexOf(a[g])&&b.push(a[g]);this._store=new u({idProperty:this._idProperty,data:b});this._grid.set("collection",this._store);this._grid.refresh()}},matchParam:{value:"first",cast:function(a){return a?a:"first"}},maxWidth:{value:"auto",cast:function(a){return a?a:"auto"}},minWidth:{value:"auto",cast:function(a){return a?a:"auto"}},required:!1,
value:{set:function(a){this._setTagValues(a)},get:function(){return this._getTagValues()}}},isValid:function(){return!this.required||null!=this._tags&&0<this._tags.length},validate:function(){this._created&&!this.isValid()?(q.set(this.domNode,"aria-invalid","true"),this._displayMessage(this.i18n.required)):(q.set(this.domNode,"aria-invalid","false"),this._clearMessage())},reset:function(){this.clearTags()},focus:function(){b.focus(this.domNode);this._inputTextBox.focus()},prepopulate:function(a){a.forEach(function(a,
b){this._createTags(a);this._store.remove(a)},this)},clearTags:function(){var a=f(this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE,w.byId(this.id)),b;0<a.length&&(a.forEach(function(a,g){try{b=f(this._CHOICE_ALL_SELECTOR,w.byId(this.id))[0].title,this._store.add({tag:b})}catch(S){}m.destroy(a)},this),this._tags=[],this._set("value",""))},addStyledTags:function(b,f){a.add(w.byId(f),this._CSS_STYLES.MULTI);var g=m.create("ul",null,w.byId(f));a.add(g,this._CSS_STYLES.CHOICES);h.set(g,"border",
"none");b.forEach(function(b,f){f=m.create("li",null,g);h.set(f,"padding","3px 5px 3px 5px");a.add(f,"select2-search-resultSet");f=m.create("div",{title:b},f);p.set(f,b)})},_setTagValues:function(a){var b;"string"===typeof a?b=a.split(","):a&&Array.isArray(a)&&(b=a);this.clearTags();this.prepopulate(b?this._getUniqueTags(b):[])},_getTagValues:function(){return this._tags?this._tags.join(","):""},_clearMessage:function(){this._displayMessage(null)},_displayMessage:function(a){var b=w.byId(this._tagsId);
a&&this.focused?E.show(a,b,["after"]):E.hide(b)},_resetInputTextBox:function(){this._inputTextBox.set("value","")},_isEmpty:function(a){return 0===a.trim().length},_navigate:function(a,b,f,g){0<a.length&&1>b?("right"===g?this._hightlightTag(a.next()):this._hightlightTag(a.prev()),this._unhighlightTag(a)):1>b&&this._hightlightTag(f)},_contains:function(a,b){return 0<=a.indexOf(b)},_hightlightTag:function(a){a.addClass(this._CSS_STYLES.SEARCH_CHOICE_FOCUS)},_unhighlightTag:function(a){a.removeClass(this._CSS_STYLES.SEARCH_CHOICE_FOCUS)},
_removeTag:function(a){a&&-1!==this._tags.indexOf(a)&&(this._tags.splice(this._tags.indexOf(a),1),this._set("value",this._tags.join(",")))},_hideGrid:function(){w.byId(this._gridId)&&h.set(w.byId(this._gridId),"display","none");this._gridHasFocus=!1},_showGrid:function(){h.set(w.byId(this._gridId),"display","block");var a=h.get(w.byId(this._attachmentNode),"width");h.set(w.byId(this._gridId),"width",a+"px")},_setFocusOnFirstRow:function(a,b){return f(".dgrid-content .dgrid-cell",this._grid.domNode)[b]||
f(".dgrid-content .dgrid-row",this._grid.domNode)[b]},_createTags:function(b){f(this._CHOICE_FOCUS,w.byId(this.id)).removeClass("select2-search-choice-focus");var h=m.create("li",null,this._autocompleteList);a.add(h,this._CSS_STYLES.CHOICE);h=m.create("div",{title:b},h);p.set(h,this._htmlEncode(b));h=m.create("a",{href:"#"},h);a.add(h,this._CSS_STYLES.CLOSE_ICON);g(h,"click",function(a){var b=n.trim(a.target.parentElement.innerText||a.target.parentElement.textContent);try{this._store.add({tag:b})}catch(S){}this._grid.refresh();
this._removeTag(b);m.destroy(a.target.parentNode.parentNode);a.preventDefault()}.bind(this));h=D.byId(this._filterId);m.place(h.domNode,this._autocompleteList,"last");this._hideGrid();this._tags.push(b);this._set("value",this._tags.join(","))},_renderItem:function(a){return m.create("div",{innerHTML:a.tag})},_createContainerNode:function(){this._containerNode=m.create("div",null,this._attachmentNode);a.add(this._containerNode,this._CSS_STYLES.MULTI);h.set(this._containerNode,{maxWidth:this.maxWidth,
minWidth:this.minWidth})},_createTagList:function(){this._autocompleteList=m.create("ul",null,this._containerNode);a.add(this._autocompleteList,this._CSS_STYLES.CHOICES)},_createInput:function(){var f=m.create("li",null,this._autocompleteList,"last");a.add(f,this._CSS_STYLES.SEARCH_FIELD);this._inputTextBox=new t({id:this._filterId,placeHolder:this.i18n.addTags,intermediateChanges:!0,trim:!0,style:{border:"none"}},f);a.add(this._inputTextBox,"input-text-box");h.set(this._inputTextBox,"width",this.minWidth);
(8<B("ie")||4<B("trident"))&&a.add(this._inputTextBox.domNode,"ie-style");this.own(b.watch("curNode",this._blurHandler.bind(this)))},_createDropDownList:function(){this._dropDownList=m.create("div",{id:this._gridId},this._containerNode);a.add(this._dropDownList,"drop-down-list");h.set(this._dropDownList,"width",this.minWidth)},_getUniqueTags:function(a){var b=[],f;a.forEach(function(a){f=this._stripHTML(a);null!=f&&0<f.length&&b.push(f)},this);return b.filter(function(a,f){return b.indexOf(a)===f},
this)},_stripHTML:function(a){return a&&a.replace(/<(?:.|\s)*?>/g,"")},_htmlEncode:function(a){return a?n.escape(a):a},_keyupHandler:function(a){0<(this._inputTextBox?this._inputTextBox.get("value").length:0)?this._applyFilter():this._removeFilter()},_keydownHandler:function(a){this._clearMessage();var g=f(this._CHOICE_FOCUS,w.byId(this.id)),p=f(this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE,w.byId(this.id)).last(),q,t;void 0!==b.curNode.value&&(t=b.curNode.value.length);switch(a.keyCode){case x.RIGHT_ARROW:this._navigate(g,
t,p,"right");this._hideGrid();break;case x.LEFT_ARROW:this._navigate(g,t,p,"left");this._hideGrid();break;case x.DOWN_ARROW:a.preventDefault();this._unhighlightTag(g);"none"===h.get(this._gridId,"display")&&this._showGrid();this._gridHasFocus||(this._grid.focus(this._setFocusOnFirstRow(this._grid,0)),this._gridHasFocus=!0);break;case x.UP_ARROW:break;case x.BACKSPACE:var u;if(0===t&&0===f(this._CHOICE_FOCUS_ALL).length&&void 0!==f(this._CHOICE_ALL_SELECTOR)[f(this._CHOICE_ALL_SELECTOR).length-1]&&
(u=f(this._CHOICE_ALL_SELECTOR)[f(this._CHOICE_ALL_SELECTOR).length-1].title,0<f("li",this._attachmentNode).length&&(m.destroy(p[0]),void 0!==u)))try{this._store.add({tag:u})}catch(W){}if(0<f(this._CHOICE_FOCUS_ALL).length&&(u=f(this._CHOICE_FOCUS_ALL).text(),m.destroy(g[0]),void 0!==u))try{this._store.add({tag:u})}catch(W){}this._grid.refresh();0===t&&this._hideGrid();this._removeTag(u);this.validate();break;case x.CTRL:this._metaKeyPressed=!0;break;case x.META:this._metaKeyPressed=!0;break;case x.SHIFT:this._shiftKeyPressed=
!0;break;case x.ENTER:if(0<t)g=this._stripHTML(b.curNode.value),g=g.split(","),q=[],g.forEach(function(a,b){-1===q.indexOf(a)&&q.push(n.trim(a))}),q.forEach(function(a,b){this._isEmpty(a)||this._contains(this._tags,a)||this._createTags(a)},this);else{for(g=0;g<this._selRows.length;g++)this._createTags(this._selRows[g]),this._store.remove(this._selRows[g]);this._metaKeyPressed=this._shiftKeyPressed=!1}this._resetInputTextBox();a.preventDefault();b.focus(w.byId(this._filterId));break;case x.TAB:if(b.curNode.id!==
this._filterId||0!==t){if(0<t)g=this._stripHTML(b.curNode.value),g=g.split(","),q=[],g.forEach(function(a,b){-1===q.indexOf(a)&&q.push(n.trim(a))}),q.forEach(function(a,b){this._isEmpty(a)||this._contains(this._tags,a)||this._createTags(a)},this);else{for(g=0;g<this._selRows.length;g++)this._createTags(this._selRows[g]),this._store.remove(this._selRows[g]);this._metaKeyPressed=this._shiftKeyPressed=!1}this._resetInputTextBox();a.preventDefault();b.focus(w.byId(this._filterId))}break;case x.ESCAPE:this._hideGrid();
break;default:-1<t&&("none"===h.get(w.byId(this._gridId),"display")&&this._showGrid(),this._unhighlightTag(g)),this._metaKeyPressed=!1}},_applyFilter:function(){var a=new this._store.Filter,b=this._inputTextBox?this._inputTextBox.get("value")+"":"",f=new RegExp("^"+b.toLowerCase(),"i"),b=new RegExp(b.toLowerCase(),"i"),a="first"===this.matchParam?a.match(this._idProperty,f):a.match(this._idProperty,b);this._grid.set("collection",this._store.filter(a));this._grid.refresh()},_removeFilter:function(){this._grid.set("collection",
this._store);this._grid.refresh()},_blurHandler:function(a,b,f){if(!this.focused){a=this._stripHTML(this._inputTextBox.value);if(0<a.length){var g=[];a.split(",").forEach(function(a,b){-1===g.indexOf(a)&&g.push(n.trim(a))});g.forEach(function(a,b){this._isEmpty(a)||this._contains(this._tags,a)||this._createTags(a)},this);this._resetInputTextBox()}this._hideGrid()}this.validate()}})})},"dojo/NodeList-traverse":function(){define(["./query","./_base/lang","./_base/array"],function(B,w,q){var a=B.NodeList;
w.extend(a,{_buildArrayFromCallback:function(a){for(var h=[],m=0;m<this.length;m++){var q=a.call(this[m],this[m],h);q&&(h=h.concat(q))}return h},_getUniqueAsNodeList:function(a){for(var h=[],m=0,w;w=a[m];m++)1==w.nodeType&&-1==q.indexOf(h,w)&&h.push(w);return this._wrap(h,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(a,h){a=this._getUniqueAsNodeList(a);a=h?B._filterResult(a,h):a;return a._stash(this)},_getRelatedUniqueNodes:function(a,h){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(h),
a)},children:function(a){return this._getRelatedUniqueNodes(a,function(a,m){return w._toArray(a.childNodes)})},closest:function(a,h){return this._getRelatedUniqueNodes(null,function(m,q){do if(B._filterResult([m],a,h).length)return m;while(m!=h&&(m=m.parentNode)&&1==m.nodeType);return null})},parent:function(a){return this._getRelatedUniqueNodes(a,function(a,m){return a.parentNode})},parents:function(a){return this._getRelatedUniqueNodes(a,function(a,m){for(m=[];a.parentNode;)a=a.parentNode,m.push(a);
return m})},siblings:function(a){return this._getRelatedUniqueNodes(a,function(a,m){m=[];for(var h=a.parentNode&&a.parentNode.childNodes,g=0;g<h.length;g++)h[g]!=a&&m.push(h[g]);return m})},next:function(a){return this._getRelatedUniqueNodes(a,function(a,m){for(a=a.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;return a})},nextAll:function(a){return this._getRelatedUniqueNodes(a,function(a,m){for(m=[];a=a.nextSibling;)1==a.nodeType&&m.push(a);return m})},prev:function(a){return this._getRelatedUniqueNodes(a,
function(a,m){for(a=a.previousSibling;a&&1!=a.nodeType;)a=a.previousSibling;return a})},prevAll:function(a){return this._getRelatedUniqueNodes(a,function(a,m){for(m=[];a=a.previousSibling;)1==a.nodeType&&m.push(a);return m})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter(function(a,h){return 0!=h%2})},odd:function(){return this.filter(function(a,
h){return 0==h%2})}});return a})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(B,w,q,a,m){function h(a){for(;a.childNodes[0]&&1==a.childNodes[0].nodeType;)a=a.childNodes[0];return a}function p(g,f){"string"==typeof g?(g=a.toDom(g,f&&f.ownerDocument),11==g.nodeType&&(g=g.childNodes[0])):1==g.nodeType&&g.parentNode&&(g=g.cloneNode(!1));return g}var x=B.NodeList;w.extend(x,{_placeMultiple:function(g,f){g=
"string"==typeof g||g.nodeType?B(g):g;for(var h=[],m=0;m<g.length;m++)for(var b=g[m],p=this.length,q=p-1,w;w=this[q];q--)0<m&&(w=this._cloneNode(w),h.unshift(w)),q==p-1?a.place(w,b,f):b.parentNode.insertBefore(w,b),b=w;h.length&&(h.unshift(0),h.unshift(this.length-1),Array.prototype.splice.apply(this,h));return this},innerHTML:function(a){return arguments.length?this.addContent(a,"only"):this[0].innerHTML},text:function(a){if(arguments.length){for(var f=0,g;g=this[f];f++)1==g.nodeType&&m.set(g,"textContent",
a);return this}for(var h="",f=0;g=this[f];f++)h+=m.get(g,"textContent");return h},val:function(a){if(arguments.length){for(var f=w.isArray(a),g=0,h;h=this[g];g++){var b=h.nodeName.toUpperCase(),m=h.type,p=f?a[g]:a;if("SELECT"==b)for(b=h.options,m=0;m<b.length;m++){var x=b[m];x.selected=h.multiple?-1!=q.indexOf(a,x.value):x.value==p}else"checkbox"==m||"radio"==m?h.checked=h.value==p:h.value=p}return this}if((h=this[0])&&1==h.nodeType){a=h.value||"";if("SELECT"==h.nodeName.toUpperCase()&&h.multiple){a=
[];b=h.options;for(m=0;m<b.length;m++)x=b[m],x.selected&&a.push(x.value);a.length||(a=null)}return a}},append:function(a){return this.addContent(a,"last")},appendTo:function(a){return this._placeMultiple(a,"last")},prepend:function(a){return this.addContent(a,"first")},prependTo:function(a){return this._placeMultiple(a,"first")},after:function(a){return this.addContent(a,"after")},insertAfter:function(a){return this._placeMultiple(a,"after")},before:function(a){return this.addContent(a,"before")},
insertBefore:function(a){return this._placeMultiple(a,"before")},remove:x.prototype.orphan,wrap:function(a){if(this[0]){a=p(a,this[0]);for(var f=0,g;g=this[f];f++){var m=this._cloneNode(a);g.parentNode&&g.parentNode.replaceChild(m,g);h(m).appendChild(g)}}return this},wrapAll:function(a){if(this[0]){a=p(a,this[0]);this[0].parentNode.replaceChild(a,this[0]);a=h(a);for(var f=0,g;g=this[f];f++)a.appendChild(g)}return this},wrapInner:function(a){if(this[0]){a=p(a,this[0]);for(var f=0;f<this.length;f++){var g=
this._cloneNode(a);this._wrap(w._toArray(this[f].childNodes),null,this._NodeListCtor).wrapAll(g)}}return this},replaceWith:function(a){a=this._normalize(a,this[0]);for(var f=0,g;g=this[f];f++)this._place(a,g,"before",0<f),g.parentNode.removeChild(g);return this},replaceAll:function(a){a=B(a);for(var f=this._normalize(this,this[0]),g=0,h;h=a[g];g++)this._place(f,h,"before",0<g),h.parentNode.removeChild(h);return this},clone:function(){for(var a=[],f=0;f<this.length;f++)a.push(this._cloneNode(this[f]));
return this._wrap(a,this,this._NodeListCtor)}});x.prototype.html||(x.prototype.html=x.prototype.innerHTML);return x})},"webSceneViewer/widgets/CreateAppDialog/CreateAppDialogViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators esri/core/Accessor esri/portal/PortalItem ../../support/geowConfig".split(" "),function(B,w,q,a,m,h,p,x){return function(g){function f(){var a=null!==g&&g.apply(this,arguments)||
this;a.working=!1;return a}q(f,g);Object.defineProperty(f.prototype,"isWebAppBuilderEnabled",{get:function(){return x.webAppBuilderEnabled&&this.portal&&this.portal.isOrg()?!0:!1},enumerable:!0,configurable:!0});f.prototype.createNewItem=function(){return this.portal.user.addItem({item:new p({title:this.form.title,access:this.form.shareSameLevel?this.portalItem.access:"private",description:this.form.description?this.form.description:"",type:"Web Mapping Application",typeKeywords:this.selectedTemplate.typeKeywords,
tags:this.form.tags,url:this.selectedTemplate.url}),data:JSON.stringify({source:this.selectedTemplate.id,folderId:null,values:{webscene:this.portalItem.id}})})};f.prototype.saveTemplatedApp=function(){var a=this;return this.createNewItem().then(function(f){var b=f.url.indexOf("?"),g=-1!==b?f.url.substr(b,f.url.length):"",g=g+(g&&g.length?"\x26":"?"),g=g+("appid\x3d"+f.id),b=f.url.substr(0,-1!==b?b:f.url.length)+g;f.url=a.portal.getBaseUrl()+b;return a.portal._request(f.itemUrl+"/share",{method:"post",
query:{everyone:a.form.shareSameLevel?"public"===a.portalItem.access:!1,org:a.form.shareSameLevel?"org"===a.portalItem.access:!1,groups:[],groupIds:a.form.shareSameLevel?a.shareGroups:[],items:[f.id]}}).then(function(){return f.update()})}).catch(function(a){console.error(a)})};f.prototype._getShareGroups=function(){var a=this;this.working=!0;var f=this.portal._request(this.portalItem.itemUrl+"/groups");f.then(function(b){a.shareGroups=b.admin.map(function(a){return a.id});a.form.shareGroups=a.shareGroups;
a.working=!1},function(){a.working=!1});return f};a([m.property()],f.prototype,"portal",void 0);a([m.property()],f.prototype,"portalItem",void 0);a([m.property()],f.prototype,"selectedTemplate",void 0);a([m.property()],f.prototype,"shareGroups",void 0);a([m.property()],f.prototype,"working",void 0);a([m.property({readOnly:!0,dependsOn:["portal"]})],f.prototype,"isWebAppBuilderEnabled",null);a([m.property()],f.prototype,"form",void 0);return f=a([m.subclass("webSceneViewer.widgets.CreateAppDialogViewModel")],
f)}(m.declared(h))})},"webSceneViewer/widgets/CreateAppDialog/utils":function(){define(["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","dojo/i18n!webSceneViewer/widgets/nls/widgets"],function(B,w,q,a,m){function h(a){void 0===a&&(a=!1);(a=a?window:window.open())||alert(m.share.allowPopup);return a}Object.defineProperty(w,"__esModule",{value:!0});var p=/^(?:[a-z]+:)?\/\//i;w.handleSafariLimitation=h;w.previewInTemplate=function(a,g,f){return a.fetchData().always(function(){var m=
h(),q=g.url;!1===p.test(q)&&(q=f.getBaseUrl()+q);m.location=q.replace("/hosted/","/apps/")+"?webscene\x3d"+a.id})};w.downloadWebMappingApp=function(a,g){var f={query:{relationshipType:"Mobile Application"!==a.type?"WMA2Code":"MobileApp2Code"}};a=g.getBaseUrl()+"/sharing/rest/content/items/"+a.id+"/relatedItems";return g._request(a,f).then(function(a){if(a.relatedItems&&0<a.relatedItems.length&&a.relatedItems[0]&&a.relatedItems[0].url)h().location=a.relatedItems[0].url;else throw Error("Cannot find app");
})}})},"webSceneViewer/widgets/ViewerTools/ViewerToolsViewModel":function(){define("require exports esri/core/tsSupport/declareExtendsHelper esri/core/tsSupport/decorateHelper esri/core/accessorSupport/decorators esri/core/Accessor esri/core/watchUtils".split(" "),function(B,w,q,a,m,h,p){return function(h){function g(a){return h.call(this)||this}q(g,h);Object.defineProperty(g.prototype,"appState",{set:function(a){var f=this;this._set("appState",a);this.appState.device.isMobile||p.watch(this.appState,
"authoringMode",function(a,b){"configure-layer-legend"===a?(f.previousMainMenuIndex=f.activeMainMenuIndex,f.previousSubMenuIndex=f.activeSubMenuIndex,f.activeMainMenuIndex=1,f.activeSubMenuIndex=1):"configure-layer-legend"===b&&1===f.activeMainMenuIndex&&1===f.activeSubMenuIndex&&null!==f.previousMainMenuIndex&&(f.activeMainMenuIndex=f.previousMainMenuIndex,f.activeSubMenuIndex=f.previousSubMenuIndex)})},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"activeMenuIndex",{get:function(){return this.activeMainMenuIndex+
"-"+this.activeSubMenuIndex},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"previousActiveMenuIndex",{get:function(){return this.previousMainMenuIndex+"-"+this.previousSubMenuIndex},enumerable:!0,configurable:!0});a([m.property()],g.prototype,"appState",null);a([m.property({readOnly:!0,dependsOn:["activeSubMenuIndex","activeMainMenuIndex"]})],g.prototype,"activeMenuIndex",null);a([m.property()],g.prototype,"activeSubMenuIndex",void 0);a([m.property()],g.prototype,"activeMainMenuIndex",
void 0);a([m.property({readOnly:!0,dependsOn:["previousMainMenuIndex","previousSubMenuIndex"]})],g.prototype,"previousActiveMenuIndex",null);a([m.property()],g.prototype,"previousSubMenuIndex",void 0);a([m.property()],g.prototype,"previousMainMenuIndex",void 0);return g=a([m.subclass("esri.widgets.ViewerToolsViewModel")],g)}(m.declared(h))})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(B,w){var q=document.createElement("div"),a=q.matches||q.webkitMatchesSelector||
q.mozMatchesSelector||q.msMatchesSelector||q.oMatchesSelector,m=q.querySelectorAll,h=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,p=function(a,f){var g=f?f.ownerDocument||f:w.doc||document,h=(m?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(a);f=f||g;if(h){var b=(B("ie"),null!==f.parentNode&&9!==f.nodeType&&f.parentNode===g);if(h[2]&&b){var q=w.byId?w.byId(h[2],g):g.getElementById(h[2]);if(!q||h[1]&&h[1]!=q.tagName.toLowerCase())return[];
if(f!=g)for(a=q;a!=f;)if(a=a.parentNode,!a)return[];return h[3]?p(h[3],q):[q]}if(h[3]&&f.getElementsByClassName)return f.getElementsByClassName(h[4]);if(h[5])if(q=f.getElementsByTagName(h[5]),h[4]||h[6])a=(h[4]||"")+h[6];else return q}if(m)return 1===f.nodeType&&"object"!==f.nodeName.toLowerCase()?x(f,a,f.querySelectorAll):f.querySelectorAll(a);q||(q=f.getElementsByTagName("*"));h=[];g=0;for(b=q.length;g<b;g++){var D=q[g];1==D.nodeType&&(void 0)(D,a,f)&&h.push(D)}return h},x=function(a,f,m){var g=
a,b=a.getAttribute("id"),n=b||"__dojo__",p=a.parentNode,q=/^\s*[+~]/.test(f);if(q&&!p)return[];b?n=n.replace(/'/g,"\\$\x26"):a.setAttribute("id",n);q&&p&&(a=a.parentNode);f=f.match(h);for(p=0;p<f.length;p++)f[p]="[id\x3d'"+n+"'] "+f[p];f=f.join(",");try{return m.call(a,f)}finally{b||g.removeAttribute("id")}};p.match=a?function(g,f,h){return h&&9!=h.nodeType?x(h,f,function(f){return a.call(g,f)}):a.call(g,f)}:void 0;return p})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),
function(B,w,q,a,m,h,p,x,g,f,n,u){function b(a,b){return q.doc.createElementNS?q.doc.createElementNS(a,b):q.doc.createElement(b)}function t(a,b,f,g){return a.setAttributeNS?a.setAttributeNS(b,f,g):a.setAttribute(f,g)}function D(a){return E.useSvgWeb?q.doc.createTextNode(a,!0):q.doc.createTextNode(a)}var E=f.svg={};E.useSvgWeb="undefined"!=typeof window.svgweb;var C=navigator.userAgent,A=w("ios"),F=w("chrome")?"auto":"optimizeLegibility";E.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};
E.getRef=function(b){return b&&"none"!=b?b.match(/^url\(#.+\)$/)?a.byId(b.slice(5,-1)):b.match(/^#dojoUnique\d+$/)?a.byId(b.slice(1)):null:null};E.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var H=0;E.Shape=m("dojox.gfx.svg.Shape",n.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var b=this.rawNode.getAttribute("fill");
(b=E.getRef(b))&&b.parentNode.removeChild(b)}this.clip&&(b=this.rawNode.getAttribute("clip-path"))&&(b=a.byId(b.match(/gfx_clip[\d]+/)[0]))&&b.parentNode.removeChild(b);n.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var b,g=function(a){this.setAttribute(a,b[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":b=f.makeParameters(f.defaultLinearGradient,
a);a=this._setFillObject(b,"linearGradient");h.forEach(["x1","y1","x2","y2"],g,a);break;case "radial":b=f.makeParameters(f.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");h.forEach(["cx","cy","r"],g,a);break;case "pattern":b=f.makeParameters(f.defaultPattern,a),a=this._setFillObject(b,"pattern"),h.forEach(["x","y","width","height"],g,a)}this.fillStyle=b;return this}this.fillStyle=b=f.normalizeColor(a);this.rawNode.setAttribute("fill",b.toCss());this.rawNode.setAttribute("fill-opacity",
b.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var b=this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",0),this;if("string"==typeof a||B.isArray(a)||a instanceof g)a={color:a};a=this.strokeStyle=f.makeParameters(f.defaultStroke,a);a.color=f.normalizeColor(a.color);if(a){var h=0>a.width?0:a.width;b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",
h);b.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?(b.setAttribute("stroke-linejoin","miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var m=a.style.toLowerCase();m in E.dasharray&&(m=E.dasharray[m]);if(m instanceof Array){var m=B._toArray(m),n;for(n=0;n<m.length;++n)m[n]*=h;if("butt"!=a.cap){for(n=0;n<m.length;n+=2)m[n]-=h,1>m[n]&&(m[n]=1);for(n=1;n<m.length;n+=2)m[n]+=h}m=m.join(",")}b.setAttribute("stroke-dasharray",m);b.setAttribute("dojoGfxStrokeStyle",
a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof f.Surface);a=a.parent);return a},_setFillObject:function(a,g){var h=E.xmlns.svg;this.fillStyle=a;var m=this._getParentSurface().defNode,n=this.rawNode.getAttribute("fill");if(n=E.getRef(n))if(n.tagName.toLowerCase()!=g.toLowerCase()){var p=n.id;n.parentNode.removeChild(n);n=b(h,g);n.setAttribute("id",p);m.appendChild(n)}else for(;n.childNodes.length;)n.removeChild(n.lastChild);else n=b(h,g),n.setAttribute("id",
f._base._getUniqueId()),m.appendChild(n);if("pattern"==g)n.setAttribute("patternUnits","userSpaceOnUse"),h=b(h,"image"),h.setAttribute("x",0),h.setAttribute("y",0),h.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),h.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),t(h,E.xmlns.xlink,"xlink:href",a.src),n.appendChild(h);else for(n.setAttribute("gradientUnits","userSpaceOnUse"),g=0;g<a.colors.length;++g){var m=a.colors[g],p=b(h,"stop"),q=m.color=f.normalizeColor(m.color);p.setAttribute("offset",
m.offset.toFixed(8));p.setAttribute("stop-color",q.toCss());p.setAttribute("stop-opacity",q.a);n.appendChild(p)}this.rawNode.setAttribute("fill","url(#"+n.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return n},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+
")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=f.makeParameters(this.shape,a);for(var b in this.shape)if("type"!=
b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(f){this.inherited(arguments);var g=f?"width"in f?"rect":"cx"in f?"ellipse":"points"in f?"polyline":"d"in f?"path":null:null;if(f&&!g)return this;"polyline"===
g&&(f=B.clone(f),f.points=f.points.join(","));var h,m=x.get(this.rawNode,"clip-path");m&&(h=a.byId(m.match(/gfx_clip[\d]+/)[0]))&&h.removeChild(h.childNodes[0]);f?(h?(g=b(E.xmlns.svg,g),h.appendChild(g)):(m="gfx_clip"+ ++H,this.rawNode.setAttribute("clip-path","url(#"+m+")"),h=b(E.xmlns.svg,"clipPath"),g=b(E.xmlns.svg,g),h.appendChild(g),this.rawNode.parentNode.insertBefore(h,this.rawNode),x.set(h,"id",m)),x.set(g,f)):(this.rawNode.removeAttribute("clip-path"),h&&h.parentNode.removeChild(h));return this},
_removeClipNode:function(){var b,f=x.get(this.rawNode,"clip-path");f&&(b=a.byId(f.match(/gfx_clip[\d]+/)[0]))&&b.parentNode.removeChild(b);return b}});E.Group=m("dojox.gfx.svg.Group",E.Shape,{constructor:function(){n.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);E.Shape.prototype.destroy.apply(this,arguments)}});E.Group.nodeType="g";E.Rect=m("dojox.gfx.svg.Rect",[E.Shape,n.Rect],{setShape:function(a){this.shape=
f.makeParameters(this.shape,a);this.bbox=null;for(var b in this.shape)if("type"!=b&&"r"!=b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});E.Rect.nodeType="rect";E.Ellipse=m("dojox.gfx.svg.Ellipse",[E.Shape,n.Ellipse],{});E.Ellipse.nodeType="ellipse";E.Circle=m("dojox.gfx.svg.Circle",[E.Shape,n.Circle],{});E.Circle.nodeType="circle";
E.Line=m("dojox.gfx.svg.Line",[E.Shape,n.Line],{});E.Line.nodeType="line";E.Polyline=m("dojox.gfx.svg.Polyline",[E.Shape,n.Polyline],{setShape:function(a,b){a&&a instanceof Array?(this.shape=f.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=f.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();a=[];b=this.shape.points;for(var g=0;g<b.length;++g)a.push(b[g].x.toFixed(8),b[g].y.toFixed(8));this.rawNode.setAttribute("points",
a.join(" "));return this}});E.Polyline.nodeType="polyline";E.Image=m("dojox.gfx.svg.Image",[E.Shape,n.Image],{setShape:function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;for(var b in this.shape)if("type"!=b&&"src"!=b){var g=this.shape[b];if("width"===b||"height"===b)g=0>g?0:g;a.setAttribute(b,g)}a.setAttribute("preserveAspectRatio","none");t(a,E.xmlns.xlink,"xlink:href",this.shape.src);a.__gfxObject__=this;return this}});E.Image.nodeType="image";E.Text=m("dojox.gfx.svg.Text",
[E.Shape,n.Text],{setShape:function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("text-anchor",b.align);a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.setAttribute("text-rendering",F);a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(D(b.text));return this},getTextWidth:function(){var a=this.rawNode,
b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var f=0,g=a.firstChild.nodeValue;b.appendChild(a);if(""!=g)for(;!f;)f=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return f},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(I){a={x:0,y:0,width:0,height:0}}return a}});E.Text.nodeType="text";E.Path=m("dojox.gfx.svg.Path",[E.Shape,u.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&
this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});E.Path.nodeType="path";E.TextPath=m("dojox.gfx.svg.TextPath",[E.Shape,u.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var a=
this.rawNode;if(!a.firstChild){var g=b(E.xmlns.svg,"textPath"),h=D("");g.appendChild(h);a.appendChild(g)}g=(g=a.firstChild.getAttributeNS(E.xmlns.xlink,"href"))&&E.getRef(g);if(!g&&(h=this._getParentSurface())){var h=h.defNode,g=b(E.xmlns.svg,"path"),m=f._base._getUniqueId();g.setAttribute("id",m);h.appendChild(g);t(a.firstChild,E.xmlns.xlink,"xlink:href","#"+m)}g&&g.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var f=b(E.xmlns.svg,"textPath"),g=D("");
f.appendChild(g);a.appendChild(f)}a=a.firstChild;f=this.text;a.setAttribute("alignment-baseline","middle");switch(f.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",f.decoration);a.setAttribute("rotate",
f.rotated?90:0);a.setAttribute("kerning",f.kerning?"auto":0);a.firstChild.data=f.text}});E.TextPath.nodeType="text";var Q=534<function(){var a=/WebKit\/(\d*)/.exec(C);return a?a[1]:0}();E.Surface=m("dojox.gfx.svg.Surface",n.Surface,{constructor:function(){n.Container._init.call(this)},destroy:function(){n.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",
b);Q&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:f.normalizedLength(this.rawNode.getAttribute("width")),height:f.normalizedLength(this.rawNode.getAttribute("height"))}:null}});E.createSurface=function(g,h,m){var n=new E.Surface;n.rawNode=b(E.xmlns.svg,"svg");n.rawNode.setAttribute("overflow","hidden");h&&n.rawNode.setAttribute("width",0>h?0:h);m&&n.rawNode.setAttribute("height",0>m?0:m);h=b(E.xmlns.svg,"defs");n.rawNode.appendChild(h);
n.defNode=h;n._parent=a.byId(g);n._parent.appendChild(n.rawNode);f._base._fixMsTouchAction(n);return n};w={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var K=n.Container;m=E.Container={openBatch:function(){if(!this._batch){var a;a=E.useSvgWeb?q.doc.createDocumentFragment(!0):
q.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),K.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&
this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),K.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return K.clear.apply(this,arguments)},getBoundingBox:K.getBoundingBox,_moveChildToFront:K._moveChildToFront,_moveChildToBack:K._moveChildToBack};
u=E.Creator={createObject:function(a,f){if(!this.rawNode)return null;var g=new a;a=b(E.xmlns.svg,a.nodeType);g.setRawNode(a);g.setShape(f);this.add(g);return g}};B.extend(E.Text,w);B.extend(E.TextPath,w);B.extend(E.Group,m);B.extend(E.Group,n.Creator);B.extend(E.Group,u);B.extend(E.Surface,m);B.extend(E.Surface,n.Creator);B.extend(E.Surface,u);E.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=A&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);return!0};E.useSvgWeb&&
(E.createSurface=function(g,h,m){var n=new E.Surface;h=0>h?0:h;m=0>m?0:m;if(!h||!m){var q=p.position(g);h=h||q.w;m=m||q.h}g=a.byId(g);var q=g.id?g.id+"_svgweb":f._base._getUniqueId(),t=b(E.xmlns.svg,"svg");t.id=q;t.setAttribute("width",h);t.setAttribute("height",m);svgweb.appendChild(t,g);t.addEventListener("SVGLoad",function(){n.rawNode=this;n.isLoaded=!0;var a=b(E.xmlns.svg,"defs");n.rawNode.appendChild(a);n.defNode=a;if(n.onLoad)n.onLoad(n)},!1);n.isLoaded=!1;return n},E.Surface.extend({destroy:function(){var a=
this.rawNode;svgweb.removeChild(a,a.parentNode)}}),w={connect:function(a,b,f){"on"===a.substring(0,2)&&(a=a.substring(2));f=2==arguments.length?b:B.hitch(b,f);this.getEventSource().addEventListener(a,f,!1);return[this,a,f]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},B.extend(E.Shape,w),B.extend(E.Surface,w));return E})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(B,w,q,a,m){m=
q("dojox.gfx.path.Path",m.Shape,{constructor:function(a){this.shape=w.clone(B.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=a;this.segmented=!1},setAbsoluteMode:function(a){this._confirmSegmented();this.absolute="string"==typeof a?"absolute"==a:a;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-
this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,m=this._getRealMatrix();this.bbox=null;for(var q=0,g=this.segments.length;q<g;++q)this._updateWithSegment(this.segments[q],m);m=this.bbox;this.bbox=a;return this.tbbox=m?[{x:m.l,y:m.t},{x:m.r,y:m.t},{x:m.r,y:m.b},{x:m.l,y:m.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=
null;return this.inherited(arguments)},_updateBBox:function(h,m,q){q&&(m=a.multiplyPoint(q,h,m),h=m.x,m=m.y);this.bbox&&"l"in this.bbox?(this.bbox.l>h&&(this.bbox.l=h),this.bbox.r<h&&(this.bbox.r=h),this.bbox.t>m&&(this.bbox.t=m),this.bbox.b<m&&(this.bbox.b=m)):this.bbox={l:h,b:m,r:h,t:m}},_updateWithSegment:function(a,m){var h=a.args,g=h.length,f;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(f=0;f<g;f+=2)this._updateBBox(h[f],h[f+1],m);this.last.x=h[g-2];this.last.y=
h[g-1];this.absolute=!0;break;case "H":for(f=0;f<g;++f)this._updateBBox(h[f],this.last.y,m);this.last.x=h[g-1];this.absolute=!0;break;case "V":for(f=0;f<g;++f)this._updateBBox(this.last.x,h[f],m);this.last.y=h[g-1];this.absolute=!0;break;case "m":f=0;"x"in this.last||(this._updateBBox(this.last.x=h[0],this.last.y=h[1],m),f=2);for(;f<g;f+=2)this._updateBBox(this.last.x+=h[f],this.last.y+=h[f+1],m);this.absolute=!1;break;case "l":case "t":for(f=0;f<g;f+=2)this._updateBBox(this.last.x+=h[f],this.last.y+=
h[f+1],m);this.absolute=!1;break;case "h":for(f=0;f<g;++f)this._updateBBox(this.last.x+=h[f],this.last.y,m);this.absolute=!1;break;case "v":for(f=0;f<g;++f)this._updateBBox(this.last.x,this.last.y+=h[f],m);this.absolute=!1;break;case "c":for(f=0;f<g;f+=6)this._updateBBox(this.last.x+h[f],this.last.y+h[f+1],m),this._updateBBox(this.last.x+h[f+2],this.last.y+h[f+3],m),this._updateBBox(this.last.x+=h[f+4],this.last.y+=h[f+5],m);this.absolute=!1;break;case "s":case "q":for(f=0;f<g;f+=4)this._updateBBox(this.last.x+
h[f],this.last.y+h[f+1],m),this._updateBBox(this.last.x+=h[f+2],this.last.y+=h[f+3],m);this.absolute=!1;break;case "A":for(f=0;f<g;f+=7)this._updateBBox(h[f+5],h[f+6],m);this.last.x=h[g-2];this.last.y=h[g-1];this.absolute=!0;break;case "a":for(f=0;f<g;f+=7)this._updateBBox(this.last.x+=h[f+5],this.last.y+=h[f+6],m);this.absolute=!1}a=[a.action];for(f=0;f<g;++f)a.push(B.formatNumber(h[f],!0));if("string"==typeof this.shape.path)this.shape.path+=a.join("");else for(f=0,g=a.length;f<g;++f)this.shape.path.push(a[f])},
_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(a,m){this.tbbox=null;var h=this._validSegments[a.toLowerCase()];"number"==typeof h&&(h?m.length>=h&&(a={action:a,args:m.slice(0,m.length-m.length%h)},this.segments.push(a),this._updateWithSegment(a)):(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))},_collectArgs:function(a,m){for(var h=0;h<m.length;++h){var g=m[h];"boolean"==typeof g?a.push(g?1:0):"number"==typeof g?a.push(g):g instanceof Array?
this._collectArgs(a,g):"x"in g&&"y"in g&&a.push(g.x,g.y)}},moveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"M":"m",a);return this},lineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"L":"l",a);return this},hLineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"H":"h",a);return this},vLineTo:function(){this._confirmSegmented();
var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"V":"v",a);return this},curveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"C":"c",a);return this},smoothCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"S":"s",a);return this},qCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"Q":
"q",a);return this},qSmoothCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"T":"t",a);return this},arcTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"A":"a",a);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=
this.shape.path.join("");this.segmented=!0}},_setPath:function(a){a=w.isArray(a)?a:a.match(B.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(a){for(var h="",m=[],g=a.length,f=0;f<g;++f){var n=a[f],q=parseFloat(n);isNaN(q)?(h&&this._pushSegment(h,m),m=[],h=n):m.push(q)}this._pushSegment(h,m)}},setShape:function(a){this.inherited(arguments,["string"==typeof a?{path:a}:a]);this.segmented=!1;this.segments=[];B.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*
Math.PI});q=q("dojox.gfx.path.TextPath",m,{constructor:function(a){"text"in this||(this.text=w.clone(B.defaultTextPath));"fontStyle"in this||(this.fontStyle=w.clone(B.defaultFont))},getText:function(){return this.text},setText:function(a){this.text=B.makeParameters(this.text,"string"==typeof a?{text:a}:a);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?B.splitFontString(a):B.makeParameters(B.defaultFont,a);this._setFont();
return this}});return B.path={Path:m,TextPath:q}})},"esri/layers/OpenStreetMapLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../core/accessorSupport/decorators ./WebTileLayer".split(" "),function(B,w,q,a,m,h,p,x){return function(g){function f(){var a=g.call(this)||this;a.subDomains=["a","b","c"];a.fullExtent=new h.Extent(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,
h.SpatialReference.WebMercator);a.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png";a.operationalLayerType="OpenStreetMap";a.type="open-street-map";a.copyright="Map data \x26copy; OpenStreetMap contributors, CC-BY-SA";return a}a(f,g);m([p.property({readOnly:!0,json:{read:!1,write:!1}})],f.prototype,"subDomains",void 0);m([p.property({readOnly:!0,json:{read:!1,write:!1}})],f.prototype,"fullExtent",void 0);m([p.property({readOnly:!0,json:{read:!1,write:!1}})],f.prototype,
"urlTemplate",void 0);m([p.property({json:{read:!1}})],f.prototype,"type",void 0);m([p.property({json:{read:!1,write:!1}})],f.prototype,"copyright",void 0);m([p.property({json:{read:!1,write:!1}})],f.prototype,"wmtsInfo",void 0);return f=m([p.subclass("esri.layers.OpenStreetMapLayer")],f)}(p.declared(x))})},"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\r\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\r\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\r\n\t\t  role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\r\n\t\t\t\t\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_menuBtn"\r\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\r\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\r\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_leftBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\r\n\t\t class\x3d"tabStripButton-${tabPosition}"\r\n\t\t id\x3d"${id}_rightBtn"\r\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\r\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\r\n\t\x3cdiv class\x3d\'dijitTabListWrapper\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\r\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\r\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\r\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\r\n\x3c/div\x3e',
"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:webSceneViewer/widgets/LayerWidget/templates/LayerItem.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"LayerItem" data-dojo-attach-point\x3d"LayerItem"\x3e\r\n    \x3clabel\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"layerVisInputCheckbox"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"layerItemSpan"\x3e\x3c/span\x3e\r\n    \x3c/label\x3e\r\n\r\n    \x3cspan data-dojo-type\x3d"webSceneViewer/widgets/FeatureDisplayLimit/FeatureDisplayLimit" data-dojo-attach-point\x3d"featureDisplayLimit" title\x3d"${_i18n.layerItem.layerPartiallyDrawn}"\x3e\x3c/span\x3e\r\n    \x3cbutton class\x3d"icon_frame right inactive" data-dojo-attach-point\x3d"layerFrameButton" data-dojo-attach-event\x3d"click:_layerFrameButtonClick,dblclick:_layerFrameButtonDoubleClick" title\x3d"Frame layer" \x3e\x3c/button\x3e\r\n\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}"\r\n\trole\x3d"combobox"\r\n\taria-haspopup\x3d"true"\r\n\tdata-dojo-attach-point\x3d"_popupStateNode"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\r\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"url:webSceneViewer/widgets/EnvironmentSettings/templates/EnvironmentSettings.html":'\x3cdiv class\x3d"environmentSettings"\x3e\r\n  \x3cdiv class\x3d"sunSliderContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sliderTooltipInlineEditContainer" class\x3d"sliderTooltipContainer"\x3e\r\n      \x3cdiv class\x3d"sliderTooltipInnerContainer"\x3e\r\n        \x3cdiv class\x3d"sliderTooltip" data-dojo-attach-point\x3d"sliderTooltipInlineEdit" data-dojo-type\x3d"dijit/InlineEditBox" value\x3d"12:00 AM"  data-dojo-attach-event\x3d"onChange:_sliderTooltipChange"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"gmtDropdownDiv"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/FilteringSelect" labelType\x3d"html"\r\n             title \x3d "${_i18n.environmentSettings.chooseTimezone}"\r\n             class\x3d"gmtSelect"\r\n             data-dojo-attach-point\x3d"gmtSelect"\r\n             labelAttr\x3d"label"\r\n             data-dojo-attach-event\x3d"onChange:_gmtSelectChange"\r\n             value\x3d" "\r\n             id\x3d"environmentSettingsGMTSelect"\r\n        \x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"timeSlider"\r\n         class\x3d"envSunHorizontalSlider"\r\n         name\x3d"horizontalTimeSlider"\r\n         data-dojo-type\x3d"dijit/form/HorizontalSlider"\r\n         data-dojo-props\x3d"value: 0, minimum: 0, maximum:23.9583, intermediateChanges:true, showButtons:false"\r\n         data-dojo-attach-event\x3d"onChange:_sliderChange, onClick:_stopPlaying"\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/form/HorizontalRule" container\x3d"bottomDecoration"\r\n           count\x3d13 style\x3d"height:2px; margin-top:6px;"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/form/HorizontalRule" container\x3d"bottomDecoration"\r\n           count\x3d5 style\x3d"height:5px; margin-top: -2px;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"playButton play" data-dojo-attach-point\x3d"playDay" data-dojo-attach-event\x3d"onClick:_playDay" title\x3d"${_i18n.environmentSettings.playDay}"\x3e\x3cdiv class\x3d"playIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"timeFieldsContainer"\x3e\r\n    \x3cdiv class\x3d"sunDropdownDiv" id\x3d"seasonDropdownDiv"\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/form/DateTextBox" id\x3d"environmentDatePicker" class\x3d"datePicker" constraints \x3d "{ formatLength : \'long\' }" data-dojo-attach-point\x3d"datePicker" data-dojo-attach-event\x3d"onChange:_datePickerChange"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"playButton play" data-dojo-attach-point\x3d"playYear" data-dojo-attach-event\x3d"onClick:_playYear" title\x3d"${_i18n.environmentSettings.playYear}"\x3e\x3cdiv class\x3d"playIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"shadowContainer"\x3e\r\n    \x3cdiv class\x3d"shadowCheckboxContainer"\x3e\r\n      \x3cinput class\x3d"shadowButton" name\x3d"shadowButton" data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"shadowButton"\r\n             data-dojo-attach-event\x3d"onChange:_directShadowChange"\r\n             data-dojo-attach-point\x3d"directShadowButton"/\x3e\r\n      \x3clabel for\x3d"shadowButton" data-dojo-attach-point\x3d"directShadowButtonLabel"\x3e${_i18n.environmentSettings.directShadow}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:webSceneViewer/widgets/Settings/templates/Settings.html":'\x3cdiv class\x3d"Settings"\x3e\r\n    \x3cdiv class\x3d"qualitySwitch"\x3e\r\n        \x3cspan class\x3d"subHeader"\x3e${_i18n.settings.qualityLabel}\x3c/span\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"qualitySlider"\r\n             class\x3d"qualitySlider"\r\n             name\x3d"qualitySlider"\r\n             data-dojo-type\x3d"dijit/form/HorizontalSlider"\r\n             data-dojo-props\x3d"value: -1, minimum: 0, maximum:2, intermediateChanges:false, showButtons:false, discreteValues: 3"\r\n             data-dojo-attach-event\x3d"onChange:_sliderChange"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/form/HorizontalRule" container\x3d"bottomDecoration"\r\n                 count\x3d3 style\x3d"height:5px; margin-top: 0px; margin-bottom: 3px;"\x3e\x3c/div\x3e\r\n            \x3col data-dojo-type\x3d"dijit/form/HorizontalRuleLabels"\r\n                data-dojo-props\x3d"\r\n            container: \'bottomDecoration\'"\r\n                style\x3d""\x3e\r\n                \x3cli\x3e${_i18n.settings.qualityLow}\x3c/li\x3e\r\n                \x3cli\x3e\x3c/li\x3e\r\n                \x3cli title\x3d"${_i18n.settings.qualityHigh}"\x3e${_i18n.settings.qualityHigh}\x3c/li\x3e\r\n            \x3c/ol\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"line"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"mouseNavigation"\x3e\r\n        \x3cspan class\x3d"subHeader"\x3e${_i18n.settings.navigation}\x3c/span\x3e\r\n        \x3ctable\x3e\r\n            \x3ctr\x3e\r\n                \x3ctd\x3e\r\n                    \x3cdiv class\x3d"navGroup"\x3e\r\n                        \x3clabel\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"WSVNavigationRadioButton" data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n                            \x3cspan class\x3d"RadioLabel" title\x3d"${_i18n.settings.sceneNav}"\x3e${_i18n.settings.sceneNav}\x3c/span\x3e\r\n                        \x3c/label\x3e\r\n                        \x3clabel\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"ProNavigationRadioButton"  data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"onChange:_navigationModeChanged"\x3e\r\n                            \x3cspan class\x3d"RadioLabel" title\x3d"${_i18n.settings.proNav}"\x3e${_i18n.settings.proNav}\x3c/span\x3e\r\n                        \x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd\x3e\r\n                    \x3cdiv class\x3d"navImage" data-dojo-attach-point\x3d"navigationImage" title\x3d"${_i18n.settings.mouseImage}"\x3e\x3c/div\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n\r\n\r\n\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dojox/widget/Wizard/Wizard.html":'\x3cdiv class\x3d"dojoxWizard" dojoAttachPoint\x3d"wizardNode"\x3e\r\n    \x3cdiv class\x3d"dojoxWizardContainer" dojoAttachPoint\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"dojoxWizardButtons" dojoAttachPoint\x3d"wizardNav"\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"previousButton"\x3e${previousButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"nextButton"\x3e${nextButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"doneButton" style\x3d"display:none"\x3e${doneButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"cancelButton"\x3e${cancelButtonLabel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"*now":function(B){B(['dojo/i18n!*preload*webSceneViewer/widgets/ViewerTools/nls/ViewerTools*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
define("esri/core/declare dijit/_WidgetBase dojo/dom-construct dojo/query dijit/layout/TabContainer dijit/layout/ContentPane esri/widgets/Search esri/widgets/Search/SearchViewModel esri/widgets/Legend esri/widgets/DirectLineMeasurement3D esri/widgets/AreaMeasurement3D esri/core/watchUtils esri/core/geolocationUtils webSceneViewer/widgets/BasemapGallery/BasemapGalleryPane webSceneViewer/widgets/MenuContainer/MenuContainer webSceneViewer/widgets/LayerWidget/LayerWidget webSceneViewer/widgets/EnvironmentSettings/EnvironmentSettings webSceneViewer/widgets/EnvironmentSettings/EnvironmentSettingsViewModel webSceneViewer/widgets/Settings/Settings webSceneViewer/widgets/ShareDialog/ShareDialog webSceneViewer/widgets/ShareDialog/ShareDialogViewModel dojo/i18n!../nls/widgets".split(" "),function(B,
w,q,a,m,h,p,x,g,f,n,u,b,t,D,E,C,A,F,H,Q,K){var y=Q.ShareDialogViewModel;return B([w],{viewModel:null,locationEnabledOnOpen:!0,_removeHandlers:function(a){a.forEach(function(a){a.remove()})},init:function(){var a=new D({viewModel:this.viewModel,appState:this.viewModel.appState},this.domNode);this._createSearchWidget(a);this._createLayerLegendWidget(a);this._createBasemapWidget(a);this._createEnvironmentWidget(a);this._createMeasurementWidget(a);this._createShareDialog(a);this._createSettingsWidget(a);
this.menu=a;this.own(u.watch(this.viewModel,"activeMenuIndex",function(){this.menu.setActive(this.viewModel.activeMainMenuIndex,!0);1===this.viewModel.activeMainMenuIndex&&(1===this.viewModel.activeSubMenuIndex?this._tabContainer.selectChild(this.legend):this._tabContainer.selectChild(this.layers));-1<this.viewModel.activeMainMenuIndex&&this.viewModel.appState.view.popup.close()}.bind(this)));this.own(u.init(this,"view.map",function(){this._initializeActiveMenuPane();this._tabContainer.startup();
this._tabContainer.watch("selectedChildWidget",function(a,b,f){this.viewModel.activeSubMenuIndex=f===this.legend?1:null;this._updateLegendVisibility()}.bind(this))}.bind(this)));this._tabContainer.startup()},_initializeActiveMenuPane:function(){var a=0;this.viewModel.appState.initialDialogsOpened||this.viewModel.appState.device.isMobile?a=-1:(a=(void 0!==this.viewModel.appState.urlParameters.webscene?""!==this.viewModel.appState.urlParameters.webscene:!1)||(void 0!==this.viewModel.appState.urlParameters.url?
""!==this.viewModel.appState.urlParameters.url:!1)||(null!==this.viewModel.appState.urlParameters.layers?""!==this.viewModel.appState.urlParameters.layers:!1),this.viewModel.appState.view.map.layers&&0<this.viewModel.appState.view.map.layers.length?a=1:a?a=-1:(this.locationEnabledOnOpen=!1,a=0));this.viewModel.activeMainMenuIndex=a;this.viewModel.activeSubMenuIndex=null},setActiveMenuPane:function(a,b){this.viewModel.activeMainMenuIndex=a;this.viewModel.activeSubMenuIndex=b},postCreate:function(){u.whenOnce(this.viewModel.appState.view,
"map",function(){this.init()}.bind(this))},_createSearchWidget:function(a){var f,g=this;a=a.add({title:K.viewerTools.titleSearch,id:"search",show:!0,open:function(){g.locationEnabledOnOpen||(f.locationEnabled=!1,g.locationEnabledOnOpen=!0);f.focus()},close:function(){f.viewModel.clearGraphics()}});a=q.create("div",{"class":"GeocoderContainer"},a);f=new p({viewModel:new x({view:this.viewModel.appState.view})},a);if(this.viewModel.appState.portal&&this.viewModel.appState.portal.helperServices&&this.viewModel.appState.portal&&
this.viewModel.appState.portal.helperServices.geocode)f.on("search-blur",function(){b.supported()&&(f.locationEnabled=!0)});f.set("activeSourceIndex",-1);if(this.viewModel.appState.device.isMobile)f.on("search-complete",function(a){f.blur()})},_createMeasurementWidget:function(b){function g(b,f,g){var l=new h({title:'\x3cspan class\x3d"icon '+b+'"\x3e\x3c/span\x3e',tooltip:g,id:b});t.addChild(l);b=new f({view:this.viewModel.appState.view,visible:!1},l.domNode);u.init(b.viewModel,"state",function(b){var f=
this.viewModel.appState.view.spatialReference;!f||f.isWGS84||f.isWebMercator||!l||"measuring"!==b||this.viewModel.appState.device.isMobile?a(".infoIcon",l.domNode.parentNode).remove():(b=q.create("div"),b.className="infoIcon "+l.id,b.title=K.viewerTools.measureMessage,q.place(b,l.domNode,"after"))}.bind(this));return{tool:b,container:l}}var p=q.create("div",{style:"min-height:10px; width:100%;"}),t=new m({doLayout:!1,id:"measureTool"},p);this.own({remove:function(){t.destroy()}});var w=function(a){a===
y.tool?(x.tool.visible=!1,y.tool.visible=!0):(y.tool.visible=!1,x.tool.visible=!0)};b=b.add({title:K.viewerTools.titleMeasure,id:"measure",show:!0,open:function(){t.layout();t.selectChild(B);w(A)}.bind(this),close:function(){x.tool.visible=!1;y.tool.visible=!1}});t.watch("selectedChildWidget",function(a,b,f){f===x.container&&(A=x.tool);f===y.container&&(A=y.tool);B=f;w(A)}.bind(this));b.appendChild(t.domNode);b=b.previousSibling;q.destroy(b.querySelector(".paneTitle"));b.appendChild(t.domNode.children[0]);
var x=g.call(this,"direct-measure",f,K.viewerTools.titleDirectMeasure),y=g.call(this,"area-measure",n,K.viewerTools.titleAreaMeasure),A=x.tool,B=x.container;t.startup()},_createLayerLegendWidget:function(a){var b=q.create("div",{style:"min-height:10px; width:100%;"});this._tabContainer=new m({doLayout:!1},b);a=a.add({title:K.viewerTools.titleLayers,id:"layers",show:!0,hideTitle:!0,tooltip:K.viewerTools.tooltipLayers,open:function(){this._tabContainer.layout();this._updateLegendVisibility()}.bind(this),
close:function(){this.legendWidget&&(this.legendWidget.destroy(),this.legendWidget=null)}.bind(this),layersLoadingProgressBar:!0});a.appendChild(this._tabContainer.domNode);a=a.previousSibling;a.appendChild(this._tabContainer.domNode.children[0]);this.layers=this._createLayerWidget();this._tabContainer.addChild(this.layers);this.legend=new h({title:K.viewerTools.titleLegend,tooltip:K.viewerTools.titleLegend});this._tabContainer.addChild(this.legend);return{paneHeader:a,lw:this.layers,legend:this.legend}},
_createLayerWidget:function(){return new E({title:K.viewerTools.titleLayers,tooltip:K.viewerTools.titleLayers,appState:this.viewModel.appState})},_createLegendWidget:function(){var b=q.create("div");q.place(b,this.legend.containerNode);var b=new g({view:this.viewModel.appState.view},b),f=a(".esri-legend__message",b.domNode);0<f.length&&(f[0].textContent=K.viewerTools.legendMessageOverride);return b},_updateLegendVisibility:function(){1===this.viewModel.activeSubMenuIndex?this.legendWidget||(this.legendWidget=
this._createLegendWidget()):this.legendWidget&&(this.legendWidget.destroy(),this.legendWidget=null)},_createBasemapWidget:function(a){a=a.add({title:K.viewerTools.titleBasemap,id:"basemap",show:!0});this.basemapGallery=new t({node:a,appState:this.viewModel.appState})},_createShareDialog:function(a){if(!this.viewModel.appState.portal||this.viewModel.appState.portal.userHasSharingPrivileges()){var b=new y({portal:this.viewModel.appState.portal,view:this.viewModel.appState.view,isMobile:this.viewModel.appState.device.isMobile});
this.shareDialog=new H({viewModel:b,appState:this.viewModel.appState});a=a.add({title:K.viewerTools.titleShare,id:"tridon",show:!0,open:function(){b.active=!0},close:function(){b.active=!1}});this.shareDialog.placeAt(a);this.shareDialog.on("share-email",function(a){this.emit("share-email",a)}.bind(this))}},_createEnvironmentWidget:function(a){a=a.add({title:K.viewerTools.titleDaylight,id:"environment",show:!0});(new C({viewModel:new A({view:this.viewModel.appState.view})},a)).startup()},_createSettingsWidget:function(a){a=
a.add({title:K.viewerTools.titleSettings,id:"settings",show:!0});this.settingsWidget=new F({appState:this.viewModel.appState,id:"settingsWidget"},a);this.settingsWidget.startup()},refreshTools:function(){this._tabContainer&&this._tabContainer.layout()}})});