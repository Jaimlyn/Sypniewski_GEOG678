/*! Storymaps-MyStory - v1.14.1 - 2018-09-21, 10:23:17 AM - Copyright © 2015-2018 Esri 
This application is released under the Apache License V2.0 by Esri http://www.esri.com/ 
Licenses used in included libraries shown below: */

/*! tailcoat - v1.2.2 - 2015-03-27
*   https://github.com/ArcGIS/tailcoat
*   Copyright (c) 2015 Environmental Systems Research Institute, Inc.
*   Apache 2.0 License */

/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/

/*! jQuery UI - v1.10.4 - 2015-10-19
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.position.js, jquery.ui.effect.js, jquery.ui.effect-fade.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

/*!

 handlebars v2.0.0

Copyright (C) 2011-2014 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

/*! jQuery Color v@2.1.2 http://github.com/jquery/jquery-color | jquery.org/license */

/*!
 * clipboard.js v1.5.15
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */

/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
 */

/*!
 *  cropit - v0.2.0
 *  Customizable crop and zoom.
 *  https://github.com/scottcheng/cropit
 *
 *  Made by Scott Cheng
 *  Based on https://github.com/yufeiliu/simple_image_uploader
 *  Under MIT License

 Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
 */

(function(){function r(e){var t=n.closest("accordion-section",n.eventTarget(e)),r=n.closest("accordion",t).children;for(var i=0;i<r.length;i++)n.removeClass(r[i],"active");n.addClass(t,"active")}function i(e,t){n.addEvent(e,n.event(),function(r){var i=n.getAttr(e,"data-direction"),s=document.querySelector("html");n.stopPropagation(r),n.preventDefault(r),t.style.display="block",setTimeout(function(){n.addClass(t,i),n.addClass(s,"scroll-lock")},0)})}function s(e){function t(t){var r=n.getAttr(e,"data-modal"),i=document.querySelectorAll('.modal[data-modal="'+r+'"]')[0];if(i!==null&&typeof i!="undefined"){var s=i.parentNode,a=document.querySelector("html");n.stopPropagation(t),n.preventDefault(t);if(i.className.indexOf("create-story-modal")!==-1||i.className.indexOf("remove-layer-modal")!==-1&&window.builderIntegration)document.body.style.height="100%",document.body.style.overflow="hidden",a.style.height="100%",/(.*?Edge\/\d+)|(.*?Trident.*?)|(.*?MSIE.*?)/gi.test(window.navigator.userAgent)&&(a.style.overflow="hidden");s.style.overflow="hidden",n.addClass(s,"visible"),n.addClass(i,"visible"),o(s,i),u(s,i),i.offsetHeight+10<document.documentElement.clientHeight&&(i.style.marginTop=i.offsetHeight/-2+"px",n.addClass(i,"vertically-centered"))}}n.removeEvent(e,n.event(),t),n.addEvent(e,n.event(),t)}function o(e,t){e.addEventListener("wheel",a),window.addEventListener("keydown",f),e.addEventListener("touchmove",l),e.addEventListener("click",function(n){h(e,t,n)}),t.addEventListener("click",c)}function u(e,t){var n=t.querySelectorAll(".modal-dismiss");if(n.length>0)for(var r=0;r<n.length;r++)n[r].addEventListener("click",function(n){h(e,t,n)})}function a(e){var t=e.target===document.querySelector("#image-zoom-slider"),r=n.closest("toggle-view",e.target),i=n.closest("remove-layer-modal",e.target)&&window.builderIntegration;!t&&!r&&!i&&e.preventDefault(),e.stopPropagation()}function f(e){e.keyCode>=37&&e.keyCode<=40&&(e.preventDefault(),e.stopPropagation())}function l(e){var t=e.target===document.querySelector("#image-zoom-slider"),r=n.closest("toggle-view",e.target),i=n.closest("remove-layer-modal",e.target)&&window.builderIntegration;!t&&!r&&!i&&e.preventDefault(),e.stopPropagation()}function c(e){e.stopPropagation()}function h(e,t,r){var i=n.hasClass(r.target,"modal-overlay"),s=n.hasClass(r.target,"modal-dismiss"),o=document.querySelector("html");if(!i&&!s)return;r.stopPropagation(),r.preventDefault();if(t.className.indexOf("create-story-modal")!==-1||t.className.indexOf("remove-layer-modal")!==-1&&window.builderIntegration)document.body.style.height="",document.body.style.overflow="",o.style.height="",/(.*?Edge\/\d+)|(.*?Trident.*?)|(.*?MSIE.*?)/gi.test(window.navigator.userAgent)&&(o.style.overflow="");n.removeClass(t,"visible"),n.removeClass(e,"visible"),p(e,t)}function p(e,t){e.removeEventListener("wheel",a),e.removeEventListener("touchmove",l),window.removeEventListener("keydown",f),t.removeEventListener("click",c)}function d(e){e.value=e.placeholder,n.addClass(e,"placeholder")}function v(e){var t=n.isIE8?e.srcElement:e.target;t.value="",n.removeClass(t,"placeholder")}function m(e){n.preventDefault(e);var t=n.closest("navigation-bar-nav",e.target);n.hasClass(t,"open")?n.removeClass(t,"open"):n.addClass(t,"open")}function g(e){n.preventDefault(e);var t,r=n.eventTarget(e);n.hasClass(r,"tab")?t=r:t=n.closest("tab",r);var i=n.closest("tab-nav",t).querySelectorAll(".tab"),s=n.indexOf(t,i),o=n.closest("tab-group",t).querySelectorAll(".tab-content");for(var u=0;u<i.length;u++)n.removeClass(i[u],"active"),n.removeClass(o[u],"active");n.addClass(t,"active"),n.addClass(o[s],"active")}function y(){var e=window.T;t.noConflict=function(){return window.T=e,this},window.T=t}var t={},n=t.utils={};n.event=function(){return"click"},n.addEvent=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent)return e.attachEvent("on"+t,n)},n.removeEvent=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);if(e.detachEvent)return e.detachEvent("on"+t,n)},n.eventTarget=function(e){if(!e.target)return e.srcElement;if(e.target)return e.target},n.preventDefault=function(e){if(e.preventDefault)return e.preventDefault();e.returnValue&&(e.returnValue=!1)},n.stopPropagation=function(e){e=e||window.event;if(e.stopPropagation)return e.stopPropagation();e.cancelBubble&&(e.cancelBubble=!0)},n.hasClass=function(e,t){var n=new RegExp(" "+t+" ");return n.test(" "+e.className+" ")?!0:!1},n.addClass=function(e,t){t=t.split(" ");for(var r=0;r<t.length;r++)n.hasClass(e,t[r])||(e.className+=" "+t[r])},n.removeClass=function(e,t){t=t.split(" ");for(var r=0;r<t.length;r++){var i=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(n.hasClass(e,t[r])){while(i.indexOf(" "+t[r]+" ")>=0)i=i.replace(" "+t[r]+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}}},n.closest=function(e,t){var r,i;for(i=t;i;i=i.parentNode)if(i.nodeType===1&&n.hasClass(i,e)){r=i;break}return i},n.getAttr=function(e,t){if(e.getAttribute)return e.getAttribute(t);var n,r=e.attributes;for(var i=0;i<r.length;i++)r[i].nodeName===t&&(n=r[i].nodeValue);return n},n.indexOf=function(e,t,n){var r=n||0;if(t.indexOf)return t.indexOf(e,r);for(r;r<t.length;r++)if(t[r]===e)return r;return-1},n.makeArray=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);return t},n.isTouch=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0?!0:!1},n.isIE8=function(){var e=document.getElementsByTagName("html")[0];return n.hasClass(e,"ie8")?!0:!1},n.supportsPlaceholder=function(){var e=document.createElement("input");return"placeholder"in e},t.accordion=function(){var e=document.querySelectorAll(".accordion");if(e.length>0)for(var t=0;t<e.length;t++){var i=e[t].children;for(var s=0;s<i.length;s++)n.addEvent(i[s],n.event(),r)}},t.clickDropdown=function(){function r(){var e=n.makeArray(document.querySelectorAll(".click-dropdown"));for(var t=0;t<e.length;t++)n.removeClass(e[t],"visible")}function i(e){var s=n.closest("click-dropdown",n.eventTarget(e));s||(r(),n.removeEvent(t,n.event(),i))}function s(e){n.addEvent(e,n.event(),function(e){n.preventDefault(e);var s=n.closest("click-dropdown",n.eventTarget(e));n.hasClass(s,"visible")?(n.removeClass(s,"visible"),n.removeEvent(t,n.event(),i)):(r(),n.addClass(s,"visible"),n.addEvent(t,n.event(),i))})}var e=n.makeArray(document.querySelectorAll(".click-dropdown")),t=document.querySelector("body");if(e.length===0)return;for(var o=0;o<e.length;o++){var u=n.closest("click-dropdown",e[o]);s(u)}},t.drawer=function(){var e=document.querySelector(".drawer"),t=n.makeArray(document.querySelectorAll(".drawer-toggle"));if(t.length===0)return;n.addEvent(e,n.event(),function(t){var r=document.querySelector("html"),i=n.hasClass(n.eventTarget(t),"drawer");i&&(n.preventDefault(t),n.stopPropagation(t),n.removeClass(e,"active-left active-right"),n.removeClass(r,"scroll-lock"),setTimeout(function(){e.style.display="none"},250))});for(var r=0;r<t.length;r++)i(t[r],e)},t.dropdown=function(){function i(t){var s=n.hasClass(t.target,"site-dropdown-toggle"),o=n.closest("site-dropdown",t.target);!s&&!o&&(n.removeClass(e,"visible"),n.removeEvent(r,n.event(),i))}var e=document.querySelector(".site-dropdown"),t=document.querySelector(".site-dropdown-toggle"),r=document.querySelector("body");e&&n.addEvent(t,n.event(),function(t){n.hasClass(e,"visible")?(n.removeClass(e,"visible"),n.removeEvent(r,n.event(),i)):(n.addClass(e,"visible"),n.addEvent(r,n.event(),i))})},t.modal=function(){var e=document.querySelectorAll(".modal-show");if(e.length>0)for(var t=0;t<e.length;t++)s(e[t])},t.placeholder=function(){var e=document.querySelectorAll("input"),t=n.supportsPlaceholder();if(t===!1)for(var r=0;r<e.length;r++){var i=e[r].type,s=["text","search","url","tel","email","password"];if(n.indexOf(i,s)!==-1){var o;e[r].value===""||e[r].value===undefined?o=!0:o=!1;var u;e[r].getAttribute("placeholder")!==null?u=!0:u=!1,o&&u&&(d(e[r]),n.addEvent(e[r],"focus",v))}}},t.siteSearch=function(){function r(i){if(n.closest("site-search-form",i.target)!==null)return;e.value="Search",n.removeClass(t,"active"),n.removeEvent(document.querySelector("body"),"click",r)}var e=document.querySelector(".site-search-input"),t=document.querySelector(".site-search");e&&(e.value="Search",n.addEvent(e,"focus",function(i){e.value="",n.addClass(t,"active"),n.addEvent(document.querySelector("body"),"click",r)}))},t.subnav=function(){var e=document.querySelectorAll(".navigation-bar.responsive");if(e.length>0){var t,r,i,s,o,u,a,f=document.querySelectorAll(".navigation-bar.responsive ul");for(t=0;t<e.length;t++){var l=e[t].children[0].children[1],c=l.children[0];n.addEvent(c,n.event(),m)}for(r=0;r<f.length;r++){o=f[r],u=o.querySelectorAll("li"),a=(100-2*u.length)/u.length;for(i=0;i<u.length;i++)n.isIE8()?u[i].style.width=a+"%":u[i].style.maxWidth=a+"%"}}},t.tabs=function(){var e=document.querySelectorAll(".tab");if(e.length>0){var t,r,i,s,o,u,a,f=document.querySelectorAll(".tab-group");for(t=0;t<e.length;t++)s=e[t],n.addEvent(s,n.event(),g);for(r=0;r<f.length;r++){o=f[r],u=o.querySelectorAll(".tab"),a=100/u.length;for(i=0;i<u.length;i++)n.isIE8()?u[i].style.width=a+"%":u[i].style.maxWidth=a+"%"}}},t.init=function(e){if(e)for(var r=0;r<e.length;r++)t[e[r]]();else t.accordion(),t.drawer(),t.dropdown(),t.clickDropdown(),t.modal(),t.placeholder(),t.siteSearch(),t.subnav(),t.tabs();n.isTouch()&&n.addClass(document.body,"tailcoat-touch")},typeof module=="object"&&typeof module.exports=="object"?module.exports=t:typeof define=="function"&&define.amd,y()})(),define("lib-app/tailcoat",function(){}),function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(b.acceptData(e)){var s,o,u=b.expando,a="string"==typeof n,f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if(h&&c[h]&&(i||c[h].data)||!a||r!==t)return h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n)),s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],null==o&&(o=s[b.camelCase(n)])):o=s,o}}function q(e,t,n){if(b.acceptData(e)){var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(u[a]){if(t&&(s=n?u[a]:u[a].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t=t in s?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}(n||(delete u[a].data,U(u[a])))&&(o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null)}}}function R(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(F,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=b.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=b.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,b.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if("*"!==r){if("*"!==f&&f!==r){if(i=o[f+" "+r]||o["* "+r],!i)for(n in o)if(s=n.split(" "),s[1]===r&&(i=o[f+" "+s[0]]||o["* "+s[0]])){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;s>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e)if(r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r],o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],$n.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show"))continue;v.push(i)}if(s=v.length){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;s>i;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){(s.addEventListener||"load"===e.type||"complete"===s.readyState)&&(D(),b.ready())},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0)),T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=s.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||b.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r));return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&N.test(n.replace(k,"@").replace(L,"]").replace(C,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:y&&!y.call("﻿ ")?function(e){return null==e?"":y.call(e)}:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(P(Object(e))?b.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===b.type(r)){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===s.readyState)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=null==e.frameElement&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e="string"==typeof e?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!a||i&&!f||(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,s=1===i?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==p.className,leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip,b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];a&&(n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===p.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null)}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length&&(u=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>o;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?s?R(s,e,b.data(s,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),s.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=b.isFunction(e),this.each(function(n){var s,o=b(this);1===this.nodeType&&(s=i?e.call(this,n,o.val()):e,null==s?s="":"number"==typeof s?s+="":b.isArray(s)&&(s=b.map(s,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(V,""):null==n?"":n)}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===i?b.prop(e,n,r):(o=1!==a||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z)),r===t?s&&o&&"get"in s&&null!==(u=s.get(e,n))?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),null==u?t:u):null!==r?s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&1===e.nodeType)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),s="boolean"==typeof r?Y&&G?null!=i:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},Y&&G||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0;e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(m&&(l=m.events)){t=(t||"").match(E)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||b.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)b.event.remove(e,p+t[f],n,r,!0);b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+b.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[b.expando]?n:new b.Event(v,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{},o||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!o&&!c.noBubble&&!b.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!(o||n.isDefaultPrevented()||c._default&&c._default.apply(i.ownerDocument,r)!==!1||"click"===v&&b.nodeName(i,"a")||!b.acceptData(i)||!a||!i[v]||b.isWindow(i))){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!b.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&s.addEventListener(e,r,!0)},teardown:function(){0===--n&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;if((t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){if(h=!0,v=w,m=t,y=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){(!n||(r=U.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(s=[])),n=!1,(r=z.exec(u))&&(n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length));for(o in i.filter)!(r=V[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&"parentNode"===i,o=T++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[i])if(1===t.nodeType||s)if(l=t[w]||(t[w]={}),(f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else if(f=l[i]=[c],f[1]=e(t,n,u)||r,f[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:mt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;s>a;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{if(n=i.filter[e[a].type].apply(null,e[a].matches),n[w]){for(r=++a;s>r;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,r>a&&yt(e.slice(a,r)),s>r&&yt(e=e.slice(r)),s>r&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=null==S?1:Math.random()||.1;for(E&&(f=a!==c&&a,r=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&!p&&i.relative[o[1].type]){if(t=i.find.ID(a.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){if(a=o[s],i.relative[f=a.type])break;if((l=i.find[f])&&(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=r.length&&pt(o),!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=RegExp("^"+H+"*,"+H+"*"),z=RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=RegExp(q),X=RegExp("^"+j+"$"),V={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),NAME:RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:RegExp("^("+B.replace("w","w*")+")"),ATTR:RegExp("^"+I),PSEUDO:RegExp("^"+q),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;return n!==c&&9===n.nodeType&&n.documentElement?(c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==L?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,n){return typeof n.getElementsByName!==L?n.getElementsByName(name):t},i.find.CLASS=S.getByClassName&&function(e,n){return typeof n.getElementsByClassName===L||p?t:n.getElementsByClassName(e)},v=[],d=[":focus"],(S.qsa=rt(n.querySelectorAll))&&(ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=RegExp(d.join("|")),v=RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;return e===t?(a=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c):c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']"),!(!S.matchesSelector||p||v&&v.test(t)||d.test(t)))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;if(a=!S.detectDuplicates,e.sort(y),a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[x,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[0>n?n+t:n]}),even:ct(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!b(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(1>=c||"string"!=typeof v||b.support.checkClone)&&Tt.test(v))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c&&(f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,1===f.childNodes.length&&(f=i),i)){for(n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;c>l;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o)for(a=u[u.length-1].ownerDocument,b.map(u,Dt),l=0;o>l;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")));f=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===b.type(s))b.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!b.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===b.inArray(s,r))&&(o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;null!=(n=e[u]);u++)if((t||b.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+w+")(.*)$","i"),Jt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=b.camelCase(n),f=e.style;if(n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||b.cssNumber[a]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||b.contains(e.ownerDocument,e)||(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==w&&(w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r)),e>=200&&300>e||304===e?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),204===e?(l=!0,T="nocontent"):304===e?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===w)return x;a=c.global,a&&0===b.active++&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==w){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(2>w))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){if(n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&1!==a&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=("absolute"===r||"fixed"===r)&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),define("lib-app/jquery-1.9.1.min",function(){}),function(e,t){function n(t,n){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap=#"+s+"]")[0],!!o&&r(o)):!1):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&r(t)}function r(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var i=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var r,i,s=e(this[0]);s.length&&s[0]!==document;){if(r=s.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(i=parseInt(s.css("zIndex"),10),!isNaN(i)&&0!==i))return i;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),i&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var s="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;i.length>r;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function r(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,o=Math.max,u=Math.abs,a=Math.round,f=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var n,r,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),n=o.offsetWidth,i.css("overflow","scroll"),r=o.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),s=n-r},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var s,p,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=i(b),b[0].preventDefault&&(t.at="left top"),p=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e,n,r=(t[this]||"").split(" ");1===r.length&&(r=f.test(r[0])?r.concat(["center"]):l.test(r[0])?["center"].concat(r):["center","center"]),r[0]=f.test(r[0])?r[0]:"center",r[1]=l.test(r[1])?r[1]:"center",e=c.exec(r[0]),n=c.exec(r[1]),x[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(r[0])[0],h.exec(r[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=v:"center"===t.at[1]&&(g.top+=v/2),s=n(x.at,p,v),g.left+=s[0],g.top+=s[1],this.each(function(){var i,f,l=e(this),c=l.outerWidth(),h=l.outerHeight(),d=r(this,"marginLeft"),y=r(this,"marginTop"),T=c+d+r(this,"marginRight")+E.width,N=h+y+r(this,"marginBottom")+E.height,C=e.extend({},g),L=n(x.my,l.outerWidth(),l.outerHeight());"right"===t.my[0]?C.left-=c:"center"===t.my[0]&&(C.left-=c/2),"bottom"===t.my[1]?C.top-=h:"center"===t.my[1]&&(C.top-=h/2),C.left+=L[0],C.top+=L[1],e.support.offsetFractions||(C.left=a(C.left),C.top=a(C.top)),i={marginLeft:d,marginTop:y},e.each(["left","top"],function(n,r){e.ui.position[S[n]]&&e.ui.position[S[n]][r](C,{targetWidth:p,targetHeight:v,elemWidth:c,elemHeight:h,collisionPosition:i,collisionWidth:T,collisionHeight:N,offset:[s[0]+L[0],s[1]+L[1]],my:t.my,at:t.at,within:w,elem:l})}),t.using&&(f=function(e){var n=m.left-C.left,r=n+p-c,i=m.top-C.top,s=i+v-h,a={target:{element:b,left:m.left,top:m.top,width:p,height:v},element:{element:l,left:C.left,top:C.top,width:c,height:h},horizontal:0>r?"left":n>0?"right":"center",vertical:0>s?"top":i>0?"bottom":"middle"};c>p&&p>u(n+r)&&(a.horizontal="center"),h>v&&v>u(i+s)&&(a.vertical="middle"),a.important=o(u(n),u(r))>o(u(i),u(s))?"horizontal":"vertical",t.using.call(this,e,a)}),l.offset(e.extend(C,{using:f}))})},e.ui.position={fit:{left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,u=e.left-t.collisionPosition.marginLeft,a=i-u,f=u+t.collisionWidth-s-i;t.collisionWidth>s?a>0&&0>=f?(n=e.left+a+t.collisionWidth-s-i,e.left+=a-n):e.left=f>0&&0>=a?i:a>f?i+s-t.collisionWidth:i:a>0?e.left+=a:f>0?e.left-=f:e.left=o(e.left-u,e.left)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,u=e.top-t.collisionPosition.marginTop,a=i-u,f=u+t.collisionHeight-s-i;t.collisionHeight>s?a>0&&0>=f?(n=e.top+a+t.collisionHeight-s-i,e.top+=a-n):e.top=f>0&&0>=a?i:a>f?i+s-t.collisionHeight:i:a>0?e.top+=a:f>0?e.top-=f:e.top=o(e.top-u,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,s=i.offset.left+i.scrollLeft,o=i.width,a=i.isWindow?i.scrollLeft:i.offset.left,f=e.left-t.collisionPosition.marginLeft,l=f-a,c=f+t.collisionWidth-o-a,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0];0>l?(n=e.left+h+p+d+t.collisionWidth-o-s,(0>n||u(l)>n)&&(e.left+=h+p+d)):c>0&&(r=e.left-t.collisionPosition.marginLeft+h+p+d-a,(r>0||c>u(r))&&(e.left+=h+p+d))},top:function(e,t){var n,r,i=t.within,s=i.offset.top+i.scrollTop,o=i.height,a=i.isWindow?i.scrollTop:i.offset.top,f=e.top-t.collisionPosition.marginTop,l=f-a,c=f+t.collisionHeight-o-a,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,v=-2*t.offset[1];0>l?(r=e.top+p+d+v+t.collisionHeight-o-s,e.top+p+d+v>l&&(0>r||u(l)>r)&&(e.top+=p+d+v)):c>0&&(n=e.top-t.collisionPosition.marginTop+p+d+v-a,e.top+p+d+v>c&&(n>0||c>u(n))&&(e.top+=p+d+v))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&11>i,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var r=c[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:e>r.max?r.max:e)}function r(n){var r=f(),i=r._rgba=[];return n=n.toLowerCase(),d(a,function(e,s){var o,u=s.re.exec(n),a=u&&s.parse(u),f=s.space||"rgba";return a?(o=r[f](a),r[l[f].cache]=o[l[f].cache],i=r._rgba=o._rgba,!1):t}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),r):s[n]}function i(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",u=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=f.support={},p=e("<p>")[0],d=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,d(l,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.fn=e.extend(f.prototype,{parse:function(i,o,u,a){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(o),o=t);var c=this,h=e.type(i),p=this._rgba=[];return o!==t&&(i=[i,o,u,a],h="array"),"string"===h?this.parse(r(i)||s._default):"array"===h?(d(l.rgba.props,function(e,t){p[t.idx]=n(i[t.idx],t)}),this):"object"===h?(i instanceof f?d(l,function(e,t){i[t.cache]&&(c[t.cache]=i[t.cache].slice())}):d(l,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!c[s]&&r.to){if("alpha"===e||null==i[e])return;c[s]=r.to(c._rgba)}c[s][t.idx]=n(i[e],t,!0)}),c[s]&&0>e.inArray(null,c[s].slice(0,3))&&(c[s][3]=1,r.from&&(c._rgba=r.from(c[s])))}),this):t},is:function(e){var n=f(e),r=!0,i=this;return d(l,function(e,s){var o,u=n[s.cache];return u&&(o=i[s.cache]||s.to&&s.to(i._rgba)||[],d(s.props,function(e,n){return null!=u[n.idx]?r=u[n.idx]===o[n.idx]:t})),r}),r},_space:function(){var e=[],t=this;return d(l,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=f(e),i=r._space(),s=l[i],o=0===this.alpha()?f("transparent"):this,u=o[s.cache]||s.to(o._rgba),a=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],f=r[s],l=c[i.type]||{};null!==f&&(null===o?a[s]=f:(l.mod&&(f-o>l.mod/2?o+=l.mod:o-f>l.mod/2&&(o-=l.mod)),a[s]=n((f-o)*t+o,i)))}),this[i](a)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=f(t)._rgba;return f(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(255*r)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,l.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,r=e[0]/255,i=e[1]/255,s=e[2]/255,o=e[3],u=Math.max(r,i,s),a=Math.min(r,i,s),f=u-a,l=u+a,c=.5*l;return t=a===u?0:r===u?60*(i-s)/f+360:i===u?60*(s-r)/f+120:60*(r-i)/f+240,n=0===f?0:.5>=c?f/l:f/(2-l),[Math.round(t)%360,n,c,null==o?1:o]},l.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=.5>=r?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(255*i(u,o,t+1/3)),Math.round(255*i(u,o,t)),Math.round(255*i(u,o,t-1/3)),s]},d(l,function(r,i){var s=i.props,o=i.cache,a=i.to,l=i.from;f.fn[r]=function(r){if(a&&!this[o]&&(this[o]=a(this._rgba)),r===t)return this[o].slice();var i,u=e.type(r),c="array"===u||"object"===u?r:arguments,h=this[o].slice();return d(s,function(e,t){var r=c["object"===u?e:t.idx];null==r&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=f(l(h)),i[o]=h,i):f(h)},d(s,function(t,n){f.fn[t]||(f.fn[t]=function(i){var s,o=e.type(i),a="alpha"===t?this._hsla?"hsla":"rgba":r,f=this[a](),l=f[n.idx];return"undefined"===o?l:("function"===o&&(i=i.call(this,l),o=e.type(i)),null==i&&n.empty?this:("string"===o&&(s=u.exec(i),s&&(i=l+parseFloat(s[2])*("+"===s[1]?1:-1))),f[n.idx]=i,this[a](f)))})})}),f.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if("transparent"!==i&&("string"!==e.type(i)||(s=r(i)))){if(i=f(s||i),!h.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===u||"transparent"===u)&&o&&o.style;)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(a){}i=i.blend(u&&"transparent"!==u?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(a){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=f(t.elem,n),t.end=f(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(s[e.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(s[n]=i[n]);return s}function r(t,n){var r,i,o={};for(r in n)i=n[r],t[r]!==i&&(s[r]||(e.fx.step[r]||!isNaN(parseFloat(i)))&&(o[r]=i));return o}var i=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s,o=e(this),u=o.attr("class")||"",f=a.children?o.find("*").addBack():o;f=f.map(function(){var t=e(this);return{el:t,start:n(this)}}),s=function(){e.each(i,function(e,n){t[n]&&o[n+"Class"](t[n])})},s(),f=f.map(function(){return this.end=n(this.el[0]),this.diff=r(this.start,this.end),this}),o.attr("class",u),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(r,i,s,o,u){return"boolean"==typeof i||i===t?s?e.effects.animateClass.call(this,i?{add:r}:{remove:r},s,o,u):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:r},i,s,o)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var r=0;t.length>r;r++)null!==t[r]&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var s,o;for(o=0;r.length>o;o++)null!==r[o]&&(s=e.data(n+r[o]),s===t&&(s=""),e.css(r[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function t(t){function r(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=n.complete,u=n.mode;(i.is(":hidden")?"hide"===u:"show"===u)?(i[u](),r()):o.call(i[0],n,r)}var n=r.apply(this,arguments),i=n.mode,s=n.queue,o=e.effects.effect[n.effect];return e.fx.off||!o?i?this[i](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},show:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(s(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(s(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),define("lib-app/jquery-ui.min",function(){}),define("sign-in/PortalHelper",[],function(){"use strict";var e=function(e){var r="";return e?r=t(e):r=n(),r},t=function(e){var t=app.cfg.DEFAULT_PORTAL_URL;return app.cfg.customPortalUrl?t=app.cfg.customPortalUrl:e?e.portalApp||e.customBaseUrl==="portal"?t=r():e.urlKey&&e.customBaseUrl?t="//"+(e.urlKey+"."+e.customBaseUrl).toLowerCase():e.customBaseUrl&&(t="//"+e.customBaseUrl.toLowerCase()):t="//"+t,t.match(/^http/)||(t=window.location.protocol+t),t},n=function(){var e="";return app.cfg.customPortalUrl?e=app.cfg.customPortalUrl:e=r(),e.match(/^http/)||(e=window.location.protocol+e),e},r=function(){var e=window.location.href.indexOf("/apps/"),t=window.location.href.indexOf("/home/"),n="";return e!==-1?n=window.location.href.slice(0,e):t!==-1?n=window.location.href.slice(0,t):n="//"+app.cfg.DEFAULT_PORTAL_URL,n},i=function(e){var t="";return e.match(/^.+:\/\//)?t=e.replace(/^.+:\/\//,"https://"):e.match(/^\/\//)?t=e.replace(/^\/\//,"https://"):t="https://"+e,t};return{getBaseUrl:e,forceHttpsPortalUrl:i}}),define("create-app/UserAgentHelper",[],function(){"use strict";var e=function(){return/(.*?Edge\/\d+)|(.*?Trident.*?)|(.*?MSIE.*?)/gi.test(window.navigator.userAgent)};return{isInternetExplorerOrEdge:e}}),define("text",{}),define("handlebars/safe-string",["exports"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return""+this.string},e["default"]=t}),define("handlebars/utils",["./safe-string","exports"],function(e,t){function o(e){return r[e]}function u(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function c(e){return e instanceof n?e.toString():e==null?"":e?(e=""+e,s.test(e)?e.replace(i,o):e):e+""}function h(e){return!e&&e!==0?!0:l(e)&&e.length===0?!0:!1}function p(e,t){return(e?e+".":"")+t}var n=e["default"],r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,s=/[&<>"'`]/;t.extend=u;var a=Object.prototype.toString;t.toString=a;var f=function(e){return typeof e=="function"};f(/x/)&&(f=function(e){return typeof e=="function"&&a.call(e)==="[object Function]"});var f;t.isFunction=f;var l=Array.isArray||function(e){return e&&typeof e=="object"?a.call(e)==="[object Array]":!1};t.isArray=l,t.escapeExpression=c,t.isEmpty=h,t.appendContextPath=p}),define("handlebars/exception",["exports"],function(e){function n(e,n){var r;n&&n.firstLine&&(r=n.firstLine,e+=" - "+r+":"+n.firstColumn);var i=Error.prototype.constructor.call(this,e);for(var s=0;s<t.length;s++)this[t[s]]=i[t[s]];r&&(this.lineNumber=r,this.column=n.firstColumn)}var t=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n}),define("handlebars/base",["./utils","./exception","exports"],function(e,t,n){function h(e,t){this.helpers=e||{},this.partials=t||{},p(this)}function p(e){e.registerHelper("helperMissing",function(){if(arguments.length===1)return undefined;throw new i("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,s=n.fn;if(t===!0)return s(this);if(t===!1||t==null)return i(this);if(a(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var o=m(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return s(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new i("Must pass iterator to #each");var n=t.fn,s=t.inverse,o=0,u="",l,c;t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),f(e)&&(e=e.call(this)),t.data&&(l=m(t.data));if(e&&typeof e=="object")if(a(e))for(var h=e.length;o<h;o++)l&&(l.index=o,l.first=o===0,l.last=o===e.length-1,c&&(l.contextPath=c+o)),u+=n(e[o],{data:l});else for(var p in e)e.hasOwnProperty(p)&&(l&&(l.key=p,l.index=o,l.first=o===0,c&&(l.contextPath=c+p)),u+=n(e[p],{data:l}),o++);return o===0&&(u=s(this)),u}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){f(e)&&(e=e.call(this));var n=t.fn;if(!r.isEmpty(e)){if(t.data&&t.ids){var i=m(t.data);i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}return t.inverse(this)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var r=e,i=t["default"],s="2.0.0";n.VERSION=s;var o=6;n.COMPILER_REVISION=o;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=u;var a=r.isArray,f=r.isFunction,l=r.toString,c="[object Object]";n.HandlebarsEnvironment=h,h.prototype={constructor:h,logger:d,log:v,registerHelper:function(e,t){if(l.call(e)===c){if(t)throw new i("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){l.call(e)===c?r.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];typeof console!="undefined"&&console[n]&&console[n].call(console,t)}}};n.logger=d;var v=d.log;n.log=v;var m=function(e){var t=r.extend({},e);return t._parent=e,t};n.createFrame=m}),define("handlebars/runtime",["./utils","./exception","./base","exports"],function(e,t,n,r){function f(e){var t=e&&e[0]||1,n=o;if(t!==n){if(t<n){var r=u[n],i=u[t];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function l(e,t){if(!t)throw new s("No environment passed to template");if(!e||!e.main)throw new s("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,r,o,u,a,f,l,c,h){a&&(u=i.extend({},u,a));var p=t.VM.invokePartial.call(this,n,o,u,f,l,c,h);if(p==null&&t.compile){var d={helpers:f,partials:l,data:c,depths:h};l[o]=t.compile(n,{data:c!==undefined,compat:e.compat},t),p=l[o](u,d)}if(p!=null){if(r){var v=p.split("\n");for(var m=0,g=v.length;m<g;m++){if(!v[m]&&m+1===g)break;v[m]=r+v[m]}p=v.join("\n")}return p}throw new s("The partial "+o+" could not be compiled when running in runtime-only mode")},r={lookup:function(e,t){var n=e.length;for(var r=0;r<n;r++)if(e[r]&&e[r][t]!=null)return e[r][t]},lambda:function(e,t){return typeof e=="function"?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var r=this.programs[e],i=this.fn(e);return t||n?r=c(this,e,i,t,n):r||(r=this.programs[e]=c(this,e,i)),r},data:function(e,t){while(e&&t--)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},o=function(t,n){n=n||{};var i=n.data;o._setup(n),!n.partial&&e.useData&&(i=d(t,i));var s;return e.useDepths&&(s=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,i,s)};return o.isTop=!0,o._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},o._child=function(t,n,i){if(e.useDepths&&!i)throw new s("must pass parent depths");return c(r,t,e[t],n,i)},o}function c(e,t,n,r,i){var s=function(t,s){return s=s||{},n.call(e,t,e.helpers,e.partials,s.data||r,i&&[t].concat(i))};return s.program=t,s.depth=i?i.length:0,s}function h(e,t,n,r,i,o,u){var a={partial:!0,helpers:r,partials:i,data:o,depths:u};if(e===undefined)throw new s("The partial "+t+" could not be found");if(e instanceof Function)return e(n,a)}function p(){return""}function d(e,t){if(!t||!("root"in t))t=t?a(t):{},t.root=e;return t}var i=e,s=t["default"],o=n.COMPILER_REVISION,u=n.REVISION_CHANGES,a=n.createFrame;r.checkRevision=f,r.template=l,r.program=c,r.invokePartial=h,r.noop=p}),define("handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(e,t,n,r,i,s){var o=e,u=t["default"],a=n["default"],f=r,l=i,c=function(){var e=new o.HandlebarsEnvironment;return f.extend(e,o),e.SafeString=u,e.Exception=a,e.Utils=f,e.escapeExpression=f.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e},h=c();return h.create=c,h["default"]=h,s=h["default"],s}),define("lib-build/hbars",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("lib-build/hbars!create-app/templates/signInCreateDialog",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div id="continue-build-container" class="custom-modal-container">\r\n  <div id="continue-build-wrapper" class="custom-modal-wrapper">\r\n    <div class="dialog-header">\r\n      <a id="continue-build-close" class="icon-close cancel-button" href="#"></a>\r\n    </div>\r\n    <div class="dialog-body">\r\n      <h4 id="build-app-confirm-name">'+u((i=(i=t.welcome||(e!=null?e.welcome:e))!=null?i:o,typeof i===s?i.call(e,{name:"welcome",hash:{},data:r}):i))+'</h4>\r\n      <button id="build-app-confirmation" class="btn modal-dismiss">'+u((i=(i=t["continue"]||(e!=null?e["continue"]:e))!=null?i:o,typeof i===s?i.call(e,{name:"continue",hash:{},data:r}):i))+"</button> \r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("create-app/buildApp",["dojo/i18n!./nls/app.js?v="+app.cfg.version,"sign-in/PortalHelper","create-app/UserAgentHelper","lib-build/hbars!./templates/signInCreateDialog"],function(e,t,n,r){"use strict";function i(e){var t=document.cookie,n=t.indexOf(" "+e+"=");n==-1&&(n=t.indexOf(e+"="));if(n==-1)t=null;else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);r==-1&&(r=t.length),t=decodeURIComponent(t.substring(n,r))}return t}function s(e,n){var r=n?"&layout="+n:"",s=JSON.parse(i("esri_auth")),o=t.getBaseUrl(s),u=t.forceHttpsPortalUrl(o);window.open(u+"/apps/"+e+"/index.html?fromScratch"+r,"_blank")}function o(e){var t=/^.+:\/\//.test(e);return t}function u(e,t){var n=!1;window.standalone?s(e,t):(n=window.signInManager.checkIfSignedIn(),n?s(e,t):window.signInManager.showBuildSignInDialog(e,t))}function a(s,o){var u=o?"&layout="+o:"",a=JSON.parse(i("esri_auth")),l=t.getBaseUrl(a),c=t.forceHttpsPortalUrl(l),h="",p="",d=c+"/apps/"+s+"/index.html?fromScratch"+u;if(s)switch(s){case"MapJournal":h="Map Journal";break;case"MapTour":h="Map Tour";break;case"MapSeries":h="Map Series";break;case"StorytellingSwipe":h="Swipe/Spyglass";break;case"Cascade":h="Cascade";break;case"StoryMapCrowdsource":h="Crowdsource";break;case"Shortlist":h="Shortlist";break;default:}p=e.signInBuildDialog.continue.replace(/{{APP_NAME}}/,h),$("body").append(r({welcome:e.signInBuildDialog.welcome,"continue":p})),$("#continue-build-container").css("display","block"),$("#continue-build-wrapper").css("display","block"),$("body").addClass("no-scroll"),n.isInternetExplorerOrEdge()&&$("html").addClass("no-scroll"),f(d)}function f(e){$("#build-app-confirmation").off("click").on("click",function(){window.open(e,"_blank"),l()}),$("#continue-build-container").off("click").on("click",function(e){e.target===e.currentTarget&&l()}),$("#continue-build-close").off("click").on("click",function(){l()})}function l(){var e=$("#continue-build-wrapper"),t=$("#continue-build-container"),r=100,i=500;e.fadeOut(r),n.isInternetExplorerOrEdge()?($("html").removeClass("no-scroll"),$("body").removeClass("no-scroll"),t.fadeOut(i)):t.fadeOut(i,function(){$("body").removeClass("no-scroll")})}function c(){u("StorytellingSwipe")}function h(){u("MapTour")}function p(){u("MapJournal")}function d(e){u("MapSeries",e)}function v(){u("Cascade")}function m(){u("Shortlist")}var g=function(e){y(e),b(e)},y=function(e){e.find('[data-template!=""][data-template]').addClass("build-enabled")},b=function(e){e.find('[data-template="tour"]').off("click").on("click",function(){h()}),e.find('[data-template="journal"]').off("click").on("click",function(){p()}),e.find('[data-template="cascade"]').off("click").on("click",function(){v()}),e.find('[data-template="shortlist"]').off("click").on("click",function(){m()}),e.find('[data-template="series"]').off("click").on("click",function(){var e=$(this).data("layout");e?d(e):d()}),e.find('[data-template="swipeSpyglass"]').off("click").on("click",function(){c()})};return g($(document)),{init:g,showContinueBuildDialog:a}}),define("my/models/Credentials",[],function(){"use strict";var e={},t=function(){e={userName:"",token:"",portal:null,orgId:"",groups:[],firstName:"",accountCreatedDate:null,privileges:null}},n=function(t){for(var n in t)t.hasOwnProperty(n)&&t[n]&&(n==="portal"||n==="privileges"?e[n]=$.extend(!0,{},t[n]):n==="groups"?e[n]=t[n].slice():e[n]=t[n])},r=function(){var t=$.extend(!0,{},e.portal),n=$.extend(!0,{},e.privileges),r={userName:e.userName,token:e.token,portal:t,privileges:n,orgId:e.orgId,groups:e.groups.slice(),firstName:e.firstName,accountCreatedDate:e.accountCreatedDate};return r},i=function(){t()};return t(),{setCredentials:n,getCredentials:r,destroyCredentials:i}}),define("my/helpers/Formatter",["dojo/number","dojo/date/locale","dojo/io-query","my/models/Credentials"],function(e,t,n,r){"use strict";var i=function(e){var t="",n="";return e?(n=s(e),n.length>=230?t=n.slice(0,230)+"...":t=n):t=i18n.storyMap.placeholders.noDescription,t},s=function(e){var t="";return e&&(t=e.replace(/<.*?>.*?/gi,"").replace(/&amp;/gi,"&").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/&nbsp;/gi," ")),t},o=function(e){var t=e.replace(/.*?\/\//gi,"");return t},u=function(e){var t="";if(e){var n=o(e);t="//"+n}return t},a=function(e){if(!e)return"";var t=o(e);return"https://"+t},f=function(e){var t=e.split("?"),r=t[0],i=t[1];if(i){var s=n.queryToObject(i);s.token=null;var o=n.objectToQuery(s);return o?r+"?"+o:r}return r},l=function(e){var t="";if(!e)return"";var n=a(e);return c(n)||(t=n.indexOf("?")===-1?"?":"&",n+=t+"token="+r.getCredentials().token),n},c=function(e){return e.indexOf("?token=")!==-1||e.indexOf("&token=")!==-1},h=function(e){var t="",n=e||"";return t=s(n),t},p=function(t){var n="";return app.cfg.isEnglish?n=t===1?window.engStrings.numViewsSingle.replace(/{{NUM_VIEWS}}/g,e.format(t)):window.engStrings.numViewsPlural.replace(/{{NUM_VIEWS}}/g,e.format(t)):n=i18n.storyMap.numViews.replace(/{{NUM_VIEWS}}/g,e.format(t)),n},d=function(e){var t="";return app.cfg.isEnglish?t=window.engStrings.authorsStories.replace(/{{USER_NAME}}/g,e):t=i18n.header.userStories.replace(/{{USER_NAME}}/g,e),t},v=function(e){if(e instanceof Date){var n=t.format(e,{selector:"date",formatLength:"long"});return n}return e},m=function(e){var t=v(e),n=i18n.storyMap.modified.replace(/{{DATE}}/g,t);return n},g=function(e){var t="";if(!e.typeKeywords)return t;for(var n=0;n<e.typeKeywords.length;n++)switch(e.typeKeywords[n].toLowerCase()){case"map tour":return t="Map Tour",t;case"mapjournal":return t="Map Journal",t;case"cascade":return t="Cascade",t;case"crowdsource":return t="Crowdsource",t;case"shortlist":return t="Shortlist",t;case"swipe":case"spyglass":case"swipespyglass":return t="Swipe/Spyglass",t;case"mapseries":return t="Map Series",t;default:}if(!e.tags)return t;for(var r=0;r<e.tags.length;r++)switch(e.tags[r].toLowerCase()){case"map tour":return t="Map Tour",t;case"map journal":return t="Map Journal",t;case"cascade":return t="Cascade",t;case"crowdsource":return t="Crowdsource",t;case"swipe":case"spyglass":return t="Swipe/Spyglass",t;case"shortlist":return t="Shortlist",t;case"countdown":return t="Countdown",t;case"playlist":return t="Playlist",t;case"side accordion":return t="Side Accordion",t;case"basic":t||(t="Basic");break;case"custom":t||(t=i18n.types.custom);break;default:}return t||(t=i18n.types.notSpecified),t},y=function(e){var t="";return app.cfg.isEnglish?t=e===1?window.engStrings.totalStoriesSingle.replace(/{{NUM_STORIES}}/g,e):window.engStrings.totalStoriesPlural.replace(/{{NUM_STORIES}}/g,e):t=i18n.header.totalStories.replace(/{{NUM_STORIES}}/g,e),t},b=function(e,t){var n={enable:!0,login:app.cfg.bitly.login,key:app.cfg.bitly.key},r=["http://api.bitly.com/v3/shorten?callback=?","https://api-ssl.bitly.com/v3/shorten?callback=?"],i=location.protocol==="http:"?r[0]:r[1],s=e;$.getJSON(i,{format:"json",apiKey:n.key,login:n.login,longUrl:s},function(e){var n="";!e||!e.data.url?n=s:n=e.data.url,typeof t=="function"&&t(n)}).fail(function(){typeof t=="function"&&t(s)})},w=function(e){var t="",n=i18n.content.info.ownedBy;return e?t=n.replace(/{{USER_NAME}}/g,e):t=n.replace(/{{USER_NAME}}/g,i18n.content.info.unknownUser),t},E=function(e,t){var n="";return e==="story"?t==="public"?n=i18n.content.notification.storyPublic:t==="organization"?n=i18n.content.notification.storyOrg:t==="private"&&(n=i18n.content.notification.storyPrivate):e==="map"?t==="public"?n=i18n.content.notification.mapPublic:t==="organization"?n=i18n.content.notification.mapOrg:t==="private"&&(n=i18n.content.notification.mapPrivate):e==="layer"?t==="public"?n=i18n.content.notification.layerPublic:t==="organization"?n=i18n.content.notification.layerOrg:t==="private"&&(n=i18n.content.notification.layerPrivate):e==="content"&&(t==="public"?n=i18n.content.notification.contentPublic:t==="organization"?n=i18n.content.notification.contentOrg:t==="private"&&(n=i18n.content.notification.contentPrivate)),n},S=function(e,t,n,r,i,s){var o="";return n?o=x(e,s):r?o=i18n.content.notification.premiumPublicSuccess:i?o=i18n.content.notification.subscriptionPublicSuccess:o=E(t,e),o},x=function(e,t){var n="";return window.builderIntegration?n=T(e,t):e==="public"?n=i18n.content.notification.storyAndContentPublic:e==="organization"?n=i18n.content.notification.storyAndContentOrg:e==="private"&&(n=i18n.content.notification.storyAndContentPrivate),n},T=function(e,t){var n="";return e==="public"?n=N(t):e==="organization"?n=C(t):e==="private"&&(n=k(t)),n},N=function(e){var t="";return e==="both"?t=i18n.content.notification.layersAndMapsPublic:e==="maps"?t=i18n.content.notification.mapsPublic:e==="layers"&&(t=i18n.content.notification.layersPublic),t},C=function(e){var t="";return e==="both"?t=i18n.content.notification.layersAndMapsOrg:e==="maps"?t=i18n.content.notification.mapsOrg:e==="layers"&&(t=i18n.content.notification.layersOrg),t},k=function(e){var t="";return e==="both"?t=i18n.content.notification.layersAndMapsPrivate:e==="maps"?t=i18n.content.notification.mapsPrivate:e==="layers"&&(t=i18n.content.notification.layersPrivate),t};return{formatDescription:i,removeURLProtocol:o,forceHttpsProtocol:a,removeURLToken:f,addURLToken:l,urlHasTokenParam:c,formatTitle:h,formatNumViews:p,formatPageBanner:d,cleanHtmlText:s,formatDateString:v,formatModifiedString:m,getStoryMapType:g,formatNumStories:y,formatBitlyLink:b,formatMapLayerOwner:w,forceProtocolRelativeURL:u,formatNotificationString:S}}),define("my/helpers/ImageHelper",["dojo/io-query","my/helpers/Formatter"],function(e,t){"use strict";var n="assets/images/my-stories/placeholders/",r=["forest.png","boat.png","desert.png","mts.png","city.png","spaceship.png"],i=0,s=function(){var e=r[i],t="";return i===r.length-1?i=0:i++,t=n+e,t},o=function(e,t){var n="",r=null;return/^resources\//g.test(e)?(r=/(.*?)\/index.html/i.exec(t),r&&r.length>1&&(n=r[1]+"/"+e)):n=e,n},u=function(e){var n="";return e&&(n=t.urlHasTokenParam(e)?t.forceHttpsProtocol(e):e),n};return{getRandomPlaceholderImage:s,getAbsolutePath:o,sanitizeImage:u}}),define("issue-checker/helpers/NormalizeHelper",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"getAllItems",value:function(t){var n=[];for(var r=0;r<t.allItems.length;r++){var i=t.allItems[r],s=t.byId[i];n.push(s)}return n}},{key:"createObject",value:function(){return{byId:{},allItems:[]}}},{key:"addEntry",value:function(t,n,r){t.allItems.push(n),t.byId[n]=r}}]),e}();t.default=i,e.exports=t["default"]}),define("issue-checker/CheckedItem",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function i(e,t){n(this,i),this.id=e,this.mediaType=t,this.errors=[],this.warnings=[],this.details={}};t.default=r,e.exports=t["default"]}),define("issue-checker/AGOLCheckedItem",["module","exports","./CheckedItem"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function u(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),a=function(e){function t(e,n){s(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.layers=[],r}return u(t,e),t}(r.default);t.default=a,e.exports=t["default"]}),define("issue-checker/Result",["module","exports","./helpers/NormalizeHelper","./CheckedItem","./AGOLCheckedItem"],function(e,t,n,r,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=a(n),o=a(r),u=a(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(t){f(this,e),this.media={maps:s.default.createObject(),scenes:s.default.createObject(),layers:s.default.createObject(),images:s.default.createObject(),videos:s.default.createObject(),audio:s.default.createObject(),webpages:s.default.createObject()},this.errors=s.default.createObject(),this.warnings=s.default.createObject(),t&&this._addMediaEntries(t)}return l(e,[{key:"_addMediaEntries",value:function(t){if(t.imageIDs){var n=!0,r=!1,i=undefined;try{for(var a=t.imageIDs[Symbol.iterator](),f;!(n=(f=a.next()).done);n=!0){var l=f.value,c=new o.default(l,"image");s.default.addEntry(this.media.images,l,c)}}catch(h){r=!0,i=h}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}if(t.audioIDs){var p=!0,d=!1,v=undefined;try{for(var m=t.audioIDs[Symbol.iterator](),g;!(p=(g=m.next()).done);p=!0){var y=g.value,b=new o.default(y,"audio");s.default.addEntry(this.media.audio,y,b)}}catch(h){d=!0,v=h}finally{try{!p&&m.return&&m.return()}finally{if(d)throw v}}}if(t.videoIDs){var w=!0,E=!1,S=undefined;try{for(var x=t.videoIDs[Symbol.iterator](),T;!(w=(T=x.next()).done);w=!0){var N=T.value,C=new o.default(N,"video");s.default.addEntry(this.media.videos,N,C)}}catch(h){E=!0,S=h}finally{try{!w&&x.return&&x.return()}finally{if(E)throw S}}}if(t.webpageIDs){var k=!0,L=!1,A=undefined;try{for(var O=t.webpageIDs[Symbol.iterator](),M;!(k=(M=O.next()).done);k=!0){var _=M.value,D=new o.default(_,"webpage");s.default.addEntry(this.media.webpages,_,D)}}catch(h){L=!0,A=h}finally{try{!k&&O.return&&O.return()}finally{if(L)throw A}}}if(t.mapIDs){var P=!0,H=!1,B=undefined;try{for(var j=t.mapIDs[Symbol.iterator](),F;!(P=(F=j.next()).done);P=!0){var I=F.value,q=new u.default(I,"map");s.default.addEntry(this.media.maps,I,q)}}catch(h){H=!0,B=h}finally{try{!P&&j.return&&j.return()}finally{if(H)throw B}}}if(t.sceneIDs){var R=!0,U=!1,z=undefined;try{for(var W=t.sceneIDs[Symbol.iterator](),X;!(R=(X=W.next()).done);R=!0){var V=X.value,$=new u.default(V,"scene");s.default.addEntry(this.media.scenes,V,$)}}catch(h){U=!0,z=h}finally{try{!R&&W.return&&W.return()}finally{if(U)throw z}}}}},{key:"addLayerEntries",value:function(t){var n=!0,r=!1,i=undefined;try{for(var o=t.layers[Symbol.iterator](),u;!(n=(u=o.next()).done);n=!0){var a=u.value,f=this.media.layers.byId[a.id];f?f.maps.indexOf(t.id)===-1&&f.maps.push(t.id):(a.maps.push(t.id),s.default.addEntry(this.media.layers,a.id,a))}}catch(l){r=!0,i=l}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}}]),e}();t.default=c,e.exports=t["default"]}),define("issue-checker/IssueTypes",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={maps:{deleted:"maps/deleted",inaccessible:"maps/inaccessible",unauthorized:"maps/unauthorized",unshared:"maps/unshared",othersUnshared:"maps/othersUnshared"},content:{unshared:"content/unshared",othersUnshared:"content/othersUnshared"},layers:{deleted:"layers/deleted",inaccessible:"layers/inaccessible",unauthorized:"layers/unauthorized",unshared:"layers/unshared",othersUnshared:"layers/othersUnshared",premiumContent:"layers/premiumContent",subscriptionContent:"layers/subscriptionContent",secureService:"layers/secureService"},images:{inaccessible:"images/inaccessible",httpContentFixable:"images/httpContentFixable",httpContentUnfixable:"images/httpContentUnfixable",httpContentIndeterminate:"images/httpContentIndeterminate"},audio:{inaccessible:"audio/inaccessible",httpContentFixable:"audio/httpContentFixable",httpContentUnfixable:"audio/httpContentUnfixable",httpContentIndeterminate:"audio/httpContentIndeterminate"},videos:{inaccessible:"videos/inaccessible",httpContentFixable:"videos/httpContentFixable",httpContentUnfixable:"videos/httpContentUnfixable",httpContentIndeterminate:"videos/httpContentIndeterminate"},webpages:{httpContentFixable:"webpages/httpContentFixable",httpContentUnfixable:"webpages/httpContentUnfixable",httpContentIndeterminate:"webpages/httpContentIndeterminate"}},e.exports=t["default"]}),define("issue-checker/helpers/Formatter",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"removeProtocol",value:function(t){return t.replace(/(.*?):\/\//,"//")}},{key:"extractHostname",value:function(t){var n=/.*\/\/([^\/:]*)/.exec(t);return n&&n[1]?n[1]:t}}]),e}();t.default=i,e.exports=t["default"]}),define("issue-checker/media/Media",["module","exports","./../IssueTypes","dojo/request","esri/config","./../helpers/Formatter"],function(e,t,n,r,i,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=l(n),u=l(r),a=l(i),f=l(s),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(){c(this,e)}return h(e,null,[{key:"check",value:function(t){var n=t.items,r=t.mediaType,i=t.appUrl,s=t.portal,o=[],u=!0,a=!1,f=undefined;try{for(var l=n[Symbol.iterator](),c;!(u=(c=l.next()).done);u=!0){var h=c.value,p=this._checkItem({item:h,mediaType:r,appUrl:i,portal:s});o.push(p)}}catch(d){a=!0,f=d}finally{try{!u&&l.return&&l.return()}finally{if(a)throw f}}return Promise.all(o).then(function(e){return{mediaType:r,items:e}})}},{key:"_checkItem",value:function(t){var n=this,r=t.item,i=t.mediaType,s=t.appUrl,u=t.portal;return new Promise(function(e){n._isUrlHttp(r.id)?n._calculateHttpsFixPotential(r.id,u.portalHostname).then(function(t){var n=o.default[i][t];u.isPortal?r.warnings.push(n):!s||s.indexOf("https://")!==-1||u.allSSL?r.errors.push(n):r.warnings.push(n),e(r)}):e(r)})}},{key:"_isUrlHttp",value:function(t){return/http:\/\//.test(t)}},{key:"_calculateHttpsFixPotential",value:function(t,n){var r=this,i=f.default.extractHostname(t);return new Promise(function(e){r._isOnHttpsWhitelist(i,n)?e("httpContentFixable"):r._requestDomain(i,e)})}},{key:"_requestDomain",value:function(t,n){var r=a.default.defaults.io.proxyUrl+"?https://"+t,i=(0,u.default)(r,{method:"head",timeout:15e3});i.response.then(function(e){e.status===200?n("httpContentFixable"):n("httpContentIndeterminate")},function(){n("httpContentUnfixable")})}},{key:"_isOnHttpsWhitelist",value:function(t,n){var r=this._getHttpsEnabledDomains(n),i=r.findIndex(function(e){return e===t||t.indexOf("."+e)!==-1});return i!==-1}},{key:"_getHttpsEnabledDomains",value:function(t){return["arcgis.com","youtube.com","youtu.be","vimeo.com","staticflickr.com","flickr.com","ggpht.com","googleusercontent.com","unsplash.com",t]}}]),e}();t.default=p,e.exports=t["default"]}),define("issue-checker/media/Images",["module","exports","esri/IdentityManager","esri/arcgis/utils","./../IssueTypes","./Media"],function(e,t,n,r,i,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function v(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=l(n),u=l(r),a=l(i),f=l(s),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function g(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:g(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},m=function(e){function t(){return c(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),h(t,null,[{key:"check",value:function(n){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{mediaType:"images"}))}},{key:"_checkItem",value:function(n){var r=this;return d(t.__proto__||Object.getPrototypeOf(t),"_checkItem",this).call(this,n).then(function(e){return new Promise(function(n){var i=15e3,s=new Image;e.details.source=t._getSource(e.id);var a=window.setTimeout(function(){t._onImageError(e,n)},i);s.onload=function(){window.clearTimeout(a),n(e)},s.onerror=function(){window.clearTimeout(a),t._onImageError(e,n)};var f=u.default.arcgisUrl.split("/sharing/")[0],l=o.default.findCredential(f),c=r._isAGOLImage(e),h="";l&&c&&e.id.indexOf("?token")===-1&&e.id.indexOf("&token")===-1&&(h="?token="+l.token),s.src=e.id+h})})}},{key:"_onImageError",value:function(t,n){t.errors.push(a.default.images.inaccessible),n(t)}},{key:"_getSource",value:function(t){var n={};return n=new RegExp("\\/\\/fbcdn|fbcdn\\.net"),n.test(t)?"facebook":(n=new RegExp("flickr\\.com"),n.test(t)?"flickr":(n=new RegExp("\\.ggpht\\.com|lh[1-9]\\.googleusercontent\\."),n.test(t)?"googlePlus":"url"))}},{key:"_isAGOLImage",value:function(t){return t.id&&t.id.match(new RegExp("/sharing/rest/content/items/.*?/resources/"))?!0:!1}}]),t}(f.default);t.default=m,e.exports=t["default"]}),define("issue-checker/media/Videos",["module","exports","esri/request","esri/config","./../IssueTypes","./Media"],function(e,t,n,r,i,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function v(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=l(n),u=l(r),a=l(i),f=l(s),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function g(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:g(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},m=function(e){function t(){return c(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),h(t,null,[{key:"check",value:function(n){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{mediaType:"videos"}))}},{key:"_checkItem",value:function(n){return d(t.__proto__||Object.getPrototypeOf(t),"_checkItem",this).call(this,Object.assign(n)).then(function(e){return new Promise(function(n){var r=/(youtube\.com\/(watch\?v\=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,i=/^.*(vimeo\.com\/)((video\/))?([0-9]+)/,s=r.exec(e.id),o=i.exec(e.id);s?t._checkYouTubeVideo(e,s,n):o?t._checkVimeoVideo(e,o,n):t._onVideoError(e,n)})})}},{key:"_checkYouTubeVideo",value:function(n,r,i){n.details.source="youTube";if(r.length!==4)t._onVideoError(n,i);else{var s=r[3];(0,o.default)({url:"https://www.googleapis.com/youtube/v3/videos",content:{part:"snippet",id:s,key:"AIzaSyCHc4DP7IJU2neC0lbuKh5Fg5g3RVeRoiE"},timeout:4e3}).then(function(e){e.items&&e.items.length>0?i(n):t._onVideoError(n,i)},function(){t._onVideoError(n,i)})}}},{key:"_checkVimeoVideo",value:function(n,r,i){n.details.source="vimeo";if(r.length!==5)t._onVideoError(n,i);else{var s=r[4];u.default&&u.default.defaults.io.corsEnabledServers.indexOf("vimeo.com")<0&&u.default.defaults.io.corsEnabledServers.push("vimeo.com"),(0,o.default)({url:"https://vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+s}).then(function(e){e&&e.type==="video"?i(n):t._onVideoError(n,i)},function(){t._onVideoError(n,i)})}}},{key:"_onVideoError",value:function(t,n){t.errors.push(a.default.videos.inaccessible),n(t)}}]),t}(f.default);t.default=m,e.exports=t["default"]}),define("issue-checker/media/Audio",["module","exports","esri/IdentityManager","esri/arcgis/utils","./../IssueTypes","./Media"],function(e,t,n,r,i,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function v(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=l(n),u=l(r),a=l(i),f=l(s),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function g(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:g(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},m=function(e){function t(){return c(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),h(t,null,[{key:"check",value:function(n){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{mediaType:"audio"}))}},{key:"_checkItem",value:function(n){var r=this;return d(t.__proto__||Object.getPrototypeOf(t),"_checkItem",this).call(this,n).then(function(e){return new Promise(function(n){var i=1e4,s=new window.Audio,a=window.setTimeout(function(){t.resolveAndClear(e,a,n)},i);s.onloadedmetadata=function(){t.resolveAndClear(e,a,n)},s.ondurationchange=function(){s.duration&&(window.clearTimeout(a),isFinite(s.duration)?t.resolveAndClear(e,a,n):t._onAudioError(e,n))},s.onerror=function(){window.clearTimeout(a),t._onAudioError(e,n)};var f=u.default.arcgisUrl.split("/sharing/")[0],l=o.default.findCredential(f),c="";l&&r._isAGOLAudio(e)&&e.id.indexOf("?token")===-1&&e.id.indexOf("&token")===-1&&(c="?token="+l.token),e.id&&(s.src=e.id+c)})})}},{key:"resolveAndClear",value:function(t,n,r){window.clearTimeout(n),r(t)}},{key:"_onAudioError",value:function(t,n){t.errors.push(a.default.audio.inaccessible),n(t)}},{key:"_isAGOLAudio",value:function(t){return t.id&&t.id.match(new RegExp("/sharing/rest/content/items/.*?/resources/"))?!0:!1}}]),t}(f.default);t.default=m,e.exports=t["default"]}),define("issue-checker/media/Webpages",["module","exports","./Media"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function f(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function c(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:c(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},l=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),o(t,null,[{key:"check",value:function(n){return a(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{mediaType:"webpages"}))}}]),t}(r.default);t.default=l,e.exports=t["default"]}),define("issue-checker/media/AGOLItem",["module","exports","./Media","esri/arcgis/utils","esri/request","esri/IdentityManager","./../IssueTypes"],function(e,t,n,r,i,s,o){"use strict";function h(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function m(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=h(n),a=h(r),f=h(i),l=h(s),c=h(o),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(){return p(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),d(t,null,[{key:"check",value:function(t,n){var r=[],i=!0,s=!1,o=undefined;try{for(var u=t.items[Symbol.iterator](),a;!(i=(a=u.next()).done);i=!0){var f=a.value,l=this._checkItem({item:f,appAccess:t.appAccess,mediaType:n,privileges:t.privileges});r.push(l)}}catch(c){s=!0,o=c}finally{try{!i&&u.return&&u.return()}finally{if(s)throw o}}return Promise.all(r).then(function(e){return{mediaType:n,items:e}})}},{key:"_checkItem",value:function(t){var n=this;return new Promise(function(e){var r=a.default.arcgisUrl+"/"+t.item.id;(0,f.default)({url:r,content:{f:"json"},timeout:15e3}).then(function(r){n._onItemSuccess(r,t,e)},function(r){n._onItemError(r,t,e)})})}},{key:"_onItemError",value:function(t,n,r){t.httpCode===400?n.item.errors.push(c.default[n.mediaType].deleted):t.httpCode===403?n.item.errors.push(c.default[n.mediaType].unauthorized):n.item.errors.push(c.default[n.mediaType].inaccessible),r(n.item)}},{key:"_onItemSuccess",value:function(t,n,r){n.item.details.sharingLevel=this._assignSharingLevel(t.access),n.item.details.owner=t.owner;if(n.mediaType==="maps")n.item.details.title=t.title;else if(n.mediaType==="layers"){var i=t.typeKeywords.indexOf("Hosted Service")!==-1,s=t.typeKeywords.indexOf("Service Proxy")!==-1;n.item.details.hostedServiceOrServiceProxy=s||i}var o=a.default.arcgisUrl.split("/sharing/")[0],u=l.default.findCredential(o).userId,f=n.item.details.owner===u,c=this._determineCanShare(f,t.itemControl);n.item.details.privileges=this._findSharingPrivileges({privileges:n.privileges,canShare:c,isOwner:f}),this._checkSharingLevel(n,c),r(n.item)}},{key:"_assignSharingLevel",value:function(t){return t==="account"?"org":t==="shared"?"private":t}},{key:"_determineCanShare",value:function(t,n){return t?!0:n==="admin"||n==="update"?!0:!1}},{key:"_findSharingPrivileges",value:function(t){return!t.canShare||!t.privileges?{publicly:!1,org:!1}:t.isOwner?{publicly:t.privileges.canShareMinePublic,org:t.privileges.canShareMineOrg}:{publicly:t.privileges.canShareOthersPublic,org:t.privileges.canShareOthersOrg}}},{key:"_checkSharingLevel",value:function(t,n){if(t.appAccess==="public"){if(t.item.details.sharingLevel==="org"||t.item.details.sharingLevel==="private")n?t.item.errors.push(c.default[t.mediaType].unshared):t.item.errors.push(c.default[t.mediaType].othersUnshared)}else(t.appAccess==="org"||t.appAccess==="account")&&t.item.details.sharingLevel==="private"&&t.item.errors.push(c.default[t.mediaType].unshared)}}]),t}(u.default);t.default=g,e.exports=t["default"]}),define("issue-checker/media/layers/AGOLHostedLayer",["module","exports","esri/arcgis/utils","./../AGOLItem"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(){function e(){u(this,e)}return a(e,null,[{key:"check",value:function(t){return t.layerResults.details.title=t.layerItem.title,s.default._checkItem({item:t.layerResults,appAccess:t.appAccess,mediaType:t.mediaType,privileges:t.privileges}).then(function(e){var t=i.default.arcgisUrl.split("/sharing/")[0];return e.details.linkURL=t+"/home/item.html?id="+e.id,e})}}]),e}();t.default=f,e.exports=t["default"]}),define("issue-checker/media/layers/ServiceLayer",["module","exports","./../../IssueTypes","./../../helpers/Formatter"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(){function e(){u(this,e)}return a(e,null,[{key:"check",value:function(t){var n=this;return new Promise(function(e){t.layerResults.details.title=t.layer.title,t.layerResults.details.url=t.layer.url;var r=t.layer.url;r&&!t.keepProtocol&&(r=s.default.removeProtocol(t.layer.url));var i=new t.CalledClass(r),o=window.setTimeout(function(){n._onLayerError(null,t.layerResults,e)},15e3);i.on("load",function(r){window.clearTimeout(o);var i=n._checkIfCredentialedLayer({layer:r.layer,orgId:t.orgId});if(i)return n._checkSecureLayer({layer:t.layerResults,url:t.layer.url,resolve:e,appAccess:t.appAccess,premiumManager:t.premiumManager});e(t.layerResults)}),i.on("error",function(r){window.clearTimeout(o),n._onLayerError(r,t.layerResults,e)})})}},{key:"_checkSecureLayer",value:function(t){return t.premiumManager?t.premiumManager.checkSecureService(t.url).then(function(e){t.appAccess==="public"&&!e.hasProxy&&(e.isPremium?t.layer.errors.push(i.default.layers.premiumContent):e.isSubscription&&t.layer.errors.push(i.default.layers.subscriptionContent)),t.resolve(t.layer)},function(){t.resolve(t.layer)}):t.resolve(t.layer)}},{key:"_checkIfCredentialedLayer",value:function(t){var n=t.layer,r=t.orgId;return n.credential&&r?!0:!1}},{key:"_onLayerError",value:function(t,n,r){n.errors.push(i.default.layers.inaccessible),r(n)}}]),e}();t.default=f,e.exports=t["default"]}),define("issue-checker/media/layers/FeatureLayer",["module","exports","esri/layers/FeatureLayer","./ServiceLayer"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function p(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:p(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},h=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),a(t,null,[{key:"check",value:function(n){return l(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{CalledClass:i.default}))}}]),t}(s.default);t.default=h,e.exports=t["default"]}),define("issue-checker/media/layers/ImageServiceLayer",["module","exports","esri/layers/ArcGISImageServiceLayer","./ServiceLayer"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function p(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:p(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},h=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),a(t,null,[{key:"check",value:function(n){return l(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{CalledClass:i.default}))}}]),t}(s.default);t.default=h,e.exports=t["default"]}),define("issue-checker/media/layers/TiledMapServiceLayer",["module","exports","esri/layers/ArcGISTiledMapServiceLayer","./ServiceLayer"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function p(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:p(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},h=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),a(t,null,[{key:"check",value:function(n){return l(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{CalledClass:i.default}))}}]),t}(s.default);t.default=h,e.exports=t["default"]}),define("issue-checker/media/layers/DynamicMapServiceLayer",["module","exports","esri/layers/ArcGISDynamicMapServiceLayer","./ServiceLayer"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function p(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:p(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},h=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),a(t,null,[{key:"check",value:function(n){return l(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{CalledClass:i.default}))}}]),t}(s.default);t.default=h,e.exports=t["default"]}),define("issue-checker/media/layers/VectorTileLayer",["module","exports","esri/layers/VectorTileLayer","./ServiceLayer"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function p(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:p(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},h=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),a(t,null,[{key:"check",value:function(n){return l(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{CalledClass:i.default}))}}]),t}(s.default);t.default=h,e.exports=t["default"]}),define("issue-checker/media/layers/GeoRSSLayer",["module","exports","esri/layers/GeoRSSLayer","./ServiceLayer"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function p(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:p(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},h=function(e){function t(){return u(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),a(t,null,[{key:"check",value:function(n){return l(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,Object.assign({},n,{CalledClass:i.default,keepProtocol:!0}))}}]),t}(s.default);t.default=h,e.exports=t["default"]}),define("issue-checker/LayerCheckedItem",["module","exports","./CheckedItem"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function u(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),a=function(e){function t(e){s(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"layer"));return n.maps=[],n}return u(t,e),t}(r.default);t.default=a,e.exports=t["default"]}),define("issue-checker/media/Layers",["module","exports","./Media","./layers/AGOLHostedLayer","./layers/FeatureLayer","./layers/ImageServiceLayer","./layers/TiledMapServiceLayer","./layers/DynamicMapServiceLayer","./layers/VectorTileLayer","./layers/GeoRSSLayer","./../LayerCheckedItem","./../IssueTypes"],function(e,t,n,r,i,s,o,u,a,f,l,c){"use strict";function S(e){return e&&e.__esModule?e:{"default":e}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function C(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=S(n),p=S(r),d=S(i),v=S(s),m=S(o),g=S(u),y=S(a),b=S(f),w=S(l),E=S(c),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,e),T(t,null,[{key:"check",value:function(t){var n=[],r=!0,i=!1,s=undefined;try{for(var o=t.items[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){var a=u.value,f=this._checkItem({item:a,appAccess:t.appAccess,premiumManager:t.premiumManager,orgId:t.orgId,privileges:t.privileges});n.push(f)}}catch(l){i=!0,s=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return Promise.all(n).then(function(e){return{mediaType:"layers",items:e}})}},{key:"_checkItem",value:function(t){t.item.layerType==="VectorTileLayer"&&(t.item.url=t.item.styleUrl);if(!t.item.itemId&&!t.item.url)return Promise.resolve({id:t.item.id,mediaType:"layer",errors:[],warnings:[],maps:[],details:{title:t.item.title}});if(t.item.itemId&&!t.item.url){var n=new w.default(t.item.itemId);return p.default.check({layerItem:t.item,appAccess:t.appAccess,mediaType:"layers",layerResults:n,privileges:t.privileges})}if(t.item.type==="CSV"||t.item.type==="KML"||t.item.type==="WMS"||t.item.type==="WFS"||t.item.type==="WebTiledLayer")return Promise.resolve({id:t.item.id,mediaType:"layer",errors:[],warnings:[],maps:[],details:{title:t.item.title,notChecked:!0}});if(t.item.itemId&&t.item.url){var r=new w.default(t.item.itemId);return this._checkItemURLService({item:t.item,appAccess:t.appAccess,layerResults:r,premiumManager:t.premiumManager,orgId:t.orgId,privileges:t.privileges})}var i=new w.default(t.item.id);return this._checkURLService({layer:t.item,appAccess:t.appAccess,layerResults:i,premiumManager:t.premiumManager,orgId:t.orgId})}},{key:"_checkItemURLService",value:function(t){var n=this;return p.default.check({layerItem:t.item,appAccess:t.appAccess,mediaType:"layers",layerResults:t.layerResults,privileges:t.privileges}).then(function(e){return e.details.hostedServiceOrServiceProxy?e:(n._removeLayerIssue(e.errors,E.default.layers.deleted),n._removeLayerIssue(e.errors,E.default.layers.inaccessible),n._removeLayerIssue(e.errors,E.default.layers.unauthorized),n._checkURLService({layer:t.item,appAccess:t.appAccess,layerResults:e,premiumManager:t.premiumManager,orgId:t.orgId}))})}},{key:"_checkURLService",value:function(t){return t.layer.layerType==="ArcGISFeatureLayer"?d.default.check(t):t.layer.layerType==="ArcGISImageServiceLayer"?v.default.check(t):t.layer.layerType==="ArcGISTiledMapServiceLayer"?m.default.check(t):t.layer.layerType==="ArcGISMapServiceLayer"?g.default.check(t):t.layer.layerType==="VectorTileLayer"?y.default.check(t):t.layer.layerType==="GeoRSS"?b.default.check(t):g.default.check(t)}},{key:"_removeLayerIssue",value:function(t,n){var r=t.indexOf(n);r!==-1&&t.splice(r,1)}}]),t}(h.default);t.default=k,e.exports=t["default"]}),define("issue-checker/media/Maps",["module","exports","esri/request","esri/arcgis/utils","./AGOLItem","./Layers"],function(e,t,n,r,i,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function v(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=l(n),u=l(r),a=l(i),f=l(s),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function g(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:g(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},m=function(e){function t(){return c(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),h(t,null,[{key:"check",value:function(n){var r=this;return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,n,"maps").then(function(e){return r._checkAllLayers(e,n.appAccess,n.premiumManager,n.orgId,n.privileges)})}},{key:"_checkAllLayers",value:function(t,n,r,i,s){var o=this,u=[],a=!0,l=!1,c=undefined;try{var h=function(){var t=d.value,a=o._getAllLayers(t.id).then(function(e){return f.default.check({items:e,appAccess:n,premiumManager:r,orgId:i,privileges:s})}).then(function(e){return t.layers=e.items,t});u.push(a)};for(var p=t.items[Symbol.iterator](),d;!(a=(d=p.next()).done);a=!0)h()}catch(v){l=!0,c=v}finally{try{!a&&p.return&&p.return()}finally{if(l)throw c}}return Promise.all(u).then(function(){return t})}},{key:"_getAllLayers",value:function(t){return new Promise(function(e){(0,o.default)({url:u.default.arcgisUrl+"/"+t+"/data",content:{f:"json"},timeout:15e3}).then(function(t){var n=t.baseMap.baseMapLayers,r=!0,i=!1,s=undefined;try{for(var o=n[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){var a=u.value;a.isBasemap=!0}}catch(f){i=!0,s=f}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}var l=n.concat(t.operationalLayers);e(l)},function(){var t=[];e(t)})})}}]),t}(a.default);t.default=m,e.exports=t["default"]}),define("issue-checker/Issue",["module","exports","./IssueTypes"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){o(this,e);var r=e.getIssueDetails(t);this.id=t,this.mediaType=r.mediaType,this.media=n,this.actions=r.actions}return u(e,null,[{key:"getIssueDetails",value:function(t){var n,i=(n={},s(n,r.default.images.inaccessible,{mediaType:"images",actions:[]}),s(n,r.default.images.httpContentFixable,{mediaType:"images",actions:[]}),s(n,r.default.images.httpContentUnfixable,{mediaType:"images",actions:[]}),s(n,r.default.images.httpContentIndeterminate,{mediaType:"images",actions:[]}),s(n,r.default.audio.inaccessible,{mediaType:"audio",actions:[]}),s(n,r.default.audio.httpContentFixable,{mediaType:"audio",actions:[]}),s(n,r.default.audio.httpContentUnfixable,{mediaType:"audio",actions:[]}),s(n,r.default.audio.httpContentIndeterminate,{mediaType:"audio",actions:[]}),s(n,r.default.videos.inaccessible,{mediaType:"videos",actions:[]}),s(n,r.default.videos.httpContentFixable,{mediaType:"videos",actions:[]}),s(n,r.default.videos.httpContentUnfixable,{mediaType:"videos",actions:[]}),s(n,r.default.videos.httpContentIndeterminate,{mediaType:"videos",actions:[]}),s(n,r.default.webpages.httpContentFixable,{mediaType:"webpages",actions:[]}),s(n,r.default.webpages.httpContentUnfixable,{mediaType:"webpages",actions:[]}),s(n,r.default.webpages.httpContentIndeterminate,{mediaType:"webpages",actions:[]}),s(n,r.default.maps.inaccessible,{mediaType:"maps",actions:[]}),s(n,r.default.maps.deleted,{mediaType:"maps",actions:[]}),s(n,r.default.maps.unauthorized,{mediaType:"maps",actions:[]}),s(n,r.default.maps.unshared,{mediaType:"maps",actions:["maps/share"]}),s(n,r.default.maps.othersUnshared,{mediaType:"maps",actions:[]}),s(n,r.default.layers.inaccessible,{mediaType:"layers",actions:[]}),s(n,r.default.layers.deleted,{mediaType:"layers",actions:[]}),s(n,r.default.layers.unauthorized,{mediaType:"layers",actions:[]}),s(n,r.default.layers.unshared,{mediaType:"layers",actions:["layers/share"]}),s(n,r.default.layers.othersUnshared,{mediaType:"layers",actions:[]}),s(n,r.default.layers.premiumContent,{mediaType:"layers",actions:["layers/sharePremiumContent"]}),s(n,r.default.layers.subscriptionContent,{mediaType:"layers",actions:["layers/shareSubscriptionContent"]}),s(n,r.default.layers.secureService,{mediaType:"layers",actions:[]}),n);return i[t]}}]),e}();t.default=a,e.exports=t["default"]}),define("issue-checker/Share",["module","exports","esri/arcgis/utils","esri/request","./media/Maps","./Result","./helpers/NormalizeHelper","./IssueTypes"],function(e,t,n,r,i,s,o,u){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=d(n),f=d(r),l=d(i),c=d(s),h=d(o),p=d(u),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(){function e(){v(this,e)}return m(e,null,[{key:"shareApp",value:function(t){var n=this;return new Promise(function(e,r){var i=[];i.push(n.share({sharingLevel:t.sharingLevel,owner:t.owner,id:t.appID})),t.media.mapIDs&&i.push(n._shareMaps(t.media,t.sharingLevel,t.premiumManager,t.orgId,t.privileges)),Promise.all(i).then(function(n){var i=n[0],s=n[1],o=s&&s.unsharedItems.length;!i.success||o?r({appShared:i.success,sharedItems:s?s.sharedItems:[],unsharedItems:s?s.unsharedItems:[]}):e({sharingLevel:t.sharingLevel,itemsChanged:s?s.sharedItems:[]})})})}},{key:"_shareMaps",value:function(t,n,r,i,s){var o=this;return new Promise(function(e){var u=new c.default(t),a=h.default.getAllItems(u.media.maps);l.default.check({items:a,appAccess:n,premiumManager:r,orgId:i,privileges:s}).then(function(t){var i=[],s=!0,u=!1,a=undefined;try{for(var f=t.items[Symbol.iterator](),l;!(s=(l=f.next()).done);s=!0){var c=l.value;c.errors.indexOf(p.default.maps.unshared)!==-1&&i.push(o.share({sharingLevel:n,owner:c.details.owner,id:c.id}));var h=!0,d=!1,v=undefined;try{for(var m=c.layers[Symbol.iterator](),g;!(h=(g=m.next()).done);h=!0){var y=g.value;o._shareLayer({layer:y,promises:i,sharingLevel:n,premiumManager:r})}}catch(b){d=!0,v=b}finally{try{!h&&m.return&&m.return()}finally{if(d)throw v}}}}catch(b){u=!0,a=b}finally{try{!s&&f.return&&f.return()}finally{if(u)throw a}}Promise.all(i).then(function(t){o._onBulkShareComplete(t,e)})})})}},{key:"_shareLayer",value:function(t){t.layer.errors.indexOf(p.default.layers.unshared)!==-1&&t.promises.push(this.share({sharingLevel:t.sharingLevel,owner:t.layer.details.owner,id:t.layer.id})),t.layer.errors.indexOf(p.default.layers.subscriptionContent)!==-1&&t.promises.push(t.premiumManager.addProxies([{id:t.layer.id,url:t.layer.details.url}]).then(function(e){return{success:!0,id:e[0].id}},function(e){return{success:!1,id:e[0].id}}))}},{key:"_onBulkShareComplete",value:function(t,n){var r={sharedItems:[],unsharedItems:[]},i=!0,s=!1,o=undefined;try{for(var u=t[Symbol.iterator](),a;!(i=(a=u.next()).done);i=!0){var f=a.value;f.success?r.sharedItems.push(f.id):r.unsharedItems.push(f.id)}}catch(l){s=!0,o=l}finally{try{!i&&u.return&&u.return()}finally{if(s)throw o}}n(r)}},{key:"share",value:function(t){return new Promise(function(e){var n={org:t.sharingLevel==="org"||t.sharingLevel==="account","public":t.sharingLevel==="public"},r=a.default.arcgisUrl.split("/items")[0];(0,f.default)({url:r+"/users/"+t.owner+"/shareItems",content:{f:"json",items:[t.id],everyone:n.public,org:n.org}},{usePost:!0}).then(function(n){var r=n.results[0];r.success?e({id:t.id,success:!0}):e({id:t.id,success:!1})},function(n){e({id:t.id,success:!1})})})}}]),e}();t.default=g,e.exports=t["default"]}),define("issue-checker/Fix",["module","exports","./Share"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){s(this,e)}return o(e,null,[{key:"fixMapsShare",value:function(t){return new Promise(function(e,n){var i=[],s=!0,o=!1,u=undefined;try{for(var a=t.items[Symbol.iterator](),f;!(s=(f=a.next()).done);s=!0){var l=f.value;i.push(r.default.share({id:l.id,owner:l.owner,sharingLevel:t.sharingLevel}))}}catch(c){o=!0,u=c}finally{try{!s&&a.return&&a.return()}finally{if(o)throw u}}Promise.all(i).then(function(t){var r=[],i=[],s=!0,o=!1,u=undefined;try{for(var a=t[Symbol.iterator](),f;!(s=(f=a.next()).done);s=!0){var l=f.value;l.success?i.push(l.id):r.push(l.id)}}catch(c){o=!0,u=c}finally{try{!s&&a.return&&a.return()}finally{if(o)throw u}}r.length?n({fixedItems:i,unfixedItems:r}):e({fixedItems:i})})})}},{key:"fixPremiumSubscriptionContent",value:function(t,n){return new Promise(function(e,r){n.addProxies(t).then(function(t){var n=t.map(function(e){return e.id});e({fixedItems:n})},function(e){var t=e.map(function(e){return e.id});r({fixedItems:[],unfixedItems:t})})})}}]),e}();t.default=u,e.exports=t["default"]}),define("issue-checker/Privileges",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.canShareMineOrg=!1,this.canShareMinePublic=!1,this.canShareOthersOrg=!1,this.canShareOthersPublic=!1,t&&(this.canShareMineOrg=!0,this.canShareMinePublic=!0)}return r(e,null,[{key:"findPrivileges",value:function(n){if(!n.user.orgId)return new e(!0);var r=this._findOrgPrivileges(n.user.privileges),i=this._checkIfAdmin(n.user);return!n.canSharePublic&&!i&&(r.canShareMinePublic=!1,r.canShareOthersPublic=!1),r}},{key:"_findOrgPrivileges",value:function(n){var r=new e(!1),i=!0,s=!1,o=undefined;try{for(var u=n[Symbol.iterator](),a;!(i=(a=u.next()).done);i=!0){var f=a.value;f==="portal:user:shareToPublic"?r.canShareMinePublic=!0:f==="portal:user:shareToOrg"?r.canShareMineOrg=!0:f==="portal:admin:shareToPublic"?(r.canShareMinePublic=!0,n.indexOf("portal:admin:viewItems")!==-1&&n.indexOf("portal:admin:updateItems")!==-1&&(r.canShareOthersPublic=!0)):f==="portal:admin:shareToOrg"&&(r.canShareMineOrg=!0,n.indexOf("portal:admin:viewItems")!==-1&&n.indexOf("portal:admin:updateItems")!==-1&&(r.canShareOthersOrg=!0))}}catch(l){s=!0,o=l}finally{try{!i&&u.return&&u.return()}finally{if(s)throw o}}return r}},{key:"_checkIfAdmin",value:function(t){return t.role.toLowerCase()==="org_admin"&&!t.roleId?!0:!1}}]),e}();t.default=i,e.exports=t["default"]}),define("issue-checker/PremiumManager",["module","exports","dojo/on","esri/arcgis/AppProxyManager","esri/dijit/AppProxySettings","./helpers/Formatter"],function(e,t,n,r,i,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=l(n),u=l(r),a=l(i),f=l(s),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(t,n){c(this,e),this._appProxyManager=null,this._appProxySettings=null;var r=/(.*\/)/.exec(n),i=r?r[0]:"",s=f.default.removeProtocol(i),o="http:"+s,l="https:"+s;this._appProxyManager=new u.default({appid:t,referrers:[o,l]}),this._appProxySettings=new a.default({proxyManagerOptions:{appid:t},webmaps:[]},null)}return h(e,[{key:"checkSecureService",value:function(t){var n=this;return this._checkIfPremiumContent(t).then(function(e){if(e.isPremium||e.isSubscription)e.hasProxy=n._checkForProxy(t);return e})}},{key:"_checkForProxy",value:function(t){var n=!0,r=!1,i=undefined;try{for(var s=this._appProxyManager.proxies[Symbol.iterator](),o;!(n=(o=s.next()).done);n=!0){var u=o.value;if(f.default.removeProtocol(t)===f.default.removeProtocol(u.sourceUrl))return!0}}catch(a){r=!0,i=a}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return!1}},{key:"_checkIfPremiumContent",value:function(t){var n=this;return new Promise(function(e,r){if(n._appProxyManager.loaded){var i=n._resolvePremiumContent(t);e(i)}else n._appProxyManager.on("load",function(){var r=n._resolvePremiumContent(t);e(r)}),n._appProxyManager.on("error",function(){r()})})}},{key:"_resolvePremiumContent",value:function(t){var n=this._appProxySettings._isPremium(t),r=this._appProxySettings._isSubscriber(t);return r&&(n=!1),{isPremium:r,isSubscription:n,hasProxy:!1}}},{key:"addProxies",value:function(t){var n=this;return new Promise(function(e,r){var i=[],s=!0,o=!1,u=undefined;try{for(var a=t[Symbol.iterator](),f;!(s=(f=a.next()).done);s=!0){var l=f.value;i.push({sourceUrl:l.url})}}catch(c){o=!0,u=c}finally{try{!s&&a.return&&a.return()}finally{if(o)throw u}}n._appProxyManager.createProxies(i).then(function(){e(t)},function(){r(t)})})}}]),e}();t.default=p,e.exports=t["default"]}),define("issue-checker/IssueChecker",["module","exports","esri/config","esri/arcgis/utils","./Result","./helpers/NormalizeHelper","./media/Images","./media/Videos","./media/Audio","./media/Webpages","./media/Maps","./Issue","./Share","./Fix","./Privileges","./PremiumManager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){"use strict";function O(e){return e&&e.__esModule?e:{"default":e}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var m=O(n),g=O(r),y=O(i),b=O(s),w=O(o),E=O(u),S=O(a),x=O(f),T=O(l),N=O(c),C=O(h),k=O(p),L=O(d),A=O(v),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D=function(){function e(t){M(this,e),this.owner=t?t.owner:"",this.privileges=t&&t.portal?L.default.findPrivileges(t.portal):null,t&&(t.proxyUrl&&(m.default.defaults.io.proxyUrl=t.proxyUrl),t.arcgisUrl&&(g.default.arcgisUrl=t.arcgisUrl),t.appUrl&&(this.appUrl=t.appUrl),t.appId&&t.appUrl&&!t.disablePremiumManager&&(this.premiumManager=new A.default(t.appId,t.appUrl)),t.portal&&(this.portal=t.portal),t.disablePremiumManager&&(this.disablePremiumManager=t.disablePremiumManager)),m.default.defaults.io.proxyUrl||(m.default.defaults.io.proxyUrl="https://www.arcgis.com/sharing/proxy")}return _(e,[{key:"onFirstAppSave",value:function(t){this.disablePremiumManager||(this.premiumManager=new A.default(t.appId,t.appUrl)),this.appUrl=t.appUrl}},{key:"check",value:function(t){var n=this,r=new y.default(t.media),i=b.default.getAllItems(r.media.images),s=w.default.check({items:i,appUrl:this.appUrl,portal:this.portal}),o=b.default.getAllItems(r.media.videos),u=E.default.check({items:o,appUrl:this.appUrl,portal:this.portal}),a=b.default.getAllItems(r.media.audio),f=S.default.check({items:a,appUrl:this.appUrl,portal:this.portal}),l=b.default.getAllItems(r.media.webpages),c=x.default.check({items:l,appUrl:this.appUrl,portal:this.portal}),h=b.default.getAllItems(r.media.maps),p=T.default.check({items:h,appAccess:t.appAccess,premiumManager:this.premiumManager,orgId:this.portal.user.orgId,privileges:this.privileges}).then(function(e){return n._groomMapLayerData(r,e),e}),d=[s,u,f,c,p];return Promise.all(d).then(function(){return r.errors=n._compileIssues(r.media,r.errors,"errors"),r.warnings=n._compileIssues(r.media,r.warnings,"warnings"),r})}},{key:"_groomMapLayerData",value:function(t,n){var r=!0,i=!1,s=undefined;try{for(var o=n.items[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){var a=u.value;t.addLayerEntries(a);var f=a.layers.slice(0);a.layers=f.map(function(e){return e.id})}}catch(l){i=!0,s=l}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}}},{key:"_compileIssues",value:function(t,n,r){for(var i in t)if(t.hasOwnProperty(i)){var s=b.default.getAllItems(t[i]),o=!0,u=!1,a=undefined;try{for(var f=s[Symbol.iterator](),l;!(o=(l=f.next()).done);o=!0){var c=l.value;this._compileItemIssues(c.id,n,c[r])}}catch(h){u=!0,a=h}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}}return n}},{key:"_compileItemIssues",value:function(t,n,r){var i=!0,s=!1,o=undefined;try{for(var u=r[Symbol.iterator](),a;!(i=(a=u.next()).done);i=!0){var f=a.value,l=n.byId[f];if(l)l.media.push(t);else{var c=new N.default(f,[t]);b.default.addEntry(n,f,c)}}}catch(h){s=!0,o=h}finally{try{!i&&u.return&&u.return()}finally{if(s)throw o}}}},{key:"fix",value:function(t){return t.action==="maps/share"||t.action==="layers/share"||t.action==="content/share"?k.default.fixMapsShare({items:t.items,sharingLevel:t.details.sharingLevel}):t.action==="layers/sharePremiumContent"||t.action==="layers/shareSubscriptionContent"?k.default.fixPremiumSubscriptionContent(t.items,this.premiumManager):Promise.reject({fixedItems:[],unfixedItems:t.items.map(function(e){return e.id})})}},{key:"share",value:function(t){var n=Object.assign({},t,{owner:this.owner,premiumManager:this.premiumManager,orgId:this.portal.user.orgId,privileges:this.privileges});return C.default.shareApp(n)}}]),e}();t.default=D,e.exports=t["default"]}),define("my/models/Item",["dojo/Deferred","esri/request","esri/config","esri/arcgis/utils","my/models/Credentials","my/helpers/Formatter","my/helpers/ImageHelper","issue-checker/IssueChecker"],function(e,t,n,r,i,s,o,u){"use strict";var a=function(e){var t=e.item,a=o.sanitizeImage(t.thumbnailUrl),l=f(a),c={index:e.index,title:s.formatTitle(t.title),id:t.id,owner:t.owner,type:e.type?e.type:s.getStoryMapType(t),modified:t.modified,modifiedLocalizedDate:s.formatDateString(t.modified),modifiedStr:s.formatModifiedString(t.modified),accessLevel:t.access==="org"?"organization":t.access==="account"?"organization":t.access==="shared"?"private":t.access,hasOwnImage:l?!0:!1,thumbnail:l?a:o.getRandomPlaceholderImage(),url:t.url,userItemUrl:"",shortUrl:"",embedUrl:'<iframe width="100%" height="800px" src="'+t.url+'"></iframe>',numViews:t.numViews,numViewsStr:s.formatNumViews(t.numViews),description:s.formatDescription(t.description),snippet:t.snippet,collectionTag:"",yourTags:null,allTags:t.tags,hasErrors:!1,ignoreServiceOkItemNot:!1,ignoreAllIssues:!1,typeKeywords:t.typeKeywords,issueChecker:new u({owner:t.owner,appId:t.id,appUrl:t.url,proxyUrl:n.defaults.io.proxyUrl,arcgisUrl:r.arcgisUrl,portal:i.getCredentials().portal,disablePremiumManager:!0})};return c},f=function(e){var t=!0,n=null,r=!1;return e?(n=new RegExp("(//www.arcgis.com/sharing.rest.content.items/).*(/info/thumbnail/ago_downloaded.png).*"),r=n.test(e),r&&(t=!1)):t=!1,t},l=function(e,t){e.index=t},c=function(n,s){var o=new e,u=i.getCredentials(),a={f:"json"},f=r.arcgisUrl.split("/items")[0],l=f+"/users/"+u.userName+"/items/"+n.id+"/update",c=n.userItemUrl+"/update",h=n.userItemUrl?c:l,p={};return s.title&&(n.title=s.title,a.title=s.title),s.snippet&&(n.snippet=s.snippet,a.snippet=s.snippet),s.typeKeywords&&(n.typeKeywords=s.typeKeywords,a.typeKeywords=s.typeKeywords),p=t({url:h,content:a},{usePost:!0}),p.then(function(){o.resolve()},function(){o.reject()}),o.promise},h=function(e){var n=r.arcgisUrl.split("/items")[0],i=n+"/users/"+e.user+"/items/"+e.item.id+"/delete",s=e.item.userItemUrl+"/delete",o=e.item.userItemUrl?s:i,u=t({url:o,content:{f:"json"}},{usePost:!0});u.then(function(){e.success&&typeof e.success=="function"&&e.success()},function(t){var n=!1;t.message==="Unable to delete item. Delete protection is turned on."&&(n=!0),e.error(n)})};return{createItem:a,updateItemIndex:l,updateItem:c,deleteItem:h}}),define("my/helpers/TooltipHelper",[],function(){"use strict";var e=function(e){var n=t(e);n.not(".bound-hover").hover(function(){var e=355,t=$(this).find(".tooltip-content"),n=t.width();n>e&&!$(this).hasClass("after")&&!$(this).hasClass("before")?(t.width(e),t.css("white-space","normal"),t.css("display","block")):n>e&&$(this).hasClass("custom-after")?(t.width(e),t.css("white-space","normal"),t.css("display","block"),$(this).find(".tooltip-wrapper").css("transform","translateY(-50%)"),$(this).find(".tooltip-wrapper").css("left","300%")):t.css("display","block")},function(){var e=$(this).find(".tooltip-content");e.width(""),e.css("white-space","nowrap"),e.css("display","none")}),n.addClass("bound-hover")},t=function(e){var t=e.find(".tooltip");return e.hasClass("tooltip")&&t.push(e),t};return{addTooltipEvents:e}}),define("my/helpers/HandlebarsHelpers",["Handlebars"],function(e){"use strict";(function(){e.registerHelper("ifEquals",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),e.registerHelper("ifGreaterThan",function(e,t,n){return e>t?n.fn(this):n.inverse(this)}),e.registerHelper("formatParam",function(e,t){var n="",r=/\?/.test(e);return r?n="&"+t:n="?"+t,n}),e.registerHelper("injectValueQuoted",function(e,t){var n=e.replace(/{{LAYER_NAME}}/g,'"'+t+'"');return n})})()}),define("my/content/ExpandedStory",[],function(){"use strict";var e={},t=!1,n=function(){return e},r=function(t){e=t,i(!1),s(!1)},i=function(t){e.ignoreServiceOkItemNot=t},s=function(n,r){t=!1,r&&n&&(r.premiumContent.items.length||r.secureService.items.length||r.othersSharedBelowLevel.items.length)&&(t=!0),e.ignoreAllIssues=n},o=function(){return t};return{getExpandedStory:n,setExpandedStory:r,setIgnoreServiceItem:i,setIgnoreAllIssues:s,getIgnorePremiumOrSecure:o}}),define("lib-build/hbars!my/content/Infographics",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'	<div class="infographic">\n		<div class="infographic-text">\n			<h5 class="header-font infographic-title">'+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+'</h5>\n			<h3 class="item-subtitle infographic-value header-font">'+u((i=(i=t.value||(e!=null?e.value:e))!=null?i:o,typeof i===s?i.call(e,{name:"value",hash:{},data:r}):i))+'</h3>\n		</div>\n		<div class="infographic-image">\n			<div class="infographic-icon '+u((i=(i=t.img||(e!=null?e.img:e))!=null?i:o,typeof i===s?i.call(e,{name:"img",hash:{},data:r}):i))+'"></div>\n		</div>\n	</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i;return i=t.each.call(e,e!=null?e.infographics:e,{name:"each",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null?i:""},useData:!0})}),define("lib-build/hbars!my/content/scanning/ScanProgress",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a='<div id="scanning-in-progress" class="scanning-row container">\r\n	<div id="progress-bar-container" class="centered">\r\n		';return i=(s=(s=t.progressBarWidget||(e!=null?e.progressBarWidget:e))!=null?s:u,typeof s===o?s.call(e,{name:"progressBarWidget",hash:{},data:r}):s),i!=null&&(a+=i),a+"\r\n	</div>				\r\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/scanning/ScanDone",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing;return'<div id="scanning-done" class="scanning-row container">\n	<div class="progress-row">\n		<h2 class="progress-title">'+u(o((i=e!=null?e.labels:e)!=null?i.done:i,e))+" "+u((s=(s=t.issueStr||(e!=null?e.issueStr:e))!=null?s:f,typeof s===a?s.call(e,{name:"issueStr",hash:{},data:r}):s))+"</h2>\n	</div>\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/scanning/ScanStop",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div id="scanning-aborted" class="scanning-row container">\n	<div class="progress-row">\n		<h2 class="progress-title">'+u((i=(i=t.stoppedStatement||(e!=null?e.stoppedStatement:e))!=null?i:o,typeof i===s?i.call(e,{name:"stoppedStatement",hash:{},data:r}):i))+"</h2>				\n	</div>\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/scanning/ScanError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'<div id="scanning-error" class="scanning-row container">\n	<div class="progress-row leader-1">\n		<h2 class="progress-title">'+o(s((i=e!=null?e.labels:e)!=null?i.scanAllError:i,e))+"</h2>				\n	</div>\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/Header",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'								<div class="dropdown-option" data-category="type" data-value="Shortlist">\n									<span class="icon-stories-check-inverted dropdown-check"></span>\n									<span class="dropdown-option-text">'+o(s((i=e!=null?e.engStrings:e)!=null?i.shortlist:i,e))+"</span>\n								</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f=this.lambda,l='<div id="header-container" class="container">\n	<div class="row header-plain-text">\n		<div class="column-14 plumb-left">\n			<h1 id="title">'+a((s=(s=t.title||(e!=null?e.title:e))!=null?s:u,typeof s===o?s.call(e,{name:"title",hash:{},data:r}):s))+'</h1>\n			<h4 id="num-stories" class="header-stat icon-open-book"></h4>\n			<h4 id="num-issues" class="header-stat icon-stories-error-inverse"></h4>\n		</div>\n		<div id="quote-container" class="column-10">\n			<p id="header-quote-text">'+a(f((i=e!=null?e.data:e)!=null?i.mainQuote:i,e))+'</p>\n			<span id="header-quote-author">-- '+a(f((i=e!=null?e.data:e)!=null?i.quoteSource:i,e))+'</span>\n		</div>\n	</div>\n	<div id="header-controls" class="row">\n		<div class="tooltip above column-5 plumb-left">\n			<input id="search" class="clear-button header-fadeable header-disabled" type="text" placeholder="'+a(f((i=e!=null?e.data:e)!=null?i.searchStories:i,e))+'">\n			<div class="tooltip-wrapper header-fadeable-tooltip">\n				<span class="tooltip-content">'+a(f((i=e!=null?e.data:e)!=null?i.headerDisabledTooltip:i,e))+'</span>\n			</div>\n		</div>\n		<div class="column-13">\n			<div id="sort" class="header-dropdown-container">\n				<div class="tooltip above header-fadeable header-disabled">\n					<div id="sort-button" class="btn header-dropdown-button clear-button header-fadeable header-disabled header-button">\n						<span id="sort-text">'+a(f((i=e!=null?e.data:e)!=null?i.sort:i,e))+'</span>\n						<div id="sort-arrow" class="icon-sort-down-2"></div>\n					</div>\n					<br>\n					<div id="sort-dropdown" class="header-dropdown">\n						<div class="dropdown-option selected" data-criteria="modified">\n							<span class="icon-stories-check-inverted dropdown-check"></span>\n							<span class="dropdown-option-text">'+a(f((i=e!=null?e.data:e)!=null?i.dateModified:i,e))+'</span>\n						</div>\n						<div class="dropdown-option" data-criteria="title">\n							<span class="icon-stories-check-inverted dropdown-check"></span>\n							<span class="dropdown-option-text">'+a(f((i=e!=null?e.data:e)!=null?i.title:i,e))+'</span>\n						</div>\n						<div class="dropdown-option" data-criteria="num-views">\n							<span class="icon-stories-check-inverted dropdown-check"></span>\n							<span class="dropdown-option-text">'+a(f((i=e!=null?e.data:e)!=null?i.views:i,e))+'</span>\n						</div>\n						<div class="dropdown-option" data-criteria="all-clear">\n							<span class="icon-stories-check-inverted dropdown-check"></span>\n							<span class="dropdown-option-text">'+a(f((i=e!=null?e.data:e)!=null?i.errors:i,e))+'</span>\n						</div>\n					</div>\n					<div class="tooltip-wrapper header-fadeable-tooltip">\n						<span class="tooltip-content">'+a(f((i=e!=null?e.data:e)!=null?i.headerDisabledTooltip:i,e))+'</span>\n					</div>\n				</div>\n			</div><!--\n		 --><div id="filter" class="header-dropdown-container">\n				<div class="tooltip above header-fadeable header-disabled">\n					<div id="filter-button" class="btn header-dropdown-button clear-button header-fadeable header-disabled header-button">\n						<span>'+a(f((i=e!=null?e.data:e)!=null?i.filter:i,e))+'</span>\n						<div id="sort-arrow" class="icon-sort-down-2"></div>\n					</div>\n					<br>\n					<div id="filler" class="icon-stories-check-inverted"></div>\n					<div id="filter-dropdown" class="header-dropdown">\n						<div>\n							<div class="dropdown-subheader">'+a(f((i=e!=null?e.data:e)!=null?i.apps:i,e))+'</div>\n							<div class="dropdown-option" data-category="type" data-value="Map Tour">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.engStrings:e)!=null?i.mapTour:i,e))+'</span>\n							</div>\n							<div class="dropdown-option" data-category="type" data-value="Map Journal">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.engStrings:e)!=null?i.mapJournal:i,e))+'</span>\n							</div>\n							<div class="dropdown-option" data-category="type" data-value="Cascade">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.engStrings:e)!=null?i.cascade:i,e))+'</span>\n							</div>\n							<div class="dropdown-option" data-category="type" data-value="Map Series">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.engStrings:e)!=null?i.mapSeries:i,e))+"</span>\n							</div>\n";return i=t.unless.call(e,e!=null?e.isPortal:e,{name:"unless",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(l+=i),l+'							<div class="dropdown-option" data-category="type" data-value="Swipe/Spyglass">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.engStrings:e)!=null?i.swipeSpyglass:i,e))+'</span>\n							</div>\n						</div>\n						<div>\n							<div class="dropdown-subheader">'+a(f((i=e!=null?e.data:e)!=null?i.sharing:i,e))+'</div>\n							<div class="dropdown-option" data-category="accessLevel" data-value="public">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.sharingLevels:e)!=null?i.publicMessage:i,e))+'</span>\n							</div>\n							<div class="dropdown-option" data-category="accessLevel" data-value="organization">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.sharingLevels:e)!=null?i.organization:i,e))+'</span>\n							</div>\n							<div class="dropdown-option" data-category="accessLevel" data-value="private">\n								<span class="icon-stories-check-inverted dropdown-check"></span>\n								<span class="dropdown-option-text">'+a(f((i=e!=null?e.sharingLevels:e)!=null?i.privateMessage:i,e))+'</span>\n							</div>\n						</div>\n					</div>\n					<div class="tooltip-wrapper header-fadeable-tooltip">\n						<span class="tooltip-content">'+a(f((i=e!=null?e.data:e)!=null?i.headerDisabledTooltip:i,e))+'</span>\n					</div>\n				</div>\n			</div><!--\n		 --><div id="clear" class="header-dropdown-container">\n		 		<div id="clear-button" class="btn header-dropdown-button clear-button header-fadeable header-disabled header-button">\n		 			<span id="search-results"></span>\n		 			<span id="clear-icon" class="icon-clear-second"></span>\n		 		</div>\n			</div>\n		</div>\n		<div class="column-6 plumb-right">\n			<div class="tooltip above right">\n				<div id="scan-all-stories" class="btn clear-button header-fadeable header-disabled header-button icon-analytics">'+a(f((i=e!=null?e.data:e)!=null?i.checkYourStories:i,e))+'</div>\n				<div class="tooltip-wrapper header-fadeable-tooltip">\n					<span class="tooltip-content">'+a(f((i=e!=null?e.data:e)!=null?i.headerDisabledTooltip:i,e))+'</span>\n				</div>\n			</div>\n			<div id="create-story-button-container" class="tooltip above">\n				<div id="create-story-btn" class="btn modal-show clear-button header-fadeable create-story-disabled header-button icon-map-pin" data-modal="create-story">'+a(f((i=e!=null?e.data:e)!=null?i.createStory:i,e))+'</div>\n				<div class="tooltip-wrapper create-disabled-tooltip create-story">\n					<span class="tooltip-content">'+a(f((i=e!=null?e.data:e)!=null?i.headerDisabledTooltip:i,e))+"</span>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!my/content/Loading",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'	<p class="progress-title single-text">'+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+"</p>\n"},3:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'	<h2 class="progress-title">'+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+"</h2>\n"},5:function(e,t,n,r){return" small"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.small:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(s+=i),s+='<div class="loader',i=t["if"].call(e,e!=null?e.small:e,{name:"if",hash:{},fn:this.program(5,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s+'">\n	<span class="side side-left"><span class="fill"></span></span>\n	<span class="side side-right"><span class="fill"></span></span>		\n</div>'},useData:!0})}),define("lib-build/hbars!my/content/dialogs/DeleteDialog",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'<div class="modal delete-modal" data-modal="delete-item">\n	<div class="dialog-header">\n		<a class="modal-dismiss icon-close" href="#"></a>\n		<h4>'+o(s((i=e!=null?e.data:e)!=null?i.title:i,e))+'</h4>\n	</div>\n	<div class="dialog-body">		\n		<p>'+o(s((i=e!=null?e.data:e)!=null?i.warningText:i,e))+'</p>\n		<button class="btn item-delete icon-delete modal-dismiss" id="delete-confirm">'+o(s((i=e!=null?e.data:e)!=null?i.deleteText:i,e))+'</button>		\n		<button class="btn modal-dismiss icon-cancel" id="delete-cancel">'+o(s((i=e!=null?e.data:e)!=null?i.cancel:i,e))+"</button>\n	</div>	\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/dialogs/ShareDialog",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return" no-show"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a=t.helperMissing,f="function",l='<div class="modal share-modal" data-modal="share-story">\n	<div id="share-header" class="dialog-header padding-leader-1 padding-trailer-1">\n		<h3 class="dialog-title">'+u(o((i=e!=null?e.labels:e)!=null?i.title:i,e))+'</h3>\n	</div>\n	<div id="share-body" class="dialog-body">\n		<div class="centered leader-1">\n			<div id="not-public-container" class="trailer-half';return i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.sharingLevel:e,"public",{name:"ifEquals",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(l+=i),l+'">\n				<span id="not-public-explanation">'+u(o((i=e!=null?e.labels:e)!=null?i.notPublicWarning:i,e))+'</span>\n			</div>\n			<div class="link-text-container">\n				<div id="shortlink-icon" class="link-text-icon share icon-copy" data-clipboard-text="'+u((s=(s=t.shortLink||(e!=null?e.shortLink:e))!=null?s:a,typeof s===f?s.call(e,{name:"shortLink",hash:{},data:r}):s))+'" data-link-type="share"></div>\n				<input id="item-sharing-link-text" class="share-text small-link" value="'+u((s=(s=t.shortLink||(e!=null?e.shortLink:e))!=null?s:a,typeof s===f?s.call(e,{name:"shortLink",hash:{},data:r}):s))+'" readonly/>\n				<span id="shortlink-copied-message" class="embed-alert-text copied-message">'+u(o((i=e!=null?e.labels:e)!=null?i.copied:i,e))+'</span>\n			</div>\n		</div>\n		<hr id="share-line">\n		<div>\n			<div class="centered">\n				<h4 id="embed-explanation">'+u(o((i=e!=null?e.labels:e)!=null?i.embedStory:i,e))+'</h4>\n			</div>\n			<div id="dimensions-container" class="leader-1 trailer-1 row">\n				<div class="embed-dimensions static centered column-6">\n					<h5 class="dimensions-title">'+u(o((i=e!=null?e.labels:e)!=null?i.small:i,e))+'</h5>\n					<h5 class="dimensions">640px / 480px</h5>\n				</div>\n				<div class="embed-dimensions static centered column-6">\n					<h5 class="dimensions-title">'+u(o((i=e!=null?e.labels:e)!=null?i.medium:i,e))+'</h5>\n					<h5 class="dimensions">800px / 600px</h5>\n				</div>\n				<div class="embed-dimensions static centered active column-6">\n					<h5 class="dimensions-title">'+u(o((i=e!=null?e.labels:e)!=null?i.large:i,e))+'</h5>\n					<h5 class="dimensions">100% / 800px</h5>\n				</div>\n				<div class="embed-dimensions custom centered column-6">\n					<h5 class="dimensions-title embed-custom-title">'+u(o((i=e!=null?e.labels:e)!=null?i.custom:i,e))+'</h5>\n					<input class="embed-custom-size width" type="text" placeholder="'+u(o((i=e!=null?e.labels:e)!=null?i.widthAbbreviation:i,e))+'">\n					<span> / </span>\n					<input class="embed-custom-size height" type="text" placeholder="'+u(o((i=e!=null?e.labels:e)!=null?i.heightAbbreviation:i,e))+'">\n				</div>\n				<span id="embed-error-text" class="embed-alert-text">'+u(o((i=e!=null?e.labels:e)!=null?i.emptyDimension:i,e))+'</span>\n			</div>\n			<div id="embed-text-container" class="leader-half trailer-1">\n				<div id="embed-icon" class="link-text-icon embed icon-copy" data-clipboard-text="'+u((s=(s=t.embedUrl||(e!=null?e.embedUrl:e))!=null?s:a,typeof s===f?s.call(e,{name:"embedUrl",hash:{},data:r}):s))+'" data-link-type="embed"></div>\n				<textarea id="embed-link" class="share-text" rows="4" readonly>'+u((s=(s=t.embedUrl||(e!=null?e.embedUrl:e))!=null?s:a,typeof s===f?s.call(e,{name:"embedUrl",hash:{},data:r}):s))+'</textarea>\n				<span id="embed-copied-message" class="embed-alert-text copied-message">'+u(o((i=e!=null?e.labels:e)!=null?i.copied:i,e))+'</span>\n			</div>\n			<div class="centered trailer-half">\n				<button id="example-button" class="btn clear">'+u(o((i=e!=null?e.labels:e)!=null?i.seeExample:i,e))+'</button>\n			</div>\n		</div>\n		<button id="close-share" class="btn modal-dismiss close-dialog">'+u(o((i=e!=null?e.dialogLabels:e)!=null?i.close:i,e))+"</button>\n	</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!my/content/tabs/Maps",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return"column-9"},3:function(e,t,n,r){return"column-7"},5:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u='			<td class="';return i=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(6,r),inverse:this.program(8,r),data:r}),i!=null&&(u+=i),u+'">'+o(s((i=e!=null?e.data:e)!=null?i.storyComponent:i,e))+"</td>\n"},6:function(e,t,n,r){return"column-3"},8:function(e,t,n,r){return"column-5"},10:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='		<tr class="media-row';return s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(11,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(11,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(11,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-owner="'+f((o=(o=t.owner||(e!=null?e.owner:e))!=null?o:a,typeof o===u?o.call(e,{name:"owner",hash:{},data:r}):o))+'">\n			<td class="column-2 item-status-column">\n				<div class="tooltip above">\n					<div class="media-item-status',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(13,r,i),inverse:this.program(15,r,i),data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'"></div>\n					<div class="tooltip-wrapper',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(19,r,i),data:r}),s!=null&&(c+=s),c+='">\n						<div class="tooltip-content">\n',s=t.each.call(e,e!=null?e.errors:e,{name:"each",hash:{},fn:this.program(21,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='						</div>\n					</div>\n				</div>\n			</td>\n			<td class="media-title map',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(23,r,i),inverse:this.program(25,r,i),data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" title="'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:a,typeof o===u?o.call(e,{name:"title",hash:{},data:r}):o))+'">'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:a,typeof o===u?o.call(e,{name:"title",hash:{},data:r}):o)),s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(27,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(27,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(27,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='\n			</td>\n			<td class="column-6">\n				<div class="sharing-status',s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">\n					<div class="tooltip above sharing-button-container map">\n						<div class="lock-icon ',s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(29,r,i),inverse:this.program(31,r,i),data:r}),s!=null&&(c+=s),c+=" ",s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(33,r,i),data:r}),s!=null&&(c+=s),c+='"></div>\n						<div class="tooltip-wrapper">\n							<p class="tooltip-content',s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">'+f(l((s=(s=e!=null?e.info:e)!=null?s.templateStrings:s)!=null?s.ownedBy:s,e))+'</p>\n						</div>\n					</div>\n					<div class="sharing-icons',s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(35,r,i),data:r}),s!=null&&(c+=s),c+='">\n					    <div class="tooltip above sharing-button-container map private',s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"private",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"shared",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">\n							<button class="map-sharing toggle-button server-button icon-user private temp-disabled',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"private",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"shared",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-sharing="private" data-type="map"></button>\n							<div class="tooltip-wrapper">\n								<p class="tooltip-content">'+f(l((s=i[1]!=null?i[1].sharingLevel:i[1])!=null?s.privateMessage:s,e))+'</p>\n							</div>\n						</div><!--\n					 --><div class="tooltip above sharing-button-container map organization',s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"organization",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">\n							<button class="map-sharing toggle-button icon-community server-button organization temp-disabled',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"organization",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.canShareOrg:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(42,r,i),data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-sharing="organization" data-type="map"></button>\n							<div class="tooltip-wrapper">\n								<p class="tooltip-content">',s=t["if"].call(e,e!=null?e.canShareOrg:e,{name:"if",hash:{},fn:this.program(44,r,i),inverse:this.program(46,r,i),data:r}),s!=null&&(c+=s),c+='</p>\n							</div>\n						</div><!--\n					 --><div class="tooltip above sharing-button-container map public',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"public",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">\n							<button class="map-sharing toggle-button server-button icon-stories-globe public temp-disabled',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"public",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.canSharePublic:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(42,r,i),data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-sharing="public" data-type="map"></button>\n							<div class="tooltip-wrapper">\n								<p class="tooltip-content">',s=t["if"].call(e,e!=null?e.canSharePublic:e,{name:"if",hash:{},fn:this.program(60,r,i),inverse:this.program(62,r,i),data:r}),s!=null&&(c+=s),c+="</p>\n							</div>\n						</div>\n					</div>\n				</div>\n				",s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(73,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+="\n				",s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(75,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+="\n				",s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(77,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='\n			</td>\n			<td class="sections',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(25,r,i),inverse:this.program(79,r,i),data:r}),s!=null&&(c+=s),c+='">\n',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(81,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,i[1]!=null?i[1].showSections:i[1],{name:"if",hash:{},fn:this.program(89,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+="			</td>\n",s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(114,r,i),data:r}),s!=null&&(c+=s),c+="		</tr>\n",s=t["if"].call(e,(s=(s=e!=null?e.info:e)!=null?s.layers:s)!=null?s.length:s,{name:"if",hash:{},fn:this.program(125,r,i),inverse:this.program(195,r,i),data:r}),s!=null&&(c+=s),c},11:function(e,t,n,r){return" error-row"},13:function(e,t,n,r){return" icon-stories-error issue"},15:function(e,t,n,r){return" icon-stories-check ok"},17:function(e,t,n,r){return""},19:function(e,t,n,r){return" no-show"},21:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return"								<span>"+s(i(e!=null?e.text:e,e))+"</span><br>\n"},23:function(e,t,n,r){return" column-9"},25:function(e,t,n,r){return" column-7"},27:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.errors:s)!=null?s.noMapName:s,e))},29:function(e,t,n,r){return"icon-info-information smaller-map"},31:function(e,t,n,r){return"icon-locked"},33:function(e,t,n,r){return"locked"},35:function(e,t,n,r,i){var s;return s=t["if"].call(e,i[1]!=null?i[1].canShareOthers:i[1],{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(36,r,i),data:r}),s!=null?s:""},36:function(e,t,n,r){return" locked"},38:function(e,t,n,r){return" incompatible-access-level"},40:function(e,t,n,r){return" active"},42:function(e,t,n,r){return" sharing-disabled"},44:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].sharingLevel:i[2])!=null?s.organization:s,e))},46:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(47,r,i),inverse:this.program(49,r,i),data:r}),s!=null?s:""},47:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[3]!=null?i[3].sharingLevel:i[3])!=null?s.organization:s,e))},49:function(e,t,n,r,i){var s,o=t.helperMissing;return s=(t.ifEquals||e&&e.ifEquals||o).call(e,e!=null?e.access:e,"organization",{name:"ifEquals",hash:{},fn:this.program(50,r,i),inverse:this.program(52,r,i),data:r}),s!=null?s:""},50:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[4]!=null?i[4].sharingLevel:i[4])!=null?s.organization:s,e))},52:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(53,r,i),inverse:this.program(55,r,i),data:r}),s!=null?s:""},53:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.errors:s)!=null?s.orgDisabled:s,e))},55:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(56,r,i),inverse:this.program(58,r,i),data:r}),s!=null?s:""},56:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[6]!=null?i[6].labels:i[6])!=null?s.errors:s)!=null?s.orgDisabled:s,e))},58:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[6]!=null?i[6].sharingLevel:i[6])!=null?s.organization:s,e))},60:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].sharingLevel:i[2])!=null?s.publicMessage:s,e))},62:function(e,t,n,r,i){var s,o=t.helperMissing;return s=(t.ifEquals||e&&e.ifEquals||o).call(e,e!=null?e.access:e,"public",{name:"ifEquals",hash:{},fn:this.program(63,r,i),inverse:this.program(65,r,i),data:r}),s!=null?s:""},63:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[3]!=null?i[3].sharingLevel:i[3])!=null?s.publicMessage:s,e))},65:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(66,r,i),inverse:this.program(68,r,i),data:r}),s!=null?s:""},66:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.errors:s)!=null?s.publicDisabled:s,e))},68:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(69,r,i),inverse:this.program(71,r,i),data:r}),s!=null?s:""},69:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.errors:s)!=null?s.publicDisabled:s,e))},71:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[5]!=null?i[5].sharingLevel:i[5])!=null?s.publicMessage:s,e))},73:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'<h5 class="item-not-public">'+u(o((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.errors:s)!=null?s.notPublic:s,e))+"</h5>"},75:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'<h5 class="item-deleted">'+u(o((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.errors:s)!=null?s.deleted:s,e))+"</h5>"},77:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'<h5 class="item-inaccessible">'+u(o((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.errors:s)!=null?s.inaccessible:s,e))+"</h5>"},79:function(e,t,n,r){return" column-5"},81:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(82,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},82:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(83,r,i),inverse:this.program(86,r,i),data:r}),s!=null&&(o+=s),o},83:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='						<button class="view-item btn edit-item edit-error ';return s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(84,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(84,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+'" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'">'+f(l((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.actions:s)!=null?s.editMap:s,e))+"</button>\n"},84:function(e,t,n,r){return"no-show"},86:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(87,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},87:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='							<button class="view-item btn edit-item edit-error ';return s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(84,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(84,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+'" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'">'+f(l((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.actions:s)!=null?s.editMap:s,e))+"</button>\n"},89:function(e,t,n,r,i){var s,o="";return s=t.each.call(e,(s=e!=null?e.info:e)!=null?s.sections:s,{name:"each",hash:{},fn:this.program(90,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},90:function(e,t,n,r,i){var s,o='					<div class="tooltip before section">\n';return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(91,r,i),inverse:this.program(102,r,i),data:r}),s!=null&&(o+=s),o+='						<div class="tooltip-wrapper">\n							<p class="tooltip-content">',s=t["if"].call(e,e!=null?e.title:e,{name:"if",hash:{},fn:this.program(107,r,i),inverse:this.program(109,r,i),data:r}),s!=null&&(o+=s),s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(111,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o+"</p>\n						</div>\n					</div>\n"},91:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(92,r),inverse:this.program(97,r),data:r}),i!=null&&(s+=i),s},92:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='								<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n							 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(93,r),inverse:this.program(95,r),data:r}),i!=null&&(f+=i),f+"\n								</span>\n"},93:function(e,t,n,r){return"\n								"},95:function(e,t,n,r){return",<!--\n							 -->"},97:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='								<span class="section-action-container">\n									<span class="section-link" data-type="main-stage-action" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'" data-action-id="'+a((s=(s=t.actionId||(e!=null?e.actionId:e))!=null?s:u,typeof s===o?s.call(e,{name:"actionId",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n								 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(98,r),inverse:this.program(100,r),data:r}),i!=null&&(f+=i),f},98:function(e,t,n,r){return"\n										</span>\n									"},100:function(e,t,n,r){return"<!--\n									-->,</span>\n"},102:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='							<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n						 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(103,r),inverse:this.program(105,r),data:r}),i!=null&&(f+=i),f+"\n							</span>\n"},103:function(e,t,n,r){return"\n							"},105:function(e,t,n,r){return",<!--\n						 -->"},107:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))},109:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.info:s)!=null?s.untitledSection:s,e))},111:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(112,r,i),data:r}),s!=null?s:""},112:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return" ("+u(o((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.contentType:s)!=null?s.mainStage:s,e))+")"},114:function(e,t,n,r,i){var s,o='			<td class="column-4">\n';return s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(115,r,i),data:r}),s!=null&&(o+=s),o+"			</td>\n"},115:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(116,r,i),data:r}),s!=null&&(o+=s),o},116:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(117,r,i),inverse:this.program(119,r,i),data:r}),s!=null&&(o+=s),o},117:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda;return'							<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class="view-item btn transparent icon-edit edit-item" target="_blank">'+f(l((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.actions:s)!=null?s.editMap:s,e))+"</a>\n"},119:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(120,r,i),inverse:this.program(122,r,i),data:r}),s!=null&&(o+=s),o},120:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda;return'								<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class="view-item btn transparent icon-edit edit-item" target="_blank">'+f(l((s=(s=i[6]!=null?i[6].labels:i[6])!=null?s.actions:s)!=null?s.editMap:s,e))+"</a>\n"},122:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(123,r,i),data:r}),s!=null&&(o+=s),o},123:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda;return'									<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class="view-item btn transparent icon-window-lines" target="_blank">'+f(l((s=(s=i[7]!=null?i[7].labels:i[7])!=null?s.actions:s)!=null?s.viewMap:s,e))+"</a>\n"},125:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='				<tr class="layer-title-row expandable-layer" data-map-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'">\n					<td class="column-8 pre-2">'+f(l((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.layers:s)!=null?s.layersHeader:s,e))+"</td>\n				</tr>\n";return s=t.each.call(e,(s=e!=null?e.info:e)!=null?s.layers:s,{name:"each",hash:{},fn:this.program(126,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c},126:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='				<tr class="layer-row expandable-layer';return s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(11,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(11,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(11,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-map-id="'+f(l((s=e!=null?e.info:e)!=null?s.mapId:s,e))+'" data-owner="'+f((o=(o=t.owner||(e!=null?e.owner:e))!=null?o:a,typeof o===u?o.call(e,{name:"owner",hash:{},data:r}):o))+'">\n					<td class="column-1 pre-1 item-status-column">\n						<div class="tooltip above">\n							<div class="media-item-status',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(13,r,i),inverse:this.program(127,r,i),data:r}),s!=null&&(c+=s),c+='"></div>\n							<div class="tooltip-wrapper',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(130,r,i),data:r}),s!=null&&(c+=s),c+='">\n								<div class="tooltip-content">\n',s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.isScannable:s,{name:"if",hash:{},fn:this.program(132,r,i),inverse:this.program(139,r,i),data:r}),s!=null&&(c+=s),c+='								</div>\n							</div>\n						</div>\n					</td>\n					<td class="media-title layer',s=t["if"].call(e,i[3]!=null?i[3].isBuilder:i[3],{name:"if",hash:{},fn:this.program(23,r,i),inverse:this.program(25,r,i),data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.isPremiumContent:e,{name:"if",hash:{},fn:this.program(141,r,i),inverse:this.program(143,r,i),data:r}),s!=null&&(c+=s),c+='"><span class="layer-title',s=t["if"].call(e,e!=null?e.isPremiumContent:e,{name:"if",hash:{},fn:this.program(145,r,i),inverse:this.program(147,r,i),data:r}),s!=null&&(c+=s),c+='" title="'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:a,typeof o===u?o.call(e,{name:"title",hash:{},data:r}):o))+'">'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:a,typeof o===u?o.call(e,{name:"title",hash:{},data:r}):o))+"</span>",s=t["if"].call(e,e!=null?e.isPremiumContent:e,{name:"if",hash:{},fn:this.program(149,r,i),inverse:this.program(151,r,i),data:r}),s!=null&&(c+=s),c+='</td>\n					<td class="column-7">\n						<div class="',s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.partOfMap:s,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.hostedOnAGOL:e,{name:"if",hash:{},fn:this.program(154,r,i),inverse:this.program(19,r,i),data:r}),s!=null&&(c+=s),c+='">\n							<div class="tooltip above sharing-button-container layer">\n								<div class="lock-icon ',s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(156,r,i),inverse:this.program(31,r,i),data:r}),s!=null&&(c+=s),c+=" ",s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(33,r,i),data:r}),s!=null&&(c+=s),c+='"></div>\n								<div class="tooltip-wrapper">\n									<p class="tooltip-content',s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">'+f(l((s=(s=e!=null?e.info:e)!=null?s.templateStrings:s)!=null?s.ownedBy:s,e))+'</p>\n								</div>\n							</div>\n							<div class="sharing-icons',s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(158,r,i),data:r}),s!=null&&(c+=s),c+='">\n							    <div class="tooltip above sharing-button-container layer private',s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"private",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"shared",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">\n									<button class="map-sharing toggle-button server-button icon-user private temp-disabled',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"private",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"shared",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-map-id="'+f(l((s=e!=null?e.info:e)!=null?s.mapId:s,e))+'" data-sharing="private" data-type="layer"></button>\n									<div class="tooltip-wrapper">\n										<p class="tooltip-content">'+f(l((s=i[3]!=null?i[3].sharingLevel:i[3])!=null?s.privateMessage:s,e))+'</p>\n									</div>\n								</div><!--\n							 --><div class="tooltip above sharing-button-container layer organization',s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"organization",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">\n									<button class="map-sharing toggle-button server-button icon-community organization temp-disabled',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"organization",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(38,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.canShareOrg:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(42,r,i),data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-map-id="'+f(l((s=e!=null?e.info:e)!=null?s.mapId:s,e))+'" data-sharing="organization" data-type="layer"></button>\n									<div class="tooltip-wrapper">\n										<p class="tooltip-content">',s=t["if"].call(e,e!=null?e.canShareOrg:e,{name:"if",hash:{},fn:this.program(50,r,i),inverse:this.program(160,r,i),data:r}),s!=null&&(c+=s),c+='</p>\n									</div>\n								</div><!--\n							 --><div class="tooltip above sharing-button-container layer public',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"public",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='">\n									<button class="map-sharing toggle-button server-button icon-stories-globe public temp-disabled',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.access:e,"public",{name:"ifEquals",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.canSharePublic:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(42,r,i),data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-map-id="'+f(l((s=e!=null?e.info:e)!=null?s.mapId:s,e))+'" data-sharing="public" data-type="layer"></button>\n									<div class="tooltip-wrapper">\n										<p class="tooltip-content">',s=t["if"].call(e,e!=null?e.canSharePublic:e,{name:"if",hash:{},fn:this.program(172,r,i),inverse:this.program(174,r,i),data:r}),s!=null&&(c+=s),c+="</p>\n									</div>\n								</div>\n							</div>\n							",s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(183,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+="\n						</div>\n						",s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(185,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+="\n						",s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(187,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+="\n					</td>\n",s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(189,r,i),data:r}),s!=null&&(c+=s),c+"				</tr>\n"},127:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.hasMinorWarning:e,{name:"if",hash:{},fn:this.program(128,r),inverse:this.program(15,r),data:r}),i!=null?i:""},128:function(e,t,n,r){return" icon-stories-warning warning"},130:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.hasMinorWarning:e,{name:"if",hash:{},fn:this.program(17,r),inverse:this.program(19,r),data:r}),i!=null?i:""},132:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(133,r,i),inverse:this.program(136,r,i),data:r}),s!=null&&(o+=s),o},133:function(e,t,n,r){var i,s="";return i=t.each.call(e,e!=null?e.errors:e,{name:"each",hash:{},fn:this.program(134,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},134:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return"												<span>"+s(i(e!=null?e.text:e,e))+"</span><br>\n"},136:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.serviceOkItemNot:e,{name:"if",hash:{},fn:this.program(137,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},137:function(e,t,n,r,i){var s=this.lambda,o=this.escapeExpression;return"												"+o(s(i[6]!=null?i[6].ignoredWarning:i[6],e))+"\n"},139:function(e,t,n,r,i){var s=this.lambda,o=this.escapeExpression;return"										<span>"+o(s(i[4]!=null?i[4].unscannableWarning:i[4],e))+"</span>\n"},141:function(e,t,n,r){return" premium-title"},143:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.isSubscriptionContent:e,{name:"if",hash:{},fn:this.program(141,r),inverse:this.noop,data:r}),i!=null?i:""},145:function(e,t,n,r){return" premium"},147:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.isSubscriptionContent:e,{name:"if",hash:{},fn:this.program(145,r),inverse:this.noop,data:r}),i!=null?i:""},149:function(e,t,n,r,i){var s,o=t.helperMissing,u=this.escapeExpression;return'<div class="tooltip above premium-info-tooltip"><div class="premium-info-icon icon-info-information"></div><div class="tooltip-wrapper"><p class="tooltip-content">'+u((t.injectValueQuoted||e&&e.injectValueQuoted||o).call(e,(s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.tooltipErrors:s)!=null?s.layerConsumesCredits:s,i[1]!=null?i[1].title:i[1],{name:"injectValueQuoted",hash:{},data:r}))+"</p></div></div>"},151:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.isSubscriptionContent:e,{name:"if",hash:{},fn:this.program(152,r,i),inverse:this.noop,data:r}),s!=null?s:""},152:function(e,t,n,r,i){var s,o=t.helperMissing,u=this.escapeExpression;return'<div class="tooltip above premium-info-tooltip"><div class="premium-info-icon icon-info-information"><div class="tooltip-wrapper"><p class="tooltip-content">'+u((t.injectValueQuoted||e&&e.injectValueQuoted||o).call(e,(s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.tooltipErrors:s)!=null?s.layerSubscriptionContent:s,i[2]!=null?i[2].title:i[2],{name:"injectValueQuoted",hash:{},data:r}))+"</p></div></div>"},154:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.access:e,{name:"if",hash:{},fn:this.program(17,r),inverse:this.program(19,r),data:r}),i!=null?i:""},156:function(e,t,n,r){return"icon-info-information premium-info-icon"},158:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(17,r),inverse:this.program(36,r),data:r}),i!=null?i:""},160:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.sharedBelowLevel:e,{name:"if",hash:{},fn:this.program(161,r,i),inverse:this.program(163,r,i),data:r}),s!=null?s:""},161:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[5]!=null?i[5].sharingLevel:i[5])!=null?s.organization:s,e))},163:function(e,t,n,r,i){var s,o=t.helperMissing;return s=(t.ifEquals||e&&e.ifEquals||o).call(e,e!=null?e.access:e,"organization",{name:"ifEquals",hash:{},fn:this.program(58,r,i),inverse:this.program(164,r,i),data:r}),s!=null?s:""},164:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(165,r,i),inverse:this.program(167,r,i),data:r}),s!=null?s:""},165:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[7]!=null?i[7].labels:i[7])!=null?s.errors:s)!=null?s.orgDisabled:s,e))},167:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(168,r,i),inverse:this.program(170,r,i),data:r}),s!=null?s:""},168:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[8]!=null?i[8].labels:i[8])!=null?s.errors:s)!=null?s.orgDisabled:s,e))},170:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[8]!=null?i[8].sharingLevel:i[8])!=null?s.organization:s,e))},172:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[4]!=null?i[4].sharingLevel:i[4])!=null?s.publicMessage:s,e))},174:function(e,t,n,r,i){var s,o=t.helperMissing;return s=(t.ifEquals||e&&e.ifEquals||o).call(e,e!=null?e.access:e,"public",{name:"ifEquals",hash:{},fn:this.program(71,r,i),inverse:this.program(175,r,i),data:r}),s!=null?s:""},175:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.isOwnedByMe:e,{name:"if",hash:{},fn:this.program(176,r,i),inverse:this.program(178,r,i),data:r}),s!=null?s:""},176:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[6]!=null?i[6].labels:i[6])!=null?s.errors:s)!=null?s.publicDisabled:s,e))},178:function(e,t,n,r,i){var s;return s=t["if"].call(e,e!=null?e.canShareOthers:e,{name:"if",hash:{},fn:this.program(179,r,i),inverse:this.program(181,r,i),data:r}),s!=null?s:""},179:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[7]!=null?i[7].labels:i[7])!=null?s.errors:s)!=null?s.publicDisabled:s,e))},181:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[7]!=null?i[7].sharingLevel:i[7])!=null?s.publicMessage:s,e))},183:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'<h5 class="item-not-public">'+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.errors:s)!=null?s.notPublic:s,e))+"</h5>"},185:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'<h5 class="item-deleted">'+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.errors:s)!=null?s.deleted:s,e))+"</h5>"},187:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'<h5 class="item-inaccessible">'+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.errors:s)!=null?s.inaccessible:s,e))+"</h5>"},189:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(190,r,i),data:r}),s!=null&&(o+=s),o},190:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(191,r,i),data:r}),s!=null&&(o+=s),o},191:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.url:e,{name:"if",hash:{},fn:this.program(192,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},192:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,i[7]!=null?i[7].isBuilder:i[7],{name:"if",hash:{},fn:this.program(17,r,i),inverse:this.program(193,r,i),data:r}),s!=null&&(o+=s),o},193:function(e,t,n,r,i){var s,o='										<td class="column-4"></td>\n';return s=this.invokePartial(n.layerView,"										","layerView",e,{labels:i[8]!=null?i[8].labels:i[8],url:i[1]!=null?i[1].url:i[1],info:i[1]!=null?i[1].info:i[1]},t,n,r),s!=null&&(o+=s),o},195:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='				<tr class="layer-title-row empty expandable-layer';return s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+'" data-map-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'">\n					<td class="column-8 pre-2">'+f(l((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.layers:s)!=null?s.noLayers:s,e))+"</td>\n				</tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a='<table class="map-table content-table">\n	<thead>\n		<tr>\n			<td class="column-2 item-status-column">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.status:s,e))+'</td>\n			<td class="';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.name:s,e))+'</td>\n			<td class="column-6 item-shared-with-column">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.shared:s,e))+"</td>\n\n",s=t["if"].call(e,e!=null?e.showSections:e,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a+='			<td class="column-4"></td>\n		</tr>\n	</thead>\n	<tbody>\n',s=t.each.call(e,(s=e!=null?e.data:e)!=null?s.items:s,{name:"each",hash:{},fn:this.program(10,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a+"	</tbody>\n</table>\n"},usePartial:!0,useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/Scenes",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return"column-15"},3:function(e,t,n,r){return"column-13"},5:function(e,t,n,r){return"column-3"},7:function(e,t,n,r){return"column-5"},9:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='		<tr class="media-row';return s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(10,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-id="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'">\n			<td class="column-2 item-status-column">\n				<div class="tooltip above">\n					<div class="media-item-status',s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.isScannable:s,{name:"if",hash:{},fn:this.program(12,r,i),inverse:this.program(17,r,i),data:r}),s!=null&&(c+=s),c+='"></div>\n					<div class="tooltip-wrapper',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.program(21,r,i),data:r}),s!=null&&(c+=s),c+='">\n						<div class="tooltip-content">\n',s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.isScannable:s,{name:"if",hash:{},fn:this.program(24,r,i),inverse:this.program(27,r,i),data:r}),s!=null&&(c+=s),c+='						</div>\n					</div>\n				</div>\n			</td>\n			<td class="media-title scene ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(c+=s),c+='">'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:a,typeof o===u?o.call(e,{name:"title",hash:{},data:r}):o)),s=t["if"].call(e,e!=null?e.deleted:e,{name:"if",hash:{},fn:this.program(29,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(29,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.notYoursNotAccessible:e,{name:"if",hash:{},fn:this.program(29,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='\n			</td>\n			<td class="sections ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(c+=s),c+='">\n',s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.sections:s,{name:"if",hash:{},fn:this.program(31,r,i),inverse:this.program(62,r,i),data:r}),s!=null&&(c+=s),c+'			</td>\n			<td class="column-4">\n				<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class="view-item btn transparent icon-edit edit-item" target="_blank">'+f(l((s=(s=i[1]!=null?i[1].labels:i[1])!=null?s.actions:s)!=null?s.editScene:s,e))+"</a>\n			</td>\n		</tr>\n"},10:function(e,t,n,r){return" error-row"},12:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.errors:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(13,r),inverse:this.program(15,r),data:r}),i!=null?i:""},13:function(e,t,n,r){return" icon-stories-error issue"},15:function(e,t,n,r){return" icon-stories-check ok"},17:function(e,t,n,r){return" icon-stories-warning warning"},19:function(e,t,n,r){return""},21:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.isScannable:i,{name:"if",hash:{},fn:this.program(22,r),inverse:this.program(19,r),data:r}),i!=null?i:""},22:function(e,t,n,r){return" no-show"},24:function(e,t,n,r){var i,s="";return i=t.each.call(e,e!=null?e.errors:e,{name:"each",hash:{},fn:this.program(25,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},25:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return"									<span>"+s(i(e!=null?e.text:e,e))+"</span><br>\n"},27:function(e,t,n,r,i){var s=this.lambda,o=this.escapeExpression;return"								<span>"+o(s(i[2]!=null?i[2].unscannableWarning:i[2],e))+"</span>\n"},29:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.errors:s)!=null?s.noSceneName:s,e))},31:function(e,t,n,r,i){var s,o="";return s=t.each.call(e,(s=e!=null?e.info:e)!=null?s.sections:s,{name:"each",hash:{},fn:this.program(32,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},32:function(e,t,n,r,i){var s,o='						<div class="tooltip before section">\n';return s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(33,r,i),inverse:this.program(38,r,i),data:r}),s!=null&&(o+=s),o+='							<div class="tooltip-wrapper">\n								<p class="tooltip-content">\n',s=t["if"].call(e,e!=null?e.title:e,{name:"if",hash:{},fn:this.program(52,r,i),inverse:this.program(54,r,i),data:r}),s!=null&&(o+=s),s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.program(56,r,i),data:r}),s!=null&&(o+=s),o+"								</p>\n							</div>\n						</div>\n"},33:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='								<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n								 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(34,r),inverse:this.program(36,r),data:r}),i!=null&&(f+=i),f+"\n									</span>\n"},34:function(e,t,n,r){return"\n									"},36:function(e,t,n,r){return",<!--\n								 -->"},38:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(39,r),inverse:this.program(44,r),data:r}),i!=null&&(s+=i),s},39:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='									<span class="section-action-container">\n										<span class="section-link" data-type="description" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n								 	-->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(40,r),inverse:this.program(42,r),data:r}),i!=null&&(f+=i),f},40:function(e,t,n,r){return"\n											</span>\n										"},42:function(e,t,n,r){return"<!--\n										-->,</span>\n"},44:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(45,r),inverse:this.program(47,r),data:r}),i!=null&&(s+=i),s},45:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='									<span class="section-action-container">\n										<span class="section-link" data-type="main-stage-action" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'" data-action-id="'+a((s=(s=t.actionId||(e!=null?e.actionId:e))!=null?s:u,typeof s===o?s.call(e,{name:"actionId",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n								 	-->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(40,r),inverse:this.program(42,r),data:r}),i!=null&&(f+=i),f},47:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='										<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n									 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(48,r),inverse:this.program(50,r),data:r}),i!=null&&(f+=i),f+"\n										</span>\n"},48:function(e,t,n,r){return"\n										"},50:function(e,t,n,r){return",<!--\n									 -->"},52:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return"										"+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+"\n"},54:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"										"+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.info:s)!=null?s.untitledSection:s,e))+"\n"},56:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(57,r,i),inverse:this.program(60,r,i),data:r}),s!=null&&(o+=s),o},57:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a="											("+u(o((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.contentType:s)!=null?s.sidePanel:s,e))+")\n";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(58,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a},58:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"												("+u(o((s=(s=i[6]!=null?i[6].labels:i[6])!=null?s.contentType:s)!=null?s.mainStage:s,e))+")\n"},60:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(58,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},62:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.pinNumber:i,{name:"if",hash:{},fn:this.program(63,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},63:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return"						"+o(s((i=e!=null?e.info:e)!=null?i.pinNumber:i,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a='<table class="scenes-table content-table">\n	<thead>\n		<tr>\n			<td class="column-2 item-status-column">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.status:s,e))+'</td>\n			<td class="';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.name:s,e))+'</td>\n			<td class="',s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=e!=null?e.data:e)!=null?s.storyComponent:s,e))+'</td>\n			<td class="column-4"></td>\n		</tr>\n	</thead>\n	<tbody>\n',s=t.each.call(e,(s=e!=null?e.data:e)!=null?s.items:s,{name:"each",hash:{},fn:this.program(9,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a+"	</tbody>\n</table>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/Images",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return""},3:function(e,t,n,r){return" scrollable-table"},5:function(e,t,n,r){return"column-10"},7:function(e,t,n,r){return"column-14"},9:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='				<td class="';return i=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(10,r),inverse:this.program(12,r),data:r}),i!=null&&(f+=i),f+'">'+a((s=(s=t.storyComponent||(e!=null?e.storyComponent:e))!=null?s:u,typeof s===o?s.call(e,{name:"storyComponent",hash:{},data:r}):s))+"</td>\n"},10:function(e,t,n,r){return"column-8"},12:function(e,t,n,r){return"column-4"},14:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l='		<tr class="media-row';return s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(15,r,i),inverse:this.program(17,r,i),data:r}),s!=null&&(l+=s),l+='" data-id="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'">\n',s=this.invokePartial(n.imageStatus,"			","imageStatus",e,{emptyShortlistText:i[1]!=null?i[1].emptyShortlistText:i[1],isBuilder:i[1]!=null?i[1].isBuilder:i[1]},t,n,r),s!=null&&(l+=s),s=this.invokePartial(n.imageTitle,"			","imageTitle",e,{isBuilder:i[1]!=null?i[1].isBuilder:i[1]},t,n,r),s!=null&&(l+=s),s=this.invokePartial(n.imageSource,"			","imageSource",e,{engStrings:i[1]!=null?i[1].engStrings:i[1],isBuilder:i[1]!=null?i[1].isBuilder:i[1]},t,n,r),s!=null&&(l+=s),s=this.invokePartial(n.imageSections,"			","imageSections",e,{showSections:i[1]!=null?i[1].showSections:i[1],labels:i[1]!=null?i[1].labels:i[1],isBuilder:i[1]!=null?i[1].isBuilder:i[1]},t,n,r),s!=null&&(l+=s),l+"		</tr>\n"},15:function(e,t,n,r){return" error-row"},17:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(18,r),inverse:this.noop,data:r}),i!=null?i:""},18:function(e,t,n,r){return" warning-row"},20:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'			<tr class="layer-title-row thumbnail-row media-row">\n				<td class="column-8 pre-2">'+u(o((s=(s=i[1]!=null?i[1].labels:i[1])!=null?s.images:s)!=null?s.thumbnails:s,e))+"</td>\n			</tr>\n"},22:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l='		<tr class="media-row';return s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(15,r,i),inverse:this.program(17,r,i),data:r}),s!=null&&(l+=s),l+='" data-id="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'">\n',s=this.invokePartial(n.imageStatus,"			","imageStatus",e,{emptyShortlistText:i[1]!=null?i[1].emptyShortlistText:i[1],isBuilder:i[1]!=null?i[1].isBuilder:i[1]},t,n,r),s!=null&&(l+=s),s=this.invokePartial(n.imageTitle,"			","imageTitle",e,{isBuilder:i[1]!=null?i[1].isBuilder:i[1]},t,n,r),s!=null&&(l+=s),s=this.invokePartial(n.imageSource,"			","imageSource",e,{engStrings:i[1]!=null?i[1].engStrings:i[1],isBuilder:i[1]!=null?i[1].isBuilder:i[1]},t,n,r),s!=null&&(l+=s),l+='			<td class="sections ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(10,r,i),inverse:this.program(12,r,i),data:r}),s!=null&&(l+=s),l+='">\n',s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.pinNumber:s,{name:"if",hash:{},fn:this.program(23,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),l+"			</td>\n		</tr>\n"},23:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return"					"+o(s((i=e!=null?e.info:e)!=null?i.pinNumber:i,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o,u=this.lambda,a=this.escapeExpression,f="function",l=t.helperMissing,c='<table class="image-table content-table ';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(c+=s),c+='">\n	<thead>\n		<tr>\n			<td class="column-2 item-status-column">'+a(u((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.status:s,e))+'</td>\n			<td class="',s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(c+=s),c+='">'+a((o=(o=t.titleType||(e!=null?e.titleType:e))!=null?o:l,typeof o===f?o.call(e,{name:"titleType",hash:{},data:r}):o))+'</td>\n			<td class="source-title column-4">'+a(u((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.source:s,e))+"</td>\n",s=t["if"].call(e,e!=null?e.showSections:e,{name:"if",hash:{},fn:this.program(9,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='		</tr>\n	</thead>\n	<tbody class="custom-scrollbar">\n',s=t.each.call(e,e!=null?e.images:e,{name:"each",hash:{},fn:this.program(14,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t["if"].call(e,(s=e!=null?e.thumbnails:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(20,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=t.each.call(e,e!=null?e.thumbnails:e,{name:"each",hash:{},fn:this.program(22,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+"	</tbody>\n</table>\n"},usePartial:!0,useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/Videos",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return"column-10"},3:function(e,t,n,r){return"column-14"},5:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l='		<tr class="media-row';return s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(6,r,i),inverse:this.program(8,r,i),data:r}),s!=null&&(l+=s),l+='" data-id="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'">\n			<td class="column-2 item-status-column">\n				<div class="tooltip above">\n					<div class="media-item-status',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(11,r,i),inverse:this.program(13,r,i),data:r}),s!=null&&(l+=s),l+='"></div>\n					<div class="tooltip-wrapper',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(18,r,i),inverse:this.program(20,r,i),data:r}),s!=null&&(l+=s),l+='">\n						<div class="tooltip-content">\n',s=t.each.call(e,e!=null?e.errors:e,{name:"each",hash:{},fn:this.program(23,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),s=t.each.call(e,e!=null?e.warnings:e,{name:"each",hash:{},fn:this.program(23,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),l+='						</div>\n					</div>\n				</div>\n			</td>\n			<td class="media-title video ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(l+=s),l+='">\n				<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class="media-link" target="_blank">',s=t["if"].call(e,e!=null?e.inaccessible:e,{name:"if",hash:{},fn:this.program(25,r,i),inverse:this.program(27,r,i),data:r}),s!=null&&(l+=s),l+='</a>\n			</td>\n			<td class="source column-4">\n				<a',s=(t.ifEquals||e&&e.ifEquals||a).call(e,(s=e!=null?e.info:e)!=null?s.source:s,"YouTube",{name:"ifEquals",hash:{},fn:this.program(29,r,i),inverse:this.program(31,r,i),data:r}),s!=null&&(l+=s),l+=' class="tooltip above sharing-status media video',s=(t.ifEquals||e&&e.ifEquals||a).call(e,(s=e!=null?e.info:e)!=null?s.source:s,"YouTube",{name:"ifEquals",hash:{},fn:this.program(34,r,i),inverse:this.program(36,r,i),data:r}),s!=null&&(l+=s),l+='" target="_blank">\n					<div class="tooltip-wrapper">\n						<div class="tooltip-content">\n							<span>',s=(t.ifEquals||e&&e.ifEquals||a).call(e,(s=e!=null?e.info:e)!=null?s.source:s,"YouTube",{name:"ifEquals",hash:{},fn:this.program(39,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,(s=e!=null?e.info:e)!=null?s.source:s,"Vimeo",{name:"ifEquals",hash:{},fn:this.program(41,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),l+='</span>\n						</div>\n					</div>\n				</a>\n			</td>\n			<td class="sections ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(43,r,i),inverse:this.program(45,r,i),data:r}),s!=null&&(l+=s),l+='">\n',s=t["if"].call(e,e!=null?e.sections:e,{name:"if",hash:{},fn:this.program(47,r,i),inverse:this.program(78,r,i),data:r}),s!=null&&(l+=s),l+"			</td>\n		</tr>\n"},6:function(e,t,n,r){return" error-row"},8:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(9,r),inverse:this.noop,data:r}),i!=null?i:""},9:function(e,t,n,r){return" warning-row"},11:function(e,t,n,r){return" icon-stories-error issue"},13:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(14,r),inverse:this.program(16,r),data:r}),i!=null?i:""},14:function(e,t,n,r){return" icon-stories-warning warning"},16:function(e,t,n,r){return" icon-stories-check ok"},18:function(e,t,n,r){return""},20:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(18,r),inverse:this.program(21,r),data:r}),i!=null?i:""},21:function(e,t,n,r){return" no-show"},23:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u="								<span>"+o(s(e!=null?e.text:e,e));return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(18,r),inverse:this.program(18,r),data:r}),i!=null&&(u+=i),u+"</span><br>\n"},25:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.errors:s)!=null?s.cantAccessVideo:s,e))},27:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.info:e)!=null?i.title:i,e))},29:function(e,t,n,r){return' href="https://www.youtube.com"'},31:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Vimeo",{name:"ifEquals",hash:{},fn:this.program(32,r),inverse:this.noop,data:r}),i!=null?i:""},32:function(e,t,n,r){return' href="https://vimeo.com"'},34:function(e,t,n,r){return" icon-stories-youtube"},36:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Vimeo",{name:"ifEquals",hash:{},fn:this.program(37,r),inverse:this.noop,data:r}),i!=null?i:""},37:function(e,t,n,r){return" icon-stories-vimeo"},39:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].engStrings:i[2])!=null?s.youTube:s,e))},41:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].engStrings:i[2])!=null?s.vimeo:s,e))},43:function(e,t,n,r){return"column-8"},45:function(e,t,n,r){return"column-4"},47:function(e,t,n,r,i){var s,o="";return s=t.each.call(e,e!=null?e.sections:e,{name:"each",hash:{},fn:this.program(48,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},48:function(e,t,n,r,i){var s,o='						<div class="tooltip before section">\n';return s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(49,r,i),inverse:this.program(54,r,i),data:r}),s!=null&&(o+=s),o+='							<div class="tooltip-wrapper">\n								<p class="tooltip-content">\n',s=t["if"].call(e,e!=null?e.title:e,{name:"if",hash:{},fn:this.program(68,r,i),inverse:this.program(70,r,i),data:r}),s!=null&&(o+=s),s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(18,r,i),inverse:this.program(72,r,i),data:r}),s!=null&&(o+=s),o+"								</p>\n							</div>\n						</div>\n"},49:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='								<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n								 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(50,r),inverse:this.program(52,r),data:r}),i!=null&&(f+=i),f+"\n									</span>\n"},50:function(e,t,n,r){return"\n									"},52:function(e,t,n,r){return",<!--\n								 -->"},54:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(55,r),inverse:this.program(60,r),data:r}),i!=null&&(s+=i),s},55:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='									<span class="section-action-container">\n										<span class="section-link" data-type="description" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n								 	-->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(56,r),inverse:this.program(58,r),data:r}),i!=null&&(f+=i),f},56:function(e,t,n,r){return"\n											</span>\n										"},58:function(e,t,n,r){return"<!--\n										-->,</span>\n"},60:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(61,r),inverse:this.program(63,r),data:r}),i!=null&&(s+=i),s},61:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='									<span class="section-action-container">\n										<span class="section-link" data-type="main-stage-action" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'" data-action-id="'+a((s=(s=t.actionId||(e!=null?e.actionId:e))!=null?s:u,typeof s===o?s.call(e,{name:"actionId",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n								 	-->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(56,r),inverse:this.program(58,r),data:r}),i!=null&&(f+=i),f},63:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='										<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n									 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(64,r),inverse:this.program(66,r),data:r}),i!=null&&(f+=i),f+"\n										</span>\n"},64:function(e,t,n,r){return"\n										"},66:function(e,t,n,r){return",<!--\n									 -->"},68:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return"										"+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+"\n"},70:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"										"+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.info:s)!=null?s.untitledSection:s,e))+"\n"},72:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(73,r,i),inverse:this.program(76,r,i),data:r}),s!=null&&(o+=s),o},73:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a="											("+u(o((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.contentType:s)!=null?s.sidePanel:s,e))+")\n";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(74,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a},74:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"												("+u(o((s=(s=i[6]!=null?i[6].labels:i[6])!=null?s.contentType:s)!=null?s.mainStage:s,e))+")\n"},76:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(74,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},78:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.pinNumber:i,{name:"if",hash:{},fn:this.program(79,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},79:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return"						"+o(s((i=e!=null?e.info:e)!=null?i.pinNumber:i,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a='<table class="video-table content-table">\n	<thead>\n		<tr>\n			<td class="column-2 item-status-column">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.status:s,e))+'</td>\n			<td class="';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.name:s,e))+'</td>\n			<td class="source-title column-4">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.source:s,e))+'</td>\n			<td class="column-4">'+u(o((s=e!=null?e.data:e)!=null?s.storyComponent:s,e))+"</td>\n		</tr>\n	</thead>\n	<tbody>\n",s=t.each.call(e,(s=e!=null?e.data:e)!=null?s.items:s,{name:"each",hash:{},fn:this.program(5,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a+"	</tbody>\n</table>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/Webpages",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return"column-14"},3:function(e,t,n,r){return"column-18"},5:function(e,t,n,r){return"column-8"},7:function(e,t,n,r){return"column-4"},9:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l='		<tr class="media-row';return s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(10,r,i),inverse:this.program(12,r,i),data:r}),s!=null&&(l+=s),l+='" data-id="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'">\n			<td class="column-2 item-status-column">\n				<div class="tooltip above">\n					<div class="media-item-status',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(15,r,i),inverse:this.program(17,r,i),data:r}),s!=null&&(l+=s),l+='"></div>\n					<div class="tooltip-wrapper">\n						<div class="tooltip-content">\n',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.program(24,r,i),data:r}),s!=null&&(l+=s),l+='						</div>\n					</div>\n				</div>\n			</td>\n			<td class="media-title image ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(l+=s),l+='">\n				<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class="media-link" target="_blank">',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(30,r,i),inverse:this.program(32,r,i),data:r}),s!=null&&(l+=s),l+='</a>\n			</td>\n			<td class="sections ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(l+=s),l+='">\n',s=t["if"].call(e,e!=null?e.sections:e,{name:"if",hash:{},fn:this.program(35,r,i),inverse:this.program(68,r,i),data:r}),s!=null&&(l+=s),l+"			</td>\n		</tr>\n"},10:function(e,t,n,r){return" error-row"},12:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(13,r),inverse:this.noop,data:r}),i!=null?i:""},13:function(e,t,n,r){return" warning-row"},15:function(e,t,n,r){return" icon-stories-error issue"},17:function(e,t,n,r){return" icon-stories-warning warning"},19:function(e,t,n,r){var i,s="";return i=t.each.call(e,e!=null?e.errors:e,{name:"each",hash:{},fn:this.program(20,r),inverse:this.noop,data:r}),i!=null&&(s+=i),i=t.each.call(e,e!=null?e.warnings:e,{name:"each",hash:{},fn:this.program(22,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},20:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return"									<span>"+s(i(e!=null?e.text:e,e))+"</span><br>\n"},22:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return"                  <span>"+s(i(e!=null?e.text:e,e))+"</span><br>\n"},24:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,(s=e!=null?e.warnings:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(25,r,i),inverse:this.program(28,r,i),data:r}),s!=null&&(o+=s),o},25:function(e,t,n,r){var i,s="";return i=t.each.call(e,e!=null?e.warnings:e,{name:"each",hash:{},fn:this.program(26,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},26:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return"                    <span>"+s(i(e!=null?e.text:e,e))+"</span><br>\n"},28:function(e,t,n,r,i){var s=this.lambda,o=this.escapeExpression;return"  								<span>"+o(s(i[3]!=null?i[3].unscannableWarning:i[3],e))+"</span>\n"},30:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))},32:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(30,r),inverse:this.program(33,r),data:r}),i!=null?i:""},33:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.displayUrl||(e!=null?e.displayUrl:e))!=null?i:o,typeof i===s?i.call(e,{name:"displayUrl",hash:{},data:r}):i))},35:function(e,t,n,r,i){var s,o="";return s=t.each.call(e,e!=null?e.sections:e,{name:"each",hash:{},fn:this.program(36,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},36:function(e,t,n,r,i){var s,o='						<div class="tooltip before section">\n';return s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(37,r,i),inverse:this.program(42,r,i),data:r}),s!=null&&(o+=s),o+='							<div class="tooltip-wrapper">\n								<p class="tooltip-content">\n',s=t["if"].call(e,e!=null?e.title:e,{name:"if",hash:{},fn:this.program(56,r,i),inverse:this.program(58,r,i),data:r}),s!=null&&(o+=s),s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(60,r,i),inverse:this.program(62,r,i),data:r}),s!=null&&(o+=s),o+"								</p>\n							</div>\n						</div>\n"},37:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='								<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n								 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(38,r),inverse:this.program(40,r),data:r}),i!=null&&(f+=i),f+"\n									</span>\n"},38:function(e,t,n,r){return"\n									"},40:function(e,t,n,r){return",<!--\n								 -->"},42:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(43,r),inverse:this.program(48,r),data:r}),i!=null&&(s+=i),s},43:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='									<span class="section-action-container">\n										<span class="section-link" data-type="description" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n								 	-->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(44,r),inverse:this.program(46,r),data:r}),i!=null&&(f+=i),f},44:function(e,t,n,r){return"\n											</span>\n										"},46:function(e,t,n,r){return"<!--\n										-->,</span>\n"},48:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(49,r),inverse:this.program(51,r),data:r}),i!=null&&(s+=i),s},49:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='									<span class="section-action-container">\n										<span class="section-link" data-type="main-stage-action" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'" data-action-id="'+a((s=(s=t.actionId||(e!=null?e.actionId:e))!=null?s:u,typeof s===o?s.call(e,{name:"actionId",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n								 	-->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(44,r),inverse:this.program(46,r),data:r}),i!=null&&(f+=i),f},51:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='										<span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n									 -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(52,r),inverse:this.program(54,r),data:r}),i!=null&&(f+=i),f+"\n										</span>\n"},52:function(e,t,n,r){return"\n										"},54:function(e,t,n,r){return",<!--\n									 -->"},56:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return"										"+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+"\n"},58:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"										"+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.info:s)!=null?s.untitledSection:s,e))+"\n"},60:function(e,t,n,r){return""},62:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(63,r,i),inverse:this.program(66,r,i),data:r}),s!=null&&(o+=s),o},63:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a="											("+u(o((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.contentType:s)!=null?s.sidePanel:s,e))+")\n";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(64,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a},64:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"												("+u(o((s=(s=i[6]!=null?i[6].labels:i[6])!=null?s.contentType:s)!=null?s.mainStage:s,e))+")\n"},66:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(64,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},68:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.pinNumber:i,{name:"if",hash:{},fn:this.program(69,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},69:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return"						"+o(s((i=e!=null?e.info:e)!=null?i.pinNumber:i,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a='<table class="webpage-table content-table">\n	<thead>\n		<tr>\n			<td class="column-2 item-status-column">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.status:s,e))+'</td>\n			<td class="';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=e!=null?e.data:e)!=null?s.titleType:s,e))+'</td>\n			<td class="',s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=e!=null?e.data:e)!=null?s.storyComponent:s,e))+"</td>\n		</tr>\n	</thead>\n	<tbody>\n",s=t.each.call(e,(s=e!=null?e.data:e)!=null?s.items:s,{name:"each",hash:{},fn:this.program(9,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a+"	</tbody>\n</table>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/Audio",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return"column-14"},3:function(e,t,n,r){return"column-18"},5:function(e,t,n,r){return"column-8"},7:function(e,t,n,r){return"column-4"},9:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l='		<tr class="media-row';return s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(10,r,i),inverse:this.program(12,r,i),data:r}),s!=null&&(l+=s),l+='" data-id="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'">\n			<td class="column-2 item-status-column">\n				<div class="tooltip above">\n					<div class="media-item-status',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(15,r,i),inverse:this.program(17,r,i),data:r}),s!=null&&(l+=s),l+='"></div>\n					<div class="tooltip-wrapper',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(22,r,i),inverse:this.program(24,r,i),data:r}),s!=null&&(l+=s),l+='">\n						<div class="tooltip-content">\n',s=t.each.call(e,e!=null?e.errors:e,{name:"each",hash:{},fn:this.program(27,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),s=t.each.call(e,e!=null?e.warnings:e,{name:"each",hash:{},fn:this.program(27,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),l+='						</div>\n					</div>\n				</div>\n			</td>\n			<td class="media-title image ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(l+=s),l+='">\n				<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class="media-link" target="_blank">',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(29,r,i),inverse:this.program(31,r,i),data:r}),s!=null&&(l+=s),l+='</a>\n			</td>\n			<td class="sections ',s=t["if"].call(e,i[1]!=null?i[1].isBuilder:i[1],{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(l+=s),l+='">\n',s=t["if"].call(e,e!=null?e.sections:e,{name:"if",hash:{},fn:this.program(34,r,i),inverse:this.program(44,r,i),data:r}),s!=null&&(l+=s),l+"			</td>\n		</tr>\n"},10:function(e,t,n,r){return" error-row"},12:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(13,r),inverse:this.noop,data:r}),i!=null?i:""},13:function(e,t,n,r){return" warning-row"},15:function(e,t,n,r){return" icon-stories-error issue"},17:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(18,r),inverse:this.program(20,r),data:r}),i!=null?i:""},18:function(e,t,n,r){return" icon-stories-warning warning"},20:function(e,t,n,r){return" icon-stories-check ok"},22:function(e,t,n,r){return""},24:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(22,r),inverse:this.program(25,r),data:r}),i!=null?i:""},25:function(e,t,n,r){return" no-show"},27:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return"								<span>"+s(i(e!=null?e.text:e,e))+"</span><br>\n"},29:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))},31:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(29,r),inverse:this.program(32,r),data:r}),i!=null?i:""},32:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.displayUrl||(e!=null?e.displayUrl:e))!=null?i:o,typeof i===s?i.call(e,{name:"displayUrl",hash:{},data:r}):i))},34:function(e,t,n,r,i){var s,o="";return s=t.each.call(e,e!=null?e.sections:e,{name:"each",hash:{},fn:this.program(35,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},35:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l='						<div class="tooltip before section">\n              <span class="section-link" data-type="main-stage" data-section-number="'+f((o=(o=t.sectionNum||(e!=null?e.sectionNum:e))!=null?o:a,typeof o===u?o.call(e,{name:"sectionNum",hash:{},data:r}):o))+'">'+f((o=(o=t.sectionNum||(e!=null?e.sectionNum:e))!=null?o:a,typeof o===u?o.call(e,{name:"sectionNum",hash:{},data:r}):o))+"<!--\n             -->";return s=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(36,r,i),inverse:this.program(38,r,i),data:r}),s!=null&&(l+=s),l+='\n              </span>\n							<div class="tooltip-wrapper">\n								<p class="tooltip-content">\n',s=t["if"].call(e,e!=null?e.title:e,{name:"if",hash:{},fn:this.program(40,r,i),inverse:this.program(42,r,i),data:r}),s!=null&&(l+=s),l+"								</p>\n							</div>\n						</div>\n"},36:function(e,t,n,r){return"\n                "},38:function(e,t,n,r){return",<!--\n               -->"},40:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return"										"+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+"\n"},42:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"										"+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.info:s)!=null?s.untitledSection:s,e))+"\n"},44:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.pinNumber:i,{name:"if",hash:{},fn:this.program(45,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},45:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return"						"+o(s((i=e!=null?e.info:e)!=null?i.pinNumber:i,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a='<table class="audio-table content-table">\n	<thead>\n		<tr>\n			<td class="column-2 item-status-column">'+u(o((s=(s=e!=null?e.labels:e)!=null?s.headers:s)!=null?s.status:s,e))+'</td>\n			<td class="';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=e!=null?e.data:e)!=null?s.titleType:s,e))+'</td>\n			<td class="',s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(a+=s),a+='">'+u(o((s=e!=null?e.data:e)!=null?s.storyComponent:s,e))+"</td>\n		</tr>\n	</thead>\n	<tbody>\n",s=t.each.call(e,(s=e!=null?e.data:e)!=null?s.items:s,{name:"each",hash:{},fn:this.program(9,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a+"	</tbody>\n</table>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/Tags",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return'								<option value="'+s(i(e,e))+'">'+s(i(e,e))+"</option>\n"},3:function(e,t,n,r){var i;return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(4,r),inverse:this.program(6,r),data:r}),i!=null?i:""},4:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return s(i(e,e))},6:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return s(i(e,e))+", "},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u='<table class="content-table tags-table">\n	<thead>\n		<tr>\n			<td class="column-24">'+o(s((i=e!=null?e.labels:e)!=null?i.tags:i,e))+'</td>\n		</tr>\n	</thead>\n	<tbody>\n		<tr>\n			<td>\n				<div class="row to-end padding-trailer-half">\n					<div class="column-6 pre-1 post-1">\n						<h4 class="item-subtitle">'+o(s((i=e!=null?e.labels:e)!=null?i.collectionTags:i,e))+'</h4>\n						<select class="collection-tags">\n							<option selected value="">'+o(s((i=e!=null?e.labels:e)!=null?i.selectASubject:i,e))+"</option>\n";return i=t.each.call(e,e!=null?e.collectionList:e,{name:"each",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(u+=i),u+='						</select>\n					</div>\n					<div class="column-7 post-1">\n						<h4 class="item-subtitle">'+o(s((i=e!=null?e.labels:e)!=null?i.tags:i,e))+'</h4>\n						<div class="item-tags-list" contenteditable="true">',i=t.each.call(e,(i=e!=null?e.data:e)!=null?i.yourTags:i,{name:"each",hash:{},fn:this.program(3,r),inverse:this.noop,data:r}),i!=null&&(u+=i),u+'</div>\n						<span class="item-tags-hint">'+o(s((i=e!=null?e.labels:e)!=null?i.tagHint:i,e))+'</span>\n					</div>\n					<div class="column-7 post-1">\n						<div class="leader-1">\n							<p>'+o(s((i=e!=null?e.labels:e)!=null?i.tagTip:i,e))+'</p>\n						</div>\n						<div class="item-update-tags disabled btn leader-half server-button">'+o(s((i=e!=null?e.labels:e)!=null?i.save:i,e))+"</div>\n					</div>\n				</div>\n			</td>\n		</tr>\n	</tbody>\n</table>\n"},useData:!0})}),define("lib-build/hbars!my/content/tabs/Tabs",["Handlebars"],function(e){return e.template({1:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l='		<div class="content-tab media-tab left';return s=t["if"].call(e,e!=null?e.hasErrors:e,{name:"if",hash:{},fn:this.program(2,r,i),inverse:this.program(4,r,i),data:r}),s!=null&&(l+=s),l+='" data-media-type="'+f((o=(o=t.type||(e!=null?e.type:e))!=null?o:a,typeof o===u?o.call(e,{name:"type",hash:{},data:r}):o))+'" data-tab-type="'+f((o=(o=t.type||(e!=null?e.type:e))!=null?o:a,typeof o===u?o.call(e,{name:"type",hash:{},data:r}):o))+'">\n			<h3 class="item-subtitle content-tab-title">'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:a,typeof o===u?o.call(e,{name:"title",hash:{},data:r}):o))+"</h3>\n",s=t["if"].call(e,i[1]!=null?i[1].showLoading:i[1],{name:"if",hash:{},fn:this.program(10,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),l+"		</div>\n"},2:function(e,t,n,r){return" icon-stories-error tab-error"},4:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.hasWarnings:e,{name:"if",hash:{},fn:this.program(5,r),inverse:this.program(7,r),data:r}),i!=null?i:""},5:function(e,t,n,r){return" icon-stories-warning tab-warning"},7:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.hasModerateWarning:e,{name:"if",hash:{},fn:this.program(8,r),inverse:this.noop,data:r}),i!=null?i:""},8:function(e,t,n,r){return" icon-stories-warning tab-moderate-warning"},10:function(e,t,n,r){return'				<div class="loader">\n					 <span class="side side-left"><span class="fill"></span></span>\n					 <span class="side side-right"><span class="fill"></span></span>\n				</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a='<div class="content-tabs toggle media-tabs">\n';return s=t.each.call(e,e!=null?e.tabs:e,{name:"each",hash:{},fn:this.program(1,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a+'		<div class="content-tab media-tab right" data-tab-type="tags">\n			<h3 class="item-subtitle content-tab-title">'+u(o((s=e!=null?e.labels:e)!=null?s.tags:s,e))+'</h3>\n		</div>\n</div>\n<div class="sharing-alert-container column-12">\n	<div class="alert sharing-alert">\n		<h4 class="sharing-alert-text"></h4>\n	</div>\n</div>\n'},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/Error",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing;return'	<h1 class="header-light error-header">'+u(o((i=e!=null?e.labels:e)!=null?i.consolationNoStories:i,e))+'</h1>\n	<div class="tooltip above">\n		<div class="btn modal-show create-story-disabled" id="create-story-no-stories-btn" data-modal="create-story">'+u(o((i=e!=null?e.labels:e)!=null?i.createFirstStory:i,e))+'</div>\n		<div class="tooltip-wrapper create-disabled-tooltip">\n			<span class="tooltip-content">'+u((s=(s=t.disabledTooltip||(e!=null?e.disabledTooltip:e))!=null?s:f,typeof s===a?s.call(e,{name:"disabledTooltip",hash:{},data:r}):s))+"</span>\n		</div>\n	</div>\n"},3:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.error:e)!=null?i.noSearchResults:i,{name:"if",hash:{},fn:this.program(4,r),inverse:this.program(6,r),data:r}),i!=null&&(s+=i),s},4:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'		<h2 class="header-light error-header">'+u((i=(i=t.consolationSearch||(e!=null?e.consolationSearch:e))!=null?i:o,typeof i===s?i.call(e,{name:"consolationSearch",hash:{},data:r}):i))+"</h2>\n"},6:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.error:e)!=null?i.inaccessible:i,{name:"if",hash:{},fn:this.program(7,r),inverse:this.program(9,r),data:r}),i!=null&&(s+=i),s},7:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return"			<h3>"+o(s((i=e!=null?e.labels:e)!=null?i.cantShowStories:i,e))+"</h3>\n"},9:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.error:e)!=null?i.incompatibleBrowser:i,{name:"if",hash:{},fn:this.program(10,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},10:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'				<h2 class="header-light error-header">'+u((i=(i=t.incompatibleBrowser||(e!=null?e.incompatibleBrowser:e))!=null?i:o,typeof i===s?i.call(e,{name:"incompatibleBrowser",hash:{},data:r}):i))+"</h2>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.error:e)!=null?i.noStories:i,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(s+=i),s},useData:!0})}),define("lib-build/hbars!my/content/scanning/IssueStatusPane",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return" error"},3:function(e,t,n,r){return" warning"},5:function(e,t,n,r){return""},7:function(e,t,n,r){return" no-show"},9:function(e,t,n,r,i){var s,o=t.helperMissing,u="";return s=(t.ifGreaterThan||e&&e.ifGreaterThan||o).call(e,(s=e!=null?e.items:e)!=null?s.length:s,0,{name:"ifGreaterThan",hash:{},fn:this.program(10,r,i),inverse:this.noop,data:r}),s!=null&&(u+=s),u},10:function(e,t,n,r,i){var s,o,u=t.helperMissing,a="function",f=this.escapeExpression,l='				<div class="notification-issue';return s=(t.ifEquals||e&&e.ifEquals||u).call(e,e!=null?e.severity:e,"error",{name:"ifEquals",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(l+=s),l+='" data-issue-type="'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:u,typeof o===a?o.call(e,{name:"title",hash:{},data:r}):o))+'" data-media-type="'+f((o=(o=t.media||(e!=null?e.media:e))!=null?o:u,typeof o===a?o.call(e,{name:"media",hash:{},data:r}):o))+'">\n					<div class="notification-explanation">\n						<div>\n							<p class="notification-text">'+f((o=(o=t.text||(e!=null?e.text:e))!=null?o:u,typeof o===a?o.call(e,{name:"text",hash:{},data:r}):o))+'</p><!--\n					 --><div class="notification-arrow icon-right-arrow"></div>\n						</div>\n						<p class="notification-subtext',s=(t.ifGreaterThan||e&&e.ifGreaterThan||u).call(e,(s=e!=null?e.actions:e)!=null?s.length:s,0,{name:"ifGreaterThan",hash:{},fn:this.program(11,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),l+=' leader-half trailer-half">',s=(o=(o=t.subtext||(e!=null?e.subtext:e))!=null?o:u,typeof o===a?o.call(e,{name:"subtext",hash:{},data:r}):o),s!=null&&(l+=s),l+="</p>\n					</div>\n",s=(t.ifGreaterThan||e&&e.ifGreaterThan||u).call(e,(s=e!=null?e.actions:e)!=null?s.length:s,0,{name:"ifGreaterThan",hash:{},fn:this.program(13,r,i),inverse:this.noop,data:r}),s!=null&&(l+=s),l+"				</div>\n"},11:function(e,t,n,r){return" actions"},13:function(e,t,n,r,i){var s,o='						<div class="issue-actions">\n';return s=t.each.call(e,e!=null?e.actions:e,{name:"each",hash:{},fn:this.program(14,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o+"						</div>\n"},14:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.isLink:e,{name:"if",hash:{},fn:this.program(15,r,i),inverse:this.program(24,r,i),data:r}),s!=null&&(o+=s),o},15:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='									<a href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" class=" issue-action btn small';return s=t["if"].call(e,e!=null?e.positive:e,{name:"if",hash:{},fn:this.program(16,r,i),inverse:this.program(18,r,i),data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.modalName:e,{name:"if",hash:{},fn:this.program(20,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-issue-type="'+f(l(i[2]!=null?i[2].title:i[2],e))+'" data-action="'+f((o=(o=t.action||(e!=null?e.action:e))!=null?o:a,typeof o===u?o.call(e,{name:"action",hash:{},data:r}):o))+'"',s=t["if"].call(e,e!=null?e.modalName:e,{name:"if",hash:{},fn:this.program(22,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+' target="_blank">'+f((o=(o=t.text||(e!=null?e.text:e))!=null?o:a,typeof o===u?o.call(e,{name:"text",hash:{},data:r}):o))+"</a>\n"},16:function(e,t,n,r){return" ok positive"},18:function(e,t,n,r){return" issue negative"},20:function(e,t,n,r){return" modal-show"},22:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return' data-modal="'+u((i=(i=t.modalName||(e!=null?e.modalName:e))!=null?i:o,typeof i===s?i.call(e,{name:"modalName",hash:{},data:r}):i))+'"'},24:function(e,t,n,r,i){var s,o,u=this.lambda,a=this.escapeExpression,f="function",l=t.helperMissing,c='									<button class="issue-action btn server-button small';return s=t["if"].call(e,e!=null?e.positive:e,{name:"if",hash:{},fn:this.program(16,r,i),inverse:this.program(18,r,i),data:r}),s!=null&&(c+=s),s=t["if"].call(e,e!=null?e.modalName:e,{name:"if",hash:{},fn:this.program(20,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-issue-type="'+a(u(i[2]!=null?i[2].title:i[2],e))+'" data-action="'+a((o=(o=t.action||(e!=null?e.action:e))!=null?o:l,typeof o===f?o.call(e,{name:"action",hash:{},data:r}):o))+'"',s=t["if"].call(e,e!=null?e.modalName:e,{name:"if",hash:{},fn:this.program(22,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+">"+a((o=(o=t.text||(e!=null?e.text:e))!=null?o:l,typeof o===f?o.call(e,{name:"text",hash:{},data:r}):o))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o,u=this.lambda,a=this.escapeExpression,f="function",l=t.helperMissing,c='<div class="notification-pane';return s=t["if"].call(e,e!=null?e.hasErrors:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(c+=s),c+='">\n	<div class="notification-title">\n		<h5 class="item-subtitle">'+a(u((s=e!=null?e.labels:e)!=null?s.foundSomeIssues:s,e))+'</h5><!--\n	 --><div class="refresh-tooltip-container tooltip above">\n			<div class="refresh icon-refresh server-button"></div>\n			<div class="tooltip-wrapper">\n				<span class="tooltip-content">'+a(u((s=e!=null?e.labels:e)!=null?s.refreshExplanation:s,e))+'</span>\n			</div>\n		</div>\n	</div>\n	<div class="notification-list">\n		<div class="ignore-all-button btn transparent',s=t["if"].call(e,e!=null?e.showIgnore:e,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(c+=s),c+='">'+a((o=(o=t.ignore||(e!=null?e.ignore:e))!=null?o:l,typeof o===f?o.call(e,{name:"ignore",hash:{},data:r}):o))+"</div>\n",s=t.each.call(e,e!=null?e.issues:e,{name:"each",hash:{},fn:this.program(9,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+"	</div>\n</div>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/scanning/SuccessStatusPane",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'<div class="notification-pane success">\n	<div class="notification-title">		\n		<h5 class="item-subtitle">'+o(s((i=e!=null?e.labels:e)!=null?i.noIssuesFound:i,e))+'</h5><!--\n	 --><div class="refresh-tooltip-container tooltip above">\n			<div class="refresh icon-refresh server-button"></div>\n			<div class="tooltip-wrapper">\n				<span class="tooltip-content">'+o(s((i=e!=null?e.labels:e)!=null?i.refreshExplanation:i,e))+"</span>\n			</div>\n		</div>\n	</div>\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/scanning/ErrorNotification",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'<div class="error-notification-pane">\r\n	<div class="error-notification-title">\r\n		<p class="notification-text">'+o(s((i=e!=null?e.data:e)!=null?i.text:i,e))+"</p>\r\n	</div>	\r\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/scanning/SuccessNotification",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div class="success-notification">\r\n	<div class="success-notification-inner-box">\r\n		<p class="notification-text">'+u((i=(i=t.label||(e!=null?e.label:e))!=null?i:o,typeof i===s?i.call(e,{name:"label",hash:{},data:r}):i))+"</p>	\r\n	</div>	\r\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/dialogs/ImagePicker",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing;return'<div id="modal-image-picker" class="modal image-picker" data-modal="image-picker">	\n	<div id="image-cropper">\n\n		<div id="choose-panel">\n			<div class="dialog-header picker">\n				<div>\n					<span class="dialog-header-icon icon-stories-portrait"></span>\n					<h3 class="dialog-title">'+u(o((i=e!=null?e.labels:e)!=null?i.chooseAnImage:i,e))+'</h3>\n				</div>\n				<div class="close-dialog picker modal-dismiss icon-close"></div>\n			</div>\n			<div class="dialog-body leader-1">\n				<div class="image-carousel">\n					<div class="carousel-page-status">\n						<span id="current-carousel-image"></span><span>/</span><span id="total-carousel-images"></span>\n					</div>\n					<div id="image-previous" class="image-arrow carousel-arrow icon-stories-arrow-left"></div>					\n					<div id="carousel-image-container">\n						<div id="carousel-image-and-text">\n							<img id="carousel-image" src="//placehold.it/1200x700"/>\n							<div id="carousel-image-loading">\n								<h2 class="picker-image-loading-text">'+u((s=(s=t.loading||(e!=null?e.loading:e))!=null?s:f,typeof s===a?s.call(e,{name:"loading",hash:{},data:r}):s))+'</h2>\n							</div>\n						</div>						\n						<div id="loading-prompt" class="picker-prompt">\n							<div class="picker-prompt-text-container">\n								<h3 class="picker-prompt-text">'+u(o((i=e!=null?e.labels:e)!=null?i.imagesLoading:i,e))+'</h3>\n							</div>					\n						</div>\n						<div id="empty-prompt" class="picker-prompt">\n							<div class="picker-prompt-text-container">\n								<h3 class="picker-prompt-text">'+u(o((i=e!=null?e.labels:e)!=null?i.noImages:i,e))+'</h3>\n								<h5 class="picker-prompt-subtext">'+u(o((i=e!=null?e.labels:e)!=null?i.clickBelowTip:i,e))+'</h5>\n							</div>\n						</div>\n						<div id="error-prompt" class="picker-prompt">\n							<div class="picker-prompt-text-container">\n								<h3 class="picker-prompt-text">'+u(o((i=e!=null?e.labels:e)!=null?i.errorLoading:i,e))+'</h3>\n								<h5 class="picker-prompt-subtext">'+u(o((i=e!=null?e.labels:e)!=null?i.clickBelowTip:i,e))+'</h5>\n							</div>\n						</div>\n						<div id="no-image-prompt" class="picker-prompt">\n							<div class="picker-prompt-text-container">\n								<h3 class="picker-prompt-text">'+u((s=(s=t.noImage||(e!=null?e.noImage:e))!=null?s:f,typeof s===a?s.call(e,{name:"noImage",hash:{},data:r}):s))+'</h3>\n							</div>\n						</div>\n					</div>			\n					<div id="image-next" class="image-arrow carousel-arrow icon-stories-arrow-right"></div>\n					<h5 class="invalid-dimensions choose item-subtitle">'+u(o((i=e!=null?e.labels:e)!=null?i.minimumDimensions:i,e))+'</h5>\n					<h5 class="accepted-file-types choose item-subtitle">'+u(o((i=e!=null?e.labels:e)!=null?i.supportedFileTypes:i,e))+'</h5>\n				</div>\n				<div id="or-upload">\n					<h4 class="or leader-half trailer-half">'+u(o((i=e!=null?e.labels:e)!=null?i.or:i,e))+'</h4>\n					<button id="upload-image" class="btn picker-action">'+u(o((i=e!=null?e.labels:e)!=null?i.uploadAnImage:i,e))+'</button>\n				</div>\n				<div id="picker-not-supported" class="incompatible-browser-message">\n					<h3 id="not-supported-picker-text" class="header-light error-header"></h3>\n				</div>				\n			</div>\n			<div class="modal-footer picker">\n				<div class="btn save-image picker disabled">'+u(o((i=e!=null?e.labels:e)!=null?i.save:i,e))+'</div>\n			</div>			\n		</div>\n		<div id="upload-panel">\n			<div class="dialog-header picker">\n				<div>\n					<span class="dialog-header-icon icon-stories-positive"></span>\n					<h3 class="dialog-title">'+u(o((i=e!=null?e.labels:e)!=null?i.uploadAnImage:i,e))+'</h3>\n				</div>\n				<div class="close-dialog picker modal-dismiss icon-close"></div>		\n			</div>\n			<div class="dialog-body leader-1">\n				<div id="drag-drop-zone" class="cropit-drag-zone">\n					<div id="drag-drop-inside">\n						<h2 id="drag-drop-text" class="drag-drop-main-text">'+u(o((i=e!=null?e.labels:e)!=null?i.dragAndDrop:i,e))+'</h2>\n						<h2 class="drag-drop-or drag-drop-main-text">'+u(o((i=e!=null?e.labels:e)!=null?i.or:i,e))+'</h2>\n						<form id="image-picker-image-form">\n							<input type="file" accept="image/jpeg, image/png, image/gif" class="cropit-image-input" />\n						</form>\n						<button id="choose-image" class="btn select-image-btn picker-action leader-half trailer-half">'+u(o((i=e!=null?e.labels:e)!=null?i.chooseAnImage:i,e))+'</button>\n						<span class="supporting-text drag-drop accepted-file-types upload">'+u(o((i=e!=null?e.labels:e)!=null?i.supportedFileTypes:i,e))+'</span>\n						<span class="supporting-text drag-drop minimum-dimensions upload">'+u(o((i=e!=null?e.labels:e)!=null?i.minimumDimensions:i,e))+'</span>\n					</div>\n					<div id="drag-drop-loading">\n						<h2 class="picker-image-loading-text">'+u((s=(s=t.loading||(e!=null?e.loading:e))!=null?s:f,typeof s===a?s.call(e,{name:"loading",hash:{},data:r}):s))+'</h2>\n					</div>			\n				</div>			\n			</div>\n			<div class="modal-footer picker">\n				<div class="btn transparent back upload picker">'+u(o((i=e!=null?e.dialogLabels:e)!=null?i.back:i,e))+'</div>\n				<div class="btn save-image picker disabled">'+u(o((i=e!=null?e.labels:e)!=null?i.save:i,e))+'</div>\n			</div>\n		</div>\n		<div id="crop-panel">\n			<div class="dialog-header picker">\n				<div>\n					<span class="dialog-header-icon icon-stories-portrait"></span>\n					<h3 class="dialog-title crop">'+u(o((i=e!=null?e.labels:e)!=null?i.cropImage:i,e))+'</h3>\n				</div>\n				<div class="close-dialog picker modal-dismiss icon-close"></div>\n			</div>\n			<div class="dialog-body crop leader-1 cropping">\n				<div class="cropit-image-preview-container">\n			    	<div class="cropit-image-preview"></div>\n				</div>				\n				<div id="range-container">\n					<div class="icon-stories-portrait range-icon small"></div>\n					<input type="range" id="image-zoom-slider" class="cropit-image-zoom-input"/>\n					<div class="icon-stories-portrait range-icon large"></div>\n				</div>\n				<img id="uncropped-image" src=""/>\n				<div id="no-crop-warning" class="leader-half">\n					<span id="no-crop-text" class="save-mode-text"></span>\n				</div>				\n			</div>\n			<div class="dialog-body crop leader-1 saving">\n				<div>\n					<h3 class="dialog-title saving">'+u(o((i=e!=null?e.labels:e)!=null?i.savingImage:i,e))+'</h3>\n				</div>\n			</div>\n			<div class="dialog-body crop leader-1 saved">\n				<div>\n					<div class="icon-stories-check-inverted check saved"></div>\n					<h3 class="dialog-title saved">'+u(o((i=e!=null?e.labels:e)!=null?i.saved:i,e))+'</h3>\n				</div>\n			</div>\n			<div class="dialog-body crop leader-1 error">\n				<div>\n					<h3 class="dialog-title error">'+u(o((i=e!=null?e.labels:e)!=null?i.errorSaving:i,e))+'</h3>\n				</div>\n			</div>\n			<div class="modal-footer picker">\n				<div class="btn transparent back crop picker">'+u(o((i=e!=null?e.dialogLabels:e)!=null?i.back:i,e))+'</div>\n				<div class="btn save-image picker">'+u(o((i=e!=null?e.labels:e)!=null?i.save:i,e))+"</div>\n			</div>\n		</div>\n	</div>		\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/WhereAreStories",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div id="find-more-row" class="">\n	<button id="find-more-button" class="btn clear modal-show clear-inverse" data-modal="find-more-modal">'+u((i=(i=t.whereAreStories||(e!=null?e.whereAreStories:e))!=null?i:o,typeof i===s?i.call(e,{name:"whereAreStories",hash:{},data:r}):i))+"</btn>\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/dialogs/FindMoreDialog",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing,l='<div class="modal find-modal" data-modal="find-more-modal">\n	<div id="find-header" class="dialog-header padding-leader-1 padding-trailer-1">\n		<span class="dialog-header-icon"></span>\n		<h3 class="dialog-title">'+u(o((i=e!=null?e.labels:e)!=null?i.whereAreStories:i,e))+'</h3>\n	</div>	\n	<div id="find-body" class="dialog-body">\n		<div id="find-body-wrapper" class="leader-1 trailer-2">\n			<div class="trailer-1">\n				<p class="main-text">';return i=(s=(s=t.notSeeExplanation||(e!=null?e.notSeeExplanation:e))!=null?s:f,typeof s===a?s.call(e,{name:"notSeeExplanation",hash:{},data:r}):s),i!=null&&(l+=i),l+'</p>\n			</div>\n		</div>\n		<div class="dynamic-container trailer">\n			<div id="find-searching-stories" class="dynamic-component active">\n				<div id="find-loader-title"></div>\n			</div>\n			<div id="find-all-good" class="dynamic-component">\n				<h3 class="single-text">'+u(o((i=e!=null?e.labels:e)!=null?i.allUpToDate:i,e))+'</h3>\n			</div>\n			<div id="find-error-searching" class="dynamic-component">\n				<h3 class="single-text">'+u(o((i=e!=null?e.labels:e)!=null?i.errorScanningForStories:i,e))+'</h3>\n			</div>\n			<div id="find-update-summary" class="dynamic-component">\n				<p class="main-text">'+u(o((i=e!=null?e.labels:e)!=null?i.followingStoriesToUpdate:i,e))+'</p>\n				<div id="find-update-table"></div>\n			</div>			\n			<div id="find-update-progress" class="dynamic-component">\n				<div id="find-update-progress-bar-container"></div>\n			</div>\n			<div id="find-update-complete" class="dynamic-component">\n				<div id="update-complete-icon" class="icon-stories-check-inverted"></div>\n				<h3 class="single-text">'+u(o((i=e!=null?e.labels:e)!=null?i.updateSucceeded:i,e))+" "+u(o((i=e!=null?e.labels:e)!=null?i.reloadingStories:i,e))+'</h3>\n			</div>\n			<div id="find-error-updating" class="dynamic-component">\n				<h3 class="single-text">'+u(o((i=e!=null?e.labels:e)!=null?i.errorUpdatingStories:i,e))+'</h3>\n			</div>\n		</div>			\n	</div>\n	<div class="modal-footer">\n		<button id="close-find" class="btn transparent modal-dismiss close-dialog modal-bottom-button">'+u(o((i=e!=null?e.dialogLabels:e)!=null?i.close:i,e))+'</button>\n		<button id="update-all" class="btn modal-bottom-button inactive">'+u(o((i=e!=null?e.labels:e)!=null?i.updateAll:i,e))+"</button>\n	</div>	\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/dialogs/UpdateTable",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'		<tr class="media-row">							\n			<td class="media-title image column-12">\n				<a href="'+u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))+'" class="media-link" target="_blank" title="'+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+'">'+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+'</a>\n			</td>\n			<td class="column-6">\n				'+u((i=(i=t.type||(e!=null?e.type:e))!=null?i:o,typeof i===s?i.call(e,{name:"type",hash:{},data:r}):i))+'\n			</td>\n			<td class="sections column-6">\n				'+u((i=(i=t.modifiedLocalizedDate||(e!=null?e.modifiedLocalizedDate:e))!=null?i:o,typeof i===s?i.call(e,{name:"modifiedLocalizedDate",hash:{},data:r}):i))+"\n			</td>\n		</tr>				\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u='<table class="update-table content-table scrollable-table">\n	<thead>\n		<tr>\n			<td class="column-12">'+o(s((i=e!=null?e.labels:e)!=null?i.title:i,e))+'</td>\n			<td class="column-6">'+o(s((i=e!=null?e.labels:e)!=null?i.typeOfStoryMap:i,e))+'</td>\n			<td class="column-6">'+o(s((i=e!=null?e.labels:e)!=null?i.lastModified:i,e))+'</td>\n		</tr>\n	</thead>\n	<tbody class="custom-scrollbar">\n';return i=t.each.call(e,e!=null?e.items:e,{name:"each",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(u+=i),u+"	</tbody>\n</table>"},useData:!0})}),define("lib-build/hbars!my/content/ProgressBar",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div class="centered progress-box">\n	<h2 class="progress-title">'+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+'</h2>\n	<div class="centered progress-inner-box">\n		<div data-dojo-type="dijit/ProgressBar" data-dojo-id="'+u((i=(i=t.dojoId||(e!=null?e.dojoId:e))!=null?i:o,typeof i===s?i.call(e,{name:"dojoId",hash:{},data:r}):i))+'" id="'+u((i=(i=t.id||(e!=null?e.id:e))!=null?i:o,typeof i===s?i.call(e,{name:"id",hash:{},data:r}):i))+'"></div><!--\n	 --><h3 class="progress-details">'+u((i=(i=t.progressString||(e!=null?e.progressString:e))!=null?i:o,typeof i===s?i.call(e,{name:"progressString",hash:{},data:r}):i))+'</h3>\n		<button id="'+u((i=(i=t.stopId||(e!=null?e.stopId:e))!=null?i:o,typeof i===s?i.call(e,{name:"stopId",hash:{},data:r}):i))+'" class="btn clear small clear-inverse">'+u((i=(i=t.stop||(e!=null?e.stop:e))!=null?i:o,typeof i===s?i.call(e,{name:"stop",hash:{},data:r}):i))+"</button>\n	</div>			\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/NewStoriesFound",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return" disabled"},3:function(e,t,n,r){return""},5:function(e,t,n,r){return" no-show"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u='<div id="new-stories-wrapper">\n  <div id="new-stories-inner">\n    <h2 class="progress-title">'+o(s((i=e!=null?e.strings:e)!=null?i.newStoriesFound:i,e))+'</h2>\n    <div id="new-stories-tooltip-button-wrapper" class="tooltip above">\n      <div class="btn';return i=t["if"].call(e,e!=null?e.scanAllInProgress:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(u+=i),u+='" id="show-new-stories">'+o(s((i=e!=null?e.strings:e)!=null?i.includeStories:i,e))+'</div>\n      <div class="tooltip-wrapper',i=t["if"].call(e,e!=null?e.scanAllInProgress:e,{name:"if",hash:{},fn:this.program(3,r),inverse:this.program(5,r),data:r}),i!=null&&(u+=i),u+'">\n        <span class="tooltip-content">'+o(s((i=e!=null?e.strings:e)!=null?i.notWhileScanning:i,e))+"</span>\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!my/content/scanning/CheckingStatusPane",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div class="notification-pane checking">\n	<div class="notification-title">\n		<h5 class="item-subtitle">'+u((i=(i=t.checkingLabel||(e!=null?e.checkingLabel:e))!=null?i:o,typeof i===s?i.call(e,{name:"checkingLabel",hash:{},data:r}):i))+'</h5><!--\n	 --><div class="refresh-tooltip-container tooltip above">\n			<div class="refresh icon-refresh server-button spin disabled"></div>\n			<div class="tooltip-wrapper">\n				<span class="tooltip-content">'+u((i=(i=t.checkingLabel||(e!=null?e.checkingLabel:e))!=null?i:o,typeof i===s?i.call(e,{name:"checkingLabel",hash:{},data:r}):i))+"</span>\n			</div>\n		</div>\n	</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!my/content/tabs/images/titleTemplate",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return"column-10"},3:function(e,t,n,r){return"column-14"},5:function(e,t,n,r){var i,s=t.helperMissing,o="    <a ";return i=(t.ifEquals||e&&e.ifEquals||s).call(e,e!=null?e.url:e,"",{name:"ifEquals",hash:{},fn:this.program(6,r),inverse:this.program(8,r),data:r}),i!=null&&(o+=i),o+=' class="media-link" target="_blank">',i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.title:i,{name:"if",hash:{},fn:this.program(10,r),inverse:this.program(12,r),data:r}),i!=null&&(o+=i),o+"</a>\n"},6:function(e,t,n,r){return""},8:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'href="'+u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))+'"'},10:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.info:e)!=null?i.title:i,e))},12:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.errors:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(13,r),inverse:this.program(15,r),data:r}),i!=null?i:""},13:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))},15:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(13,r),inverse:this.program(16,r),data:r}),i!=null?i:""},16:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.displayUrl||(e!=null?e.displayUrl:e))!=null?i:o,typeof i===s?i.call(e,{name:"displayUrl",hash:{},data:r}):i))},18:function(e,t,n,r){var i,s='    <span class="media-link">';return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.title:i,{name:"if",hash:{},fn:this.program(10,r),inverse:this.program(12,r),data:r}),i!=null&&(s+=i),s+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s='<td class="media-title image ';return i=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(s+=i),s+='">\n',i=t["if"].call(e,e!=null?e.isLink:e,{name:"if",hash:{},fn:this.program(5,r),inverse:this.program(18,r),data:r}),i!=null&&(s+=i),s+"</td>\n"},useData:!0})}),define("lib-build/hbars!my/content/tabs/images/sourceTemplate",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Facebook",{name:"ifEquals",hash:{},fn:this.program(2,r),inverse:this.program(4,r),data:r}),i!=null?i:""},2:function(e,t,n,r){return' href="http://www.facebook.com/photos"'},4:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Flickr",{name:"ifEquals",hash:{},fn:this.program(5,r),inverse:this.program(7,r),data:r}),i!=null?i:""},5:function(e,t,n,r){return' href="http://www.flickr.com"'},7:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"GooglePlus",{name:"ifEquals",hash:{},fn:this.program(8,r),inverse:this.program(10,r),data:r}),i!=null?i:""},8:function(e,t,n,r){return' href="https://picasaweb.google.com/lh/myphotos"'},10:function(e,t,n,r){var i,s=t.helperMissing,o=" ";return i=(t.ifEquals||e&&e.ifEquals||s).call(e,e!=null?e.url:e,"",{name:"ifEquals",hash:{},fn:this.program(11,r),inverse:this.program(13,r),data:r}),i!=null&&(o+=i),o},11:function(e,t,n,r){return""},13:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'href="'+u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))+'"'},15:function(e,t,n,r){return" above"},17:function(e,t,n,r){return" after"},19:function(e,t,n,r){return" icon-facebook"},21:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Flickr",{name:"ifEquals",hash:{},fn:this.program(22,r),inverse:this.program(24,r),data:r}),i!=null?i:""},22:function(e,t,n,r){return" icon-stories-flickr"},24:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"GooglePlus",{name:"ifEquals",hash:{},fn:this.program(25,r),inverse:this.program(27,r),data:r}),i!=null?i:""},25:function(e,t,n,r){return" icon-google-plus"},27:function(e,t,n,r){return" icon-link tall-icon"},29:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.engStrings:e)!=null?i.facebook:i,e))},31:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.engStrings:e)!=null?i.flickr:i,e))},33:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.engStrings:e)!=null?i.googlePlus:i,e))},35:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.engStrings:e)!=null?i.url:i,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=t.helperMissing,o='<td class="source column-4">\n  <a';return i=t["if"].call(e,e!=null?e.isLink:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(o+=i),o+=' class="tooltip',i=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(15,r),inverse:this.program(17,r),data:r}),i!=null&&(o+=i),o+=" sharing-status media image",i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Facebook",{name:"ifEquals",hash:{},fn:this.program(19,r),inverse:this.program(21,r),data:r}),i!=null&&(o+=i),o+='" target="_blank">\n    <div class="tooltip-wrapper">\n      <div class="tooltip-content">\n        <span>',i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Facebook",{name:"ifEquals",hash:{},fn:this.program(29,r),inverse:this.noop,data:r}),i!=null&&(o+=i),i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Flickr",{name:"ifEquals",hash:{},fn:this.program(31,r),inverse:this.noop,data:r}),i!=null&&(o+=i),i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"GooglePlus",{name:"ifEquals",hash:{},fn:this.program(33,r),inverse:this.noop,data:r}),i!=null&&(o+=i),i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.info:e)!=null?i.source:i,"Url",{name:"ifEquals",hash:{},fn:this.program(35,r),inverse:this.noop,data:r}),i!=null&&(o+=i),o+"</span>\n      </div>\n    </div>\n  </a>\n</td>\n"},useData:!0})}),define("lib-build/hbars!my/content/tabs/images/statusTemplate",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return" above"},3:function(e,t,n,r){return" after"},5:function(e,t,n,r){return" icon-stories-error issue"},7:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(8,r),inverse:this.program(10,r),data:r}),i!=null?i:""},8:function(e,t,n,r){return" icon-stories-warning warning"},10:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.hasModerateWarning:e,{name:"if",hash:{},fn:this.program(8,r),inverse:this.program(11,r),data:r}),i!=null?i:""},11:function(e,t,n,r){return" icon-stories-check ok"},13:function(e,t,n,r){return""},15:function(e,t,n,r){var i;return i=t["if"].call(e,(i=e!=null?e.warnings:e)!=null?i.length:i,{name:"if",hash:{},fn:this.program(13,r),inverse:this.program(16,r),data:r}),i!=null?i:""},16:function(e,t,n,r){var i;return i=t["if"].call(e,e!=null?e.hasModerateWarning:e,{name:"if",hash:{},fn:this.program(13,r),inverse:this.program(17,r),data:r}),i!=null?i:""},17:function(e,t,n,r){return" no-show"},19:function(e,t,n,r,i){var s=this.lambda,o=this.escapeExpression;return"          "+o(s(i[1]!=null?i[1].emptyShortlistText:i[1],e))+"\n"},21:function(e,t,n,r){var i,s="";return i=t.each.call(e,e!=null?e.errors:e,{name:"each",hash:{},fn:this.program(22,r),inverse:this.noop,data:r}),i!=null&&(s+=i),i=t.each.call(e,e!=null?e.warnings:e,{name:"each",hash:{},fn:this.program(22,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},22:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u="            <span>"+o(s(e!=null?e.text:e,e));return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(13,r),inverse:this.program(13,r),data:r}),i!=null&&(u+=i),u+"</span><br>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o='<td class="column-2 item-status-column">\n  <div class="tooltip';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(o+=s),o+='">\n    <div class="media-item-status',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.program(7,r,i),data:r}),s!=null&&(o+=s),o+='"></div>\n    <div class="tooltip-wrapper',s=t["if"].call(e,(s=e!=null?e.errors:e)!=null?s.length:s,{name:"if",hash:{},fn:this.program(13,r,i),inverse:this.program(15,r,i),data:r}),s!=null&&(o+=s),o+='">\n      <div class="tooltip-content">\n',s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.emptyShortlistImage:s,{name:"if",hash:{},fn:this.program(19,r,i),inverse:this.program(21,r,i),data:r}),s!=null&&(o+=s),o+"      </div>\n    </div>\n  </div>\n</td>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/images/sectionsTemplate",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return"column-8"},3:function(e,t,n,r){return"column-4"},5:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return'    <div class="section-number logo">\n      <span>'+u(o((s=(s=i[1]!=null?i[1].labels:i[1])!=null?s.info:s)!=null?s.logo:s,e))+"</span>\n    </div>\n"},7:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.sections:e,{name:"if",hash:{},fn:this.program(8,r,i),inverse:this.program(44,r,i),data:r}),s!=null&&(o+=s),o},8:function(e,t,n,r,i){var s,o="";return s=t.each.call(e,e!=null?e.sections:e,{name:"each",hash:{},fn:this.program(9,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},9:function(e,t,n,r,i){var s,o='        <div class="tooltip section-number before section">\n';return s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(10,r,i),inverse:this.program(15,r,i),data:r}),s!=null&&(o+=s),o+='          <div class="tooltip-wrapper">\n            <p class="tooltip-content">\n',s=t["if"].call(e,e!=null?e.title:e,{name:"if",hash:{},fn:this.program(32,r,i),inverse:this.program(34,r,i),data:r}),s!=null&&(o+=s),s=t["if"].call(e,e!=null?e.mainContent:e,{name:"if",hash:{},fn:this.program(36,r,i),inverse:this.program(38,r,i),data:r}),s!=null&&(o+=s),o+"            </p>\n          </div>\n        </div>\n"},10:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='            <span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n             -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(11,r),inverse:this.program(13,r),data:r}),i!=null&&(f+=i),f+"\n              </span>\n"},11:function(e,t,n,r){return"\n              "},13:function(e,t,n,r){return",<!--\n             -->"},15:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(16,r),inverse:this.program(21,r),data:r}),i!=null&&(s+=i),s},16:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='              <span class="section-action-container">\n                <span class="section-link" data-type="description" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n              -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(17,r),inverse:this.program(19,r),data:r}),i!=null&&(f+=i),f},17:function(e,t,n,r){return"\n                  </span>\n                "},19:function(e,t,n,r){return"<!--\n                -->,</span>\n"},21:function(e,t,n,r){var i,s="";return i=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(22,r),inverse:this.program(27,r),data:r}),i!=null&&(s+=i),s},22:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='                <span class="section-action-container">\n                  <span class="section-link" data-type="main-stage-action" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'" data-action-id="'+a((s=(s=t.actionId||(e!=null?e.actionId:e))!=null?s:u,typeof s===o?s.call(e,{name:"actionId",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"*</span><!--\n                -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(23,r),inverse:this.program(25,r),data:r}),i!=null&&(f+=i),f},23:function(e,t,n,r){return"\n                    </span>\n                  "},25:function(e,t,n,r){return"<!--\n                  -->,</span>\n"},27:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='                <span class="section-link" data-type="main-stage" data-section-number="'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+'">'+a((s=(s=t.sectionNum||(e!=null?e.sectionNum:e))!=null?s:u,typeof s===o?s.call(e,{name:"sectionNum",hash:{},data:r}):s))+"<!--\n               -->";return i=t["if"].call(e,r&&r.last,{name:"if",hash:{},fn:this.program(28,r),inverse:this.program(30,r),data:r}),i!=null&&(f+=i),f+"\n                </span>\n"},28:function(e,t,n,r){return"\n                "},30:function(e,t,n,r){return",<!--\n               -->"},32:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return"                "+u((i=(i=t.title||(e!=null?e.title:e))!=null?i:o,typeof i===s?i.call(e,{name:"title",hash:{},data:r}):i))+"\n"},34:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"                "+u(o((s=(s=i[4]!=null?i[4].labels:i[4])!=null?s.info:s)!=null?s.untitledSection:s,e))+"\n"},36:function(e,t,n,r){return""},38:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.sideContent:e,{name:"if",hash:{},fn:this.program(39,r,i),inverse:this.program(42,r,i),data:r}),s!=null&&(o+=s),o},39:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression,a="                  ("+u(o((s=(s=i[5]!=null?i[5].labels:i[5])!=null?s.contentType:s)!=null?s.sidePanel:s,e))+")\n";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(a+=s),a},40:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return"                    ("+u(o((s=(s=i[6]!=null?i[6].labels:i[6])!=null?s.contentType:s)!=null?s.mainStage:s,e))+")\n"},42:function(e,t,n,r,i){var s,o="";return s=t["if"].call(e,e!=null?e.numActions:e,{name:"if",hash:{},fn:this.program(40,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},44:function(e,t,n,r){var i,s="";return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.pinNumber:i,{name:"if",hash:{},fn:this.program(45,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},45:function(e,t,n,r){var i,s="";return i=t.unless.call(e,(i=e!=null?e.info:e)!=null?i.isLogo:i,{name:"unless",hash:{},fn:this.program(46,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s},46:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return"          "+o(s((i=e!=null?e.info:e)!=null?i.pinNumber:i,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o='<td class="sections ';return s=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r,i),inverse:this.program(3,r,i),data:r}),s!=null&&(o+=s),o+='">\n',s=t["if"].call(e,(s=e!=null?e.info:e)!=null?s.isLogo:s,{name:"if",hash:{},fn:this.program(5,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),s=t["if"].call(e,e!=null?e.showSections:e,{name:"if",hash:{},fn:this.program(7,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o+"</td>\n"},useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/tabs/layers/viewTemplate",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.info:e)!=null?i.originalUrl:i,e))},3:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u='<td class="column-4">\n  <a href="';return i=t["if"].call(e,(i=e!=null?e.info:e)!=null?i.displayOriginalUrl:i,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(u+=i),u+'" class="view-item btn transparent icon-window-lines" target="_blank">'+o(s((i=(i=e!=null?e.labels:e)!=null?i.actions:i)!=null?i.viewLayer:i,e))+"</a>\n</td>\n"},useData:!0})}),define("my/content/Templater",["dojo/parser","my/models/Credentials","my/helpers/TooltipHelper","Handlebars","my/helpers/HandlebarsHelpers","my/helpers/Formatter","my/content/ExpandedStory","lib-build/hbars!./Infographics","lib-build/hbars!./scanning/ScanProgress","lib-build/hbars!./scanning/ScanDone","lib-build/hbars!./scanning/ScanStop","lib-build/hbars!./scanning/ScanError","lib-build/hbars!./Header","lib-build/hbars!./Loading","lib-build/hbars!./dialogs/DeleteDialog","lib-build/hbars!./dialogs/ShareDialog","lib-build/hbars!./tabs/Maps","lib-build/hbars!./tabs/Scenes","lib-build/hbars!./tabs/Images","lib-build/hbars!./tabs/Videos","lib-build/hbars!./tabs/Webpages","lib-build/hbars!./tabs/Audio","lib-build/hbars!./tabs/Tags","lib-build/hbars!./tabs/Tabs","lib-build/hbars!./Error","lib-build/hbars!./scanning/IssueStatusPane","lib-build/hbars!./scanning/SuccessStatusPane","lib-build/hbars!./scanning/ErrorNotification","lib-build/hbars!./scanning/SuccessNotification","lib-build/hbars!./dialogs/ImagePicker","lib-build/hbars!./WhereAreStories","lib-build/hbars!./dialogs/FindMoreDialog","lib-build/hbars!./dialogs/UpdateTable","lib-build/hbars!./ProgressBar","lib-build/hbars!./NewStoriesFound","lib-build/hbars!./scanning/CheckingStatusPane","lib-build/hbars!./tabs/images/titleTemplate","lib-build/hbars!./tabs/images/sourceTemplate","lib-build/hbars!./tabs/images/statusTemplate","lib-build/hbars!./tabs/images/sectionsTemplate","lib-build/hbars!./tabs/layers/viewTemplate"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q){"use strict";var R=function(e,i){var o=s.formatPageBanner(e||t.getCredentials().userName),u=$("#my-stories-header");u.html(h({data:i18n.header,title:o,isPortal:i,sharingLevels:i18n.sharingLevel,engStrings:window.engStrings},{helpers:r.helpers})),n.addTooltipEvents(u)},U=function(){var e=$("#find-more-container");e.html(O({data:i18n.loading,whereAreStories:i18n.cantFindStories.whereAreStories},{helpers:r.helpers})),n.addTooltipEvents(e)},z=function(){var e=$("#modal-container-find-stories"),t='<a href="http://storymaps.arcgis.com/en/faq/#question12" class="linkable-text" target="_blank">'+i18n.cantFindStories.faq+"</a>",i=i18n.cantFindStories.notSeeExplanation.replace(/{{STORY_MAP_BASIC}}/g,window.engStrings.storyMapBasic).replace(/{{FAQ}}/g,t);e.html(M({data:i18n.loading,labels:i18n.cantFindStories,dialogLabels:i18n.storyMap.dialog,notSeeExplanation:i},{helpers:r.helpers})),n.addTooltipEvents(e)},W=function(e){var t=$("#find-update-table");t.html(_({items:e,labels:i18n.cantFindStories},{helpers:r.helpers})),n.addTooltipEvents(t)},X=function(e,t,i){e.html(p({title:t,small:i},{helpers:r.helpers})),n.addTooltipEvents(e)},V=function(){var e=$("#modal-container-delete");e.html(d({data:i18n.deleteModal},{helpers:r.helpers})),n.addTooltipEvents(e)},J=function(e,t,i,s){var o=$("#modal-container-share");o.html(v({shortLink:e,embedUrl:t,appUrl:i,sharingLevel:s,labels:i18n.storyMap.shareDialog,dialogLabels:i18n.storyMap.dialog},{helpers:r.helpers})),n.addTooltipEvents(o)},K=function(){var e=$("#modal-container-image-picker");e.html(A({labels:i18n.storyMap.imagePicker,dialogLabels:i18n.storyMap.dialog,noImage:i18n.content.tooltipErrors.imageInaccessible,loading:i18n.content.general.loading},{helpers:r.helpers})),n.addTooltipEvents(e)},Q=function(e,t,i){var s=$('.item[data-id="'+t+'"] .status-pane-container'),u=!1,a=o.getExpandedStory(),f=a?a.ignoreAllIssues:!1;f||(u=!0),s.html(N({issues:e,hasErrors:i,labels:i18n.content.notification,showIgnore:u,ignore:i18n.content.scanningErrorTips.ignore},{helpers:r.helpers})),n.addTooltipEvents(s)},G=function(e){var t=$('.item[data-id="'+e+'"] .status-pane-container');t.html(C({labels:i18n.content.notification},{helpers:r.helpers})),n.addTooltipEvents(t)},Y=function(e,t){var i=$('.item[data-id="'+t+'"] .notification-container');i.html(k({data:{text:e},labels:i18n.content},{helpers:r.helpers})),n.addTooltipEvents(i)},Z=function(e){var t=$('.item[data-id="'+e+'"] .status-pane-container');t.html(H({checkingLabel:i18n.content.notification.checking})),n.addTooltipEvents(t)},et=function(e,t){var i=$('.item[data-id="'+e+'"] .notification-container');i.html(L({label:t},{helpers:r.helpers})),n.addTooltipEvents(i)},tt=function(e,t){var i=$('.item[data-id="'+t+'"] .maps-container'),s=i18n.content,o=window.builderIntegration?s.tooltipWarnings.ignoredIssueBuilder:s.tooltipWarnings.ignoredIssue,u=!0;if(e.storyComponent===s.component.mapTour||e.storyComponent===s.component.crowdsource||e.storyComponent===s.component.shortlist)u=!1;r.registerPartial("layerView",q),i.html(m({data:e,labels:s,showSections:u,sharingLevel:i18n.sharingLevel,unscannableWarning:s.tooltipWarnings.cantScanThisTypeAlt,ignoredWarning:o,isBuilder:window.builderIntegration},{helpers:r.helpers})),n.addTooltipEvents(i)},nt=function(e,t){var i=$('.item[data-id="'+t+'"] .scenes-container');i.html(g({data:e,labels:i18n.content,isBuilder:window.builderIntegration,unscannableWarning:i18n.content.tooltipWarnings.sceneNotScannedAlt},{helpers:r.helpers})),n.addTooltipEvents(i)},rt=function(e,t,i){var o=[],u=[],a=null,f=!0,l=i18n.content,c=$('.item[data-id="'+t+'"] .images-container');if(e.storyComponent===l.component.crowdsource||e.storyComponent===l.component.shortlist)f=!1;for(var h=0;h<e.items.length;h++){a=$.extend(!0,{},e.items[h]),a.isLink=!0;if(a.url.indexOf("?token")!==-1||a.url.indexOf("&token")!==-1)a.url=s.removeURLToken(a.url),i!=="public"&&(a.isLink=!1);a.info.isThumbnail?u.push(a):o.push(a)}r.registerPartial("imageStatus",F),r.registerPartial("imageTitle",B),r.registerPartial("imageSource",j),r.registerPartial("imageSections",I),c.html(y({images:o,thumbnails:u,showSections:f,titleType:e.titleType,storyComponent:e.storyComponent,labels:l,emptyShortlistText:i18n.content.tooltipWarnings.emptyShortlistText,engStrings:window.engStrings,isBuilder:window.builderIntegration},{helpers:r.helpers})),n.addTooltipEvents(c)},it=function(e,t){var i=$('.item[data-id="'+t+'"] .videos-container');i.html(b({data:e,labels:i18n.content,engStrings:window.engStrings,isBuilder:window.builderIntegration},{helpers:r.helpers})),n.addTooltipEvents(i)},st=function(e,t){var i=$('.item[data-id="'+t+'"] .webpages-container');i.html(w({data:e,labels:i18n.content,isBuilder:window.builderIntegration,unscannableWarning:i18n.content.tooltipWarnings.webpageNotScanned},{helpers:r.helpers})),n.addTooltipEvents(i)},ot=function(e,t){var i=$('.item[data-id="'+t+'"] .audio-container');i.html(E({data:e,labels:i18n.content,isBuilder:window.builderIntegration},{helpers:r.helpers})),n.addTooltipEvents(i)},ut=function(e,t){var i=$('.item[data-id="'+t+'"] .tags-container');i.html(S({data:e,labels:i18n.storyMap.tags,collectionList:i18n.collectionList},{helpers:r.helpers})),n.addTooltipEvents(i)},at=function(e,t,i){var s=$('.item[data-id="'+t+'"] .content-tabs-container.media');s.html(x({tabs:e.media,labels:i18n.content.media,accessLevel:e.storyMap.accessLevel,isPortal:app.cfg.isSignedInPortal,showLoading:i},{helpers:r.helpers})),n.addTooltipEvents(s)},ft=function(e,t){var r=$('.item[data-id="'+t+'"] .infographics-container');r.html(u({infographics:e})),n.addTooltipEvents(r)},lt=function(e){var t=$("#error-container"),i=i18n.content.errors.consolationSearch,s="";e.noSearchResults&&e.isEnglish&&(i=window.engStrings.noStoriesInSearch),e.incompatibleBrowser&&(s=i18n.content.errors.notCompatibleWithBrowser.replace(/{{VERSION_NUMBER}}/g,e.version)),t.html(T({error:e,labels:i18n.content.errors,disabledTooltip:i18n.header.headerDisabledTooltip,consolationSearch:i,incompatibleBrowser:s},{helpers:r.helpers})),$("#error-container").css("display","block"),n.addTooltipEvents(t)},ct=function(e){var t=$("#new-stories-notification");t.html(P({strings:i18n.newStories,scanAllInProgress:e})),n.addTooltipEvents(t)},ht=function(t){var r=$("#scan-all-progress"),i=pt(t);r.html(a({progressBarWidget:i})),e.parse(),n.addTooltipEvents(r)},pt=function(e){var t=null;return e.progressBar&&e.progressBar.destroy(),t=D({progressString:e.progressString,stop:i18n.progress.stop,title:e.title,id:e.progressBarId,dojoId:e.progressBarDojoId,stopId:e.stopId}),t},dt=function(e){var t="",r=i18n.progress,i=$("#scan-all-progress");e===0?t=r.noStoriesWithIssuesLower:app.cfg.isEnglish?e===1?t=window.engStrings.storiesHaveIssuesSingle.replace(/{{NUM_STORIES}}/g,e):t=window.engStrings.storiesHaveIssuesPlural.replace(/{{NUM_STORIES}}/g,e):t=r.storiesWithIssues.replace(/{{NUM_STORIES}}/g,e),i.html(f({issueStr:t,labels:i18n.progress})),n.addTooltipEvents(i)},vt=function(e,t,r){var i="",s=$("#scan-all-progress");app.cfg.isEnglish?i=window.engStrings.scanStopMessage.replace(/{{NUM_SCANNED}}/g,e).replace(/{{TOTAL}}/g,t).replace(/{{NUM_ISSUES}}/g,r):i=i18n.progress.scanStopped.replace(/{{NUM_SCANNED}}/g,e).replace(/{{ISSUE_STORIES}}/g,r),s.html(l({stoppedStatement:i})),n.addTooltipEvents(s)};return{templatizeHeader:R,templatizeWhereAreStories:U,templatizeFindMoreStoriesDialog:z,templatizeUpdateTable:W,templatizeLoading:X,templatizeDeleteDialog:V,templatizeShareDialog:J,templatizeImagePicker:K,templatizeIssueStatusPane:Q,templatizeCheckingStatusPane:Z,templatizeSuccessStatusPane:G,templatizeErrorNotification:Y,templatizeSuccessNotification:et,templatizeInfographics:ft,templatizeMaps:tt,templatizeScenes:nt,templatizeImages:rt,templatizeVideos:it,templatizeWebpages:st,templatizeAudio:ot,templatizeTags:ut,templatizeTabs:at,templatizeError:lt,templatizeNewStoriesFound:ct,templatizeScanProgress:ht,templatizeProgressBar:pt,templatizeScanDone:dt,templatizeScanStopped:vt}}),function(e,t){function n(e,t,n){var r=l[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function r(t){var n=a(),r=n._rgba=[];return t=t.toLowerCase(),d(u,function(e,i){var s,o=i.re.exec(t),u=o&&i.parse(o),a=i.space||"rgba";if(u)return s=n[a](u),n[f[a].cache]=s[f[a].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,p.transparent),n):p[t]}function i(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",o=/^([\-+])=\s*(\d+\.?\d*)/,u=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],a=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},f={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=a.support={},h=e("<p>")[0],p,d=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=h.style.backgroundColor.indexOf("rgba")>-1,d(f,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),a.fn=e.extend(a.prototype,{parse:function(i,s,o,u){if(i===t)return this._rgba=[null,null,null,null],this;if(i.jquery||i.nodeType)i=e(i).css(s),s=t;var l=this,c=e.type(i),h=this._rgba=[];s!==t&&(i=[i,s,o,u],c="array");if(c==="string")return this.parse(r(i)||p._default);if(c==="array")return d(f.rgba.props,function(e,t){h[t.idx]=n(i[t.idx],t)}),this;if(c==="object")return i instanceof a?d(f,function(e,t){i[t.cache]&&(l[t.cache]=i[t.cache].slice())}):d(f,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!l[s]&&r.to){if(e==="alpha"||i[e]==null)return;l[s]=r.to(l._rgba)}l[s][t.idx]=n(i[e],t,!0)}),l[s]&&e.inArray(null,l[s].slice(0,3))<0&&(l[s][3]=1,r.from&&(l._rgba=r.from(l[s])))}),this},is:function(e){var t=a(e),n=!0,r=this;return d(f,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],d(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return d(f,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=a(e),i=r._space(),s=f[i],o=this.alpha()===0?a("transparent"):this,u=o[s.cache]||s.to(o._rgba),c=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],a=r[s],f=l[i.type]||{};if(a===null)return;o===null?c[s]=a:(f.mod&&(a-o>f.mod/2?o+=f.mod:o-a>f.mod/2&&(o-=f.mod)),c[s]=n((a-o)*t+o,i))}),this[i](c)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=a(t)._rgba;return a(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),a.fn.parse.prototype=a.fn,f.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},f.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=r<=.5?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(i(u,o,t+1/3)*255),Math.round(i(u,o,t)*255),Math.round(i(u,o,t-1/3)*255),s]},d(f,function(r,i){var s=i.props,u=i.cache,f=i.to,l=i.from;a.fn[r]=function(r){f&&!this[u]&&(this[u]=f(this._rgba));if(r===t)return this[u].slice();var i,o=e.type(r),c=o==="array"||o==="object"?r:arguments,h=this[u].slice();return d(s,function(e,t){var r=c[o==="object"?e:t.idx];r==null&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=a(l(h)),i[u]=h,i):a(h)},d(s,function(t,n){if(a.fn[t])return;a.fn[t]=function(i){var s=e.type(i),u=t==="alpha"?this._hsla?"hsla":"rgba":r,a=this[u](),f=a[n.idx],l;return s==="undefined"?f:(s==="function"&&(i=i.call(this,f),s=e.type(i)),i==null&&n.empty?this:(s==="string"&&(l=o.exec(i),l&&(i=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[n.idx]=i,this[u](a)))}})}),a.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if(i!=="transparent"&&(e.type(i)!=="string"||(s=r(i)))){i=a(s||i);if(!c.rgba&&i._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}i=i.blend(u&&u!=="transparent"?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=a(t.elem,n),t.end=a(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},a.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},p=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),define("lib-app/jqueryColor",function(){}),define("my/helpers/AnimationHelper",["lib-app/jqueryColor"],function(){"use strict";var e={},t=function(e){var t='.item[data-id="'+e+'"]',r=$(t+" .notification-pane"),i=$(t+" .notification-issue.notification-expanded");n(r,i)},n=function(e,t){e.addClass("highlighted"),t.addClass("highlighted"),r(e,t,1e3)},r=function(e,t,n){e.removeClass("highlighted",n),t.removeClass("highlighted",n)},i=function(e,t){e.addClass("changed-row"),s(e,t)},s=function(e,t){t?setTimeout(function(){e.removeClass("changed-row",600)},3500):setTimeout(function(){e.removeClass("changed-row",600)},1e3)},o=function(t,n){clearTimeout(e),t.stop(!0),t.css("opacity",0),setTimeout(function(){t.css("opacity",1),e=setTimeout(function(){t.animate({opacity:0},600)},n)},100)},u=function(e,t){e.toggleClass("faded",500,function(){e.toggleClass("shrunk",500,function(){e.empty(),e.removeClass("faded"),e.removeClass("shrunk"),t()})})},a=function(e){e.removeClass("row-shrunk",700,function(){e.removeClass("row-faded",700)})},f=function(e,t,n){e.toggleClass("faded",250,function(){e.addClass("no-show"),e.removeClass("faded")}),t.toggleClass("faded",1e3,function(){t.addClass("no-show"),t.removeClass("faded"),n&&typeof n=="function"&&n()})},l=function(e,t){setTimeout(function(){e.removeClass("saved-successfully",500,function(){t&&typeof t=="function"&&t()})},1e3)},c=function(e,t){setTimeout(function(){e.removeClass("error",500),t.animate({opacity:0},500,function(){t.css("display","none"),t.css("opacity","1")})},1e3)};return{pulsateNotification:t,pulsateRow:i,fadeNotification:o,dissolveRow:u,expandRow:a,animateHideModal:f,animateHideSuccessBorder:l,animateHideErrorBorder:c}}),define("my/helpers/UIHelper",["dijit/registry","my/helpers/AnimationHelper","my/helpers/Formatter","my/content/Templater","my/content/ExpandedStory"],function(e,t,n,r,i){"use strict";var s=[],o="",u=function(e,t,n){var r='.item[data-id="'+t+'"]',i=$(r+' .expandable-layer[data-map-id="'+e+'"]'),s=a();i.hasClass("expanded")?n&&(l(e),i.removeClass("expanded")):(n&&s.length<=1&&h(t),f(e),i.addClass("expanded"))},a=function(){return s},f=function(e){var t=s.indexOf(e);t===-1&&e&&s.push(e)},l=function(e){var t=s.indexOf(e);t!==-1&&s.splice(t,1)},c=function(e){var t='.item[data-id="'+e+'"]',n=$(t+" .expandable-layer");n.removeClass("expanded")},h=function(e){s=[],c(e)},p=function(){return o},d=function(e){o=e},v=function(){o=""},m=function(e,t){var n='.item[data-id="'+e+'"]';t==="public"?($(n+" .social-share-button").removeClass("disabled"),$(n+" .tooltip-wrapper.social").addClass("no-show"),$(n+" .item-view-live").html(i18n.storyMap.viewLive),$("#not-public-container").addClass("no-show")):t==="organization"?($(n+" .social-share-button").not(".share-dialog-button").addClass("disabled"),$(n+" .tooltip-wrapper.social").not(".share-dialog").removeClass("no-show"),$(n+" .social-share-button.share-dialog-button").removeClass("disabled"),$(n+" .tooltip-wrapper.social.share-dialog").addClass("no-show"),$(n+" .item-view-live").html(i18n.storyMap.viewLive),$("#not-public-container").removeClass("no-show")):($(n+" .social-share-button").addClass("disabled"),$(n+" .tooltip-wrapper.social").removeClass("no-show"),$(n+" .item-view-live").html(i18n.storyMap.preview),$("#not-public-container").removeClass("no-show"))},g=function(e){e.orgId||($(".organization").css("display","none"),$(".item-shared-with-column").addClass("no-org"))},y=function(e,t,n,r){t?($('.item[data-id="'+n+'"]').addClass("has-issues"),$('.item[data-id="'+n+'"]').removeClass("has-warning")):e===!0&&($('.item[data-id="'+n+'"]').removeClass("has-issues"),r&&$('.item[data-id="'+n+'"]').addClass("has-warning"))},b=function(e,t,n,r,i){var s=$('.item[data-id="'+e+'"] .media-tab[data-media-type="'+t+'"]');s.removeClass("icon-stories-error").removeClass("tab-error"),s.removeClass("icon-stories-warning").removeClass("tab-warning").removeClass("tab-moderate-warning"),n?s.addClass("icon-stories-error").addClass("tab-error"):r?s.addClass("icon-stories-warning").addClass("tab-warning"):i&&s.addClass("icon-stories-warning").addClass("tab-moderate-warning")},w=function(e){var t='.item[data-id="'+e+'"]';$(t+" .media-title.map, "+t+" .media-row .media-item-status").off("click").on("click",function(){var t=$(this).data("id");u(t,e,!0)})},E=function(e,t){$('.item[data-id="'+e+'"] .media-tab').off("click").on("click",function(){var n=$(this).attr("data-tab-type");x(n,e,!0,t)})},S=function(e){var t='.item[data-id="'+e+'"]';$('.item[data-id="'+e+'"] .media-tab').off("click")},x=function(e,t,n,r){var s='.item[data-id="'+t+'"]',o=i.getExpandedStory(),u=!1;$(s+" .item-table-container.active").removeClass("active"),$(s+" .media-tab.active").removeClass("active"),$(s+' .item-table-container[data-tab-type="'+e+'"]').addClass("active"),$(s+' .media-tab[data-tab-type="'+e+'"]').addClass("active"),n&&r&&(u=t===o.id,u&&D(r,e))},T=function(e){var t='.item[data-id="'+e+'"]';$(t+" .num-views").removeClass("block-element"),$(t+" .num-views-separator").css("display","inline-block"),$(t+" .item-metadata-container").removeClass("whole-line"),$(t).addClass("expanded")},N=function(e){var t='.item[data-id="'+e+'"]';$(t).removeClass("expanded"),$(t+" .num-views").addClass("block-element"),$(t+" .num-views-separator").css("display","none"),$(t+" .item-metadata-container").addClass("whole-line")},C=function(e){var t='.item[data-id="'+e+'"]',n=$(t).data("story-type");L(e),A(e),$(t+" .item-table-container.active").removeClass("active"),$(t+" .media-tab.active").removeClass("active"),$(t+" .media-tab.tab-error").removeClass("tab-error").removeClass("icon-stories-error"),n==="Map Tour"&&$(t+" .infographics-container .infographic:last-child .infographic-value").html(i18n.content.general.loading),k(e),h(e),v(),$(t+" .item-side-buttons .refresh").css("display","none"),$(t+" .item-side-buttons .refresh").removeClass("disabled"),nt(e),ot(e),it(e),wt(e,!0),yt(e),$(t+" .photo-bottom-overlay").css("display","none")},k=function(e){var t='.item[data-id="'+e+'"]';$(t+" .status-pane-container").empty()},L=function(e){$('.item[data-id="'+e+'"] .item-title').attr("contentEditable",!1),$('.item[data-id="'+e+'"] .item-title').off("focusout")},A=function(e){$('.item[data-id="'+e+'"] .item-photo').off("click")},O=function(e){var t='.item[data-id="'+e+'"]',n=$(t+" .media-tabs > :first-child"),r=$(t+" .item-table-container.active").attr("data-tab-type")||"",i=$(t+" .item-table-container.active")||null,s=$(t+' .media-tab[data-tab-type="'+r+'"]')||null;i.length>0&&s.length>0?$(t+' .media-tab[data-tab-type="'+r+'"]').addClass("active"):(n.addClass("active"),r=n.attr("data-tab-type"),$(t+" .item-table-container.active").removeClass("active"),$(t+' .item-table-container[data-tab-type="'+r+'"]').addClass("active"))},M=function(e){var t=[],n=[],r="",i=null;for(i in e.media)e.media.hasOwnProperty(i)&&(e.media[i].hasErrors&&t.push(e.media[i].type),e.media[i].hasWarnings&&n.push(e.media[i].type));r=_(t,n),B(e.id),j(e.id,r),D(e,r)},_=function(e,t){var n="",r="",i="",s=["maps","webpages","images","videos","audio"],o=["webpages","maps","images","videos","audio"];for(var u=0;u<s.length;u++){r=s[u];if(e.indexOf(r)!==-1){n=r;break}}if(!n)for(var a=0;a<o.length;a++){i=o[a];if(t.indexOf(i)!==-1){n=i;break}}return n},D=function(e,t){var n='.item[data-id="'+e.id+'"]',r=n+" .notification-issue",i=null;i=$(r+'[data-media-type="'+t+'"]'),i.length===1?ht(i,e.id,e.issues,[]):P(e.id)},P=function(e){var t='.item[data-id="'+e+'"]';$('.item[data-id="'+e+'"] .notification-issue.notification-expanded').removeClass("notification-expanded"),h(e),dt(t),v()},H=function(e){var t="images";e.media.images&&(B(e.id),j(e.id,t))},B=function(e){var t='.item[data-id="'+e+'"]';$(t+" .media-tab.active").removeClass("active"),$(t+" .item-table-container.active").removeClass("active")},j=function(e,t){var n='.item[data-id="'+e+'"]';$(n+' .media-tab[data-tab-type="'+t+'"]').addClass("active"),$(n+' .item-table-container[data-tab-type="'+t+'"]').addClass("active")},F=function(e){var t='.item[data-id="'+e+'"]';$(t+" .item-media-container").empty()},I=function(e,t){for(var n=0;n<e.length;n++)q(e[n],t)},q=function(e,n){var r=e.type==="layer"?"layer-row":"media-row",i=$('.item[data-id="'+e.storyObj.id+'"] '+"."+r+'[data-id="'+e.itemId+'"]');t.pulsateRow(i,n)},R=function(t){var n=e.byId("scanning-progress-bar"),i=i18n.progress.scanProgress.replace(/{{NUM_SCANNED}}/g,1).replace(/{{NUM_TOTAL}}/g,t),s=i18n.progress.checkingStories,o="scanning-progress-bar",u="scanProgressBar",a="scanning-stop";K(),r.templatizeScanProgress({progressBar:n,progressString:i,title:s,progressBarId:o,progressBarDojoId:u,stopId:a}),$("#item-list").empty(),$("#error-container").hide(),$("#find-more-container").hide(),$("#header-controls").hide(),At()},U=function(t,n){var r=e.byId("scanning-progress-bar"),i=i18n.progress.scanProgress.replace(/{{NUM_SCANNED}}/g,t).replace(/{{NUM_TOTAL}}/g,n);r.set({value:t/n*100}),$(".progress-details").html(i)},z=function(e,t){t||J(e),r.templatizeScanDone(e),Ot()},W=function(e,t,n){$(".num-with-issues").html(n),r.templatizeScanStopped(e,t,n),Ot()},X=function(e){var n=$("#scan-all-progress");t.dissolveRow(n,function(){Ct(e),$("#header-controls").show()}),$("#find-more-container").show()},V=function(e){var t="",n=i18n.progress;e===0?t=i18n.header.noIssues:app.cfg.isEnglish?e===1?t=window.engStrings.storiesHaveIssuesSingle.replace(/{{NUM_STORIES}}/g,e):t=window.engStrings.storiesHaveIssuesPlural.replace(/{{NUM_STORIES}}/g,e):t=n.storiesWithIssues.replace(/{{NUM_STORIES}}/g,e),$("#num-issues").html(t)},J=function(e){V(e),$("#num-issues").css("display","block")},K=function(){$("#num-issues").css("display","none")},Q=function(e){var t="",n="",r="modified";$("#sort-dropdown .dropdown-option.selected").removeClass("selected");if(!e){$('#sort-dropdown .dropdown-option[data-criteria="'+r+'"]').addClass("selected"),$("#sort-text").html(i18n.header.sort);return}$('#sort-dropdown .dropdown-option[data-criteria="'+e+'"]').addClass("selected"),t=$('#sort-dropdown .dropdown-option[data-criteria="'+e+'"] .dropdown-option-text').html(),n=i18n.header.sortColon+" "+t,$("#sort-text").html(n),Tt()},G=function(e){var t=null;if(!e){$("#filter-dropdown .dropdown-option").removeClass("selected");return}t=$('#filter-dropdown .dropdown-option[data-category="'+e.category+'"][data-value="'+e.value+'"]'),t.hasClass("selected")?t.removeClass("selected"):(t.addClass("selected"),Tt())},Y=function(e,t){$('.item[data-id="'+e+'"] .infographics-container .infographic:last-child .infographic-value').html(t)},Z=function(e,t){$('.item[data-id="'+e+'"] .infographics-container .infographic:first-child .infographic-value').html(t)},et=function(e,t){$('.item[data-id="'+e+'"] .infographics-container .infographic:first-child .infographic-value').html(t)},tt=function(e){$('.item[data-id="'+e+'"] .content-tab-error').show()},nt=function(e){$('.item[data-id="'+e+'"] .content-tab-error').hide()},rt=function(e){$('.item[data-id="'+e+'"] .maps-tab-error').removeClass("no-show")},it=function(e){$('.item[data-id="'+e+'"] .maps-tab-error').addClass("no-show")},st=function(e){$('.item[data-id="'+e+'"] .image-tab-error').removeClass("no-show")},ot=function(e){$('.item[data-id="'+e+'"] .image-tab-error').addClass("no-show")},ut=function(e){var n=$('.item[data-id="'+e+'"] .notification-container'),r=4e3;n.css("opacity",1),t.fadeNotification(n,r)},at=function(e,n){var r=$('.item[data-id="'+e+'"] .notification-container'),i=1e3;n&&(i=3500),t.fadeNotification(r,i)},ft=function(e){var t='.item[data-id="'+e+'"]',n=$(t+" .notification-pane");n.css("display","block")},lt=function(e){var t='.item[data-id="'+e+'"]',n=$(t+" .notification-pane");n.css("display","none")},ct=function(e,t,n){var r=p(),i=e.id,s=$('.item[data-id="'+i+'"] .notification-issue[data-issue-type="'+r+'"]');O(e.id);if(r!=="")if(e.issues[r].items.length>0&&s.length>0)ht(s,i,e.issues,t,n);else{v(),h(i);for(var o=0;o<t.length;o++)u(t[o],i,!1)}},ht=function(e,t,n,r,i){var s=e.attr("data-media-type"),o=e.attr("data-issue-type"),u=n[o].items;$('.item[data-id="'+t+'"] .notification-issue.notification-expanded').removeClass("notification-expanded"),e.addClass("notification-expanded"),x(s,t,!1,null),pt(t,u,r),d(o)},pt=function(e,t,n){var r='.item[data-id="'+e+'"]',i="",s={};dt(r),h(e);for(var o=0;o<t.length;o++)s=t[o],i=s.severity==="error"?"error-row":"warning-row",s.itemType==="layer"?(u(s.mapId,e,!1),$(r+' .layer-row[data-id="'+s.id+'"]').addClass(i)):$(r+' .media-row[data-id="'+s.id+'"]').addClass(i);for(var a=0;a<n.length;a++)u(n[a],e,!1)},dt=function(e){var t="error-row",n="warning-row";$(e+" .layer-row."+t).removeClass(t),$(e+" .media-row."+t).removeClass(t),$(e+" .layer-row."+n).removeClass(n),$(e+" .media-row."+n).removeClass(n)},vt=function(e){var t="";t=n.formatNumStories(e),$("#num-stories").html(t),$("#num-stories").css("display","block")},mt=function(){$("#num-stories").css("display","none")},gt=function(e){var t='.item[data-id="'+e+'"]';$(t+" .fadeable-button, "+t+" .server-button").addClass("temp-disabled")},yt=function(e){var t='.item[data-id="'+e+'"]';$(t+" .fadeable-button, "+t+" .server-button:not(.sharing-disabled)").removeClass("temp-disabled")},bt=function(e){var t='.item[data-id="'+e+'"]';$(t+" .story-sharing:not(.sharing-disabled)").removeClass("locked"),$(t+" .sharing-button-container.story.public:not(.sharing-disabled) .tooltip-content, "+t+" .sharing-button-container.story.organization:not(.sharing-disabled)").removeClass("locked"),$(t+" .sharing-button-container.story.public:not(.sharing-disabled) .tooltip-content").html(i18n.sharingLevel.publicMessage),$(t+" .sharing-button-container.story.organization:not(.sharing-disabled) .tooltip-content").html(i18n.sharingLevel.organization)},wt=function(e,t){var n='.item[data-id="'+e+'"]';$(n+" .story-sharing:not(.sharing-disabled)").removeClass("locked"),t?$(n+" .story-sharing").addClass("locked"):($(n+" .story-sharing.public:not(.sharing-disabled), "+n+" .story-sharing.organization:not(.sharing-disabled)").addClass("locked"),$(n+" .sharing-button-container.story.public:not(.sharing-disabled) .tooltip-content, "+n+" .sharing-button-container.story.organization:not(.sharing-disabled) .tooltip-content").html(i18n.storyMap.notAvailableWhenBroken))},Et=function(e){var t=$('.item[data-id="'+e+'"] .media-tab.left');return t.length===0?!1:!0},St=function(e,t){var n='.item[data-id="'+e+'"]';$(n+" .map-sharing:not(.sharing-disabled)").removeClass("temp-disabled"),t==="public"?($(n+" .map-sharing.private, "+n+" .map-sharing.organization").addClass("temp-disabled"),$(n+" .sharing-icons:not(.locked) .sharing-button-container.map.private:not(.incompatible-access-level.active) .tooltip-content").html(i18n.sharingLevel.mapPrivate),$(n+" .sharing-icons:not(.locked) .sharing-button-container.map.organization:not(.incompatible-access-level.active) .tooltip-content").html(i18n.sharingLevel.mapOrg),$(n+" .sharing-icons:not(.locked) .sharing-button-container.layer.private:not(.incompatible-access-level.active) .tooltip-content").html(i18n.sharingLevel.layerPrivate),$(n+" .sharing-icons:not(.locked) .sharing-button-container.layer.organization:not(.incompatible-access-level.active) .tooltip-content").html(i18n.sharingLevel.layerOrg)):t==="organization"&&($(n+" .map-sharing.private").addClass("temp-disabled"),$(n+" .sharing-icons:not(.locked) .sharing-button-container.map.private:not(.incompatible-access-level.active) .tooltip-content").html(i18n.sharingLevel.mapPrivate),$(n+" .sharing-icons:not(.locked) .sharing-button-container.layer.private:not(.incompatible-access-level.active) .tooltip-content").html(i18n.sharingLevel.layerPrivate))},xt=function(e,t){$('.item[data-id="'+e+'"] .item-photo').attr("src",t)},Tt=function(){$("#clear").animate({opacity:1},500)},Nt=function(){$("#clear").css("opacity",0),$("#search-results").html("")},Ct=function(e){var t="";app.cfg.isEnglish?t=e===1?window.engStrings.numResultsSingle.replace(/{{NUM_RESULTS}}/g,e):window.engStrings.numResultsPlural.replace(/{{NUM_RESULTS}}/g,e):t=i18n.header.numResults.replace(/{{NUM_RESULTS}}/g,e),$("#search-results").html(t)},kt=function(){var e=$("#new-stories-notification");t.expandRow(e)},Lt=function(){var e=$("#new-stories-notification");e.addClass("row-shrunk"),e.addClass("row-faded"),e.empty()},At=function(){$("#show-new-stories").addClass("disabled"),$("#new-stories-tooltip-button-wrapper .tooltip-wrapper").removeClass("no-show")},Ot=function(){$("#show-new-stories").removeClass("disabled"),$("#new-stories-tooltip-button-wrapper .tooltip-wrapper").addClass("no-show")},Mt=function(e,t){var n='.item[data-id="'+e+'"]';$(n+' .content-tab[data-media-type="'+t+'"] .loader').css("display","none")},_t=function(e){var t='.item[data-id="'+e+'"]';$(t+" .ignore-all-button").removeClass("no-show")},Dt=function(e){var t='.item[data-id="'+e+'"]';$(t+" .ignore-all-button").addClass("no-show")};return{toggleLayers:u,getExpandedMaps:a,emptyExpandedMaps:h,showBySharingLevel:m,handleNoOrg:g,updateStoryStatusIcon:y,updateTabStatusIcon:b,addToggleLayerEvents:w,addMediaTabsEvents:E,removeMediaTabsEvents:S,expandStory:T,collapseStory:N,resetContentDefaults:C,emptyStatusPane:k,highlightFirstOrActiveMedia:O,highlightFirstIssueTab:M,findMediaToHighlight:_,highlightImageTab:H,highlightMediaTab:j,unHighlightMediaTab:B,emptyMediaContainers:F,updateSharedRows:I,updateSharedRow:q,updateNumScanned:U,onScanStart:R,onScanComplete:z,onScanStopped:W,exitScanMode:X,updateSortedBy:Q,updateFilteredBy:G,updateBasemapInfographic:Y,updateContributionsInfographic:Z,updatePlacesInfographic:et,showContentErrorMessage:tt,hideContentErrorMessage:nt,showImageError:st,hideImageError:ot,showMapsError:rt,hideMapsError:it,showErrorNotification:ut,showSuccessNotification:at,showIssueStatusPane:ft,hideIssueStatusPane:lt,updateNotificationPane:ct,selectNotification:ht,updateNumStories:vt,hideNumStories:mt,disableFadeableButtons:gt,reEnableButtons:yt,enableStoryShareButtons:bt,disableStoryShareButtons:wt,checkAlreadyHasContent:Et,restrictMapLayerSharing:St,updateThumbnail:xt,showClearButton:Tt,hideClearButton:Nt,updateSearchResultCount:Ct,hideNumStoriesWithIssues:K,updateNumStoriesWithIssues:V,showNewStoriesFoundRow:kt,hideNewStoriesFoundRow:Lt,hideLoadingTabs:Mt,showIgnoreButton:_t,hideIgnoreButton:Dt}}),define("my/content/dialogs/SeeExample",[],function(){"use strict";var e=null,t=function(t){e=t;var r=e.getElementById("story-frame"),i=e.getElementById("story-frame-container"),s=i.getAttribute("data-width"),o=i.getAttribute("data-height"),u=e.getElementById("main-line");i.style.width=s,r.style.height=o,u.style.height=o,n(s)},n=function(e){var t=new RegExp("[^\\D][0-9]+?%$"),n=t.test(e);n?r(e):i(e)},r=function(e){var t=e.substring(0,e.length-1),n=parseInt(t,10);isNaN(n)===!1&&n>80&&s()},i=function(t){var n=new RegExp("[^\\D][0-9]+px$"),r=n.test(t),i="",o=0,u=0,a=0;r&&(i=t.substring(0,t.length-2),o=parseInt(i,10),isNaN(o)===!1&&(u=e.getElementById("main").clientWidth,a=o/u*100,a>75&&s()))},s=function(){var t=e.getElementById("story-frame-container"),n=e.getElementById("main-line");n.style.textAlign="center",t.style.float="none",e.getElementById("variable-column").style.display="none",t.style.margin="0",t.style.padding="0 15px"};return{init:t}}),define("lib-build/hbars!my/content/dialogs/SeeExample",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div id="main">\r\n	<section id="header">\r\n		<div class="blue-box outer-box">\r\n			<div class="inner-box"></div>\r\n		</div><!--\r\n	 --><div class="light-gray-box outer-box">\r\n	 		<div class="inner-box"></div>\r\n		</div>\r\n	</section>\r\n	<section id="main-line">\r\n		<div id="story-frame-container" data-width="'+u((i=(i=t.width||(e!=null?e.width:e))!=null?i:o,typeof i===s?i.call(e,{name:"width",hash:{},data:r}):i))+'" data-height="'+u((i=(i=t.height||(e!=null?e.height:e))!=null?i:o,typeof i===s?i.call(e,{name:"height",hash:{},data:r}):i))+'" class="outer-box">\r\n			<iframe id="story-frame" src="'+u((i=(i=t.url||(e!=null?e.url:e))!=null?i:o,typeof i===s?i.call(e,{name:"url",hash:{},data:r}):i))+'"></iframe>\r\n		</div><!--\r\n	 --><div id="variable-column" class="dark-gray-box outer-box">\r\n	 		<div class="inner-box with-text">\r\n	 			<div class="fill-box"></div>\r\n	 			<div class="text-box">\r\n	 				<div class="text big-text">\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>		 					\r\n	 				</div>\r\n	 			</div>\r\n	 		</div>\r\n		</div>\r\n	</section>\r\n	<section id="text-line-1">\r\n		<div class="dark-gray-box outer-box">\r\n	 		<div class="inner-box with-text">\r\n	 			<div class="fill-box"></div>\r\n	 			<div class="text-box">\r\n	 				<div class="text">\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 				</div>\r\n	 			</div>\r\n	 		</div>\r\n		</div><!--\r\n	 --><div class="dark-gray-box outer-box">\r\n	 		<div class="inner-box with-text">\r\n	 			<div class="fill-box"></div>\r\n	 			<div class="text-box">\r\n	 				<div class="text">\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 				</div>\r\n	 			</div>\r\n	 		</div>\r\n		</div><!--\r\n	 --><div class="dark-gray-box outer-box">\r\n	 		<div class="inner-box with-text">\r\n	 			<div class="fill-box"></div>\r\n	 			<div class="text-box">\r\n	 				<div class="text">\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 				</div>\r\n	 			</div>\r\n	 		</div>\r\n		</div><!--\r\n	 --><div class="blue-box outer-box">\r\n			<div class="inner-box"></div>\r\n		</div>\r\n	</section>\r\n	<section id="text-line-2">\r\n		<div class="dark-gray-box outer-box">\r\n	 		<div class="inner-box with-text">\r\n	 			<div class="fill-box"></div>\r\n	 			<div class="text-box">\r\n	 				<div class="text">\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 				</div>\r\n	 			</div>\r\n	 		</div>\r\n		</div><!--\r\n	 --><div class="blue-box outer-box">\r\n	 		<div class="inner-box with-text">\r\n	 			<div class="fill-box"></div>\r\n	 		</div>\r\n		</div><!--\r\n	 --><div class="dark-gray-box outer-box">\r\n	 		<div class="inner-box with-text">\r\n	 			<div class="fill-box"></div>\r\n	 			<div class="text-box">\r\n	 				<div class="text">\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 					<div class="text-filler"></div>\r\n	 					<div class="text-line partway"></div>\r\n	 				</div>\r\n	 			</div>\r\n	 		</div>\r\n		</div><!--\r\n	 --><div class="light-gray-box outer-box">\r\n			<div class="inner-box double-box">\r\n				<div class="fill-box"></div>\r\n				<div class="fill-box"></div>\r\n			</div>\r\n		</div>\r\n	</section>\r\n</div>'},useData:!0})}),define("lib-build/hbars!my/content/dialogs/SeeExampleHeader",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return"<style>\r\n\r\n* {\r\n	box-sizing: border-box;\r\n}\r\n\r\nhtml, body {\r\n	margin: 0;\r\n	padding: 0;\r\n}\r\n\r\nbody {\r\n	background: rgb(170,170,170);\r\n}\r\n\r\n#main {\r\n	background: rgb(198,198,198);\r\n	box-shadow: 0 0 11px 6px rgb(150,150,150);\r\n	margin: auto;\r\n	padding: 0 15px 20px;\r\n	width: 1300px;\r\n}\r\n\r\n.blue-box .inner-box, .blue-box .with-text .fill-box {\r\n	background: rgb(126,168,194);\r\n}\r\n\r\n.light-gray-box .inner-box, .light-gray-box .double-box .fill-box {\r\n	background: rgb(223,224,226);\r\n}\r\n\r\n.dark-gray-box .inner-box, .dark-gray-box .with-text .fill-box, .text-line {\r\n	background: rgb(137,137,137);\r\n}\r\n\r\n.outer-box {\r\n	display: inline-block;\r\n	height: 100%;\r\n	padding: 0 15px;\r\n}\r\n\r\n.inner-box {\r\n	border-radius: 3px;\r\n	height: 100%;\r\n	width: 100%;\r\n}\r\n\r\nsection {\r\n	padding: 20px 0 0;\r\n}\r\n\r\n#header {\r\n	height: 100px;\r\n	width: 100%;\r\n}\r\n\r\n#header .blue-box {\r\n	width: 34%;\r\n}\r\n\r\n#header .light-gray-box {\r\n	width: 66%;\r\n}\r\n\r\n#main-line {\r\n	margin-top: 20px;\r\n	padding: 0;\r\n}\r\n\r\n#story-frame-container {\r\n	float: left;\r\n	margin: 0 15px;\r\n	padding: 0;\r\n}\r\n\r\n#story-frame {\r\n	border: none;\r\n	box-shadow: 0 0 11px 6px rgb(178, 178, 178);\r\n	height: 100%;\r\n	width: 100%;\r\n}\r\n\r\n#variable-column {\r\n	display: block;\r\n	overflow: hidden;\r\n	width: auto;	\r\n}\r\n\r\n.inner-box.with-text, .inner-box.double-box {\r\n	background: none;	\r\n}\r\n\r\n.fill-box {\r\n	border-radius: 3px;\r\n}\r\n\r\n.with-text > div {\r\n	width: 100%;\r\n}\r\n\r\n.with-text .fill-box {	\r\n	height: 66%;\r\n}\r\n\r\n.with-text .text-box {		\r\n	height: 34%;	\r\n	padding-top: 15px;\r\n}\r\n\r\n.with-text .text-box .text {\r\n	height: 100%;\r\n}\r\n\r\n.text-line {\r\n	border-radius: 7px;\r\n	height: 14.2%;\r\n	width: 100%;\r\n}\r\n\r\n.text-line.partway {\r\n	width: 66%;\r\n}\r\n\r\n\r\n/* Originally did without this class (and the element that uses it to make it a filler), \r\n	but margin-top or padding-top when percentages (as we'd want here) are calculated\r\n	as percentage of the WIDTH of the container (don't ask me why). */\r\n.text-filler {\r\n	height: 14.2%;\r\n	width: 100%;\r\n}\r\n\r\n\r\n.big-text .text-line {\r\n	border-radius: 15px;\r\n	height: 6.66%;\r\n}\r\n\r\n.big-text .text-filler {\r\n	height: 6.66%;\r\n}\r\n\r\n\r\n#text-line-1, #text-line-2 {\r\n	height: 300px;\r\n}\r\n\r\n#text-line-1 .outer-box, #text-line-2 .outer-box {\r\n	width: 25%;\r\n}\r\n\r\n.double-box .fill-box {\r\n	height: 40%;\r\n	margin-bottom: 20px;\r\n}\r\n</style>"},useData:!0})}),define("my/helpers/Sanitizer",[],function(){"use strict";var e=function(e){var t=document.createElement("div"),n="";return t.innerHTML=e,n=t.textContent,n};return{sanitizeHtmlInput:e}}),function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define("lib-app/clipboard",[],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.Clipboard=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){function i(e,t){while(e&&e!==document){if(e.matches(t))return e;e=e.parentNode}}if(Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=i},{}],2:[function(e,t,n){function i(e,t,n,r,i){var o=s.apply(this,arguments);return e.addEventListener(n,o,i),{destroy:function(){e.removeEventListener(n,o,i)}}}function s(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}var r=e("./closest");t.exports=i},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return e!==undefined&&e instanceof HTMLElement&&e.nodeType===1},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return e!==undefined&&(t==="[object NodeList]"||t==="[object HTMLCollection]")&&"length"in e&&(e.length===0||n.node(e[0]))},n.string=function(e){return typeof e=="string"||e instanceof String},n.fn=function(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"}},{}],4:[function(e,t,n){function s(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return o(e,t,n);if(r.nodeList(e))return u(e,t,n);if(r.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function u(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return i(document.body,e,t,n)}var r=e("./is"),i=e("delegate");t.exports=s},{"./is":3,delegate:2}],5:[function(e,t,n){function r(e){var t;if(e.nodeName==="SELECT")e.focus(),t=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA")e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}t.exports=r},{}],6:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var s=0,o=r.length;s<o;s++)r[s].fn!==t&&r[s].fn._!==t&&i.push(r[s]);return i.length?n[e]=i:delete n[e],this}},t.exports=r},{}],7:[function(t,n,r){(function(i,s){if(typeof e=="function"&&e.amd)e(["module","select"],s);else if(typeof r!="undefined")s(n,t("select"));else{var o={exports:{}};s(o,i.select),i.clipboardAction=o.exports}})(this,function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(t),i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t){s(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,r=document.documentElement.getAttribute("dir")=="rtl";this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[r?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,i)),this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(n){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"copy";this._action=t;if(this._action!=="copy"&&this._action!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(t!==undefined){if(!t||(typeof t=="undefined"?"undefined":i(t))!=="object"||t.nodeType!==1)throw new Error('Invalid "target" value, use a valid Element');if(this.action==="copy"&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(this.action==="cut"&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),e}();e.exports=u})},{select:5}],8:[function(t,n,r){(function(i,s){if(typeof e=="function"&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],s);else if(typeof r!="undefined")s(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var o={exports:{}};s(o,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=o.exports}})(this,function(e,t,n,r){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){var n="data-clipboard-"+e;if(!t.hasAttribute(n))return;return t.getAttribute(n)}var i=u(t),s=u(n),o=u(r),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e,n){a(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return c(t,e),f(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=typeof t.action=="function"?t.action:this.defaultAction,this.target=typeof t.target=="function"?t.target:this.defaultTarget,this.text=typeof t.text=="function"?t.text:this.defaultText}},{key:"listenClick",value:function(t){var n=this;this.listener=(0,o.default)(t,"click",function(e){return n.onClick(e)})}},{key:"onClick",value:function(t){var n=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(n),target:this.target(n),text:this.text(n),trigger:n,emitter:this})}},{key:"defaultAction",value:function(t){return p("action",t)}},{key:"defaultTarget",value:function(t){var n=p("target",t);if(n)return document.querySelector(n)}},{key:"defaultText",value:function(t){return p("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}(s.default);e.exports=h})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),define("my/content/dialogs/ShareDialog",["dojo/Deferred","my/content/Templater","my/helpers/Formatter","my/helpers/UIHelper","my/content/dialogs/SeeExample","lib-build/hbars!./SeeExample","lib-build/hbars!./SeeExampleHeader","my/helpers/Sanitizer","lib-app/clipboard"],function(e,t,n,r,i,s,o,u,a){"use strict";var f="800px",l="100%",c=function(e){var n=E(e);f="800px",l="100%",t.templatizeShareDialog(e.shortlink,e.embedUrl,e.url,e.accessLevel),h(e.url),n.then(function(e){$("#item-sharing-link-text").val(e),$("#shortlink-icon").attr("data-clipboard-text",e)})},h=function(e){$(".embed-dimensions.static").off("click").on("click",function(){m(),$(".embed-dimensions.active").removeClass("active"),$(this).addClass("active"),S($(this))}),$(".embed-dimensions.custom").off("click").on("click",function(){$(".embed-dimensions.active").removeClass("active"),$(this).addClass("active")}),$(".embed-custom-size").focus(function(){$(".embed-dimensions.active").removeClass("active"),$(this).parent().addClass("active"),g($(this)),v(),$(this).addClass("focused-dimension")}).blur(function(){var e=$(this),t=u.sanitizeHtmlInput($(".embed-dimensions.custom.active .width").val())||"",n=u.sanitizeHtmlInput($(".embed-dimensions.custom.active .height").val())||"",r=u.sanitizeHtmlInput(e.val()),i=$(".embed-custom-size").not(e),s=r.substring(r.length-1),o=r.substring(r.length-2);e.removeClass("focused-dimension"),e.val(r),r===""?p(e):(g(e),s!=="%"&&o!=="px"&&(r+="px",e.hasClass("width")?(t=r,$(".embed-dimensions.custom.active .width").val(t)):e.hasClass("height")&&(n=r,$(".embed-dimensions.custom.active .height").val(n)))),setTimeout(function(){i.hasClass("focused-dimension")===!1&&u.sanitizeHtmlInput(i.val())===""&&p(i),v()},1),x(t,n)}),$(".share-text").off("click").on("click",b),$("#example-button").on("click",function(){T(e)}),y()},p=function(e){e.addClass("embed-error"),$("#embed-error-text").css("display","block")},d=function(){$("#embed-error-text").css("display","none")},v=function(){$(".embed-custom-size.embed-error").length===0&&d()},m=function(){$(".embed-custom-size").removeClass("embed-error"),d()},g=function(e){e.removeClass("embed-error")},y=function(){var e=new a(document.querySelectorAll(".share-modal .link-text-icon"));e.on("success",function(e){w(e.trigger)})},b=function(){$(this).select()},w=function(e){var t=$(e),n=null;t[0]===$("#embed-icon")[0]?n=$("#embed-copied-message"):n=$("#shortlink-copied-message"),t.addClass("copied"),t.removeClass("icon-copy"),t.addClass("icon-check"),t.addClass("success"),n.show(),setTimeout(function(){t.removeClass("icon-check"),t.removeClass("success"),t.addClass("icon-copy"),t.hasClass("copied")&&t.removeClass("copied"),n.hide()},1e3)},E=function(t){var r=new e;return n.formatBitlyLink(t.url,function(e){t.shortUrl=e,r.resolve(e)}),r.promise},S=function(e){var t=$(e).find(".dimensions").html(),n=t.split("/"),r=$.trim(n[0]),i=$.trim(n[1]);x(r,i)},x=function(e,t){l=e,f=t;var n=$("#embed-link").val().replace(/width=".*?"/gi,'width="'+e+'"').replace(/height=".*?"/gi,'height="'+t+'"');$("#embed-link").val(n),$("#embed-icon").attr("data-clipboard-text",n)},T=function(e){var t=window.open("","_blank"),n="",r="preview=true",u=/\?/.test(e);u?n="&"+r:n="?"+r,e+=n,t.document.head.innerHTML+=o(),t.document.body.innerHTML=s({url:e,width:l,height:f}),i.init(t.document)};return{init:c}}),define("my/models/StoryMemberMediaDetails",["my/helpers/Formatter"],function(e){"use strict";var t=function(t){var n=t.url||"",r=e.removeURLProtocol(n),i={url:n,displayUrl:e.removeURLToken(r),errors:[],warnings:[],hasMinorWarning:t.hasMinorWarning||!1,hasModerateWarning:!1,inaccessible:!1,sections:t.sections,type:t.type};return i},n=function(e,t,n,r){var i={source:e,pinNumber:t,title:n,isFeatureService:r};return i},r=function(e){var t={pinNumber:e};return t},i=function(e){return{pinNumber:e}},s=function(t,n,r){var i="";return r||n||e.urlHasTokenParam(t)?(i=e.addURLToken(t),i):t};return{createMediaInfo:t,createImageVideoDetails:n,createWebpageDetails:r,createAudioDetails:i,createImageUrl:s}}),define("my/models/StoryMember",["esri/arcgis/utils","my/models/StoryMemberMediaDetails"],function(e,t){"use strict";var n=function(t,n,r){var i="map",s="",o=e.arcgisUrl.indexOf("/sharing"),u=e.arcgisUrl.substring(0,o),l=u+"/home/webmap/viewer.html?webmap="+t,c=u+"/home/item.html?id="+t;r?(i="scene",s=c):s=l;var h=a(t,s,i);return h.info=f(n),h.hasModerateWarning=r,h},r=function(){var e=a("","","layer");return e.info=l(),e},i=function(e){var n=!1;e.url&&e.url.match(new RegExp("/sharing/rest/content/items/.*?/resources/"))&&(n=!0);var r=t.createImageUrl(e.url,e.isFeatureService,n),i=t.createMediaInfo({url:r,sections:e.sections,type:"image"});return i.info=t.createImageVideoDetails(e.source,e.pinNumber,e.title,e.isFeatureService),i.info.isThumbnail=e.isThumbnail,i.hasModerateWarning=e.emptyShortlistImage,i.info.emptyShortlistImage=e.emptyShortlistImage,i.info.hostedOnAGOL=n,i.info.isLogo=e.isLogo,i},s=function(e,n,r,i){var s=t.createMediaInfo({url:e,sections:n,type:"video"});return s.info=t.createImageVideoDetails("",r,i),s},o=function(e,n,r){var i=t.createMediaInfo({url:e,sections:n,type:"webpage",hasMinorWarning:!0});return i.info=t.createWebpageDetails(r),i},u=function(e,n,r){var i=t.createMediaInfo({url:e,sections:n,type:"audio"});return i.info=t.createAudioDetails(r),i},a=function(e,t,n){var r={title:"",id:e,access:"",url:t,errors:[],warnings:[],hasMinorWarning:!1,hasModerateWarning:!1,hostedOnAGOL:!0,canShareOthers:!1,canShareOrg:!1,canSharePublic:!1,isOwnedByMe:!1,isSecureService:!1,isPremiumContent:!1,isSubscriptionContent:!1,hasProxy:!1,owner:"",notYoursNotAccessible:!1,inaccessible:!1,deleted:!1,serviceOkItemNot:!1,sharedBelowLevel:!1,type:n,info:{}};return r},f=function(e){var t={layers:[],sections:e,itemDetails:{},templateStrings:{ownedBy:""},modified:-1};return t},l=function(){var e={mapId:"",originalUrl:"",displayOriginalUrl:!1,partOfMap:!1,templateStrings:{ownedBy:""},isScannable:!0,isBasemap:!1,persistentBasemap:!1};return e};return{createMapInfo:n,createLayerInfo:r,createImageInfo:i,createVideoInfo:s,createWebpageInfo:o,createAudioInfo:u}}),define("my/helpers/TabHelper",[],function(){"use strict";var e=function(e,t,n){return{title:e,type:t,items:[],hasErrors:!1,hasWarnings:!1,hasModerateWarning:!1,hasSections:n}},t=function(e){var t=null;e.hasErrors=!1,e.hasWarnings=!1,e.hasModerateWarning=!1;for(var n=0;n<e.items.length;n++)t=e.items[n],t.errors.length>0&&(e.hasErrors=!0),t.warnings.length>0&&(e.hasWarnings=!0),t.hasModerateWarning&&(e.hasModerateWarning=!0)};return{getTabObject:e,scanTab:t}}),define("my/models/Issue",[],function(){"use strict";var e={deleted:"deleted",inaccessible:"inaccessible",notYoursNotAccessible:"notYoursNotAccessible",serviceOkItemNot:"serviceOkItemNot",secureService:"secureService",premiumContent:"premiumContent",subscriptionContent:"subscriptionContent",yoursSharedBelowLevel:"yoursSharedBelowLevel",othersSharedBelowLevel:"othersSharedBelowLevel",inaccessibleImage:"inaccessibleImage",inaccessibleVideo:"inaccessibleVideo",inaccessibleWebpage:"inaccessibleWebpage",inaccessibleAudio:"inaccessibleAudio",httpAudioError:"httpAudioError",httpAudioWarning:"httpAudioWarning",httpWebpageError:"httpWebpageError",httpWebpageWarning:"httpWebpageWarning",httpImageError:"httpImageError",httpImageWarning:"httpImageWarning",httpVideoError:"httpVideoError",httpVideoWarning:"httpVideoWarning"},t={},n=function(){t.map={},t.map[e.deleted]=i18n.content.tooltipErrors.mapHasBeenDeleted,t.map[e.inaccessible]=i18n.content.tooltipErrors.mapIsInaccessible,t.map[e.notYoursNotAccessible]=i18n.content.tooltipErrors.mapNotYoursNotAccessible,t.map[e.secureService]=i18n.content.tooltipErrors.mapSecureService,t.map[e.premiumContent]=i18n.content.tooltipErrors.mapConsumesCredits,t.map[e.subscriptionContent]=i18n.content.tooltipErrors.mapSubscriptionContent,t.map[e.yoursSharedBelowLevel]="",t.map[e.othersSharedBelowLevel]=i18n.content.tooltipErrors.mapOthersSharedBelowLevel,t.layer={},t.layer[e.deleted]=i18n.content.tooltipErrors.layerHasBeenDeleted,t.layer[e.inaccessible]=i18n.content.tooltipErrors.layerIsInaccessible,t.layer[e.notYoursNotAccessible]=i18n.content.tooltipErrors.layerNotYoursNotAccessible,t.layer[e.serviceOkItemNot]=i18n.content.tooltipErrors.layerServiceOkItemNot,t.layer[e.secureService]=i18n.content.tooltipErrors.layerSecureService,t.layer[e.premiumContent]=i18n.content.tooltipErrors.layerConsumesCredits,t.layer[e.subscriptionContent]=i18n.content.tooltipErrors.layerSubscriptionContent,t.layer[e.yoursSharedBelowLevel]="",t.layer[e.othersSharedBelowLevel]=i18n.content.tooltipErrors.layerOthersSharedBelowLevel,t[e.inaccessibleImage]=i18n.content.tooltipErrors.imageInaccessible,t[e.inaccessibleVideo]=i18n.content.tooltipErrors.videoInaccessible,t[e.inaccessibleWebpage]=i18n.content.tooltipErrors.webpageInaccessible,t[e.inaccessibleAudio]=i18n.content.tooltipErrors.audioInaccessible,t[e.httpAudioError]=i18n.content.tooltipErrors.audioHttpFixable,t[e.httpAudioWarning]=i18n.content.tooltipErrors.audioHttpFixable,t[e.httpWebpageError]=i18n.content.tooltipErrors.webpageHttpFixable,t[e.httpWebpageWarning]=i18n.content.tooltipErrors.webpageHttpFixable,t[e.httpImageError]=i18n.content.tooltipErrors.imageHttpFixable,t[e.httpImageWarning]=i18n.content.tooltipErrors.imageHttpFixable,t[e.httpVideoError]=i18n.content.tooltipErrors.videoHttpFixable,t[e.httpVideoWarning]=i18n.content.tooltipErrors.videoHttpFixable},r=function(){return e},i=function(e){var t="",n=r();switch(e){case n.deleted:case n.inaccessible:case n.notYoursNotAccessible:case n.serviceOkItemNot:case n.inaccessibleImage:case n.inaccessibleVideo:case n.inaccessibleWebpage:case n.inaccessibleAudio:case n.httpAudioError:case n.httpAudioWarning:case n.httpWebpageError:case n.httpWebpageWarning:case n.httpImageError:case n.httpImageWarning:case n.httpVideoError:case n.httpVideoWarning:t="primary";break;case n.secureService:case n.premiumContent:case n.subscriptionContent:case n.yoursSharedBelowLevel:case n.othersSharedBelowLevel:t="secondary";break;default:}return t},s=function(e,t,n,r,s,u){var a={id:e,itemType:t,issueType:n,issueLevel:i(n),mapId:t==="layer"?r:"",text:o(t,n,s),severity:u};return a},o=function(e,n,r){var i="";return e==="map"?i=t[e][n]:e==="layer"?i=t[e][n].replace(/{{LAYER_NAME}}/g,'"'+r+'"'):i=t[n],i},u=function(e,t,n,r){var i=i18n.content.tooltipErrors;if(e==="organization")r==="map"?n.text=i.mapIsOrg:r==="layer"&&(n.text=i.layerIsOrg.replace(/{{LAYER_NAME}}/g,'"'+t+'"'));else if(e==="private"||e==="shared")r==="map"?n.text=i.mapIsPrivate:r==="layer"&&(n.text=i.layerIsPrivate.replace(/{{LAYER_NAME}}/g,'"'+t+'"'))};return{init:n,createIssue:s,getPossibleIssues:r,modifySharingIssueText:u}}),define("my/content/BuilderStory",[],function(){"use strict";var e=!1,t=function(t){e=t},n=function(){return e};return{setIsSaved:t,getIsSaved:n}}),define("my/content/scanning/ItemScanner",["dojo/Deferred","dojo/promise/all","my/models/Issue","my/models/Credentials","my/content/ExpandedStory","my/content/BuilderStory"],function(e,t,n,r,i,s){"use strict";var o=function(e){p(e),f(e),c(e)},u=function(e){p(e)},a=function(n,r,i,s){var o=new e,u=new e,a=new e;return d(n,r,i,s,u),l(n,r,i,s,a),t([u.promise,a.promise]).then(function(){c(n),o.resolve()}),o.promise},f=function(e){var t={};for(var n=0;n<e.info.layers.length;n++)t=e.info.layers[n],t.info.mapId=e.id,p(t)},l=function(n,r,i,s,o){var u=null,a=[];for(var f=0;f<n.info.layers.length;f++)u=new e,d(n.info.layers[f],r,i,s,u),a.push(u.promise);t(a).then(function(){o.resolve()})},c=function(e){var t={};h(e);for(var n=0;n<e.info.layers.length;n++){t=e.info.layers[n];for(var r=0;r<t.errors.length;r++)e.errors.push(t.errors[r])}},h=function(e){var t=0;while(t<e.errors.length)e.errors[t].itemType==="layer"?e.errors.splice(t,1):t++},p=function(e){var t={},r={},s={},o={},u=n.getPossibleIssues(),a=i.getExpandedStory();e.serviceOkItemNot?a.ignoreServiceOkItemNot?e.hasMinorWarning=!0:(t=b(e,u.serviceOkItemNot),e.errors.push(t)):e.deleted?(r=b(e,u.deleted),e.errors.push(r)):e.inaccessible?(s=b(e,u.inaccessible),e.errors.push(s)):e.notYoursNotAccessible&&(o=b(e,u.notYoursNotAccessible),e.errors.push(o))},d=function(e,t,n,i,s){var o=r.getCredentials(),u=null;if(e.deleted||e.inaccessible||e.notYoursNotAccessible){s.resolve();return}v(e.errors),m(e,n,o.userName),g(e,n,o.userName),u=y(e,t,n,i),u.then(function(){s.resolve()})},v=function(e){var t=0;while(t<e.length)e[t].issueLevel==="secondary"?e.splice(t,1):t++},m=function(e,t,r){var i={},s=n.getPossibleIssues();if(e.owner!==r&&!e.canShareOthers||!e.hostedOnAGOL||e.type==="layer"&&e.info.partOfMap===!0)return;e.sharedBelowLevel=!1;if(t==="private"||t==="shared")return;if(t==="organization"){if(e.access==="private"||e.access==="shared")e.sharedBelowLevel=!0,i=b(e,s.yoursSharedBelowLevel),n.modifySharingIssueText(e.access,e.title,i,e.type),e.errors.push(i)}else t==="public"&&(e.access==="organization"||e.access==="private"||e.access==="shared")&&(e.sharedBelowLevel=!0,i=b(e,s.yoursSharedBelowLevel),n.modifySharingIssueText(e.access,e.title,i,e.type),e.errors.push(i))},g=function(e,t,r){var i={},s=n.getPossibleIssues();if(e.owner===r||e.canShareOthers)return;e.sharedBelowLevel=!1,t==="public"&&(e.access==="organization"||e.access==="private"||e.access==="shared")&&(e.sharedBelowLevel=!0,i=b(e,s.othersSharedBelowLevel),e.errors.push(i))},y=function(t,r,i,o){var u=new e,a=null,f=null,l=n.getPossibleIssues(),c=null;return!t.isSecureService||window.builderIntegration&&s.getIsSaved()===!1?(u.resolve(),u.promise):(c=o.checkSecureService(t),c.then(function(e){e.hasProxy||(e.isPremiumContent?i==="public"&&(a=b(e,l.premiumContent),t.errors.push(a)):e.isSubscriptionContent&&r==="public"&&i==="public"&&(f=b(e,l.subscriptionContent),t.errors.push(f))),u.resolve()}),u.promise)},b=function(e,t){var r=n.createIssue(e.id,e.type,t,e.info.mapId||"",e.title,"error");return r},w=function(e){var t=n.getPossibleIssues(),r={};switch(e.type){case"image":r={inaccessible:t.inaccessibleImage,httpContentError:t.httpImageError,httpContentWarning:t.httpImageWarning};break;case"video":r={inaccessible:t.inaccessibleVideo,httpContentError:t.httpVideoError,httpContentWarning:t.httpVideoWarning};break;case"webpage":r={httpContentError:t.httpWebpageError,httpContentWarning:t.httpWebpageWarning};break;case"audio":r={inaccessible:t.inaccessibleAudio,httpContentError:t.httpAudioError,httpContentWarning:t.httpAudioWarning};break;default:r={inaccessible:t.inaccessible}}if(e.inaccessible){var i=n.createIssue(e.url,e.type,r.inaccessible,"",e.title,"error");e.errors.push(i)}if(e.isHttpContentError){var s=n.createIssue(e.url,e.type,r.httpContentError,"",e.title,"error");e.errors.push(s)}if(e.isHttpContentWarning){var o=n.createIssue(e.url,e.type,r.httpContentWarning,"",e.title,"warning");e.warnings.push(o)}};return{scanMapInitially:o,scanSceneInitially:u,scanMapFinally:a,scanMedia:w}}),define("my/content/tabs/Maps",["dojo/on","dojo/promise/all","dojo/Deferred","esri/config","esri/arcgis/utils","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/OpenStreetMapLayer","esri/layers/KMLLayer","esri/layers/CSVLayer","esri/layers/WMSLayer","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/GeoRSSLayer","esri/layers/VectorTileLayer","esri/request","my/models/Credentials","my/models/StoryMember","my/helpers/TabHelper","my/content/scanning/ItemScanner","my/helpers/Formatter","my/content/ExpandedStory"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){"use strict";var x=null,T=function(e,i){x=x||g.getCredentials();var s=new n,o={},u=[],a=N();app.cfg.isSignedInPortal&&(r.defaults.kmlService=a+"/sharing/kml");for(var f=0;f<e.length;f++)o=C(e[f]),u.push(o),o.then(function(e){var t=S.getExpandedStory();(!e.cachedMap||t.ignoreServiceOkItemNot)&&w.scanMapInitially(e.map),app.cfg.cacheManager.updateCache("maps",e.map.id,e.map)});return t(u).then(function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n].map);i.items=t,b.scanTab(i),s.resolve(i)}),s.promise},N=function(){var e=i.arcgisUrl.indexOf("/sharing"),t=i.arcgisUrl.substring(0,e);return t},C=function(e){var t=new n,r=new n;return r.promise.then(function(e){var n=S.getExpandedStory();e.cachedMap&&!n.ignoreServiceOkItemNot?t.resolve({cachedMap:!0,map:e.cachedMap}):e.wasSuccessful?A(e.results,e.mapResults,t):L(e.err,e.mapResults,t)}),app.cfg.scanNetworkManager.addRequest({params:e,deferred:r,request:k,numRequests:2}),t.promise},k=function(e){var t=e.sections?e.sections.slice():[],r=y.createMapInfo(e.id,t,!1),s=new n,o=i.arcgisUrl+"/"+e.id,u=null;return u=m({url:o,content:{f:"json"},timeout:app.cfg.TIMEOUT_MILLISECONDS}),u.then(function(e){var t=o+"/data",n=null,i=null,u=S.getExpandedStory();i=app.cfg.cacheManager.getFromCache("maps",e.id);if(i&&!u.ignoreServiceOkItemNot&&i.info.modified===e.modified){i.info.sections=r.info.sections,s.resolve({cachedMap:i});return}n=m({url:t,content:{f:"json"},timeout:app.cfg.TIMEOUT_MILLISECONDS}),n.then(function(t){var n={item:e,itemData:t};s.resolve({results:n,mapResults:r,wasSuccessful:!0,err:null})},function(e){s.resolve({results:null,mapResults:r,wasSuccessful:!1,err:e})})},function(e){s.resolve({results:null,mapResults:r,wasSuccessful:!1,err:e})}),s.promise},L=function(e,t,n){e.httpCode===403?(t.isOwnedByMe=!1,t.notYoursNotAccessible=!0,t.info.templateStrings.ownedBy=E.formatMapLayerOwner(t.owner)):e.httpCode===400?t.deleted=!0:t.inaccessible=!0,n.resolve({map:t})},A=function(e,t,n){var r=x||g.getCredentials();t.owner=e.item.owner,t.info.modified=e.item.modified,t.info.templateStrings.ownedBy=E.formatMapLayerOwner(t.owner);if(e.item.owner===r.userName)t.isOwnedByMe=!0,t.canShareOrg=r.privileges.canShareMineOrg,t.canSharePublic=r.privileges.canShareMinePublic;else if(e.item.itemControl==="admin"||e.item.itemControl==="update")e.item.itemControl==="admin"?t.canShareOthers=!0:e.item.itemControl==="update"&&(r.privileges.canShareOthersOrg||r.privileges.canShareOthersPublic)&&(t.canShareOthers=!0),t.canShareOrg=r.privileges.canShareOthersOrg,t.canSharePublic=r.privileges.canShareOthersPublic;t.title=e.item.title,t.access=e.item.access==="org"?"organization":e.item.access==="account"?"organization":e.item.access,t.info.itemDetails=e.itemData;var i=e.itemData.baseMap.baseMapLayers;for(var s=0;s<i.length;s++)e.itemData.baseMap.title&&(i[s].title=e.itemData.baseMap.title),i[s].isBasemap=!0,s===0&&(i[s].persistentBasemap=!0);var o=i.concat(e.itemData.operationalLayers);o.reverse();var u=O(o,e.item);u.then(function(e){t.info.layers=e,n.resolve({map:t})})},O=function(e,r){var i=new n,s={},o=[];for(var u=0;u<e.length;u++)s=new n,o.push(s.promise),s.promise.then(function(e){e.title||(e.title=i18n.content.general.noTitle),e.info.isScannable||(e.hasMinorWarning=!0)}),app.cfg.scanNetworkManager.addRequest({params:{layerObj:e[u],map:r},deferred:s,request:M});return t(o).then(function(e){i.resolve(e)}),i.promise},M=function(e){var t=e.layerObj,r=e.map,i=y.createLayerInfo(),s=new n,o=null,u=null,a=null,f=null;t.type==="VectorTileLayer"&&(t.url=t.styleUrl),i.title=t.title,i.info.isBasemap=t.isBasemap,i.info.persistentBasemap=t.persistentBasemap;if(!t.itemId&&!t.url)t.type==="WebTiledLayer"?(i.id=t.id,i.info.isScannable=!1,s.resolve(i)):t.layerType==="OpenStreetMap"||t.type==="OpenStreetMap"?(f=Q(i),f.then(function(e){s.resolve(e)})):(i.id=t.id,o=tt(i,r),s.resolve(o));else if(t.itemId&&!t.url)a=_(i,t,!1),a.then(function(e){s.resolve(e)});else{i.info.originalUrl=t.url,i.url=E.forceProtocolRelativeURL(t.url),i.id=t.id;if(t.type==="WebTiledLayer")i.url=i.info.originalUrl,i.info.isScannable=!1,s.resolve(i);else if(t.type==="KML"||t.type==="CSV"||t.type==="WMS"||t.type==="WFS")u=et(i,t),u.then(function(e){s.resolve(e)});else if(t.itemId){var l=j(s,i,t);l.then(function(e){s.resolve(e)})}else{i.hostedOnAGOL=!1;var c=R(i,t);c.then(function(e){s.resolve(e)},function(e){s.resolve(e)})}}return s.promise},_=function(e,t,r){var s=new n,o=null;return e.id=t.itemId,o=m({url:i.arcgisUrl+"/"+e.id,content:{f:"json"},timeout:app.cfg.TIMEOUT_MILLISECONDS}),o.then(function(n){r?D(s,e,t,n):(H(e,t,n),s.resolve(e))},function(i){var o=new n;r?(B(o,i,e),o.promise.then(function(e){P(s,e,t)})):B(s,i,e)}),s.promise},D=function(e,t,n,r){var i=null,s=r.typeKeywords.indexOf("Hosted Service")!==-1,o=r.typeKeywords.indexOf("Service Proxy")!==-1;t.info.originalUrl=n.url,s||o?(H(t,n,r),e.resolve(t)):(i=R(t,n),i.then(function(t){H(t,n,r),e.resolve(t)},function(t){e.resolve(t)}))},P=function(e,t,n){var r=R(t,n);r.then(function(t){t.deleted=!1,t.inaccessible=!1,t.hostedOnAGOL=!1,t.notYoursNotAccessible=!1,t.serviceOkItemNot=!0,e.resolve(t)},function(t){t.hostedOnAGOL=!1,t.deleted=!1,t.inaccessible=!0,e.resolve(t)})},H=function(e,t,n){var r=x||g.getCredentials(),i=N();e.owner=n.owner,e.info.templateStrings.ownedBy=E.formatMapLayerOwner(e.owner),e.url=i+"/home/item.html?id="+t.itemId;if(n.owner===r.userName)e.isOwnedByMe=!0,e.canShareOrg=r.privileges.canShareMineOrg,e.canSharePublic=r.privileges.canShareMinePublic;else if(n.itemControl==="admin"||n.itemControl==="update")n.itemControl==="admin"?e.canShareOthers=!0:n.itemControl==="update"&&(r.privileges.canShareOthersOrg||r.privileges.canShareOthersPublic)&&(e.canShareOthers=!0),e.canShareOrg=r.privileges.canShareOthersOrg,e.canSharePublic=r.privileges.canShareOthersPublic;e.access=n.access==="org"?"organization":n.access==="account"?"organization":n.access},B=function(e,t,n){n.deleted=!1,n.inaccessible=!1,t.httpCode===403?(n.isOwnedByMe=!1,n.notYoursNotAccessible=!0,n.info.templateStrings.ownedBy=E.formatMapLayerOwner(n.owner)):t.httpCode===400?n.deleted=!0:n.inaccessible=!0,e.resolve(n)},j=function(e,t,n){var r=_(t,n,!0);return r.then(function(t){e.resolve(t)}),e.promise},F=function(e){var t=!1,n=g.getCredentials();return n.orgId&&e.credential&&(t=!0),t},I=function(e,t,n){var r=window.setTimeout(function(){q(null,r,e,t,n)},app.cfg.TIMEOUT_MILLISECONDS);return r},q=function(e,t,n,r,i){window.clearTimeout(t),e&&e.httpCode===404?n.deleted=!0:n.inaccessible=!0,i.reject(n)},R=function(e,t){var r=new n;switch(t.layerType){case"ArcGISTiledMapServiceLayer":K(r,e,t);break;case"ArcGISImageServiceLayer":J(r,e);break;case"ArcGISFeatureLayer":$(r,e);break;case"ArcGISMapServiceLayer":X(r,e,t);break;case"GeoRSS":W(r,e,t);break;case"VectorTileLayer":V(r,e,t);break;default:X(r,e,t)}return r.promise},U=function(e,t){var n=window.setTimeout(function(){z(null,t,e,n)},app.cfg.TIMEOUT_MILLISECONDS);return n},z=function(e,t,n,r){window.clearTimeout(r),e&&e.error&&e.error.httpCode===404?t.deleted=!0:t.isSecureService||(t.inaccessible=!0),n.reject(t)},W=function(e,t,n){t.url=n.url;var r=new d(t.url),i=U(e,t);r.on("load",function(n){window.clearTimeout(i),t.isSecureService=F(n.layer),e.resolve(t)}),r.on("error",function(n){z(n,t,e,i)})},X=function(e,t,n){var r=new s(t.url),i=I(t,n,e);r.on("load",function(n){window.clearTimeout(i),t.title||(t.title=n.layer.layerInfos[0].name),t.isSecureService=F(n.layer),e.resolve(t)}),r.on("error",function(r){q(r.error,i,t,n,e)})},V=function(e,t,n){var r=new v(t.url),i=I(t,n,e);r.on("load",function(n){window.clearTimeout(i),t.isSecureService=F(n.layer),e.resolve(t)}),r.on("error",function(r){q(r.error,i,t,n,e)})},$=function(e,t){var n=new h(t.url),r=I(t,null,e);n.on("load",function(n){window.clearTimeout(r),t.isSecureService=F(n.layer),e.resolve(t)}),n.on("error",function(n){q(n.error,r,t,null,e)})},J=function(e,t){var n=new p(t.url),r=I(t,null,e);n.on("load",function(n){window.clearTimeout(r),t.isSecureService=F(n.layer),e.resolve(t)}),n.on("error",function(n){q(n.error,r,t,null,e)})},K=function(e,t,n){var r=new o(t.url),i=I(t,n,e);r.on("load",function(n){window.clearTimeout(i),t.title||(t.title=n.layer.layerInfos[0].name),t.isSecureService=F(n.layer),e.resolve(t)}),r.on("error",function(r){q(r.error,i,t,n,e)})},Q=function(e){var t=new n;return e.info.partOfMap=!0,e.info.isScannable=!1,t.resolve(e),t.promise},G=function(e,t,n){window.clearTimeout(e),t.resolve(n)},Y=function(e,t,n){window.clearTimeout(e),n.inaccessible=!0,t.resolve(n)},Z=function(e,t){var n=window.setTimeout(function(){Y(n,e,t)},app.cfg.TIMEOUT_MILLISECONDS);return n},et=function(e,t){var r=new n,i=Z(r,e);e.hostedOnAGOL=!1,e.url=t.url;if(t.type==="KML"){t.itemId&&(e.url=E.addURLToken(e.url),e.info.displayOriginalUrl=!0);var s=new a(e.url);s.on("load",function(){G(i,r,e)}),s.on("error",function(){Y(i,r,e)})}else if(t.type==="CSV"){e.info.originalUrl=e.url;var o=new f(e.url);o.on("load",function(){G(i,r,e)}),o.on("error",function(){Y(i,r,e)})}else t.type==="WMS"?(e.info.isScannable=!1,G(i,r,e)):(e.info.isScannable=!1,G(i,r,e));return r.promise},tt=function(e,t){var n=x||g.getCredentials();return e.info.partOfMap=!0,e.owner=t.owner,e.info.templateStrings.ownedBy=E.formatMapLayerOwner(e.owner),e.owner===n.userName&&(e.isOwnedByMe=!0),e};return{buildMapsObj:T}}),define("my/content/tabs/Scenes",["dojo/promise/all","dojo/Deferred","esri/request","esri/arcgis/utils","my/content/scanning/ItemScanner","my/helpers/TabHelper","my/models/StoryMember","my/helpers/Formatter"],function(e,t,n,r,i,s,o,u){var a=function(n,r){var i=new t,o={},u=[];for(var a=0;a<n.length;a++)o=f(n[a]),u.push(o);return e(u).then(function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n].scene);r.items=t,s.scanTab(r),i.resolve(r)}),i.promise},f=function(e){var n=new t,r=new t;return r.promise.then(function(e){e.wasSuccessful?c(e.results,e.sceneResults,n):h(e.err,e.sceneResults,n)}),app.cfg.scanNetworkManager.addRequest({params:e,deferred:r,request:l}),n.promise},l=function(e){var i=e.sections?e.sections.slice():[],s=o.createMapInfo(e.id,i,!0),u=new t,a=r.arcgisUrl+"/"+e.id,f=n({url:a,content:{f:"json"},timeout:app.cfg.TIMEOUT_MILLISECONDS});return f.then(function(e){var t={item:e,itemData:null};u.resolve({results:t,sceneResults:s,wasSuccessful:!0,err:null})},function(e){u.resolve({results:null,sceneResults:s,wasSuccessful:!1,err:e})}),u.promise},c=function(e,t,n){t.owner=e.item.owner,t.info.modified=e.item.modified,t.info.templateStrings.ownedBy=u.formatMapLayerOwner(t.owner),t.title=e.item.title,t.access=e.item.access==="org"?"organization":e.item.access==="account"?"organization":e.item.access,t.info.itemDetails=e.itemData,n.resolve({scene:t})},h=function(e,t,n){e.httpCode===403?(t.isOwnedByMe=!1,t.notYoursNotAccessible=!0,t.info.templateStrings.ownedBy=u.formatMapLayerOwner(t.owner)):e.httpCode===400?t.deleted=!0:t.inaccessible=!0,n.resolve({scene:t})};return{buildScenesObj:a}}),define("my/content/tabs/Common",["my/models/Credentials"],function(e){var t=function(t,r){if(n(t.url)){var i=e.getCredentials().portal;i.isPortal?t.isHttpContentWarning=!0:!r||r.indexOf("https://")!==-1||i.allSSL?t.isHttpContentError=!0:t.isHttpContentWarning=!0}},n=function(e){return/http:\/\//.test(e)};return{scanHttpIssues:t}}),define("my/content/tabs/Images",["dojo/_base/lang","dojo/promise/all","dojo/Deferred","my/models/StoryMember","my/content/scanning/ItemScanner","my/content/tabs/Common","my/helpers/TabHelper"],function(e,t,n,r,i,s,o){"use strict";var u=function(e,r,s){var u=new n,f=[],l={},c=null;for(var h=0;h<e.length;h++)c=e[h],l=new n,f.push(l.promise),l.promise.then(function(e){e.isCached||i.scanMedia(e.item),app.cfg.cacheManager.updateCache("images",e.item.url,e.item)}),app.cfg.scanNetworkManager.addRequest({params:{item:c,storyUrl:s},deferred:l,request:a});return t(f).then(function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n].item);r.items=t,o.scanTab(r),u.resolve(r)}),u.promise},a=function(t){var r=app.cfg.cacheManager.getFromCache("images",t.item.id),i=null,s=new n;return r?(i=e.clone(r),i.sections=t.item.sections,i.info&&(i.info.pinNumber=t.item.pinNumber,i.info.title=t.item.title,i.info.isThumbnail=t.item.isThumbnail),s.resolve({item:i,isCached:!0})):f(t.item,s,t.storyUrl),s.promise},f=function(e,t,n){var i=r.createImageInfo({url:e.id,sections:e.sections?e.sections.slice():[],source:p(e.id),pinNumber:e.pinNumber||0,title:e.title||"",isFeatureService:e.isFeatureService||!1,isThumbnail:e.isThumbnail,emptyShortlistImage:e.emptyShortlistImage,isLogo:e.details&&e.details.isLogo}),o=new Image,u={},a=15e3,f=!1;s.scanHttpIssues(i,n),u=setTimeout(function(){f=h(t,i,f)},a),o.onload=function(){l(t,i,u,f)},o.addEventListener("error",function(){c(t,i,u,f)}),i.hasModerateWarning?l(t,i,u,f):o.src=i.url},l=function(e,t,n,r){clearTimeout(n),r||e.resolve({item:t,isCached:!1})},c=function(e,t,n,r){clearTimeout(n),r||(t.inaccessible=!0,e.resolve({item:t,isCached:!1}))},h=function(e,t,n){return n=!0,t.inaccessible=!0,e.resolve({item:t,isCached:!1}),n},p=function(e){var t="",n={};return n=new RegExp("\\/\\/fbcdn|fbcdn\\.net"),n.test(e)?(t="Facebook",t):(n=new RegExp("flickr\\.com"),n.test(e)?(t="Flickr",t):(n=new RegExp("\\.ggpht\\.com|lh[1-9]\\.googleusercontent\\."),n.test(e)?(t="GooglePlus",t):(t="Url",t)))};return{buildImagesObj:u}}),define("my/content/tabs/Videos",["dojo/promise/all","dojo/Deferred","esri/request","my/models/StoryMember","my/models/Credentials","my/content/scanning/ItemScanner","my/content/tabs/Common","my/helpers/TabHelper"],function(e,t,n,r,i,s,o,u){"use strict";var a=/(youtube\.com\/(watch\?v\=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,f=/^.*(vimeo\.com\/)((video\/))?([0-9]+)/,l=function(n,r,i){var o=new t,a=[],f={},l=null;for(var h=0;h<n.length;h++)l=n[h],f=new t,a.push(f.promise),f.promise.then(function(e){e.isCached||s.scanMedia(e.item),app.cfg.cacheManager.updateCache("videos",e.item.url,e.item)}),app.cfg.scanNetworkManager.addRequest({params:{item:l,storyUrl:i},deferred:f,request:c});return e(a).then(function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n].item);r.items=t,u.scanTab(r),o.resolve(r)}),o.promise},c=function(e){var n=null,r=new t;return n=app.cfg.cacheManager.getFromCache("videos",e.item.id),n?(n.sections=e.item.sections,n.info&&(n.info.pinNumber=e.item.pinNumber,n.info.title=e.item.title),r.resolve({item:n,isCached:!0})):h(e.item,r,e.storyUrl),r.promise},h=function(e,t,n){var i=e.title||"",s=e.sections?e.sections.slice():[],u=e.pinNumber||0,l=r.createVideoInfo(e.id,s,u,i),c=a.exec(l.url),h=f.exec(l.url),v={},m={};o.scanHttpIssues(l,n),c?(v=p(l,c),v.then(function(e){t.resolve(e)})):h?(m=d(l,h),m.then(function(e){t.resolve(e)})):(l.inaccessible=!0,t.resolve({item:l,isCached:!1}))},p=function(e,n){var r=new t,i="";return e.info.source="YouTube",n.length===4?(i=n[3],e.url="https://www.youtube.com/watch?v="+i,$.ajax({url:"https://www.googleapis.com/youtube/v3/videos",data:{part:"snippet",id:i,key:"AIzaSyCHc4DP7IJU2neC0lbuKh5Fg5g3RVeRoiE"},timeout:4e3,success:function(t){t.items&&t.items.length>0?(e.info.title||(e.info.title=t.items[0].snippet.title),r.resolve({item:e,isCached:!1})):(e.inaccessible=!0,r.resolve({item:e,isCached:!1}))},error:function(){e.inaccessible=!0,r.resolve({item:e,isCached:!1})}})):(e.inaccessible=!0,r.resolve({item:e,isCached:!1})),r.promise},d=function(e,n){var r=new t,i="";return e.info.source="Vimeo",n.length===5?(i=n[4],e.url="https://vimeo.com/"+i,$.ajax({url:"https://api.vimeo.com/videos/"+i,headers:{Authorization:"bearer f22bff482301959a0e18a3257ee8966b",Accept:"application/vnd.vimeo.*+json;version=3.2"},success:function(t){e.info.title||(e.info.title=t.name),r.resolve({item:e,isCached:!1})},error:function(){e.inaccessible=!0,r.resolve({item:e,isCached:!1})}})):(e.inaccessible=!0,r.resolve({item:e,isCached:!1})),r.promise};return{buildVideosObj:l,youTubeRegex:a,vimeoRegex:f}}),define("builtMy/content/tabs/Media",["module","exports","dojo/Deferred","issue-checker/helpers/NormalizeHelper"],function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=o(n),s=o(r),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(){function e(){u(this,e)}return a(e,null,[{key:"scanItems",value:function(t,n,r){var i=this,s=this.formatPrescanMedia(t);return this.checkItems(s,n,r).then(function(e){return i.buildItemsResult(e,t)})}},{key:"checkItems",value:function(t,n,r){var s=this,o=new i.default;return n.check({media:t,appAccess:"public"}).then(function(e){var t=e.media[r];s.addIssueDetails(t,e.warnings,e.errors),o.resolve(t.byId)}),o.promise}},{key:"addIssueDetails",value:function(t,n,r){var i=s.default.getAllItems(t),o=!0,u=!1,a=undefined;try{for(var f=i[Symbol.iterator](),l;!(o=(l=f.next()).done);o=!0){var c=l.value;this.addItemIssueDetails(c,n,"warnings"),this.addItemIssueDetails(c,r,"errors")}}catch(h){u=!0,a=h}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}}},{key:"addItemIssueDetails",value:function(t,n,r){for(var i=0;i<t[r].length;i++){var s=t[r][i],o=n.byId[s],u={id:s,actions:o.actions};t[r][i]=u}}},{key:"buildItemsResult",value:function(t,n){var r=this;return n.map(function(e){var n=t[e.id],i=r.buildItemResult({url:e.id,sections:e.sections,pinNumber:e.pinNumber,warnings:n?n.warnings:[],errors:n?n.errors:[]});return i})}},{key:"isHttpContentIssue",value:function(t,n){var r=!0,i=!1,s=undefined;try{for(var o=t[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){var a=u.value;if(a.id.indexOf("httpContent")!==-1)return!0}}catch(f){i=!0,s=f}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return!1}},{key:"isInaccessible",value:function(t,n){var r=!0,i=!1,s=undefined;try{for(var o=t[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){var a=u.value;if(a.id===n+"/inaccessible")return!0}}catch(f){i=!0,s=f}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return!1}}]),e}();t.default=f,e.exports=t["default"]}),define("builtMy/content/tabs/Webpages",["module","exports","my/models/StoryMember","./Media","my/content/scanning/ItemScanner"],function(e,t,n,r,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function p(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(n),o=a(r),u=a(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function v(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:v(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},d=function(e){function t(){return f(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),l(t,null,[{key:"scanItems",value:function(n,r){return h(t.__proto__||Object.getPrototypeOf(t),"scanItems",this).call(this,n,r,"webpages")}},{key:"formatPrescanMedia",value:function(t){return{webpageIDs:t.map(function(e){return e.id})}}},{key:"buildItemResult",value:function(t){var n=t.sections,r=t.pinNumber,i=t.url,o=t.warnings,a=t.errors,f=n?n.slice():[],l=r||0,c=s.default.createWebpageInfo(i,f,l);return c.isHttpContentError=this.isHttpContentIssue(a,"webpages"),c.isHttpContentWarning=this.isHttpContentIssue(o,"webpages"),u.default.scanMedia(c),c}}]),t}(o.default);t.default=d,e.exports=t["default"]}),define("builtMy/content/tabs/Audio",["module","exports","./Media","my/models/StoryMember","my/content/scanning/ItemScanner"],function(e,t,n,r,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function p(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(n),o=a(r),u=a(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function v(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:v(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},d=function(e){function t(){return f(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),l(t,null,[{key:"scanItems",value:function(n,r){return h(t.__proto__||Object.getPrototypeOf(t),"scanItems",this).call(this,n,r,"audio")}},{key:"formatPrescanMedia",value:function(t){return{audioIDs:t.map(function(e){return e.id})}}},{key:"buildItemResult",value:function(t){var n=t.sections,r=t.pinNumber,i=t.url,s=t.warnings,a=t.errors,f=n?n.slice():[],l=r||0,c=o.default.createAudioInfo(i,f,l);return c.isHttpContentError=this.isHttpContentIssue(a,"audio"),c.isHttpContentWarning=this.isHttpContentIssue(s,"audio"),c.inaccessible=this.isInaccessible(a,"audio"),u.default.scanMedia(c),c}}]),t}(s.default);t.default=d,e.exports=t["default"]}),define("my/content/builders/SectionedStory",["my/helpers/Formatter","my/helpers/ImageHelper"],function(e,t){"use strict";var n=function(){},r=function(e,t,n,r){var o={maps:[],scenes:[],images:[],videos:[],webpages:[]},a=-1,l=0,c="",h=null,p=null,d="";if(n||!e.story)return o;var v=g(e,r);v&&f({id:v,media:o,type:"images",section:{},sectionNumber:-1,isMainContent:!1,storyType:t,details:{isLogo:!0}}),d=i(e,t);for(var m=0;m<d.length;m++)a=d[m],l=m+1,a.status!=="HIDDEN"&&(s(o,a,l,t),a.media.webmap?f({id:a.media.webmap.id,media:o,type:"maps",section:a,sectionNumber:l,isMainContent:!0,storyType:t}):a.media.image?f({id:a.media.image.url,media:o,type:"images",section:a,sectionNumber:l,isMainContent:!0,storyType:t}):a.media.video?f({id:a.media.video.url,media:o,type:"videos",section:a,sectionNumber:l,isMainContent:!0,storyType:t}):a.media.webpage&&(a.media.webpage.url?c=a.media.webpage.url:(h=document.createElement("textarea"),h.innerHTML=a.media.webpage.frameTag,p=u(h.value),p&&p.length&&(c=p[0])),f({id:c,media:o,type:"webpages",section:a,sectionNumber:l,isMainContent:!0,storyType:t})));return o},i=function(e,t){var n=null;return t==="Map Journal"?n=e.story.sections:t==="Map Series"&&(n=e.story.entries),n},s=function(e,t,n,r){var i="",s=document.createElement("textarea"),a=[],l=[],c="";r==="Map Journal"?i=t.content:r==="Map Series"&&(i=t.description),s.innerHTML=i,l=o(s.value),a=u(s.value);for(var h=0;h<a.length;h++)c=a[h],c.indexOf(".vimeo.com")!==-1||c.indexOf(".youtube.com")!==-1?f({id:c,media:e,type:"videos",section:t,sectionNumber:n,isMainContent:!1,storyType:r}):f({id:c,media:e,type:"webpages",section:t,sectionNumber:n,isMainContent:!1,storyType:r});for(var p=0;p<l.length;p++)f({id:l[p],media:e,type:"images",section:t,sectionNumber:n,isMainContent:!1,storyType:r})},o=function(e){var t=/<img[^>]*?src="(.*?)".*?>/gi,n=a(t,e);return n},u=function(e){var t=/<iframe[^>]*?src="(.*?)".*?>/gi,n=a(t,e);return n},a=function(e,t){var n=[],r=null;while(r=e.exec(t))n.push(r[1]);return n},f=function(t){var n=t.media[t.type],r=p(t.id,n),i={},s=e.cleanHtmlText(t.section.title),o=-1,u={};r===-1?h({id:t.id,items:n,sectionNumber:t.sectionNumber,title:s,isAction:!1,isMainContent:t.isMainContent,actionId:null,details:t.details}):(i=n[r],o=d(i.sections,t.sectionNumber),o===-1?v(i.sections,t.sectionNumber,s,!1,t.isMainContent,null):(u=i.sections[o],t.isMainContent?u.mainContent=!0:u.sideContent=!0)),t.isMainContent&&(t.storyType==="Map Journal"||t.storyType==="Map Series")&&l({media:t.media,section:t.section,sectionNumber:t.sectionNumber,title:s,storyType:t.storyType})},l=function(e){if(!e.section.contentActions)return;var t=null;e.storyType==="Map Journal"?t=e.section.content:t=e.section.description;for(var n=0;n<e.section.contentActions.length;n++){var r=e.section.contentActions[n],i="";t.indexOf(r.id)!==-1&&r.media&&(r.media.webmap?(i=r.media.webmap.id,c(i,e.media.maps,e.sectionNumber,e.title,r.id)):r.media.image?(i=r.media.image.url,c(i,e.media.images,e.sectionNumber,e.title,r.id)):r.media.video?(i=r.media.video.url,c(i,e.media.videos,e.sectionNumber,e.title,r.id)):r.media.webpage&&(i=r.media.webpage.url,c(i,e.media.webpages,e.sectionNumber,e.title,r.id)))}},c=function(e,t,n,r,i){var s=p(e,t),o={},u=-1,a={};s===-1?h({id:e,items:t,sectionNumber:n,title:r,isAction:!0,isMainContent:!1,actionId:i}):(o=t[s],u=d(o.sections,n),u===-1?v(o.sections,n,r,!0,!1,i):(a=o.sections[u],a.numActions++))},h=function(e){var t={id:e.id,sections:[],details:e.details};v(t.sections,e.sectionNumber,e.title,e.isAction,e.isMainContent,e.actionId),e.items.push(t)},p=function(e,t){var n=-1;for(var r=0;r<t.length;r++)if(t[r].id===e)return n=r,n;return n},d=function(e,t){var n=-1;for(var r=0;r<e.length;r++)if(e[r].sectionNum===t)return n=r,n;return n},v=function(e,t,n,r,i,s){if(t===-1)return;var o=r?1:0,u={sectionNum:t,title:n,numActions:o,mainContent:i,sideContent:!r&&!i,actionId:s||""};e.push(u)},m=function(e,t){var n=0,r={},s=i(e,t);for(var o=0;o<s.length;o++){var u=s[o];u.status!=="HIDDEN"&&u.media.webmap&&(r[u.media.webmap.id]||(r[u.media.webmap.id]=!0,n+=1))}return n},g=function(n,r){var i="";if(!n.settings.header||!n.settings.header.logoURL){var s="resources/tpl/viewer/icons/esri-logo-white.png",o=t.getAbsolutePath(s,r);i=e.forceProtocolRelativeURL(o)}else n.settings.header.logoURL==="NO_LOGO"?i="":i=n.settings.header.logoURL;return i};return{init:n,getMedia:r,getNumMapsInStory:m,updateMediaItem:f,findLogoUrl:g}}),define("my/content/builders/MapJournalBuilder",["my/content/builders/SectionedStory"],function(e){"use strict";return function(t,n){var r="",i=function(t){r=t,e.init()},s=function(t){var n=i18n.infographics.mapJournal,r=[];return!t||!t.story||!t.settings?r=[{title:n.firstTitle,value:window.engStrings.notApplicable,img:"icon-stories-sections"},{title:n.secondTitle,value:n.secondValueA,img:"icon-stories-side_panel"},{title:n.thirdTitle,value:0,img:"icon-stories-marker"}]:r=[{title:n.firstTitle,value:t.story.sections.length,img:"icon-stories-sections"},{title:n.secondTitle,value:t.settings.layout.id==="side"?n.secondValueA:n.secondValueB,img:t.settings.layout.id==="side"?"icon-stories-side_panel":"icon-stories-floating"},{title:n.thirdTitle,value:e.getNumMapsInStory(t,"Map Journal"),img:"icon-stories-marker"}],r},o=function(t,n){var i=e.getMedia(t,"Map Journal",n,r);return i},u=function(){return i18n.content.component.mapJournal},a=function(){return i18n.content.titleType.mapJournal},f=function(t,n){return e.findLogoUrl(t,n)};return i(n),{buildInfographics:s,getMedia:o,getStoryComponent:u,getTitleType:a,findLogoUrl:f}}}),define("my/content/builders/MapSeriesBuilder",["my/content/builders/SectionedStory"],function(e){"use strict";return function(t,n){var r="",i="",s="",o=function(t){i=t,e.init()},u=function(t){var n="",r="",i="",s=[],o=null,u=i18n.infographics.mapSeries;return!t||!t.story||!t.settings?(s=[{title:i18n.infographics.mapSeries.firstTitleB,value:window.engStrings.notApplicable,img:"icon-stories-sections"},{title:u.secondTitle,value:window.engStrings.notApplicable,img:"icon-stories-bulleted"},{title:u.thirdTitle,value:0,img:"icon-stories-marker"}],s):(o=t.settings.layout.id,o==="bullet"?(n=u.firstTitleA,r="icon-stories-bulleted",i=u.secondValueA):o==="accordion"?(n=u.firstTitleB,r="icon-stories-accordion",i=u.secondValueB):o==="tab"&&(n=u.firstTitleC,r="icon-stories-tabbed",i=u.secondValueC),s=[{title:n,value:t.story.entries.length,img:"icon-stories-sections"},{title:u.secondTitle,value:i,img:r},{title:u.thirdTitle,value:e.getNumMapsInStory(t,"Map Series"),img:"icon-stories-marker"}],s)},a=function(t,n){var r=e.getMedia(t,"Map Series",n,i);return r},f=function(){return s},l=function(){return i18n.content.titleType.mapSeries},c=function(t,n){return e.findLogoUrl(t,n)};return!t||!t.settings?s="":(r=t.settings.layout.id,s=i18n.content.component[r]),o(n),{buildInfographics:u,getMedia:a,getStoryComponent:f,getTitleType:l,findLogoUrl:c}}}),define("my/content/builders/CascadeBuilder",["my/content/builders/SectionedStory","my/helpers/ImageHelper","my/helpers/Formatter"],function(e,t,n){"use strict";return function(r,i){var s="",o=function(t){s=t,e.init()},u=function(e){var t=i18n.infographics.cascade,n=[],r=0,i=null;return!e||!e.sections||!e.settings?n=[{title:t.firstTitle,value:window.engStrings.notApplicable,img:"icon-stories-sections"},{title:t.secondTitle,value:r,img:"icon-stories-marker"}]:(i=a(e,!1).maps,i&&i.length&&(r=i.length),n=[{title:t.firstTitle,value:e.sections.length,img:"icon-stories-sections"},{title:t.secondTitle,value:r,img:"icon-stories-marker"}]),n},a=function(t,n){var r={maps:[],scenes:[],images:[],videos:[],webpages:[],audio:[]},i=null,o=0;if(n)return r;if(!t)return r;var u=g(t,s);u&&e.updateMediaItem({id:u,media:r,type:"images",section:{},sectionNumber:-1,isMainContent:!1,storyType:"Cascade",details:{isLogo:!0}});for(var a=0;a<t.sections.length;a++){i=t.sections[a],o=a+1;switch(i.type){case"cover":case"sequence":case"title":c(i.background,i.foreground.blocks,r,o);break;case"immersive":f(i,r,o);break;case"credits":l(i,r,o);break;default:}}return r},f=function(e,t,n){var r=null,i=null,s=null,o=null;for(var u=0;u<e.views.length;u++){s=e.views[u],r=s.background,i=[];for(var a=0;a<s.foreground.panels.length;a++)o=s.foreground.panels[a],o&&o.blocks&&o.blocks.length&&(i=i.concat(o.blocks));c(r,i,t,n)}},l=function(e,t,n){var r=[],i=null;for(var s=0;s<e.foreground.panels.length;s++)i=e.foreground.panels[s],i.type==="blocks"&&i.blocks&&i.blocks.length&&(r=r.concat(i.blocks));c(e.background,r,t,n)},c=function(e,t,n,r){h(e,n,r),p(t,n,r)},h=function(n,r,i){var o="";n.alternate&&n.alternate.image&&(o=t.getAbsolutePath(n.alternate.image.url,s),e.updateMediaItem({id:o,media:r,type:"images",section:{},sectionNumber:i,isMainContent:!0,storyType:"Cascade"}));switch(n.type){case"image":o=t.getAbsolutePath(n.image.url,s),e.updateMediaItem({id:o,media:r,type:"images",section:{},sectionNumber:i,isMainContent:!0,storyType:"Cascade"});break;case"webmap":e.updateMediaItem({id:n.webmap.id,media:r,type:"maps",section:{},sectionNumber:i,isMainContent:!0,storyType:"Cascade"});break;case"webscene":e.updateMediaItem({id:n.webscene.id,media:r,type:"scenes",section:{},sectionNumber:i,isMainContent:!0,storyType:"Cascade"});break;case"video":e.updateMediaItem({id:n.video.url,media:r,type:"videos",section:{},sectionNumber:i,isMainContent:!0,storyType:"Cascade"});break;case"webpage":e.updateMediaItem({id:n.webpage.url,media:r,type:"webpages",section:{},sectionNumber:i,isMainContent:!0,storyType:"Cascade"});break;case"audio":e.updateMediaItem({id:n.audio.url,media:r,type:"audio",section:{},sectionNumber:i,isMainContent:!0,storyType:"Cascade"});break;default:}},p=function(e,t,n){if(e&&e.length)for(var r=0;r<e.length;r++)e[r].type==="image-gallery"?d(e[r],t,n):h(e[r],t,n)},d=function(e,t,n){if(e&&e["image-gallery"]){var r=e["image-gallery"].images;if(r&&r.length)for(var i=0;i<r.length;i++){var s={type:"image",image:r[i]};h(s,t,n)}}},v=function(){return i18n.content.component.cascade},m=function(){return i18n.content.titleType.cascade},g=function(e,r){var i="",s=!1;!e.settings.header||!e.settings.header.logo?s=!0:e.settings.header.logo.enabled?e.settings.header.logo.url.indexOf("resources/tpl/viewer/icons/esri-logo.png")!==-1?s=!0:i=e.settings.header.logo.url:i="";if(s){var o="resources/tpl/viewer/icons/esri-logo.png",u=t.getAbsolutePath(o,r);i=n.forceProtocolRelativeURL(u)}return i};return o(i),{buildInfographics:u,getMedia:a,getStoryComponent:v,getTitleType:m,findLogoUrl:g}}}),define("my/content/builders/SwipeSpyglassBuilder",["my/helpers/ImageHelper","my/helpers/Formatter"],function(e,t){"use strict";return function(n){var r=n,i="",s=function(e){var t=i18n.infographics.swipeSpyglass,n=[];return!e||!e.webmaps?n=[{title:t.firstTitle,value:1,img:"icon-stories-sections"},{title:t.secondTitle,value:t.secondValueA,img:"icon-stories-swipe"},{title:t.thirdTitle,value:1,img:"icon-stories-marker"}]:n=[{title:t.firstTitle,value:e.bookmarks?e.bookmarks.length:1,img:"icon-stories-sections"},{title:t.secondTitle,value:e.layout==="swipe"?t.secondValueA:t.secondValueB,img:e.layout==="swipe"?"icon-stories-swipe":"icon-stories-spyglass"},{title:t.thirdTitle,value:e.webmaps.length,img:"icon-stories-marker"}],n},o=function(e,t){var n={maps:[],images:[]},i={};if(t&&!e)return n;var s=f(e,r);s&&n.images.push({id:s,title:"",details:{isLogo:!0}});if(t&&e.webmap)return i={id:e.webmap},n.maps.push(i),n;if(e.dataModel==="TWO_WEBMAPS")for(var o=0;o<e.webmaps.length;o++)i={id:e.webmaps[o]},n.maps.push(i);else e.dataModel==="TWO_LAYERS"&&(i={id:e.webmap},n.maps.push(i));return n},u=function(){return i},a=function(){return i18n.content.titleType.mapJournal},f=function(n,r){var i="";if(!n.logoURL){var s="resources/icons/esri-logo-white.png",o=e.getAbsolutePath(s,r);i=t.forceProtocolRelativeURL(o)}else n.logoURL==="NO_LOGO"?i="":i=n.logoURL;return i};return{buildInfographics:s,getMedia:o,getStoryComponent:u,getTitleType:a,findLogoUrl:f}}}),!function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function r(e,t){return n(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){return(r=n.call(null,i,e,t))?void 0:!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){return(r=n.call(null,i,e,t))?!1:void 0}),!!r):r},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s,o,u=this,a=arguments;return s=function(){r=null,n||(i=e.apply(u,a))},o=n&&!r,clearTimeout(r),r=setTimeout(s,t),o&&(i=e.apply(u,a)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},noop:function(){}}}(),n="0.10.5",r=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function r(e){return function(){var n=[].slice.call(arguments,0);return function(r){var i=[];return t.each(n,function(n){i=i.concat(e(t.toStr(r[n])))}),i}}}return{nonword:n,whitespace:e,obj:{nonword:r(n),whitespace:r(e)}}}(),i=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function r(){this.head=this.tail=null}function i(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new i(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];return t?(this.list.moveToFront(t),t.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new r}}),t.mixin(r.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),s=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function r(e){return JSON.stringify(t.isUndefined(e)?null:e)}function i(e){return JSON.parse(e)}var s,o;try{s=window.localStorage,s.setItem("~~~","!"),s.removeItem("~~~")}catch(u){s=null}return o=s&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),i(s.getItem(this._prefix(e)))},set:function(e,i,o){return t.isNumber(o)?s.setItem(this._ttlKey(e),r(n()+o)):s.removeItem(this._ttlKey(e)),s.setItem(this._prefix(e),r(i))},remove:function(e){return s.removeItem(this._ttlKey(e)),s.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],r=s.length;for(e=0;r>e;e++)(t=s.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var r=i(s.getItem(this._ttlKey(e)));return t.isNumber(r)&&n()>r?!0:!1}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,o),e}(),o=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?r(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=t.cache===!1?new i(0):a}function r(n){return function(r,i){function s(e){t.defer(function(){u.resolve(e)})}function o(e){t.defer(function(){u.reject(e)})}var u=e.Deferred();return n(r,i,s,o),u}}var s=0,o={},u=6,a=new i(10);return n.setMaxPendingRequests=function(e){u=e},n.resetCache=function(){a.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function r(t){n&&n(null,t),l._cache.set(e,t)}function i(){n&&n(!0)}function a(){s--,delete o[e],l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var f,l=this;this.cancelled||e!==this.lastUrl||((f=o[e])?f.done(r).fail(i):u>s?(s++,o[e]=this._send(e,t).done(r).fail(i).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,r){var i;return t.isFunction(n)&&(r=n,n={}),this.cancelled=!1,this.lastUrl=e,(i=this._cache.get(e))?t.defer(function(){r&&r(null,i)}):this._get(e,n,r),!!i},cancel:function(){this.cancelled=!0}}),n}(),u=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function r(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function i(){return{ids:[],children:{}}}function s(e){for(var t={},n=[],r=0,i=e.length;i>r;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}function o(e,t){function n(e,t){return e-t}var r=0,i=0,s=[];e=e.sort(n),t=t.sort(n);for(var o=e.length,u=t.length;o>r&&u>i;)e[r]<t[i]?r++:e[r]>t[i]?i++:(s.push(e[r]),r++,i++);return s}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var s,o;s=n.datums.push(e)-1,o=r(n.datumTokenizer(e)),t.each(o,function(e){var t,r,o;for(t=n.trie,r=e.split("");o=r.shift();)t=t.children[o]||(t.children[o]=i()),t.ids.push(s)})})},get:function(e){var n,i,u=this;return n=r(this.queryTokenizer(e)),t.each(n,function(e){var t,n,r,s;if(i&&0===i.length)return!1;for(t=u.trie,n=e.split("");t&&(r=n.shift());)t=t.children[r];return t&&0===n.length?(s=t.ids.slice(0),void (i=i?o(i,s):s)):(i=[],!1)}),i?t.map(s(i),function(e){return u.datums[e]}):[]},reset:function(){this.datums=[],this.trie=i()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),a=function(){"use strict";function r(e){return e.local||null}function i(r){var i,s;return s={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(i=r.prefetch||null)&&(i=t.isString(i)?{url:i}:i,i=t.mixin(s,i),i.thumbprint=n+i.thumbprint,i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",!i.url&&e.error("prefetch requires url to be set")),i}function s(n){function r(e){return function(n){return t.debounce(n,e)}}function i(e){return function(n){return t.throttle(n,e)}}var s,o;return o={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(s=n.remote||null)&&(s=t.isString(s)?{url:s}:s,s=t.mixin(o,s),s.rateLimiter=/^throttle$/i.test(s.rateLimitBy)?i(s.rateLimitWait):r(s.rateLimitWait),s.ajax.type=s.ajax.type||"GET",s.ajax.dataType=s.ajax.dataType||"json",delete s.rateLimitBy,delete s.rateLimitWait,!s.url&&e.error("remote requires url to be set")),s}return{local:r,prefetch:i,remote:s}}();!function(n){"use strict";function i(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=f(t.sorter),this.dupDetector=t.dupDetector||l,this.local=a.local(t),this.prefetch=a.prefetch(t),this.remote=a.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new u({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new s(this.cacheKey):null}function f(e){function n(t){return t.sort(e)}function r(e){return e}return t.isFunction(e)?n:r}function l(){return!1}var c,h;return c=n.Bloodhound,h={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=i,i.noConflict=function(){return n.Bloodhound=c,i},i.tokenizers=r,t.mixin(i.prototype,{_loadPrefetch:function(t){function n(e){s.clear(),s.add(t.filter?t.filter(e):e),s._saveToStorage(s.index.serialize(),t.thumbprint,t.ttl)}var r,i,s=this;return(r=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(r),i=e.Deferred().resolve()):i=e.ajax(t.url,t.ajax).done(n),i},_getFromRemote:function(e,t){function n(e,n){t(e?[]:s.remote.filter?s.remote.filter(n):n)}var r,i,s=this;if(this.transport)return e=e||"",i=encodeURIComponent(e),r=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,i),this.transport.get(r,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(h.data,e,n),this.storage.set(h.protocol,location.protocol,n),this.storage.set(h.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(h.data),n.protocol=this.storage.get(h.protocol),n.thumbprint=this.storage.get(h.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){i.add(t.isFunction(s)?s():s)}var r,i=this,s=this.local;return r=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),s&&r.done(n),this.transport=this.remote?new o(this.remote):null,this.initPromise=r.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function r(e){var r=s.slice(0);t.each(e,function(e){var n;return n=t.some(r,function(t){return i.dupDetector(e,t)}),!n&&r.push(e),r.length<i.limit}),n&&n(i.sorter(r))}var i=this,s=[],o=!1;s=this.index.get(e),s=this.sorter(s).slice(0,this.limit),s.length<this.limit?o=this._getFromRemote(e,r):this._cancelLastRemoteRequest(),o||(s.length>0||!this.transport)&&n&&n(s)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&o.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),i}(this)}(window.jQuery),define("lib-app/typeahead",function(){}),define("my/helpers/FilterSort",["lib-app/typeahead"],function(){"use strict";var e={},t={sortType:"",reversed:!1},n=[],r=!1,i=[],s="",o=function(t){e=new Bloodhound({name:"results",local:t,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("title","type","summary","tagsString"),queryTokenizer:Bloodhound.tokenizers.whitespace})},u=function(t){e.add(t)},a=function(t){e.clear(),e.add(t)},f=function(){r=!1,i=[],s=""},l=function(){return s},c=function(n,o,u){var a=[],l=[];if(e)if(n===""){if(typeof u=="function"){var c={sortType:t.sortType,reversed:t.reversed};s=n,p(),f(),a=b(o,c,!1),l=k(a),u(l,!0,!0)}}else n&&n.length>1&&e.get(n,function(e){if(typeof u=="function"){var o={sortType:t.sortType,reversed:t.reversed};s=n,p(),a=b(e,o,!1),i=a,r=!0,l=k(a),u(l,!0,!1)}})},h=function(){return t},p=function(){t.sortType="",t.reversed=!1},d=function(e){var t=[];return t=e.sort(function(e,t){var n="",r="";return e.title&&(n=e.title.toLowerCase()),t.title&&(r=t.title.toLowerCase()),n<r?-1:n>r?1:0}),t},v=function(e){var t=[];return t=e.sort(function(e,t){var n=e.numViews,r=t.numViews;return n>r?-1:n<r?1:0}),t},m=function(e){var t=[];return t=e.sort(function(e,t){var n=e.modified,r=t.modified;return n>r?-1:n<r?1:0}),t},g=function(e){var t=[];return t=e.sort(function(e,t){return e.hasErrors>t.hasErrors?-1:e.hasErrors<t.hasErrors?1:0}),t},y=function(e,t,n){var r=[],i=0,s=0;return r=e.sort(function(e,r){i=e.pinNumber,s=r.pinNumber;if(i===t||i===n)i=0;if(s===t||s===n)s=0;return i-s}),r},b=function(e,n,r){var i=[];if(t.sortType===n.sortType)return r?(i=e.reverse(),t.reversed=!t.reversed,i):(i=e,i);t.sortType=n.sortType,t.reversed=n.reversed;switch(t.sortType){case"title":i=d(e);break;case"num-views":i=v(e);break;case"modified":i=m(e);break;case"all-clear":i=g(e);break;default:i=e}return t.reversed===!0&&i.reverse(),i},w=function(e,t){var r=S(e),i=null;return r===-1&&(n.push(e),i=k(t)),i},E=function(e,s){var o=S(e),u=null,a=[],f=[],l={sortType:t.sortType,reversed:t.reversed};return o!==-1&&(n.splice(o,1),p(),r?f=i:f=s,a=b(f,l,!1),u=k(a)),u},S=function(e){var t=null;for(var r=0;r<n.length;r++){t=n[r];if(t.category===e.category&&t.value===e.value)return r}return-1},x=function(e){var t=null,r=null;for(var i=0;i<n.length;i++)r=n[i],r.category===e&&(t=r);return t},T=function(e){var t=S(e);return t===-1?!1:!0},N=function(){n=[]},C=function(){return n},k=function(e){var i=[],s=null,o=null,u=!1,a={items:[],clearList:!1};if(n.length===0)return!r&&(!t.sortType||t.sortType==="modified"&&!t.reversed)&&(a.clearList=!0),a.items=e,a;for(var f=0;f<n.length;f++){i=[],o=n[f];for(var l=0;l<e.length;l++)s=e[l],u=s[o.category]===o.value,u&&i.push(s);e=i}return a.items=i,a};return{initBloodhound:o,add:u,clearSearch:f,reseedSuggestions:a,getSearchTerm:l,filterResults:c,getSortedBy:h,clearSortedBy:p,sortByPinNumber:y,sort:b,addFilter:w,removeFilter:E,getCriteriaByCategory:x,checkIsInFilterCriteria:T,getFilterCriteria:C,clearFilterCriteria:N}}),define("my/content/builders/PlacesStory",["dojo/Deferred","esri/layers/FeatureLayer","esri/layers/CSVLayer"],function(e,t,n){"use strict";var r=function(t,n,r){var i=new e,s=t.electSourceLayer(n,r),o=t.getData(r,s);return o.then(function(e){var n=t.convertToMedia(e,r);i.resolve(n)}),i.promise},i=function(e,n,r,i){var s=new t(n),a=o(e,r);s.on("load",function(t){i(e,s,t,a,r)}),s.on("error",function(){u(e,a,r)})},s=function(e,t,r,i){var s=new n(t),a=o(e,r);s.on("load",function(t){i(e,t,a,r)}),s.on("error",function(){u(e,a,r)})},o=function(e,t){var n=window.setTimeout(function(){u(e,n,t)},app.cfg.TIMEOUT_MILLISECONDS);return n},u=function(e,t,n){window.clearTimeout(t),e.resolve({data:[],electedFields:{},values:n,isFeatureService:!0})};return{getMedia:r,createFeatureLayerMedia:i,createCSVLayerMedia:s}}),define("my/content/builders/MapTourBuilder",["dojo/Deferred","my/helpers/Formatter","my/helpers/ImageHelper","my/helpers/FilterSort","esri/tasks/query","my/models/Credentials","my/content/tabs/Videos","my/content/builders/PlacesStory"],function(e,t,n,r,i,s,o,u){"use strict";return function(s,a){var f="",l={},c=function(e,t){f=t,e&&e.order&&d(e.order,e.firstRecordAsIntro)},h=function(e){var t=i18n.infographics.mapTour,n=[],r=-1,i="",s="";return!e||!e.order?n=[{title:t.firstTitle,value:window.engStrings.notApplicable,img:"icon-stories-sections"},{title:t.secondTitle,value:t.secondValueB,img:"icon-stories-tour-three-layout"},{title:t.thirdTitle,value:e?t.thirdValueLoading:i18n.infographics.mapTour.thirdValueUnknown,img:"icon-stories-marker"}]:(r=e.firstRecordAsIntro?e.order.length-1:e.order.length,e.layout==="side-panel"?(i=t.secondValueC,s="icon-stories-tour-integrated"):e.layout==="integrated"?(i=t.secondValueA,s="icon-stories-tour-integrated"):(i=t.secondValueB,s="icon-stories-tour-three-layout"),n=[{title:t.firstTitle,value:r,img:"icon-stories-sections"},{title:t.secondTitle,value:i,img:s},{title:t.thirdTitle,value:t.thirdValueLoading,img:"icon-stories-marker"}]),n},p=function(e){var n={images:[],videos:[],webpages:[]},i={},s={},o={},u="";if(!e||!e.data)return n;var a=O(e.values,f);a&&n.images.push({id:a,title:"",pinNumber:-1,isFeatureService:!1,isThumbnail:!1,details:{isLogo:!0}});for(var l=0;l<e.data.length;l++)i=e.data[l],u=i.attributes[e.electedFields.fieldName]?t.cleanHtmlText(i.attributes[e.electedFields.fieldName]):i18n.content.general.noTitle,s={id:i.attributes[e.electedFields.fieldURL],title:u,pinNumber:k({order:e.values.order,id:i.attributes[e.electedFields.fieldID],firstRecordIsIntro:e.values.firstRecordAsIntro,item:i,layout:e.values.layout}),isFeatureService:e.isFeatureService,isThumbnail:!1},o={id:i.attributes[e.electedFields.fieldThumb],title:u,pinNumber:k({order:e.values.order,id:i.attributes[e.electedFields.fieldID],firstRecordIsIntro:e.values.firstRecordAsIntro,item:i,layout:e.values.layout}),isFeatureService:e.isFeatureService,isThumbnail:!0},s.pinNumber!==-1&&(v(n,s,i,e.values,e.electedFields,e.isFeatureService),e.values.layout!=="side-panel"&&v(n,o,i,e.values,e.electedFields,e.isFeatureService));return n.images=r.sortByPinNumber(n.images,i18n.content.info.introRecord,i18n.content.info.coverRecord),n.videos=r.sortByPinNumber(n.videos,i18n.content.info.introRecord,i18n.content.info.coverRecord),n.webpages=r.sortByPinNumber(n.webpages,i18n.content.info.introRecord,i18n.content.info.coverRecord),n},d=function(e,t){for(var n=0;n<e.length;n++)e[n].visible===!1&&(t?n!==0&&(e.splice(n,1),n--):(e.splice(n,1),n--));return e},v=function(e,t,n,r,i,s){var o=n.attributes[i.fieldIsVideo],u=n.attributes[i.fieldURL],a=o&&o.toString().toLowerCase()==="true",f=!1;t.isThumbnail?e.images.push(t):a?g(e,t,u):(f=m(u,r,s),f?e.images.push(t):g(e,t,u))},m=function(e,t,n){return e?e.indexOf("isVideo")!==-1?!1:/((\.jp(e)?g)|(.png)|(.gif)|(.bmp))$/i.test(e)||e.indexOf("isImage")>-1?!0:t.templateCreation==="2.1"?t.disableVideo||n:!0:!0},g=function(e,t,n){var r=y(n);r?e.videos.push(t):e.webpages.push(t)},y=function(e){var t=(new RegExp(o.youTubeRegex)).test(e),n=(new RegExp(o.vimeoRegex)).test(e);return t||n?!0:!1},b=function(e,t){var n="",r=null;for(var i=0;i<e.length;i++){r=e[i];if(r.featureCollection){n=t.sourceLayer.substring(0,t.sourceLayer.length-2);if(r.id===n)return{layer:r.featureCollection.layers[0],featureCollection:!0}}else if(r.id===t.sourceLayer)return{layer:r,featureCollection:!1}}return null},w=function(n,r){var i=new e,s=null,o=null,a=n.fieldsOverride?n.fieldsOverride:null;return T(a),r?(s=r.layer,r.featureCollection?(o=N(s.layerDefinition.fields),i.resolve({data:s.featureSet.features,electedFields:o,values:n,isFeatureService:!1})):s.id.substring(0,4).toLowerCase()==="csv_"?u.createCSVLayerMedia(i,s.url,n,S):(s.url=t.forceProtocolRelativeURL(s.url),u.createFeatureLayerMedia(i,s.url,n,E)),i.promise):(i.resolve({data:[],electedFields:{},values:n,isFeatureService:!1}),i.promise)},E=function(e,t,n,r,s){var o=N(n.layer.fields),u=null;x(n.layer.fields)?(u=new i,u.outFields=["*"],u.where="1=1",t.queryFeatures(u,function(t){window.clearTimeout(r),e.resolve({data:t.features,electedFields:o,values:s,isFeatureService:!0})},function(){window.clearTimeout(r),e.resolve({data:[],electedFields:o,values:s,isFeatureService:!0})})):(window.clearTimeout(r),e.resolve({data:[],electedFields:o,values:s,isFeatureService:!0}))},S=function(e,t,n,r){window.clearTimeout(n);if(x(t.layer.fields)){var i=t.layer._csvFC.featureSet.features,s=N(t.layer.fields);e.resolve({data:i,electedFields:s,values:r,isFeatureService:!1})}},x=function(e){return C(e,l.pic_url)!==""&&C(e,l.thumb_url)!==""},T=function(e){l={objectid:["__objectid","objectid","id","fid"],name:["name","title","name-short","name-long"],description:["description","caption","snippet","comment"],color:["icon_color","color","style"],pic_url:["pic_url","url","pic","picture"],thumb_url:["thumb_url","thumb","thumbnail"],is_video:["is_video","video","isVideo"]},e&&(l.objectid.join(e.fieldID),l.name.join(e.fieldName),l.description.join(e.fieldDescription),l.color.join(e.fieldIconColor),l.pic_url.join(e.fieldURL),l.thumb_url.join(e.fieldThumb),l.is_video.join(e.fieldIsVideo))},N=function(e){return{fieldID:C(e,l.objectid),fieldName:C(e,l.name),fieldDescription:C(e,l.description),fieldURL:C(e,l.pic_url),fieldThumb:C(e,l.thumb_url),fieldIconColor:C(e,l.color),fieldIsVideo:C(e,l.is_video)}},C=function(e,t){for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)if(e[r].name.toLowerCase().trim()===t[n].toLowerCase().trim())return e[r].name;return""},k=function(e){if(e.order){for(var t=0;t<e.order.length;t++)if(e.order[t].id===e.id){if(e.firstRecordIsIntro){if(t===0){var n=e.layout==="side-panel"?i18n.content.info.coverRecord:i18n.content.info.introRecord;return n}return t}return t+1}return-1}return e.item.attributes.objectid},L=function(){return i18n.content.component.mapTour},A=function(){return i18n.content.titleType.mapTour},O=function(e,r){var i="";if(!e.logoURL){var s="resources/icons/esri-logo-white.png",o=n.getAbsolutePath(s,r);i=t.forceProtocolRelativeURL(o)}else e.logoURL==="NO_LOGO"?i="":i=e.logoURL;return i};return c(s,a),{buildInfographics:h,electSourceLayer:b,getData:w,convertToMedia:p,getStoryComponent:L,getTitleType:A,findLogoUrl:O}}}),define("my/content/builders/CrowdsourceBuilder",["dojo/_base/lang","dojo/Deferred","esri/layers/FeatureLayer","esri/tasks/query","my/content/builders/PlacesStory","my/helpers/ImageHelper","my/helpers/Formatter"],function(e,t,n,r,i,s,o){"use strict";return function(n){var u="",a=function(e){u=e},f=function(e){var t=i18n.infographics.crowdsource,n=[];return e?n=[{title:t.firstTitle,value:t.secondValueLoading,img:"icon-stories-sections"},{title:t.secondTitle,value:t.secondValueLoading,img:"icon-stories-marker"}]:n=[{title:t.firstTitle,value:window.engStrings.notApplicable,img:"icon-stories-sections"},{title:t.secondTitle,value:i18n.infographics.crowdsource.secondValueUnknown,img:"icon-stories-marker"}],n},l=function(t,n){var r=null,i=null;if(n){r=e.getObject("settings.components.map.crowdsourceLayer.id",!1,n);if(r)for(var s=0;s<t.length;s++){i=t[s];if(i.id===r)return{layer:i,featureCollection:!1}}}return null},c=function(e,t,n,i,s){var o=new r;o.outFields=["*"],o.where='"Vetted"<3',t.queryCount(o,function(t){window.clearTimeout(i),e.resolve({values:s,numberContributions:t})},function(){window.clearTimeout(i),e.resolve({values:s})})},h=function(e,n){var r=new t;return i.createFeatureLayerMedia(r,n.layer.url,e,c),r.promise},p=function(t){var n={images:[],contributions:0};if(!t)return n;var r=m(t.values,u);r&&n.images.push({id:r,title:"",details:{isLogo:!0}}),n.contributions=t.numberContributions;var i="",o=e.getObject("settings.components.intro.background",!1,t.values);return o&&o.type==="photo"&&(i=s.getAbsolutePath(o.source,u),n.images.push({id:i,title:i18n.content.contentType.introImage})),n},d=function(){return i18n.content.component.crowdsource},v=function(){return i18n.content.titleType.crowdsource},m=function(e,t){var n="";if(!e.settings.components.header.logo||!e.settings.components.header.logo.source)n="";if(e.settings.components.header.logo.type==="esri"){var r=e.settings.components.header.logo.source,i=s.getAbsolutePath(r,t);n=o.forceProtocolRelativeURL(i)}else n=e.settings.components.header.logo.source;return n};return a(n),{buildInfographics:f,electSourceLayer:l,getData:h,convertToMedia:p,getStoryComponent:d,getTitleType:v,findLogoUrl:m}}}),define("my/content/builders/ShortlistBuilder",["dojo/Deferred","dojo/_base/lang","my/helpers/Formatter","my/helpers/ImageHelper","my/content/builders/PlacesStory"],function(e,t,n,r,i){"use strict";return function(s,o){var u="",a=function(e){u=e},f=function(e){var t=i18n.infographics.shortlist,n=[],r=0;return e?(e.tabs&&(r=Object.keys(e.tabs).length),n=[{title:t.firstTitle,value:t.thirdValueLoading,img:"icon-stories-sections"},{title:t.secondTitle,value:r,img:"icon-stories-sections"},{title:t.thirdTitle,value:t.thirdValueLoading,img:"icon-stories-marker"}]):n=[{title:t.firstTitle,value:window.engStrings.notApplicable,img:"icon-stories-sections"},{title:t.secondTitle,value:window.engStrings.notApplicable,img:"icon-stories-sections"},{title:t.thirdTitle,value:t.thirdValueUnknown,img:"icon-stories-marker"}],n},l=function(e,t){return t.isExternalData?h(e,t):c(e,t)},c=function(e,t){var n=null,r=!1,i=!1;for(var s=0;s<e.length;s++){n=e[s],r=n.id===t.shortlistLayerId,i=n.id===t.shortlistLayerId.substring(0,t.shortlistLayerId.length-2);if(r||i)return{layer:n,isFeatureCollection:!0}}return null},h=function(e){var t=null,n=null,r=e.slice(0).reverse();for(var i=0;i<r.length;i++){t=r[i],t.featureCollection?n=p(t,t.featureCollection.layers[0],!0):t.type==="CSV"&&(n=p(t,t,!1));if(n)return n}return null},p=function(e,t,n){var r="tab_name";if(t)for(var i=0;i<t.layerDefinition.fields.length;i++)if(t.layerDefinition.fields[i].name.toLowerCase()===r)return{layer:e,isFeatureCollection:n};return null},d=function(t,n){var r=new e;return t.isExternalData?v(r,n,t):g(r,n),r.promise},v=function(e,t,n){if(!t||!t.layer){e.resolve({data:[]});return}t.layer.featureCollection?g(e,t):t.layer.type==="CSV"&&i.createCSVLayerMedia(e,t.layer.url,n,m)},m=function(e,t,n){window.clearTimeout(n);var r=t.layer._csvFC.featureSet.features;e.resolve({data:r})},g=function(e,n){var r=null,i=null;n&&n.layer&&(i=t.getObject("featureCollection.layers",!1,n.layer),i&&i.length&&(r=t.getObject("featureSet.features",!1,i[0]))),e.resolve({data:r})},y=function(e,t){var r={images:[],featureSet:null},i={},s={},o={},a={},f="";if(!e||!e.data)return r;var l=S(t,u);l&&r.images.push({id:l,emptyShortlistImage:!1,title:"",tabId:"",placeNumber:-1,isThumbnail:!1,details:{isLogo:!0}}),r.featureSet=e.data;for(var c=0;c<e.data.length;c++)i=e.data[c].attributes,t.isExternalData?s={picUrl:b(i,"pic_url"),name:b(i,"name"),tabId:null,number:b(i,"number"),thumbUrl:b(i,"thumb_url")}:s={picUrl:i.pic_url,name:i.name,tabId:i.tab_id,number:i.number,thumbUrl:i.thumb_url},f=s.name?n.cleanHtmlText(s.name.toString()).trim():i18n.content.general.noTitle,o={id:s.picUrl,emptyShortlistImage:!s.picUrl,title:f,tabId:s.tabId,placeNumber:s.number,isThumbnail:!1},a={id:s.thumbUrl,emptyShortlistImage:!s.thumbUrl,title:f,tabId:s.tabId,placeNumber:s.number,isThumbnail:!0},r.images.push(o),(s.thumbUrl||!t.isExternalData)&&r.images.push(a);return r},b=function(e,t){var n=Object.keys(e),r=$.grep(n,function(e){return e.toLowerCase()===t})[0];return r?e[r]:null},w=function(){return i18n.content.component.shortlist},E=function(){return i18n.content.titleType.shortlist},S=function(e,t){var i="";if(!e.settings.header||!e.settings.header.logoURL){var s="resources/tpl/viewer/icons/esri-logo-white.png",o=r.getAbsolutePath(s,t);i=n.forceProtocolRelativeURL(o)}else e.settings.header.logoURL==="NO_LOGO"?i="":i=e.settings.header.logoURL;return i};return a(o),{buildInfographics:f,electSourceLayer:l,getData:d,convertToMedia:y,getStoryComponent:w,getTitleType:E,findLogoUrl:S}}}),define("my/content/scanning/StoryUI",["my/models/Credentials","my/helpers/UIHelper","my/content/Templater"],function(e,t,n){"use strict";var r=function(e,n,r){var o=t.getExpandedMaps();s(e.items,n,"maps",r);if(o.length>0)for(var u=0;u<o.length;u++)$('.item[data-id="'+n.storyMap.id+'"] .expandable-layer[data-map-id="'+o[u]+'"]').addClass("expanded");n.media.maps&&n.media.maps.items&&i(n)},i=function(e){var t='.item[data-id="'+e.id+'"]',n=null,r=null,i=null,s=null,o=null,u=null;for(var a=0;a<e.media.maps.items.length;a++){u=e.media.maps.items[a];for(var f=0;f<u.info.layers.length;f++)n=u.info.layers[f],n.info.isBasemap&&(n.info.persistentBasemap?r=n:i=n);r&&i&&(s=$(t+' .layer-row[data-id="'+r.id+'"]'),o=$(t+' .layer-row[data-id="'+i.id+'"]'),i.errors.length?(o.removeClass("no-show"),s.addClass("no-show")):(s.removeClass("no-show"),o.addClass("no-show")))}},s=function(n,r,i,s){var a={items:n,titleType:r.titleType,storyComponent:r.storyComponent},f=r.media.scenes&&r.media.scenes.items.length;o(a,r.storyMap.id,i,r.storyMap.accessLevel),t.updateTabStatusIcon(r.storyMap.id,r.media[i].type,r.media[i].hasErrors,r.media[i].hasWarnings,r.media[i].hasModerateWarning),t.updateStoryStatusIcon(s,r.hasErrors,r.storyMap.id,r.hasWarnings||f),i==="maps"&&t.handleNoOrg(e.getCredentials()),u(i,r.id)},o=function(e,r,i,s){switch(i){case"maps":e.items.length===0?t.showMapsError(r):n.templatizeMaps(e,r);break;case"scenes":n.templatizeScenes(e,r);break;case"images":n.templatizeImages(e,r,s);break;case"videos":n.templatizeVideos(e,r);break;case"webpages":n.templatizeWebpages(e,r);break;case"audio":n.templatizeAudio(e,r);break;default:}},u=function(e,t){var n='.item[data-id="'+t+'"]',r={};switch(e){case"maps":r=$(n+" .map-content-loader");break;case"scenes":r=$(n+" .scenes-content-loader");break;case"images":r=$(n+" .image-content-loader");break;case"videos":r=$(n+" .video-content-loader");break;case"webpages":r=$(n+" .webpage-content-loader");break;case"audio":r=$(n+" .audio-content-loader");break;default:return}r.css("display","none")},a=function(e,t){var n='.item[data-id="'+t+'"]';$(n+" .story-sharing").removeClass("active"),$(n+' .story-sharing[data-sharing="'+e+'"]').addClass("active"),$(n+" .access").html(e)};return{updateMapUI:r,updateMediaUI:s,hideContentLoader:u,updateStoryMapUI:a}}),define("my/helpers/AGOLSort",[],function(){"use strict";var e=function(e){var t=[],n=[],r=[],i=[];for(var s=0;s<e.items.length;s++){var o=e.items[s];o.errors.length?n.push(o):o.warnings.length?r.push(o):i.push(o)}for(var u=0;u<n.length;u++)t.push(n[u]);for(var a=0;a<r.length;a++)t.push(r[a]);for(var f=0;f<i.length;f++)t.push(i[f]);return e.items=t,e},t=function(e){var t=n(e.items);return e.items=t,e},n=function(e){var t=[],r=[],i=[],s=[],o={};for(var u=0;u<e.length;u++)o=e[u],o.errors.length>0?o.inaccessible||o.deleted||o.notAuthorized?r.push(o):i.push(o):s.push(o),o.info.layers&&(o.info.layers=n(o.info.layers));for(var a=0;a<r.length;a++)t.push(r[a]);for(var f=0;f<i.length;f++)t.push(i[f]);for(var l=0;l<s.length;l++)t.push(s[l]);return t};return{sortByIssues:e,sortMapsByIssues:t}}),define("my/content/tabs/MapsSharing",["dojo/Deferred","esri/request","esri/arcgis/utils","my/models/Credentials"],function(e,t,n,r){"use strict";var i=function(r){var i=$('[data-id="'+r.item+'"]'),s=i.data("owner"),o=n.arcgisUrl.split("/items")[0],u=new e,a={organization:r.shareWith==="organization",everyone:r.shareWith==="public"},f={},l=o+"/users/"+(s||r.username)+"/shareItems";return f=t({url:l,content:{f:"json",items:[r.item],everyone:a.everyone,org:a.organization}},{usePost:!0}),f.then(function(e){var t=e.results[0],n={id:t.itemId,type:r.type};t.success?u.resolve(n):u.reject(t.error)},function(e){u.reject(e)}),u.promise},s=function(t,n,s,u){var a=r.getCredentials(),f=new e,l={},c={username:a.userName,item:n,type:s,shareWith:t},h={};return l=i(c),l.then(function(e){var n={id:e.id,storyData:u,shareWith:t,type:e.type},r=o(n);h={itemId:e.id,type:e.type,storyObj:r,newLevel:t},f.resolve(h)},function(e){f.reject(e)}),f.promise},o=function(e){var t=e.id,n=e.shareWith,r=null,i=[];if(e.type==="storyMap")e.storyData.storyMap.accessLevel=n;else if(e.type==="map"){i=e.storyData.media.maps.items;for(var s=0;s<i.length;s++)if(i[s].id===t){r=i[s],r.access=n;break}}else if(e.type==="layer"){i=e.storyData.media.maps.items;for(var o=0;o<i.length;o++){var u=i[o];for(var a=0;a<u.info.layers.length;a++)u.info.layers[a].id===t&&(u.info.layers[a].access=n)}}return e.storyData};return{updateItemSharing:s}}),define("my/content/scanning/StoryUpdate",["dojo/_base/lang","dojo/Deferred","my/content/tabs/MapsSharing"],function(e,t,n){"use strict";var r=function(e,r,i,s){var o=new t,u=n.updateItemSharing(e,r,i,s);return u.then(function(e){o.resolve(e)},function(){o.reject()}),o.promise},i=function(e){e.hasErrors=!1,e.hasWarnings=!1;for(var t in e.media)e.media.hasOwnProperty(t)&&(e.media[t].hasErrors&&(e.hasErrors=!0),e.media[t].hasWarnings&&(e.hasWarnings=!0));e.storyMap.hasErrors=e.hasErrors},s=function(){};return{updateMapObj:r,updateIssueStatus:i,buildNotificationUI:s}}),define("my/content/Builder",["dojo/_base/lang","dojo/promise/all","dojo/Deferred","esri/request","esri/arcgis/utils","my/models/Credentials","my/content/Templater","my/content/tabs/Maps","my/content/tabs/Scenes","my/content/tabs/Images","my/content/tabs/Videos","builtMy/content/tabs/Webpages","builtMy/content/tabs/Audio","my/helpers/TabHelper","my/helpers/UIHelper","my/content/builders/MapJournalBuilder","my/content/builders/MapSeriesBuilder","my/content/builders/CascadeBuilder","my/content/builders/SwipeSpyglassBuilder","my/content/builders/MapTourBuilder","my/content/builders/CrowdsourceBuilder","my/content/builders/ShortlistBuilder","my/content/builders/PlacesStory","my/content/scanning/StoryUI","my/helpers/AGOLSort","my/content/scanning/StoryUpdate"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N){"use strict";var C=function(e,t){var s=new n,o=null;return t?k(s,e,t):(o=r({url:i.arcgisUrl+"/"+e.id+"/data",content:{f:"json"}}),o.then(function(t){k(s,e,t)},function(t){console.log("reason it failed: "+t),s.reject(e)})),s.promise},k=function(e,t,n){var r=n?n.values:null,i=L(t,r);i.then(function(t){e.resolve(t)})},L=function(e,t){var r=new n,i={},s={},u={},a=!1,f=!1,l=!1,c=null;switch(e.storyMap.type){case"Map Journal":u=v(t,e.storyMap.url);break;case"Map Series":u=m(t,e.storyMap.url);break;case"Cascade":u=g(t,e.storyMap.url);break;case"Swipe/Spyglass":u=y(e.storyMap.url);break;case"Shortlist":case"Crowdsource":case"Map Tour":return c=A(e,t,e.storyMap.type,e.storyMap.url),c;default:return r.resolve(e),r.promise}return e.storyComponent=u.getStoryComponent(),e.titleType=u.getTitleType(),i=u.buildInfographics(t),o.templatizeInfographics(i,e.id),t?(l=_(t),l?f=!0:(a=D(t,"webmap"),f=a)):f=!0,s=u.getMedia(t,f),P(r,s,e),r.promise},A=function(t,r,i,s){var a=new n,f={},l=[],c={},h=!1,v=null,m=null;switch(i){case"Map Tour":v=b(r,s);break;case"Crowdsource":v=w(s);break;case"Shortlist":v=E(r,s);break;default:return a.resolve(t),a.promise}return t.storyComponent=v.getStoryComponent(),t.titleType=v.getTitleType(),f=v.buildInfographics(r),o.templatizeInfographics(f,t.id),r?i==="Crowdsource"?(m=e.getObject("settings.components.map.webmap",!1,r),m?l=[{id:m}]:l=[]):r.webmap?l=[{id:r.webmap}]:l=[]:l=[],t.media.maps=p.getTabObject(i18n.content.media.maps,"maps",!0),t.media.images=p.getTabObject(i18n.content.media.images,"images",!0),h=d.checkAlreadyHasContent(t.id),h===!1&&o.templatizeTabs(t,t.id,!1),d.highlightImageTab(t),d.addMediaTabsEvents(t.id,null),c=u.buildMapsObj(l,t.media.maps),c.then(function(e){O(e,t,r,v,a,i)}),a.promise},O=function(t,n,r,i,s,o){var u=i18n.infographics.mapTour.thirdValueUnknown,a=!1,f=null;t.items.length>0&&t.items[0].info.itemDetails.baseMap&&(u=t.items[0].info.itemDetails.baseMap.title),d.updateBasemapInfographic(n.id,u),n.media.maps=t,N.updateIssueStatus(n),d.hideLoadingTabs(n.id,"maps"),x.updateMapUI(t,n,!1),r?o==="Map Tour"&&!r.sourceLayer?a=!0:o==="Shortlist"&&!r.shortlistLayerId?a=!0:o==="Crowdsource"&&(f=e.getObject("settings.components.map.crowdsourceLayer.id",!1,r),f||(a=!0)):a=!0;if(a)s.resolve(n);else if(t.items&&t.items.length){var l=t.items[0].info.itemDetails.operationalLayers,c=null;!l||l.length===0?s.resolve(n):(c=S.getMedia(i,l,r),c.then(function(e){M(e,n.id,o),P(s,e,n)}))}else s.resolve(n)},M=function(e,t,n){var r=null,i=null;n==="Crowdsource"?(r=typeof e.contributions=="number"?e.contributions:i18n.infographics.crowdsource.secondValueUnknown,d.updateContributionsInfographic(t,r)):n==="Shortlist"&&(i=e.featureSet?e.featureSet.length:i18n.infographics.shortlist.thirdValueUnknown,d.updatePlacesInfographic(t,i))},_=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},D=function(e,t){var n=0,r=!1;if(!e[t])return r=!1,r;for(var i in e)e.hasOwnProperty(i)&&n++;return n===1&&(r=!0),r},P=function(e,n,r){var i=[],s={},v={},m={},g={},y={},b={};n.maps&&n.maps.length>0&&(r.media.maps=p.getTabObject(i18n.content.media.maps,"maps",!0),s=u.buildMapsObj(n.maps,r.media.maps),i.push(s),s.then(function(e){var t=T.sortMapsByIssues(e);r.media.maps=t,N.updateIssueStatus(r),d.hideLoadingTabs(r.id,"maps"),x.updateMapUI(t,r,!1),d.addToggleLayerEvents(r.id)})),n.scenes&&n.scenes.length>0&&(r.media.scenes=p.getTabObject(i18n.content.media.scenes,"scenes",!0),v=a.buildScenesObj(n.scenes,r.media.scenes),i.push(v),v.then(function(e){var t=T.sortByIssues(e);r.media.scenes=t,N.updateIssueStatus(r),d.hideLoadingTabs(r.id,"scenes"),x.updateMediaUI(t.items,r,"scenes",!1)})),n.images&&n.images.length>0&&(r.media.images=p.getTabObject(i18n.content.media.images,"images",!0),m=f.buildImagesObj(n.images.slice(0),r.media.images,r.storyMap.url),i.push(m),m.then(function(e){var t=T.sortByIssues(e);r.media.images=t,N.updateIssueStatus(r),d.hideLoadingTabs(r.id,"images"),x.updateMediaUI(t.items,r,"images",!1)})),n.videos&&n.videos.length>0&&(r.media.videos=p.getTabObject(i18n.content.media.videos,"videos",!0),g=l.buildVideosObj(n.videos,r.media.videos,r.storyMap.url),i.push(g),g.then(function(e){var t=T.sortByIssues(e);r.media.videos=t,N.updateIssueStatus(r),d.hideLoadingTabs(r.id,"videos"),x.updateMediaUI(t.items,r,"videos",!1)})),n.webpages&&n.webpages.length>0&&(r.media.webpages=p.getTabObject(i18n.content.media.webpages,"webpages",!0),y=c.scanItems(n.webpages,r.storyMap.issueChecker),i.push(y),y.then(function(e){r.media.webpages.items=e;var t=T.sortByIssues(r.media.webpages);r.media.webpages=t,p.scanTab(r.media.webpages),N.updateIssueStatus(r),d.hideLoadingTabs(r.id,"webpages"),x.updateMediaUI(t.items,r,"webpages",!1)})),n.audio&&n.audio.length>0&&(r.media.audio=p.getTabObject(i18n.content.media.audio,"audio",!0),b=h.scanItems(n.audio,r.storyMap.issueChecker),i.push(b),b.then(function(e){r.media.audio.items=e;var t=T.sortByIssues(r.media.audio);r.media.audio=t,p.scanTab(r.media.audio),N.updateIssueStatus(r),d.hideLoadingTabs(r.id,"audio"),x.updateMediaUI(t.items,r,"audio",!1)})),(!r.media.maps||r.media.maps.length===0)&&(!n.images||n.images.length===0)&&(!n.videos||n.videos.length===0)&&(!n.webpages||n.webpages.length===0)&&(!n.audio||n.audio.length===0)&&(r.media.maps=p.getTabObject(i18n.content.media.maps,"maps",!0),N.updateIssueStatus(r),x.updateMapUI(r.media.maps,r,!1),d.addToggleLayerEvents(r.id)),o.templatizeTabs(r,r.id,!0),d.highlightFirstOrActiveMedia(r.id),d.addMediaTabsEvents(r.id,null),t(i).then(function(){d.hideLoadingTabs(r.id,"maps"),d.hideLoadingTabs(r.id,"images"),d.hideLoadingTabs(r.id,"videos"),d.hideLoadingTabs(r.id,"webpages"),d.hideLoadingTabs(r.id,"audio"),e.resolve(r)})};return{buildMedia:C}}),define("my/content/scanning/StoryIssues",["my/models/Issue"],function(e){"use strict";var t=[],n=function(){var t=e.getPossibleIssues(),n=[{title:t.deleted,media:"maps",severity:"error",text:i18n.content.scanningErrors.deletedMap,subtext:i18n.content.scanningErrorTips.deletedMapTip,actions:[]},{title:t.inaccessible,media:"maps",severity:"error",text:i18n.content.scanningErrors.inaccessibleMap,subtext:i18n.content.scanningErrorTips.inaccessibleMapTip,actions:[]},{title:t.notYoursNotAccessible,media:"maps",severity:"error",text:i18n.content.scanningErrors.notYoursNotAccessible,subtext:i18n.content.scanningErrorTips.notYoursNotAccessibleTip,actions:[]},{title:t.serviceOkItemNot,media:"maps",severity:"error",text:i18n.content.scanningErrors.serviceOkItemNot,subtext:i18n.content.scanningErrorTips.serviceOkItemNotTip,actions:[{text:i18n.content.scanningErrorTips.ignore,positive:!1,isLink:!1,url:"",action:"ignore",modalName:""},{text:i18n.content.scanningErrorTips.fix,positive:!0,isLink:!1,url:"",action:"fix",modalName:"remove-layer"}]},{title:t.secureService,media:"maps",severity:"error",text:i18n.content.scanningErrors.secureService,subtext:i18n.content.scanningErrorTips.secureServiceTip,actions:[]},{title:t.premiumContent,media:"maps",severity:"error",text:i18n.content.scanningErrors.premiumContent,subtext:i18n.content.scanningErrorTips.premiumContentTip,actions:[{text:i18n.content.scanningErrorTips.makePublic,positive:!0,isLink:!1,url:"",action:"",modalName:""}]},{title:t.subscriptionContent,media:"maps",severity:"error",text:i18n.content.scanningErrors.subscriptionContent,subtext:i18n.content.scanningErrorTips.subscriptionContentTip,actions:[{text:i18n.content.scanningErrorTips.confirm,positive:!0,isLink:!1,url:"",action:"",modalName:""}]},{title:t.othersSharedBelowLevel,media:"maps",severity:"error",text:i18n.content.scanningErrors.othersSharedBelowLevel,subtext:"",actions:[]},{title:t.inaccessibleImage,media:"images",severity:"error",text:i18n.content.scanningErrors.inaccessibleImage,subtext:i18n.content.scanningErrorTips.inaccessibleImageTip,actions:[]},{title:t.inaccessibleVideo,media:"videos",severity:"error",text:i18n.content.scanningErrors.inaccessibleVideo,subtext:i18n.content.scanningErrorTips.inaccessibleVideoTip,actions:[]},{title:t.inaccessibleWebpage,media:"webpages",severity:"error",text:i18n.content.scanningErrors.inaccessibleWebpage,subtext:i18n.content.scanningErrorTips.inaccessibleWebpageTip,actions:[]},{title:t.inaccessibleAudio,media:"audio",severity:"error",text:i18n.content.scanningErrors.inaccessibleAudio,subtext:i18n.content.scanningErrorTips.inaccessibleAudioTip,actions:[]},{title:t.httpWebpageError,media:"webpages",severity:"error",text:i18n.content.scanningErrors.httpWebpage,subtext:i18n.content.scanningErrorTips.httpWebpageUncheckableTip,actions:[]},{title:t.httpImageError,media:"images",severity:"error",text:i18n.content.scanningErrors.httpImage,subtext:i18n.content.scanningErrorTips.httpImageUncheckableTip,actions:[]},{title:t.httpVideoError,media:"videos",severity:"error",text:i18n.content.scanningErrors.httpVideo,subtext:i18n.content.scanningErrorTips.httpVideoUncheckableTip,actions:[]},{title:t.httpAudioError,media:"audio",severity:"error",text:i18n.content.scanningErrors.httpAudio,subtext:i18n.content.scanningErrorTips.httpAudioUncheckableTip,actions:[]},{title:t.yoursSharedBelowLevel,media:"maps",severity:"error",text:"",subtext:"",actions:[{text:"",positive:!0,isLink:!1,url:"",action:"",modalName:""}]},{title:t.httpWebpageWarning,media:"webpages",severity:"warning",text:i18n.content.scanningErrors.httpWebpage,subtext:i18n.content.scanningErrorTips.httpWebpageUncheckableTip,actions:[]},{title:t.httpVideoWarning,media:"videos",severity:"warning",text:i18n.content.scanningErrors.httpVideo,subtext:i18n.content.scanningErrorTips.httpVideoUncheckableTip,actions:[]},{title:t.httpImageWarning,media:"images",severity:"warning",text:i18n.content.scanningErrors.httpImage,subtext:i18n.content.scanningErrorTips.httpImageUncheckableTip,actions:[]},{title:t.httpAudioWarning,media:"audio",severity:"warning",text:i18n.content.scanningErrors.httpAudio,subtext:i18n.content.scanningErrorTips.httpAudioUncheckableTip,actions:[]}];r(n)},r=function(e){t=e},i=function(){return t},s=function(e){var t=h(),n={},r={},i={},s={};for(n in e)if(e.hasOwnProperty(n))for(var o=0;o<e[n].items.length;o++){r=e[n].items[o];for(var u=0;u<r.errors.length;u++)i=r.errors[u],t[i.issueType].items.push(i);for(var a=0;a<r.warnings.length;a++)s=r.warnings[a],t[s.issueType].items.push(s)}return t},o=function(t,n){var r=e.getPossibleIssues(),i=t.issues[r.yoursSharedBelowLevel],s=t.issues[r.othersSharedBelowLevel],o=t.issues[r.secureService],l=t.issues[r.premiumContent],c=[],h={},p=[];i.items.length>0&&u(i,n);if(s.items.length>0){p=t.media.maps.items;for(var d=0;d<s.items.length;d++)h=s.items[d],f(p,c,h.id);a(s,c)}if(o.items.length>0){var v='<a href="https://links.esri.com/storymaps/secure_services" class="linkable-text" target="_blank">'+i18n.content.scanningErrorTips.blogArticle+"</a>";o.subtext=i18n.content.scanningErrorTips.secureServiceTip.replace(/{{HERE}}/g,v)}if(l.items.length>0){var m='<a href="https://www.esri.com/software/arcgis/arcgisonline/credits" class="linkable-text" target="_blank">'+i18n.content.scanningErrorTips.credits+"</a>";t.storyMap.accessLevel==="public"?(l.subtext=i18n.content.scanningErrorTips.premiumContentPublicTip.replace(/{{CREDITS}}/g,m),l.actions[0].text=i18n.content.scanningErrorTips.confirm):(l.subtext=i18n.content.scanningErrorTips.premiumContentTip.replace(/{{CREDITS}}/g,m),l.actions[0].text=i18n.content.scanningErrorTips.makePublic)}},u=function(e,t){var n=i18n.content.scanningErrors,r=i18n.content.scanningErrorTips,i=" ",s=" ",o="";t==="public"?(i=n.someContentNotPublic,o=r.sharePublicly,s=r.clickToSharePublic):t==="organization"&&(i=n.someContentPrivate,o=r.shareOrg,s=r.clickToShareOrg),e.text=i,e.subtext=s,e.actions[0].text=o},a=function(e,t){var n=t[0]||"",r="https://geonet.esri.com/people?query="+n,i='<a href="'+r+'" target="_blank">'+n+"</a>",s=i18n.content.scanningErrorTips.othersSharedBelowLevelTip.replace(/{{USER_NAME}}/g,i);e.subtext=s},f=function(e,t,n){var r={};for(var i=0;i<e.length;i++)r=e[i],r.id===n?t.indexOf(r.owner)===-1&&t.push(r.owner):l(r.info.layers,t,n)},l=function(e,t,n){var r={};for(var i=0;i<e.length;i++)r=e[i],r.id===n&&t.indexOf(r.owner)===-1&&t.push(r.owner)},c=function(e,t){var n=[],r=i();for(var s=0;s<r.length;s++)t?n.push(e[r[s].title]):r[s].title!=="yoursSharedBelowLevel"&&n.push(e[r[s].title]);return n},h=function(){var e={},t=i();for(var n=0;n<t.length;n++)e[t[n].title]=p({title:t[n].title,media:t[n].media,severity:t[n].severity,text:t[n].text,subtext:t[n].subtext,actions:t[n].actions});return e},p=function(e){var t={media:e.media,title:e.title,severity:e.severity,text:e.text,subtext:e.subtext,actions:e.actions,items:[]};return t};return function(){return n(),{compileMediaIssues:s,customizeIssueObj:o,issueObjToList:c}}}),define("my/content/tabs/Tags",["dojo/Deferred","esri/request","esri/arcgis/utils","my/helpers/UIHelper","my/helpers/Sanitizer"],function(e,t,n,r,i){"use strict";var s="li.expanded",o=[],u=function(e){var t=[],n="",r=o,i=!1,s="";if(!e.allTags)return;for(var u=0;u<e.allTags.length;u++){s=e.allTags[u];if(n)t.push(s);else{i=!1;for(var a=0;a<r.length;a++)s===r[a]&&(i=!0,n=s);i===!1&&t.push(s)}}e.yourTags=t,e.collectionTag=n},a=function(e){var t=$(s+" .collection-tags");e&&t.val(e)},f=function(e,t){t.collectionTag=e,$(s+" .item-update-tags").removeClass("disabled")},l=function(e,t){var n="",r=[];n=e.text(),n=$.trim(n),n.charAt(n.length-1)===","&&(n=n.substr(0,n.length-1),n=$.trim(n)),r=n.split(", ");if($(s+" .collection-tags").val()==="")for(var i=0;i<r.length;i++)for(var u=0;u<o.length;u++)r[i]===o[u]&&(f(r[i],t),a(r[i]));t.yourTags=r,$(s+" .item-update-tags").removeClass("disabled")},c=function(e){var t=[];return $.each(e,function(e,n){$.inArray(n,t)===-1&&t.push(n)}),t},h=function(e,t){var n='.item[data-id="'+e+'"]';$(n+" .item-tags-list").html(t)},p=function(s){s.item.yourTags=d(s.item.yourTags),s.item.collectionTag=i.sanitizeHtmlInput(s.item.collectionTag),h(s.item.id,s.item.yourTags.join(", ")),s.item.allTags=s.item.yourTags.concat(s.item.collectionTag),s.item.allTags=c(s.item.allTags);var o=new e,u=n.arcgisUrl.split("/items")[0],a=u+"/users/"+s.userName+"/items/"+s.item.id+"/update",f=s.item.userItemUrl+"/update",l=s.item.userItemUrl?f:a,p=s.item.allTags.toString(),g=t({url:l,content:{f:"json",tags:p}},{usePost:!0});return g.then(function(){r.reEnableButtons(s.item.id),v(),o.resolve(s.item)},function(){r.reEnableButtons(s.item.id),m(),o.reject()}),o.promise},d=function(e){var t=[],n="";for(var r=0;r<e.length;r++)n=i.sanitizeHtmlInput(e[r]),t.push(n);return t},v=function(){var e=$(s+" .item-update-tags");e.html(i18n.storyMap.tags.saved),e.addClass("success-button"),e.addClass("notify"),setTimeout(function(){e.html(i18n.storyMap.tags.save),e.removeClass("notify"),e.removeClass("success-button")},2e3)},m=function(){var e=$(s+" .item-update-tags");e.html(i18n.storyMap.tags.errorSaving),e.addClass("error-button"),e.addClass("notify"),setTimeout(function(){e.removeClass("error-button"),e.html(i18n.storyMap.tags.save),e.removeClass("notify")},2e3)},g=function(e){for(var t in e)e.hasOwnProperty(t)&&o.push(e[t]);o.sort(function(e,t){var n="",r="";return e&&(n=e.toLowerCase()),t&&(r=t.toLowerCase()),n<r?-1:n>r?1:0})};return{init:u,showCollectionTag:a,updateCollectionTag:f,updateYourTags:l,saveTagsToServer:p,createCollectionList:g}}),define("my/content/scanning/PremiumManager",["dojo/on","dojo/Deferred","my/helpers/Formatter","esri/arcgis/AppProxyManager","esri/dijit/AppProxySettings"],function(e,t,n,r,i){"use strict";return function(e){var s=e,o=null,u=null,a=function(e,t){if(e&&t){var s=/(.*\/)/.exec(t),a=s?s[0]:"",f=n.forceProtocolRelativeURL(a),l="http:"+f,c="https:"+f;o=new r({appid:e,referrers:[l,c]}),u=new i({proxyManagerOptions:{appid:e},webmaps:[]},null)}},f=function(){return o.proxies},l=function(e){var n=new t,r=p(e);return r.then(function(t){e.isSubscriptionContent=t.subscriptionContent,e.isPremiumContent=t.premiumContent,e.isPremiumContent||e.isSubscriptionContent?(e.hasProxy=h(e),n.resolve(e)):n.resolve(e)},function(){n.resolve(e)}),n.promise},c=function(e){var n=new t,r=[],i=null,s=null;for(var u=0;u<e.length;u++)i={sourceUrl:e[u].info.originalUrl},r.push(i);return s=o.createProxies(r),s.then(function(){for(var t=0;t<e.length;t++)e[t].hasProxy=!0;n.resolve(e)},function(){n.reject(e)}),n.promise},h=function(e){var t=null;for(var r=0;r<o.proxies.length;r++){t=o.proxies[r];if(e.url===n.forceProtocolRelativeURL(t.sourceUrl))return!0;if(n.forceProtocolRelativeURL(e.info.originalUrl)===n.forceProtocolRelativeURL(t.sourceUrl))return!0}return!1},p=function(e){var n=new t;return o.loaded?d(e,n):(o.on("load",function(){d(e,n)}),o.on("error",function(){n.reject()})),n.promise},d=function(e,t){var n=u._isPremium(e.info.originalUrl),r=u._isSubscriber(e.info.originalUrl);r&&(n=!1),t.resolve({premiumContent:r,subscriptionContent:n})},v=function(){o.deleteProxies(o.proxies).then(function(){console.log("success")},function(){console.log("failure")})};return a(s.id,s.url),{checkSecureService:l,addProxies:c,deleteProxies:v,getProxies:f}}});var initCropit=function(e){var t;t=function(){function e(){}return e.prototype.setup=function(e,t,n,r){var i,s;return n==null&&(n=1),s=t.w/e.w,i=t.h/e.h,(r!=null?r.minZoom:void 0)==="fit"?this.minZoom=s<i?s:i:this.minZoom=s<i?i:s,this.maxZoom=this.minZoom<1/n?1/n:this.minZoom},e.prototype.getZoom=function(e){return!this.minZoom||!this.maxZoom?null:e*(this.maxZoom-this.minZoom)+this.minZoom},e.prototype.getSliderPos=function(e){return!this.minZoom||!this.maxZoom?null:this.minZoom===this.maxZoom?0:(e-this.minZoom)/(this.maxZoom-this.minZoom)},e.prototype.isZoomable=function(){return!this.minZoom||!this.maxZoom?null:this.minZoom!==this.maxZoom},e.prototype.fixZoom=function(e){return e<this.minZoom?this.minZoom:e>this.maxZoom?this.maxZoom:e},e}();var n;n=function(){function n(t,r){var i;this.element=t,this.$el=e(this.element),i={$fileInput:this.$("input.cropit-image-input"),$preview:this.$(".cropit-image-preview"),$dragZone:this.$(".cropit-drag-zone"),$zoomSlider:this.$("input.cropit-image-zoom-input"),$previewContainer:this.$(".cropit-image-preview-container")},this.options=e.extend({},n._DEFAULTS,i,r),this.init()}return n._DEFAULTS={exportZoom:1,imageBackground:!1,imageBackgroundBorderWidth:0,imageState:null,allowCrossOrigin:!1,allowDragNDrop:!0,freeMove:!1,minZoom:"fill"},n.PREVIEW_EVENTS=function(){return["mousedown","mouseup","mouseleave","touchstart","touchend","touchcancel","touchleave"].map(function(e){return""+e+".cropit"}).join(" ")}(),n.PREVIEW_MOVE_EVENTS="mousemove.cropit touchmove.cropit",n.ZOOM_INPUT_EVENTS=function(){return["mousemove","touchmove","change"].map(function(e){return""+e+".cropit"}).join(" ")}(),n.prototype.init=function(){var n,r,i,s;return this.image=new Image,this.options.allowCrossOrigin&&(this.image.crossOrigin="Anonymous"),this.$fileInput=this.options.$fileInput,this.$preview=this.options.$preview.css({backgroundRepeat:"no-repeat"}),this.$dragZone=this.options.$dragZone,this.$zoomSlider=this.options.$zoomSlider.attr({min:0,max:1,step:.01}),this.previewSize={w:this.options.width||this.$preview.width(),h:this.options.height||this.$preview.height()},this.options.width&&this.$preview.width(this.previewSize.w),this.options.height&&this.$preview.height(this.previewSize.h),this.options.imageBackground&&(e.isArray(this.options.imageBackgroundBorderWidth)?this.imageBgBorderWidthArray=this.options.imageBackgroundBorderWidth:(this.imageBgBorderWidthArray=[],[0,1,2,3].forEach(function(e){return function(t){return e.imageBgBorderWidthArray[t]=e.options.imageBackgroundBorderWidth}}(this))),n=this.options.$previewContainer,this.$imageBg=e("<img />").addClass("cropit-image-background").attr("alt","").css("position","absolute"),this.$imageBgContainer=e("<div />").addClass("cropit-image-background-container").css({position:"absolute",zIndex:0,left:-this.imageBgBorderWidthArray[3]+window.parseInt(this.$preview.css("border-left-width")),top:-this.imageBgBorderWidthArray[0]+window.parseInt(this.$preview.css("border-top-width")),width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]}).append(this.$imageBg),this.imageBgBorderWidthArray[0]>0&&this.$imageBgContainer.css({overflow:"hidden"}),n.css("position","relative").prepend(this.$imageBgContainer),this.$preview.css("position","relative"),this.$preview.hover(function(e){return function(){return e.$imageBg.addClass("cropit-preview-hovered")}}(this),function(e){return function(){return e.$imageBg.removeClass("cropit-preview-hovered")}}(this))),this.initialOffset={x:0,y:0},this.initialZoom=0,this.initialZoomSliderPos=0,this.imageLoaded=!1,this.moveContinue=!1,this.zoomer=new t,this.options.allowDragNDrop&&jQuery.event.props.push("dataTransfer"),this.bindListeners(),this.$zoomSlider.val(this.initialZoomSliderPos),this.setOffset(((r=this.options.imageState)!=null?r.offset:void 0)||this.initialOffset),this.zoom=((i=this.options.imageState)!=null?i.zoom:void 0)||this.initialZoom,this.loadImage(((s=this.options.imageState)!=null?s.src:void 0)||null)},n.prototype.bindListeners=function(){this.$fileInput.on("change.cropit",this.onFileChange.bind(this)),this.$preview.on(n.PREVIEW_EVENTS,this.onPreviewEvent.bind(this)),this.$zoomSlider.on(n.ZOOM_INPUT_EVENTS,this.onZoomSliderChange.bind(this));if(this.options.allowDragNDrop)return this.$dragZone.on("dragover.cropit dragleave.cropit",this.onDragOver.bind(this)),this.$dragZone.on("drop.cropit",this.onDrop.bind(this)),this.$preview},n.prototype.unbindListeners=function(){return this.$fileInput.off("change.cropit"),this.$preview.off(n.PREVIEW_EVENTS),this.$preview.off("dragover.cropit dragleave.cropit drop.cropit"),this.$zoomSlider.off(n.ZOOM_INPUT_EVENTS)},n.prototype.reset=function(){return this.zoom=this.initialZoom,this.offset=this.initialOffset},n.prototype.onFileChange=function(){var e;return typeof (e=this.options).onFileChange=="function"&&e.onFileChange(),this.$preview.removeClass("dragged"),this.$preview.addClass("file-picked"),this.$preview.removeClass("carousel"),this.loadFileReader(this.$fileInput.get(0).files[0])},n.prototype.loadFileReader=function(e){var t;t=new FileReader;if(e!=null?e.type.match("image"):void 0)return this.setImageLoadingClass(),t.readAsDataURL(e),t.onload=this.onFileReaderLoaded.bind(this),t.onerror=this.onFileReaderError.bind(this);if(e!=null)return this.onFileReaderError()},n.prototype.onFileReaderLoaded=function(e){return this.reset(),this.image.crossOrigin=null,this.loadImage(e.target.result)},n.prototype.onFileReaderError=function(){var e;return typeof (e=this.options).onFileReaderError=="function"?e.onFileReaderError():void 0},n.prototype.onDragOver=function(e){return e.preventDefault(),e.dataTransfer.dropEffect="copy",this.$preview.toggleClass("cropit-drag-hovered",e.type==="dragover")},n.prototype.onDrop=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=Array.prototype.slice.call(e.dataTransfer.files,0),t.some(function(e){return function(t){if(t.type.match("image"))return e.loadFileReader(t),!0}}(this)),this.$preview.addClass("dragged"),this.$preview.removeClass("file-picked"),this.$preview.removeClass("carousel"),this.$preview.removeClass("cropit-drag-hovered")},n.prototype.loadImage=function(e){var t;this.imageSrc=e;if(!this.imageSrc)return;return typeof (t=this.options).onImageLoading=="function"&&t.onImageLoading(),this.setImageLoadingClass(),this.image.onload=this.onImageLoaded.bind(this),this.image.onerror=this.onImageError.bind(this),this.image.src=this.imageSrc},n.prototype.onImageLoaded=function(e){var t;return this.setImageLoadedClass(),this.setOffset(this.offset),this.$preview.css("background-image","url("+this.imageSrc+")"),this.options.imageBackground&&this.$imageBg.attr("src",this.imageSrc),this.imageSize={w:this.image.width,h:this.image.height},this.setupZoomer(),this.imageLoaded=!0,typeof (t=this.options).onImageLoaded=="function"?t.onImageLoaded(e,this.image):void 0},n.prototype.onImageError=function(e){var t;return typeof (t=this.options).onImageError=="function"?t.onImageError(e,this.image):void 0},n.prototype.setImageLoadingClass=function(){return this.$preview.removeClass("cropit-image-loaded").addClass("cropit-image-loading")},n.prototype.setImageLoadedClass=function(){return this.$preview.removeClass("cropit-image-loading").addClass("cropit-image-loaded")},n.prototype.getEventPosition=function(e){var t,n,r,i;if((t=e.originalEvent)!=null?(n=t.touches)!=null?n[0]:void 0:void 0)e=(r=e.originalEvent)!=null?(i=r.touches)!=null?i[0]:void 0:void 0;if(e.clientX&&e.clientY)return{x:e.clientX,y:e.clientY}},n.prototype.onPreviewEvent=function(t){if(!this.imageLoaded)return;return this.moveContinue=!1,this.$preview.off(n.PREVIEW_MOVE_EVENTS),t.type==="mousedown"||t.type==="touchstart"?(this.origin=this.getEventPosition(t),this.moveContinue=!0,this.$preview.on(n.PREVIEW_MOVE_EVENTS,this.onMove.bind(this))):e(document.body).focus(),t.stopPropagation(),!1},n.prototype.onMove=function(e){var t;return t=this.getEventPosition(e),this.moveContinue&&t&&this.setOffset({x:this.offset.x+t.x-this.origin.x,y:this.offset.y+t.y-this.origin.y}),this.origin=t,e.stopPropagation(),!1},n.prototype.setOffset=function(e){this.offset=this.fixOffset(e),this.$preview.css("background-position",""+this.offset.x+"px "+this.offset.y+"px");if(this.options.imageBackground)return this.$imageBg.css({left:this.offset.x+this.imageBgBorderWidthArray[3],top:this.offset.y+this.imageBgBorderWidthArray[0]})},n.prototype.fixOffset=function(e){var t;return this.imageLoaded?(t={x:e.x,y:e.y},this.options.freeMove||(this.imageSize.w*this.zoom>=this.previewSize.w?t.x=Math.min(0,Math.max(t.x,this.previewSize.w-this.imageSize.w*this.zoom)):t.x=Math.max(0,Math.min(t.x,this.previewSize.w-this.imageSize.w*this.zoom)),this.imageSize.h*this.zoom>=this.previewSize.h?t.y=Math.min(0,Math.max(t.y,this.previewSize.h-this.imageSize.h*this.zoom)):t.y=Math.max(0,Math.min(t.y,this.previewSize.h-this.imageSize.h*this.zoom))),t.x=this.round(t.x),t.y=this.round(t.y),t):e},n.prototype.onZoomSliderChange=function(){var e;if(!this.imageLoaded)return;return this.zoomSliderPos=Number(this.$zoomSlider.val()),e=this.zoomer.getZoom(this.zoomSliderPos),this.setZoom(e)},n.prototype.enableZoomSlider=function(){var e;return this.$zoomSlider.removeAttr("disabled"),typeof (e=this.options).onZoomEnabled=="function"?e.onZoomEnabled():void 0},n.prototype.disableZoomSlider=function(){var e;return this.$zoomSlider.attr("disabled",!0),typeof (e=this.options).onZoomDisabled=="function"?e.onZoomDisabled():void 0},n.prototype.setupZoomer=function(){return this.zoomer.setup(this.imageSize,this.previewSize,this.options.exportZoom,this.options),this.zoom=this.fixZoom(this.zoom),this.setZoom(this.zoom),this.isZoomable()?this.enableZoomSlider():this.disableZoomSlider()},n.prototype.setZoom=function(e){var t,n,r,i,s;e=this.fixZoom(e),s=this.round(this.imageSize.w*e),i=this.round(this.imageSize.h*e),r=this.zoom,t=this.previewSize.w/2-(this.previewSize.w/2-this.offset.x)*e/r,n=this.previewSize.h/2-(this.previewSize.h/2-this.offset.y)*e/r,this.zoom=e,this.setOffset({x:t,y:n}),this.zoomSliderPos=this.zoomer.getSliderPos(this.zoom),this.$zoomSlider.val(this.zoomSliderPos),this.$preview.css("background-size",""+s+"px "+i+"px");if(this.options.imageBackground)return this.$imageBg.css({width:s,height:i})},n.prototype.fixZoom=function(e){return this.zoomer.fixZoom(e)},n.prototype.isZoomable=function(){return this.zoomer.isZoomable()},n.prototype.getCroppedImageData=function(t){var n,r,i,s,o;return this.imageSrc?(s={type:"image/png",quality:.75,originalSize:!1,fillBg:"#fff"},t=e.extend({},s,t),i={w:this.previewSize.w,h:this.previewSize.h},o=t.originalSize?1/this.zoom:this.options.exportZoom,n=e("<canvas />").attr({width:i.w*o,height:i.h*o}).get(0),r=n.getContext("2d"),t.type==="image/jpeg"&&(r.fillStyle=t.fillBg,r.fillRect(0,0,n.width,n.height)),r.drawImage(this.image,this.offset.x*o,this.offset.y*o,this.zoom*o*this.imageSize.w,this.zoom*o*this.imageSize.h),n.toDataURL(t.type,t.quality)):null},n.prototype.getImageState=function(){return{src:this.imageSrc,offset:this.offset,zoom:this.zoom}},n.prototype.getImageSrc=function(){return this.imageSrc},n.prototype.getOffset=function(){return this.offset},n.prototype.getZoom=function(){return this.zoom},n.prototype.getImageSize=function(){return this.imageSize?{width:this.imageSize.w,height:this.imageSize.h}:null},n.prototype.getPreviewSize=function(){return{width:this.previewSize.w,height:this.previewSize.h}},n.prototype.setPreviewSize=function(e){if(!((e!=null?e.width:void 0)>0&&(e!=null?e.height:void 0)>0))return;this.previewSize={w:e.width,h:e.height},this.$preview.css({width:this.previewSize.w,height:this.previewSize.h}),this.options.imageBackground&&this.$imageBgContainer.css({width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]});if(this.imageLoaded)return this.setupZoomer()},n.prototype.disable=function(){return this.unbindListeners(),this.disableZoomSlider(),this.$el.addClass("cropit-disabled")},n.prototype.reenable=function(){return this.bindListeners(),this.enableZoomSlider(),this.$el.removeClass("cropit-disabled")},n.prototype.round=function(e){return+(Math.round(e*100)+"e-2")},n.prototype.$=function(e){return this.$el?this.$el.find(e):null},n}();var r,i;r="cropit",i={init:function(t){return this.each(function(){var i;if(!e.data(this,r))return i=new n(this,t),e.data(this,r,i)})},destroy:function(){return this.each(function(){return e.removeData(this,r)})},isZoomable:function(){var e;return e=this.first().data(r),e!=null?e.isZoomable():void 0},"export":function(e){var t;return t=this.first().data(r),t!=null?t.getCroppedImageData(e):void 0},imageState:function(){var e;return e=this.first().data(r),e!=null?e.getImageState():void 0},imageSrc:function(t){var n;return t!=null?this.each(function(){var n;return n=e.data(this,r),n!=null&&(n.reset(),n.options.allowCrossOrigin&&(n.image.crossOrigin="Anonymous")),n!=null?n.loadImage(t):void 0}):(n=this.first().data(r),n!=null?n.getImageSrc():void 0)},offset:function(t){var n;return t!=null&&t.x!=null&&t.y!=null?this.each(function(){var n;return n=e.data(this,r),n!=null?n.setOffset(t):void 0}):(n=this.first().data(r),n!=null?n.getOffset():void 0)},zoom:function(t){var n;return t!=null?this.each(function(){var n;return n=e.data(this,r),n!=null?n.setZoom(t):void 0}):(n=this.first().data(r),n!=null?n.getZoom():void 0)},imageSize:function(){var e;return e=this.first().data(r),e!=null?e.getImageSize():void 0},previewSize:function(t){var n;return t!=null?this.each(function(){var n;return n=e.data(this,r),n!=null?n.setPreviewSize(t):void 0}):(n=this.first().data(r),n!=null?n.getPreviewSize():void 0)},disable:function(){return this.each(function(){var t;return t=e.data(this,r),t.disable()})},reenable:function(){return this.each(function(){var t;return t=e.data(this,r),t.reenable()})}},e.fn.cropit=function(e){return i[e]?i[e].apply(this,[].slice.call(arguments,1)):i.init.apply(this,arguments)}};window.initCropit=initCropit,define("lib-app/jquery.cropit",function(){}),define("my/content/dialogs/ImagePicker",["dojo/Deferred","dojo/promise/all","dojo/io-query","esri/request","esri/arcgis/utils","my/models/Credentials","my/helpers/UIHelper","my/helpers/ImageHelper","my/helpers/Formatter","lib-app/jquery.cropit"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=null,l=null,c=null,h=null,p=null,d=null,v=null,m=null,g=null,y=null,b=0,w=!1,E=null,S=null,x=null,T=null,N=null,C=null,k=null,L=null,A=null,O=null,M=null,_=!1,D="",P=function(e,t,n,r,i,s,o,u,a,l,b,_){f=e,c=t,h=n,p=r,d=i,v=s,m=o,g=u,y=a,E=$("#choose-panel"),S=$("#upload-panel"),x=$("#crop-panel"),T=$("#upload-image"),N=$(".close-dialog.picker"),C=$("#choose-image"),k=$(".cropit-image-input"),L=$(".save-image:not(.disabled)"),A=$(".back.upload.btn"),O=$(".back.crop.btn"),M=l,W(),X(),p.hide(),m.hide(),g.hide(),y.hide(),v.show(),ht(),it(),st(),w=!0;if(b){$(".image-carousel").hide(),$("#or-upload").hide(),$("#not-supported-picker-text").html(i18n.storyMap.imagePicker.notInIEVersion.replace(/{{VERSION_NUMBER}}/g,_)),$("#picker-not-supported").show();return}$("#picker-not-supported").hide(),$("#image-cropper").cropit({allowDragNDrop:!0,imageBackground:!0,imageBackgroundBorderWidth:85,allowCrossOrigin:!0,onImageLoading:function(){$("#drag-drop-inside").css("display","none"),$("#drag-drop-loading").css("display","inline-block")},onImageLoaded:function(e,t){var n=!0,r=document.createElement("canvas"),i=r.getContext("2d");D="",$("#image-picker-image-form")[0].reset();var s=/^(data:)/g.test(t.src);if(s)j(!1);else{i.drawImage(t,0,0);try{r.toDataURL()}catch(o){n=!1}n?j(!1):H(t.src)}},onImageError:function(e,t){var n=/^(data:)/g.test(t.src);n?(D="",console.log("image error"),I(),Z(),St()):H(t.src)},onFileReaderError:function(){console.log("file reader error"),I(),Z(),St()}})},H=function(e){var t=$("#uncropped-image")[0];t.onload=function(){B(t)},t.onerror=function(){D="",console.log("image error"),I(),Z(),St()},t.src=e},B=function(e){var t={width:e.naturalWidth,height:e.naturalHeight};D=e.src,j(!0,t)},j=function(e,t){I(),Z();var n=$(".cropit-image-preview").hasClass("file-picked"),r=$(".cropit-image-preview").hasClass("dragged"),i=$(".cropit-image-preview").hasClass("carousel"),s=q(n,r,i),o=!1;if(s){o=R(n,r,i,t);if(o){var u=0,a=0,f=286,l=190,c=null,h=!1;e?(u=t.width,a=t.height):(c=$("#image-cropper").cropit("imageSize"),u=c.width,a=c.height),h=u===f&&a===l,h?J(!0,!0):e?J(!0,!1):(F(),J())}}},F=function(){var e=$(".cropit-image-background"),t={height:e.height(),width:e.width()},n=$("#image-cropper").cropit("previewSize"),r={x:0,y:0};r.x=(t.width-n.width)/-2,r.y=(t.height-n.height)/-2,$("#image-cropper").cropit("offset",r)},I=function(){$("#drag-drop-loading").css("display","none"),$("#drag-drop-inside").css("display","inline-block")},q=function(e,t,n){var r=$("#image-cropper").cropit("imageSrc"),i=!1,s=!1,o=!1;if(e||t){i=/(image\/gif|image\/jpeg|image\/png)(?=;)/gi.test(r);if(!i)return e?St():t&&xt(),!1}else if(n){s=/\/rest\/services\/(.*?)\/FeatureServer/gi.test(r);if(!s){o=/(.jpg|.jpeg|.png|.gif)/gi.test(r);if(!o)return wt(),!1}}return Tt(),Nt(),Et(),!0},R=function(e,t,n,r){var i=$("#image-cropper").cropit("imageSize"),s=r?pt(r.width,r.height):pt(i.width,i.height);return s?(e||t?O.removeClass("from-carousel"):n&&O.addClass("from-carousel"),vt(),gt(),bt(),!0):(e?mt():t?yt():n&&dt(),!1)},U=function(e){var t=$("#no-crop-warning");_=!0,e?($(".cropit-image-preview-container").show(),$("#uncropped-image").hide(),t.hide()):($(".cropit-image-preview-container").hide(),$("#uncropped-image").show(),t.show()),$(".dialog-title.crop").html(i18n.storyMap.imagePicker.saveImage),$("#range-container").hide()},z=function(e){_=!1,$(".cropit-image-preview-container").show(),$("#uncropped-image").hide(),$("#no-crop-warning").hide(),e?$(".dialog-title.crop").html(i18n.storyMap.imagePicker.cropImage):$(".dialog-title.crop").html(i18n.storyMap.imagePicker.saveImage),$("#range-container").show()},W=function(){$("#modal-container-image-picker").on("click",function(e){e.currentTarget===e.target&&at()}),c.on("click",function(){nt()}),h.on("click",function(){rt()}),T.on("click",function(){vt(),Et(),V()}),C.on("click",function(){gt(),bt(),Tt(),Nt(),k.click()}),L.on("click",function(){Ct()}),N.on("click",function(){at()}),A.on("click",function(){X()}),O.on("click",function(){ht(),z(!0),$(this).hasClass("from-carousel")?(O.removeClass("from-carousel"),X()):V()})},X=function(){gt(),bt(),Tt(),Nt(),E.show(),S.hide(),x.hide()},V=function(){E.hide(),S.show(),x.hide()},J=function(e,t){(e||t)&&U(t),E.hide(),S.hide(),x.show()},K=function(){c.off("click"),h.off("click"),T.off("click"),N.off("click"),C.off("click"),d.off("click"),L.off("click"),A.off("click"),O.off("click")},Q=function(e){l=e,G()},G=function(){v.hide(),l&&l.length>0?(m.hide(),g.hide(),p.show(),b=0,et(0),d.on("click",function(){var e=d.attr("src");$("#image-cropper").cropit("imageSrc",e),Y(),$(".cropit-image-preview").addClass("carousel"),$(".cropit-image-preview").removeClass("file-picked"),$(".cropit-image-preview").removeClass("dragged")})):l&&l.length===0?(p.hide(),g.hide(),m.show(),it(),st(),$("#modal-image-picker .carousel-page-status").css("opacity",0)):l||(g.show(),p.hide(),m.hide(),it(),st(),$("#modal-image-picker .carousel-page-status").css("opacity",0))},Y=function(){$("#carousel-image").css("display","none"),$("#carousel-image-loading").css("display","inline-block")},Z=function(){$("#carousel-image-loading").css("display","none"),$("#carousel-image").css("display","inline-block")},et=function(e){y.hide(),p.show(),d.on("load",function(){$("#current-carousel-image").html(e+1),vt(),Et(),tt(),e===0&&($("#total-carousel-images").html(l.length),l.length>1&&$("#modal-image-picker .carousel-page-status").css("opacity",1))}),d.on("error",function(){p.hide(),y.show(),$("#current-carousel-image").html(e+1),vt(),Et(),tt(),e===0&&($("#total-carousel-images").html(l.length),l.length>1&&$("#modal-image-picker .carousel-page-status").css("opacity",1))}),d.attr("src",l[e])},tt=function(){b===l.length-1?st():ut(),b===0?it():ot()},nt=function(){c.hasClass("disabled")||(b--,et(b))},rt=function(){h.hasClass("disabled")||(b++,et(b))},it=function(){c.addClass("disabled")},st=function(){h.addClass("disabled")},ot=function(){c.removeClass("disabled")},ut=function(){h.removeClass("disabled")},at=function(){X(),ht(),vt(),Et(),gt(),bt(),Tt(),Nt(),I(),Z(),z(!0)},ft=function(){$(".dialog-body.crop.cropping").css("display","none"),$(".dialog-body.crop.saving").css("display","block"),$(".modal-footer.picker").css("display","none"),z(!1)},lt=function(){$(".dialog-body.crop.saving").css("display","none"),$(".dialog-body.crop.saved").css("display","block"),$(".modal-footer.picker").css("display","none")},ct=function(){$(".dialog-body.crop.saving").css("display","none"),$(".dialog-body.crop.error").css("display","block"),L.css("display","none"),$(".modal-footer.picker").css("display","block")},ht=function(){$(".dialog-body.crop.saved").css("display","none"),$(".dialog-body.crop.error").css("display","none"),$(".dialog-body.crop.cropping").css("display","block"),L.css("display","block"),$(".modal-footer.picker").css("display","block")},pt=function(e,t){var n=!1,r=286,i=190;return e>=r&&t>=i&&(n=!0),n},dt=function(){$(".invalid-dimensions.choose").css("display","block")},vt=function(){$(".invalid-dimensions.choose").css("display","none")},mt=function(){$(".minimum-dimensions.upload").addClass("dimensions-error")},gt=function(){$(".minimum-dimensions.upload").removeClass("dimensions-error")},yt=function(){$(".minimum-dimensions.upload").addClass("dimensions-error"),$("#drag-drop-zone").addClass("error")},bt=function(){$(".minimum-dimensions.upload").removeClass("dimensions-error"),$("#drag-drop-zone").removeClass("error")},wt=function(){$(".accepted-file-types.choose").css("display","block")},Et=function(){$(".accepted-file-types.choose").css("display","none")},St=function(){$(".accepted-file-types.upload").addClass("file-type-error")},xt=function(){$(".accepted-file-types.upload").addClass("file-type-error"),$("#drag-drop-zone").addClass("error")},Tt=function(){$(".accepted-file-types.upload").removeClass("file-type-error")},Nt=function(){$(".accepted-file-types.upload").removeClass("file-type-error"),$("#drag-drop-zone").removeClass("error")},Ct=function(){var e={},n={},r=s.getCredentials().userName,o=document.createElement("form"),a="",l=null,c="",h="",p=_,d="",v="",m="",g="",y="";o.setAttribute("method","post"),o.setAttribute("enctype","multipart/form-data"),p&&D?(y=i.arcgisUrl.split("/items")[0],v=y+"/users/"+r+"/items/"+f.id+"/update",m=f.userItemUrl+"/update",g=f.userItemUrl?m:v,d=D,e=Pt(g,d),n=Lt()):(a=_t(),l=Dt(a),c=/(image\/.*)(?=;)/g.exec(a),h=c[0].split("/")[1],e=At(o,l,h,f),n=Ot(o,l,h,f)),ft(),t([e,n]).then(function(){var e={q:"id:"+f.id,num:1,start:0,sortField:"modified",sortOrder:"desc"};s.getCredentials().portal.queryItems(e).then(function(e){var t=e.results[0]&&e.results[0].thumbnailUrl?e.results[0].thumbnailUrl:"",n=u.sanitizeImage(t),r=u.sanitizeImage(d);kt(n,p,r,a)},function(){var e=u.sanitizeImage(d);kt("",p,e,a)})},function(){ct()})},kt=function(e,t,n,r){lt(),e?Mt(e,!1):t&&n?Mt(n,!1):Mt(r,!0),M(),setTimeout(function(){N.trigger("click")},1e3)},Lt=function(){var t=new e;return t.resolve(),t.promise},At=function(t,n,r,i){var s=new e,o=new FormData(t),u={};return o.append("thumbnail",n,"thumbnail."+r),u=Ht(i,o),u.then(function(){s.resolve()},function(){s.reject()}),s.promise},Ot=function(t,n,r,i){var s=new e,o=new FormData(t),u={};return o.append("largeThumbnail",n,"largeThumbnail."+r),u=Ht(i,o),u.then(function(){s.resolve()},function(){s.reject()}),s.promise},Mt=function(e,t){var r=null,i=null,s=document.createElement("a"),u="";t?u=e:(s.href=e,r=n.queryToObject(s.search.substring(1)),r.time=(new Date).getTime(),i=n.objectToQuery(r),u=s.protocol+"//"+s.host+(s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname)+(i.length>0?"?"+i:"")),f.thumbnail=u,f.hasOwnImage=!0,o.updateThumbnail(f.id,u)},_t=function(){var e=$("#image-cropper").cropit("export");return e},Dt=function(e){var t={},n=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(n.length),s=new DataView(i);for(var o=0;o<n.length;o++)s.setUint8(o,n.charCodeAt(o));return t=new Blob([i],{type:r}),t},Pt=function(t,n){var i=new e,s=a.forceHttpsProtocol(t);return r({url:s,content:{f:"json",thumbnailUrl:n},handleAs:"json"},{usePost:!0}).then(function(){i.resolve()},function(){i.reject()}),i.promise},Ht=function(t,n){var o=new e,u=i.arcgisUrl.split("/items")[0],a=s.getCredentials(),f=u+"/users/"+a.userName+"/items/"+t.id+"/update",l=t.userItemUrl+"/update",c=t.userItemUrl?l:f;return r({url:c,form:n,content:{f:"json"},handleAs:"json"}).then(function(){o.resolve()},function(){o.reject()}),o.promise},Bt=function(e){var t=[],n="",r=null;for(var i=0;i<e.length;i++)r=e[i],n=r.url,!r.info.isThumbnail&&!r.info.isLogo&&t.push(n);return t},jt=function(){w&&(K(),f=null,l=null,c=null,h=null,p=null,d=null,v=null,m=null,g=null,y=null,b=0,w=!1,E=null,S=null,x=null,T=null,N=null,C=null,k=null,L=null,A=null,O=null,M=null,_=!1,D="")};return{init:P,setImages:Q,resetPicker:at,destroy:jt,convertToPickerImages:Bt}}),define("lib-build/hbars!my/content/dialogs/RemoveLayerDialog",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing;return'<div id="remove-layer-modal" class="modal remove-layer-modal" data-modal="remove-layer">\n	<div class="dialog-header">\n	  <h3 class="dialog-title">'+u(o((i=e!=null?e.labels:e)!=null?i.title:i,e))+'</h3>\n	  <a class="modal-dismiss remove-layer-cancel icon-close" href="#"></a>\n	</div>  \n	<div class="dialog-body leader-1">\n		<div class="text-wrapper">\n			<h4 class="item-subtitle">'+u((s=(s=t.numWithIssue||(e!=null?e.numWithIssue:e))!=null?s:f,typeof s===a?s.call(e,{name:"numWithIssue",hash:{},data:r}):s))+'</h4>\n		</div>\n		<div id="layer-carousel-container">\n			<div class="carousel-page-status">\n				<span id="current-carousel-layer"></span><span>/</span><span id="total-carousel-layers"></span>\n			</div>\n			<div id="layer-previous" class="carousel-arrow icon-stories-arrow-left"></div><!--\n		 --><div id="layer-item-container">			\n				<div id="layer-item-carousel">\n					<div id="layer-item"></div>\n				</div>			\n			</div><!--\n		 --><div id="layer-next" class="carousel-arrow icon-stories-arrow-right"></div>\n		</div>\n		<div class="text-wrapper">\n			<h4 class="item-subtitle">'+u(o((i=e!=null?e.labels:e)!=null?i.clickBelowWhenDone:i,e))+'</h4>\n		</div>\n	</div>\n	<div class="modal-footer">\n	  <div id="remove-layer-rescan" class="btn modal-dismiss">'+u((s=(s=t.checkAgain||(e!=null?e.checkAgain:e))!=null?s:f,typeof s===a?s.call(e,{name:"checkAgain",hash:{},data:r}):s))+"</div>\n	</div>\n</div>"},useData:!0})}),define("lib-build/hbars!my/content/dialogs/RemoveLayerItem",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f=this.lambda;return'		<div class="underlined-link edit-map-link" data-id="'+a((s=(s=t.mapId||(e!=null?e.mapId:e))!=null?s:u,typeof s===o?s.call(e,{name:"mapId",hash:{},data:r}):s))+'">'+a(f((i=e!=null?e.labels:e)!=null?i.editMap:i,e))+"</div>\n"},3:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f=this.lambda;return'		<a class="underlined-link" href="'+a((s=(s=t.mapUrl||(e!=null?e.mapUrl:e))!=null?s:u,typeof s===o?s.call(e,{name:"mapUrl",hash:{},data:r}):s))+'" target="_blank">'+a(f((i=e!=null?e.labels:e)!=null?i.editMap:i,e))+"</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.lambda,f=this.escapeExpression,l="<p>";return i=(s=(s=t.issueExplanation||(e!=null?e.issueExplanation:e))!=null?s:u,typeof s===o?s.call(e,{name:"issueExplanation",hash:{},data:r}):s),i!=null&&(l+=i),l+="</p>\n<p>"+f(a((i=e!=null?e.labels:e)!=null?i.issueSolution:i,e))+'</p>\n<div class="link-text-container leader-half">\n	<div id="layer-url-icon" class="link-text-icon share icon-copy" data-clipboard-text="'+f((s=(s=t.layerUrl||(e!=null?e.layerUrl:e))!=null?s:u,typeof s===o?s.call(e,{name:"layerUrl",hash:{},data:r}):s))+'"></div>\n	<input id="layer-url-text" class="share-text small-link" value="'+f((s=(s=t.layerUrl||(e!=null?e.layerUrl:e))!=null?s:u,typeof s===o?s.call(e,{name:"layerUrl",hash:{},data:r}):s))+'" readonly="" title="'+f((s=(s=t.layerUrl||(e!=null?e.layerUrl:e))!=null?s:u,typeof s===o?s.call(e,{name:"layerUrl",hash:{},data:r}):s))+'">\n	<span id="layer-copied-message" class="embed-alert-text copied-message">'+f((s=(s=t.copied||(e!=null?e.copied:e))!=null?s:u,typeof s===o?s.call(e,{name:"copied",hash:{},data:r}):s))+'</span>\n</div>\n<div class="leader-half">\n',i=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(l+=i),l+"</div>"},useData:!0})}),define("my/content/dialogs/RemoveLayerDialog",["lib-build/hbars!./RemoveLayerDialog","my/helpers/TooltipHelper","lib-build/hbars!./RemoveLayerItem","lib-app/clipboard"],function(e,t,n,r){"use strict";return function(i){var s=i.issues.serviceOkItemNot.items,o=i,u=0,a=null,f=null,l=null,c=null,h=function(){p(),T.modal()},p=function(){var n=i18n.content.removeLayer.layersWithIssue.replace(/{{NUM_WITH_ISSUE}}/g,s.length),r=$("#modal-container-remove-layer");r.html(e({labels:i18n.content.removeLayer,checkAgain:i18n.content.notification.refreshExplanation,numWithIssue:n,items:s})),t.addTooltipEvents(r),d(),v()},d=function(){a=$("#layer-item-carousel"),f=$("#layer-item"),l=$("#layer-previous"),c=$("#layer-next")},v=function(){m(),b(),$("#total-carousel-layers").html(s.length)},m=function(){l.on("click",g),c.on("click",y)},g=function(){if(l.hasClass("disabled"))return;u--,b()},y=function(){if(c.hasClass("disabled"))return;u++,b()},b=function(){var e=C(s[u]),t=u+1;E(e),x(),S(),$("#current-carousel-layer").html(t),w()},w=function(){u===s.length-1?c.addClass("disabled"):c.removeClass("disabled"),u===0?l.addClass("disabled"):l.removeClass("disabled")},E=function(e){var r=i18n.content.removeLayer,i='<span class="standout-text">'+e.layer.title+"</span>",s=r.issueExplanation.replace(/{{LAYER_NAME}}/g,i);f.html(n({labels:r,issueExplanation:s,layerUrl:e.layer.info.originalUrl,copied:i18n.storyMap.shareDialog.copied,mapUrl:e.map.url,mapId:e.issue.mapId,isBuilder:window.builderIntegration})),t.addTooltipEvents(f)},S=function(){var e=new r(document.getElementById("layer-url-icon"));e.on("success",function(e){N(e.trigger)})},x=function(){$("#layer-url-text").on("click",function(){$(this).select()}),window.builderIntegration&&$("#remove-layer-modal .edit-map-link").on("click",function(){var e=$(this).data("id");typeof window.editMapCallback=="function"&&window.editMapCallback(e)})},N=function(e){var t=$(e),n=$("#layer-copied-message");t.addClass("copied"),t.removeClass("icon-copy"),t.addClass("icon-check"),t.addClass("success"),n.show(),setTimeout(function(){t.removeClass("icon-check"),t.removeClass("success"),t.addClass("icon-copy"),t.hasClass("copied")&&t.removeClass("copied"),n.hide()},1e3)},C=function(e){var t=k(e.mapId),n={issue:e,map:t,layer:L(e.id,t)};return n},k=function(e){var t=null;for(var n=0;n<o.media.maps.items.length;n++){t=o.media.maps.items[n];if(t.id===e)return t}return null},L=function(e,t){var n=null;if(!t)return null;for(var r=0;r<t.info.layers.length;r++){n=t.info.layers[r];if(n.id===e)return n}return null};h()}}),define("my/content/scanning/Scanner",["dojo/Deferred","dojo/promise/all","my/content/Builder","my/content/scanning/ItemScanner","my/models/Issue","my/content/scanning/StoryIssues","my/content/scanning/StoryUpdate","my/content/scanning/StoryUI","my/content/Templater","my/helpers/TabHelper","my/helpers/UIHelper","my/helpers/AnimationHelper","my/content/tabs/Tags","my/models/Credentials","my/content/scanning/PremiumManager","my/content/tabs/MapsSharing","my/content/dialogs/ImagePicker","my/content/ExpandedStory","my/content/dialogs/RemoveLayerDialog","my/helpers/Formatter"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){"use strict";var w=null,E=function(t){var n=new e,r=t.storyMap,i=t.useExistingMedia,s=t.targetAccessLevel?t.targetAccessLevel:r.accessLevel,o=t.targetAccessLevel?!0:!1,u=t.updateUI===!1?!1:!0,a=t.isFinalScan?!0:!1,f=t.expandedMaps||[],l=t.premiumDeferred,c=t.existingItemData;return i?w&&w.id===r.id?x({deferred:n,templateData:w,accessLevel:s,id:r.id,updateUI:u,isFinalScan:a,hasTargetLevel:o,expandedMaps:f,premiumDeferred:l,existingItemData:c}):S({deferred:n,storyMap:r,accessLevel:s,updateUI:u,isFinalScan:a,hasTargetLevel:o,existingItemData:c,premiumDeferred:l}):S({deferred:n,storyMap:r,accessLevel:s,updateUI:u,isFinalScan:a,hasTargetLevel:o,existingItemData:c,premiumDeferred:l}),n.promise},S=function(e){var t=e.deferred,r=e.storyMap,i=e.accessLevel,s=e.updateUI,o=e.isFinalScan,u=e.hasTargetLevel,a=e.existingItemData,f=e.premiumDeferred,c={},h=N(r);c=n.buildMedia(h,a),c.then(function(e){x({deferred:t,templateData:e,accessLevel:i,id:h.id,updateUI:s,isFinalScan:o,hasTargetLevel:u,expandedMaps:[],premiumDeferred:f,existingItemData:a})},function(e){l.emptyStatusPane(h.id),l.removeMediaTabsEvents(h.id),t.reject(e)})},x=function(e){var t=e.deferred,n=e.templateData,r=e.accessLevel,i=e.id,c=e.updateUI,h=e.isFinalScan,p=e.hasTargetLevel,d=e.expandedMaps,v=e.premiumDeferred,m=e.existingItemData,y=[],b=new s,w=null,E=!0,S=L(n,r),x=null,N=!1;S.then(function(e){e.issues=b.compileMediaIssues(e.media),b.customizeIssueObj(e,r);if(p&&e.issues.yoursSharedBelowLevel.items.length>0){w=T(e.issues);if(w){e.hasErrors=!1,t.resolve(e);return}E=!1}y=b.issueObjToList(e.issues,E),e.media.maps&&f.scanTab(e.media.maps),o.updateIssueStatus(e),e.media.maps&&c!==!1&&(u.updateMapUI(e.media.maps,e,!0),A(e)),e.id===i&&C(e),x=g.getExpandedStory(),N=e.id===x.id,N&&h&&g.setIgnoreAllIssues(!1),e.hasErrors||e.hasWarnings?N&&(a.templatizeIssueStatusPane(y,e.id,e.hasErrors),B(e,r,v,m),l.updateNotificationPane(e,d,E),l.disableStoryShareButtons(e.id,!1),l.showIssueStatusPane(e.id),l.highlightFirstIssueTab(e),e.hasErrors&&(e.storyMap.type==="Map Tour"||e.storyMap.type==="Shortlist"||e.storyMap.type==="Crowdsource")&&e.media.images&&e.media.images.items.length===0&&(u.hideContentLoader("images",e.id),l.showImageError(e.id))):(l.enableStoryShareButtons(e.id),l.hideIssueStatusPane(e.id),a.templatizeSuccessStatusPane(e.id),B(e,r,null,m),l.updateNotificationPane(e,d,E),(e.storyMap.type==="Map Tour"||e.storyMap.type==="Shortlist"||e.storyMap.type==="Crowdsource")&&e.media.images&&e.media.images.items.length===0&&(u.hideContentLoader("images",e.id),l.showImageError(e.id))),l.addMediaTabsEvents(e.id,e),O(e),M(e.storyMap,e.hasErrors),t.resolve(e)})},T=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t].items.length>0&&e[t].title!=="yoursSharedBelowLevel")return!1;return!0},N=function(e){if(e.accessLevel==="org"||e.accessLevel==="account")e.accessLevel="organization";var t={id:e.id,storyMap:e,media:{},storyComponent:"",titleType:"",hasErrors:!1,hasWarnings:!1,issues:{},premiumManager:new d(e)};return t},C=function(e){w=e},k=function(){return w},L=function(n,i){var s=[],o=null,u=[],a=new e;if(n.media.maps){s=n.media.maps.items;for(var f=0;f<s.length;f++)o=r.scanMapFinally(s[f],n.storyMap.accessLevel,i,n.premiumManager),u.push(o);t(u).then(function(){a.resolve(n)})}else a.resolve(n);return a.promise},A=function(e){var t='.item[data-id="'+e.id+'"]';$(t+" .map-sharing").off("click").on("click",function(t){if($(t.currentTarget).parents(".sharing-icons.locked").length||$(t.currentTarget).hasClass("temp-disabled")){t.preventDefault();return}var n=$(this),r=n.data("sharing"),i=n.data("id"),s=n.data("type"),o=n.data("map-id")?[n.data("map-id")]:[],u={};n.parent().parent().hasClass("locked")||(l.disableFadeableButtons(e.id),u=H(!1,r,i,s,o,e),u.then(function(t){var n=b.formatNotificationString(t.newLevel,t.type,!1,!1,!1,"");l.reEnableButtons(e.id),a.templatizeSuccessNotification(e.id,n),l.showSuccessNotification(e.id,!1),l.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),window.builderIntegration&&(e.hasErrors?typeof window.checkFailCallback=="function"&&window.checkFailCallback(!0):typeof window.checkSuccessCallback=="function"&&window.checkSuccessCallback())},function(){l.reEnableButtons(e.id),a.templatizeErrorNotification(e.id),l.showErrorNotification(e.id),l.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),window.builderIntegration&&typeof window.checkFailCallback=="function"&&window.checkFailCallback(!1)}))}),window.builderIntegration&&$(t+" .edit-item").off("click").on("click",function(){var e=$(this).data("id");typeof window.editMapCallback=="function"&&window.editMapCallback(e)}),l.addToggleLayerEvents(e.id)},O=function(e){var t='.item[data-id="'+e.id+'"]';window.builderIntegration&&$(t+" .section-link").off("click").on("click",function(){var e=$(this).data("section-number"),t=parseInt(e,10),n=t-1,r=$(this).data("type"),i=$(this).data("action-id")||"";typeof window.sectionClickCallback=="function"&&window.sectionClickCallback(n,r,i)})},M=function(e){$(".collection-tags").change(function(){h.updateCollectionTag($(this).val(),e)}),$(".item-tags-list").off("blur").on("blur",function(){h.updateYourTags($(this),e)}),$(".item-tags-list").on("keypress",function(e){var t=$(this);if(e.keyCode===13){t.html(t.html()+", "),t[0].focus();var n=document.createRange();n.selectNodeContents(t[0]),n.collapse(!1);var r=window.getSelection();return r.removeAllRanges(),r.addRange(n),!1}}),$(".item-tags-list").on("keyup",function(){$("li.expanded .item-update-tags").removeClass("disabled")}),$(".item-update-tags").on("click",function(){if($(this).hasClass("disabled")||$(this).hasClass("notify")||$(this).hasClass("temp-disabled"))return;var t=p.getCredentials(),n={item:e,userName:t.userName},r=h.saveTagsToServer(n);l.disableFadeableButtons(e.id),r.then(function(){},function(){})})},_=function(n,r,s){var o=new e,u=[],f={},c=i.getPossibleIssues(),h=r.issues[c.yoursSharedBelowLevel].items,p=[],d=null;for(var v=0;v<h.length;v++)f=h[v],D(f,r,u,p,n);return t(u).then(function(e){var t={storyMap:r.storyMap,useExistingMedia:!0,expandedMaps:p},n={};s?(n={changedMapLayers:e,expandedMaps:p},o.resolve(n)):(d=E(t),d.then(function(){l.updateSharedRows(e,!0),o.resolve(e)},function(){l.updateSharedRows(e,!0),o.resolve(e)}))},function(){var e={storyMap:r.storyMap,useExistingMedia:!0,expandedMaps:p};d=E(e),d.then(function(){a.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevels,r.id),l.showErrorNotification(r.id),o.reject()},function(){a.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevels,r.id),l.showErrorNotification(r.id),o.reject()})}),o.promise},D=function(e,t,n,r,i){var s=!1,o={};if(e.itemType==="layer"){r.indexOf(e.mapId)===-1&&r.push(e.mapId),s=P(e,t.media.maps.items);if(s===!0)return}o=H(!0,i,e.id,e.itemType,[],t),n.push(o)},P=function(e,t){var n={},r={};for(var i=0;i<t.length;i++){n=t[i];if(n.id===e.mapId)for(var s=0;s<n.info.layers.length;s++){r=n.info.layers[s];if(r.id===e.id)return r.info.partOfMap}}return!1},H=function(t,n,r,i,s,u){var f=new e,c={},h=null;return c=o.updateMapObj(n,r,i,u),c.then(function(e){var n={};t?f.resolve(e):(n={storyMap:e.storyObj.storyMap,useExistingMedia:!0,expandedMaps:s},h=E(n),h.then(function(){l.updateSharedRow(e,!1),f.resolve(e)},function(){l.updateSharedRow(e,!1),f.resolve(e)}))},function(){var e={};t?f.reject():(e={storyMap:u.storyMap,useExistingMedia:!0,expandedMaps:s},a.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevel,u.id),l.showErrorNotification(u.id),h=E(e),h.then(function(){f.reject()},function(){f.reject()}))}),f.promise},B=function(e,t,n,r){var s='.item[data-id="'+e.id+'"]',o=s+" .notification-issue",u=i.getPossibleIssues();e.issues.serviceOkItemNot.items.length&&(new y(e),$("#remove-layer-rescan").on("click",function(){j(e,r)})),$(s+" .item-side-buttons .refresh").on("click",function(t){!$(this).hasClass("disabled")&&!$(t.currentTarget).hasClass("temp-disabled")&&j(e,r)}),$(o).on("click",function(t){($(t.target).hasClass("notification-issue")||$(t.target).closest(".notification-explanation").length>0)&&l.selectNotification($(this),e.id,e.issues,[])}),$(o+'[data-issue-type="'+u.serviceOkItemNot+'"] .issue-action[data-action="ignore"]').on("click",function(t){if($(t.currentTarget).hasClass("temp-disabled")){t.preventDefault();return}g.setIgnoreServiceItem(!0),j(e,r)}),$(o+'[data-issue-type="'+u.yoursSharedBelowLevel+'"] .issue-action.positive').on("click",function(n){if($(n.currentTarget).hasClass("temp-disabled")){n.preventDefault();return}q(e,t)}),$(o+'[data-issue-type="'+u.premiumContent+'"] .issue-action.positive').on("click",function(r){if($(r.currentTarget).hasClass("temp-disabled")){r.preventDefault();return}e.storyMap.accessLevel==="public"?V(e,t,!0):U(n,e,t,!0,!0)}),$(o+'[data-issue-type="'+u.subscriptionContent+'"] .issue-action.positive').on("click",function(n){if($(n.currentTarget).hasClass("temp-disabled")){n.preventDefault();return}e.storyMap.accessLevel==="public"&&V(e,t,!1)}),$(s+" .ignore-all-button").on("click",function(){g.setIgnoreAllIssues(!0,e.issues),l.hideIgnoreButton(e.id),window.builderIntegration?e.hasErrors?typeof window.checkFailCallback=="function"&&window.checkFailCallback(!0):typeof window.checkSuccessCallback=="function"&&window.checkSuccessCallback():l.enableStoryShareButtons(e.id)})},j=function(e,t){var n='.item[data-id="'+e.id+'"]',r=$(n+" .refresh-tooltip-container .tooltip-content"),i=r.css("width"),s={storyMap:e.storyMap,useExistingMedia:!1,existingItemData:t,isFinalScan:!0},o=null;r.html(i18n.content.notification.checking),r.css("width",i),l.disableFadeableButtons(e.id),a.templatizeCheckingStatusPane(e.id),o=E(s),o.then(function(e){F(e),window.builderIntegration&&(e.hasErrors?typeof window.checkFailCallback=="function"&&window.checkFailCallback(!0):typeof window.checkSuccessCallback=="function"&&window.checkSuccessCallback())},function(){I(e),window.builderIntegration&&typeof window.checkFailCallback=="function"&&window.checkFailCallback(!1)})},F=function(e){var t=[],n=e.media.images,r=$("#modal-image-picker").data("item-id");l.reEnableButtons(e.id),l.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),n?t=m.convertToPickerImages(n.items):t=[],r===e.id&&m.setImages(t)},I=function(e){l.emptyMediaContainers(e.id),l.reEnableButtons(e.id),l.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),l.showContentErrorMessage(e.id),window.builderIntegration||m.setImages(null),l.emptyStatusPane(e.id)},q=function(e,t){var n={};l.disableFadeableButtons(e.id),n=_(t,e,!1),n.then(function(){var n=b.formatNotificationString(t,"content",!1,!1,!1,"");l.reEnableButtons(e.id),a.templatizeSuccessNotification(e.id,n),l.showSuccessNotification(e.id,!0),l.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),window.builderIntegration&&(e.hasErrors?typeof window.checkFailCallback=="function"&&window.checkFailCallback(!0):typeof window.checkSuccessCallback=="function"&&window.checkSuccessCallback())},function(){l.reEnableButtons(e.id),l.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),window.builderIntegration&&typeof window.checkFailCallback=="function"&&window.checkFailCallback(!1)})},R=function(e,t,n,r,i){var s=W(t,n,r),o=[];s.then(function(r){var s=E({storyMap:t.storyMap,useExistingMedia:!0,expandedMaps:r.expandedMaps,isFinalScan:!0}),f=et(i.changedMapLayers);f==="maps"?f="both":f="layers",o=J(r.results,t),o=o.concat(i.changedMapLayers),s.then(function(){var s=b.formatNotificationString(t.storyMap.accessLevel,"story",!0,!1,!1,f);l.updateSharedRows(o,!0),u.updateStoryMapUI(t.storyMap.accessLevel,t.id),l.emptyExpandedMaps(t.id),r.expandedMaps=r.expandedMaps.concat(i.expandedMaps);for(var c=0;c<r.expandedMaps.length;c++)l.toggleLayers(r.expandedMaps[c],t.id,!1);a.templatizeSuccessNotification(t.id,s),l.showSuccessNotification(t.id,!0),l.reEnableButtons(t.id),l.showBySharingLevel(t.id,t.storyMap.accessLevel),l.restrictMapLayerSharing(t.id,t.storyMap.accessLevel),e&&e.resolve({storyAndContent:!0,premiumContent:n,subscriptionContent:!n,storyMap:t.storyMap,changedItemsType:f})},function(){var r=b.formatNotificationString(t.storyMap.accessLevel,"story",!1,!1,!1,f);u.updateStoryMapUI(t.storyMap.accessLevel,t.id),l.updateSharedRows(o,!0),l.reEnableButtons(t.id),a.templatizeSuccessNotification(t.id,r),l.showSuccessNotification(t.id,!0),l.restrictMapLayerSharing(t.id,t.storyMap.accessLevel),e&&e.resolve({storyAndContent:!0,premiumContent:n,subscriptionContent:!n,storyMap:t.storyMap,changedItemsType:f})})},function(){K(e,t,n),l.updateSharedRows(i.changedMapLayers,!0),u.updateStoryMapUI(t.storyMap.accessLevel,t.id)})},U=function(e,n,r,i,s){var o=z(n,r),u=_(r,n,!0);t([o,u]).then(function(t){R(e,n,i,s,t[1])},function(){Q(e,n,o)})},z=function(t,n){var r=new e,i=v.updateItemSharing(n,t.id,"storyMap",t),s=null;return i.then(function(e){r.resolve(e)},function(){s=E({storyMap:t.storyMap,useExistingMedia:!0}),s.then(function(){a.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevel,t.id),l.showErrorNotification(t.id),r.reject()},function(){a.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevel,t.id),l.showErrorNotification(t.id),r.reject()})}),r.promise},W=function(t,n,r){var i=new e,s=[],o=new e,u=[];return r?(s=G(t.media.maps.items),s=s.concat(Y(t.media.maps.items))):n?s=G(t.media.maps.items):s=Y(t.media.maps.items),u=X(s),l.disableFadeableButtons(t.id),app.cfg.proxyNetworkManager.addRequest({params:s,deferred:o,request:t.premiumManager.addProxies}),o.promise.then(function(e){i.resolve({results:e,expandedMaps:u})},function(){i.reject()}),i.promise},X=function(e){var t=[],n=null;for(var r=0;r<e.length;r++)n=e[r],n.type==="layer"&&t.indexOf(n.info.mapId)===-1&&t.push(n.info.mapId);return t},V=function(e,t,n){var r=W(e,n,!1);r.then(function(r){var i=[],s=null,o=b.formatNotificationString(t,"content",!1,n,!n,"");l.emptyExpandedMaps(e.id);for(var u=0;u<r.expandedMaps.length;u++)l.toggleLayers(r.expandedMaps[u],e.id,!1);l.reEnableButtons(e.id),a.templatizeSuccessNotification(e.id,o),l.showSuccessNotification(e.id,!0),l.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),s=E({storyMap:e.storyMap,useExistingMedia:!0,expandedMaps:r.expandedMaps}),s.then(function(){i=J(r.results,e),l.updateSharedRows(i,!1),window.builderIntegration&&(e.hasErrors?typeof window.checkFailCallback=="function"&&window.checkFailCallback(!0):typeof window.checkSuccessCallback=="function"&&window.checkSuccessCallback())},function(){window.builderIntegration&&typeof window.checkFailCallback=="function"&&window.checkFailCallback(!1),i=J(r.results,e),l.updateSharedRows(i,!1)})},function(){K(null,e,n),window.builderIntegration&&typeof window.checkFailCallback=="function"&&window.checkFailCallback(!1)})},J=function(e,t){var n=[],r=null,i=null;for(var s=0;s<e.length;s++)i=e[s],r={type:i.type,storyObj:t,itemId:i.id},n.push(r);return n},K=function(e,t,n){var r=null,i="";n?i=i18n.content.errors.cantUpdatePremiumContent:i=i18n.content.errors.cantUpdateSubscriptionContent,a.templatizeErrorNotification(i,t.id),l.showErrorNotification(t.id),l.reEnableButtons(t.id),l.restrictMapLayerSharing(t.id,t.storyMap.accessLevel),e&&e.reject({message:i,storyMap:t.storyMap}),r=E({storyMap:t.storyMap,useExistingMedia:!0,expandedMaps:[]}),r.then(function(){},function(){})},Q=function(e,t,n){var r=E({storyMap:t.storyMap,useExistingMedia:!0,expandedMaps:[]});r.then(function(){var r="";n.isRejected()?r=i18n.content.errors.cantChangeSharingLevel:r=i18n.content.errors.cantChangeSharingLevels,a.templatizeErrorNotification(r,t.id),l.showErrorNotification(t.id),l.reEnableButtons(t.id),l.restrictMapLayerSharing(t.id,t.storyMap.accessLevel),e&&e.reject({message:r,storyMap:t.storyMap})},function(){var r="";n.isRejected()?r=i18n.content.errors.cantChangeSharingLevel:r=i18n.content.errors.cantChangeSharingLevels,a.templatizeErrorNotification(r,t.id),l.showErrorNotification(t.id),l.reEnableButtons(t.id),l.restrictMapLayerSharing(t.id,t.storyMap.accessLevel),e&&e.reject({message:r,storyMap:t.storyMap})})},G=function(e){var t=[],n=null,r=null;for(var i=0;i<e.length;i++){n=e[i],n.isPremiumContent&&!n.hasProxy&&t.push(n);for(var s=0;s<n.info.layers.length;s++)r=n.info.layers[s],r.isPremiumContent&&!r.hasProxy&&t.push(r)}return t},Y=function(e){var t=[],n=null,r=null;for(var i=0;i<e.length;i++){n=e[i],n.isSubscriptionContent&&!n.hasProxy&&t.push(n);for(var s=0;s<n.info.layers.length;s++)r=n.info.layers[s],r.isSubscriptionContent&&!r.hasProxy&&t.push(r)}return t},Z=function(e){var t=!1,n=null;return!e.hasErrors&&e.media.maps&&(n=Y(e.media.maps.items),n.length&&(t=!0)),t},et=function(e){var t="",n=[],r=[],i=null;for(var s=0;s<e.length;s++)i=e[s],i.type==="map"?n.push(i):i.type==="layer"&&r.push(i);return n.length&&r.length?t="both":n.length&&!r.length?t="maps":!n.length&&r.length&&(t="layers"),t},tt=function(e){var t=g.getIgnorePremiumOrSecure(),n=!1;if(e.premiumContent.items.length>0||e.secureService.items.length>0||e.othersSharedBelowLevel.items.length>0)t||(n=!0);return n};return{scan:E,getStoryMedia:k,changeBulkItemSharing:_,checkIfOnlyIssueSubscription:Z,addProxyBulkShare:U,checkSharedItemsType:et,checkForUnignoredIssues:tt}}),define("lib-build/hbars!my/content/StoryMap",["Handlebars"],function(e){return e.template({1:function(e,t,n,r,i){var s,o,u="function",a=t.helperMissing,f=this.escapeExpression,l=this.lambda,c='<li class="item row padding-leader-half padding-trailer-half';return s=t["if"].call(e,e!=null?e.hasErrors:e,{name:"if",hash:{},fn:this.program(2,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='" data-index="'+f((o=(o=t.index||(e!=null?e.index:e))!=null?o:a,typeof o===u?o.call(e,{name:"index",hash:{},data:r}):o))+'" data-id="'+f((o=(o=t.id||(e!=null?e.id:e))!=null?o:a,typeof o===u?o.call(e,{name:"id",hash:{},data:r}):o))+'" data-story-type="'+f((o=(o=t.type||(e!=null?e.type:e))!=null?o:a,typeof o===u?o.call(e,{name:"type",hash:{},data:r}):o))+'" data-owner="'+f((o=(o=t.owner||(e!=null?e.owner:e))!=null?o:a,typeof o===u?o.call(e,{name:"owner",hash:{},data:r}):o))+'">\n	<div class="item-close expandable">\n		<h6 class="item-close-text header-light">'+f(l((s=i[1]!=null?i[1].labels:i[1])!=null?s.collapse:s,e))+'</h6>\n	</div>\n	<div class="row leader-half trailer-half">\n		<div class="column-4">\n			<div class="dialog-container"></div>\n			<div class="image-container">\n				<img class="item-photo" src="'+f((o=(o=t.thumbnail||(e!=null?e.thumbnail:e))!=null?o:a,typeof o===u?o.call(e,{name:"thumbnail",hash:{},data:r}):o))+'">\n				<div class="photo-bottom-overlay modal-show" data-modal="image-picker">\n					<div class="photo-camera-container">\n						<img class="photo-camera" src="assets/images/my-stories/camera.png"/>\n					</div><!--\n				 --><div class="photo-text">'+f(l((s=(s=i[1]!=null?i[1].labels:i[1])!=null?s.imagePicker:s)!=null?s.chooseImage:s,e))+'</div>\n				</div>\n				<div class="item-thumbnail-icon item-status-icon error icon-stories-error"></div>\n				<div class="item-thumbnail-icon tooltip after custom-after item-status-icon warning icon-stories-warning">\n					<div class="tooltip-wrapper">\n						<span class="tooltip-content">'+f(l((s=(s=i[1]!=null?i[1].contentLabels:i[1])!=null?s.tooltipWarnings:s)!=null?s.scenesNotScannedGloballyAlt:s,e))+'</span>\n					</div>\n				</div>\n			</div>\n			<div class="item-side-buttons expandable">\n',s=this.invokePartial(n.shareButtons,"				","shareButtons",e,{contentLabels:i[1]!=null?i[1].contentLabels:i[1],privileges:i[1]!=null?i[1].privileges:i[1],sharingLevel:i[1]!=null?i[1].sharingLevel:i[1],labels:i[1]!=null?i[1].labels:i[1]},t,n,r),s!=null&&(c+=s),c+='				<div class="notification-container"></div>\n				<div class="status-pane-container">',s=this.invokePartial(n.checkingPane,"","checkingPane",e,{checkingLabel:(s=(s=i[1]!=null?i[1].contentLabels:i[1])!=null?s.notification:s)!=null?s.checking:s},t,n,r),s!=null&&(c+=s),c+='</div>\n			</div>\n		</div>\n	 	<div class="item-text column-20 container">\n	 		<div class="item-title-container row">\n	 			<div class="item-metadata-container whole-line column-18">\n	 				<div>\n	 					<div class="item-title-container">\n	 						<h2 class="item-title editing">'+f((o=(o=t.title||(e!=null?e.title:e))!=null?o:a,typeof o===u?o.call(e,{name:"title",hash:{},data:r}):o))+'</h2>\n	 						<span class="item-title-error-message">'+f(l((s=i[1]!=null?i[1].labels:i[1])!=null?s.saveFailed:s,e))+'</span>\n	 					</div>\n	 					<h4 class="item-subtitle inline">'+f((o=(o=t.type||(e!=null?e.type:e))!=null?o:a,typeof o===u?o.call(e,{name:"type",hash:{},data:r}):o))+'</h4><span class="separator"></span><span class="access">',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"shared",{name:"ifEquals",hash:{},fn:this.program(4,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"private",{name:"ifEquals",hash:{},fn:this.program(4,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"organization",{name:"ifEquals",hash:{},fn:this.program(6,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"public",{name:"ifEquals",hash:{},fn:this.program(8,r,i),inverse:this.noop,data:r}),s!=null&&(c+=s),c+='</span><span class="separator"></span><span>'+f((o=(o=t.modifiedStr||(e!=null?e.modifiedStr:e))!=null?o:a,typeof o===u?o.call(e,{name:"modifiedStr",hash:{},data:r}):o))+'</span><span class="separator num-views-separator"></span><span class="num-views block-element">'+f((o=(o=t.numViewsStr||(e!=null?e.numViewsStr:e))!=null?o:a,typeof o===u?o.call(e,{name:"numViewsStr",hash:{},data:r}):o))+'</span>\n	 				</div>\n					<div class="item-summary-container expandable leader-half trailer-half">\n						<h4 class="item-subtitle summary">'+f(l((s=i[1]!=null?i[1].labels:i[1])!=null?s.summary:s,e))+'</h4>\n						<p class="item-summary editing" contentEditable="true">',s=t["if"].call(e,e!=null?e.snippet:e,{name:"if",hash:{},fn:this.program(10,r,i),inverse:this.program(12,r,i),data:r}),s!=null&&(c+=s),c+='</p>\n						<span class="item-snippet-error-message">'+f(l((s=i[1]!=null?i[1].labels:i[1])!=null?s.saveFailed:s,e))+'</span>\n					</div>\n					<div class="item-edit-actions expandable">\n						<a class="btn icon-edit item-edit item-action fadeable-button" href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+f((t.formatParam||e&&e.formatParam||a).call(e,e!=null?e.url:e,"edit",{name:"formatParam",hash:{},data:r}))+'" target="_blank">'+f(l((s=i[1]!=null?i[1].labels:i[1])!=null?s.editStory:s,e))+'</a>\n						<a class="btn item-action item-view-live icon-window-lines fadeable-button" href="'+f((o=(o=t.url||(e!=null?e.url:e))!=null?o:a,typeof o===u?o.call(e,{name:"url",hash:{},data:r}):o))+'" target="_blank">',s=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"public",{name:"ifEquals",hash:{},fn:this.program(14,r,i),inverse:this.program(16,r,i),data:r}),s!=null&&(c+=s),c+='</a>\n						<div class="modal-show btn icon-delete item-delete item-action fadeable-button" data-modal="delete-item">'+f(l((s=i[1]!=null?i[1].labels:i[1])!=null?s.deleteButton:s,e))+'</div>\n						<div class="social-share-buttons">\n							<div class="tooltip above social-tooltip">\n								<div class="social-share-button share-dialog-button icon-link modal-show fadeable-button" data-modal="share-story"></div>\n								<div class="tooltip-wrapper social share-dialog no-show">\n									<span class="tooltip-content">'+f(l((s=(s=i[1]!=null?i[1].labels:i[1])!=null?s.socialSharing:s)!=null?s.availableWhenPublic:s,e))+'</span>\n								</div>\n							</div>\n							<div class="tooltip above social-tooltip">\n								<div class="social-share-button facebook-share icon-stories-facebook fadeable-button"></div>\n								<div class="tooltip-wrapper social no-show">\n									<span class="tooltip-content">'+f(l((s=(s=i[1]!=null?i[1].labels:i[1])!=null?s.socialSharing:s)!=null?s.availableWhenPublic:s,e))+'</span>\n								</div>\n							</div>\n							<div class="tooltip above social-tooltip">\n								<div class="social-share-button twitter-share icon-twitter fadeable-button"></div>\n								<div class="tooltip-wrapper social no-show">\n									<span class="tooltip-content">'+f(l((s=(s=i[1]!=null?i[1].labels:i[1])!=null?s.socialSharing:s)!=null?s.availableWhenPublic:s,e))+'</span>\n								</div>\n							</div>\n						</div>\n					</div>\n	 			</div>\n	 			<div class="infographics-container column-6 leader-1 expandable"></div>\n	 		</div>\n',s=this.invokePartial(n.content," 			","content",e,{isPortal:i[1]!=null?i[1].isPortal:i[1],isBuilder:!1,labels:i[1]!=null?i[1].labels:i[1]},t,n,r),s!=null&&(c+=s),c+'		</div>\n	</div>\n	<div class="item-highlight"></div>\n</li>\n'},2:function(e,t,n,r){return" has-issues"},4:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].sharingLevel:i[2])!=null?s.privateMessage:s,e))},6:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].sharingLevel:i[2])!=null?s.organization:s,e))},8:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].sharingLevel:i[2])!=null?s.publicMessage:s,e))},10:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return u((i=(i=t.snippet||(e!=null?e.snippet:e))!=null?i:o,typeof i===s?i.call(e,{name:"snippet",hash:{},data:r}):i))},12:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=(s=i[2]!=null?i[2].labels:i[2])!=null?s.placeholders:s)!=null?s.noSummary:s,e))},14:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].labels:i[2])!=null?s.viewLive:s,e))},16:function(e,t,n,r,i){var s,o=t.helperMissing;return s=(t.ifEquals||e&&e.ifEquals||o).call(e,e!=null?e.accessLevel:e,"organization",{name:"ifEquals",hash:{},fn:this.program(14,r,i),inverse:this.program(17,r,i),data:r}),s!=null?s:""},17:function(e,t,n,r,i){var s,o=this.lambda,u=this.escapeExpression;return u(o((s=i[2]!=null?i[2].labels:i[2])!=null?s.preview:s,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i){var s,o="";return s=t.each.call(e,e!=null?e.results:e,{name:"each",hash:{},fn:this.program(1,r,i),inverse:this.noop,data:r}),s!=null&&(o+=s),o},usePartial:!0,useData:!0,useDepths:!0})}),define("lib-build/hbars!my/content/ShareButtons",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.sharingLevel:e)!=null?i.privateMessage:i,e))},3:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.sharingLevel:e)!=null?i.organization:i,e))},5:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=e!=null?e.sharingLevel:e)!=null?i.publicMessage:i,e))},7:function(e,t,n,r){return" active"},9:function(e,t,n,r){return""},11:function(e,t,n,r){return" sharing-disabled"},13:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,e!=null?e.accessLevel:e,"organization",{name:"ifEquals",hash:{},fn:this.program(3,r),inverse:this.program(14,r),data:r}),i!=null?i:""},14:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=(i=e!=null?e.contentLabels:e)!=null?i.errors:i)!=null?i.orgDisabled:i,e))},16:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,e!=null?e.accessLevel:e,"public",{name:"ifEquals",hash:{},fn:this.program(5,r),inverse:this.program(17,r),data:r}),i!=null?i:""},17:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return o(s((i=(i=e!=null?e.contentLabels:e)!=null?i.errors:i)!=null?i.publicDisabled:i,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a=t.helperMissing,f="function",l='<div class="item-actions">\n	<span>'+u(o((i=e!=null?e.labels:e)!=null?i.shared:i,e))+': </span><h4 class="item-subtitle access">';return i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"shared",{name:"ifEquals",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(l+=i),i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"private",{name:"ifEquals",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(l+=i),i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"organization",{name:"ifEquals",hash:{},fn:this.program(3,r),inverse:this.noop,data:r}),i!=null&&(l+=i),i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"public",{name:"ifEquals",hash:{},fn:this.program(5,r),inverse:this.noop,data:r}),i!=null&&(l+=i),l+='</h4>\n	<div class="btn-group">\n	    <div class="tooltip above sharing-button-container story private">\n			<button class="story-sharing toggle-button map-sharing-icon server-button icon-user private locked',i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"private",{name:"ifEquals",hash:{},fn:this.program(7,r),inverse:this.noop,data:r}),i!=null&&(l+=i),i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"shared",{name:"ifEquals",hash:{},fn:this.program(7,r),inverse:this.noop,data:r}),i!=null&&(l+=i),l+='" data-id="'+u((s=(s=t.id||(e!=null?e.id:e))!=null?s:a,typeof s===f?s.call(e,{name:"id",hash:{},data:r}):s))+'" data-sharing="private" data-type="story-map"></button>\n			<div class="tooltip-wrapper">\n				<p class="tooltip-content">'+u(o((i=e!=null?e.sharingLevel:e)!=null?i.privateMessage:i,e))+'</p>\n			</div>\n		</div><!--\n	 --><div class="tooltip above sharing-button-container story organization',i=t["if"].call(e,(i=e!=null?e.privileges:e)!=null?i.canShareMineOrg:i,{name:"if",hash:{},fn:this.program(9,r),inverse:this.program(11,r),data:r}),i!=null&&(l+=i),l+='">\n			<button class="story-sharing toggle-button map-sharing-icon server-button icon-community organization locked',i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"organization",{name:"ifEquals",hash:{},fn:this.program(7,r),inverse:this.noop,data:r}),i!=null&&(l+=i),i=t["if"].call(e,(i=e!=null?e.privileges:e)!=null?i.canShareMineOrg:i,{name:"if",hash:{},fn:this.program(9,r),inverse:this.program(11,r),data:r}),i!=null&&(l+=i),l+='" data-id="'+u((s=(s=t.id||(e!=null?e.id:e))!=null?s:a,typeof s===f?s.call(e,{name:"id",hash:{},data:r}):s))+'" data-sharing="organization" data-type="story-map"></button>\n			<div class="tooltip-wrapper">\n				<p class="tooltip-content">',i=t["if"].call(e,(i=e!=null?e.privileges:e)!=null?i.canShareMineOrg:i,{name:"if",hash:{},fn:this.program(3,r),inverse:this.program(13,r),data:r}),i!=null&&(l+=i),l+='</p>\n			</div>\n		</div><!--\n	 --><div class="tooltip above sharing-button-container story public',i=t["if"].call(e,(i=e!=null?e.privileges:e)!=null?i.canShareMinePublic:i,{name:"if",hash:{},fn:this.program(9,r),inverse:this.program(11,r),data:r}),i!=null&&(l+=i),l+='">\n			<button class="story-sharing toggle-button map-sharing-icon server-button icon-stories-globe public locked',i=(t.ifEquals||e&&e.ifEquals||a).call(e,e!=null?e.accessLevel:e,"public",{name:"ifEquals",hash:{},fn:this.program(7,r),inverse:this.noop,data:r}),i!=null&&(l+=i),i=t["if"].call(e,(i=e!=null?e.privileges:e)!=null?i.canShareMinePublic:i,{name:"if",hash:{},fn:this.program(9,r),inverse:this.program(11,r),data:r}),i!=null&&(l+=i),l+='" data-id="'+u((s=(s=t.id||(e!=null?e.id:e))!=null?s:a,typeof s===f?s.call(e,{name:"id",hash:{},data:r}):s))+'" data-sharing="public" data-type="story-map">\n			</button>\n			<div class="tooltip-wrapper">\n				<p class="tooltip-content">',i=t["if"].call(e,(i=e!=null?e.privileges:e)!=null?i.canShareMinePublic:i,{name:"if",hash:{},fn:this.program(5,r),inverse:this.program(16,r),data:r}),i!=null&&(l+=i),l+"</p>\n			</div>\n		</div>\n	</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!my/content/Content",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){return""},3:function(e,t,n,r){return" leader-half"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u='<div class="item-content-container expandable row';return i=t["if"].call(e,e!=null?e.isBuilder:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(u+=i),u+'">\n	<div class="content-tabs-container media row trailer-1"></div>\n	<div>\n		<div class="item-table-container row" data-media-type="maps" data-tab-type="maps">\n			<div class="loading-container content-loader map-content-loader padding-leader-1 padding-trailer-1">\n				<h2 class="progress-title">'+o(s((i=e!=null?e.labels:e)!=null?i.loading:i,e))+'</h2>\n				<div class="loader">\n				   <span class="side side-left"><span class="fill"></span></span>\n				   <span class="side side-right"><span class="fill"></span></span>\n				</div>\n			</div>\n			<div class="maps-tab-error no-show">\n				<h2>'+o(s((i=(i=e!=null?e.labels:e)!=null?i.maps:i)!=null?i.unableRetrieveTitle:i,e))+"</h2>\n				<p>"+o(s((i=(i=e!=null?e.labels:e)!=null?i.maps:i)!=null?i.unableRetrieveDescription:i,e))+'</p>\n			</div>\n			<div class="item-media-container maps-container"></div>\n		</div>\n		<div class="item-table-container row" data-media-type="scenes" data-tab-type="scenes">\n			<div class="loading-container content-loader scenes-content-loader padding-leader-1 padding-trailer-1">\n				<h2 class="progress-title">'+o(s((i=e!=null?e.labels:e)!=null?i.loading:i,e))+'</h2>\n				<div class="loader">\n				   <span class="side side-left"><span class="fill"></span></span>\n				   <span class="side side-right"><span class="fill"></span></span>\n				</div>\n			</div>\n			<div class="item-media-container scenes-container"></div>\n		</div>\n		<div class="item-table-container row" data-media-type="images" data-tab-type="images">\n			<div class="loading-container content-loader image-content-loader padding-leader-1 padding-trailer-1">\n				<h2 class="progress-title">'+o(s((i=e!=null?e.labels:e)!=null?i.loading:i,e))+'</h2>\n				<div class="loader">\n				   <span class="side side-left"><span class="fill"></span></span>\n				   <span class="side side-right"><span class="fill"></span></span>\n				</div>\n			</div>\n			<div class="image-tab-error no-show">\n				<h2>'+o(s((i=(i=e!=null?e.labels:e)!=null?i.images:i)!=null?i.noImagesTitle:i,e))+"</h2>\n				<p>"+o(s((i=(i=e!=null?e.labels:e)!=null?i.images:i)!=null?i.noImagesDescription:i,e))+'</p>\n			</div>\n			<div class="item-media-container images-container"></div>\n		</div>\n		<div class="item-table-container row" data-media-type="videos" data-tab-type="videos">\n			<div class="loading-container content-loader video-content-loader padding-leader-1 padding-trailer-1">\n				<h2 class="progress-title">'+o(s((i=e!=null?e.labels:e)!=null?i.loading:i,e))+'</h2>\n				<div class="loader">\n				   <span class="side side-left"><span class="fill"></span></span>\n				   <span class="side side-right"><span class="fill"></span></span>\n				</div>\n			</div>\n			<div class="item-media-container videos-container"></div>\n		</div>\n		<div class="item-table-container row" data-media-type="webpages" data-tab-type="webpages">\n			<div class="loading-container content-loader webpage-content-loader padding-leader-1 padding-trailer-1">\n				<h2 class="progress-title">'+o(s((i=e!=null?e.labels:e)!=null?i.loading:i,e))+'</h2>\n				<div class="loader">\n				   <span class="side side-left"><span class="fill"></span></span>\n				   <span class="side side-right"><span class="fill"></span></span>\n				</div>\n			</div>\n			<div class="item-media-container webpages-container"></div>\n		</div>\n    <div class="item-table-container row" data-media-type="audio" data-tab-type="audio">\n			<div class="loading-container content-loader audio-content-loader padding-leader-1 padding-trailer-1">\n				<h2 class="progress-title">'+o(s((i=e!=null?e.labels:e)!=null?i.loading:i,e))+'</h2>\n				<div class="loader">\n				   <span class="side side-left"><span class="fill"></span></span>\n				   <span class="side side-right"><span class="fill"></span></span>\n				</div>\n			</div>\n			<div class="item-media-container audio-container"></div>\n		</div>\n		<div class="item-table-container row" data-tab-type="tags">\n			<div class="tags-container"></div>\n		</div>\n	</div>\n	<div class="content-tab-error">\n		<h2>'+o(s((i=(i=e!=null?e.labels:e)!=null?i.errors:i)!=null?i.unableToFind:i,e))+"</h2>\n		<p>"+o(s((i=(i=e!=null?e.labels:e)!=null?i.errors:i)!=null?i.unableToRetrieve:i,e))+"</p>\n	</div>\n</div>\n"},useData:!0})}),define("lib-build/hbars!my/content/BuilderPage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u='<div id="builder-story" data-index="0" data-id='+o(s((i=e!=null?e.results:e)!=null?i.id:i,e))+' data-story-type="'+o(s((i=e!=null?e.results:e)!=null?i.type:i,e))+'" data-owner="'+o(s((i=e!=null?e.results:e)!=null?i.owner:i,e))+'" class="item row">\n	<div class="item-side-buttons column-6 expandable">\n		<div class="notification-container"></div>\n		<div class="status-pane-container"></div>\n	</div>\n	<div class="item-text column-18 container">\n';return i=this.invokePartial(n.content,"		","content",e,{isPortal:e!=null?e.isPortal:e,isBuilder:!0,labels:e!=null?e.labels:e},t,n,r),i!=null&&(u+=i),u+"	</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("my/content/StoriesList",["Handlebars","lib-build/hbars!./StoryMap","my/content/Templater","my/helpers/TooltipHelper","my/models/Credentials","lib-build/hbars!./ShareButtons","lib-build/hbars!./Content","lib-build/hbars!./BuilderPage","lib-build/hbars!./scanning/CheckingStatusPane"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=function(f,l,c){var h=null,p=null,d=i.getCredentials(),v=null;$("#list-container").css("height","auto"),l&&$("#item-list").empty();if(f.length===0){c?n.templatizeError({noSearchResults:!0,isEnglish:app.cfg.isEnglish}):l&&(n.templatizeError({noStories:!0}),h=$("#create-story-no-stories-btn"),h.on("click",function(e){$(e.currentTarget).hasClass("create-story-disabled")&&(e.preventDefault(),$("#modal-container-create-story").click())}),window.onCreateStoryDialogLoaded(null,h));return}$("#error-container").css("display","none"),e.registerPartial("shareButtons",s),e.registerPartial("content",o),e.registerPartial("checkingPane",a),v={results:window.builderIntegration?f[0]:f,labels:i18n.storyMap,sharingLevel:i18n.sharingLevel,privileges:d.privileges,isPortal:app.cfg.isSignedInPortal,contentLabels:i18n.content};if(window.builderIntegration){p=$("#builder-container");var m=u(v,{helpers:e.helpers});p.html(m)}else p=$("#item-list"),p.append(t(v,{helpers:e.helpers}));r.addTooltipEvents(p)};return{storiesListToScreen:f}}),define("my/content/scanning/ScanAll",["dojo/Deferred","dojo/promise/all","my/content/scanning/Scanner","my/content/scanning/StoryUpdate","my/content/Templater","my/content/StoriesList","my/helpers/UIHelper"],function(e,t,n,r,i,s,o){"use strict";var u=1500,a=function(n,r,i){var s=new e,a=[],l=n.length,h=6,p={},d={},v={},m={numWithIssues:0,aborted:!1};o.onScanStart(l),$("#scanning-stop").on("click",function(){c(m,a,r,s,l)});for(var g=0;g<n.length;g++)v=new e,d[n[g].id]=v,p[n[g].id]=v.promise;for(var y=0;y<h;y++)n.length&&(f(n[0],n,a,d,r,m,l),n.splice(0,1));return t(p).then(function(){var e=l!==i;o.onScanComplete(m.numWithIssues,e),setTimeout(function(){o.exitScanMode(a.length),s.resolve(a)},u)}),s.promise},f=function(e,t,r,i,s,o,u){var a={storyMap:e,useExistingMedia:!1},f=n.scan(a);f.then(function(e){l(e,t,r,i,s,o,u)},function(e){l(e,t,r,i,s,o,u)})},l=function(e,t,n,r,i,s,u){s.aborted||(e.hasErrors&&s.numWithIssues++,n.push(e.storyMap),o.updateNumScanned(n.length,u),r[e.storyMap.id].resolve(),i(),t.length&&(f(t[0],t,n,r,i,s,u),t.splice(0,1)))},c=function(e,t,n,r,i){e.aborted=!0,o.onScanStopped(t.length,i,e.numWithIssues),setTimeout(function(){h(r,t,i)},u)},h=function(e,t,n){e.reject(t),o.exitScanMode(n)};return{scanAllStories:a}}),define("my/helpers/SocialShare",["my/helpers/ImageHelper","esri/urlUtils"],function(e,t){"use strict";var n=function(e){var t=r(e.url),n="https://www.facebook.com/sharer/sharer.php?u="+t,i="toolbar=0,status=0,width=626,height=436";window.open(n,"",i)},r=function(e){var n=t.urlToObject(e),r=n.path;return n.query&&(delete n.query.edit,delete n.query.locale,delete n.query.folderId,delete n.query.webmap,delete n.query.autoplay,$.each(Object.keys(n.query),function(e,t){e===0?r+="?":r+="&",n.query[t]!==undefined&&n.query[t]!==""?r+=t+"="+n.query[t]:r+=t})),r.match(/apps\/[a-zA-Z]+\/\?appid=/)&&(r=r.replace("/?appid=","/index.html?appid=")),encodeURIComponent(r)},i=function(e,t){var n=r(t),i="text="+encodeURIComponent(e)+"&url="+n+"&related=EsriStoryMaps"+"&hashtags=StoryMaps";window.open("https://twitter.com/intent/tweet?"+i,"","toolbar=0,status=0,width=626,height=436")};return{shareFacebook:n,shareTwitter:i}}),define("my/content/scanning/StorySharing",["dojo/promise/all","dojo/Deferred","my/content/tabs/MapsSharing","my/content/scanning/Scanner","my/content/scanning/StoryUI","my/content/Templater","my/helpers/UIHelper","my/helpers/AnimationHelper","my/content/ExpandedStory"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=function(e){var n=new t,i=e.targetAccess,s=e.premiumDeferred,f={},h=r.getStoryMedia(),p={},d={},v=[];return i==="private"?(d=l(h,i,!1),d.then(function(e){var t={storyMap:e,storyAndContent:!1};n.resolve(t)},function(){n.reject({isSharingError:!0})})):(p={storyMap:h.storyMap,useExistingMedia:!0,targetAccessLevel:i,updateUI:!1,premiumDeferred:s},f=r.scan(p),f.then(function(e){var t=a.getExpandedStory(),s=!1,f=r.checkForUnignoredIssues(e.issues),p=!1;t&&(s=t.ignoreAllIssues),e.hasErrors&&(s?f&&(p=!0):p=!0),p?(o.showIgnoreButton(e.id),u.pulsateNotification(e.id),n.reject({isSharingError:!0,needsUserInput:!0})):(v=e.issues.yoursSharedBelowLevel.items,v.length>0?c(n,e,i,h.id):(d=l(e,i,!1),d.then(function(e){var t={storyMap:e,storyAndContent:!1};n.resolve(t)},function(){n.reject({isSharingError:!0})})))},function(){n.reject({isSharingError:!1})})),n.promise},l=function(e,u,a){var f=new t,l=n.updateItemSharing(u,e.id,"storyMap",e),c={},h=null;return l.then(function(e){a?f.resolve(e.storyObj.storyMap):(i.updateStoryMapUI(e.storyObj.storyMap.accessLevel,e.itemId),c={storyMap:e.storyObj.storyMap,useExistingMedia:!0,isFinalScan:!0},h=r.scan(c),h.then(function(){f.resolve(e.storyObj.storyMap)},function(){f.resolve(e.storyObj.storyMap)}))},function(){c={storyMap:e.storyMap,useExistingMedia:!0,isFinalScan:!0},h=r.scan(c),h.then(function(){s.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevel,e.id),o.showErrorNotification(e.id),f.reject()},function(){s.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevel,e.id),o.showErrorNotification(e.id),f.reject()})}),f.promise},c=function(t,n,s,u){var a={},f={},c=[],h=null;a=r.changeBulkItemSharing(s,n,!0),c.push(a),f=l(n,s,!0),c.push(f),e(c).then(function(e){var n=e[0].changedMapLayers,s=r.checkSharedItemsType(n),u=e[0].expandedMaps,a=e[1],f={storyMap:a,useExistingMedia:!0,isFinalScan:!0},l={storyMap:a,storyAndContent:!0,changedItemsType:s};h=r.scan(f),h.then(function(){o.emptyExpandedMaps(a.id);for(var e=0;e<u.length;e++)o.toggleLayers(u[e],a.id,!1);o.updateSharedRows(n,!0),i.updateStoryMapUI(a.accessLevel,a.id),o.reEnableButtons(a.id),t.resolve(l)},function(){o.emptyExpandedMaps(a.id);for(var e=0;e<u.length;e++)o.toggleLayers(u[e],a.id,!1);o.updateSharedRows(n,!0),i.updateStoryMapUI(a.accessLevel,a.id),o.reEnableButtons(a.id),t.resolve(l)})},function(){o.reEnableButtons(u),t.reject({isSharingError:!0})})};return{share:f}}),define("my/helpers/InlineEditing",["my/models/Item","my/helpers/UIHelper","my/helpers/Formatter","my/content/Templater","my/helpers/AnimationHelper","my/helpers/Sanitizer"],function(e,t,n,r,i,s){"use strict";var o="",u="",a=function(e){f(e),l(e)},f=function(e){var t=$('.item[data-id="'+e.id+'"] .item-title'),n=250;t.attr("contentEditable",!0),t.off("keydown").on("keydown",function(e){e.keyCode===13&&(e.preventDefault(),t.blur()),c(t,e,n)}),p(t,n),t.off("focusin").on("focusin",function(){o=$(this).html()}),t.off("focusout").on("focusout",function(n){var r=t.text(),u={title:r};t.html("&nbsp;"),setTimeout(function(){t.text(u.title)},1),u.title!==""&&o!==u.title&&(u.title=s.sanitizeHtmlInput(u.title),t.text(u.title),d(n,t,e,u),t.removeClass("editing"),t.addClass("saved-successfully"),i.animateHideSuccessBorder(t,function(){t.addClass("editing")})),o=u.title})},l=function(e){var t='.item[data-id="'+e.id+'"]',n=$(t+" .item-summary"),r=250;n.attr("contentEditable",!0),n.off("keydown").on("keydown",function(e){e.keyCode===13&&(e.preventDefault(),n.blur()),c(n,e,r)}),p(n,r),n.off("focusin").on("focusin",function(){var e="";$(this).html()===i18n.storyMap.placeholders.noSummary&&$(this).html(""),e=$(this).html().replace(/<.*?>/g,""),$(this).html(e),u=$(this).html()}),n.off("focusout").on("focusout",function(t){var r={snippet:n.text()};r.snippet===""&&n.html(i18n.storyMap.placeholders.noSummary),n.removeClass("limit-reached"),r.snippet!==u&&(r.snippet=s.sanitizeHtmlInput(r.snippet),n.text(r.snippet),d(t,n,e,r),n.removeClass("editing"),n.addClass("saved-successfully"),i.animateHideSuccessBorder(n,function(){n.addClass("editing")})),u=r.snippet})},c=function(e,t,n){var r=e.text().length>=n,i=h(t.keyCode);r&&i?(e.addClass("limit-reached"),t.preventDefault()):e.removeClass("limit-reached")},h=function(e){var t=!1;if(e===32||e>=46&&e<=90||e>=96&&e<=111||e>=186&&e<=222)t=!0;return t},p=function(e,t){e.off("paste").on("paste",function(){var r=e.css("height");e.css("max-height",r),e.css("opacity",0),setTimeout(function(){var r=n.cleanHtmlText(e.html());r.length>t&&(r=r.slice(0,t)),e.html(r),e.css("opacity",1)},100)})},d=function(t,n,r,s){var o="",u="";s.title?u=i18n.content.errors.errorUpdatingTitle:s.snippet&&(u=i18n.content.errors.errorUpdatingSummary),n[0]===t.target&&(o=e.updateItem(r,s),o.then(function(){},function(){var e=null;s.title?e=$('.item[data-id="'+r.id+'"] .item-title-error-message'):s.snippet&&(e=$('.item[data-id="'+r.id+'"] .item-snippet-error-message')),n.removeClass("saved-successfully"),n.addClass("error"),e.css("display","block"),i.animateHideErrorBorder(n,e)}))};return{addInlineEditingEvents:a}}),define("my/content/DummyStories",["my/helpers/Formatter","my/content/StoriesList"],function(e,t){"use strict";var n=function(){var t=[{thumbnail:"assets/images/my-stories/placeholders/realOne.png",accessLevel:"organization",title:"Resilient Cities",type:"Map Journal",modifiedStr:e.formatModifiedString(new Date(1423008e6)),numViewsStr:e.formatNumViews(6430),hasErrors:!1},{thumbnail:"assets/images/my-stories/placeholders/mts.png",accessLevel:"public",title:"Explore a Tapestry of World Ecosystems",type:"Map Series",modifiedStr:e.formatModifiedString(new Date(14284512e5)),numViewsStr:e.formatNumViews(20870),hasErrors:!1},{thumbnail:"assets/images/my-stories/placeholders/realTwo.png",accessLevel:"private",title:"A Breakthrough in Global Satellite Coverage",type:"Map Journal",modifiedStr:e.formatModifiedString(new Date(14259456e5)),numViewsStr:e.formatNumViews(34),hasErrors:!1},{thumbnail:"assets/images/my-stories/placeholders/boat.png",accessLevel:"public",title:"Oceanic Expeditions",type:"Map Tour",modifiedStr:e.formatModifiedString(new Date(1431648e6)),numViewsStr:e.formatNumViews(567),hasErrors:!1},{thumbnail:"assets/images/my-stories/placeholders/forest.png",accessLevel:"public",title:"Modeling Forestry Change",type:"Map Series",modifiedStr:e.formatModifiedString(new Date(14345856e5)),numViewsStr:e.formatNumViews(2389),hasErrors:!1}];return t},r=function(){var e=n();t.storiesListToScreen(e,!1,!1)};return{renderDummyStories:r}}),define("my/helpers/CookieHelper",[],function(){"use strict";var e=function(e){var t=document.cookie,n=t.indexOf(" "+e+"=");n==-1&&(n=t.indexOf(e+"="));if(n==-1)t=null;else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);r==-1&&(r=t.length),t=decodeURIComponent(t.substring(n,r))}return t},t=function(){var t=e("esri_auth");return t?(t=JSON.parse(t.replace('"ssl":undefined','"ssl":""')),t||null):null},n=function(){var e=t();return e?e.accountId:""};return{fetchCookie:e,getAccountId:n,getUserCookie:t}}),define("my/content/GetStoriesManager",["my/models/Credentials"],function(e){"use strict";return function(t){var n=t.batchReturnedCallback,r=t.batchErrorCallback,i=t.allLoadedCallback,s=t.queryString,o=t.numInBatch,u=t.numInFirstBatch?t.numInFirstBatch:t.numInBatch,a=1,f=0,l=0,c=e.getCredentials(),h=t.queriedAfter,p=function(e){var t=e?u:o,i={q:s,num:t,start:a,sortField:"modified",sortOrder:"desc"};c.portal.queryItems(i).then(function(r){f===0&&(f=r.total),n({results:r,isFirstTime:e,wasQueriedAfter:h}),l+=t,a+=t,d()}).otherwise(function(e){r(e)})},d=function(){l<f?p(!1):i()};return{getStories:p}}}),define("my/content/NetworkManager",[],function(){"use strict";return function(e){var t=[],n=0,r=0,i=function(e){r=e},s=function(e){t.push(e),o()},o=function(){var e=null;n<r&&t.length&&(e=t.shift(),n++,u(e))},u=function(e){var t=e.request(e.params);t.then(function(t){e.deferred.resolve(t),n--,o()},function(){e.deferred.reject(),n--,o()})};return i(e),{addRequest:s}}}),define("my/helpers/FolderHelper",["dojo/Deferred","dojo/promise/all"],function(e,t){"use strict";var n=function(t){var n=new e,i=t.getPortalUser(),s=null,o=i.getFolders();return o.then(function(e){s=r(e,i),s.then(function(e){n.resolve(e)})},function(){n.resolve()}),n.promise},r=function(n,r){var i=new e,s={},o=[],u=null;for(var a=0;a<n.length;a++)u=r.getItems(n[a].id),o.push(u),u.then(function(e){var t=null;for(var n=0;n<e.length;n++)t=e[n],t.type==="Web Mapping Application"&&(s[t.id]=t.userItemUrl)},function(){});return t(o).then(function(){i.resolve(s)}),i.promise};return{compileFolderList:n}}),define("my/content/dialogs/FindMoreDialog",["dojo/Deferred","dojo/promise/all","dojo/parser","dijit/registry","my/helpers/TooltipHelper","my/content/GetStoriesManager","my/models/Credentials","my/content/NetworkManager","my/models/Item","my/helpers/FolderHelper","my/content/Templater"],function(e,t,n,r,i,s,o,u,a,f,l){"use strict";return function(c,h){var p=100,d=2e3,v=[],m=null,g=new u(app.cfg.CONCURRENT_SCAN_REQUESTS),y=null,b=null,w=null,E=function(){y.footerButtons.addClass("inactive")},S=function(){y.updateAllButton.removeClass("inactive")},x=function(){y.updateAllButton.addClass("inactive")},T=function(){y.closeButton.removeClass("inactive")},N=function(){y.modalContainer.removeClass("disabled-click")},C=function(){y.modalContainer.addClass("disabled-click")},k=function(){O(),l.templatizeLoading($("#find-loader-title"),b.gettingStories,!0),x(),T(),L(y.loaderPanel),M()},L=function(e){e===y.updateTablePanel&&(A(),S()),$(".dynamic-component").removeClass("active"),e.addClass("active")},A=function(){l.templatizeUpdateTable(v)},O=function(){y={modalContainer:$("#modal-container-find-stories"),footerButtons:$("#modal-container-find-stories .modal-bottom-button"),closeButton:$("#close-find"),updateAllButton:$("#update-all"),loaderPanel:$("#find-searching-stories"),allUpdatedPanel:$("#find-all-good"),updateTablePanel:$("#find-update-summary"),errorLoadingPanel:$("#find-error-searching"),updateProgressPanel:$("#find-update-progress"),updateCompletePanel:$("#find-update-complete"),updateErrorPanel:$("#find-error-updating")},b=i18n.cantFindStories},M=function(){y.updateAllButton.off("click").on("click",function(e){if($(e.currentTarget).hasClass("inactive")){e.preventDefault();return}L(y.updateProgressPanel),V()})},_=function(){var e="update-progress-bar",t="updateProgressBar",s=r.byId(e),o=b.updatingNumberOfNumber.replace(/{{CURRENT_NUMBER}}/,1).replace(/{{TOTAL}}/,v.length),u="stop-update",a=null,f=$("#find-update-progress-bar-container");C(),E(),a=l.templatizeProgressBar({progressBar:s,progressString:null,title:o,progressBarId:e,progressBarDojoId:t,stopId:u}),f.html(a),n.parse(),i.addTooltipEvents(f)},D=function(){N(),T(),L(y.updateErrorPanel)},P=function(e){var t=r.byId("update-progress-bar"),n=b.updatingNumberOfNumber.replace(/{{CURRENT_NUMBER}}/,e).replace(/{{TOTAL}}/,v.length);t&&(t.set({value:e/v.length*100}),$("#find-update-progress .progress-title").html(n))},H=function(){var e=r.byId("update-progress-bar");L(y.updateCompletePanel),e&&e.destroy(),setTimeout(function(){w(),B()},d)},B=function(){N(),$("#close-find").click()},j=function(e,t){k(),w=t,F()},F=function(){var e=o.getCredentials(),t=new s({queryString:"owner: "+e.userName+" AND type:Web Mapping Application",batchReturnedCallback:I,batchErrorCallback:z,allLoadedCallback:W,numInBatch:p,queriedAfter:!1});t.getStories(!0)},I=function(e){var t=null;for(var n=0;n<e.results.results.length;n++)t=e.results.results[n],q(t)},q=function(e){var t="",n=null,r=!1;r=R(e);if(r)return;t=U(e.url),t&&(n=a.createItem({item:e,type:t,index:0}),v.push(n))},R=function(e){var t="";for(var n=0;n<e.typeKeywords.length;n++){t=e.typeKeywords[n];switch(t.toLowerCase()){case"story maps":return!0;default:}}return!1},U=function(e){var t="",n=null,r="";return n=/^(.+)\/apps\/(MapTour|MapJournal|MapSeries|StoryMapCrowdsource|StorytellingSwipe)\//.exec(e),n&&n.length>0&&(r=n[2],r==="MapTour"?t="Map Tour":r==="MapJournal"?t="Map Journal":r==="MapSeries"?t="Map Series":r==="StoryMapCrowdsource"?t="Crowdsource":r==="StorytellingSwipe"?t="Swipe/Spyglass":t=""),t},z=function(){L(y.errorLoadingPanel)},W=function(){var e=o.getCredentials(),t=null;t=f.compileFolderList(e.portal),t.then(function(e){m=e,X(),v.length===0?L(y.allUpdatedPanel):L(y.updateTablePanel)})},X=function(){var e=null;for(var t=0;t<v.length;t++)e=v[t],e.userItemUrl=m[e.id]},V=function(){var n=null,r=null,i=[],s=[],o="",u=0;_();for(var a=0;a<v.length;a++)r=new e,n=v[a],s=J(n),o=s.toString(),g.addRequest({params:{storyMap:n,typeKeywords:o},deferred:r,request:G}),i.push(r.promise),r.promise.then(function(){u++,P(u)},function(){});t(i).then(function(){H()},function(){D()})},J=function(e){var t=[],n=[],r=[];return n=K(e.type),r=e.typeKeywords.concat(n),t=Q(r),t},K=function(e){var t=[],n=["Map Tour","MapTour"],r=["MapJournal"],i=["SwipeSpyglass"],s=["MapSeries"],o=["Crowdsource","StoryMapCrowdsource"],u=["JavaScript","Map","Mapping Site","Online Map","Ready To Use","selfConfigured","Web Map","Story Map","Story Maps"];switch(e){case"Map Tour":t=n;break;case"Map Journal":t=r;break;case"Map Series":t=s;break;case"Crowdsource":t=o;break;case"Swipe/Spyglass":t=i;break;default:}return t=t.concat(u),t},Q=function(e){var t="";return t=$.grep(e,function(t,n){return n===$.inArray(t,e)}),t},G=function(t){var n=new e,r=t.storyMap,i=t.typeKeywords,s=null;return s=a.updateItem(r,{typeKeywords:i}),s.then(function(){n.resolve()},function(){n.reject()}),n.promise};return j(c,h),{}}}),define("my/content/scanning/CacheManager",[],function(){"use strict";var e=null;return function(){var t=function(){e={maps:{},images:{},videos:{}}},n=function(t,n){var r=null;return e[t]&&e[t][n]&&(r=e[t][n]),r},r=function(t,n,r){e[t]&&(e[t][n]=r)};return t(),{getFromCache:n,updateCache:r}}}),define("my/content/ManagerManager",["my/content/NetworkManager","my/content/scanning/CacheManager"],function(e,t){"use strict";var n=function(){app.cfg.cacheManager=new t,app.cfg.scanNetworkManager=new e(app.cfg.CONCURRENT_SCAN_REQUESTS),app.cfg.proxyNetworkManager=new e(app.cfg.CONCURRENT_PROXY_REQUESTS)};return{initManagers:n}}),define("my/models/Privileges",[],function(){"use strict";return function(e){var t={canShareMineOrg:!1,canShareMinePublic:!1,canShareOthersOrg:!1,canShareOthersPublic:!1};return e&&(t={canShareMineOrg:!0,canShareMinePublic:!0,canShareOthersOrg:!1,canShareOthersPublic:!1}),t}}),define("my/helpers/PrivilegesHelper",["my/models/Privileges"],function(e){"use strict";var t=function(t){var i=null,s=!1;return t.user.orgId?(i=r(t.user.privileges),s=n(t.user),!t.canSharePublic&&!s&&(i.canShareMinePublic=!1,i.canShareOthersPublic=!1)):i=new e(!0),i},n=function(e){var t=!1;return e.role.toLowerCase()==="org_admin"&&!e.roleId&&(t=!0),t},r=function(t){var n=new e(!1),r=null;for(var i=0;i<t.length;i++)r=t[i],r==="portal:user:shareToPublic"?n.canShareMinePublic=!0:r==="portal:user:shareToOrg"?n.canShareMineOrg=!0:r==="portal:admin:shareToPublic"?(n.canShareMinePublic=!0,t.indexOf("portal:admin:viewItems")!==-1&&t.indexOf("portal:admin:updateItems")!==-1&&(n.canShareOthersPublic=!0)):r==="portal:admin:shareToOrg"&&(n.canShareMineOrg=!0,t.indexOf("portal:admin:viewItems")!==-1&&t.indexOf("portal:admin:updateItems")!==-1&&(n.canShareOthersOrg=!0));return n};return{determinePrivileges:t}}),define("lib-build/hbars!sign-in/templates/signInUnavailable",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'<div class="dialog-header padding-leader-1 padding-trailer-1">\r\n	<h4 class="dialog-title">'+o(s((i=e!=null?e.labels:e)!=null?i.title:i,e))+'</h4>\r\n</div>\r\n<div class="dialog-body leader-half">\r\n	<p>'+o(s((i=e!=null?e.labels:e)!=null?i.explanation:i,e))+'</p>\r\n	<a id="no-sign-in-redirect" href="/" class="btn modal-dismiss">'+o(s((i=e!=null?e.labels:e)!=null?i.returnButton:i,e))+'</a>\r\n	<button class="btn modal-dismiss close-dialog">'+o(s((i=e!=null?e.labels:e)!=null?i.close:i,e))+"</button>\r\n</div>"},useData:!0})}),define("sign-in/SignInDialog",["dojo/i18n!sign-in/nls/app.js?v="+app.cfg.version,"lib-build/hbars!./templates/signInUnavailable"],function(e,t){"use strict";var n=function(){var n=e,r=function(){i()},i=function(){$("#sign-in-unavailable-wrapper").html(t({labels:n.unavailableDialog}))};return r(),{}};return n}),define("lib-build/hbars!sign-in/templates/signInMessage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'<div id="ms-sign-in-inner">\r\n  <h1>'+o(s((i=e!=null?e.strings:e)!=null?i.title:i,e))+"</h1>\r\n  <ul>\r\n    <li><h4>"+o(s((i=e!=null?e.strings:e)!=null?i.reasonOne:i,e))+"</h4></li>\r\n    <li><h4>"+o(s((i=e!=null?e.strings:e)!=null?i.reasonTwo:i,e))+"</h4></li>\r\n    <li><h4>"+o(s((i=e!=null?e.strings:e)!=null?i.reasonThree:i,e))+'</h4></li>\r\n  </ul>\r\n  <button class="btn" id="ms-sign-in-button">'+o(s((i=e!=null?e.strings:e)!=null?i.signIn:i,e))+"</button>\r\n</div>\r\n"},useData:!0})}),define("sign-in/SignInMessage",["dojo/i18n!sign-in/nls/app.js?v="+app.cfg.version,"lib-build/hbars!./templates/signInMessage"],function(e,t){"use strict";var n=function(){var n=$("#ms-sign-in-message");n.html(t({strings:e.signInDialog}))};return{templatizeSignInMessage:n}}),define("sign-in/SignInManager",["dojo/Deferred","dojo/io-query","sign-in/SignInDialog","sign-in/SignInMessage","sign-in/PortalHelper","create-app/buildApp","create-app/UserAgentHelper"],function(e,t,n,r,i,s,o){"use strict";var u=null,a=null,f=null,l=$,c="",h="",p=function(){x(),window.signInManager=P},d=function(){var e=v("esri_auth");return e?(e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),e||null):null},v=function(e){var t=document.cookie,n=t.indexOf(" "+e+"=");n==-1&&(n=t.indexOf(e+"="));if(n==-1)t=null;else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);r==-1&&(r=t.length),t=unescape(t.substring(n,r))}return t},m=function(){var e=JSON.parse(v("esri_auth")),t=null,n=20736e5,r=Date.now()+n,i=0;return e&&e.expires?(t=e.expires,t>r?i=r:t<=Date.now()?i=r:i=t):i=r,i},g=function(){var e=d(),t=!1;return e&&(t=!0),t},y=function(e){var t={"www.arcgis.com":"","arcgis.com":"","devext.arcgis.com":"","qaext.arcgis.com":""};$("a[href]").click(function(n){var r=$(this);if(r[0].hostname in t){if(r.attr("linkType")&&r.attr("linkType")=="fix")return!1;r[0].hostname=e}})},b=function(e){var t="",n=i.forceHttpsPortalUrl(f);u?w(u.firstName||u.username):(t=n+"/sharing/rest/portals/self",$.ajax(t,{success:function(t,n,r){JSON.parse(r.responseText).error?w(e.email):(u=t.user,u.provider==="enterprise"||u.provider==="facebook"?w(u.fullName):w(u.firstName||u.username))},error:function(){w(e.email)},dataType:"json",data:{culture:e.culture||"en-us",f:"json",token:e.token}}))},w=function(e){$("#header-user-name").html(e),$("#logged-in-navigation").css("display","block"),$("#logged-out-navigation").css("display","none")},E=function(){$("#logged-out-navigation").css("display","block"),S()},S=function(){$("#login-link").css("pointer-events","auto"),$("#login-link").css("cursor","pointer"),$("#login-link").on("click",function(){A()})},x=function(){var e=null,t=g(),n=v("buildApp"),r="";t?(n&&(window.location.href.match(/buildApp/)?k(n):L("buildApp")),e=d(),f=i.getBaseUrl(e),b(e),y(f.replace(/.*?\/\//,"")),r=i.forceHttpsPortalUrl(f),$("#sign-out-link").attr("href",r+"/sharing/rest/oauth2/signout?redirect_uri="+window.location.href)):E()},T=function(){var e=window.location.href.indexOf("?"),n=window.location.href.indexOf("#"),r=window.location.href,i="";e!==-1&&n===-1?(r=window.location.href.substring(0,e),i=window.location.href.substring(e+1)):e===-1&n!==-1?r=window.location.href.substring(0,n):e!==-1&&n!==-1&&(r=window.location.href.substring(0,e),i=window.location.href.substring(e+1,n));var s=t.queryToObject(i);s.buildApp="true";var o="?"+t.objectToQuery(s),u=r+o+window.location.hash;return u},N=function(e){var t=window.dojoConfig.locale,n="",r=window.location.href;t||(t="en"),e&&(r=T());var s=i.getBaseUrl(null),o=i.forceHttpsPortalUrl(s);app.cfg.isOnWebsite&&(r=s+"/apps/MyStories/arcgis-storymaps-my-stories-utils/sign-in/signInRedirect.html?returnUrl="+encodeURIComponent(r));var u=app.cfg.isOnWebsite?"&locale="+t:"",a=o+"/home/signin.html?returnUrl="+encodeURIComponent(r)+u;return a},C=function(e,t){c=e,h=t;var n={app:c,layout:h};document.cookie="buildApp="+encodeURIComponent(JSON.stringify(n)),A(!0)},k=function(e){var t=JSON.parse(e),n=t.app,r=t.layout;s.showContinueBuildDialog(n,r),L("buildApp")},L=function(e){document.cookie=e+"=; expires="+new Date("1970")},A=function(e){var t=480;if(window.innerWidth<t)O(),e&&L("buildApp");else{var n=N(e);window.location.href=n}},O=function(){var e=new n;$("body").addClass("no-scroll"),o.isInternetExplorerOrEdge()&&$("html").addClass("no-scroll"),$("#sign-in-container").css("display","block"),$("#sign-in-container").off("click").on("click",function(e){e.target===e.currentTarget&&M(!0)}),$("#sign-in-container .close-dialog").show(),$("#sign-in-container #no-sign-in-redirect").hide(),$("#sign-in-container .close-dialog").off("click").on("click",function(){M(!0)}),$("#login-link").off("click"),$("#login-link").css("pointer-events","none"),$("#login-link").css("cursor","default")},M=function(e){var t=$("#sign-in-container"),n=e?500:1e3;o.isInternetExplorerOrEdge()?($("html").removeClass("no-scroll"),$("body").removeClass("no-scroll"),t.fadeOut(n)):t.fadeOut(n,function(){$("body").removeClass("no-scroll")}),S()},_=function(){var e=null,t="";f||(e=d(),f=i.getBaseUrl(e)),t=i.forceHttpsPortalUrl(f),window.location.href=t+"/sharing/rest/oauth2/signout?redirect_uri="+window.location.href},D=function(){r.templatizeSignInMessage()},P={checkIfSignedIn:g,renderHeader:x,getUserCookie:d,hideSignInDialog:M,showSignInDialog:A,fetchCookie:v,jquery:l,showBuildSignInDialog:C,showSignInMessage:D,getExpiryDate:m,signOutUser:_};p()}),define("my/content/BuilderIntegration",["dojo/Deferred","esri/arcgis/utils","esri/request","esri/IdentityManager","my/helpers/CookieHelper","my/models/Credentials","my/content/ManagerManager","my/helpers/UIHelper","my/content/ExpandedStory","my/content/scanning/Scanner","sign-in/PortalHelper","my/helpers/Formatter","my/helpers/PrivilegesHelper","my/content/BuilderStory","sign-in/SignInManager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){"use strict";var d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=function(t,n,r,i,s,o,u,a){app.cfg.isSignedInPortal=i;var f=null,l=new e;return k(s,o,u,a),f=S(l,t),l.promise.isRejected()||x(f).then(function(){T(n,r),l.resolve()},function(){l.reject()}),l.promise},S=function(e,n){var i=null;m(),d=null,v=null;if(!n){n=M();if(!n)return e.reject(),null}return i=O(n.credentials),i.expires=window.signInManager.getExpiryDate(),t.arcgisUrl=i.server+"/sharing/rest/content/items",r.initialize(n),i},x=function(t){var r=new e,o=i.fetchCookie("esri_auth"),u=JSON.parse(o),a=l.getBaseUrl(u),f=l.forceHttpsPortalUrl(a),c=f+"/sharing/rest/portals/self",p=new n({url:c,handleAs:"json",content:{culture:u&&u.culture||"en-us",f:"json"}});return p.then(function(e){var n={userName:t.userId,token:t.token,portal:e,privileges:h.determinePrivileges(e),orgId:i.getAccountId(),groups:[],firstName:"",accountCreatedDate:t.creationTime};s.setCredentials(n),r.resolve()},function(e){console.log(e),r.reject()}),r.promise},T=function(e,t){var n="",r=null,i="";e?(p.setIsSaved(!0),n=A(t),e.typeKeywords.push(n),i=c.forceProtocolRelativeURL(e.url),e.url=window.parent.location.protocol+i):(p.setIsSaved(!1),e=L(t)),o.initManagers(),r={isFirstTime:!0,results:{total:1,results:[e]},wasQueriedAfter:!1},g(r),d=w()[0]},N=function(t){var n=new e,r=null,i=null;return P(),u.collapseStory(d.id),u.resetContentDefaults(d.id),u.emptyMediaContainers(d.id),u.showBySharingLevel(d.id,d.accessLevel),u.expandStory(d.id),a.setExpandedStory(d),r={storyMap:d,useExistingMedia:!1,existingItemData:t},i=f.scan(r),i.then(function(e){var t=a.getExpandedStory(),r=!1;t&&(r=t.ignoreAllIssues),v=e,y(e),e.hasErrors?n.reject({completed:!0,ignoreAllIssues:r}):n.resolve({ignoreAllIssues:r}),D()},function(){var e=a.getExpandedStory(),t=!1;e&&(t=e.ignoreAllIssues),u.showContentErrorMessage(d.id),u.restrictMapLayerSharing(d.id,d.accessLevel),n.reject({completed:!1,ignoreAllIssues:t}),D()}),n.promise},C=function(t){var n=new e,r=new e,i=new e,s='.item[data-id="'+v.id+'"] .story-sharing',o=b({targetAccess:t,baseSelector:s,storyObj:v,premiumDeferred:r}),u={targetAccess:t,message:"",successful:!1,needsUserInput:!1,storyAndContent:!1,delayPromise:i.promise,allClear:!1};return r.promise.then(function(e){H(i,e,t,u)},function(e){B(i,e,u)}),o.then(function(e){H(n,e,t,u)},function(e){B(n,e,u)}),n.promise},k=function(e,t,n,r){window.sectionClickCallback=e,window.editMapCallback=t,window.checkSuccessCallback=function(){var e=a.getExpandedStory(),t=!1;e&&(t=e.ignoreAllIssues),n({ignoreAllIssues:t})},window.checkFailCallback=function(e){var t=a.getExpandedStory(),n=!1;t&&(n=t.ignoreAllIssues),r({completed:e,ignoreAllIssues:n})}},L=function(e){var t=null,n=A(e);return t={access:"private",id:"sdasdfasdf",typeKeywords:[n]},t},A=function(e){var t="";if(typeof e=="string")switch(e.toLowerCase()){case"mapseries":t="mapseries";break;case"mapjournal":t="mapjournal";break;case"shortlist":t="shortlist";break;default:}return t},O=function(e){if(!e)return null;if(!e.length||e.length<1)return null;for(var t=0;t<e.length;t++)if(e[t].scope&&e[t].scope.toLowerCase()==="portal")return e[t];return e[0]},M=function(){var e="",t=null,n="",r="",s=null;return e=i.fetchCookie("esri_auth"),t=JSON.parse(e),t&&(n=_(t),r=l.forceHttpsPortalUrl(n),s={serverInfos:[{server:r,tokenServiceUrl:r+"/sharing/rest/generateToken",hasPortal:!0}],oAuthInfos:[],credentials:[{userId:t.email,server:r,token:t.token,expires:t.expires,ssl:t.allSSL,creationTime:t.created,scope:"portal",resources:[r]}]}),s},_=function(e){var t=-1,n=-1,r="";return app.cfg.customPortalUrl?r=app.cfg.customPortalUrl:(t=window.parent.location.pathname.indexOf("/apps/"),t===-1&&(t=window.parent.location.pathname.indexOf("/home/")),t===-1?r=l.getBaseUrl(e):(n=window.parent.location.pathname.substr(0,t),r=window.parent.location.host+n),r.match(/\/\//)||(r="//"+r)),r.match(/^http/)||(r=window.parent.location.protocol+r),r},D=function(){$("#builder-loading").css("display","none"),$("#builder-container").css("display","block")},P=function(){$("#builder-loading").css("display","block"),$("#builder-container").css("display","none")},H=function(e,t,n,r){r.storyAndContent=t.storyAndContent,r.successful=!0,r.message=c.formatNotificationString(n,"story",t.storyAndContent,t.premiumContent,t.subscriptionContent,t.changedItemsType),r.allClear=!t.storyMap.hasErrors,e.resolve(r)},B=function(e,t,n){t.needsUserInput&&(n.needsUserInput=!0),n.message=t.message,n.allClear=!t.storyMap.hasErrors,e.reject(n)};return function(e,t,n,r,i){var s=function(){window.init=E,window.check=N,window.share=C,m=e,g=t,y=r,b=i,w=n,d=null,v=null};s()}}),define("lib-build/hbars!create-app/templates/createStory",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing,l='<div class="dialog-header">\r\n  <h3 class="dialog-title">'+u(o((i=(i=e!=null?e.strings:e)!=null?i.dialog:i)!=null?i.createNewStory:i,e))+'</h3>\r\n</div>\r\n<div class="dialog-body leader-1">\r\n  <div class="toggle-top">\r\n    <div class="button-group-toggle">\r\n      <div class="toggle toggle-button active" data-toggle="pick-app">'+u(o((i=(i=e!=null?e.strings:e)!=null?i.dialog:i)!=null?i.pickApp:i,e))+'</div><!--\r\n     --><div class="toggle toggle-button" data-toggle="ask-pros">'+u(o((i=(i=e!=null?e.strings:e)!=null?i.dialog:i)!=null?i.askPros:i,e))+'</div>\r\n    </div>\r\n  </div>\r\n  <div class="toggle-view selected" data-toggle="pick-app">\r\n    ';return i=(s=(s=t.pickAppWidget||(e!=null?e.pickAppWidget:e))!=null?s:f,typeof s===a?s.call(e,{name:"pickAppWidget",hash:{},data:r}):s),i!=null&&(l+=i),l+='\r\n  </div>\r\n  <div id="ask-pros" class="toggle-view" data-toggle="ask-pros">\r\n    ',i=(s=(s=t.askProsWidget||(e!=null?e.askProsWidget:e))!=null?s:f,typeof s===a?s.call(e,{name:"askProsWidget",hash:{},data:r}):s),i!=null&&(l+=i),l+'\r\n  </div>\r\n</div>\r\n<div class="modal-footer">\r\n  <div id="create-story-back" class="btn transparent">'+u(o((i=(i=e!=null?e.strings:e)!=null?i.dialog:i)!=null?i.back:i,e))+'</div>\r\n  <div id="close-create-story-btn" class="btn modal-dismiss">'+u(o((i=(i=e!=null?e.strings:e)!=null?i.dialog:i)!=null?i.close:i,e))+"</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!create-app/templates/finalApp",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'      <div class="create-app-image-container final trailer-half">\r\n        <a href='+o(s((i=e!=null?e.app:e)!=null?i.url:i,e))+' class="image-wrapper" target="_blank">\r\n          <img src="'+o(s((i=e!=null?e.app:e)!=null?i.thumbnail:i,e))+'">\r\n        </a>\r\n      </div>\r\n      <a href='+o(s((i=e!=null?e.app:e)!=null?i.url:i,e))+' class="btn clear clear-inverse" target="_blank">'+o(s((i=e!=null?e.finalApp:e)!=null?i.letsBuild:i,e))+"</a>\r\n"},3:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'      <div class="create-app-image-container final trailer-half">\r\n        <img src="'+o(s((i=e!=null?e.app:e)!=null?i.thumbnail:i,e))+'" data-template="'+o(s((i=e!=null?e.app:e)!=null?i.template:i,e))+'">\r\n      </div>\r\n      <a class="btn clear clear-inverse" data-template="'+o(s((i=e!=null?e.app:e)!=null?i.template:i,e))+'">'+o(s((i=e!=null?e.finalApp:e)!=null?i.letsBuild:i,e))+"</a>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f=this.lambda,l='<div class="app-item final">\r\n  <h3 class="ask-pros-title">'+a((s=(s=t.title||(e!=null?e.title:e))!=null?s:u,typeof s===o?s.call(e,{name:"title",hash:{},data:r}):s))+'</h3>\r\n  <div class="version">\r\n';return i=(t.ifEquals||e&&e.ifEquals||u).call(e,(i=e!=null?e.app:e)!=null?i.value:i,"basic",{name:"ifEquals",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(l+=i),l+'  </div>\r\n  <div class="app-reason">\r\n    <p>'+a(f((i=e!=null?e.app:e)!=null?i.reason:i,e))+'</p>\r\n  </div>\r\n  <div class="see-example">\r\n    <a href="'+a(f((i=e!=null?e.app:e)!=null?i.example:i,e))+'" target="_blank">'+a(f((i=e!=null?e.finalApp:e)!=null?i.seeExample:i,e))+"</a>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!create-app/templates/noCreateStory",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'<div class="dialog-header padding-leader-1 padding-trailer-1">\r\n	<h4 class="dialog-title">'+o(s((i=e!=null?e.labels:e)!=null?i.title:i,e))+'</h4>\r\n</div>	\r\n<div class="dialog-body leader-half">\r\n	<p>'+o(s((i=e!=null?e.labels:e)!=null?i.subtitle:i,e))+'</p>\r\n	<button class="btn modal-dismiss close-dialog">'+o(s((i=e!=null?e.labels:e)!=null?i.close:i,e))+"</button>\r\n</div>"},useData:!0})}),define("lib-build/hbars!create-app/templates/pickApp",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing;return'<li class="app-item">\r\n    <div class="create-app-image-container trailer-half" data-template="shortlist">\r\n      <div class="image-hover-text"><!--\r\n      --><span>'+u(o((i=(i=e!=null?e.strings:e)!=null?i.shortReasons:i)!=null?i.shortlist:i,e))+'</span>\r\n      </div>\r\n      <img src="'+u((s=(s=t.imageBase||(e!=null?e.imageBase:e))!=null?s:f,typeof s===a?s.call(e,{name:"imageBase",hash:{},data:r}):s))+'shortlist.jpg">\r\n    </div>\r\n    <a class="btn clear clear-inverse" data-template="shortlist">'+u(o((i=e!=null?e.appTypes:e)!=null?i.shortlist:i,e))+"</a>\r\n  </li>"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o=this.lambda,u=this.escapeExpression,a="function",f=t.helperMissing,l='<ul class="create-app-list">\r\n  <li class="app-item">\r\n    <div class="create-app-image-container trailer-half" data-template="tour">\r\n      <div class="image-hover-text"><!--\r\n      --><span>'+u(o((i=(i=e!=null?e.strings:e)!=null?i.shortReasons:i)!=null?i.mapTour:i,e))+'</span>\r\n      </div>\r\n      <img src="'+u((s=(s=t.imageBase||(e!=null?e.imageBase:e))!=null?s:f,typeof s===a?s.call(e,{name:"imageBase",hash:{},data:r}):s))+'map-tour.jpg">\r\n    </div>\r\n    <a class="btn clear clear-inverse" data-template="tour">'+u(o((i=e!=null?e.appTypes:e)!=null?i.mapTour:i,e))+'</a>\r\n  </li><!--\r\n --><li class="app-item">\r\n    <div class="create-app-image-container trailer-half" data-template="journal">\r\n      <div class="image-hover-text"><!--\r\n      --><span>'+u(o((i=(i=e!=null?e.strings:e)!=null?i.shortReasons:i)!=null?i.mapJournal:i,e))+'</span>\r\n      </div>\r\n      <img src="'+u((s=(s=t.imageBase||(e!=null?e.imageBase:e))!=null?s:f,typeof s===a?s.call(e,{name:"imageBase",hash:{},data:r}):s))+'map-journal.jpg">\r\n    </div>\r\n    <a class="btn clear clear-inverse" data-template="journal">'+u(o((i=e!=null?e.appTypes:e)!=null?i.mapJournal:i,e))+'</a>\r\n  </li><!--\r\n --><li class="app-item">\r\n    <div class="create-app-image-container trailer-half" data-template="cascade">\r\n      <div class="image-hover-text"><!--\r\n      --><span>'+u(o((i=(i=e!=null?e.strings:e)!=null?i.shortReasons:i)!=null?i.cascade:i,e))+'</span>\r\n      </div>\r\n      <img src="'+u((s=(s=t.imageBase||(e!=null?e.imageBase:e))!=null?s:f,typeof s===a?s.call(e,{name:"imageBase",hash:{},data:r}):s))+'cascade.jpg">\r\n    </div>\r\n    <a class="btn clear clear-inverse" data-template="cascade">'+u(o((i=e!=null?e.appTypes:e)!=null?i.cascade:i,e))+'</a>\r\n  </li><!--\r\n --><li class="app-item">\r\n    <div class="create-app-image-container trailer-half" data-template="series">\r\n      <div class="image-hover-text"><!--\r\n      --><span>'+u(o((i=(i=e!=null?e.strings:e)!=null?i.shortReasons:i)!=null?i.mapSeries:i,e))+'</span>\r\n      </div>\r\n      <img src="'+u((s=(s=t.imageBase||(e!=null?e.imageBase:e))!=null?s:f,typeof s===a?s.call(e,{name:"imageBase",hash:{},data:r}):s))+'tabbed-viewer.jpg">\r\n    </div>\r\n    <a class="btn clear clear-inverse" data-template="series">'+u(o((i=e!=null?e.appTypes:e)!=null?i.mapSeries:i,e))+"</a>\r\n  </li><!--\r\n -->";return i=t.unless.call(e,e!=null?e.isPortal:e,{name:"unless",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(l+=i),l+'<!--\r\n --><li class="app-item">\r\n    <div class="create-app-image-container trailer-half" data-template="swipeSpyglass">\r\n      <div class="image-hover-text"><!--\r\n      --><span>'+u(o((i=(i=e!=null?e.strings:e)!=null?i.shortReasons:i)!=null?i.swipeSpyglass:i,e))+'</span>\r\n      </div>\r\n      <img src="'+u((s=(s=t.imageBase||(e!=null?e.imageBase:e))!=null?s:f,typeof s===a?s.call(e,{name:"imageBase",hash:{},data:r}):s))+'swipe.jpg">\r\n    </div>\r\n    <a class="btn clear clear-inverse" data-template="swipeSpyglass">'+u(o((i=e!=null?e.appTypes:e)!=null?i.swipeSpyglass:i,e))+'</a>\r\n  </li><!--\r\n --><li class="app-item">\r\n    <a href="'+u((s=(s=t.basicUrl||(e!=null?e.basicUrl:e))!=null?s:f,typeof s===a?s.call(e,{name:"basicUrl",hash:{},data:r}):s))+'" class="create-app-image-container trailer-half" target="_blank">\r\n      <div class="image-hover-text"><!--\r\n      --><span>'+u(o((i=(i=e!=null?e.strings:e)!=null?i.shortReasons:i)!=null?i.basic:i,e))+'</span>\r\n      </div>\r\n      <img src="'+u((s=(s=t.imageBase||(e!=null?e.imageBase:e))!=null?s:f,typeof s===a?s.call(e,{name:"imageBase",hash:{},data:r}):s))+'basic.jpg">\r\n    </a>\r\n    <a href="'+u((s=(s=t.basicUrl||(e!=null?e.basicUrl:e))!=null?s:f,typeof s===a?s.call(e,{name:"basicUrl",hash:{},data:r}):s))+'" class="btn clear clear-inverse" target="_blank">'+u(o((i=e!=null?e.appTypes:e)!=null?i.basic:i,e))+"</a>\r\n  </li>\r\n</ul>\r\n"},useData:!0})}),define("lib-build/hbars!create-app/templates/question",["Handlebars"],function(e){return e.template({1:function(e,t,n,r){var i,s=t.helperMissing,o="";return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=e!=null?e.question:e)!=null?i.answerFormat:i,"detail",{name:"ifEquals",hash:{},fn:this.program(2,r),inverse:this.program(8,r),data:r}),i!=null&&(o+=i),o},2:function(e,t,n,r){var i,s='  <div class="leader-2 detail">\r\n';return i=t.each.call(e,(i=e!=null?e.question:e)!=null?i.answers:i,{name:"each",hash:{},fn:this.program(3,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s+"  </div>\r\n"},3:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='      <div class="answer-detail">\r\n        <div class="create-app-image-container answer trailer-half">\r\n          <img src="'+a((s=(s=t.detailThumbnail||(e!=null?e.detailThumbnail:e))!=null?s:u,typeof s===o?s.call(e,{name:"detailThumbnail",hash:{},data:r}):s))+'">\r\n        </div>\r\n        <div class="app-reason reason-answer">\r\n          <p>'+a((s=(s=t.detailTxt||(e!=null?e.detailTxt:e))!=null?s:u,typeof s===o?s.call(e,{name:"detailTxt",hash:{},data:r}):s))+'</p>\r\n        </div>\r\n        <div class="answer toggle toggle-button two-button solo" ';return i=t["if"].call(e,e!=null?e.question:e,{name:"if",hash:{},fn:this.program(4,r),inverse:this.program(6,r),data:r}),i!=null&&(f+=i),f+">"+a((s=(s=t.txt||(e!=null?e.txt:e))!=null?s:u,typeof s===o?s.call(e,{name:"txt",hash:{},data:r}):s))+"</div>\r\n      </div>\r\n"},4:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'data-question="'+o(s((i=e!=null?e.question:e)!=null?i.id:i,e))+'"'},6:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression;return'data-app="'+o(s((i=e!=null?e.app:e)!=null?i.value:i,e))+'"'},8:function(e,t,n,r){var i,s='    <div class="leader-2">\r\n      ';return i=t.each.call(e,(i=e!=null?e.question:e)!=null?i.answers:i,{name:"each",hash:{},fn:this.program(9,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s+"\r\n    </div>\r\n"},9:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='<div class="answer toggle toggle-button two-button" ';return i=t["if"].call(e,e!=null?e.question:e,{name:"if",hash:{},fn:this.program(4,r),inverse:this.program(6,r),data:r}),i!=null&&(f+=i),f+">"+a((s=(s=t.txt||(e!=null?e.txt:e))!=null?s:u,typeof s===o?s.call(e,{name:"txt",hash:{},data:r}):s))+"</div>"},11:function(e,t,n,r){var i,s=t.helperMissing,o="";return i=(t.ifEquals||e&&e.ifEquals||s).call(e,(i=(i=e!=null?e.question:e)!=null?i.answers:i)!=null?i.length:i,4,{name:"ifEquals",hash:{},fn:this.program(12,r),inverse:this.program(18,r),data:r}),i!=null&&(o+=i),o},12:function(e,t,n,r){var i,s='    <div class="square">\r\n    ';return i=t.each.call(e,(i=e!=null?e.question:e)!=null?i.answers:i,{name:"each",hash:{},fn:this.program(13,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s+"\r\n    </div>\r\n"},13:function(e,t,n,r){var i,s,o=t.helperMissing,u="function",a=this.escapeExpression,f='<div class="answer square-quarter';return i=(t.ifEquals||e&&e.ifEquals||o).call(e,r&&r.index,0,{name:"ifEquals",hash:{},fn:this.program(14,r),inverse:this.program(16,r),data:r}),i!=null&&(f+=i),f+='" ',i=t["if"].call(e,e!=null?e.question:e,{name:"if",hash:{},fn:this.program(4,r),inverse:this.program(6,r),data:r}),i!=null&&(f+=i),f+"><span>"+a((s=(s=t.txt||(e!=null?e.txt:e))!=null?s:o,typeof s===u?s.call(e,{name:"txt",hash:{},data:r}):s))+"<span></div>"},14:function(e,t,n,r){return" shaded"},16:function(e,t,n,r){var i,s=t.helperMissing;return i=(t.ifEquals||e&&e.ifEquals||s).call(e,r&&r.index,3,{name:"ifEquals",hash:{},fn:this.program(14,r),inverse:this.noop,data:r}),i!=null?i:""},18:function(e,t,n,r){var i,s='  <ul class="question-list">\r\n';return i=t.each.call(e,(i=e!=null?e.question:e)!=null?i.answers:i,{name:"each",hash:{},fn:this.program(19,r),inverse:this.noop,data:r}),i!=null&&(s+=i),s+"  </ul>\r\n"},19:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='      <li class="answer" ';return i=t["if"].call(e,e!=null?e.question:e,{name:"if",hash:{},fn:this.program(4,r),inverse:this.program(6,r),data:r}),i!=null&&(f+=i),f+">"+a((s=(s=t.txt||(e!=null?e.txt:e))!=null?s:u,typeof s===o?s.call(e,{name:"txt",hash:{},data:r}):s))+"</li>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=this.lambda,o=this.escapeExpression,u=t.helperMissing,a='<h3 class="ask-pros-title question">'+o(s((i=e!=null?e.question:e)!=null?i.txt:i,e))+"</h3>\r\n";return i=(t.ifEquals||e&&e.ifEquals||u).call(e,(i=(i=e!=null?e.question:e)!=null?i.answers:i)!=null?i.length:i,2,{name:"ifEquals",hash:{},fn:this.program(1,r),inverse:this.program(11,r),data:r}),i!=null&&(a+=i),a},useData:!0})}),define("create-app/CreateStory",["dojo/i18n!./nls/app.js?v="+app.cfg.version,"lib-build/hbars!./templates/createStory","lib-build/hbars!./templates/finalApp","lib-build/hbars!./templates/noCreateStory","lib-build/hbars!./templates/pickApp","lib-build/hbars!./templates/question","create-app/buildApp"],function(e,t,n,r,i,s,o){"use strict";var u=0,a=e,f=window.customBasicTemplateURL||app.cfg.defaultBasicTemplateURL,l="arcgis-storymaps-my-stories-utils/create-app/assets/images/",c="/"+l,h=app.cfg.isOnWebsite?c:l,p={mapTour:"Map Tour",mapJournal:"Map Journal",cascade:"Cascade",mapSeries:"Map Series",shortlist:"Shortlist",swipeSpyglass:"Swipe/Spyglass",basic:"Basic"},d={mapTour:{title:p.mapTour,value:"mapTour",template:"tour",thumbnail:h+"map-tour.jpg",reason:a.reasons.mapTour,example:"http://links.esri.com/storymaps/map_tour_example_3panel"},mapJournal:{title:p.mapJournal,value:"mapJournal",template:"journal",thumbnail:h+"map-journal.jpg",reason:a.reasons.mapJournal,example:"http://links.esri.com/storymaps/map_journal_example_side_panel"},cascade:{title:p.cascade,value:"cascade",template:"cascade",thumbnail:h+"cascade.jpg",reason:a.reasons.cascade,example:"http://links.esri.com/storymaps/story_map_cascade_overview_1"},mapSeries:{title:p.mapSeries,value:"mapSeries",template:"series",thumbnail:h+"tabbed-viewer.jpg",reason:a.reasons.mapSeries,example:"http://links.esri.com/storymaps/map_series_example_tabbed"},shortlist:{title:p.shortlist,value:"shortlist",template:"shortlist",thumbnail:h+"shortlist.jpg",reason:a.reasons.shortlist,example:"http://links.esri.com/storymaps/story_map_shortlist_overview_1"},swipeSpyglass:{title:p.swipeSpyglass,value:"swipeSpyglass",template:"swipeSpyglass",thumbnail:h+"swipe.jpg",reason:a.reasons.swipeSpyglass,example:"http://links.esri.com/storymaps/swipe_example"},basic:{title:p.basic,value:"basic",url:f,thumbnail:h+"basic.jpg",reason:a.reasons.basic,example:"http://links.esri.com/storymaps/basic_example"}},v=function(){return u++},m=function(e){var u=e,l={id:v(),txt:a.questionText.categories,answerFormat:"button",answers:[{id:v(),txt:a.answerText.yes,app:d.shortlist,question:null},{id:v(),txt:a.answerText.no,app:d.mapTour,question:null}]},c={id:v(),txt:a.questionText.narrative,answerFormat:"detail",answers:[{id:v(),detailThumbnail:h+"map-journal.jpg",detailTxt:a.answerText.detailJournal,txt:a.answerText.pickThis,app:d.mapJournal,question:null},{id:v(),detailThumbnail:h+"cascade.jpg",detailTxt:a.answerText.detailCascade,txt:a.answerText.pickThis,app:d.cascade,question:null}]},m={id:v(),txt:a.questionText.datasets,answerFormat:"button",answers:[{id:v(),txt:a.answerText.two,app:d.swipeSpyglass,question:null},{id:v(),txt:a.answerText.moreThanTwo,app:d.mapSeries,question:null}]},g={id:v(),txt:a.questionText.clickOrScroll,answerFormat:"button",answers:[{id:v(),txt:a.answerText.click,app:d.mapSeries,question:null},{id:v(),txt:a.answerText.scroll,app:d.mapJournal,question:null}]},y={id:v(),txt:a.questionText.clickOrScroll,answerFormat:"button",answers:[{id:v(),txt:a.answerText.click,app:d.mapSeries,question:null},{id:v(),txt:a.answerText.scroll,app:null,question:c}]},b={id:v(),txt:a.questionText.showPhotos,answerFormat:"button",answers:[{id:v(),txt:a.answerText.yes,app:u?d.mapTour:null,question:u?null:l},{id:v(),txt:a.answerText.no,app:null,question:g}]},w={id:v(),txt:a.questionText.bestDescribesStory,answerFormat:"button",answers:[{id:v(),txt:a.answerText.seriesOfPlaces,app:null,question:b},{id:v(),txt:a.answerText.mapsNarrative,app:null,question:y},{id:v(),txt:a.answerText.compareDatasets,app:null,question:m},{id:v(),txt:a.answerText.other,app:d.basic,question:null}]},E=null,S=null,x=null,T=[],N="9999",C=function(){P(),L(w.id,!1,!0),_(),o.init($("#create-story-modal"))},k=function(e,t){var n=null,r=null;if(!e)return null;if(e.id===t)return e;for(var i=0;i<e.answers.length;i++){n=e.answers[i],r=k(n.question,t);if(r)return r}},L=function(e,t,n){var r=k(w,e),i=I(r);t?(S.html(i),O()):(T.push(e),n?(S.html(i),O()):A(S,function(){S.html(i)},O))},A=function(e,t,n){e.animate({opacity:0},400,function(){t&&typeof t=="function"&&t(),e.animate({opacity:1},800),n&&typeof n=="function"&&n()})},O=function(){$(".answer").off("click").on("click",function(){var e=$(this),t=e.data("question"),n=e.data("app");x.css("display","inline-block"),n?M(n):L(t,!1,!1)})},M=function(e){var t=j(d[e]);T.push(N),A(S,function(){S.html(t),o.init($(".app-item.final"))})},_=function(){E.off("click").on("click",function(e){var t=$(e.target);D(t)}),$(".create-app-image-container").hover(function(){$(this).children(".image-hover-text").addClass("hovered")},function(){$(this).children(".image-hover-text").removeClass("hovered")}),x.off("click").on("click",function(){T.pop(),T.length===1&&x.css("display","none"),L(T[T.length-1],!0,!1)})},D=function(e){var t=e.data("toggle"),n="selected",r="active";x.css("display","none"),t==="ask-pros"&&(T.length=0,L(w.id,!1,!0)),$(".toggle-view.selected").removeClass(n),$(E).removeClass(r),$('.toggle-view[data-toggle="'+t+'"]').addClass(n),e.addClass(r)},P=function(){q(),H(),B(),E=$(".toggle"),S=$("#ask-pros"),x=$("#create-story-back");var e=$('.toggle[data-toggle="pick-app"]');x.css("display","none"),D(e)},H=function(){$("#create-story-modal").html(t({strings:a,pickAppWidget:F(u),askProsWidget:I()}))},B=function(){$("#no-create-story-modal").html(r({labels:a.incompatibleNotice}))},j=function(e){var t=a.finalApp.weRecommend.replace(/{{STORY_TYPE}}/g,e.title),r=n({title:t,finalApp:a.finalApp,app:e});return r},F=function(e){var t=i({appTypes:p,strings:a,basicUrl:f,imageBase:h,isPortal:e});return t},I=function(e){var t=s({question:e});return t},q=function(){Handlebars.registerHelper("ifEquals",function(e,t,n){return e===t?n.fn(this):n.inverse(this)})};C()};return m}),define("my/helpers/GetStoriesHelper",[],function(){"use strict";var e=null,t=function(){return e},n=function(t){e=t},r=function(e,t){var n="",r="000000",i=r+e.toString(),s=r+t.toString();return n="["+i+" TO "+s+"]",n};return{getTimeLastQueried:t,setTimeLastQueried:n,formatDateRangeString:r}}),define("my/content/NewStoriesManager",[],function(){"use strict";var e=[],t=function(t){e=t.concat(e)},n=function(){return e.slice()};return function(){return e=[],{prependStories:t,getStories:n}}}),define("my/MyStories",["lib-app/tailcoat","lib-app/jquery-1.9.1.min","lib-app/jquery-ui.min","create-app/buildApp","dojo/on","dojo/has","dojo/Deferred","dojo/promise/all","esri/config","esri/arcgis/utils","esri/arcgis/Portal","esri/arcgis/OAuthInfo","esri/IdentityManager","esri/request","my/models/Credentials","my/models/Item","my/content/dialogs/ShareDialog","my/content/scanning/Scanner","my/content/scanning/ScanAll","my/content/Templater","my/helpers/Formatter","my/helpers/FilterSort","my/helpers/UIHelper","my/helpers/SocialShare","my/content/StoriesList","my/content/scanning/StorySharing","my/content/tabs/Tags","my/models/Issue","my/helpers/InlineEditing","my/helpers/AnimationHelper","my/content/DummyStories","my/content/dialogs/ImagePicker","my/helpers/CookieHelper","my/content/dialogs/FindMoreDialog","my/content/GetStoriesManager","my/helpers/FolderHelper","my/content/ExpandedStory","my/content/BuilderIntegration","my/content/ManagerManager","my/helpers/PrivilegesHelper","create-app/CreateStory","sign-in/SignInDialog","sign-in/PortalHelper","my/helpers/GetStoriesHelper","my/content/NewStoriesManager","sign-in/SignInManager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X){"use strict";var V=function(){var e="",t="";return app.cfg.isOnWebsite?t="/apps/proxy/sm-proxy.php":(e=z.getBaseUrl(null),t=e+"/sharing/proxy"),t},J=V();a.defaults.io.timeout=app.cfg.TIMEOUT_MILLISECONDS,a.defaults.io.proxyUrl=J,a.defaults.alwaysUseProxy=!1;var K=5,Q=100,G=10,Y=[],Z=[],et=0,tt="",nt=null,rt=!1,it=function(){Y=[],Z=[],j.setExpandedStory({}),et=0,tt="",nt=null,rt=!1},st=function(){var e=window.signInManager.checkIfSignedIn(),t=null;L.init(),window.builderIntegration||($("#find-more-container").hide(),s("ie")&&s("ie")<10&&$("#search").val(i18n.header.searchStories)),window.builderIntegration?($("#builder-loading .progress-title").html(i18n.content.general.loading),new F(it,vt,Jt,zt,$t),window.parent&&window.parent.myStoriesInit&&window.parent.myStoriesInit()):e?(t=window.signInManager.getUserCookie(),ut(t)):(window.signInManager.showSignInMessage(),$("body").addClass("not-signed-in"),$("#page-loader").hide(),$("#ms-sign-in-message").show(),$("#ms-sign-in-message #ms-sign-in-button").on("click",function(){window.signInManager.showSignInDialog()}))},ot=function(){var e=D.getUserCookie();f.arcgisUrl=z.getBaseUrl(e)+"/sharing/rest/content/items"},ut=function(e){ot(),at(e),$("#item-list").empty(),ct()},at=function(e){var t=window.signInManager.getExpiryDate(),n=w.forceHttpsProtocol(f.arcgisUrl.split("/rest/")[0]);h.registerToken({expires:t,server:n,ssl:e.allSSL,token:lt(),userId:e.email}),ft()},ft=function(){h.on("dialog-create",function(e){var t=D.fetchCookie("esri_auth"),n=JSON.parse(t);n&&n.expires<=Date.now()?window.signInManager.signOutUser():e.target._busy.reject()})},lt=function(){var e=window.signInManager.fetchCookie("esri_auth");if(!e)return;return e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),e?e.token:null},ct=function(){var e=w.forceHttpsProtocol(f.arcgisUrl.split("/sharing/")[0]),t=new l.Portal(e);t.on("load",function(){ht(t)})},ht=function(e){e.signIn().then(function(e){var t=null,n=q.determinePrivileges(e.portal);app.cfg.isSignedInPortal=e.portal.isPortal,t={userName:e.username,orgId:e.orgId,token:e.credential.token,portal:e.portal,privileges:n,firstName:e.firstName,accountCreatedDate:e.created},d.setCredentials(t),it(),pt(e)}).otherwise(function(e){console.log("error",e)})},pt=function(e){var t=d.getCredentials(),n="owner: "+t.userName+" AND typekeywords:Story Maps AND type:Web Mapping Application",r=new H({queryString:n,batchReturnedCallback:vt,batchErrorCallback:mt,allLoadedCallback:bt,numInBatch:Q,numInFirstBatch:K}),i=t.firstName;if(e.provider==="enterprise"||e.provider==="facebook")i=e.fullName;I.initManagers(),window.builderIntegration||(nt=new X),Lt(i),s("ie")&&s("ie")<G?($(".header-fadeable-tooltip").addClass("no-show"),$("#page-loader").css("display","none"),b.templatizeError({incompatibleBrowser:!0,version:G})):(window.initCropit(window.jQuery),k.createCollectionList(i18n.collectionList),E.initBloodhound(Y.slice()),dt(t.portal,!1),W.setTimeLastQueried(Date.now()),r.getStories(!0))},dt=function(e,t){var n=B.compileFolderList(e);t&&(app.cfg.folderWebApps=null),n.then(function(e){app.cfg.folderWebApps=e})},vt=function(e){var t=gt(e.results.results),n=!1;e.wasQueriedAfter?(Y=t.concat(Y),Ct(),S.hideNumStoriesWithIssues(),jt(),wt()):(Y=Y.concat(t),e.isFirstTime&&(n=!0,S.updateNumStories(e.results.total)),yt(t,n,!1))},mt=function(e){b.templatizeError({inaccessible:!0}),console.log(e),$("#page-loader").css("display","block")},gt=function(e){var t=[],n={item:{},index:0};for(var r=0;r<e.length;r++){n.item=e[r],n.index=et++;var i=v.createItem(n);k.init(i),t.push(i)}return t},yt=function(e,t,n){N.storiesListToScreen(e,t,n),Ht()},bt=function(){$("#page-loader").css("display","none"),b.templatizeWhereAreStories(),b.templatizeFindMoreStoriesDialog(),$("#find-more-container").show(),wt();var e=$("#find-more-button");e.off("click").on("click",function(){var e=d.getCredentials();new P(e.accountCreatedDate,Kt)}),$(".header-fadeable").removeClass("header-disabled"),$(".header-fadeable-tooltip").addClass("no-show"),$("#scan-all-stories").off("click").on("click",kt)},wt=function(){var e={sortType:"modified",reversed:!1};E.reseedSuggestions(Y.slice()),Z=Y.slice(),Z=E.sort(Z,e,!1),T.modal()},Et=function(){var e=Date.now(),t=100;$(window).focus(function(){var n=window.signInManager.checkIfSignedIn(),r=D.getUserCookie(),i=d.getCredentials(),s=r&&r.email!==i.userName;if(!n||s){window.location.href=window.location.href;return}var o=Date.now(),u=o-e;u>t&&n&&St(),e=o})},St=function(){var e=d.getCredentials(),t=W.getTimeLastQueried(),n=W.formatDateRangeString(t,Date.now()),r="owner: "+e.userName+" AND typekeywords:Story Maps AND type:Web Mapping Application AND uploaded: "+n,i=new H({queryString:r,batchReturnedCallback:xt,batchErrorCallback:function(){},allLoadedCallback:function(){},numInBatch:Q,numInFirstBatch:K,queriedAfter:!0});W.setTimeLastQueried(Date.now()),i.getStories(!1)},xt=function(e){e.results.total>0&&(nt.prependStories(e.results.results),Y.length?(b.templatizeNewStoriesFound(rt),S.showNewStoriesFoundRow(),$("#error-container").css("display","none"),$("#show-new-stories").off("click").on("click",function(){$(this).hasClass("disabled")||Tt(e)})):Tt(e))},Tt=function(e){var t=nt.getStories(),n=d.getCredentials().portal;dt(n,!0),e.results.results=t,e.results.total=t.length,Nt(e),nt=new X},Nt=function(e){var t=800,n={opacity:0,queue:!1};$("#header-controls").animate(n,t),$("#list-container").animate(n,t,function(){vt(e),S.hideNewStoriesFoundRow(),setTimeout(function(){$("#list-container, #header-controls").animate({opacity:1},t)},10)})},Ct=function(){S.updateNumStories(Y.length),_t(Y.slice()),E.reseedSuggestions(Y.slice())},kt=function(e){if($(e.currentTarget).hasClass("header-disabled")){e.preventDefault();return}var t=Z.slice(0),n=Z.slice(0),r=Y.length,i=y.scanAllStories(t,Ht,r);rt=!0,$('.dropdown-option[data-criteria="all-clear"]').css("display","block"),i.then(function(e){rt=!1,Ot(e,n,!1)},function(e){rt=!1,Ot(e,n,!0)})},Lt=function(e){var t=null;b.templatizeHeader(e,app.cfg.isSignedInPortal),t=$("#create-story-btn"),t.on("click",function(e){$(e.currentTarget).hasClass("create-story-disabled")&&(e.preventDefault(),$("#modal-container-create-story").click())}),$("#header-container").css("display","none"),$("#header-container").fadeIn(800),$("#page-loader .progress-title").html(i18n.loading.loadingText),At(t,null),Bt()},At=function(e,t){new R(app.cfg.isSignedInPortal),e&&e.length&&(e.removeClass("create-story-disabled"),$(".create-disabled-tooltip.create-story").addClass("no-show"),e.on("click",function(){new R(app.cfg.isSignedInPortal)})),t&&t.length&&(t.removeClass("create-story-disabled"),$(".create-disabled-tooltip").addClass("no-show"),t.on("click",function(){new R(app.cfg.isSignedInPortal)})),T.modal()},Ot=function(e,t,n){var r=[],i=!1,s={sortType:"all-clear",reversed:!1},o=E.getSearchTerm(),u=o?!0:!1,a=E.getFilterCriteria(),f=a.length?!0:!1,l=f||u;S.updateSortedBy("");if(n){for(var c=0;c<t.length;c++){i=!1;for(var h=0;h<e.length;h++)t[c].id===e[h].id&&(i=!0);i===!1&&r.push(t[c])}e=e.concat(r)}Z=e.slice(0),E.clearSortedBy(),Z=E.sort(Z,s,!1),S.updateSortedBy("all-clear"),N.storiesListToScreen(Z,!0,l),Ht()},Mt={hideItem:function(e){var t=j.getExpandedStory();e.stopPropagation(),qt(t.id)},deleteItem:function(){var e=j.getExpandedStory(),t=d.getCredentials(),n={item:e,user:t.userName,success:function(){Y.splice(e.index,1),Ct(),Z=Y.slice(),yt(Z,!0,!1)},error:function(t){t?(b.templatizeErrorNotification(i18n.storyMap.cantBeDeleted,e.id),S.showErrorNotification(e.id)):(b.templatizeErrorNotification(i18n.storyMap.errors.cantDeleteStory,e.id),S.showErrorNotification(e.id))}};v.deleteItem(n)}},_t=function(e){var t={},n=-1;for(var r=0;r<e.length;r++)t=e[r],n=r,v.updateItemIndex(t,n)},Dt=function(){$(".item").off("click").on("click",function(){window.builderIntegration||Rt($(this))})},Pt=function(){$(".item").off("click")},Ht=function(){Dt(),$(".item").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")}),$(".item-close").off("click").on("click",Mt.hideItem),$(".facebook-share").off("click").on("click",function(){var e=j.getExpandedStory();if($(this).hasClass("disabled")||$(this).hasClass("temp-disabled"))return;x.shareFacebook(e)}),$(".twitter-share").off("click").on("click",function(){var e=j.getExpandedStory();if($(this).hasClass("disabled")||$(this).hasClass("temp-disabled"))return;x.shareTwitter(e.title,e.url)})},Bt=function(){window.builderIntegration||Et(),$("#search").off("keydown").on("keydown",function(e){if($(e.currentTarget).hasClass("header-disabled")){e.preventDefault();return}}),$("#search").off("keyup").on("keyup",function(e){if($(e.currentTarget).hasClass("header-disabled")){e.preventDefault();return}var t=$(this).val(),n=!0,r=E.getSearchTerm();E.filterResults(t,Y.slice(),function(e,i,s){Z=e.items,s?n=!1:!r&&t&&S.showClearButton(),S.updateSearchResultCount(Z.length),yt(Z,i,n),e.clearList&&S.hideClearButton()})}),$("#sort-button").off("click").on("click",function(e){if($(e.currentTarget).hasClass("header-disabled")){e.preventDefault();return}return $("#sort-dropdown").css("display","inline-block"),Pt(),$("#filter-dropdown").hide(),$("body > *").not("#sort-dropdown").off("click").on("click",function(){return $("#sort-dropdown").hide(),$("body > *").not("#sort-dropdown").off("click"),Dt(),!1}),!1}),$("#sort-dropdown .dropdown-option").off("click").on("click",function(){var e={sortType:$(this).data("criteria"),reversed:!1};return Z=E.sort(Z,e,!0),yt(Z,!0,!1),S.updateSearchResultCount(Z.length),S.updateSortedBy(e.sortType),$("#sort-dropdown").hide(),!1}),$("#filter-button").off("click").on("click",function(e){if($(e.currentTarget).hasClass("header-disabled")){e.preventDefault();return}return $("#filter-dropdown").css("display","inline-block"),Pt(),$("#sort-dropdown").hide(),$("body > *").not("#filter-dropdown").off("click").on("click",function(){return $("#filter-dropdown").hide(),$("body > *").not("#filter-dropdown").off("click"),Dt(),!1}),!1}),$("#filter-dropdown .dropdown-option").off("click").on("click",function(){var e=$(this).data("category"),t=$(this).data("value"),n={category:e,value:t},r=E.checkIsInFilterCriteria(n),i=null,s=null,o=E.getSortedBy(),u=Y.slice();return S.updateFilteredBy(n),r?s=E.removeFilter(n,u):(i=E.getCriteriaByCategory(e),i&&(S.updateFilteredBy(i),s=E.removeFilter(i,u),Z=s.items),s=E.addFilter(n,Z)),Z=E.sort(s.items,o,!1),s.clearList&&S.hideClearButton(),S.updateSearchResultCount(Z.length),yt(Z,!0,!0),Pt(),!1}),$("#clear-button").off("click").on("click",function(e){if($(e.currentTarget).hasClass("header-disabled")){e.preventDefault();return}jt()}),$("#my-stories-header").off("click").on("click",function(e){var t=j.getExpandedStory();!$(e.target).hasClass("btn")&&e.target!==$("#search")[0]&&e.target.parentElement!==$("#sort-button")[0]&&e.target.parentElement.parentElement!==$("#sort-button")[0]&&t&&t.id&&!window.builderIntegration&&qt(t.id)}),$("#list-container").off("click").on("click",function(e){var t=j.getExpandedStory();e.target===e.currentTarget&&t&&t.id&&!window.builderIntegration&&qt(t.id)})},jt=function(){Z=Y.slice(),yt(Z,!0,!1),Ft()},Ft=function(){E.clearSortedBy(),S.updateSortedBy(""),E.clearFilterCriteria(),S.updateFilteredBy(null),$("#search").val(""),E.clearSearch(),S.hideClearButton()},It=function(e){var t=null,n=-1,r={};if(!e.className)return null;$(e).hasClass("item")?t=e:t=$(e).parents(".item"),n=$(t).data("index");if(typeof n=="number"||typeof parseInt(n,10)=="number")r=Y[n];return r},qt=function(e){S.collapseStory(e),S.resetContentDefaults(e),_.destroy(),j.setExpandedStory({})},Rt=function(e){var t=$(".expanded"),n=It(e[0]),r=d.getCredentials(),i=r.portal.getPortalUser(),s=j.getExpandedStory();if(t.data("index")===e.data("index"))return;qt(s.id),n&&(app.cfg.folderWebApps?(n.userItemUrl=app.cfg.folderWebApps[n.id],Ut(n,r)):i.getItem(n.id).then(function(e){e.ownerFolder&&(n.userItemUrl=e.userItemUrl),Ut(n,r)},function(){Ut(n,r)}))},Ut=function(e,t){var n={},r={},i=$('.item[data-id="'+e.id+'"] .item-delete'),o=null,u=$('.item[data-id="'+e.id+'"] .share-dialog-button'),a=null,f=null,l=!1,c=-1;f=$('.item[data-id="'+e.id+'"]'),S.emptyMediaContainers(e.id),S.showBySharingLevel(e.id,e.accessLevel),b.templatizeCheckingStatusPane(e.id),S.expandStory(e.id),j.setExpandedStory(e),f.find(".item-edit").on("click",function(e){$(this).hasClass("temp-disabled")&&e.preventDefault()}),f.find(".item-view-live").on("click",function(e){$(this).hasClass("temp-disabled")&&e.preventDefault()}),Xt(),A.addInlineEditingEvents(e),b.templatizeTags(e,e.id),k.showCollectionTag(e.collectionTag),$(f).find(".content-loader").css("display","block"),b.templatizeDeleteDialog(),b.templatizeImagePicker(),typeof window.FileReader=="undefined"&&(l=!0,c=s("ie")),s("ie")&&s("ie")===10&&(l=!0,c=10),_.init(e,$("#image-previous"),$("#image-next"),$("#carousel-image-and-text"),$("#carousel-image"),$("#loading-prompt"),$("#empty-prompt"),$("#error-prompt"),$("#no-image-prompt"),function(){Wt(f)},l,c),$("#modal-image-picker").data("item-id",e.id),e.hasOwnImage||(f.find(".photo-text").addClass("placeholder"),f.find(".photo-text").html(i18n.storyMap.imagePicker.uploadImage)),f.find(".photo-bottom-overlay").css("display","block"),m.init(e),T.modal(),$("#delete-confirm").off("click").on("click",Mt.deleteItem),o=$(".delete-modal .modal-dismiss, #delete-confirm"),a=$("#close-share"),i.on("click",function(e){$(e.currentTarget).hasClass("temp-disabled")&&(e.preventDefault(),$("#delete-cancel").click())}),u.on("click",function(e){if($(e.currentTarget).hasClass("disabled")||$(e.currentTarget).hasClass("temp-disabled"))e.preventDefault(),a.click()}),f.find(".photo-bottom-overlay").hover(function(){f.find(".photo-text:not(.placeholder)").css("display","inline-block")},function(){f.find(".photo-text:not(.placeholder)").css("display","none")}),S.handleNoOrg(t),r={storyMap:e,useExistingMedia:!1},n=g.scan(r),n.then(function(e){zt(e)},function(){S.showContentErrorMessage(e.id),S.restrictMapLayerSharing(e.id,e.accessLevel),_.setImages(null)})},zt=function(e){var t=[],n=e.media.images,r=$("#modal-image-picker").data("item-id");Vt(e);for(var i=0;i<Y.length;i++)if(Y[i].id===e.id){Y[i]=e.storyMap;break}S.restrictMapLayerSharing(e.id,e.storyMap.accessLevel),n?t=_.convertToPickerImages(n.items):t=[],r===e.id&&_.setImages(t)},Wt=function(e){e.find(".photo-text").removeClass("placeholder"),e.find(".photo-text").html(i18n.storyMap.imagePicker.chooseImage)},Xt=function(){$(".expanded .item-photo").off("click").on("click",function(){var e=j.getExpandedStory();window.open(e.url)})},Vt=function(e){var t='.item[data-id="'+e.id+'"] .story-sharing',n=null;$(t).off("click").on("click",function(r){var i=$(r.target).data("sharing");if($(r.currentTarget).hasClass("locked")||$(r.currentTarget).hasClass("temp-disabled")){r.preventDefault();return}n=$t({targetAccess:i,baseSelector:t,storyObj:e}),n.then(function(){},function(){})})},$t=function(e){var t=new o,n=e.premiumDeferred,r=e.targetAccess,i=$(e.baseSelector+".active").data("sharing"),s=e.storyObj,u={},a=null,f=null,l=g.checkIfOnlyIssueSubscription(s);return r!==i?(S.disableFadeableButtons(s.id),r==="public"&&l?(a={storyMap:s.storyMap,useExistingMedia:!0,targetAccessLevel:r,updateUI:!1,premiumDeferred:n},f=g.scan(a),f.then(function(e){var n=j.getExpandedStory(),i=!1,o=g.checkForUnignoredIssues(e.issues),u=!1;n&&(i=n.ignoreAllIssues),e.hasErrors&&(i?o&&(u=!0):u=!0),u?(S.showIgnoreButton(e.id),O.pulsateNotification(e.id),S.reEnableButtons(s.id),S.restrictMapLayerSharing(s.id,s.storyMap.accessLevel),t.reject({message:i18n.content.errors.cantChangeSharingLevels,needsUserInput:!0,storyMap:e.storyMap})):g.addProxyBulkShare(t,s,r,!1,!1)},function(){b.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevels,s.id),S.showErrorNotification(s.id),S.reEnableButtons(s.id),S.restrictMapLayerSharing(s.id,s.storyMap.accessLevel),t.reject({message:i18n.content.errors.cantChangeSharingLevels,storyMap:s.storyMap})})):(u=C.share({targetAccess:r,premiumDeferred:n}),u.then(function(e){var n=e.storyMap,r=w.formatNotificationString(n.accessLevel,"story",e.storyAndContent,!1,!1,e.changedItemsType);b.templatizeSuccessNotification(n.id,r),S.showSuccessNotification(n.id,e.storyAndContent?!0:!1),S.reEnableButtons(s.id),S.showBySharingLevel(n.id,n.accessLevel),S.restrictMapLayerSharing(n.id,n.accessLevel),t.resolve(e)},function(e){e.isSharingError?(S.reEnableButtons(s.id),S.restrictMapLayerSharing(s.id,s.storyMap.accessLevel)):(b.templatizeErrorNotification(i18n.content.errors.cantChangeSharingLevels,s.id),S.showErrorNotification(s.id),S.reEnableButtons(s.id),S.restrictMapLayerSharing(s.id,s.storyMap.accessLevel)),t.reject({message:i18n.content.errors.cantChangeSharingLevels,needsUserInput:e.needsUserInput,storyMap:s.storyMap})}))):t.resolve(),t.promise},Jt=function(){return Y},Kt=function(){window.location.href=window.location.href};return window.onCreateStoryDialogLoaded=At,{init:st}}),define("my/helpers/EngStrings",[],function(){"use strict";var e={authorsStories:"{{USER_NAME}}'s stories",totalStoriesSingle:"{{NUM_STORIES}} story",totalStoriesPlural:"{{NUM_STORIES}} stories",numViewsSingle:"{{NUM_VIEWS}} view",numViewsPlural:"{{NUM_VIEWS}} views",numResultsSingle:"{{NUM_RESULTS}} result",numResultsPlural:"{{NUM_RESULTS}} results",storiesHaveIssuesSingle:"{{NUM_STORIES}} story has issues",storiesHaveIssuesPlural:"{{NUM_STORIES}} stories have issues",scanStopMessage:"{{NUM_SCANNED}} of {{TOTAL}} stories scanned, {{NUM_ISSUES}} with issues",noStoriesInSearch:"Bummer, we couldn't find any stories.",arcGISOnline:"ArcGIS Online",storyMapTour:"Story Map Tour",storyMapBasic:"Story Map Basic",mapTour:"Map Tour",journal:"Journal",mapJournal:"Map Journal",mapSeries:"Map Series",crowdsource:"Crowdsource",cascade:"Cascade",basic:"Basic",shortlist:"Shortlist",swipeSpyglass:"Swipe/Spyglass",swipe:"Swipe",spyglass:"Spyglass",facebook:"Facebook",twitter:"Twitter",googlePlus:"Google+",flickr:"Flickr",url:"Url",vimeo:"Vimeo",youTube:"YouTube",notApplicable:"n/a",toTranslate:{}};return e}),require(["my/MyStories","my/helpers/EngStrings"],function(){}),define("../../src/BuildConfig",function(){});