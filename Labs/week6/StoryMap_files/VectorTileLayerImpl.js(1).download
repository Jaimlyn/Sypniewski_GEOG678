// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n){function p(){}c={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var q=a(f,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(a,b,c,f,k){h.isObject(a)?(h.mixin(this,a),this.spatialReference&&(this.spatialReference=
n.createSpatialReference(this.spatialReference))):this.update(a,b,c,f,k);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new k((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},centerAt:function(a){var b=this.getCenter(),c=a.x-b.x;a=a.y-b.y;return new q(this.xmin+c,this.ymin+a,this.xmax+c,this.ymax+a,this.spatialReference)},update:function(a,b,c,f,k){this.xmin=a;
this.ymin=b;this.xmax=c;this.ymax=f;this.spatialReference=k;this.clearCache();return this},offset:function(a,b){return new q(this.xmin+a,this.ymin+b,this.xmax+a,this.ymax+b,this.spatialReference)},expand:function(a){var b=(1-a)/2;a=this.getWidth()*b;b*=this.getHeight();return new q(this.xmin+a,this.ymin+b,this.xmax-a,this.ymax-b,this.spatialReference)},intersects:function(a){if(!a)return!1;var b=a.type,c=this.spatialReference,f=a.spatialReference;c&&f&&!c.equals(f)&&c._canProject(f)&&(a=c.isWebMercator()?
l.geographicToWebMercator(a):l.webMercatorToGeographic(a,!0));switch(b){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var a=this._normalize(!1,!0);b.isArray(a)||(a=[a]);return a},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var a=this.spatialReference,
b=a&&a._getInfo(),c=[],f=0;if(b&&this._isOutOfBounds(b)){var k=this,f=k.xmin,d=k.ymin,l=k.ymax,h=b.valid[0],m=b.valid[1];k.getWidth()>2*m&&(k=k.getCenter(),k=new q(k.x-m,d,k.x+m,l,new g(a.toJson())));var f=k.xmin-f,n=this._normalizeX(k.xmin,b),b=this._normalizeX(k.xmax,b);n.frameId===b.frameId?c.push(new q(n.x,d,b.x,l,new g(a.toJson()))):c.push(new q(n.x,d,m,l,new g(a.toJson())),new q(h,d,b.x,l,new g(a.toJson())))}else c.push(this.getExtent());return{extents:c,marginLeft:f}},_intersectsMultipoint:function(a){var b=
a.points.length,c;for(c=0;c<b;c++)if(this.contains(a.getPoint(c)))return!0;return!1},_intersectsExtent:function(a){var b,c,f,k,d=!1;this.xmin<=a.xmin?(b=a.xmin,this.xmax<b?d=!0:f=Math.min(this.xmax,a.xmax)-b):(b=this.xmin,a.xmax<b?d=!0:f=Math.min(this.xmax,a.xmax)-b);this.ymin<=a.ymin?(c=a.ymin,this.ymax<c?d=!0:k=Math.min(this.ymax,a.ymax)-c):(c=this.ymin,a.ymax<c?d=!0:k=Math.min(this.ymax,a.ymax)-c);return d?null:new q(b,c,b+f,c+k,this.spatialReference)},_intersectsPolygon:function(a){var b=[this.xmin,
this.ymax],c=[this.xmax,this.ymax],f=[this.xmin,this.ymin],d=[this.xmax,this.ymin],g=[b,c,f,d],b=[[f,b],[b,c],[c,d],[d,f]],f=a.rings,d=f.length,l,h=new k(0,0,this.spatialReference);l=g.length;for(c=0;c<l;c++)if(h.update(g[c][0],g[c][1]),a.contains(h))return!0;h.setSpatialReference(a.spatialReference);for(var m,n,c=0;c<d;c++)if(g=f[c],l=g.length){m=g[0];h.update(m[0],m[1]);if(this.contains(h))return!0;for(a=1;a<l;a++){n=g[a];h.update(n[0],n[1]);if(this.contains(h)||this._intersectsLine([m,n],b))return!0;
m=n}}return!1},_intersectsPolyline:function(a){var b=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],c,f=a.paths,d=f.length,g,l,h,m,n=new k(0,0,a.spatialReference);for(a=0;a<d;a++)if(g=f[a],l=g.length){h=g[0];n.update(h[0],h[1]);if(this.contains(n))return!0;for(c=1;c<l;c++){m=g[c];n.update(m[0],m[1]);if(this.contains(n)||this._intersectsLine([h,m],b))return!0;h=
m}}return!1},_intersectsLine:function(a,b){var c=m._getLineIntersection2,f,k=b.length;for(f=0;f<k;f++)if(c(a,b[f]))return!0;return!1},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var c=this.spatialReference,f=a.spatialReference,b=a.x;a=a.y;c&&f&&!c.equals(f)&&c._canProject(f)&&(a=c.isWebMercator()?k.lngLatToXY(b,a):k.xyToLngLat(b,a,!0),b=a[0],a=a[1]);return b>=this.xmin&&b<=this.xmax&&a>=this.ymin&&a<=this.ymax}return"extent"===b?this._containsExtent(a):!1},_containsExtent:function(a){var b=
a.xmin,c=a.ymin,f=a.xmax,d=a.ymax,g=a.spatialReference;a=new k(b,c,g);b=new k(b,d,g);d=new k(f,d,g);c=new k(f,c,g);return this.contains(a)&&this.contains(b)&&this.contains(d)&&this.contains(c)?!0:!1},union:function(a){return new q(Math.min(this.xmin,a.xmin),Math.min(this.ymin,a.ymin),Math.max(this.xmax,a.xmax),Math.max(this.ymax,a.ymax),this.spatialReference)},getExtent:function(){var a=this.spatialReference;return new q(this.xmin,this.ymin,this.xmax,this.ymax,a&&new g(a.toJson()))},_shiftCM:function(a){var b=
this.getCacheValue("_shifted");if(!b){var b=new q(this.toJson()),c=b.spatialReference;if(a=a||c._getInfo()){var f=this._getCM(a);if(f){var k=c._isWebMercator()?l.webMercatorToGeographic(f):f;b.xmin-=f.x;b.xmax-=f.x;c._isWebMercator()||(k.x=this._normalizeX(k.x,a).x);b.setSpatialReference(new g(h.substitute({Central_Meridian:k.x},4326===c.wkid?a.altTemplate:a.wkTemplate)))}}this.setCacheValue("_shifted",b)}return b},_getCM:function(a){var b;this._isOutOfBounds(a)&&(b=this.getCenter());return b},_isOutOfBounds:function(a){var b=
a.valid[0];a=a.valid[1];var c=this.xmin,f=this.xmax;return!(c>=b&&c<=a&&f>=b&&f<=a)},_normalize:function(a,b,c){var f=new q(this.toJson()),k=f.spatialReference;if(k&&(c=c||k._getInfo())){var d=e.map(this._getParts(c),function(a){return a.extent});return 2<d.length?a?this._shiftCM(c):f.update(c.valid[0],f.ymin,c.valid[1],f.ymax,k):2===d.length?a?this._shiftCM(c):b?d:{rings:e.map(d,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:k}:
d[0]||f}return f},_getParts:function(a){var b=this.getCacheValue("_parts");if(!b){var b=[],c=this.xmin,f=this.xmax,k=this.ymin,d=this.ymax,g=this.spatialReference,l=this.getWidth(),h=c,m=f,n=0,e=0,p,t;a=a||g._getInfo();p=a.valid[0];t=a.valid[1];e=this._normalizeX(c,a);c=e.x;n=e.frameId;e=this._normalizeX(f,a);f=e.x;e=e.frameId;a=c===f&&0<l;if(l>2*t){l=new q(h<m?c:f,k,t,d,g);c=new q(p,k,h<m?f:c,d,g);t=new q(0,k,t,d,g);k=new q(p,k,0,d,g);g=[];p=[];l.contains(t)&&g.push(n);l.contains(k)&&p.push(n);c.contains(t)&&
g.push(e);c.contains(k)&&p.push(e);for(d=n+1;d<e;d++)g.push(d),p.push(d);b.push({extent:l,frameIds:[n]},{extent:c,frameIds:[e]},{extent:t,frameIds:g},{extent:k,frameIds:p})}else c>f||a?b.push({extent:new q(c,k,t,d,g),frameIds:[n]},{extent:new q(p,k,f,d,g),frameIds:[e]}):b.push({extent:new q(c,k,f,d,g),frameIds:[n]});this.setCacheValue("_parts",b)}return b},_normalizeX:function(a,b){var c=0,f=b.valid[0],k=b.valid[1];b=2*k;a>k?(c=Math.ceil(Math.abs(a-k)/b),a-=c*b):a<f&&(c=Math.ceil(Math.abs(a-f)/b),
a+=c*b,c=-c);return{x:a,frameId:c}},toJson:function(){var a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});p.prototype=q.prototype;q.simpleConstructor=p;q.defaultProps=c;b.setObject("geometry.Extent",q,d);d.geometry.defaultExtent=c;return q})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(a,e,b){a=function(){return this}();var c=a.location,d=c.pathname;b=c.protocol;
c={version:"3.26",_appBaseUrl:b+"//"+c.host+d.substring(0,d.lastIndexOf(d.split("/")[d.split("/").length-1]))};e.noGlobals||(a.esri=c);(c.dijit=c.dijit||{})._arcgisUrl=("http:"===b||"https:"===b?b:"http:")+"//www.arcgis.com/sharing/rest";return c})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(a,e,b,c,d,h,g,f,k){function l(a,f,k){return[c.isString(a)?a.split(""):a,f||
b.global,c.isString(k)?new Function("item","index","array",k):k]}function m(a){return void 0!==a&&null!==a}function n(a){return m(a)?a:""}function p(b,k,l){var h=l.match(/([^\(]+)(\([^\)]+\))?/i),v=c.trim(h[1]);l=k[b];var h=e.fromJson((h[2]?c.trim(h[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),p=h.utcOffset;if(-1===a.indexOf(t,v))v=c.getObject(v),c.isFunction(v)&&(l=v(l,b,k,h));else if("number"===typeof l||"string"===typeof l&&l&&!isNaN(Number(l)))switch(l=Number(l),v){case "NumberFormat":return g.format(l,
h);case "DateString":b=new Date(l);if(h.local||h.systemLocale)return h.systemLocale?b.toLocaleDateString()+(h.hideTime?"":" "+b.toLocaleTimeString()):b.toDateString()+(h.hideTime?"":" "+b.toTimeString());b=b.toUTCString();h.hideTime&&(b=b.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return b;case "DateFormat":return b=new Date(l),m(p)&&(b=d.add(b,"minute",b.getTimezoneOffset()-p)),f.format(b,h)}return n(l)}function q(a,b){var c;if(b)for(c in a)a.hasOwnProperty(c)&&(void 0===a[c]?delete a[c]:a[c]instanceof
Object&&q(a[c],!0));else for(c in a)a.hasOwnProperty(c)&&void 0===a[c]&&delete a[c];return a}var t=["NumberFormat","DateString","DateFormat"],r=/<\/?[^>]+>/g;h={valueOf:function(a,b){for(var c in a)if(a[c]==b)return c;return null},stripTags:function(a){if(a){var b=typeof a;if("string"===b)a=a.replace(r,"");else if("object"===b)for(var c in a)(b=a[c])&&"string"===typeof b&&(b=b.replace(r,"")),a[c]=b}return a},substitute:function(b,f,k){var d,g,l;m(k)&&(c.isObject(k)?(d=k.first,g=k.dateFormat,l=k.numberFormat):
d=k);if(f&&"${*}"!==f)return c.replace(f,c.hitch({obj:b},function(b,c){b=c.split(":");return 1<b.length?(c=b[0],b.shift(),p(c,this.obj,b.join(":"))):g&&-1!==a.indexOf(g.properties||"",c)?p(c,this.obj,g.formatter||"DateString"):l&&-1!==a.indexOf(l.properties||"",c)?p(c,this.obj,l.formatter||"NumberFormat"):n(this.obj[c])}),/\$\{([^\}]+)\}/g);f=[];for(var h in b)if(k=b[h],g&&-1!==a.indexOf(g.properties||"",h)?k=p(h,b,g.formatter||"DateString"):l&&-1!==a.indexOf(l.properties||"",h)&&(k=p(h,b,l.formatter||
"NumberFormat")),f.push(h+" \x3d "+n(k)+"\x3cbr/\x3e"),d)break;return f.join("")},filter:function(a,b,c){b=l(a,c,b);c={};var f;a=b[0];for(f in a)b[2].call(b[f],a[f],f,a)&&(c[f]=a[f]);return c},startsWith:function(a,b,c){c=c||0;return a.indexOf(b,c)===c},endsWith:function(a,b,c){if("number"!==typeof c||!isFinite(c)||Math.floor(c)!==c||c>a.length)c=a.length;c-=b.length;a=a.indexOf(b,c);return-1!==a&&a===c},isDefined:m,fixJson:q,isObject:function(a){return a&&"object"===typeof a},isString:function(a){return"string"===
typeof a},mixin:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},clone2DArray:function(a){if(a=a?a.slice(0):null){var b,c=a.length;for(b=0;b<c;b++)a[b]=a[b]?a[b].slice(0):null}return a},clone3DArray:function(a){if(a=a?a.slice(0):null){var b,c=a.length;for(b=0;b<c;b++){a[b]=a[b]?a[b].slice(0):null;var f=a[b];if(f){var k,d=f.length;for(k=0;k<d;k++)f[k]=f[k]?f[k].slice(0):null}}}return a}};c.mixin(k,h);k._isDefined=m;k._getParts=l;k._sanitize=q;return h})},"esri/SpatialReference":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/has","./kernel","./lang"],function(a,e,b,c,d){function h(){}b=[-2.0037508342788905E7,2.0037508342788905E7];var g=[-2.0037508342787E7,2.0037508342787E7];a=a(null,{declaredClass:"esri.SpatialReference",constructor:function(a){a&&(d.isObject(a)?d.mixin(this,a):d.isString(a)?this.wkt=a:this.wkid=a)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:b,origin:g,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:b,origin:g,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:b,origin:g,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:b,origin:g,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==e.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==e.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(a){var b=!1;a&&(b=this.isWebMercator()&&4326===a.wkid||a.isWebMercator()&&4326===this.wkid);return b},isWebMercator:function(){return this._isWebMercator()},equals:function(a){var b=!1;a&&(this===a&&
(b=!0),this.wkid||a.wkid?b=this.wkid===a.wkid||this.isWebMercator()&&a.isWebMercator()||this.wkid===a.latestWkid||a.wkid===this.latestWkid:this.wkt&&a.wkt&&(b=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return b},toJson:function(){var a=null;null!=this.wkid?a={wkid:this.wkid}:null!=this.wkt&&(a={wkt:this.wkt});a&&null!=this.latestWkid&&(a.latestWkid=this.latestWkid);return a}});h.prototype=a.prototype;a.simpleConstructor=h;return c.SpatialReference=a})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(a,e,b,c,d){a=a(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(a){this.spatialReference=a;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new d(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(a){return this.cache&&this.cache[a]},setCacheValue:function(a,b){this.cache||
(this.cache={});this.cache[a]=b}});e.setObject("geometry.Geometry",a,c);return a})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(a,e,b,c,d,h,g,f){function k(a,b){89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;return[111319.49079327169*a,3189068.5*Math.log((1+Math.sin(b))/(1-Math.sin(b)))]}function l(a,b,c){a=a/6378137*57.29577951308232;return c?[a,57.29577951308232*
(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]}function m(){}function n(){}function p(a){var b=a._json;a._unquantizeFn?(b=a._unquantizeFn({x:b.x,y:b.y}),a._xVal=b.x,a._yVal=b.y,a._unquantizeFn=null):(a._xVal=b.x,a._yVal=b.y);a._json=null}b={type:"point",x:0,y:0};a=a(g,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(a,b,c){e.isArray(a)?(this.x=a[0],this.y=
a[1],this.spatialReference=b):d.isObject(a)?(d.mixin(this,a),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):(this.x=a,this.y=b,this.spatialReference=c);this.verifySR()},offset:function(a,b){return new this.constructor(this.x+a,this.y+b,this.spatialReference)},setX:function(a){this.x=a;this.clearCache();return this},setY:function(a){this.y=a;this.clearCache();return this},
setLongitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.setX(k(a,this.y)[0]):4326===b.wkid&&this.setX(a));return this},setLatitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.setY(k(this.x,a)[1]):4326===b.wkid&&this.setY(a));return this},getLongitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=l(this.x,this.y)[0]:4326===a.wkid&&(b=this.x));return b},getLatitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=
l(this.x,this.y)[1]:4326===a.wkid&&(b=this.y));return b},update:function(a,b){this.x=a;this.y=b;this.clearCache();return this},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var c=b._getInfo();c&&(a=this._normalizeX(a,c))}return new this.constructor(a,this.y,b)},_normalizeX:function(a,b){var c=b.valid[0],f=b.valid[1];b=2*f;a>f?(c=Math.ceil(Math.abs(a-f)/b),a-=c*b):a<c&&(c=Math.ceil(Math.abs(a-c)/b),a+=c*b);return a},toJson:function(){var a={x:this.x,y:this.y},b=this.spatialReference;
b&&(a.spatialReference=b.toJson());return a}});m.prototype=a.prototype;n.prototype=new m;Object.defineProperty(n.prototype,"x",{get:function(){this._json&&p(this);return this._xVal},set:function(a){this._xVal=a}});Object.defineProperty(n.prototype,"y",{get:function(){this._json&&p(this);return this._yVal},set:function(a){this._yVal=a}});n.prototype.setupLazyUnquantization=function(a,b){this._unquantizeFn=a;this._json=b};a.simpleConstructor=m;a.accessorConstructor=n;a.lngLatToXY=k;a.xyToLngLat=l;a.defaultProps=
b;a.metersPerDegree=6378137*Math.PI/180;e.setObject("geometry.Point",a,c);c.geometry.defaultPoint=b;return a})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(a,e,b,c,d){function h(a){var b=!1;a&&(a.ics||a.icsid)&&(b=!0);return b}c={isICS:h,createSpatialReference:function(b){var c=null;b&&(c=h(b)?new e(b):new a(b));return c}};d.mixin(b,c);return c})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(a,e,b,c,d,h){a=a(h,{declaredClass:"esri.ImageSpatialReference",constructor:function(a){a&&e.isObject(a)&&e.mixin(this,a)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(a){var b=!1;if(a)if(this.icsid&&a.icsid){if(b=this.icsid===a.icsid,this.icsns||a.icsns)b=b&&this.icsns===a.icsns}else this.ics&&a.ics&&(b=this.ics===a.ics);return b},toJson:function(a){var b=null,c=d.isDefined;a=c(a)?a:!0;c(this.icsid)?(b={icsid:this.icsid},
c(this.icsns)&&(b.icsns=this.icsns)):c(this.ics)&&(b={ics:this.ics});c(this.url)&&c(b)&&a&&(b.url=this.url);return b}});return c.ImageSpatialReference=a})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(a,e,b){var c=a("ff"),d=a("ie"),h=void 0===d&&7<=a("trident"),g=a("edge"),f=a("webkit"),k=a("opera"),l=a("chrome"),m=a("safari"),n=navigator.userAgent,p;(p=n.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&a.add("esri-iphone",parseFloat(p[2].replace("_",".")));
(p=n.match(/Android\s+(\d+(\.\d+)*)/i))&&a.add("esri-android",parseFloat(p[1]));(p=n.match(/Fennec\/(\d+\.\d+)/i))&&a.add("esri-fennec",parseFloat(p[1]));0<=n.indexOf("BlackBerry")&&0<=n.indexOf("WebKit")&&a.add("esri-blackberry",1);a.add("esri-touch",a("esri-iphone")||a("esri-android")||a("esri-blackberry")||6<=a("esri-fennec")||(c||f)&&(document.createTouch||"ontouchstart"in e)?!0:!1);(p=n.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&a.add("esri-mobile",!!p);a.add("esri-pointer",
navigator.pointerEnabled||navigator.msPointerEnabled||!(!g||!e.PointerEvent));b._getDOMAccessor=function(a){var b="";c?b="Moz":f?b="Webkit":d?b="ms":k&&(b="O");return b+a.charAt(0).toUpperCase()+a.substr(1)};a.add("esri-phonegap",!!e.cordova);a.add("esri-cors",a("esri-phonegap")||e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);a.add("esri-file-upload",e.FormData&&e.FileList?!0:!1);a.add("esri-script-sandbox",function(){return"MessageChannel"in e&&"HTMLIFrameElement"in e&&"sandbox"in HTMLIFrameElement.prototype});
a.add("esri-secure-context",function(){if("isSecureContext"in e)return e.isSecureContext;if(e.location&&e.location.origin)return 0===e.location.origin.indexOf("https:")});a.add("esri-wasm","WebAssembly"in e);a.add("esri-workers",e.Worker?!0:!1);a.add("esri-featurelayer-webgl",!1);if(n=a("esri-featurelayer-webgl")){var q=a("esri-mobile");p=q?1:2;q=q?1:3;"object"===typeof n?(n.maxDrillLevel=null==n.maxDrillLevel?p:n.maxDrillLevel,n.maxRecordCountFactor=null==n.maxRecordCountFactor?q:n.maxRecordCountFactor,
n.enablePBFQuery=null==n.enablePBFQuery?!0:n.enablePBFQuery):a.add("esri-featurelayer-webgl",{maxDrillLevel:p,maxRecordCountFactor:q,enablePBFQuery:!0},null,!0)}a.add("esri-featurelayer-webgl-labeling",!1);a.add("esri-pbf",!d||10<=d);a.add("esri-featurelayer-pbf",!0);a.add("esri-transforms",h||g||9<=d||3.5<=c||4<=l||3.1<=m||10.5<=k||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transitions",h||g||10<=d||4<=c||4<=l||3.1<=m||10.5<=k||3.2<=a("esri-iphone")||2.1<=a("esri-android"));a.add("esri-transforms3d",
h||g||10<=c||12<=l||4<=m||3.2<=a("esri-iphone")||3<=a("esri-android"));a.add("esri-url-encodes-apostrophe",function(){if(!e.document)return!1;var a=e.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")});3>a("esri-android")&&(a.add("esri-transforms",!1,!1,!0),a.add("esri-transitions",!1,!1,!0),a.add("esri-transforms3d",!1,!1,!0));a.add("esri-will-change",a("esri-transforms")&&(52<=l||11.1<=m));b._css=function(b){var g=a("esri-transforms3d");void 0!==b&&null!==b?g=b:g&&(l||m&&!a("esri-iphone"))&&
(g=!1);var h=g?"translate3d(":"translate(",n=g?l?",-1px)":",0px)":")",e=g?"scale3d(":"scale(",p=g?",1)":")",q=g?"rotate3d(0,0,1,":"rotate(",t=g?"matrix3d(":"matrix(",y=g?",0,0,":",",C=g?",0,0,0,0,1,0,":",",D=g?",0,1)":")";return{names:{transition:f&&"-webkit-transition"||c&&"MozTransition"||k&&"OTransition"||d&&"msTransition"||"transition",transform:f&&"-webkit-transform"||c&&"MozTransform"||k&&"OTransform"||d&&"msTransform"||"transform",transformName:f&&"-webkit-transform"||c&&"-moz-transform"||
k&&"-o-transform"||d&&"-ms-transform"||"transform",origin:f&&"-webkit-transform-origin"||c&&"MozTransformOrigin"||k&&"OTransformOrigin"||d&&"msTransformOrigin"||"transformOrigin",endEvent:f&&"webkitTransitionEnd"||c&&"transitionend"||k&&"oTransitionEnd"||d&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return h+a+"px,"+b+"px"+n},scale:function(a){return e+a+","+a+p},rotate:function(a){return q+a+"deg)"},matrix:function(a){return t+a.xx+","+a.xy+y+a.yx+","+a.yy+C+a.dx.toFixed(10)+(c&&
59>=c?"px,":",")+a.dy.toFixed(10)+(c&&59>=c?"px":"")+D},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};b.isiPhone=a("esri-iphone");b.isAndroid=a("esri-android");b.isFennec=a("esri-fennec");b.isBlackBerry=a("esri-blackberry");b.isTouchEnabled=a("esri-touch");b.isPointerEnabled=a("esri-pointer");b._hasCors=a("esri-cors");b._hasFileUpload=a("esri-file-upload");b._hasTransforms=
a("esri-transforms");b._hasTransitions=a("esri-transitions");b._has3DTransforms=a("esri-transforms3d");return a})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(a,e,b,c,d,h){function g(b,c,f,g){if("point"===b.type){var k=c(b.x,b.y,g);return new b.constructor(k[0],k[1],new d(f))}if("extent"===b.type){var k=c(b.xmin,b.ymin,g),l=c(b.xmax,b.ymax,g);return new b.constructor(k[0],k[1],l[0],l[1],new d(f))}if("polyline"===
b.type||"polygon"===b.type){var k="polyline"===b.type,h=[],m;a.forEach(k?b.paths:b.rings,function(b){h.push(m=[]);a.forEach(b,function(a){m.push(c(a[0],a[1],g))})});return k?new b.constructor({paths:h,spatialReference:new d(f)}):new b.constructor({rings:h,spatialReference:new d(f)})}if("multipoint"===b.type){var n=[];a.forEach(b.points,function(a){n.push(c(a[0],a[1],g))});return new b.constructor({points:n,spatialReference:new d(f)})}}function f(a,b){a=a&&(null!=a.wkid?a:a.spatialReference);b=b&&
(null!=b.wkid?b:b.spatialReference);return a&&b?b.equals(a)?!0:b._canProject(a):!1}b={canProject:f,project:function(a,b){var c=a&&a.spatialReference;b=b&&(null!=b.wkid?b:b.spatialReference);c&&b?c.equals(b)?a=new a.constructor(a.toJson()):f(c,b)?b.isWebMercator()?a=g(a,h.lngLatToXY,{wkid:102100}):4326===b.wkid&&(a=g(a,h.xyToLngLat,{wkid:4326})):a=null:a=null;return a},lngLatToXY:h.lngLatToXY,xyToLngLat:h.xyToLngLat,metersPerDegree:h.metersPerDegree,geographicToWebMercator:function(a){return g(a,h.lngLatToXY,
{wkid:102100})},webMercatorToGeographic:function(a,b){return g(a,h.xyToLngLat,{wkid:4326},b)}};e.mixin(e.getObject("geometry",!0,c),b);return b})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(a,e,b,c){function d(a,b,d){return a instanceof c?new c(a.x+d*(b.x-a.x),a.y+d*(b.y-a.y)):[a[0]+d*(b[0]-a[0]),a[1]+d*(b[1]-a[1])]}function h(a,b){return 1E-8>Math.abs(a-b)}function g(a,b,c,d){var f,k=h(a[0],b[0])?1E10:(a[1]-b[1])/(a[0]-b[0]),g=h(c[0],
d[0])?1E10:(c[1]-d[1])/(c[0]-d[0]),l=a[1]-k*a[0],m=c[1]-g*c[0];if(h(k,g)){if(h(l,m)){if(h(a[0],b[0]))if(Math.min(a[1],b[1])<Math.max(c[1],d[1])||Math.max(a[1],b[1])>Math.min(c[1],d[1]))a=(a[1]+b[1]+c[1]+d[1]-Math.min(a[1],b[1],c[1],d[1])-Math.max(a[1],b[1],c[1],d[1]))/2,f=(a-l)/k;else return null;else if(Math.min(a[0],b[0])<Math.max(c[0],d[0])||Math.max(a[0],b[0])>Math.min(c[0],d[0]))f=(a[0]+b[0]+c[0]+d[0]-Math.min(a[0],b[0],c[0],d[0])-Math.max(a[0],b[0],c[0],d[0]))/2,a=k*f+l;else return null;return[f,
a]}return null}h(k,1E10)?(f=a[0],a=g*f+m):h(g,1E10)?(f=c[0],a=k*f+l):(f=-(l-m)/(k-g),a=a[1]===b[1]?a[1]:c[1]===d[1]?c[1]:k*f+l);return[f,a]}e={getLength:function(a,b){var c=b.x-a.x;a=b.y-a.y;return Math.sqrt(c*c+a*a)},_getLength:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},getPointOnLine:d,getMidpoint:function(a,b){return d(a,b,.5)},_equals:h,_getLineIntersection:g,getLineIntersection:function(a,b,d,h,n){(a=g([a.x,a.y],[b.x,b.y],[d.x,d.y],[h.x,h.y]))&&(a=new c(a[0],a[1],n));
return a},_getLineIntersection2:function(a,b){var c=a[0],f=a[1],d=b[0],k=b[1];b=c[0];c=c[1];a=f[0];var f=f[1],g=d[0],h=d[1],d=k[0]-g,g=b-g,e=a-b,k=k[1]-h,h=c-h,u=f-c,v=k*e-d*u;if(0===v)return!1;d=(d*h-k*g)/v;g=(e*h-u*g)/v;return 0<=d&&1>=d&&0<=g&&1>=g?[b+d*(a-b),c+d*(f-c)]:!1},_pointLineDistance:function(a,b){var c=b[0],f=b[1];b=c[0];var d=c[1],c=a[0];a=a[1];var k=f[0]-b,g=f[1]-d,h=c-b,e=a-d,f=Math.sqrt,u=Math.pow,v=f(u(k,2)+u(g,2)),h=(h*k+e*g)/(v*v),d=d+h*g;return f(u(c-(b+h*k),2)+u(a-d,2))}};a.mixin(a.getObject("geometry",
!0,b),e);return e})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(a,e,b,c,d,h,g,f,k,l){var m=function(){return 9>b("ie")?function(a,b,c,f,d,k,g,l,h){var m=[],n=Math.round,e,v=g.length,p,q,t,u,w,r;for(e=0;e<v;e++)if(p=g[e],u=l?l(p[0][0],p[0][1],h):p[0],1<(t=p.length))for(w=n((u[0]-a)*c+d),r=n((b-u[1])*f+k),u=l?l(p[1][0],p[1][1],h):p[1],q=n((u[0]-a)*c+d),u=n((b-
u[1])*f+k),m.push("M",w+","+r,"L",q+","+u),q=2;q<t;q++)u=l?l(p[q][0],p[q][1],h):p[q],w=n((u[0]-a)*c+d),r=n((b-u[1])*f+k),m.push(w+","+r);else w=n((u[0]-a)*c+d),r=n((b-u[1])*f+k),m.push("M",w+","+r);return m}:function(a,b,c,f,d,k,g,l,h,m){var n=[],e,v,p,q,t,u,w=Math.round;e=0;for(p=g?g.length:0;e<p;e++){t=g[e];n.push("M");v=0;for(q=t?t.length:0;v<q;v++)u=l?l(t[v][0],t[v][1],h):t[v],n.push(w((u[0]-a)*c+d)+","+w((b-u[1])*f+k));m||n.push("Z")}return n}}(),n={toScreenPoint:function(a,b,c,f,k){var g=a.spatialReference,
l=f.spatialReference,m=f.x;f=f.y;g&&l&&!g.equals(l)&&g._canProject(l)&&(g=g.isWebMercator()?d.lngLatToXY(m,f):d.xyToLngLat(m,f,!0),m=g[0],f=g[1]);m=(m-a.xmin)*(b/a.getWidth());f=(a.ymax-f)*(c/a.getHeight());k||(m=Math.round(m),f=Math.round(f));return new h(m,f)},toScreenGeometry:function(b,c,h,m){var n=b.xmin,e=b.ymax,p=c/b.getWidth(),q=h/b.getHeight(),t=a.forEach,r=Math.round;if(m instanceof d)return new d(r((m.x-n)*p),r((e-m.y)*q));if(m instanceof k){b=new k;var y=b.points;t(m.points,function(a,
b){y[b]=[r((a[0]-n)*p),r((e-a[1])*q)]});return b}if(m instanceof l)return new l(r((m.xmin-n)*p),r((e-m.ymin)*q),r((m.xmax-n)*p),r((e-m.ymax)*p));if(m instanceof g){b=new g;var C=b.paths,D;t(m.paths,function(a,b){D=C[b]=[];t(a,function(a,b){D[b]=[r((a[0]-n)*p),r((e-a[1])*q)]})});return b}if(m instanceof f){b=new f;var E=b.rings,I;t(m.rings,function(a,b){I=E[b]=[];t(a,function(a,b){I[b]=[r((a[0]-n)*p),r((e-a[1])*q)]})});return b}},_toScreenPath:function(a,b,c,f,k,l){var h=f instanceof g,n=a.spatialReference,
e=f.spatialReference,v,p;n&&e&&!n.equals(e)&&n._canProject(e)&&(n.isWebMercator()?v=d.lngLatToXY:(v=d.xyToLngLat,p=!0));return m(a.xmin,a.ymax,b/a.getWidth(),c/a.getHeight(),k,l,h?f.paths:f.rings,v,p,h)},toMapPoint:function(a,b,c,f){return new d(a.xmin+f.x/(b/a.getWidth()),a.ymax-f.y/(c/a.getHeight()),a.spatialReference)},toMapGeometry:function(b,c,h,m){var n=b.xmin,e=b.ymax,p=b.spatialReference,q=c/b.getWidth(),t=h/b.getHeight(),r=a.forEach;if(m instanceof d)return new d(n+m.x/q,e-m.y/t,p);if(m instanceof
k){b=new k(p);var y=b.points;r(m.points,function(a,b){y[b]=[n+a[0]/q,e-a[1]/t]});return b}if(m instanceof l)return new l(n+m.xmin/q,e-m.ymin/t,n+m.xmax/q,e-m.ymax/t,p);if(m instanceof g){b=new g(p);var C=b.paths,D;r(m.paths,function(a,b){D=C[b]=[];r(a,function(a,b){D[b]=[n+a[0]/q,e-a[1]/t]})});return b}if(m instanceof f){b=new f(p);var E=b.rings,I;r(m.rings,function(a,b){I=E[b]=[];r(a,function(a,b){I[b]=[n+a[0]/q,e-a[1]/t]})});return b}}};e.mixin(e.getObject("geometry",!0,c),n);return n})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","./Point"],function(a,e,b,c,d){a=a(d,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});e.setObject("geometry.ScreenPoint",a,c);return a})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(a,e,b,c,d,h,g,f,k,l,m){function n(){}function p(){}c={type:"polyline",paths:null};a=a(f,{declaredClass:"esri.geometry.Polyline",
type:"polyline",paths:null,constructor:function(a){this.paths=[];this._path=0;a&&(b.isArray(a)?this.paths=b.isArray(a[0][0])?a:[a]:a.paths?h.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=m.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(a){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];b.isArray(a[0])?e.forEach(a,this._addPointArr,this):e.forEach(a,this._addPoint,this);return this},_addPointArr:function(a){this.paths[this._path].push(a)},
_addPoint:function(a){this.paths[this._path].push([a.x,a.y])},_insertPoints:function(a,b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);e.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new k(this.paths[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,
b))return this.clearCache(),this.paths[a][b]=[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&null!=b&&0<=b&&b<=this.paths[a].length)return this.clearCache(),this.paths[a].splice(b,0,[c.x,c.y]),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var b,c=a.length,f=this.spatialReference;for(b=0;b<c;b++)a[b]=new k(a[b],f);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new k(this.paths[a].splice(b,
1)[0],this.spatialReference)},getExtent:function(){var a;a=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(a)return a=new l(a),a._partwise=b,a;a=this.paths;var c=a.length;if(c&&a[0].length){var f,d,k,g,h,m,n,e,p=g=a[0][0][0],E=h=a[0][0][1],I=Math.min,H=Math.max,Q=this.spatialReference,b=[],U,G,R,X;for(m=0;m<c;m++){f=a[m];U=G=f[0]&&f[0][0];R=X=f[0]&&f[0][1];e=f.length;for(n=0;n<e;n++)d=f[n],k=d[0],d=d[1],p=I(p,k),E=I(E,d),g=H(g,k),h=H(h,d),U=I(U,k),R=I(R,d),G=H(G,k),X=H(X,d);
b.push(new l({xmin:U,ymin:R,xmax:G,ymax:X,spatialReference:Q?Q.toJson():null}))}a={xmin:p,ymin:E,xmax:g,ymax:h,spatialReference:Q?Q.toJson():null};b=1<b.length?b:null;this.setCacheValue("_extent",a);this.setCacheValue("_partwise",b);a=new l(a);a._partwise=b;return a}},toJson:function(){var a={paths:h.clone3DArray(this.paths)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});n.prototype=a.prototype;p.prototype=new n;Object.defineProperty(p.prototype,"paths",{get:function(){this._unquantizeFn&&
(this._pathsVal=this._unquantizeFn({paths:h.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(a){this._pathsVal=a}});p.prototype.setupLazyUnquantization=function(a,b){this._unquantizeFn=a;this._pathsVal=b.paths};a.simpleConstructor=n;a.accessorConstructor=p;a.defaultProps=c;b.setObject("geometry.Polyline",a,d);d.geometry.defaultPolyline=c;return a})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n){function p(){}function q(){}c={type:"polygon",rings:null};var t=a(f,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(a){this.rings=[];this._ring=0;a&&(b.isArray(a)?this.rings=b.isArray(a[0][0])?a:[a]:a.rings?h.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=n.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(a){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];b.isArray(a[0])?e.forEach(a,this._addPointArr,this):e.forEach(a,this._addPoint,this);return this},_addPointArr:function(a){this.rings[this._ring].push(a)},_addPoint:function(a){this.rings[this._ring].push([a.x,a.y])},_insertPoints:function(a,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);e.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?
!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new k(this.rings[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.rings[a][b]=[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&null!=b&&0<=b&&b<=this.rings[a].length)return this.clearCache(),this.rings[a].splice(b,0,[c.x,c.y]),this},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,c=a.length,
f=this.spatialReference;for(b=0;b<c;b++)a[b]=new k(a[b],f);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new k(this.rings[a].splice(b,1)[0],this.spatialReference)},getExtent:function(){var a;a=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(a)return a=new l(a),a._partwise=b,a;a=this.rings;var c=a.length;if(c&&a[0].length){var f,d,k,g,h,m,n,e,p=g=a[0][0][0],q=h=a[0][0][1],t=Math.min,U=Math.max,G=this.spatialReference,b=[],R,X,K,W;
for(m=0;m<c;m++){f=a[m];R=X=f[0]&&f[0][0];K=W=f[0]&&f[0][1];e=f.length;for(n=0;n<e;n++)d=f[n],k=d[0],d=d[1],p=t(p,k),q=t(q,d),g=U(g,k),h=U(h,d),R=t(R,k),K=t(K,d),X=U(X,k),W=U(W,d);b.push(new l({xmin:R,ymin:K,xmax:X,ymax:W,spatialReference:G?G.toJson():null}))}a={xmin:p,ymin:q,xmax:g,ymax:h,spatialReference:G?G.toJson():null};b=1<b.length?b:null;this.setCacheValue("_extent",a);this.setCacheValue("_partwise",b);a=new l(a);a._partwise=b;return a}},contains:function(a){var b=this.rings,c,f=!1,d,g,l,h,
m,n,e=b.length;c=this.spatialReference;d=a.spatialReference;var p=a.x;a=a.y;c&&d&&!c.equals(d)&&c._canProject(d)&&(a=c.isWebMercator()?k.lngLatToXY(p,a):k.xyToLngLat(p,a,!0),p=a[0],a=a[1]);for(n=0;n<e;n++)for(c=b[n],l=c.length,m=h=0;m<l;m++)h++,h===l&&(h=0),d=c[m],g=c[h],(d[1]<a&&g[1]>=a||g[1]<a&&d[1]>=a)&&d[0]+(a-d[1])/(g[1]-d[1])*(g[0]-d[0])<p&&(f=!f);return f},getCentroid:function(){var a=this.getCacheValue("_centroid");if(void 0!==a)return a;var a=this.rings,b,c,f,d,g=[],l,h,m=Infinity,n=-Infinity,
p=Infinity,q=-Infinity;e.forEach(a,function(a){b=c=f=0;e.forEach(a,function(d,k){k<a.length-1&&(l=a[k+1],h=d[0]*l[1]-l[0]*d[1],b+=(d[0]+l[0])*h,c+=(d[1]+l[1])*h,f+=h,d[0]<m&&(m=d[0]),d[0]>n&&(n=d[0]),d[1]<p&&(p=d[1]),d[1]>q&&(q=d[1]))});0<f&&(f*=-1);f&&g.push([b,c,f/2])});g.sort(function(a,b){return a[2]-b[2]});b=c=void 0;g[0]&&(d=6*g[0][2],b=g[0][0]/d,c=g[0][1]/d,b<m||b>n||c<p||c>q)&&(b=c=void 0);if(void 0===b||void 0===c)if(a=a[0]&&a[0].length?this._getLineCentroid(a[0]):null)b=a.x,c=a.y;a=isNaN(b)||
isNaN(c)?null:new k(b,c,this.spatialReference);this.setCacheValue("_centroid",a);return a},_getLineCentroid:function(a){var b,c=0,f=0,d=0,k,g,l={x:0,y:0},h={x:0,y:0},n,e=a.length,p;for(n=0;n<e-1;n++)k=a[n],g=a[n+1],k&&g&&(l.x=k[0],l.y=k[1],h.x=g[0],h.y=g[1],b=m.getLength(l,h),0<b&&(c+=b,k=m.getMidpoint(k,g),f+=b*k[0],d+=b*k[1]));0<c?p={x:f/c,y:d/c}:a[0]&&(p={x:a[0][0],y:a[0][1]});return p},isClockwise:function(a){var c=0,f,d=a.length,k=b.isArray(a[0])?function(a,b){return a[0]*b[1]-b[0]*a[1]}:function(a,
b){return a.x*b.y-b.x*a.y};for(f=0;f<d;f++)c+=k(a[f],a[(f+1)%d]);return 0>=c/2},isSelfIntersecting:function(a){a=a||this;var b,c,f,d,k,g,l,h=a.rings.length,n;for(f=0;f<h;f++){for(b=0;b<a.rings[f].length-1;b++)for(k=[[a.rings[f][b][0],a.rings[f][b][1]],[a.rings[f][b+1][0],a.rings[f][b+1][1]]],c=f+1;c<h;c++)for(d=0;d<a.rings[c].length-1;d++)if(g=[[a.rings[c][d][0],a.rings[c][d][1]],[a.rings[c][d+1][0],a.rings[c][d+1][1]]],(l=m._getLineIntersection2(k,g))&&!(l[0]===k[0][0]&&l[1]===k[0][1]||l[0]===g[0][0]&&
l[1]===g[0][1]||l[0]===k[1][0]&&l[1]===k[1][1]||l[0]===g[1][0]&&l[1]===g[1][1]))return!0;d=a.rings[f].length;if(!(4>=d))for(b=0;b<d-3;b++)for(n=d-1,0===b&&(n=d-2),k=[[a.rings[f][b][0],a.rings[f][b][1]],[a.rings[f][b+1][0],a.rings[f][b+1][1]]],c=b+2;c<n;c++)if(g=[[a.rings[f][c][0],a.rings[f][c][1]],[a.rings[f][c+1][0],a.rings[f][c+1][1]]],(l=m._getLineIntersection2(k,g))&&!(l[0]===k[0][0]&&l[1]===k[0][1]||l[0]===g[0][0]&&l[1]===g[0][1]||l[0]===k[1][0]&&l[1]===k[1][1]||l[0]===g[1][0]&&l[1]===g[1][1]))return!0}return!1},
toJson:function(){var a={rings:h.clone3DArray(this.rings)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});p.prototype=t.prototype;q.prototype=new p;Object.defineProperty(q.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:h.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(a){this._ringsVal=a}});q.prototype.setupLazyUnquantization=function(a,b){this._unquantizeFn=a;this._ringsVal=
b.rings};t.simpleConstructor=p;t.accessorConstructor=q;t.defaultProps=c;t.createEllipse=function(a){var b=a.center.x,c=a.center.y,f=a.longAxis,d=a.shortAxis,k=a.numberOfPoints,g=a.map,l,h,m;a=[];var n=2*Math.PI/k;for(h=0;h<k;h++)l=Math.cos(h*n),m=Math.sin(h*n),l=g.toMap({x:f*l+b,y:d*m+c}),a.push(l);a.push(a[0]);b=new t(g.spatialReference);b.addRing(a);return b};t.createCircle=function(a){return t.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})};
t.fromExtent=function(a){var b=a.normalize();a=a.spatialReference;return new t({rings:e.map(b,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:a?a.toJson():null})};b.setObject("geometry.Polygon",t,d);d.geometry.defaultPolygon=c;d.geometry.createEllipse=t.createEllipse;d.geometry.createCircle=t.createCircle;d.geometry.isClockwise=t.prototype.isClockwise;d.geometry.polygonSelfIntersecting=t.prototype.isSelfIntersecting;return t})},
"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(a,e,b,c,d,h,g,f,k,l){function m(){}function n(){}b={type:"multipoint",points:null};a=a(g,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(a){this.points=[];a&&(a.points?d.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));
this.verifySR()},addPoint:function(a){this.clearCache();e.isArray(a)?this.points.push(a):this.points.push([a.x,a.y]);return this},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),new f(this.points.splice(a,1)[0],this.spatialReference)},getExtent:function(){var a=this.getCacheValue("_extent");if(a)return new k(a);var a=this.points,b=a.length;if(b){var c=a[0],f,d,g=f=c[0],l=d=c[1],h=Math.min,m=Math.max,n=this.spatialReference,e,C;for(C=0;C<b;C++)c=a[C],e=c[0],c=c[1],g=h(g,
e),l=h(l,c),f=m(f,e),d=m(d,c);a={xmin:g,ymin:l,xmax:f,ymax:d,spatialReference:n?n.toJson():null};this.setCacheValue("_extent",a);return new k(a)}},_validateInputs:function(a){return null===a||0>a||a>=this.points.length?!1:!0},getPoint:function(a){if(this._validateInputs(a))return a=this.points[a],new f(a[0],a[1],this.spatialReference)},setPoint:function(a,b){if(this._validateInputs(a))return this.clearCache(),this.points[a]=[b.x,b.y],this},toJson:function(){var a={points:d.clone2DArray(this.points)},
b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});m.prototype=a.prototype;n.prototype=new m;Object.defineProperty(n.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:d.clone2DArray(this._pointsVal)}).points,this._unquantizeFn=null);return this._pointsVal},set:function(a){this._pointsVal=a}});n.prototype.setupLazyUnquantization=function(a,b){this._unquantizeFn=a;this._pointsVal=b.points};a.simpleConstructor=m;a.accessorConstructor=
n;a.defaultProps=b;e.setObject("geometry.Multipoint",a,c);c.geometry.defaultMultipoint=b;return a})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(a,e,b,c,d){function h(a,b,c){return a&&b?a.getWidth()/b*(c||f)*39.37*k.screenDPI:0}function g(a,b,c,d,g){return a.expand(d*b/(39.37*((g?c:l.values[l[c]])||f)*k.screenDPI)/a.getWidth())}var f=6370997*Math.PI/180,k=c.defaults,l=d,m={getUnitValueForSR:function(a){return this.getUnitValue(a)||
f},getUnitValue:function(a){var b,c,f;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?f=l.values[l[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(c))&&a[1]&&(f=parseFloat(a[1].split(",")[1]));return f},getScale:function(a,b,c){var f,d,k;1<arguments.length&&null!=b&&!b.declaredClass?(f=a,d=b,b=null,k=m.getUnitValue(c)):(f=b||a.extent,d=a.width,k=m.getUnitValue(f&&f.spatialReference));return h(f,d,k)},getExtentForScale:function(a,b,
c){return g(c||a.extent,a.width,m.getUnitValue(a.spatialReference),b,!0)}};a.mixin(a.getObject("geometry",!0,b),m);b.geometry._getScale=h;b.geometry._getExtentForScale=g;return m})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(a,e,b,c){b=function(){return this}();var d={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",
width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:b.Worker&&!1,io:{errorHandler:function(a,b){e.publish("esri.Error",[a])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",
corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com",
"services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com",
"staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:b.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};c.config=d;a.noGlobals||(b.esriConfig=d);return d})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(a,e){var b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)b[a]=0;for(a=2056;2065>=a;a++)b[a]=0;for(a=2067;2135>=a;a++)b[a]=0;for(a=2137;2154>=a;a++)b[a]=0;for(a=2161;2170>=a;a++)b[a]=0;for(a=2172;2193>=a;a++)b[a]=0;for(a=2195;2198>=a;a++)b[a]=0;for(a=2200;2203>=a;a++)b[a]=0;for(a=2205;2217>=a;a++)b[a]=0;for(a=2222;2224>=a;a++)b[a]=1;for(a=2225;2250>=a;a++)b[a]=2;
for(a=2251;2253>=a;a++)b[a]=1;for(a=2257;2264>=a;a++)b[a]=2;for(a=2274;2279>=a;a++)b[a]=2;for(a=2280;2282>=a;a++)b[a]=1;for(a=2283;2289>=a;a++)b[a]=2;for(a=2290;2292>=a;a++)b[a]=0;for(a=2308;2313>=a;a++)b[a]=0;for(a=2315;2491>=a;a++)b[a]=0;for(a=2494;2866>=a;a++)b[a]=0;for(a=2867;2869>=a;a++)b[a]=1;for(a=2870;2888>=a;a++)b[a]=2;for(a=2891;2895>=a;a++)b[a]=2;for(a=2896;2898>=a;a++)b[a]=1;for(a=2902;2908>=a;a++)b[a]=2;for(a=2915;2920>=a;a++)b[a]=2;for(a=2921;2923>=a;a++)b[a]=1;for(a=2924;2930>=a;a++)b[a]=
2;for(a=2931;2962>=a;a++)b[a]=0;for(a=2964;2968>=a;a++)b[a]=2;for(a=2969;2973>=a;a++)b[a]=0;for(a=2975;2991>=a;a++)b[a]=0;for(a=2995;3051>=a;a++)b[a]=0;for(a=3054;3079>=a;a++)b[a]=0;for(a=3081;3088>=a;a++)b[a]=0;for(a=3092;3101>=a;a++)b[a]=0;for(a=3106;3138>=a;a++)b[a]=0;for(a=3146;3151>=a;a++)b[a]=0;for(a=3153;3166>=a;a++)b[a]=0;for(a=3168;3172>=a;a++)b[a]=0;for(a=3174;3203>=a;a++)b[a]=0;for(a=3294;3358>=a;a++)b[a]=0;for(a=3367;3403>=a;a++)b[a]=0;for(a=3408;3416>=a;a++)b[a]=0;for(a=3417;3438>=a;a++)b[a]=
2;for(a=3441;3446>=a;a++)b[a]=2;for(a=3447;3450>=a;a++)b[a]=0;for(a=3451;3459>=a;a++)b[a]=2;for(a=3460;3478>=a;a++)b[a]=0;for(a=3554;3559>=a;a++)b[a]=0;for(a=3560;3570>=a;a++)b[a]=2;for(a=3571;3581>=a;a++)b[a]=0;for(a=3594;3597>=a;a++)b[a]=0;for(a=3601;3604>=a;a++)b[a]=0;for(a=3637;3639>=a;a++)b[a]=0;for(a=3665;3667>=a;a++)b[a]=0;for(a=3693;3695>=a;a++)b[a]=0;for(a=3701;3727>=a;a++)b[a]=0;for(a=3728;3739>=a;a++)b[a]=2;for(a=3740;3751>=a;a++)b[a]=0;for(a=3753;3760>=a;a++)b[a]=2;for(a=3761;3773>=a;a++)b[a]=
0;for(a=3775;3777>=a;a++)b[a]=0;for(a=3779;3781>=a;a++)b[a]=0;for(a=3783;3785>=a;a++)b[a]=0;for(a=3788;3791>=a;a++)b[a]=0;for(a=3797;3802>=a;a++)b[a]=0;for(a=3814;3816>=a;a++)b[a]=0;for(a=3825;3829>=a;a++)b[a]=0;for(a=3832;3841>=a;a++)b[a]=0;for(a=3844;3852>=a;a++)b[a]=0;for(a=3873;3885>=a;a++)b[a]=0;for(a=3890;3893>=a;a++)b[a]=0;for(a=3907;3912>=a;a++)b[a]=0;for(a=3942;3950>=a;a++)b[a]=0;for(a=3968;3970>=a;a++)b[a]=0;for(a=3973;3976>=a;a++)b[a]=0;for(a=3986;3989>=a;a++)b[a]=0;for(a=3994;3997>=a;a++)b[a]=
0;for(a=4048;4051>=a;a++)b[a]=0;for(a=4056;4063>=a;a++)b[a]=0;for(a=4093;4096>=a;a++)b[a]=0;for(a=4390;4398>=a;a++)b[a]=0;for(a=4399;4413>=a;a++)b[a]=2;for(a=4418;4433>=a;a++)b[a]=2;for(a=4455;4457>=a;a++)b[a]=2;for(a=4484;4489>=a;a++)b[a]=0;for(a=4491;4554>=a;a++)b[a]=0;for(a=4568;4589>=a;a++)b[a]=0;for(a=4652;4656>=a;a++)b[a]=0;for(a=4766;4800>=a;a++)b[a]=0;for(a=5014;5016>=a;a++)b[a]=0;for(a=5069;5072>=a;a++)b[a]=0;for(a=5105;5130>=a;a++)b[a]=0;for(a=5173;5188>=a;a++)b[a]=0;for(a=5253;5259>=a;a++)b[a]=
0;for(a=5269;5275>=a;a++)b[a]=0;for(a=5292;5311>=a;a++)b[a]=0;for(a=5329;5331>=a;a++)b[a]=0;for(a=5343;5349>=a;a++)b[a]=0;for(a=5355;5357>=a;a++)b[a]=0;for(a=5387;5389>=a;a++)b[a]=0;for(a=5459;5463>=a;a++)b[a]=0;for(a=5479;5482>=a;a++)b[a]=0;for(a=5518;5520>=a;a++)b[a]=0;for(a=5530;5539>=a;a++)b[a]=0;for(a=5550;5552>=a;a++)b[a]=0;for(a=5562;5583>=a;a++)b[a]=0;for(a=5623;5625>=a;a++)b[a]=2;for(a=5631;5639>=a;a++)b[a]=0;for(a=5649;5653>=a;a++)b[a]=0;for(a=5663;5680>=a;a++)b[a]=0;for(a=5682;5685>=a;a++)b[a]=
0;for(a=5875;5877>=a;a++)b[a]=0;for(a=5921;5940>=a;a++)b[a]=0;for(a=6050;6125>=a;a++)b[a]=0;for(a=6244;6275>=a;a++)b[a]=0;for(a=6328;6348>=a;a++)b[a]=0;for(a=6350;6356>=a;a++)b[a]=0;for(a=6366;6372>=a;a++)b[a]=0;for(a=6381;6387>=a;a++)b[a]=0;for(a=6393;6404>=a;a++)b[a]=0;for(a=6480;6483>=a;a++)b[a]=0;for(a=6511;6514>=a;a++)b[a]=0;for(a=6579;6581>=a;a++)b[a]=0;for(a=6619;6624>=a;a++)b[a]=0;for(a=6625;6627>=a;a++)b[a]=2;for(a=6628;6632>=a;a++)b[a]=0;for(a=6634;6637>=a;a++)b[a]=0;for(a=6669;6692>=a;a++)b[a]=
0;for(a=6707;6709>=a;a++)b[a]=0;for(a=6720;6723>=a;a++)b[a]=0;for(a=6732;6738>=a;a++)b[a]=0;for(a=6931;6933>=a;a++)b[a]=0;for(a=6956;6959>=a;a++)b[a]=0;for(a=7005;7007>=a;a++)b[a]=0;for(a=7057;7070>=a;a++)b[a]=2;for(a=7074;7082>=a;a++)b[a]=0;for(a=7109;7118>=a;a++)b[a]=0;for(a=7119;7127>=a;a++)b[a]=1;for(a=7374;7376>=a;a++)b[a]=0;for(a=7528;7586>=a;a++)b[a]=0;for(a=7587;7645>=a;a++)b[a]=2;for(a=7755;7787>=a;a++)b[a]=0;for(a=7791;7795>=a;a++)b[a]=0;for(a=7799;7801>=a;a++)b[a]=0;for(a=7803;7805>=a;a++)b[a]=
0;for(a=7825;7831>=a;a++)b[a]=0;for(a=7845;7859>=a;a++)b[a]=0;for(a=8013;8032>=a;a++)b[a]=0;for(a=20002;20032>=a;a++)b[a]=0;for(a=20062;20092>=a;a++)b[a]=0;for(a=20135;20138>=a;a++)b[a]=0;for(a=20248;20258>=a;a++)b[a]=0;for(a=20348;20358>=a;a++)b[a]=0;for(a=20436;20440>=a;a++)b[a]=0;for(a=20822;20824>=a;a++)b[a]=0;for(a=20934;20936>=a;a++)b[a]=0;for(a=21035;21037>=a;a++)b[a]=0;for(a=21095;21097>=a;a++)b[a]=0;for(a=21148;21150>=a;a++)b[a]=0;for(a=21413;21423>=a;a++)b[a]=0;for(a=21473;21483>=a;a++)b[a]=
0;for(a=21780;21782>=a;a++)b[a]=0;for(a=21891;21894>=a;a++)b[a]=0;for(a=21896;21899>=a;a++)b[a]=0;for(a=22171;22177>=a;a++)b[a]=0;for(a=22181;22187>=a;a++)b[a]=0;for(a=22191;22197>=a;a++)b[a]=0;for(a=22234;22236>=a;a++)b[a]=0;for(a=22521;22525>=a;a++)b[a]=0;for(a=22991;22994>=a;a++)b[a]=0;for(a=23028;23038>=a;a++)b[a]=0;for(a=23830;23853>=a;a++)b[a]=0;for(a=23866;23872>=a;a++)b[a]=0;for(a=23877;23884>=a;a++)b[a]=0;for(a=23886;23894>=a;a++)b[a]=0;for(a=23946;23948>=a;a++)b[a]=0;for(a=24311;24313>=
a;a++)b[a]=0;for(a=24342;24347>=a;a++)b[a]=0;for(a=24370;24374>=a;a++)b[a]=10;for(a=24375;24381>=a;a++)b[a]=0;for(a=24718;24721>=a;a++)b[a]=0;for(a=24817;24821>=a;a++)b[a]=0;for(a=24877;24882>=a;a++)b[a]=0;for(a=24891;24893>=a;a++)b[a]=0;for(a=25391;25395>=a;a++)b[a]=0;for(a=25828;25838>=a;a++)b[a]=0;for(a=26191;26195>=a;a++)b[a]=0;for(a=26391;26393>=a;a++)b[a]=0;for(a=26701;26722>=a;a++)b[a]=0;for(a=26729;26799>=a;a++)b[a]=2;for(a=26801;26803>=a;a++)b[a]=2;for(a=26811;26813>=a;a++)b[a]=2;for(a=26847;26870>=
a;a++)b[a]=2;for(a=26891;26899>=a;a++)b[a]=0;for(a=26901;26923>=a;a++)b[a]=0;for(a=26929;26946>=a;a++)b[a]=0;for(a=26948;26998>=a;a++)b[a]=0;for(a=27037;27040>=a;a++)b[a]=0;for(a=27205;27232>=a;a++)b[a]=0;for(a=27258;27260>=a;a++)b[a]=0;for(a=27391;27398>=a;a++)b[a]=0;for(a=27561;27564>=a;a++)b[a]=0;for(a=27571;27574>=a;a++)b[a]=0;for(a=27581;27584>=a;a++)b[a]=0;for(a=27591;27594>=a;a++)b[a]=0;for(a=28191;28193>=a;a++)b[a]=0;for(a=28348;28358>=a;a++)b[a]=0;for(a=28402;28432>=a;a++)b[a]=0;for(a=28462;28492>=
a;a++)b[a]=0;for(a=29118;29122>=a;a++)b[a]=0;for(a=29168;29172>=a;a++)b[a]=0;for(a=29177;29185>=a;a++)b[a]=0;for(a=29187;29195>=a;a++)b[a]=0;for(a=29900;29903>=a;a++)b[a]=0;for(a=30161;30179>=a;a++)b[a]=0;for(a=30491;30494>=a;a++)b[a]=0;for(a=30729;30732>=a;a++)b[a]=0;for(a=31251;31259>=a;a++)b[a]=0;for(a=31265;31268>=a;a++)b[a]=0;for(a=31275;31279>=a;a++)b[a]=0;for(a=31281;31297>=a;a++)b[a]=0;for(a=31461;31469>=a;a++)b[a]=0;for(a=31491;31495>=a;a++)b[a]=0;for(a=31917;31922>=a;a++)b[a]=0;for(a=31965;32E3>=
a;a++)b[a]=0;for(a=32001;32003>=a;a++)b[a]=2;for(a=32005;32031>=a;a++)b[a]=2;for(a=32033;32060>=a;a++)b[a]=2;for(a=32064;32067>=a;a++)b[a]=2;for(a=32074;32077>=a;a++)b[a]=2;for(a=32081;32086>=a;a++)b[a]=0;for(a=32107;32130>=a;a++)b[a]=0;for(a=32133;32158>=a;a++)b[a]=0;for(a=32164;32167>=a;a++)b[a]=2;for(a=32180;32199>=a;a++)b[a]=0;for(a=32201;32260>=a;a++)b[a]=0;for(a=32301;32360>=a;a++)b[a]=0;for(a=32601;32662>=a;a++)b[a]=0;for(a=32664;32667>=a;a++)b[a]=2;for(a=32701;32761>=a;a++)b[a]=0;for(a=53001;53004>=
a;a++)b[a]=0;for(a=53008;53019>=a;a++)b[a]=0;for(a=53021;53032>=a;a++)b[a]=0;for(a=53042;53046>=a;a++)b[a]=0;for(a=53074;53080>=a;a++)b[a]=0;for(a=54001;54004>=a;a++)b[a]=0;for(a=54008;54019>=a;a++)b[a]=0;for(a=54021;54032>=a;a++)b[a]=0;for(a=54042;54046>=a;a++)b[a]=0;for(a=54048;54053>=a;a++)b[a]=0;for(a=54074;54080>=a;a++)b[a]=0;for(a=102001;102040>=a;a++)b[a]=0;for(a=102042;102063>=a;a++)b[a]=0;for(a=102065;102067>=a;a++)b[a]=0;for(a=102070;102117>=a;a++)b[a]=0;for(a=102122;102216>=a;a++)b[a]=
0;for(a=102221;102377>=a;a++)b[a]=0;for(a=102382;102388>=a;a++)b[a]=0;for(a=102389;102398>=a;a++)b[a]=2;for(a=102399;102444>=a;a++)b[a]=0;for(a=102445;102447>=a;a++)b[a]=2;for(a=102448;102458>=a;a++)b[a]=0;for(a=102459;102468>=a;a++)b[a]=2;for(a=102469;102497>=a;a++)b[a]=0;for(a=102500;102519>=a;a++)b[a]=1;for(a=102520;102524>=a;a++)b[a]=0;for(a=102525;102529>=a;a++)b[a]=2;for(a=102530;102568>=a;a++)b[a]=0;for(a=102570;102588>=a;a++)b[a]=0;for(a=102590;102598>=a;a++)b[a]=0;for(a=102601;102603>=a;a++)b[a]=
0;for(a=102605;102628>=a;a++)b[a]=0;for(a=102629;102646>=a;a++)b[a]=2;for(a=102648;102700>=a;a++)b[a]=2;for(a=102701;102703>=a;a++)b[a]=0;for(a=102707;102730>=a;a++)b[a]=2;for(a=102733;102758>=a;a++)b[a]=2;for(a=102767;102900>=a;a++)b[a]=0;for(a=102965;102969>=a;a++)b[a]=0;for(a=102971;102973>=a;a++)b[a]=0;for(a=102975;102989>=a;a++)b[a]=0;for(a=102990;102992>=a;a++)b[a]=1;for(a=102997;103002>=a;a++)b[a]=0;for(a=103003;103008>=a;a++)b[a]=2;for(a=103009;103011>=a;a++)b[a]=0;for(a=103012;103014>=a;a++)b[a]=
2;for(a=103019;103021>=a;a++)b[a]=0;for(a=103022;103024>=a;a++)b[a]=2;for(a=103029;103031>=a;a++)b[a]=0;for(a=103032;103034>=a;a++)b[a]=2;for(a=103065;103068>=a;a++)b[a]=0;for(a=103074;103076>=a;a++)b[a]=0;for(a=103077;103079>=a;a++)b[a]=1;for(a=103080;103082>=a;a++)b[a]=0;for(a=103083;103085>=a;a++)b[a]=2;for(a=103090;103093>=a;a++)b[a]=0;for(a=103097;103099>=a;a++)b[a]=0;for(a=103100;103102>=a;a++)b[a]=2;for(a=103107;103109>=a;a++)b[a]=0;for(a=103110;103112>=a;a++)b[a]=2;for(a=103113;103116>=a;a++)b[a]=
0;for(a=103117;103120>=a;a++)b[a]=2;for(a=103153;103157>=a;a++)b[a]=0;for(a=103158;103162>=a;a++)b[a]=2;for(a=103163;103165>=a;a++)b[a]=0;for(a=103166;103168>=a;a++)b[a]=1;for(a=103169;103171>=a;a++)b[a]=2;for(a=103186;103188>=a;a++)b[a]=0;for(a=103189;103191>=a;a++)b[a]=2;for(a=103192;103195>=a;a++)b[a]=0;for(a=103196;103199>=a;a++)b[a]=2;for(a=103200;103224>=a;a++)b[a]=0;for(a=103225;103227>=a;a++)b[a]=1;for(a=103232;103237>=a;a++)b[a]=0;for(a=103238;103243>=a;a++)b[a]=2;for(a=103244;103246>=a;a++)b[a]=
0;for(a=103247;103249>=a;a++)b[a]=2;for(a=103254;103256>=a;a++)b[a]=0;for(a=103257;103259>=a;a++)b[a]=2;for(a=103264;103266>=a;a++)b[a]=0;for(a=103267;103269>=a;a++)b[a]=2;for(a=103300;103375>=a;a++)b[a]=0;for(a=103381;103383>=a;a++)b[a]=0;for(a=103384;103386>=a;a++)b[a]=1;for(a=103387;103389>=a;a++)b[a]=0;for(a=103390;103392>=a;a++)b[a]=2;for(a=103397;103399>=a;a++)b[a]=0;for(a=103400;103471>=a;a++)b[a]=2;for(a=103476;103478>=a;a++)b[a]=0;for(a=103479;103481>=a;a++)b[a]=2;for(a=103486;103488>=a;a++)b[a]=
0;for(a=103489;103491>=a;a++)b[a]=2;for(a=103492;103495>=a;a++)b[a]=0;for(a=103496;103499>=a;a++)b[a]=2;for(a=103528;103543>=a;a++)b[a]=0;for(a=103544;103548>=a;a++)b[a]=2;for(a=103549;103551>=a;a++)b[a]=0;for(a=103552;103554>=a;a++)b[a]=1;for(a=103555;103557>=a;a++)b[a]=2;for(a=103558;103560>=a;a++)b[a]=0;for(a=103571;103573>=a;a++)b[a]=0;for(a=103574;103576>=a;a++)b[a]=2;for(a=103577;103580>=a;a++)b[a]=0;for(a=103581;103583>=a;a++)b[a]=2;for(a=103600;103694>=a;a++)b[a]=0;for(a=103700;103793>=a;a++)b[a]=
2;for(a=103794;103871>=a;a++)b[a]=0;for(a=103900;103971>=a;a++)b[a]=2;return e.WKIDUnitConversion=b})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(a,e,b,c,d){var h={show:function(a){if(a=h.getNode(a))a.style.display="block"},getNode:function(a){return a&&a.domNode||a},hide:function(a){if(a=h.getNode(a))a.style.display="none"},toggle:function(a){if(a=h.getNode(a))a.style.display="none"===a.style.display?"block":"none"},
documentBox:8>=d("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(a){if(a=this.getNode(a)){var b=0,d=0,g=0,h=0,n=0,p=0;return[e.connect(a,"ontouchstart",function(c){b=c.touches[0].screenX;d=c.touches[0].screenY;g=a.scrollWidth;h=a.scrollHeight;n=a.clientWidth;p=a.clientHeight}),e.connect(a,"ontouchmove",function(f){f.preventDefault();var k=a.firstChild;k instanceof Text&&(k=a.childNodes[1]);var l=
k._currentX||0,m=k._currentY||0,l=l+(f.touches[0].screenX-b);0<l?l=0:0>l&&Math.abs(l)+n>g&&(l=-1*(g-n));k._currentX=l;m+=f.touches[0].screenY-d;0<m?m=0:0>m&&Math.abs(m)+p>h&&(m=-1*(h-p));k._currentY=m;c.set(k,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+l+"px, "+m+"px)"});b=f.touches[0].screenX;d=f.touches[0].screenY})]}}};b.mixin(a,h);return h})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(a,e,b,c,d,h,g,f,k,l){var m={},n=f.defaults.io,p=/^[a-z][a-z0-9\+\-\.]*:/i,q=/^\s*http:/i,t=/^\s*https:/i,r=/:\d+$/,u=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;m.isHTTP=function(a){var b=c.location.protocol;return null==a?"http:"===b||"https:"===b:a?"https:"===b:"http:"===b};m.getProtocolForWebResource=function(a){return m.isHTTP()?c.location.protocol:a?"https:":"http:"};m.urlToObject=function(a){var c={},f=new b(a),k=a.indexOf("?");null===f.query?c={path:a,query:null}:(c.path=a.substring(0,
k),c.query=d.queryToObject(f.query));f.fragment&&(c.hash=f.fragment,null===f.query&&(c.path=c.path.substring(0,c.path.length-(f.fragment.length+1))));return c};m.getProxyUrl=function(b,f){var d=a.isString(b)?0===a.trim(b).toLowerCase().indexOf("https:"):b,k=n.proxyUrl,g,h=l.io.proxyNotSet;a.isString(b)&&(b=m.getProxyRule(b))&&(k=b.proxyUrl);if(!k)throw Error(h);d&&!1!==f&&0!==c.location.href.toLowerCase().indexOf("https:")&&(f=k,0!==f.toLowerCase().indexOf("http")&&(f=m.getAbsoluteUrl(f)),f=f.replace(/^http:/i,
"https:"),m.canUseXhr(f)&&(k=f,g=1));k=m.urlToObject(k);k._xo=g;return k};m.addProxy=function(b){var c=m.getProxyRule(b),f;c?f=m.urlToObject(c.proxyUrl):n.alwaysUseProxy&&(f=m.getProxyUrl());f&&(c=m.urlToObject(b),b=f.path+"?"+c.path,(f=d.objectToQuery(a.mixin(f.query||{},c.query)))&&(b+="?"+f));return b};m.addProxyRule=function(a){var b=a.urlPrefix=m.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),c=n.proxyRules,f,d=c.length,k,g=d;for(f=0;f<d;f++)if(k=
c[f].urlPrefix,0===b.indexOf(k)){if(b.length===k)return-1;g=f;break}else 0===k.indexOf(b)&&(g=f+1);c.splice(g,0,a);return g};m.getProxyRule=function(a){var b=n.proxyRules,c=b.length,f=m.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),d;for(a=0;a<c;a++)if(0===f.indexOf(b[a].urlPrefix)){d=b[a];break}return d};m.hasSameOrigin=function(f,d,k){f=f.toLowerCase();d=d.toLowerCase();var g=c.location.href.toLowerCase();f=0===f.indexOf("http")?new b(f):g=new b(g);d=0===
d.indexOf("http")?new b(d):a.isString(g)?new b(g):g;return(k||f.scheme===d.scheme)&&f.host===d.host&&f.port===d.port};m.canUseXhr=function(a,b){var c=k("esri-phonegap")?!0:!1,f=m.hasSameOrigin,d=n.corsEnabledServers,g,l=-1;!c&&k("esri-cors")&&d&&d.length&&(c=e.some(d,function(b,c){b=!b||"object"!==typeof b||b instanceof RegExp?b:b.host;if(b instanceof RegExp){if(b.test(a))return l=c,!0}else if(b&&(g=0!==b.trim().toLowerCase().indexOf("http"),f(a,g?"http://"+b:b)||g&&f(a,"https://"+b)))return l=c,
!0;return!1}));return b?l:c};m.getAbsoluteUrl=function(b){var f=m.getProtocolForWebResource();return a.isString(b)&&!p.test(b)?0===b.indexOf("//")?f+b:0===b.indexOf("/")?f+"//"+c.location.host+b:h._appBaseUrl+b:b};m.fixUrl=function(b){b=a.trim(b);b=m.getAbsoluteUrl(b);b=m.normalizeSlashes(b);b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");b=m.downgradeToHTTP(b);return b=m.upgradeToHTTPS(b)};m.normalize=function(a){return m.fixUrl(a)};m.normalizeSlashes=function(a){if(/^https?:\/\//i.test(a)){var b,
c,f=a.indexOf("?");-1<f?(b=a.slice(0,f),c=a.slice(f+1)):b=a;a=b.replace(/\/{2,}/g,"/");a=a.replace("/","//");c&&(a+="?"+c)}return a};m.downgradeToHTTP=function(a){return m.isHTTP(!1)&&t.test(a)&&m.hasSameOrigin(c.location.href,a,!0)&&!m.canUseXhr(a)?a.replace(t,"http:"):a};m.upgradeToHTTPS=function(b){var f=n.httpsDomains,d=m.isHTTP(!1),k=m.isHTTP(!0);if(!q.test(b))return b;b=a.trim(b);var l=b.indexOf("/",7),l=-1===l?b:b.slice(0,l),l=l.toLowerCase().slice(7);if(r.test(l))if(g.endsWith(l,":80"))l=
l.slice(0,-3),b=b.replace(":80","");else return b;if(d&&l===c.location.host&&(!u.test(b)||!m.canUseXhr(b)))return b;d=!1;if(k&&l===c.location.host)d=!0;else if(f)for(var h=0;h<f.length;h++){var e=f[h];if(l===e||g.endsWith(l,"."+e)){d=!0;break}}d||!k||n.alwaysUseProxy||m.getProxyRule(b)||(d=!0);d&&(b=b.replace(q,"https:"));return b};a.mixin(h,m);h._getProxyUrl=m.getProxyUrl;h._getProxiedUrl=m.addProxy;h._hasSameOrigin=m.hasSameOrigin;h._canDoXOXHR=m.canUseXhr;h._getAbsoluteUrl=m.getAbsoluteUrl;h.fixUrl=
m.fixUrl;return m})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t){var r=a([f],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},
constructor:function(a,f){this._attrs={};a&&c.isString(a)?this._url=p.urlToObject(this.url=a):(this.url=this._url=null,(f=f||a)&&(f.layerDefinition||f.query)&&(f=null));this.spatialReference=new q(4326);this.initialExtent=new t(-180,-90,180,90,new q(4326));this._map=this._div=null;this.normalization=!0;f&&(f.id&&(this.id=f.id),!1===f.visible&&(this.visible=!1),l.isDefined(f.opacity)&&(this.opacity=f.opacity),l.isDefined(f.minScale)&&this.setMinScale(f.minScale),l.isDefined(f.maxScale)&&this.setMaxScale(f.maxScale),
this.attributionDataUrl=f.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,l.isDefined(f.showAttribution)&&(this.showAttribution=f.showAttribution),this.className=f.className,this.refreshInterval=f.refreshInterval||0);this._errorHandler=c.hitch(this,this._errorHandler);this.refresh=c.hitch(this,this.refresh);if(this.managedSuspension){var d=this._setMap;this._setMap=function(a){var c=d.apply(this,arguments);this._fireAttach(a);this.evaluateSuspension();if(this.suspended&&!a.loaded)var f=
b.connect(a,"onLoad",this,function(){b.disconnect(f);f=null;this.evaluateSuspension()});return c}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(a){this.loaded||(this.loadError=a);this.onError(a)},_setMap:function(a,c,f,d){this._map=a;this._lyrZEHandle=b.connect(a,"onZoomEnd",this,this._processMapScale);
if(a.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var k=b.connect(a,"onLoad",this,function(){b.disconnect(k);k=null;this._processMapScale()})},_unsetMap:function(a,c){b.disconnect(this._lyrZEHandle);this._toggleRT();this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(a)},_fireAttach:function(a){this.attached=!0;this.onAttach({map:a})},_fireDetach:function(a){this.attached=!1;this.onDetach({map:a})},_cleanUp:function(){this._map=this._div=
null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(a,b){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(a,b),this._map&&this._map._decr())},_getToken:function(){var a=this._url,b=this.credential;return a&&a.query&&a.query.token||b&&b.token||void 0},_findCredential:function(){this.credential=k.id&&this._url&&k.id.findCredential(this._url.path)},
_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(a){this.setScaleRange(a)},setMaxScale:function(a){this.setScaleRange(null,a)},setScaleRange:function(a,b){var c=l.isDefined(a),f=l.isDefined(b);this.loaded||(this._hasMin=this._hasMin||c,this._hasMax=this._hasMax||f);var d=this.minScale,
k=this.maxScale;this.minScale=(c?a:this.minScale)||0;this.maxScale=(f?b:this.maxScale)||0;if(d!==this.minScale||k!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():
this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this._toggleRT();this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var a=void 0===this._resumedOnce,b=this.className,c=this._attrs,f=this.getNode(),d;if(a){this._resumedOnce=!0;if(b&&f){var k=f.getAttribute("class")||"";(new RegExp("(^|\\s)"+b+"(\\s|$)","i")).test(k)||f.setAttribute("class",k+((k?" ":"")+b))}if(c&&f)for(d in c)c.hasOwnProperty(d)&&
f.setAttribute(d,c[d])}this._toggleRT(!0);this.onResume({firstOccurrence:a});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var a=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();a!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(a){return a?r.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(a,b){if(!(a||this._map&&this._map.loaded))return!1;var c=
this._map;a=a||c.getScale();var f=this.minScale,d=this.maxScale,k=!f,g=!d,l;b&&(l=c.width>c.height?c.width:c.height);k||(a<=f?k=!0:b&&(k=Math.abs(f-a)/f<1/l));g||(a>=d?g=!0:b&&(g=Math.abs(d-a)/d<1/l));return k&&g},getAttributionData:function(){var a=this.attributionDataUrl,b=new d(n._dfdCanceller);this.hasAttributionData&&a?(b._pendingDfd=m({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),b._pendingDfd.then(function(a){b.callback(a)},function(a){b.errback(a)})):(a=Error("Layer does not have attribution data"),
a.log=!!e.isDebug,b.errback(a));return b},getResourceInfo:function(){var a=this.resourceInfo;return c.isString(a)?h.fromJson(a):c.clone(a)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(a,b){var c=this.getNode();if("data-reference"===a&&11>g("ie"))return this;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));this._attrs&&(null==b?delete this._attrs[a]:this._attrs[a]=b);return this},setRefreshInterval:function(a){var b=this.refreshInterval;this.refreshInterval=
a;this._toggleRT();a&&(this.updating||this.suspended||this._toggleRT(!0));if(b!==a)this.onRefreshIntervalChange();return this},_toggleRT:function(a){a&&this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,6E4*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null)},setNormalization:function(a){this.normalization=a},setVisibility:function(a){this.visible!==a&&(this.visible=a,this.onVisibilityChange(this.visible),this.evaluateSuspension());
this.attr("data-hidden",a?null:"")},onLoad:function(){},onAttach:function(a){},onDetach:function(a){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});c.setObject("layers.Layer",r,k);return r})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),
function(a,e,b,c,d,h){a=a([c],{declaredClass:"esri.Evented",registerConnectEvents:function(){var a=this.constructor,b=this.constructor._meta.parents,c=[{}],d={},h,n,p=function(a,b){e.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var f=a[c];f._meta&&f._meta.parents&&p(f._meta.parents,b);f.prototype._eventMap&&b.push(e.mixin({},f.prototype._eventMap))}return b};if(!a._onMap){p(b,c);c.push(this._eventMap);b=e.mixin.apply(this,c);for(h in this)/^on\w/.test(h)&&e.isFunction(this[h])&&(c=this._hyphenLower(h).toLowerCase(),
b[c]||(d[c]={method:h}));for(n in b)h=this._onCamelCase(n),d[n]={method:h,argKeys:b[n]};a._onMap=d;return a._onMap}},on:function(a,c){if(-1<a.indexOf(",")){for(var f=a.split(/\s*,\s*/),d=f.length,g=[];d--;)g.push(this.on(f[d],c));g.remove=function(){for(var a=0;a<g.length;a++)g[a].remove()};return g}var f=this.constructor._onMap||this.registerConnectEvents(),d="string"==typeof a&&a.toLowerCase(),h=this._onCamelCase(d),p=f&&f[d];return(h=p&&p.method||this[h]&&e.isFunction(this[h])&&h)?p&&e.isArray(p.argKeys)?
(f=this._onArr2Obj(c,f[d].argKeys),b.after(this,h,f,!0)):b.after(this,h,function(a){a=a||{};a.target||(a.target=this);c.call(this,a)},!0):this.inherited(arguments)},emit:function(a,b){var c,f,d,g,h=a.toLowerCase();g=this._onCamelCase(a);var q=this.constructor._onMap||this.registerConnectEvents();g=(d=q&&q[h]&&q[h].method||e.isFunction(this[g])&&g)&&this[d];d&&q&&q[h]&&this._onObj2Arr(function(){f=Array.prototype.slice.call(arguments)},q[h].argKeys)(b);b=b||{};b.target||(b.target=this);g&&(c=f&&f.length?
f:[b],c=g.apply(this,c));this.inherited(arguments,[a,b]);return c},_onObj2Arr:function(a,b){if(b){var c=this;return function(f){var d,k=[],g=b.length;for(d=0;d<g;d++)k[d]=f[b[d]];a.apply(c,k)}}return a},_onArr2Obj:function(a,b){if(b){var c=this;return function(){var f,d={},k=arguments.length;for(f=0;f<k;f++)d[b[f]]=arguments[f];d.target||(d.target=c);a.call(c,d)}}return a},_hyphenLower:function(a){return a.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(a,b){return(b?"-":"")+a.toLowerCase()})},
_onCamelCase:function(a){return"on"+a.substr(0,1).toUpperCase()+a.substr(1).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})}});return h.Evented=a})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u){function v(a){a=
new h(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function w(a){return this._xhr?this._xhr.getResponseHeader(a):null}function A(a,b){var f=m.objectToQuery(a.content);f&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+f);if(2E3<a.url.length){if("data:"!==a.url.toLowerCase().slice(0,5))return a=new c,a.reject(d.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),a;if(3E6<a.url.length)return a=new c,a.reject(d.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),
a}var k=new Image;b.allowImageDataAccess&&(k.crossOrigin=a.withCredentials?"use-credentials":"anonymous");var g=!1,l=new c(function(a){g=!0;k.onload=k.onerror=k.onabort=null;k.src=""});b=function(a){k.onload=k.onerror=k.onabort=null;g||l.reject(Error("Unable to load the resource"))};k.onload=function(){k.onload=k.onerror=k.onabort=null;g||l.resolve(this)};k.onerror=b;k.onabort=b;k.alt="";k.src=a.url;return l}function z(a,h,p,v){var w=!1,u=!1,z,y;t.isDefined(h)&&(d.isObject(h)?(w=!!h.useProxy,u=!!h.usePost,
z=h.crossOrigin):w=!!h);a=d.mixin({},a);a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));10>q("ie")&&!R.test(a.url)&&(a.url=encodeURI(a.url));var x=a.content,D=a.url,C=p&&a.form,ea=Q;z=t.isDefined(z)?z:ea.useCors;a.load=function(c){var f;c&&(c.error?(f=d.mixin(Error(),c.error),f.log=!!b.isDebug):"error"===c.status&&(f=d.mixin(Error(),c),f.log=!!b.isDebug),f&&(a.failOk=!f.log,t.isDefined(f.httpCode)||(f.httpCode=f.code)));return f||c};a.error=function(c,f){f&&f.xhr&&f.xhr.abort();c instanceof Error||
(c=d.mixin(Error(),c));c.log=!!b.isDebug;a.failOk=!c.log;ea.errorHandler(c,f);return c};a._token&&(a.content=a.content||{},a.content.token=a._token);var E=0,U;x&&D&&(U=m.objectToQuery(x),E=U.length+D.length+1,q("esri-url-encodes-apostrophe")&&(E=U.replace(/'/g,"%27").length+D.length+1));a.timeout=t.isDefined(a.timeout)?a.timeout:ea.timeout;a.handleAs=a.handleAs||"json";try{var I,xa,K=z&&r.canUseXhr(a.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(a.url),F=r.hasSameOrigin(a.url,window.location.href)||
K,X=u||p||E>ea.postLength?!0:!1,W=F||-1===a.handleAs.indexOf("json")||!a.callbackParamName||p?!1:!0,na=r.getProxyRule(a.url)||ea.alwaysUseProxy||w||!("image"===a.handleAs&&!h.allowImageDataAccess||W&&!X||F)?!0:!1;p&&!q("esri-file-upload")&&!na&&K&&(na=!0);if(na)if(I=r.getProxyUrl(D,z),xa=I.path,I._xo&&(K=!0),!X&&xa.length+1+E>ea.postLength&&(X=!0),a.url=xa+"?"+D,X)a.content=d.mixin(I.query||{},x);else{var Fa=m.objectToQuery(d.mixin(I.query||{},x));Fa&&(a.url+="?"+Fa);a.content=null}if(!W||X||na){var Ya=
a.headers;!K||Ya&&Ya.hasOwnProperty("X-Requested-With")||(Ya=a.headers=Ya||{},Ya["X-Requested-With"]=null);if(p){var Da=a.callbackParamName||"callback.html",pa=a.callbackElementName||"textarea",oa,Aa,Ta,Ja,Ba=C.elements?C.elements.length:0,Ka;if(x=a.content)for(oa in x.token&&-1<D.toLowerCase().indexOf("/sharing/servers/")&&(D+=(-1===D.indexOf("?")?"?":"\x26")+"token\x3d"+x.token,a.url=na?xa+"?"+D:D,delete x.token),x)if(Ta=x[oa],t.isDefined(Ta)){Aa=null;for(Ja=0;Ja<Ba;Ja++)if(Ka=C.elements[Ja],Ka.name===
oa){Aa=Ka;break}Aa?Aa.value=Ta:v?C.append(oa,Ta):C.appendChild(l.create("input",{type:"hidden",name:oa,value:Ta}))}if(q("esri-file-upload")){e.forEach(C.elements,function(a){a.name===Da&&C.removeChild(a)});var va=v?C:new FormData(C);if(11<=q("safari")&&"entries"in va&&"delete"in va){v=[];for(var Ua=va.entries(),Ga=Ua.next();!Ga.done;){var Ha=Ga.value;Ha[1]instanceof File&&""===Ha[1].name&&v.push(Ha[0]);Ga=Ua.next()}v.forEach(function(a){va.delete(a)})}a.contentType=!1;a.postData=va;delete a.form}else{C.enctype=
"multipart/form-data";9>q("ie")&&(C.encoding="multipart/form-data");C.method="post";e.some(C.elements,function(a){return a.name===Da})||C.appendChild(l.create("input",{type:"hidden",name:Da,value:pa}));if(-1!==D.toLowerCase().indexOf("addattachment")||-1!==D.toLowerCase().indexOf("updateattachment"))D+=(-1===D.indexOf("?")?"?":"\x26")+Da+"\x3d"+pa,a.url=na?xa+"?"+D:D;delete a.content}}if(K&&!a.hasOwnProperty("withCredentials")&&"with-credentials"===Q.useCors){var D=na?xa:D,La=r.canUseXhr(D,!0),M=
-1<La?Q.corsEnabledServers[La]:null;if(M&&M.hasOwnProperty("withCredentials"))M.withCredentials&&(a.withCredentials=!0);else if(n.id){var za=n.id.findServerInfo(D);za&&za.webTierAuth&&(a.withCredentials=!0)}}a=H?H(a):a;if("image"===a.handleAs)return A(a,h);if(X){if(p&&!q("esri-file-upload")){y=new c(function(){ma.cancel()});var ma=k.post(a.url,a).then(function(a){y.resolve(a)}).otherwise(function(a){y.reject(a)});y.addCallback(function(b){return a.load(b)});y.addErrback(function(b){return a.error(b)});
return y}!na&&q("safari")&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+G++);return g.post(a)}return g.get(a)}a=H?H(a):a;a.jsonp=a.callbackParamName;a.query=a.content;y=new c(function(){Y.cancel()});var Y=f.get(a.url,a).then(function(a){y.resolve(a)}).otherwise(function(a){y.reject(a)});y.addCallback(function(b){return a.load(b)});y.addErrback(function(b){return a.error(b)});return y}catch(Ma){return y=new c,y.errback(a.error(Ma)),y}}function x(a){var f=Q.corsStatus,
d=r.canUseXhr(a,!0);-1<d&&Q.corsEnabledServers.splice(d,1);var k=new c;k.reject({log:!!b.isDebug});f[v(a)]=k.promise;return d}function y(a){var b=Q.corsStatus;try{var f=v(a);if(Q.corsDetection&&Q.useCors&&q("esri-cors")&&a&&-1!==a.toLowerCase().indexOf("/rest/services")&&!r.hasSameOrigin(a,window.location.href)&&!r.canUseXhr(a)){if(b[f]&&!b[f].isCanceled())return b[f];var d=new c(u._dfdCanceller);b[f]=d.promise;var k=g.get({url:a.substring(0,a.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},
failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*Q.corsDetectionTimeout});d._pendingDfd=k;k.then(function(b){b?(r.canUseXhr(a)||Q.corsEnabledServers.push(f),d.resolve()):d.reject()},function(a){d.reject(a)});return d.promise}}catch(L){}return X}function C(a){H=a}function D(f,k,l,h){function m(a){a._pendingDfd=z(l,h,E,H);if(!a._pendingDfd){a.ioArgs=a._pendingDfd&&a._pendingDfd.ioArgs;var f=Error("Deferred object is missing");f.log=!!b.isDebug;a.errback(f);a._pendingDfd=null;
return a}a._pendingDfd.addCallback(function(f){if(!f)return f;var k=a._pendingDfd&&a._pendingDfd.ioArgs&&a._pendingDfd.ioArgs.xhr;if(!k)return f;if(k=k.getResponseHeader("Content-Type"))if(k=k.toLowerCase(),-1===k.indexOf("text/plain")&&-1===k.indexOf("application/json"))return f;if(f instanceof ArrayBuffer&&750>=f.byteLength)k=new Blob([f]);else if(f instanceof Blob&&750>=f.size)k=f;else return f;var g=new c,l=new FileReader;l.readAsText(k);l.onloadend=function(){var a;if(!l.error)try{var c=JSON.parse(l.result);
c.error&&(a=c.error)}catch(Da){}a?(a=d.mixin(Error(),a),a.log=!!b.isDebug,null==a.httpCode&&(a.httpCode=a.code),g.reject(a)):g.resolve(f)};return g.promise}).addCallback(function(b){a.ioArgs=a._pendingDfd&&a._pendingDfd.ioArgs;h.returnFullResponse&&(b={data:b,_xhr:a.ioArgs&&a.ioArgs.xhr,getHeader:w});a.callback(b);a._pendingDfd=null}).addErrback(function(b){var c,f,d;b&&(c=b.code,f=b.subcode,d=(d=b.messageCode)&&d.toUpperCase());if(b&&403==c&&(4==f||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&
-1===b.message.toLowerCase().indexOf("permission"))){if(!l._ssl){l._ssl=l._sslFromServer=!0;D(a,!0,l,h);return}}else if(b&&415==b.status){if(x(l.url),!l._err415){l._err415=1;D(a,!0,l,h);return}}else if(n.id&&-1!==e.indexOf(n.id._errorCodes,c)&&!n.id._isPublic(l.url)&&!u&&(403!=c||-1===e.indexOf(U,d)&&(!t.isDefined(f)||2==f&&l._token))){a._pendingDfd=n.id.getCredential(l.url,{token:l._token,error:b});a._pendingDfd.addCallback(function(b){l._token=b.token;l._credential=b;l._ssl=l._sslFromServer||b.ssl;
D(a,!0,l,h)}).addErrback(function(b){a.errback(b);a._pendingDfd=null});return}a.ioArgs=a._pendingDfd&&a._pendingDfd.ioArgs;a.isFulfilled()||a.errback(b);a._pendingDfd=null})}var p=l.form,u=h.disableIdentityLookup,A=h._preLookup,y=!1;if(q("esri-workers")&&!1!==Q.useWorkers)if(!0===h.useWorkers||!0===Q.useWorkers)y=!0;else if(h.workerOptions){var C=h.workerOptions;if(C.callback||C.worker&&C.worker.worker instanceof Worker)y=!0}var H=p&&q("esri-file-upload")&&p instanceof FormData,E=p&&(p.elements?e.some(p.elements,
function(a){return"file"===a.type}):H),ea=-1!==l.url.toLowerCase().indexOf("token\x3d")||l.content&&l.content.token||E&&e.some(p.elements,function(a){return"token"===a.name})?1:0;if(!k){f.addCallback(function(a){if((/\/sharing\/rest\/accounts\/self/i.test(l.url)||/\/sharing\/rest\/portals\/self/i.test(l.url))&&!ea&&!l._token&&a.user&&a.user.username){Q.webTierAuthServers.push(v(l.url));a=Q.corsEnabledServers;var b=r.canUseXhr(l.url,!0),c={host:v(l.url),withCredentials:!0};if(-1===b)a.push(c);else{var f=
a[b];f instanceof RegExp?(c.host=f,a.splice(b,1,c)):"object"===typeof f?f.withCredentials=!0:a.splice(b,1,c)}}if(a=l._credential)if(b=(b=n.id.findServerInfo(a.server))&&b.owningSystemUrl)b=b.replace(/\/?$/,"/sharing"),(a=n.id.findCredential(b,a.userId))&&-1===n.id._getIdenticalSvcIdx(b,a)&&a.resources.splice(0,0,b)});f.addBoth(function(a){delete l._credential;!a||q("ie")&&a.nodeType||(a._ssl=l._ssl)});var G=l.load,bb=l.error;G&&f.addCallback(function(a){var b=f._pendingDfd,b=b&&b.ioArgs;return G.call(b&&
b.args,a,b)});bb&&f.addErrback(function(a){var b=f._pendingDfd,b=b&&b.ioArgs;return bb.call(b&&b.args,a,b)})}!n.id||ea||l._token||n.id._isPublic(l.url)||u&&!A||!(k=n.id.findCredential(l.url))||(l._token=k.token,l._ssl=k.ssl);y?h.workerOptions&&h.workerOptions.worker?(I||(I=g),g=h.workerOptions.worker,m(f)):a(["./workers/RequestClient"],function(a){I||(I=g);if(h.workerOptions){var b=h.workerOptions;g=a.getClient(b.callback,b.cbFunction)}else g=a.getClient();m(f)}):(I&&(g=I,I=null),m(f));return f}function E(a,
b){a.url=r.fixUrl(a.url);b=b||{};var f=new c(u._dfdCanceller),d=y(a.url);f._pendingDfd=d;d.always(function(c){c&&"cancel"===c.dojoType?f.reject(c):D(f,!1,a,b)});return f}var I=null,H,Q=p.defaults.io,U=["COM_0056","COM_0057"],G=0,R=/%[0-9A-F]{2}/i,X=function(){var a=new c;a.resolve();return a.promise}();E._makeRequest=z;E._processRequest=D;E._disableCors=x;E._detectCors=y;E.setRequestPreCallback=C;n.request=E;n._makeRequest=z;n._processRequest=D;n._disableCors=x;n._detectCors=y;n.setRequestPreCallback=
C;return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(a,e,b,c,d,h){function g(){var b=document.createElement("iframe");b.name="esri_core_jsonp_iframe";b.style.display="none";b.setAttribute("sandbox","allow-scripts");if(!h("ff")&&"srcdoc"in b){var c=a.toUrl("dojo/dojo.js"),f=d.replace("../../../dojo/dojo.js",c),c=c.slice(0,-7),f=f.replace("../../../dojo/",c);b.srcdoc=f}else f=a.toUrl("./iframe.html"),
"http:"===window.location.protocol&&0===f.indexOf("https:")&&(f=f.replace("https:","http:")),b.src=f;document.body.appendChild(b);return b}function f(){var a=new MessageChannel;a.port1.addEventListener("message",k);a.port1.start();return a}function k(a){var b=a.data;if("ready"===b){for(var b=0,c=t;b<c.length;b++)a=c[b],m(a,p);t=null}else if(a=r[b.id])delete r[b.id],b.isError?a.dfd.reject(Error(b.message)):a.dfd.resolve(b.response)}function l(a,b){a.addEventListener("load",function(){a.contentWindow.postMessage("init",
"*",[b.port2])})}function m(a,b){r[a.message.id]=a;b.port1.postMessage(a.message)}Object.defineProperty(e,"__esModule",{value:!0});var n,p,q=0,t=[],r={};e.get=function(a,d){if(!h("esri-script-sandbox"))return c.get(a,d);var k=null;d&&(k={jsonp:d.jsonp,preventCache:d.preventCache,query:d.query,timeout:d.timeout});d=new b(function(){if(t){var a=t.indexOf(e);-1<a&&t.splice(a,1)}else e.message.id in r&&delete r[e.message.id]});var e={dfd:d,message:{id:"id"+(++q+Math.random()),url:a,options:k}};n||(n=
g(),p=f(),l(n,p));t?t.push(e):m(e,p);return d.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(a,e,b,c,d,h,g,f,k,l,m){function n(a,b){a.canDelete&&u._remove(a.id,b.options.frameDoc,!0)}function p(a){y&&y.length&&(d.forEach(y,function(a){u._remove(a.id,a.frameDoc);a.frameDoc=null}),y=[]);return a.options.jsonp?!a.data:!0}function q(a){return!!this.scriptLoaded}
function t(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function r(a,b){if(this.canDelete){var c=this.response.options;y.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&(c.ioArgs.frameDoc=null);c.frameDoc=null}b?this.reject(b):this.resolve(a)}function u(a,c,f){var d=b.parseArgs(a,b.deepCopy({},c));a=d.url;c=d.options;var k=b.deferred(d,n,p,c.jsonp?null:c.checkString?t:q,r);h.mixin(k,{id:v+w++,canDelete:!1});c.jsonp&&((new RegExp("[?\x26]"+
c.jsonp+"\x3d")).test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+c.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+v+"_callbacks."+k.id),k.canDelete=!0,x[k.id]=function(a){d.data=a;k.handleResponse(d)});b.notify&&b.notify.emit("send",d,k.promise.cancel);if(!c.canAttach||c.canAttach(k)){var l=u._attach(k.id,a,c.frameDoc,function(a){if(!(a instanceof Error)){var b=Error("Error loading "+(a.target?a.target.src:"script"));b.source=a;a=b}k.reject(a);u._remove(k.id,c.frameDoc,!0)});if(!c.jsonp&&!c.checkString)var m=g(l,
A,function(a){if("load"===a.type||z.test(l.readyState))m.remove(),k.scriptLoaded=a})}e(k);return f?k:k.promise}l.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var v=a.id.replace(/[\/\.\-]/g,"_"),w=0,A=l("script-readystatechange")?"readystatechange":"load",z=/complete|loaded/,x=c.global[v+"_callbacks"]={},y=[];u.get=u;u._attach=function(a,b,c,f){c=c||m.doc;
var d=c.createElement("script");if(f)g.once(d,"error",f);d.type="text/javascript";try{d.src=b}catch(Q){f&&f(d)}d.id=a;d.async=!0;d.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(d)};u._remove=function(a,b,c){k.destroy(f.byId(a,b));x[a]&&(c?x[a]=function(){delete x[a]}:delete x[a])};u._callbacksProperty=v+"_callbacks";return u})},"esri/core/sniff":function(){define(["../sniff"],function(a){return a})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n){function p(a){return!this.isFulfilled()}function q(a){return!!this._finished}function t(a,b){if(!b)try{var c=a.options,k=u.doc(u._frame),g=c.handleAs;if("html"!==g){if("xml"===g)if("html"===k.documentElement.tagName.toLowerCase()){f("a",k.documentElement).orphan();var l=k.documentElement.innerText||k.documentElement.textContent,l=l.replace(/>\s+</g,"\x3e\x3c");a.text=h.trim(l)}else a.data=k;else a.text=k.getElementsByTagName("textarea")[0].value;d(a)}else a.data=
k}catch(I){b=I}b?this.reject(b):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function r(a){this._callNext()}function u(a,f,d){var k=c.parseArgs(a,c.deepCreate(A,f),!0);a=k.url;f=k.options;if("GET"!==f.method&&"POST"!==f.method)throw Error(f.method+" not supported by dojo/request/iframe");u._frame||(u._frame=u.create(u._iframeName,w+"();"));a=c.deferred(k,null,p,q,t,r);a._callNext=function(){this._calledNext||(this._calledNext=!0,u._currentDfd=null,
u._fireNextRequest())};a._legacy=d;u._dfdQueue.push(a);u._fireNextRequest();b(a);return d?a:a.promise}var v=a.id.replace(/[\/\.\-]/g,"_"),w=v+"_onload";n.global[w]||(n.global[w]=function(){var a=u._currentDfd;if(a){var b=l.byId(a.response.options.form)||a._tmpForm;if(b){for(var c=a._contentToClean,f=0;f<c.length;f++)for(var d=c[f],k=0;k<b.childNodes.length;k++){var g=b.childNodes[k];if(g.name===d){m.destroy(g);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&
(b.setAttribute("method",a._originalMethod),b.method=a._originalMethod);a._originalTarget&&(b.setAttribute("target",a._originalTarget),b.target=a._originalTarget)}a._tmpForm&&(m.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else u._fireNextRequest()});var A={method:"POST"};u.create=function(a,b,c){if(n.global[a])return n.global[a];if(n.global.frames[a])return n.global.frames[a];c||(k("config-useXDomain")&&k("config-dojoBlankHtmlUrl"),c=k("config-dojoBlankHtmlUrl")||e.toUrl("dojo/resources/blank.html"));
b=m.place('\x3ciframe id\x3d"'+a+'" name\x3d"'+a+'" src\x3d"'+c+'" onload\x3d"'+b+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',n.body());return n.global[a]=b};u.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=n.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(n.doc.frames[b]&&n.doc.frames[b].document)return n.doc.frames[b].document}return null};
u.setSrc=function(a,b,c){a=n.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(C){}};u._iframeName=v+"_IoIframe";u._notifyStart=function(){};u._dfdQueue=[];u._currentDfd=null;u._fireNextRequest=function(){var a;try{if(!u._currentDfd&&u._dfdQueue.length){do a=u._currentDfd=u._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&u._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())u._currentDfd=null;else{var b=a.response,
d=b.options,k=a._contentToClean=[],e=l.byId(d.form),p=c.notify,q=d.data||null,t;a._legacy||"POST"!==d.method||e?"GET"===d.method&&e&&-1<b.url.indexOf("?")&&(t=b.url.slice(b.url.indexOf("?")+1),q=h.mixin(g.queryToObject(t),q)):e=a._tmpForm=m.create("form",{name:v+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},n.body());if(e){if(!a._legacy){var w=e;do w=w.parentNode;while(w&&w!==n.doc.documentElement);w||(e.style.position="absolute",e.style.left="-1000px",e.style.top="-1000px",n.body().appendChild(e));
e.name||(e.name=v+"_form")}if(q){var w=function(a,b){m.create("input",{type:"hidden",name:a,value:b},e);k.push(a)},A;for(A in q){var r=q[A];if(h.isArray(r)&&1<r.length)for(t=0;t<r.length;t++)w(A,r[t]);else{var R=f("input[name\x3d'"+A+"']",e);-1==R.indexOf()?w(A,r):R.val(r)}}}var X=e.getAttributeNode("action"),K=e.getAttributeNode("method"),W=e.getAttributeNode("target");b.url&&(a._originalAction=X?X.value:null,X?X.value=b.url:e.setAttribute("action",b.url));a._legacy?K&&K.value||(K?K.value=d.method:
e.setAttribute("method",d.method)):(a._originalMethod=K?K.value:null,K?K.value=d.method:e.setAttribute("method",d.method));a._originalTarget=W?W.value:null;W?W.value=u._iframeName:e.setAttribute("target",u._iframeName);e.target=u._iframeName;p&&p.emit("send",b,a.promise.cancel);u._notifyStart(b);e.submit()}else d="",b.options.data&&(d=b.options.data,"string"!==typeof d&&(d=g.objectToQuery(d))),w=b.url+(-1<b.url.indexOf("?")?"\x26":"?")+d,p&&p.emit("send",b,a.promise.cancel),u._notifyStart(b),u.setSrc(u._frame,
w,!0)}}}catch(F){a.reject(F)}};c.addCommonMethods(u,["GET","POST"]);return u})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(a,e,b,c,d){function h(a){for(;a.childNodes[0]&&1==a.childNodes[0].nodeType;)a=a.childNodes[0];return a}function g(a,b){"string"==typeof a?(a=c.toDom(a,b&&b.ownerDocument),11==a.nodeType&&(a=a.childNodes[0])):1==a.nodeType&&a.parentNode&&(a=a.cloneNode(!1));return a}var f=a.NodeList;
e.extend(f,{_placeMultiple:function(b,f){b="string"==typeof b||b.nodeType?a(b):b;for(var d=[],k=0;k<b.length;k++)for(var g=b[k],l=this.length,h=l-1,e;e=this[h];h--)0<k&&(e=this._cloneNode(e),d.unshift(e)),h==l-1?c.place(e,g,f):g.parentNode.insertBefore(e,g),g=e;d.length&&(d.unshift(0),d.unshift(this.length-1),Array.prototype.splice.apply(this,d));return this},innerHTML:function(a){return arguments.length?this.addContent(a,"only"):this[0].innerHTML},text:function(a){if(arguments.length){for(var b=
0,c;c=this[b];b++)1==c.nodeType&&d.set(c,"textContent",a);return this}for(var f="",b=0;c=this[b];b++)f+=d.get(c,"textContent");return f},val:function(a){if(arguments.length){for(var c=e.isArray(a),f=0,d;d=this[f];f++){var k=d.nodeName.toUpperCase(),g=d.type,h=c?a[f]:a;if("SELECT"==k)for(k=d.options,g=0;g<k.length;g++){var r=k[g];r.selected=d.multiple?-1!=b.indexOf(a,r.value):r.value==h}else"checkbox"==g||"radio"==g?d.checked=d.value==h:d.value=h}return this}if((d=this[0])&&1==d.nodeType){a=d.value||
"";if("SELECT"==d.nodeName.toUpperCase()&&d.multiple){a=[];k=d.options;for(g=0;g<k.length;g++)r=k[g],r.selected&&a.push(r.value);a.length||(a=null)}return a}},append:function(a){return this.addContent(a,"last")},appendTo:function(a){return this._placeMultiple(a,"last")},prepend:function(a){return this.addContent(a,"first")},prependTo:function(a){return this._placeMultiple(a,"first")},after:function(a){return this.addContent(a,"after")},insertAfter:function(a){return this._placeMultiple(a,"after")},
before:function(a){return this.addContent(a,"before")},insertBefore:function(a){return this._placeMultiple(a,"before")},remove:f.prototype.orphan,wrap:function(a){if(this[0]){a=g(a,this[0]);for(var b=0,c;c=this[b];b++){var f=this._cloneNode(a);c.parentNode&&c.parentNode.replaceChild(f,c);h(f).appendChild(c)}}return this},wrapAll:function(a){if(this[0]){a=g(a,this[0]);this[0].parentNode.replaceChild(a,this[0]);a=h(a);for(var b=0,c;c=this[b];b++)a.appendChild(c)}return this},wrapInner:function(a){if(this[0]){a=
g(a,this[0]);for(var b=0;b<this.length;b++){var c=this._cloneNode(a);this._wrap(e._toArray(this[b].childNodes),null,this._NodeListCtor).wrapAll(c)}}return this},replaceWith:function(a){a=this._normalize(a,this[0]);for(var b=0,c;c=this[b];b++)this._place(a,c,"before",0<b),c.parentNode.removeChild(c);return this},replaceAll:function(b){b=a(b);for(var c=this._normalize(this,this[0]),f=0,d;d=b[f];f++)this._place(c,d,"before",0<f),d.parentNode.removeChild(d);return this},clone:function(){for(var a=[],
b=0;b<this.length;b++)a.push(this._cloneNode(this[b]));return this._wrap(a,this,this._NodeListCtor)}});f.prototype.html||(f.prototype.html=f.prototype.innerHTML);return f})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(a,e,b){e={_dfdCanceller:function(a){a.canceled=!0;var b=a._pendingDfd,c;a.isFulfilled()||!b||b.isFulfilled()||(b.cancel(),c=b.results&&b.results[1]);a._pendingDfd=null;return c},_fixDfd:function(a){var b=a.then;a.then=function(a,c,f){if(a){var d=
a;a=function(a){return a&&a._argsArray?d.apply(null,a):d(a)}}return b.call(this,a,c,f)};return a},_resDfd:function(a,b,h){var c=b.length;1===c?h?a.errback(b[0]):a.callback(b[0]):1<c?(b._argsArray=!0,a.callback(b)):a.callback()}};a.mixin(b,e);return e})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(a,e,b,c,d,h,g,f,k){a=a(null,{declaredClass:"esri.layers.TileInfo",
constructor:function(a){e.mixin(this,a);this.width=this.cols;this.height=this.rows;this._levelToLOD={};a=this.spatialReference;var c=this.origin;a&&(a=this.spatialReference=new g(a.toJson?a.toJson():a));c&&(this.origin=new f(c.toJson?c.toJson():c),!c.spatialReference&&a&&this.origin.setSpatialReference(new g(a.toJson())));this.lods=b.map(this.lods,function(a){return new k(a)});b.forEach(this.lods,function(a){this._levelToLOD[a.level]=a},this);a=!1;var c=this.spatialReference,d=this.origin;if(c&&d){var l=
c._getInfo();l&&(a=c._isWrappable()&&Math.abs(l.origin[0]-d.x)<=l.dx)}this.isWrappable=a;this._initializeUpsampleLevels()},toJson:function(){return h.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&b.map(this.lods,function(a){return a.toJson()})})},lodAt:function(a){return this._levelToLOD&&this._levelToLOD[a]||
null},updateTileInfo:function(a){var b=this.lodAt(a.level),c=b.resolution*this.width,b=b.resolution*this.height;a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=[0,0,0,0]);a.extent[0]=this.origin.x+a.col*c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+b},upsampleTile:function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);
return!0},_initializeUpsampleLevels:function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<a.length;c++){var f=a[c];this._upsampleLevels[f.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/f.resolution:0};b=f}}});e.setObject("layers.TileInfo",a,d);return a})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(a,e,b,c,d){a=a(null,{declaredClass:"esri.layers.LOD",constructor:function(a){e.mixin(this,a)},toJson:function(){return d.fixJson({level:this.level,
levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});e.setObject("layers.LOD",a,c);return a})},"esri/layers/unitBezier":function(){define([],function(){var a=function(a,c,d,h){function b(a,b){var c,d,g,h;b=null==b?1E-6:b;g=a;for(d=0;8>d;d++){h=((l*g+k)*g+f)*g-a;if(Math.abs(h)<b)return g;c=(3*l*g+2*k)*g+f;if(1E-6>Math.abs(c))break;g-=h/c}c=0;d=1;g=a;if(g<c)return c;if(g>d)return d;for(;c<d;){h=((l*g+k)*g+f)*g;if(Math.abs(h-a)<b)break;a>h?c=g:d=g;g=.5*(d-c)+c}return g}var f=3*
a,k=3*(d-a)-f,l=1-f-k,m=3*c,n=3*(h-c)-m,e=1-m-n;return function(a,c){a=b(a,c);return((e*a+n)*a+m)*a}},e=/^cubic-bezier\((.*)\)/;a.parse=function(b){var c=a[b]||null;!c&&(b=e.exec(b))&&(b=b[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==b.length||b.some(function(a){return isNaN(a)})||(c=a.apply(a,b)));return c};a.ease=a(.25,.1,.25,1);a.linear=a(0,0,1,1);a.easeIn=a["ease-in"]=a(.42,0,1,1);a.easeOut=a["ease-out"]=a(0,0,.58,1);a.easeInOut=a["ease-in-out"]=a(.42,0,.58,1);return a})},"esri/layers/vectorTiles/request":function(){define(["require",
"exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(a,e,b,c,d){return function(a,g){a=c.mixin({},{url:a,failOk:!0},g);"array-buffer"===g.responseType?(a.handleAs="arraybuffer",delete a.responseType):g.responseType&&(a.handleAs=g.responseType,delete a.responseType);null!==g.query&&(a.content=a.query,delete a.query);var f;g.hasOwnProperty("allowImageDataAccess")&&(f={allowImageDataAccess:g.allowImageDataAccess},delete a.allowImageDataAccess);var k,h=new d(function(){k.isFulfilled()||
k.cancel()});k=b(a,f).then(function(a){h.resolve({data:a})}).catch(function(a){a&&null!=a.httpCode&&(a.details=a.details||{},a.details.httpStatus=a.httpCode);h.reject(a)});return h.promise}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(a,e,b,c,d,h){function g(a){if(a){if("function"!==typeof a.forEach){var c=Object.keys(a),f=c.map(function(b){return a[b]});return g(f).then(function(a){var b={};
c.forEach(function(c,f){return b[c]=a[f]});return b})}var d=new b,h=[],e=a.length;0===e&&d.resolve(h);a.forEach(function(a){var b={promise:a};h.push(b);a.then(function(a){b.value=a}).catch(function(a){b.error=a}).then(function(){--e;0===e&&d.resolve(h)})});return d.promise}}Object.defineProperty(e,"__esModule",{value:!0});e.all=function(a){return d(a)};e.filter=function(a,b){var c=a.slice();return d(a.map(function(a,c){return b(a,c)})).then(function(a){return c.filter(function(b,c){return a[c]})})};
e.eachAlways=g;e.create=function(a,d){var f=new b(d);a(function(a){void 0===a&&(a=null);return c(a).then(f.resolve)},f.reject);return f.promise};e.reject=function(a){var c=new b;c.reject(a);return c.promise};e.resolve=function(a){void 0===a&&(a=null);var c=new b;c.resolve(a);return c.promise};e.after=function(a,c){void 0===c&&(c=null);var f=0,d=new b(function(){f&&(clearTimeout(f),f=0)}),f=setTimeout(function(){d.resolve(c)},a);return d.promise};e.timeout=function(a,c,d){var f=0,g=new b(a.cancel);
a.then(function(a){g.isFulfilled()||(g.resolve(a),f&&(clearTimeout(f),f=0))});a.catch(function(a){g.isFulfilled()||(g.reject(a),f&&(clearTimeout(f),f=0))});f=setTimeout(function(){var a=d||new h("promiseUtils:timeout","The wrapped promise did not resolve within "+c+" ms");g.reject(a)},c);return g.promise};e.wrapCallback=function(a){var c=!1,f=new b(function(){return c=!0});a(function(a){c||f.resolve(a)});return f.promise};e.isThenable=function(a){return a&&"function"===typeof a.then};e.when=function(a){return c(a)}})},
"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(a,e,b,c){var d=a.some;return function(a){var g,f;e.isArray(a)?f=a:a&&"object"===typeof a&&(g=a);var k,h=[];if(g){f=[];for(var m in g)Object.hasOwnProperty.call(g,m)&&(h.push(m),f.push(g[m]));k={}}else f&&(k=[]);if(!f||!f.length)return(new b).resolve(k);var n=new b;n.promise.always(function(){k=h=null});var p=f.length;d(f,function(a,b){g||h.push(b);c(a,function(a){n.isFulfilled()||(k[h[b]]=a,0===
--p&&n.resolve(k))},n.reject);return n.isFulfilled()});return n.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(a,e,b,c,d){a=function(a){function d(b,c,g){var f=a.call(this,b,c,g)||this;return f instanceof d?f:new d(b,c,g)}b(d,a);d.prototype.toJSON=function(){return{name:this.name,message:this.message,details:c.clone(this.details),dojoType:this.dojoType}};d.fromJSON=function(a){var b=new d(a.name,a.message,
a.details);null!=a.dojoType&&(b.dojoType=a.dojoType);return b};return d}(d);a.prototype.type="error";return a})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(e,b){function c(){this.constructor=e}a(e,b);e.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}()})},
"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(a,e,b,c,d,h){function g(a){return void 0!==a&&null!==a}function f(a){return g(a)?a:""}function k(a,k,h){var l=h.match(/([^\(]+)(\([^\)]+\))?/i),m=e.trim(l[1]);h=k[a];var l=JSON.parse((l[2]?e.trim(l[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,
'"$1')),p=l.utcOffset;if(-1===n.indexOf(m))m=e.getObject(m),e.isFunction(m)&&(h=m(h,a,k,l));else if("number"===typeof h||"string"===typeof h&&h&&!isNaN(Number(h)))switch(h=Number(h),m){case "NumberFormat":a=e.mixin({},l);k=parseFloat(a.places);if(isNaN(k)||0>k)a.places=Infinity;return c.format(h,a);case "DateString":h=new Date(h);if(l.local||l.systemLocale)return l.systemLocale?h.toLocaleDateString()+(l.hideTime?"":" "+h.toLocaleTimeString()):h.toDateString()+(l.hideTime?"":" "+h.toTimeString());
h=h.toUTCString();l.hideTime&&(h=h.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return h;case "DateFormat":return h=new Date(h),g(p)&&(h=b.add(h,"minute",h.getTimezoneOffset()-p)),d.format(h,l)}return f(h)}function l(a,b){var c;if(b)for(c in a)a.hasOwnProperty(c)&&(void 0===a[c]?delete a[c]:a[c]instanceof Object&&l(a[c],!0));else for(c in a)a.hasOwnProperty(c)&&void 0===a[c]&&delete a[c];return a}function m(a){if(!a||"object"!=typeof a||e.isFunction(a))return a;if(a instanceof Int8Array||a instanceof
Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Date)return new a.constructor(a);if(a instanceof ArrayBuffer)return a.slice(0,a.byteLength);if("function"===typeof a.clone)a=a.clone();else if("function"===typeof a.map&&"function"===typeof a.forEach)a=a.map(m);else if("function"===typeof a.notifyChange&&"function"===typeof a.watch)a=a.clone();
else{var b={},c,f,d={};for(c in a){f=a[c];var g=!(c in d)||d[c]!==f;if(!(c in b)||b[c]!==f&&g)b[c]=m?m(f):f}a=b}return a}var n=["NumberFormat","DateString","DateFormat"],p=/<\/?[^>]+>/g;return{equals:function(a,b){return a===b||"number"===typeof a&&isNaN(a)&&"number"===typeof b&&isNaN(b)||e.isFunction((a||{}).getTime)&&e.isFunction((b||{}).getTime)&&a.getTime()==b.getTime()||e.isFunction((a||{}).equals)&&a.equals(b)||e.isFunction((b||{}).equals)&&b.equals(a)||!1},mixin:e.mixin,valueOf:function(a,
b){for(var c in a)if(a[c]==b)return c;return null},stripTags:function(a){if(a){var b=typeof a;if("string"===b)a=a.replace(p,"");else if("object"===b)for(var c in a)(b=a[c])&&"string"===typeof b&&(b=b.replace(p,"")),a[c]=b}return a},substitute:function(a,b,c){var d,l,m;g(c)&&(e.isObject(c)?(d=c.first,l=c.dateFormat,m=c.numberFormat):d=c);if(b&&"{*}"!==b)return e.replace(b,e.hitch({obj:a},function(a,b){a=b.split(":");return 1<a.length?(b=a[0],a.shift(),k(b,this.obj,a.join(":"))):l&&-1!==(l.properties||
[]).indexOf(b)?k(b,this.obj,l.formatter||"DateString"):m&&-1!==(m.properties||[]).indexOf(b)?k(b,this.obj,m.formatter||"NumberFormat"):f(this.obj[b])}));b=[];var n;b.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+h.fieldsSummary+'"\x3e\x3ctbody\x3e');for(n in a)if(c=a[n],l&&-1!==(l.properties||[]).indexOf(n)?c=k(n,a,l.formatter||"DateString"):m&&-1!==(m.properties||[]).indexOf(n)&&(c=k(n,a,m.formatter||"NumberFormat")),b.push("\x3ctr\x3e\x3cth\x3e"+n+"\x3c/th\x3e\x3ctd\x3e"+f(c)+"\x3c/td\x3e\x3c/tr\x3e"),
d)break;b.push("\x3c/tbody\x3e\x3c/table\x3e");return b.join("")},filter:function(b,c,f){c=[e.isString(b)?b.split(""):b,f||a.global,e.isString(c)?new Function("item","index","array",c):c];f={};var d;b=c[0];for(d in b)c[2].call(c[d],b[d],d,b)&&(f[d]=b[d]);return f},startsWith:function(a,b,c){c=c||0;return a.indexOf(b,c)===c},endsWith:function(a,b,c){if("number"!==typeof c||!isFinite(c)||Math.floor(c)!==c||c>a.length)c=a.length;c-=b.length;a=a.indexOf(b,c);return-1!==a&&a===c},isDefined:g,fixJson:l,
clone:m}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(a,e,b){return function(){function a(c,h,g){this instanceof a&&(this.name=c,this.message=h&&b.substitute(h,g,function(a){return null==a?"":a})||"",this.details=g)}a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(a,e,b,c){function d(a){return b.normalize(a)}
function h(a){return"data:"===a.slice(0,5)}function g(a){return f(a)||v.test(a)}function f(a){return a&&"/"===a[0]&&"/"===a[1]}function k(a){return b.urlToObject(a)}function l(a){if("string"===typeof a)return new c(n(a));a.scheme||(a.scheme=e.appUrl.scheme);return a}function m(a){if(h(a))return null;var b=a.indexOf("://");if(-1===b&&f(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);return-1===b?a:a.slice(0,b)}function n(a,b,c){void 0===b&&(b=e.appBaseUrl);if(f(a))return c&&c.preserveProtocolRelative?
a:"http"===e.appUrl.scheme&&e.appUrl.authority===m(a).slice(2)?"http:"+a:"https:"+a;if(v.test(a))return a;c=q;if("/"===a[0]){var d=b.indexOf("//"),d=b.indexOf("/",d+2);b=-1===d?b:b.slice(0,d)}return c(b,a)}function p(a,b,c){void 0===c&&(c=!1);a=l(a);b=l(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function q(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(g(a[0])){var c=a[0],f=c.indexOf("//");b.push(c.slice(0,
f+1));u.test(a[0])&&(b[0]+="/");a[0]=c.slice(f+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)f=a[c],".."===f&&0<b.length?b.pop():!f||"."===f&&0!==b.length||b.push(f);return b.join("/")}}function t(a,b,c){if(!(b&&c&&a&&g(a)))return a;var f=a.indexOf("//"),d=a.indexOf("/",f+2),k=a.indexOf(":",f+2),d=Math.min(0>d?a.length:d,0>k?a.length:k);if(a.slice(f+2,d).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,f+2);a=a.slice(d);
return""+b+c+a}function r(a,b,c){void 0===b&&(b=e.appBaseUrl);if(!g(a))return a;var f=d(a),k=f.toLowerCase();b=d(b).toLowerCase().replace(/\/+$/,"");if((c=c?d(c).toLowerCase().replace(/\/+$/,""):null)&&0!==b.indexOf(c))return a;for(var h=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},l=h(k,"/",k.indexOf("//")+2),m=-1;k.slice(0,l+1)===b.slice(0,l)+"/";){m=l+1;if(l===k.length)break;l=h(k,"/",l+1)}if(-1===m||c&&m<c.length)return a;a=f.slice(m);f=b.slice(m-1).replace(/[^/]+/g,"").length;if(0<
f)for(k=0;k<f;k++)a="../"+a;else a="./"+a;return a}Object.defineProperty(e,"__esModule",{value:!0});e.normalize=d;e.canUseXhr=function(a){return b.canUseXhr(a)};e.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a=Function("return this")();e.appUrl=new c(a.location);e.appBaseUrl=function(){var a=e.appUrl.path,a=a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-1]));return""+(e.appUrl.scheme+"://"+e.appUrl.host+(null!=e.appUrl.port?":"+e.appUrl.port:""))+a}();var u=/^\s*file:/i,
v=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;e.isDataProtocol=h;e.isAbsolute=g;e.isProtocolRelative=f;e.urlToObject=k;e.getOrigin=m;e.makeAbsolute=n;e.hasSameOrigin=p;e.join=q;e.removeFile=function(a){var b=0;if(g(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};e.addProxy=function(a){return b.addProxy(a)};e.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};var w=/^data:(.*?)(;base64)?,(.*)$/;e.dataComponents=
function(a){return(a=a.match(w))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null};e.changeDomain=t;e.read=function(a,b){var c=b&&b.url&&b.url.path;a&&c&&(a=n(a,c,{preserveProtocolRelative:!0}));(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?(c=b.urlKey+"."+b.customBaseUrl,b=p(e.appUrl,e.appUrl.scheme+"://"+c)?t(a,b.portalHostname,c):t(a,c,b.portalHostname)):b=a;return b};e.write=function(a,b){if(!a)return a;!g(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=n(a);if(b){var f=
b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;f&&(c=r(c,f,f),c!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}a=c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?t(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;return c};e.makeRelative=r;e.removeQueryParameters=function(a){a=k(a);Object.keys(a.query||{});return a.path}})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports",
"./WKIDUnitConversion"],function(a,e,b){function c(a){return a.wkid&&!0===d[a.wkid]}Object.defineProperty(e,"__esModule",{value:!0});var d={102113:!0,102100:!0,3857:!0,3785:!0},h={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};a=[-2.0037508342788905E7,2.0037508342788905E7];var g=[-2.0037508342787E7,2.0037508342787E7],f={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:g,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:g,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:g,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:g,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};e.equals=function(a,b){if(b){if(a===b)return!0;if(null!=a.wkid||null!=b.wkid)return a.wkid===b.wkid||c(a)&&c(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid;if(a.wkt&&b.wkt)return a.wkt.toUpperCase()===b.wkt.toUpperCase()}return!1};e.getInfo=function(a){return a.wkid?f[a.wkid]:null};e.isGeographic=function(a){return a.wkid?null==b[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1};e.isWGS84=function(a){return 4326===
a.wkid};e.isWebMercator=c;e.isWrappable=function(a){return a.wkid&&!0===h[a.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,e={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)e[a]=0;for(a=2056;2065>=a;a++)e[a]=0;for(a=2067;2135>=a;a++)e[a]=0;for(a=2137;2154>=a;a++)e[a]=0;for(a=2161;2170>=a;a++)e[a]=0;for(a=2172;2193>=a;a++)e[a]=0;for(a=2195;2198>=a;a++)e[a]=0;for(a=2200;2203>=a;a++)e[a]=0;for(a=2205;2217>=a;a++)e[a]=0;for(a=2222;2224>=a;a++)e[a]=1;for(a=2225;2250>=a;a++)e[a]=2;
for(a=2251;2253>=a;a++)e[a]=1;for(a=2257;2264>=a;a++)e[a]=2;for(a=2274;2279>=a;a++)e[a]=2;for(a=2280;2282>=a;a++)e[a]=1;for(a=2283;2289>=a;a++)e[a]=2;for(a=2290;2292>=a;a++)e[a]=0;for(a=2308;2313>=a;a++)e[a]=0;for(a=2315;2491>=a;a++)e[a]=0;for(a=2494;2866>=a;a++)e[a]=0;for(a=2867;2869>=a;a++)e[a]=1;for(a=2870;2888>=a;a++)e[a]=2;for(a=2891;2895>=a;a++)e[a]=2;for(a=2896;2898>=a;a++)e[a]=1;for(a=2902;2908>=a;a++)e[a]=2;for(a=2915;2920>=a;a++)e[a]=2;for(a=2921;2923>=a;a++)e[a]=1;for(a=2924;2930>=a;a++)e[a]=
2;for(a=2931;2962>=a;a++)e[a]=0;for(a=2964;2968>=a;a++)e[a]=2;for(a=2969;2973>=a;a++)e[a]=0;for(a=2975;2991>=a;a++)e[a]=0;for(a=2995;3051>=a;a++)e[a]=0;for(a=3054;3079>=a;a++)e[a]=0;for(a=3081;3088>=a;a++)e[a]=0;for(a=3092;3101>=a;a++)e[a]=0;for(a=3106;3138>=a;a++)e[a]=0;for(a=3146;3151>=a;a++)e[a]=0;for(a=3153;3166>=a;a++)e[a]=0;for(a=3168;3172>=a;a++)e[a]=0;for(a=3174;3203>=a;a++)e[a]=0;for(a=3294;3358>=a;a++)e[a]=0;for(a=3367;3403>=a;a++)e[a]=0;for(a=3408;3416>=a;a++)e[a]=0;for(a=3417;3438>=a;a++)e[a]=
2;for(a=3441;3446>=a;a++)e[a]=2;for(a=3447;3450>=a;a++)e[a]=0;for(a=3451;3459>=a;a++)e[a]=2;for(a=3460;3478>=a;a++)e[a]=0;for(a=3554;3559>=a;a++)e[a]=0;for(a=3560;3570>=a;a++)e[a]=2;for(a=3571;3581>=a;a++)e[a]=0;for(a=3594;3597>=a;a++)e[a]=0;for(a=3601;3604>=a;a++)e[a]=0;for(a=3637;3639>=a;a++)e[a]=0;for(a=3665;3667>=a;a++)e[a]=0;for(a=3693;3695>=a;a++)e[a]=0;for(a=3701;3727>=a;a++)e[a]=0;for(a=3728;3739>=a;a++)e[a]=2;for(a=3740;3751>=a;a++)e[a]=0;for(a=3753;3760>=a;a++)e[a]=2;for(a=3761;3773>=a;a++)e[a]=
0;for(a=3775;3777>=a;a++)e[a]=0;for(a=3779;3781>=a;a++)e[a]=0;for(a=3783;3785>=a;a++)e[a]=0;for(a=3788;3791>=a;a++)e[a]=0;for(a=3797;3802>=a;a++)e[a]=0;for(a=3814;3816>=a;a++)e[a]=0;for(a=3825;3829>=a;a++)e[a]=0;for(a=3832;3841>=a;a++)e[a]=0;for(a=3844;3852>=a;a++)e[a]=0;for(a=3873;3885>=a;a++)e[a]=0;for(a=3890;3893>=a;a++)e[a]=0;for(a=3907;3912>=a;a++)e[a]=0;for(a=3942;3950>=a;a++)e[a]=0;for(a=3968;3970>=a;a++)e[a]=0;for(a=3973;3976>=a;a++)e[a]=0;for(a=3986;3989>=a;a++)e[a]=0;for(a=3994;3997>=a;a++)e[a]=
0;for(a=4048;4051>=a;a++)e[a]=0;for(a=4056;4063>=a;a++)e[a]=0;for(a=4093;4096>=a;a++)e[a]=0;for(a=4390;4398>=a;a++)e[a]=0;for(a=4399;4413>=a;a++)e[a]=2;for(a=4418;4433>=a;a++)e[a]=2;for(a=4455;4457>=a;a++)e[a]=2;for(a=4484;4489>=a;a++)e[a]=0;for(a=4491;4554>=a;a++)e[a]=0;for(a=4568;4589>=a;a++)e[a]=0;for(a=4652;4656>=a;a++)e[a]=0;for(a=4766;4800>=a;a++)e[a]=0;for(a=5014;5016>=a;a++)e[a]=0;for(a=5069;5072>=a;a++)e[a]=0;for(a=5105;5130>=a;a++)e[a]=0;for(a=5173;5188>=a;a++)e[a]=0;for(a=5253;5259>=a;a++)e[a]=
0;for(a=5269;5275>=a;a++)e[a]=0;for(a=5292;5311>=a;a++)e[a]=0;for(a=5329;5331>=a;a++)e[a]=0;for(a=5343;5349>=a;a++)e[a]=0;for(a=5355;5357>=a;a++)e[a]=0;for(a=5387;5389>=a;a++)e[a]=0;for(a=5459;5463>=a;a++)e[a]=0;for(a=5479;5482>=a;a++)e[a]=0;for(a=5518;5520>=a;a++)e[a]=0;for(a=5530;5539>=a;a++)e[a]=0;for(a=5550;5552>=a;a++)e[a]=0;for(a=5562;5583>=a;a++)e[a]=0;for(a=5623;5625>=a;a++)e[a]=2;for(a=5631;5639>=a;a++)e[a]=0;for(a=5649;5653>=a;a++)e[a]=0;for(a=5663;5680>=a;a++)e[a]=0;for(a=5682;5685>=a;a++)e[a]=
0;for(a=5875;5877>=a;a++)e[a]=0;for(a=5921;5940>=a;a++)e[a]=0;for(a=6050;6125>=a;a++)e[a]=0;for(a=6244;6275>=a;a++)e[a]=0;for(a=6328;6348>=a;a++)e[a]=0;for(a=6350;6356>=a;a++)e[a]=0;for(a=6366;6372>=a;a++)e[a]=0;for(a=6381;6387>=a;a++)e[a]=0;for(a=6393;6404>=a;a++)e[a]=0;for(a=6480;6483>=a;a++)e[a]=0;for(a=6511;6514>=a;a++)e[a]=0;for(a=6579;6581>=a;a++)e[a]=0;for(a=6619;6624>=a;a++)e[a]=0;for(a=6625;6627>=a;a++)e[a]=2;for(a=6628;6632>=a;a++)e[a]=0;for(a=6634;6637>=a;a++)e[a]=0;for(a=6669;6692>=a;a++)e[a]=
0;for(a=6707;6709>=a;a++)e[a]=0;for(a=6720;6723>=a;a++)e[a]=0;for(a=6732;6738>=a;a++)e[a]=0;for(a=6931;6933>=a;a++)e[a]=0;for(a=6956;6959>=a;a++)e[a]=0;for(a=7005;7007>=a;a++)e[a]=0;for(a=7057;7070>=a;a++)e[a]=2;for(a=7074;7082>=a;a++)e[a]=0;for(a=7109;7118>=a;a++)e[a]=0;for(a=7119;7127>=a;a++)e[a]=1;for(a=7374;7376>=a;a++)e[a]=0;for(a=7528;7586>=a;a++)e[a]=0;for(a=7587;7645>=a;a++)e[a]=2;for(a=7755;7787>=a;a++)e[a]=0;for(a=7791;7795>=a;a++)e[a]=0;for(a=7799;7801>=a;a++)e[a]=0;for(a=7803;7805>=a;a++)e[a]=
0;for(a=7825;7831>=a;a++)e[a]=0;for(a=7845;7859>=a;a++)e[a]=0;for(a=8013;8032>=a;a++)e[a]=0;for(a=20002;20032>=a;a++)e[a]=0;for(a=20062;20092>=a;a++)e[a]=0;for(a=20135;20138>=a;a++)e[a]=0;for(a=20248;20258>=a;a++)e[a]=0;for(a=20348;20358>=a;a++)e[a]=0;for(a=20436;20440>=a;a++)e[a]=0;for(a=20822;20824>=a;a++)e[a]=0;for(a=20934;20936>=a;a++)e[a]=0;for(a=21035;21037>=a;a++)e[a]=0;for(a=21095;21097>=a;a++)e[a]=0;for(a=21148;21150>=a;a++)e[a]=0;for(a=21413;21423>=a;a++)e[a]=0;for(a=21473;21483>=a;a++)e[a]=
0;for(a=21780;21782>=a;a++)e[a]=0;for(a=21891;21894>=a;a++)e[a]=0;for(a=21896;21899>=a;a++)e[a]=0;for(a=22171;22177>=a;a++)e[a]=0;for(a=22181;22187>=a;a++)e[a]=0;for(a=22191;22197>=a;a++)e[a]=0;for(a=22234;22236>=a;a++)e[a]=0;for(a=22521;22525>=a;a++)e[a]=0;for(a=22991;22994>=a;a++)e[a]=0;for(a=23028;23038>=a;a++)e[a]=0;for(a=23830;23853>=a;a++)e[a]=0;for(a=23866;23872>=a;a++)e[a]=0;for(a=23877;23884>=a;a++)e[a]=0;for(a=23886;23894>=a;a++)e[a]=0;for(a=23946;23948>=a;a++)e[a]=0;for(a=24311;24313>=
a;a++)e[a]=0;for(a=24342;24347>=a;a++)e[a]=0;for(a=24370;24374>=a;a++)e[a]=10;for(a=24375;24381>=a;a++)e[a]=0;for(a=24718;24721>=a;a++)e[a]=0;for(a=24817;24821>=a;a++)e[a]=0;for(a=24877;24882>=a;a++)e[a]=0;for(a=24891;24893>=a;a++)e[a]=0;for(a=25391;25395>=a;a++)e[a]=0;for(a=25828;25838>=a;a++)e[a]=0;for(a=26191;26195>=a;a++)e[a]=0;for(a=26391;26393>=a;a++)e[a]=0;for(a=26701;26722>=a;a++)e[a]=0;for(a=26729;26799>=a;a++)e[a]=2;for(a=26801;26803>=a;a++)e[a]=2;for(a=26811;26813>=a;a++)e[a]=2;for(a=26847;26870>=
a;a++)e[a]=2;for(a=26891;26899>=a;a++)e[a]=0;for(a=26901;26923>=a;a++)e[a]=0;for(a=26929;26946>=a;a++)e[a]=0;for(a=26948;26998>=a;a++)e[a]=0;for(a=27037;27040>=a;a++)e[a]=0;for(a=27205;27232>=a;a++)e[a]=0;for(a=27258;27260>=a;a++)e[a]=0;for(a=27391;27398>=a;a++)e[a]=0;for(a=27561;27564>=a;a++)e[a]=0;for(a=27571;27574>=a;a++)e[a]=0;for(a=27581;27584>=a;a++)e[a]=0;for(a=27591;27594>=a;a++)e[a]=0;for(a=28191;28193>=a;a++)e[a]=0;for(a=28348;28358>=a;a++)e[a]=0;for(a=28402;28432>=a;a++)e[a]=0;for(a=28462;28492>=
a;a++)e[a]=0;for(a=29118;29122>=a;a++)e[a]=0;for(a=29168;29172>=a;a++)e[a]=0;for(a=29177;29185>=a;a++)e[a]=0;for(a=29187;29195>=a;a++)e[a]=0;for(a=29900;29903>=a;a++)e[a]=0;for(a=30161;30179>=a;a++)e[a]=0;for(a=30491;30494>=a;a++)e[a]=0;for(a=30729;30732>=a;a++)e[a]=0;for(a=31251;31259>=a;a++)e[a]=0;for(a=31265;31268>=a;a++)e[a]=0;for(a=31275;31279>=a;a++)e[a]=0;for(a=31281;31297>=a;a++)e[a]=0;for(a=31461;31469>=a;a++)e[a]=0;for(a=31491;31495>=a;a++)e[a]=0;for(a=31917;31922>=a;a++)e[a]=0;for(a=31965;32E3>=
a;a++)e[a]=0;for(a=32001;32003>=a;a++)e[a]=2;for(a=32005;32031>=a;a++)e[a]=2;for(a=32033;32060>=a;a++)e[a]=2;for(a=32064;32067>=a;a++)e[a]=2;for(a=32074;32077>=a;a++)e[a]=2;for(a=32081;32086>=a;a++)e[a]=0;for(a=32107;32130>=a;a++)e[a]=0;for(a=32133;32158>=a;a++)e[a]=0;for(a=32164;32167>=a;a++)e[a]=2;for(a=32180;32199>=a;a++)e[a]=0;for(a=32201;32260>=a;a++)e[a]=0;for(a=32301;32360>=a;a++)e[a]=0;for(a=32601;32662>=a;a++)e[a]=0;for(a=32664;32667>=a;a++)e[a]=2;for(a=32701;32761>=a;a++)e[a]=0;for(a=53001;53004>=
a;a++)e[a]=0;for(a=53008;53019>=a;a++)e[a]=0;for(a=53021;53032>=a;a++)e[a]=0;for(a=53042;53046>=a;a++)e[a]=0;for(a=53074;53080>=a;a++)e[a]=0;for(a=54001;54004>=a;a++)e[a]=0;for(a=54008;54019>=a;a++)e[a]=0;for(a=54021;54032>=a;a++)e[a]=0;for(a=54042;54046>=a;a++)e[a]=0;for(a=54048;54053>=a;a++)e[a]=0;for(a=54074;54080>=a;a++)e[a]=0;for(a=102001;102040>=a;a++)e[a]=0;for(a=102042;102063>=a;a++)e[a]=0;for(a=102065;102067>=a;a++)e[a]=0;for(a=102070;102117>=a;a++)e[a]=0;for(a=102122;102216>=a;a++)e[a]=
0;for(a=102221;102377>=a;a++)e[a]=0;for(a=102382;102388>=a;a++)e[a]=0;for(a=102389;102398>=a;a++)e[a]=2;for(a=102399;102444>=a;a++)e[a]=0;for(a=102445;102447>=a;a++)e[a]=2;for(a=102448;102458>=a;a++)e[a]=0;for(a=102459;102468>=a;a++)e[a]=2;for(a=102469;102497>=a;a++)e[a]=0;for(a=102500;102519>=a;a++)e[a]=1;for(a=102520;102524>=a;a++)e[a]=0;for(a=102525;102529>=a;a++)e[a]=2;for(a=102530;102568>=a;a++)e[a]=0;for(a=102570;102588>=a;a++)e[a]=0;for(a=102590;102598>=a;a++)e[a]=0;for(a=102601;102603>=a;a++)e[a]=
0;for(a=102605;102628>=a;a++)e[a]=0;for(a=102629;102646>=a;a++)e[a]=2;for(a=102648;102700>=a;a++)e[a]=2;for(a=102701;102703>=a;a++)e[a]=0;for(a=102707;102730>=a;a++)e[a]=2;for(a=102733;102758>=a;a++)e[a]=2;for(a=102767;102900>=a;a++)e[a]=0;for(a=102965;102969>=a;a++)e[a]=0;for(a=102971;102973>=a;a++)e[a]=0;for(a=102975;102989>=a;a++)e[a]=0;for(a=102990;102992>=a;a++)e[a]=1;for(a=102997;103002>=a;a++)e[a]=0;for(a=103003;103008>=a;a++)e[a]=2;for(a=103009;103011>=a;a++)e[a]=0;for(a=103012;103014>=a;a++)e[a]=
2;for(a=103019;103021>=a;a++)e[a]=0;for(a=103022;103024>=a;a++)e[a]=2;for(a=103029;103031>=a;a++)e[a]=0;for(a=103032;103034>=a;a++)e[a]=2;for(a=103065;103068>=a;a++)e[a]=0;for(a=103074;103076>=a;a++)e[a]=0;for(a=103077;103079>=a;a++)e[a]=1;for(a=103080;103082>=a;a++)e[a]=0;for(a=103083;103085>=a;a++)e[a]=2;for(a=103090;103093>=a;a++)e[a]=0;for(a=103097;103099>=a;a++)e[a]=0;for(a=103100;103102>=a;a++)e[a]=2;for(a=103107;103109>=a;a++)e[a]=0;for(a=103110;103112>=a;a++)e[a]=2;for(a=103113;103116>=a;a++)e[a]=
0;for(a=103117;103120>=a;a++)e[a]=2;for(a=103153;103157>=a;a++)e[a]=0;for(a=103158;103162>=a;a++)e[a]=2;for(a=103163;103165>=a;a++)e[a]=0;for(a=103166;103168>=a;a++)e[a]=1;for(a=103169;103171>=a;a++)e[a]=2;for(a=103186;103188>=a;a++)e[a]=0;for(a=103189;103191>=a;a++)e[a]=2;for(a=103192;103195>=a;a++)e[a]=0;for(a=103196;103199>=a;a++)e[a]=2;for(a=103200;103224>=a;a++)e[a]=0;for(a=103225;103227>=a;a++)e[a]=1;for(a=103232;103237>=a;a++)e[a]=0;for(a=103238;103243>=a;a++)e[a]=2;for(a=103244;103246>=a;a++)e[a]=
0;for(a=103247;103249>=a;a++)e[a]=2;for(a=103254;103256>=a;a++)e[a]=0;for(a=103257;103259>=a;a++)e[a]=2;for(a=103264;103266>=a;a++)e[a]=0;for(a=103267;103269>=a;a++)e[a]=2;for(a=103300;103375>=a;a++)e[a]=0;for(a=103381;103383>=a;a++)e[a]=0;for(a=103384;103386>=a;a++)e[a]=1;for(a=103387;103389>=a;a++)e[a]=0;for(a=103390;103392>=a;a++)e[a]=2;for(a=103397;103399>=a;a++)e[a]=0;for(a=103400;103471>=a;a++)e[a]=2;for(a=103476;103478>=a;a++)e[a]=0;for(a=103479;103481>=a;a++)e[a]=2;for(a=103486;103488>=a;a++)e[a]=
0;for(a=103489;103491>=a;a++)e[a]=2;for(a=103492;103495>=a;a++)e[a]=0;for(a=103496;103499>=a;a++)e[a]=2;for(a=103528;103543>=a;a++)e[a]=0;for(a=103544;103548>=a;a++)e[a]=2;for(a=103549;103551>=a;a++)e[a]=0;for(a=103552;103554>=a;a++)e[a]=1;for(a=103555;103557>=a;a++)e[a]=2;for(a=103558;103560>=a;a++)e[a]=0;for(a=103571;103573>=a;a++)e[a]=0;for(a=103574;103576>=a;a++)e[a]=2;for(a=103577;103580>=a;a++)e[a]=0;for(a=103581;103583>=a;a++)e[a]=2;for(a=103600;103694>=a;a++)e[a]=0;for(a=103700;103793>=a;a++)e[a]=
2;for(a=103794;103871>=a;a++)e[a]=0;for(a=103900;103971>=a;a++)e[a]=2;return e})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(a,e,b,c,d,h,g){function f(a){a&&(a=g.getOrigin(a),g.canUseXhr(a)||-1!==m.indexOf(a)||m.push(a))}function k(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var b=void 0,c=0;c<a.length;++c)g.isProtocolRelative(a[c])?
b&&(b=b.split("://")[0]+":"+a[c].trim()):b=g.isAbsolute(a[c])?a[c]:g.join(b,a[c]);return b}function l(a,b,c){var m,n,e;"string"===typeof b?(b=g.normalize(b),f(b),m=g.urlToObject(b),m=d(m.path,{query:{f:"json"},responseType:"json"}),e=n=b):(m=h.resolve({data:b}),n=b.jsonUrl||null,e=c);return m.then(function(b){var c=b.data;b.ssl&&(n&&(n=n.replace(/^http:/i,"https:")),e&&(e=e.replace(/^http:/i,"https:")));if(c.sources){a.styleUrl=n||null;b=e?g.removeFile(e):g.appBaseUrl;a.styleBase=b;a.style=c;a.styleUrl&&
f(a.styleUrl);if(a.source)c=h.resolve();else{b:if(c=c.sources,c.esri)c=c.esri;else{for(var d=0,m=Object.keys(c);d<m.length;d++){var p=m[d];if("vector"===c[p].type){c=c[p];break b}}c=null}c=c.url?l(a,k(b,c.url)):l(a,c,b)}return c}if(c.sources)return h.reject("You must specify the URL or the JSON for a service or for a style.");a.sourceUrl=n||null;b=e?g.removeTrailingSlash(e)+"/":g.appBaseUrl;a.sourceBase=b;a.source=c;if(c.hasOwnProperty("tileInfo"))d=c;else{for(var d={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,
xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},p=(d.xmax-d.xmin)/512,m=[],v=c.hasOwnProperty("minzoom")?parseFloat(c.minzoom):0,t=c.hasOwnProperty("maxzoom")?parseFloat(c.maxzoom):16;v<t;v++){var q=p/Math.pow(2,v);m.push({level:v,scale:Math.floor(3779.527559055118*q),resolution:q})}p=0;for(t=c.tiles;p<t.length;p++)f(k(b,t[p]));d={capabilities:"TilesOnly",initialExtent:d,fullExtent:d,minScale:m[0].scale,maxScale:m[m.length-1].scale,tiles:c.tiles,tileInfo:{rows:512,
cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:m,spatialReference:{wkid:102100}}}}a.validatedSource=d;a.sourceUrl&&f(a.sourceUrl);c=a.style?h.resolve():null==c.defaultStyles?h.reject():"string"===typeof c.defaultStyles?l(a,k(b,c.defaultStyles,"root.json")):l(a,c.defaultStyles,k(b,"root.json"));return c})}Object.defineProperty(e,"__esModule",{value:!0});var m=c.defaults&&c.defaults.io.corsEnabledServers||c.request.corsEnabledServers;e.loadMetadata=function(a){var b=
{source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null},c="string"===typeof a?[a,null]:[null,a.jsonUrl],d=c[0],c=c[1],h=d?g.urlToObject(d):null;return l(b,a,c).then(function(){var a={layerDefinition:b.validatedSource,url:d,parsedUrl:h,serviceUrl:b.sourceUrl,style:b.style,styleUrl:b.styleUrl,spriteUrl:b.style.sprite&&k(b.styleBase,b.style.sprite),glyphsUrl:b.style.glyphs&&k(b.styleBase,b.style.glyphs)};f(a.spriteUrl);f(a.glyphsUrl);return a})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],
function(){return Object.assign||function(a){for(var e,b=1,c=arguments.length;b<c;b++){e=arguments[b];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}return a}})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(a,e,b){Object.defineProperty(b,"workers",{get:function(){return b.defaults.workers},set:function(a){return b.defaults.workers=a}});return b})},"esri/layers/vectorTiles/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r){var u=m.getLogger("esri.layers.support.TilemapCache");return function(a){function f(b){b=a.call(this)||this;b._handles=new l;b._pendingTilemapRequests={};b._availableLevels={};b.levels=5;b.cacheByteSize=2097152;b.request=g;return b}c(f,a);f.prototype.initialize=function(){var a=this;this._tilemapCache=new n(this.cacheByteSize,{sizeOfFunction:function(a){return a.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return a._initializeTilemapDefinition()}),
q.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);this._initializeTilemapDefinition()};f.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};f.prototype.castLevels=function(a){return 2>=a?(u.error("Minimum levels for Tilemap is 3, but got ",a),3):a};Object.defineProperty(f.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});f.prototype.getTilemap=function(a,b,c){return this._tilemapFromCache(a,
b,c,this._tmpTilemapDefinition)};f.prototype.fetchTilemap=function(a,b,c,f){var d=this;if(!this._availableLevels[a])return p.reject(new k("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));var g=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,b,c,g))return p.resolve(a);var h=r.tilemapDefinitionId(g),l=this._pendingTilemapRequests[h];l||(l=r.Tilemap.fromDefinition(g,f).then(function(a){d._tilemapCache.set(h,a);delete d._pendingTilemapRequests[h];return a}).catch(function(a){delete d._pendingTilemapRequests[h];
return p.reject(a)}),this._pendingTilemapRequests[h]=l);return p.create(function(a,b){l.then(a,b)})};f.prototype.getAvailability=function(a,b,c){return this._availableLevels[a]?(a=this.getTilemap(a,b,c))?a.getAvailability(b,c):"unknown":"unavailable"};f.prototype.getAvailabilityUpsample=function(a,b,c,f){f.level=a;f.row=b;f.col=c;a=this.layer.tileInfo;for(a.updateTileInfo(f);;)if(b=this.getAvailability(f.level,f.row,f.col),"unavailable"===b){if(!a.upsampleTile(f))return"unavailable"}else return b};
f.prototype.fetchAvailability=function(a,b,c,f){return this._availableLevels[a]?this.fetchTilemap(a,b,c,f).always(function(f){return f instanceof r.Tilemap?(f=f.getAvailability(b,c),"unavailable"===f?p.reject(new k("tile-map:tile-unavailable","Tile is not available",{level:a,row:b,col:c})):f):f&&"cancel"===f.dojoType?p.reject(f):"unknown"}):p.reject(new k("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"))};f.prototype.fetchAvailabilityUpsample=function(a,b,c,f,d){var g=
this;f.level=a;f.row=b;f.col=c;var k=this.layer.tileInfo;k.updateTileInfo(f);return this.fetchAvailability(a,b,c,d).catch(function(a){return a&&"cancel"===a.dojoType?p.reject(a):k.upsampleTile(f)?g.fetchAvailabilityUpsample(f.level,f.row,f.col,f):p.reject(a)})};f.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,c=a.query;c&&c.token||!this.layer.token||(c=b({},c,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,
query:c?h.objectToQuery(c):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};f.prototype._tilemapFromCache=function(a,b,c,f){a=this._getTilemapDefinition(a,b,c,f);a=r.tilemapDefinitionId(a);return this._tilemapCache.get(a)};f.prototype._getTilemapDefinition=function(a,b,c,f){f.level=a;f.row=b-b%this.size;f.col=c-c%this.size;return f};f.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels=
{};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})};d([t.property({constructOnly:!0,type:Number})],f.prototype,"levels",void 0);d([t.cast("levels")],f.prototype,"castLevels",null);d([t.property({readOnly:!0,dependsOn:["levels"],type:Number})],f.prototype,"size",null);d([t.property({constructOnly:!0,type:Number})],f.prototype,"cacheByteSize",void 0);d([t.property({constructOnly:!0})],f.prototype,"layer",void 0);d([t.property({constructOnly:!0})],f.prototype,"request",void 0);return f=
d([t.subclass("esri.layers.support.TilemapCache")],f)}(t.declared(f))})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(a,e){return function(a,c){a.__bases__=c.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,e,b,c){var d=arguments.length,h=3>d?e:null===c?c=Object.getOwnPropertyDescriptor(e,b):c,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=
Reflect.decorate(a,e,b,c);else for(var f=a.length-1;0<=f;f--)if(g=a[f])h=(3>d?g(h):3<d?g(e,b,h):g(e,b))||h;return 3<d&&h&&Object.defineProperty(e,b,h),h}})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(a,e,b,c,d,h){e=e.default;a.before(function(b,d){a.hasMixin(b,g)&&c.processPrototype(d)});a.after(function(b){a.hasMixin(b,g)&&
(c.processClass(b),Object.defineProperties(b.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var g=a(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===g)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new e(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,a)}},__accessor__:null,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var c;null!=this.getDefaults&&(c=this.getDefaults(a||{}),this.set(c));b.initialize();a&&(this.set(a),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(f){}else h.removeTarget(this),this.__accessor__.destroy()},get:function(a){return b.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,b){d.set(this,a,b);return this},watch:function(a,b,c){return h.watch(this,a,b,c)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,b){return this.__accessor__.override(a,
b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return g})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(a,e,b){function c(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);a=a||[];b=b||{};return d([this].concat(a),
b)}function d(a,d){a&&!Array.isArray(a)&&"function"!==typeof a&&(d=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);d=d||{};var f,k;f=0;for(k=h.length;f<k;f++)h[f](a,d);a=b(a,d);a.createSubclass=c;f=0;for(k=g.length;f<k;f++)g[f](a);return a}var h=[],g=[];(function(a){a.hasMixin=function(a,b){a=Array.isArray(a)?a.reduce(function(a,b){return b._meta?a.concat(b._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof b)for(var c=a.length-1;0<=c;c--)if(a[c].prototype.declaredClass===
b)return!0;return-1!==a.indexOf(b)};a.safeMixin=function(a,c){return b.safeMixin(a,c)};a.before=function(a){h.push(a)};a.after=function(a){g.push(a)}})(d||(d={}));return d})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(a,e,b,c,d,h,g){Object.defineProperty(e,"__esModule",{value:!0});c.getLogger("esri.core.accessorSupport.Properties");a=function(){function a(a){this.host=a;
this._origin=h.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new g.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;this.autoDestroy=a.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;d.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var b=
0,c=Object.getOwnPropertyNames(a);b<c.length;b++){var f=c[b],d=a[f];if(d){for(;0<d.length;)d.pop().propertyDestroyed(this,f);a[f]=null}}if(this.autoDestroy)for(f in this.metadatas)(a=this.internalGet(f))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[f].nonNullable||this.internalSet(f,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=
!1,this.propertyInvalidated(a))};a.prototype.get=function(a){var b=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var c=b.get;return c?(b=c.call(this.host),this.store.set(a,b,h.OriginId.COMPUTED),this.propertyCommitted(a),b):b.value};a.prototype.originOf=function(a){var b=this.store.originOf(a);return void 0===b&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":h.idToName(b)};a.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};a.prototype.internalGet=
function(a){if(this.metadatas[a]){var b=this.store;return b.has(a)?b.get(a):this.metadatas[a].value}};a.prototype.internalSet=function(a,b){this.metadatas[a]&&(this.propertyInvalidated(a),this.initialized?this.store.set(a,b,this._origin):this.store.set(a,b,h.OriginId.DEFAULTS),this.propertyCommitted(a))};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=function(a,b){if(this.metadatas[a]){this.overridden||
(this.overridden={});var c=this.metadatas[a];c.nonNullable&&null==b||((c=c.cast)&&(b=c.call(this.host,b)),this.overridden[a]=!0,this.internalSet(a,b))}};a.prototype.set=function(a,b){if(this.metadatas[a]){var c=this.metadatas[a];if(!c.nonNullable||null!=b){var f=c.set;(c=c.cast)&&(b=c.call(this.host,b));f?f.call(this.host,b):this.internalSet(a,b)}}};a.prototype.setDefaultOrigin=function(a){this._origin=h.nameToId(a)};a.prototype.propertyInvalidated=function(a){var b=this.dirties,c=this.isOverridden(a),
f=this.cursors&&this.cursors[a],d=this.metadatas[a].computes;if(f)for(var g=0;g<f.length;g++)f[g].propertyInvalidated(this,a);c||(b[a]=!0);if(d)for(a=0;a<d.length;a++)this.propertyInvalidated(d[a])};a.prototype.propertyCommitted=function(a){var b=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(b)for(var c=0;c<b.length;c++)b[c].propertyCommitted(this,a)};a.prototype.addCursor=function(a,b){this.cursors||(this.cursors={});var c=this.cursors[a];c||(this.cursors[a]=c=[]);c.push(b)};a.prototype.removeCursor=
function(a,b){var c=this.cursors[a];this.cursors[a]&&(c.splice(c.indexOf(b),1),0===c.length&&(this.cursors[a]=null))};return a}();e.default=a})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(a,e,b){var c={info:0,warn:1,error:2};a=function(){function a(b){void 0===b&&(b={});this.module=b.module||"";this.writer=b.writer||null;this.level=b.level||null;null!=b.enabled&&(this.enabled=!!b.enabled);a._loggers[this.module]=this;b=this.module.lastIndexOf(".");
-1!==b&&(this.parent=a.getLogger(this.module.slice(0,b)))}a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._isEnabled()&&this._matchLevel(a)&&(c=this._inheritedWriter())&&c.apply(void 0,[a,this.module].concat(b))};a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["warn"].concat(a))};
a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(b){return a.getLogger(this.module+"."+b)};a.getLogger=function(b){var c=a._loggers[b];c||(c=new a({module:b}));return c};a.prototype._parentWithMember=function(a,b){for(var c=this;c&&null==c[a];)c=c.parent;return c?c[a]:b};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=
function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];console[a].apply(console,["["+b+"]"].concat(c))};a.prototype._matchLevel=function(a){return c[this._parentWithMember("level","error")]<=c[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();a.getLogger("esri").level="warn";return a})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty",
"./extensions/serializableProperty"],function(a,e,b,c,d){Object.defineProperty(e,"__esModule",{value:!0});var h=[b.default,c.default,d.default];e.processPrototypeMetadatas=function(a,b){for(var c=Object.getOwnPropertyNames(a),f=0;f<h.length;f++){var d=h[f];if(d.processPrototypePropertyMetadata)for(var g=0,e=c;g<e.length;g++){var q=e[g];d.processPrototypePropertyMetadata(q,a[q],a,b)}}};e.processClassMetadatas=function(a,b){for(var c=Object.getOwnPropertyNames(a),f=0;f<h.length;f++){var d=h[f];if(d.processClassPropertyMetadata)for(var g=
0,e=c;g<e.length;g++){var q=e[g];d.processClassPropertyMetadata(q,a[q],a,b)}}};e.instanceCreated=function(a,b){for(var c=Object.getOwnPropertyNames(b),f=0;f<h.length;f++){var d=h[f];d.instanceCreated&&d.instanceCreated(a,b,c)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(a,e,b,c,d,h,g){function f(a,b,c){var f=h.getProperties(a);return g.wire(a,c.aliasOf,function(){f.propertyInvalidated(b)})}
Object.defineProperty(e,"__esModule",{value:!0});e.AliasedPropertyExtension={processClassPropertyMetadata:function(a,b,f,g){var h=b.aliasOf;if(h&&(a=h.split(".")[0],null!=f[a]&&!b.set&&!b.get)){var k;b.get=function(){var a=c.default(this,h);if("function"===typeof a){k||(k=h.split(".").slice(0,-1).join("."));var b=c.default(this,k);b&&(a=a.bind(b))}return a};b.readOnly||(b.set=function(a){return d.default(this,h,a)})}},instanceCreated:function(a,b,c){for(var d=0;d<c.length;d++){var g=c[d],h=b[g];h.aliasOf&&
f(a,g,h)}}};e.default=e.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(a,e,b){function c(a,c,d){if(null!=d.getItemAt||Array.isArray(d)){var f=parseInt(a,10);if(!isNaN(f))return Array.isArray(d)?d[f]:d.getItemAt(f)}f=b.getProperties(d);return c?b.isPropertyDeclared(f,a)?f.get(a):d[a]:b.isPropertyDeclared(f,a)?f.internalGet(a):d[a]}function d(a,b,g,h){if(null==a)return a;if((a=c(b[h],g,a))||!(h<b.length-1))return h===
b.length-1?a:d(a,b,g,h+1)}function h(a,g,h,m){void 0===h&&(h=!1);void 0===m&&(m=0);return"string"===typeof g&&-1===g.indexOf(".")?c(g,h,a):d(a,b.pathToArray(g),h,m)}function g(a,b){return h(a,b,!0)}Object.defineProperty(e,"__esModule",{value:!0});e.valueOf=h;e.get=g;e.exists=function(a,b){return void 0!==h(b,a,!0)};e.default=g})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(a,e,b){function c(a,d){return d?Object.keys(d).reduce(function(a,
f){if("value"===f)return a[f]=d[f],a;if(void 0===a[f])return a[f]=b.clone(d[f]),a;var g=a[f],h=d[f];if(g===h)return a;if(Array.isArray(h)||Array.isArray(a))g=g?Array.isArray(g)?a[f]=g.concat():a[f]=[g]:a[f]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(function(a){-1===g.indexOf(a)&&g.push(a)}));else if(h&&"object"===typeof h)a[f]=c(g,h);else if(!a.hasOwnProperty(f)||d.hasOwnProperty(f))a[f]=h;return a},a||{}):a}function d(a){return Array.isArray(a)?a:a.split(".")}function h(a){if(Array.isArray(a)||
-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function g(a){var b=!1;return function(){b||(b=!0,a())}}Object.defineProperty(e,"__esModule",{value:!0});e.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};e.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};e.merge=c;e.pathToStringOrArray=function(a){return a?"string"===typeof a&&
-1===a.indexOf(".")?a:d(a):a};e.pathToArray=d;e.splitPath=h;e.parse=function(a,b,c,d){b=h(b);if(Array.isArray(b)){var f=b.map(function(b){return d(a,b.trim(),c)});return{remove:g(function(){return f.forEach(function(a){return a.remove()})})}}return d(a,b.trim(),c)};e.once=g})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(a,e,b,c,d){function h(a,b,c){if(a&&b)if("object"===typeof b){c=0;for(var f=Object.getOwnPropertyNames(b);c<
f.length;c++){var g=f[c];h(a,g,b[g])}}else"_"!==b[0]&&(-1!==b.indexOf(".")?(b=b.split("."),g=b.splice(b.length-1,1)[0],h(d.default(a,b),g,c)):a[b]=c)}Object.defineProperty(e,"__esModule",{value:!0});c.getLogger("esri.core.accessorSupport.set");e.set=h;e.default=h})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(a,e,b){function c(a,c,g){c=b.splitPath(c);if(Array.isArray(c)){for(var h=[],l=0;l<c.length;l++)h.push((new d(c[l],g)).install(a));
return new f(h)}a=(new d(c,g)).install(a);return new k(a)}Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function a(a,c){this.path=a;this.callback=c;this.chain=null;this.path=a;-1<a.indexOf(".")&&(this.chain=b.pathToArray(a));this.callback=c;return this}a.prototype.install=function(a){a=this.chain?new g(this,a):new h(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),h=function(){function a(a,c){this.binding=a;this.target=c;b.getProperties(c).addCursor(this.binding.path,
this)}a.prototype.destroy=function(){this.target&&(b.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};a.prototype.propertyDestroyed=function(a,c){b.getProperties(this.target).removeCursor(c,this)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&this.binding.notify(this.target)};return a}(),g=function(){function a(a,c){this.binding=a;this.target=c;this.stack=
[];this.properties=b.getProperties(c);this.stack.push({properties:this.properties,propertyName:a.chain[0]});this.properties.addCursor(a.chain[0],this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,b){this.moveBackward(a,b)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};
a.prototype.propertyCommitted=function(a,b){this.binding&&(this.moveBackward(a,b),this.moveForward(),this.binding.notify(this.target))};a.prototype.moveBackward=function(a,b){for(var c=this.stack,d=c[c.length-1];d.properties!==a&&d.propertyName!==b;)d.properties.removeCursor(d.propertyName,this),c.pop(),d=c[c.length-1]};a.prototype.moveForward=function(){var a=this.stack,c=a[a.length-1],c=c.properties.internalGet(c.propertyName);(c=b.getProperties(c))&&a.length<this.binding.chain.length&&(a=this.binding.chain[a.length],
this.stack.push({properties:c,propertyName:a}),c.addCursor(a,this),this.moveForward())};return a}(),f=function(){function a(a){this.cursors=a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),k=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();e.create=function(a,c){a=b.splitPath(a);if(Array.isArray(a)){for(var g=[],h=0;h<a.length;h++)g.push(new d(a[h],c));return function(a){for(var b=
[],c=0;c<g.length;c++)b[c]=g[c].install(a);return new f(b)}}var l=new d(a,c);return function(a){return new k(l.install(a))}};e.wire=c;e.default=c})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(a,e,b,c,d,h){Object.defineProperty(e,"__esModule",{value:!0});c.getLogger("esri.core.accessorSupport.extensions.computedProperty");e.ComputedPropertyExtension={processClassPropertyMetadata:function(a,
b,c,l){b.dependsOn&&(c=void 0,c=b.dependsOn.slice())&&(b.wire=h.create(c,function(b){return d.getProperties(b).propertyInvalidated(a)}))},instanceCreated:function(a,b,c){for(var d=0;d<c.length;d++){var f=b[c[d]];f.wire&&f.wire(a)}}};e.default=e.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(a,e,b,c,d,h){function g(a,b,c){var d=a&&a.json;a&&a.json&&a.json.origins&&c&&(a=a.json.origins[c.origin])&&b in a&&(d=a);return d}Object.defineProperty(e,"__esModule",{value:!0});e.originSpecificReadPropertyDefinition=function(a,b){return g(a,"read",b)};e.originSpecificWritePropertyDefinition=function(a,b){return g(a,"write",b)};e.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,g,l,m){if(d.process(g)){b.process(g);l=g.type;for(m=0;Array.isArray(l);)l=l[0],m++;if(g.json.origins)for(var f in g.json.origins){var k=
g.json.origins[f];c.create(l,m,a,k);h.create(l,m,a,k)}c.create(l,m,a,g.json);h.create(l,m,a,g.json)}}};e.default=e.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});e.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,d={"web-document":["web-scene","web-map"]};a=function(a){if(b[a]){var c=b[a];d[a].forEach(function(a){b[a]=
c});delete b[a]}};for(var h in d)a(h)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(a,e,b,c){function d(a,b,c,d){if(1<b)return f(a,b);if(1===b)return k(a);if(l(a)){var g=k(a.prototype.itemType.Type);return function(b,c,d){return(b=g(b,c,d))?new a(b):b}}return h(a)}function h(a){return a.prototype.read?function(b,c,d){return null==b?b:(new a).read(b,d)}:a.fromJSON}function g(a,b,
c,d){return 0!==d&&Array.isArray(b)?b.map(function(b){return g(a,b,c,d-1)}):a(b,null,c)}function f(a,b){a=h(a);var c=g.bind(null,a);return function(a,d,f){if(null==a)return a;a=c(a,f,b);d=b;for(f=a;0<d&&Array.isArray(f);)d--,f=f[0];if(void 0!==f)for(f=0;f<d;f++)a=[a];return a}}function k(a){var b=h(a);return function(a,c,d){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,d)}):[b(a,null,d)]}}function l(a){return c.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?
m(a.Type):!1:!1}function m(a){return!!a&&(!!a.prototype.read||!!a.fromJSON||l(a))}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(a,c,f,g){(!g.read||!g.read.reader&&!1!==g.read.enabled)&&m(a)&&b.setDeepValue("read.reader",d(a,c,f,g),g)}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(a,e){function b(a,b,h){for(var c=0;c<a.length;c++){var d=a[c];if(!(d in h))if(b)h[d]={};else return;h=h[d]}return h}Object.defineProperty(e,"__esModule",{value:!0});
e.getDeepValue=function(a,d){return b(a.split("."),!1,d)};e.setDeepValue=function(a,d,h){var c=a.split(".");a=c.pop();(h=b(c,!0,h))&&a&&(h[a]=d)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});e.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(a,e){function b(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function c(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(e,"__esModule",{value:!0});e.process=
function(a){a.json||(a.json={});b(a.json);c(a.json);if(a.json.origins)for(var d in a.json.origins)b(a.json.origins[d]),c(a.json.origins[d]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(a,e,b,c){function d(a,c,d,f){b.setDeepValue(d,h(a,f),c)}function h(a,b){return a&&"function"===typeof a.write?a.write({},b):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?
-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function g(a,c,d,f){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return h(a,f)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[h(a,f)];b.setDeepValue(d,a,c)}function f(a,b,c){return 0!==c&&Array.isArray(a)?a.map(function(a){return f(a,b,c-1)}):h(a,b)}function k(a){return function(c,d,g,h){if(null===c)c=null;else{c=f(c,h,a);h=a;for(var k=c;0<h&&Array.isArray(k);)h--,k=k[0];if(void 0!==k)for(k=
0;k<h;k++)c=[c]}b.setDeepValue(g,c,d)}}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(a,b,f,h){h.write&&!h.write.writer&&!1!==h.write.enabled&&(1===b||c.isCollection(a)?h.write.writer=g:h.write.writer=1<b?k(b):d)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(a,e){function b(a){switch(a){case "defaults":return d.DEFAULTS;case "service":return d.SERVICE;case "portal-item":return d.PORTAL_ITEM;case "web-scene":return d.WEB_SCENE;
case "web-map":return d.WEB_MAP;case "user":return d.USER}}function c(a){switch(a){case d.DEFAULTS:return"defaults";case d.SERVICE:return"service";case d.PORTAL_ITEM:return"portal-item";case d.WEB_SCENE:return"web-scene";case d.WEB_MAP:return"web-map";case d.USER:return"user"}}Object.defineProperty(e,"__esModule",{value:!0});var d;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]=
"WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(d=e.OriginId||(e.OriginId={}));e.nameToId=b;e.idToName=c;e.readableNameToId=function(a){return b(a)};e.idToReadableName=function(a){return c(a)};e.writableNameToId=function(a){return b(a)};e.idToWritableName=function(a){return c(a)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});a=function(){function a(){this._values={}}
a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return b.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,b){this._values[a]=b};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();e.default=a})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(a,e,b,c,d,h,g,f){Object.defineProperty(e,"__esModule",{value:!0});var k=Object.prototype.hasOwnProperty,l=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,m={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},n=/^_(set|get)([a-zA-Z0-9]+)Attr$/;e.processPrototype=function(a){for(var f=a.declaredClass,e=a.properties||{},p=0,u=Object.getOwnPropertyNames(e);p<u.length;p++){var v=u[p],w=e[v],A=typeof w;null==w?h.setPropertyMetadata(a,v,{value:w}):
Array.isArray(w)?h.setPropertyMetadata(a,v,{type:[w[0]],value:null}):"object"===A?g.getProperties(w)||w instanceof Date?h.setPropertyMetadata(a,v,{type:w.constructor,value:w}):h.setPropertyMetadata(a,v,w):"boolean"===A?h.setPropertyMetadata(a,v,{type:Boolean,value:w}):"string"===A?h.setPropertyMetadata(a,v,{type:String,value:w}):"number"===A?h.setPropertyMetadata(a,v,{type:Number,value:w}):"function"===A&&h.setPropertyMetadata(a,v,{type:w,value:null})}p=0;for(u=Object.getOwnPropertyNames(a);p<u.length;p++){var A=
u[p],w=a[A],e=v=void 0,z=l.exec(A);if(z)v=z[1],e=m[z[2]];else if(z=n.exec(A))v=z[2][0].toLowerCase()+z[2].substr(1),e=z[1].toLowerCase();v&&e&&(v=h.getPropertyMetadata(a,v),b.setDeepValue(e,w,v))}p=0;for(u=Object.getOwnPropertyNames(h.getPropertiesMetadata(a));p<u.length;p++)if(v=u[p],w=h.getPropertyMetadata(a,v),e=w.type,A=w.types,void 0===w.value&&k.call(a,v)&&(w.value=a[v]),!w.cast&&e){v=w;w=0;for(A=e;Array.isArray(A);)A=A[0],w++;e=1===w?c.ensureArray(A):1<w?c.ensureNArray(A,w):c.ensureType(e);
v.cast=e}else!w.cast&&A&&(Array.isArray(A)?w.cast=c.ensureArrayTyped(c.ensureOneOfType(A[0])):w.cast=c.ensureOneOfType(A));d.processPrototypeMetadatas(h.getPropertiesMetadata(a),f);return h.getPropertiesMetadata(a)};e.processClass=function(a){for(var b=a.prototype,c=b.declaredClass,k=a._meta.bases,l={},m=k.length-1;0<=m;m--)g.merge(l,h.getMetadata(k[m].prototype));var e=l.properties;d.processClassMetadatas(e,c);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:e,autoDestroy:!!l.autoDestroy}});
for(var n={},c=function(a){var b=e[a];n[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):b.value},set:function(c){var d=this.__accessor__;if(!d)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(d.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===d.lifecycle&&b.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
a+"' of "+this.declaredClass);d.set(a,c)}}}},k=0,m=Object.getOwnPropertyNames(e);k<m.length;k++)c(m[k]);Object.defineProperties(a.prototype,n);if(l.parameters)for(a=0,c=Object.getOwnPropertyNames(l.parameters);a<c.length;a++)k=c[a],m=Object.getOwnPropertyDescriptor(b,k)||{value:b[k]},(m=f.autocastMethod(b,k,m))&&Object.defineProperty(b,k,m);return l}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(a,e,b){function c(a,b){return b.isInstanceOf?
b.isInstanceOf(a):b instanceof a}function d(a){return null==a?a:new Date(a)}function h(a){return null==a?a:!!a}function g(a){return null==a?a:a.toString()}function f(a){return null==a?a:parseFloat(a)}function k(a){return null==a?a:Math.round(parseFloat(a))}function l(a){return a&&a.constructor&&void 0!==a.constructor._meta}function m(a,b){return null!=b&&a&&!c(a,b)}function n(a,b){m(a,b)&&(l(b)?w.error("Accessor#set","Assigning an instance of '"+(b.declaredClass||"unknown")+"' which is not a subclass of '"+
(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"):b=new a(b));return b}function p(a){switch(a){case Number:return f;case A:return k;case Boolean:return h;case String:return g;case Date:return d;default:return n.bind(null,a)}}function q(a,b){var c=p(a);return 1===arguments.length?c:c(b)}function t(a,b){return 1===arguments.length?t.bind(null,a):b?Array.isArray(b)?b.map(a):[a(b)]:b}function r(a,b,c){return 0!==b&&Array.isArray(c)?c.map(function(c){return r(a,b-1,c)}):a(c)}function u(a,b,c){if(2===
arguments.length)return u.bind(null,a,b);if(!c)return c;c=r(a,b,c);for(var d=b,f=c;0<d&&Array.isArray(f);)d--,f=f[0];if(void 0!==f)for(f=0;f<d;f++)c=[c];return c}function v(a,b){if(2===arguments.length)return v(a).call(null,b);var c={},d=[],f=[],g;for(g in a.typeMap){var h=a.typeMap[g];c[g]=q(h);d.push(h&&h.prototype&&h.prototype.declaredClass||"unknown");f.push(g)}var k="string"===typeof a.key?function(b){return b[a.key]}:a.key;return function(b){if(a.base&&!m(a.base,b))return b;var g=k(b)||a.defaultKeyValue,
h=c[g];if(!h)return w.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+d.join("', '")+"'")+", or a plain object that can auto-cast (having .type \x3d "+("'"+f.join("', '")+"'")+")"),null;if(!m(a.typeMap[g],b))return b;if("string"!==typeof a.key||l(b))return h(b);var g={},e;for(e in b)e!==a.key&&(g[e]=b[e]);return h(g)}}Object.defineProperty(e,"__esModule",{value:!0});var w=b.getLogger("esri.core.Accessor");e.isInstanceOf=c;e.ensureDate=d;e.ensureBoolean=h;e.ensureString=
g;e.ensureNumber=f;e.ensureInteger=k;e.isClassedType=l;e.requiresType=m;e.ensureClass=n;e.ensureType=q;e.ensureArrayTyped=t;e.ensureArray=function(a,b){return 1===arguments.length?t(q.bind(null,a)):t(q.bind(null,a),b)};e.ensureNArrayTyped=u;e.ensureNArray=function(a,b,c){return 2===arguments.length?u(q.bind(null,a),b):u(q.bind(null,a),b,c)};e.ensureOneOfType=v;var A=function(){return function(){}}();e.Integer=A;e.default=q})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(a,e){function b(a){return null!=a.__accessorMetadata__}function c(a){return b(a)&&null!=d(a).properties}function d(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function h(a){a=d(a);var b=a.properties;b||(b=a.properties={});return b}function g(a,b){var c=d(a);a=c.parameters;a||(a=c.parameters={});c=a[b];c||(c=[],a[b]=c);return c}Object.defineProperty(e,"__esModule",{value:!0});
e.hasMetadata=b;e.hasPropertiesMetadata=c;e.hasPropertyMetadata=function(a,b){return c(a)&&null!=h(a)[b]};e.hasParametersMetadata=function(a,c){return b(a)&&null!=d(a).parameters&&null!=d(a).parameters[c]};e.getMetadata=d;e.getPropertiesMetadata=h;e.getPropertyMetadata=function(a,b){a=h(a);var c=a[b];c||(c=a[b]={});return c};e.setPropertyMetadata=function(a,b,c){h(a)[b]=c};e.getParametersMetadata=g;e.getParameterMetadata=function(a,b,c){var d=g(a,b)[c];d||(g(a,b)[c]=d={index:c});return d}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(a,e,b,c){function d(a){var c="_meta"in a?b.ensureType(a):a;return function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a.push(c);return"number"===typeof a[2]?g.apply(this,a):h.apply(this,a)}}function h(a,b,d,f){c.getPropertyMetadata(a,b).cast=f}function g(a,b,d,f){c.getParameterMetadata(a,b,d).cast=f}function f(a){return function(b,d,f){c.getPropertyMetadata(b,a).cast=b[d]}}Object.defineProperty(e,"__esModule",{value:!0});var k=Object.prototype.toString;
e.autocastMethod=function(a,b,d){if(c.hasParametersMetadata(a,b)){var f=c.getParametersMetadata(a,b).filter(function(a){return null!=a.cast});if(f.length){var g=d.value;d.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<f.length;b++){var c=f[b];a[c.index]=c.cast(a[c.index])}return g.apply(this,a)};return d}}};e.cast=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===
k.call(a[0]))return d(a[0]);if(1===a.length&&"string"===typeof a[0])return f(a[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(a,e,b,c,d,h,g,f,k){function l(a){v.has(a)?w.splice(w.indexOf(a),1):v.add(a);w.push(a);A||(A=h.schedule(n))}function m(a){if(!a.removed){var b=a.callback,d=a.path,f=a.oldValue,h=a.target,k=g.valueOf(h,a.propertyPath,!0);c.equals(f,k)||
(a.oldValue=k,b.call(h,k,f,d,h))}}function n(){if(A){A=null;var a=w;w=u.acquire();v.clear();for(var b=u.acquire(),c=0;c<a.length;c++){var d=a[c];m(d);d.removed&&b.push(d)}for(c=0;c<w.length;c++)d=w[c],d.removed&&(b.push(d),v.delete(d),w.splice(c,1),--c);for(c=0;c<b.length;c++)r.pool.release(b[c]);u.release(a);u.release(b);z.forEach(function(a){return a()})}}function p(a,b,c){var d=f.parse(a,b,c,function(a,b,c){var h=g.valueOf(a,b,!0),m,e=k.wire(a,b,function(a,b){a.__accessor__.destroyed?d.remove():
(m||(m=r.pool.acquire(a,b,h,c),h=null),l(m))});return{remove:f.once(function(){e.remove();m&&(m.removed=!0,l(m),m=null);d=e=h=null})}});return d}function q(a,b,d){var h=f.parse(a,b,d,function(a,b,d){var f=g.valueOf(a,b,!0),l=!1;return k.wire(a,b,function(a,b){if(a.__accessor__.destroyed)h.remove();else if(!l){l=!0;var k=g.valueOf(a,b,!0);c.equals(f,k)||d.call(a,k,f,b,a);f=g.valueOf(a,b,!0);l=!1}})});return h}function t(a,b,c,d){void 0===d&&(d=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:
d?q(a,b,c):p(a,b,c)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function a(a,b,c,d){this.target=a;this.path=b;this.oldValue=c;this.callback=d;this.removed=!1;this.propertyPath=f.pathToStringOrArray(b)}a.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};a.pool=new d(a,!0);return a}(),u=new b,v=new Set,w=u.acquire(),A;e.dispatchTarget=function(a){for(var b=u.copy(w),c=0;c<b.length;c++){var d=b[c];d.target===a&&
(m(d),v.delete(d),w.splice(w.indexOf(d),1))}};e.removeTarget=function(a){for(var b=0;b<w.length;b++){var c=w[b];c.target===a&&(c.removed=!0)}};e.dispatch=n;var z=new Set;e.afterDispatch=function(a){z.add(a);return{remove:function(){z.delete(a)}}};e.watch=t;e.isValueInUse=function(a){return w.some(function(b){return b.oldValue===a})};e.default=t})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(a,e,b){function c(a){a.length=0}var d=Array.prototype.splice;
a=function(){function a(a,d){void 0===a&&(a=50);void 0===d&&(d=50);this._pool=new b(Array,!1,c,d,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);d.apply(b,a);a.splice(0,2);return b};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return h.acquire()};a.copy=function(a){return h.copy(a)};a.release=function(a){return h.release(a)};return a}();var h=new a(100);return a})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require",
"exports"],function(a,e){var b=function(){return function(){}}();return function(){function a(a,b,c,f,k){void 0===f&&(f=1);void 0===k&&(k=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=b;this.releaseFunction=c;this.growthSize=f;!0===b?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof b&&(this.acquireFunction=b);this._pool=Array(k);this._set=new Set;this._initialSize=k;for(a=0;a<k;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(f,1)}a.prototype.acquire=
function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];c=this.classConstructor||b;if(0===this._pool.length)for(var g=this.growthSize,f=0;f<g;f++)this._pool[f]=new c;c=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[c].concat(a)):c&&c.acquire&&"function"===typeof c.acquire&&c.acquire.apply(c,a);this._set.delete(c);return c};a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&
a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(a){void 0===a&&(a=this._initialSize);if(!(this._pool.length<=a))for(var b;a>this._pool.length;)b=this._pool.shift(),this._set.delete(b),b.dispose&&"function"===typeof b.dispose&&b.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];(d=this.classConstructor).call.apply(d,[a].concat(b));var d};return a}()})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require",
"exports","./nextTick","./now","./requestAnimationFrame"],function(a,e,b,c,d){function h(a){void 0===a&&(a=e.now());e.debug.rafId=null;0<A.length&&(e.debug.rafId=g());if(0<p){var b=a-p;r=Math.min(b,r);if(b<q)return}e.debug.executeFrameTasks(a)}function g(){return e.debug.requestNextFrame?e.debug.requestNextFrame(l):l()}function f(){for(var a=0;a<A.length;){var b=A[a];a++;if(b.removed){A.splice(a-1,1);for(var c=0;c<v.length;c++){var d=v[c];if(b.phases[d]){var d=z[d],f=d.indexOf(b);-1!==f&&d.splice(f,
1)}}}}}function k(){for(;w.length;){var a=w.shift();a.isActive&&(a.isActive=!1,a.callback())}e.debug.willDispatch=!1}function l(){return d(h)}Object.defineProperty(e,"__esModule",{value:!0});e.now=c;var m=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),n=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),p=-1,q=0,t=0,r=Number.POSITIVE_INFINITY,u={time:0,
deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},v=["prepare","preRender","render","postRender","update"],w=[],A=[],z={prepare:[],preRender:[],render:[],postRender:[],update:[]},x=function(){function a(a){this._task=a}a.prototype.remove=function(){this._task.removed=!0};a.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=e.now())};a.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=e.now()-
this._task.pausedAt))};return a}();e.FrameTaskHandle=x;e.debug={frameTasks:A,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var b=0;b<A.length;b++)A[b].removed=!0;a&&f()},dispatch:k,executeFrameTasks:function(a){void 0===a&&(a=e.now());0>p&&(p=a);var b=a-p;p=a;for(var c=0;c<A.length;c++){var d=A[c];-1!==d.epoch&&(d.dt=b)}for(c=0;c<v.length;c++)for(var b=v[c],g=z[b],h=0;h<g.length;h++)d=g[h],d.paused||d.removed||(0===c&&d.ticks++,-1===d.epoch&&(d.epoch=
a),u.time=a,u.deltaTime=d.dt,u.elapsedFrameTime=e.now()-a,u.frameDuration=0<t?t:r,u.spendInTask=a-d.epoch,d.phases[b].call(d,u));f()}};e.schedule=function(a){a=new n(a);w.push(a);e.debug.willDispatch||(e.debug.willDispatch=!0,b(k));return a};e.addFrameTask=function(a){var b=new m(a);A.push(b);for(var c=0,d=v;c<d.length;c++){var f=d[c];a[f]&&z[f].push(b)}e.debug.rafId||(p=-1,e.debug.rafId=g());return new x(b)};e.setFrameRate=function(a){if(0>=a)t=q=0;else{var b=1.05*r;a=Math.ceil(1E3/a/b);q=(a-1)*
b;t=a*r}};e.requestNextFrame=g})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(a,e,b){function c(){if(b.postMessage&&!b.importScripts){var a=b.onmessage,c=!0;b.onmessage=function(){c=!1};b.postMessage("","*");b.onmessage=a;return c}return!1}var d=b.MutationObserver||b.WebKitMutationObserver;return function(){var a;if(b.process&&b.process.nextTick)a=function(a){b.process.nextTick(a)};else if(b.Promise)a=function(a){b.Promise.resolve().then(a)};
else if(d){var g=[],f=document.createElement("div");(new d(function(){for(;0<g.length;)g.shift()()})).observe(f,{attributes:!0});a=function(a){g.push(a);f.setAttribute("queueStatus","1")}}else if(c()){var k=[];b.addEventListener("message",function(a){if(a.source===b&&"esri-nexttick-message"===a.data)for(a.stopPropagation();k.length;)k.shift()()},!0);a=function(a){k.push(a);b.postMessage("esri-nexttick-message","*")}}else a=b.setImmediate?function(a){return b.setImmediate(a)}:function(a){return b.setTimeout(a,
0)};return a}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(a,e){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(a,e,b){return function(){var a=b.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};
if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var d;d=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-d}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(a,e,b,c){var d=c();a=b.requestAnimationFrame;if(!a){e=["ms","moz","webkit","o"];for(var h=0;h<e.length&&!a;++h)a=b[e[h]+
"RequestAnimationFrame"];a||(a=function(a){var f=c(),g=Math.max(0,16-(f-d)),h=b.setTimeout(function(){a(c())},g);d=f+g;return h})}return a})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(a,e,b,c,d,h,g){return function(a){function d(b){b=a.call(this)||this;b._groups=new Map;return b}b(d,a);d.prototype.destroy=function(){this.removeAll()};
Object.defineProperty(d.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=b.length});return a},enumerable:!0,configurable:!0});d.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a)&&!h.isCollection(a))return this;var c=this._getOrCreateGroup(b);Array.isArray(a)||h.isCollection(a)?a.forEach(function(a){return c.push(a)}):c.push(a);this.notifyChange("size");return this};d.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};d.prototype.remove=
function(a){if(Array.isArray(a)||h.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),c=0;c<b.length;c++)b[c].remove();this._deleteGroup(a);this.notifyChange("size");return this};d.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();this.notifyChange("size");return this};d.prototype._isHandle=function(a){return a&&!!a.remove};d.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);
var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};d.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};d.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};d.prototype._ensureGroupKey=function(a){return a||"_default_"};c([g.property({readOnly:!0})],d.prototype,"size",null);return d=c([g.subclass("esri.core.Handles")],d)}(g.declared(d))})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p){function q(a){return a?a.isInstanceOf&&a.isInstanceOf(D):!1}function t(a){return a?q(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function r(a){if(a&&a.length)return a[0]}function u(a,b,c,d){b&&b.forEach(function(b,f,g){a.push(b);u(a,c.call(d,b,f,g),c,d)})}a=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=
!1;this.item=a};return a}();var v=function(){},w=new l(a,!0,function(a){a.item=null;a.target=null}),A=new Set,z=new Set,x=new Set,y=new Map,C=0,D=function(a){function f(b){b=a.call(this,b)||this;b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:C++});return b}b(f,a);h=f;f.ofType=function(a){if(!a)return h;if(y.has(a))return y.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;
else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var d=a.typeMap[c].prototype.declaredClass;b=b?b+(" | "+d):d}b=h.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});c={Type:a,ensureType:"function"===typeof a?p.ensureType(a):p.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});y.set(a,b);return b};f.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||q(a)?{items:a}:a:{}};Object.defineProperty(f.prototype,"items",{get:function(){return this._items},
set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(t(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});f.prototype.on=function(a,b){var c;Array.isArray(a)?c=a:-1<a.indexOf(",")&&(c=a.split(/\s*,\s*/));if(c){var f=[];for(a=0;a<c.length;a++)f.push(this.on(c[a],b));f.remove=function(){for(var a=0;a<f.length;a++)f[a].remove()};return f}if("change"===a){var g=this._chgListeners,h={removed:!1,callback:b};g.push(h);this._notifications&&this._notifications.push({listeners:g.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=v;h.removed=!0;g.splice(g.indexOf(h),1)}}}return d.after(this,"on"+a,b,!0)};f.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)};f.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};f.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||
this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(t(a)));this._emitAfterChanges();return this};f.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};f.prototype.clone=function(){return this._createNewInstance({items:this._items.map(k.clone)})};f.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=a.map(t);return this._createNewInstance({items:(c=
this._items).concat.apply(c,a)});var c};f.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),d=c.length,f=0;f<d;f++)a.call(b,c[f],f,c);this._emitAfterChanges()}};f.prototype.every=function(a,b){return this._items.every(a,b)};f.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};f.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+
" is not a function");for(var c=this._items,d=c.length,f=0;f<d;f++){var g=c[f];if(a.call(b,g,f,c))return g}};f.prototype.findIndex=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,f=0;f<d;f++)if(a.call(b,c[f],f,c))return f;return-1};f.prototype.flatten=function(a,b){var c=[];u(c,this,a,b);return new h(c)};f.prototype.forEach=function(a,b){for(var c=this._items,d=c.length,f=0;f<d;f++)a.call(b,c[f],f,c)};f.prototype.getItemAt=function(a){return this._items[a]};
f.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};f.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};f.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};f.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};f.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};f.prototype.map=function(a,
b){a=this._items.map(a,b);return new h({items:a})};f.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};f.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=r(this._splice(this.length-1,1));this._emitAfterChanges();return a}};f.prototype.push=function(){for(var a=[],b=
0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges();return this.length};f.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};f.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};f.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};f.prototype.removeAt=
function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=r(this._splice(a,1)),this._emitAfterChanges(),a};f.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=q(a)?a.toArray():a;for(var b=this._items,c=[],d=a.length,f=0;f<d;f++){var g=b.indexOf(a[f]);if(-1<g){for(var h=f+1,k=g+1,l=Math.min(a.length-h,b.length-k),m=0;m<l&&a[h+m]===b[k+m];)m++;h=1+m;(g=this._splice(g,h))&&0<g.length&&c.push.apply(c,g);f+=h-1}}this._emitAfterChanges();return c};f.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges();return this};f.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=r(this._splice(0,1));this._emitAfterChanges();return a}};f.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};f.prototype.some=function(a,b){return this._items.some(a,
b)};f.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};f.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};f.prototype.toArray=function(){return this._items.slice()};f.prototype.toJSON=
function(){return this.toArray()};f.prototype.toLocaleString=function(){return this._items.toLocaleString()};f.prototype.toString=function(){return this._items.toString()};f.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};f.prototype._createNewInstance=function(a){return new this.constructor(a)};f.prototype._splice=function(a,
b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var d=this._items,f=this.constructor.prototype.itemType,g,h;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=m.schedule(this._boundDispatch));if(b){h=d.splice(a,b);if(this.hasEventListener("before-remove")){var k=w.acquire();k.target=this;k.cancellable=!0;for(var l=0,e=h.length;l<e;l++)g=
h[l],k.reset(g),this.emit("before-remove",k),k.defaultPrevented&&(h.splice(l,1),d.splice(a,0,g),a+=1,--l,--e);w.release(k)}this.length=this._items.length;if(this.hasEventListener("after-remove")){g=w.acquire();g.target=this;g.cancellable=!1;e=h.length;for(l=0;l<e;l++)g.reset(h[l]),this.emit("after-remove",g);w.release(g)}}if(c&&c.length){if(f){l=[];for(e=0;e<c.length;e++)g=c[e],k=f.ensureType(g),null==k&&null!=g||l.push(k);c=l}f=this.hasEventListener("before-add");l=this.hasEventListener("after-add");
e=a===this.length;if(f||l){g=w.acquire();g.target=this;g.cancellable=!0;k=w.acquire();k.target=this;k.cancellable=!1;for(var n=0,p=c;n<p.length;n++){var v=p[n];f?(g.reset(v),this.emit("before-add",g),g.defaultPrevented||(e?d.push(v):d.splice(a++,0,v),this._set("length",d.length),l&&(k.reset(v),this.emit("after-add",k)))):(e?d.push(v):d.splice(a++,0,v),this._set("length",d.length),k.reset(v),this.emit("after-add",k))}w.release(g)}else e?d.push.apply(d,c):d.splice.apply(d,[a,0].concat(c)),this._set("length",
d.length)}(c&&c.length||h&&h.length)&&this._notifyChangeEvent(c,h);return h};f.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=w.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;w.release(b)}return a};f.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=w.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);w.release(a)}};f.prototype._notifyChangeEvent=
function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};f.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;A.clear();z.clear();x.clear();for(var d=0;d<b.length;d++){var f=b[d],h=f.added,f=f.removed;if(h)if(0===x.size&&0===z.size)for(var k=0,l=h;k<l.length;k++)h=l[k],A.add(h);
else for(k=0,l=h;k<l.length;k++)h=l[k],z.has(h)?(x.add(h),z.delete(h)):x.has(h)||A.add(h);if(f)if(0===x.size&&0===A.size)for(k=0;k<f.length;k++)h=f[k],z.add(h);else for(k=0;k<f.length;k++)h=f[k],A.has(h)?A.delete(h):(x.delete(h),z.add(h))}var m=g.acquire();A.forEach(function(a){m.push(a)});var e=g.acquire();z.forEach(function(a){e.push(a)});var n=c._items,p=a.items,v=g.acquire();x.forEach(function(a){p.indexOf(a)!==n.indexOf(a)&&v.push(a)});if(a.listeners&&(m.length||e.length||v.length))for(b={target:c,
added:m,removed:e,moved:v},d=a.listeners.length,h=0;h<d;h++)f=a.listeners[h],f.removed||f.callback.call(c,b);g.release(m);g.release(e);g.release(v)},c=this,d=0;d<a.length;d++)b(a[d]);A.clear();z.clear();x.clear()}};f.isCollection=q;c([n.property()],f.prototype,"length",void 0);c([n.property()],f.prototype,"items",null);return f=h=c([n.subclass("esri.core.Collection")],f);var h}(n.declared(h,f));return D})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect",
"dojo/on"],function(a,e,b,c){function d(a,b,c,k){var f;Array.isArray(b)?f=b:-1<b.indexOf(",")&&(f=b.split(/\s*,\s*/));if(f){var g=[];for(b=0;b<f.length;b++)g.push(d(a,f[b],c,k));g.remove=function(){for(var a=0;a<g.length;a++)g[a].remove()};return g}return k(a,b)}return function(){function a(){}a.prototype.emit=function(a,b){if(this.hasEventListener(a))return b=b||{},b.target||(b.target=this),c.emit(this,a,b)};a.prototype.on=function(a,c){return d(this,a,c,function(a,d){return b.after(a,"on"+d,c,!0)})};
a.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return a}()})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(a,e,b,c,d,h,g,f,k,l,m){function n(a){for(var b in a)e.hasOwnProperty(b)||(e[b]=a[b])}Object.defineProperty(e,
"__esModule",{value:!0});n(b);n(c);n(d);n(h);n(g);n(f);n(k);n(l);n(m)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.aliasOf=function(a){return function(c,h){b.getPropertyMetadata(c,h).aliasOf=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require","exports","../metadata"],function(a,e,b){Object.defineProperty(e,
"__esModule",{value:!0});e.autoDestroy=function(){return function(a,d,h){b.getMetadata(a).autoDestroy=!0;return a[d]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});e.declared=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];d=function(){return this||{}};d.__bases__=[a].concat(b);return d}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),
function(a,e,b,c,d,h){Object.defineProperty(e,"__esModule",{value:!0});d.getLogger("esri.core.accessorSupport.decorators.property");e.property=function(a){void 0===a&&(a={});return function(b,d){var f=b.constructor.prototype;if(f!==Function.prototype){(b=Object.getOwnPropertyDescriptor(b,d))&&(b.get||b.set)?(a=c.clone(a),b.set&&(a.set=b.set),b.get&&(a.get=b.get)):b&&b.hasOwnProperty("value")&&(a=c.clone(a),a.value=b.value);d=h.getPropertyMetadata(f,d);for(var g in a)f=a[g],Array.isArray(f)?d[g]=(d[g]||
[]).concat(f):d[g]=f}}};e.propertyJSONMeta=function(a,b,c){a=h.getPropertyMetadata(a.constructor.prototype,c);a.json||(a.json={});a=a.json;void 0!==b&&(a.origins||(a.origins={}),a.origins[b]||(a.origins[b]={}),a=a.origins[b]);return a}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(a,e,b,c){Object.defineProperty(e,"__esModule",{value:!0});e.reader=function(a,h,g){var d,k;void 0===h||Array.isArray(h)?
(k=a,g=h,d=[void 0]):(k=h,d=Array.isArray(a)?a:[a]);return function(a,f,h){var l=a.constructor.prototype;d.forEach(function(d){d=c.propertyJSONMeta(a,d,k);d.read&&"object"!==typeof d.read&&(d.read={});b.setDeepValue("read.reader",l[f],d);g&&(d.read.source=(d.read.source||[]).concat(g))})}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});e.shared=function(a){return function(b,
d){b[d]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(a,e,b,c){function d(a,b){a.read&&("function"===typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function h(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&a.write.writer&&b.push(a.write.writer))}function g(a){var b=[];a=c.getPropertiesMetadata(a.prototype);if(!a)return b;
for(var f in a){var g=a[f];g.cast&&b.push(g.cast);g.copy&&b.push(g.copy);if(g=g.json)if(d(g,b),h(g,b),g=g.origins)for(var k in g){var l=g[k];d(l,b);h(l,b)}}return b}function f(a){var b={values:{},descriptors:{}},d=["__bases__"],f=c.getPropertiesMetadata(a.prototype),h=g(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==d.indexOf(b)||f&&f.hasOwnProperty(b)||!l(Object.getOwnPropertyDescriptor(a.prototype,b))&&-1!==h.indexOf(a.prototype[b])?!1:!0}).forEach(function(c){var d=Object.getOwnPropertyDescriptor(a.prototype,
c);l(d)?b.descriptors[c]=d:b.values[c]=a.prototype[c]});return b}function k(a){var b=Object.getOwnPropertyNames(a),c=Object.getPrototypeOf(a.prototype).constructor,d=Object.getOwnPropertyNames(Function);d.push("__bases__");var f=Object.getOwnPropertyNames(c),g={values:{},descriptors:{}};b.filter(function(b){return-1!==d.indexOf(b)?!1:-1===f.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(b){var c=Object.getOwnPropertyDescriptor(a,b);l(c)?g.descriptors[b]=c:g.values[b]=a[b]});return g}function l(a){return a&&
!(!a.get&&!a.set)}Object.defineProperty(e,"__esModule",{value:!0});e.subclass=function(a){return function(c){var d=f(c),g=k(c);null!=a&&(d.values.declaredClass=a);c=b(c.__bases__,d.values);Object.defineProperties(c.prototype,d.descriptors);for(var h in g.values)c[h]=g.values[h];Object.defineProperties(c,g.descriptors);return c}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(a,e,b,c){Object.defineProperty(e,
"__esModule",{value:!0});e.writer=function(a,h,g){var d,k;void 0===h?(k=a,d=[void 0]):"string"!==typeof h?(k=a,d=[void 0],g=h):(k=h,d=Array.isArray(a)?a:[a]);return function(a,f,h){var l=a.constructor.prototype;d.forEach(function(d){d=c.propertyJSONMeta(a,d,k);d.write&&"object"!==typeof d.write&&(d.write={});g&&b.setDeepValue("write.target",g,d);b.setDeepValue("write.writer",l[f],d)})}}})},"esri/layers/vectorTiles/core/LRUMap":function(){define(["require","exports"],function(a,e){return function(){function a(a,
b){void 0===a&&(a=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a;b&&(b.disposeFunction&&(this.disposeFunction=b.disposeFunction),b.sizeOfFunction&&(this.sizeOfFunction=b.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._sizeOf},
enumerable:!0,configurable:!0});a.prototype.clear=function(){var a=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(b,c){a.disposeFunction(c,b)});this._cache.clear();this._sizeOf=0};a.prototype.delete=function(a){var b=this._cache.get(a);return this._cache.delete(a)?(this._sizeOf-=this.sizeOfFunction(b),this._queue.splice(this._queue.indexOf(a),1),this.disposeFunction&&this.disposeFunction(a,b),!0):!1};a.prototype.forEach=function(a,b){this._cache.forEach(a,b)};a.prototype.get=
function(a){var b=this._cache.get(a);if(void 0!==b)return this._queue.splice(this._queue.indexOf(a),1),this._queue.unshift(a),b};a.prototype.has=function(a){return this._cache.has(a)};a.prototype.set=function(a,b){var c=this.get(a);void 0!==c?this._sizeOf-=this.sizeOfFunction(c):this._queue.unshift(a);this._sizeOf+=this.sizeOfFunction(b);this._cache.set(a,b);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var a=this._queue.pop(),b=
this._cache.get(a);this._cache.delete(a)&&(this._sizeOf-=this.sizeOfFunction(b),this.disposeFunction&&this.disposeFunction(a,b))}};return a}()})},"esri/layers/vectorTiles/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(a,e,b,c){function d(a,b){Array.isArray(a)?a.forEach(b):b(a)}function h(a,b,c,f,g){g=a.watch(b,function(b,d,g,h){f&&!f(b)||c.call(a,b,d,g,h)},g);d(b,function(b){var d=a.get(b);f&&f(d)&&c.call(a,d,d,b,a)});return g}function g(a,
d,f,g,k){function l(){e&&(e.remove(),e=null)}var m=!1,e,n=new b(l),p=new c;p.cancel=n.cancel;p.isCanceled=n.isCanceled;p.isFulfilled=n.isFulfilled;p.isRejected=n.isRejected;p.isResolved=n.isResolved;p.then=n.then;p.remove=l;Object.freeze(p);e=h(a,d,function(b,c,d,g){m=!0;l();f&&f.call(a,b,c,d,g);n.resolve({value:b,oldValue:c,propertyName:d,target:g})},g,k);m&&e.remove();return p}function f(a){return!!a}function k(a){return!a}function l(a){return!0===a}function m(a){return!1===a}function n(a){return void 0!==
a}function p(a){return void 0===a}function q(a,b,c,d){var f=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=a.watch(b,c,d);f.forEach(function(b){b=b.trim();var d=a.get(b);c.call(a,d,d,b,a)});return b}Object.defineProperty(e,"__esModule",{value:!0});e.init=q;e.watch=function(a,b,c,d){return a.watch(b,c,d)};e.once=function(a,b,c,d){return g(a,b,c,null,d)};e.when=function(a,b,c,d){return h(a,b,c,f,d)};e.whenOnce=function(a,b,c,d){return g(a,b,c,f,d)};e.whenNot=function(a,b,c,d){return h(a,b,
c,k,d)};e.whenNotOnce=function(a,b,c,d){return g(a,b,c,k,d)};e.whenTrue=function(a,b,c,d){return h(a,b,c,l,d)};e.whenTrueOnce=function(a,b,c,d){return g(a,b,c,l,d)};e.whenFalse=function(a,b,c,d){return h(a,b,c,m,d)};e.whenFalseOnce=function(a,b,c,d){return g(a,b,c,m,d)};e.whenDefined=function(a,b,c,d){return h(a,b,c,n,d)};e.whenDefinedOnce=function(a,b,c,d){return g(a,b,c,n,d)};e.whenUndefined=function(a,b,c,d){return h(a,b,c,p,d)};e.whenUndefinedOnce=function(a,b,c,d){return g(a,b,c,p,d)};e.pausable=
function(a,b,c,d){var f=!1,g=a.watch(b,function(b,d,g,h){f||c.call(a,b,d,g,h)},d);return{remove:function(){g.remove()},pause:function(){f=!0},resume:function(){f=!1}}};e.on=function(a,b,c,d,f,g,h){function k(b){var d=l[b];d&&(g&&g(d.target,b,a,c),d.handle.remove(),delete l[b])}var l={},m=q(a,b,function(b,g,h){k(h);b&&"function"===typeof b.on&&(l[h]={handle:b.on(c,d),target:b},f&&f(b,h,a,c))},h);return{remove:function(){m.remove();for(var a in l)k(a)}}}})},"esri/layers/vectorTiles/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),
function(a,e,b,c,d,h,g){function f(a){var b;"vector-tile"===a.service.type?b=a.service.url+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height:(b=a.service.tileServers,b=(b&&b.length?b[a.row%b.length]:a.service.url)+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height);(a=a.service.query)&&(b=b+"?"+a);return b}Object.defineProperty(e,"__esModule",{value:!0});a=function(){function a(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}a.prototype.getAvailability=
function(a,b){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";a=(a-this.location.top)*this.location.width+(b-this.location.left);b=a>>3;var c=this._tileAvailabilityBitSet;return 0>b||b>c.length?"unknown":c[b]&1<<a%8?"available":"unavailable"};a.prototype._updateFromData=function(a){for(var b=!0,c=!0,d=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),f=0,g=0;g<a.length;g++){var h=g%8;a[g]?(c=!1,d[f]|=1<<h):b=!1;7===h&&++f}this._isAllUnvailable=
c;this._isAllAvailable=b;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};a.fromDefinition=function(h,k){var l=h.service.request||c,m=h.row,e=h.col,t=h.width,r=h.height,u={query:{f:"json"},callbackParamName:"callback"};k=k?b({},u,k):u;return l(f(h),k).then(function(a){return a.data}).catch(function(a){if(a&&a.details&&422===a.details.httpStatus){a=[];for(var b=0,c=t*r;b<c;b++)a[b]=0;return{location:{top:m,left:e,width:t,height:r},valid:!0,data:a}}return g.reject(a)}).then(function(b){if(b.location&&
(b.location.top!==m||b.location.left!==e||b.location.width!==t||b.location.height!==r))throw new d("tilemap:location-mismatch","Tilemap response for different location than requested",{response:b,definition:{top:m,left:e,width:t,height:r}});return a.fromJSON(b)})};a.fromJSON=function(b){a.validateJSON(b);var c=new a;c.location=Object.freeze(h.clone(b.location));c._updateFromData(b.data);return Object.freeze(c)};a.validateJSON=function(a){if(!a||!a.location)throw new d("tilemap:missing-location","Location missing from tilemap response");
if(!1===a.valid)throw new d("tilemap:invalid","Tilemap response was marked as invalid");if(!a.data)throw new d("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(a.data))throw new d("tilemap:data-mismatch","Data must be an array of numbers");if(a.data.length!==a.location.width*a.location.height)throw new d("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return a}();e.Tilemap=a;e.tilemapDefinitionId=function(a){return a.level+"/"+
a.row+"/"+a.col+"/"+a.width+"/"+a.height};e.tilemapDefinitionUrl=f;e.default=a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(a,e,b,c){return function(){function a(c,d){this.styleJSON=c;this.version=parseFloat(c.version);this.sprite=d?d.spriteUrl:c.sprite;this.glyphs=d?d.glyphsUrl:c.glyphs;if(b("stable-symbol-rendering")){var f=(c.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];
f&&(c.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=f.layout["text-font"])})}this.layers=(c.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],b=[],c=0,d=0,l=this.layers;d<l.length;d++){var m=l[d];if(1===m.type){var e=m,p=m.sourceLayer,p=p+("|"+JSON.stringify(m.minzoom)),p=p+("|"+JSON.stringify(m.maxzoom)),p=p+("|"+JSON.stringify(m.filter));if(e.hasDataDrivenFill||e.hasDataDrivenOutline)p+="|"+JSON.stringify(c);
a.push({key:p,layer:m})}2===m.type&&(e=m,p=m.sourceLayer,p+="|"+JSON.stringify(m.minzoom),p+="|"+JSON.stringify(m.maxzoom),p+="|"+JSON.stringify(m.filter),p+="|"+JSON.stringify(m.layout&&m.layout["line-cap"]),p+="|"+JSON.stringify(m.layout&&m.layout["line-join"]),e.hasDataDrivenLine&&(p+="|"+JSON.stringify(c)),b.push({key:p,layer:m}));++c}this._assignRefLayers(a);this._assignRefLayers(b)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,
c,d=a.length,h=0;h<d;h++){var m=a[h];if(m.key===b)m.layer.refLayerId=c;else if(b=m.key,c=m.layer.id,1===m.layer.type&&!m.layer.getPaintProperty("fill-outline-color"))for(var e=h+1;e<d;e++){var p=a[e];if(p.key===b){if(p.layer.getPaintProperty("fill-outline-color")){a[h]=p;a[e]=m;c=p.layer.id;break}}else break}}};a._create=function(a,b,d){b=1-1/(d.length+1)*(1+b);switch(a.type){case "background":return new c.BackgroundStyleLayer(0,a,b);case "fill":return new c.FillStyleLayer(1,a,b);case "line":return new c.LineStyleLayer(2,
a,b);case "symbol":return new c.SymbolStyleLayer(3,a,b);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new c.CircleStyleLayer(4,a,b)}throw Error("Unknown vector tile layer");};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(a,e,b,c,d,h,g){Object.defineProperty(e,
"__esModule",{value:!0});a=function(){function a(a,b,c){this.type=a;this.id=b.id;this.source=b.source;this.sourceLayer=b["source-layer"];this.minzoom=b.minzoom;this.maxzoom=b.maxzoom;this.filter=b.filter;this.layout=b.layout;this.paint=b.paint;this.z=c;switch(a){case 0:this._layoutDefinition=h.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=h.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=h.StyleDefinition.fillLayoutDefinition;this._paintDefinition=
h.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=h.StyleDefinition.lineLayoutDefinition;this._paintDefinition=h.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=h.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=h.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=h.StyleDefinition.circleLayoutDefinition,this._paintDefinition=h.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=d.createFilter(this.filter)};a.prototype.getLayoutProperty=function(a){var b=this._layoutProperties;if(b)return b[a]};a.prototype.getPaintProperty=function(a){var b=this._paintProperties;if(b)return b[a]};a.prototype.getLayoutValue=function(a,b,c){var d,f=this._layoutProperties;f&&(f=f[a])&&(d=f.getValue(b,c));a=this._layoutDefinition[a];
void 0===d&&(d=a["default"]);"enum"===a.type&&(d=a.values.indexOf(d));return d};a.prototype.getPaintValue=function(a,b,c){var d,f=this._paintProperties;f&&(f=f[a])&&(d=f.getValue(b,c));a=this._paintDefinition[a];void 0===d&&(d=a["default"]);"enum"===a.type&&(d=a.values.indexOf(d));return d};a.prototype._parseLayout=function(a){var b={},c;for(c in a){var d=this._layoutDefinition[c];d&&(b[c]=new g(c,d,a[c]))}return b};a.prototype._parsePaint=function(a){var b={},c;for(c in a){var d=this._paintDefinition[c];
d&&(b[c]=new g(c,d,a[c]))}return b};return a}();e.StyleLayer=a;c=function(a){function c(b,c,d){return a.call(this,b,c,d)||this}b(c,a);return c}(a);e.BackgroundStyleLayer=c;c=function(a){function c(b,c,d){b=a.call(this,b,c,d)||this;c=b.getPaintProperty("fill-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("fill-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;b.hasDataDrivenFill=b.hasDataDrivenColor||b.hasDataDrivenOpacity;c=b.getPaintProperty("fill-outline-color");b.outlineUsesFillColor=
!c;b.hasDataDrivenOutlineColor=c?c.isDataDriven:!1;b.hasDataDrivenOutline=(c?b.hasDataDrivenOutlineColor:b.hasDataDrivenColor)||b.hasDataDrivenOpacity;return b}b(c,a);return c}(a);e.FillStyleLayer=c;c=function(a){function c(b,c,d){b=a.call(this,b,c,d)||this;c=b.getPaintProperty("line-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("line-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("line-width");b.hasDataDrivenWidth=c?c.isDataDriven:!1;b.hasDataDrivenLine=
b.hasDataDrivenColor||b.hasDataDrivenOpacity||b.hasDataDrivenWidth;return b}b(c,a);return c}(a);e.LineStyleLayer=c;c=function(a){function c(b,c,d){b=a.call(this,b,c,d)||this;c=b.getPaintProperty("icon-color");b.hasDataDrivenIconColor=c?c.isDataDriven:!1;c=b.getPaintProperty("icon-opacity");b.hasDataDrivenIconOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("icon-size");b.hasDataDrivenIconSize=c?c.isDataDriven:!1;b.hasDataDrivenIcon=b.hasDataDrivenIconColor||b.hasDataDrivenIconOpacity||b.hasDataDrivenIconSize;
c=b.getPaintProperty("text-color");b.hasDataDrivenTextColor=c?c.isDataDriven:!1;c=b.getPaintProperty("text-opacity");b.hasDataDrivenTextOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("text-size");b.hasDataDrivenTextSize=c?c.isDataDriven:!1;b.hasDataDrivenText=b.hasDataDrivenTextColor||b.hasDataDrivenTextOpacity||b.hasDataDrivenTextSize;return b}b(c,a);return c}(a);e.SymbolStyleLayer=c;a=function(a){function c(b,c,d){b=a.call(this,b,c,d)||this;c=b.getPaintProperty("circle-radius");b.hasDataDrivenRadius=
c?c.isDataDriven:!1;c=b.getPaintProperty("circle-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-width");b.hasDataDrivenStrokeWidth=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-color");b.hasDataDrivenStrokeColor=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-opacity");b.hasDataDrivenStrokeOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-blur");b.hasDataDrivenBlur=
c?c.isDataDriven:!1;return b}b(c,a);return c}(a);e.CircleStyleLayer=a;a=function(){return function(a,b,c){this.cap=a.getLayoutValue("line-cap",b,c);this.join=a.getLayoutValue("line-join",b,c);this.miterLimit=a.getLayoutValue("line-miter-limit",b,c);this.roundLimit=a.getLayoutValue("line-round-limit",b,c)}}();e.LineLayout=a;a=function(){return function(a,b,c,d){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,d);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,d);this.optional=
a.getLayoutValue("icon-optional",b,d);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,d);this.size=a.getLayoutValue("icon-size",b,d);this.rotate=a.getLayoutValue("icon-rotate",b,d);this.padding=a.getLayoutValue("icon-padding",b,d);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,d);this.offset=a.getLayoutValue("icon-offset",b,d);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();e.IconLayout=a;a=function(){return function(a,b,c,d){this.allowOverlap=a.getLayoutValue("text-allow-overlap",
b,d);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,d);this.optional=a.getLayoutValue("text-optional",b,d);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,d);this.fontArray=a.getLayoutValue("text-font",b,d);this.maxWidth=a.getLayoutValue("text-max-width",b,d);this.lineHeight=a.getLayoutValue("text-line-height",b,d);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,d);this.justify=a.getLayoutValue("text-justify",b,d);this.anchor=a.getLayoutValue("text-anchor",
b,d);this.maxAngle=a.getLayoutValue("text-max-angle",b,d);this.size=a.getLayoutValue("text-size",b,d);this.rotate=a.getLayoutValue("text-rotate",b,d);this.padding=a.getLayoutValue("text-padding",b,d);this.keepUpright=a.getLayoutValue("text-keep-upright",b,d);this.transform=a.getLayoutValue("text-transform",b,d);this.offset=a.getLayoutValue("text-offset",b,d);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();e.TextLayout=a})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(a,e){return function(){function a(b,d,h){this._op=b;"$type"===d?(this._val=h instanceof Array?h.map(function(b){return a._types.indexOf(b)}):a._types.indexOf(h),this._op+=11):(this._key=d,this._val=h)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=
this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var b=0,c=this._val;b<c.length;b++){var g=c[b];if(g.filter(a))return!0}return!1;case 10:b=0;for(c=this._val;b<c.length;b++)if(g=c[b],!g.filter(a))return!1;return!0;case 11:b=0;for(c=this._val;b<c.length;b++)if(g=c[b],g.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<
this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var c=b[0];if(1>=b.length)return new a(0,void 0,"any"!==c);switch(c){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,
b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+c);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require",
"exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});a=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel",
"round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",
default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},
"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},
"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};a.circleLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",
value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",
minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",
value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map",
"viewport"],default:"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};a.circlePaintDefinition=
{"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",
minimum:0,maximum:1,default:1}};return a}();e.StyleDefinition=a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(a,e,b,c){return function(){function a(b,c,d){this.isDataDriven=!1;switch(c.type){case "number":b=!0;break;case "color":b=!0;d=a._parseColor(d);break;case "array":b="number"===c.value;break;default:b=!1}null==d&&(d=c.default);b&&"interval"===d.type&&(b=!1);var f=d&&d.stops&&0<d.stops.length;
if(f)for(var g=0,h=d.stops;g<h.length;g++){var e=h[g];e[1]=this._validate(e[1],c)}if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,c)),f)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,c);break;case "categorical":this.getValue=this._buildCategorical(d,c);break;default:this.getValue=b?this._buildInterpolate(d,c):this._buildInterval(d,c)}else this.getValue=this._buildIdentity(d,c);else f?this.getValue=b?this._buildZoomInterpolate(d):
this._buildZoomInterval(d):(d=this._validate(d,c),this.getValue=this._buildSimple(d))}a.prototype._validate=function(a,b){if("number"===b.type){if(a<b.minimum)return b.minimum;if(a>b.maximum)return b.maximum}return a};a.prototype._buildSimple=function(a){return function(){return a}};a.prototype._buildIdentity=function(b,c){var d=this;return function(f,g){var h;g&&(h=g.values[b.property],"color"===c.type&&(h=a._parseColor(h)));void 0===h&&(h=b.default);return void 0!==h?d._validate(h,c):c.default}};
a.prototype._buildCategorical=function(a,b){var c=this;return function(d,f){var g;f&&(g=f.values[a.property]);g=c._categorical(g,a.stops);return void 0!==g?g:void 0!==a.default?a.default:b.default}};a.prototype._buildInterval=function(a,b){var c=this;return function(d,f){var g;f&&(g=f.values[a.property]);return"number"===typeof g?c._interval(g,a.stops):void 0!==a.default?a.default:b.default}};a.prototype._buildInterpolate=function(a,b){var c=this;return function(d,f){var g;f&&(g=f.values[a.property]);
return"number"===typeof g?c._interpolate(g,a.stops,a.base||1):void 0!==a.default?a.default:b.default}};a.prototype._buildZoomInterpolate=function(a){var b=this;return function(c){return b._interpolate(c,a.stops,a.base||1)}};a.prototype._buildZoomInterval=function(a){var b=this;return function(c){return b._interval(c,a.stops)}};a.prototype._categorical=function(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d][0]===a)return b[d][1]};a.prototype._interval=function(a,b){for(var c=b.length,d=0,g=0;g<c;g++)if(b[g][0]<=
a)d=g;else break;return b[d][1]};a.prototype._interpolate=function(a,b,d){for(var f,g,h=b.length,e=0;e<h;e++){var p=b[e];if(p[0]<=a)f=p;else{g=p;break}}if(f&&g){e=g[0]-f[0];a-=f[0];d=1===d?a/e:(Math.pow(d,a)-1)/(Math.pow(d,e)-1);if(Array.isArray(f[1])){f=f[1];g=g[1];a=[];for(e=0;e<f.length;e++)a.push(c.interpolate(f[e],g[e],d));return a}return c.interpolate(f[1],g[1],d)}if(f)return f[1];if(g)return g[1]};a._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a._parseColor=
function(c){if(Array.isArray(c))return c;if("string"===typeof c){if(c=new b(c),!this._isEmpty(c))return b.toUnitRGBA(c)}else return c&&c.default&&(c.default=a._parseColor(c.default)),c&&c.stops&&(c.stops=c.stops.map(function(b){return[b[0],a._parseColor(b[1])]})),c};return a}()})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(a,e,b){function c(a){return Math.max(0,Math.min(e.ensureInteger(a),255))}var d=a([b],{declaredClass:"esri.Color",
toJSON:function(){return[c(this.r),c(this.g),c(this.b),1<this.a?this.a:c(255*this.a)]},clone:function(){return new d(this.toRgba())}});d.toJSON=function(a){return a&&[c(a.r),c(a.g),c(a.b),1<a.a?a.a:c(255*a.a)]};d.fromJSON=function(a){return a&&new d([a[0],a[1],a[2],a[3]/255])};d.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};d.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var h="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(a=0;a<h.length;a++)d[h[a]]=
b[h[a]];d.named.rebeccapurple=[102,51,153];return d})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(a,e,b,c){var d={};e.setObject("dojo.colors",d);var h=function(a,b,c){0>c&&++c;1<c&&--c;var d=6*c;return 1>d?a+(b-a)*d:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};a.colorFromRgb=b.fromRgb=function(a,d){var f=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(f){a=f[2].split(/\s*,\s*/);var g=a.length,f=f[1];if("rgb"==f&&3==g||"rgba"==f&&
4==g)return f=a[0],"%"==f.charAt(f.length-1)?(f=c.map(a,function(a){return 2.56*parseFloat(a)}),4==g&&(f[3]=a[3]),b.fromArray(f,d)):b.fromArray(a,d);if("hsl"==f&&3==g||"hsla"==f&&4==g){var f=(parseFloat(a[0])%360+360)%360/360,k=parseFloat(a[1])/100,e=parseFloat(a[2])/100,k=.5>=e?e*(k+1):e+k-e*k,e=2*e-k,f=[256*h(e,k,f+1/3),256*h(e,k,f),256*h(e,k,f-1/3),1];4==g&&(f[3]=a[3]);return b.fromArray(f,d)}}return null};var g=function(a,b,c){a=Number(a);return isNaN(a)?c:a<b?b:a>c?c:a};b.prototype.sanitize=
function(){this.r=Math.round(g(this.r,0,255));this.g=Math.round(g(this.g,0,255));this.b=Math.round(g(this.b,0,255));this.a=g(this.a,0,1);return this};d.makeGrey=b.makeGrey=function(a,c){return b.fromArray([a,a,a,c])};e.mixin(b.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,
255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,
79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],
khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,
255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,
165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,
90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return b})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(a,e){function b(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(e,"__esModule",{value:!0});
e.C_INFINITY=Number.POSITIVE_INFINITY;e.C_PI=Math.PI;e.C_2PI=2*e.C_PI;e.C_PI_BY_2=e.C_PI/2;e.C_RAD_TO_256=128/e.C_PI;e.C_256_TO_RAD=e.C_PI/128;e.C_DEG_TO_256=256/360;e.C_DEG_TO_RAD=e.C_PI/180;e.C_SQRT2=1.414213562;e.C_SQRT2_INV=1/e.C_SQRT2;var c=1/Math.LN2;e.positiveMod=b;e.radToByte=function(a){return b(a*e.C_RAD_TO_256,256)};e.degToByte=function(a){return b(a*e.C_DEG_TO_256,256)};e.log2=function(a){return Math.log(a)*c};e.sqr=function(a){return a*a};e.clamp=function(a,b,c){return Math.min(Math.max(a,
b),c)};e.interpolate=function(a,b,c){return a*(1-c)+b*c};e.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/promiseUtils ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec3 ../2d/engine/Container ../2d/engine/webgl/enums ../2d/engine/webgl/WGLPainter ./GeometryUtils ./renderers/Renderer".split(" "),function(a,e,b,c,d,h,g,f,k,l,
m,n){return function(a){function f(){var b=a.call(this)||this;b.isInitialized=!1;b._displayWidth=0;b._displayHeight=0;b._pointToCallbacks=new Map;b._tileCoordinateScale=g.create();b._orientationVec=g.create();b._displayScale=g.create();b._orientationVec.set([0,0,1]);b._defaultTransform=h.create();return b}b(f,a);f.prototype.initialize=function(a,b,c,d){this._renderer=new n;this._renderer.initialize(a,b);this._tileInfoView=d;this._tileInfo=c;this.isInitialized=!0};f.prototype.destroy=function(){this._renderer&&
(this._renderer.dispose(),this._renderer=null)};f.prototype.hittest=function(a,b){var c=this,f=[a,b];return d.create(function(a,b){c._pointToCallbacks.set(f,{resolve:a,reject:b});c.requestRender()},function(){c._pointToCallbacks.has(f)&&c._pointToCallbacks.delete(f)})};f.prototype.prepareChildrenRenderParameters=function(a){var b=a.state;if(!b||!this._tileInfo||!this.isInitialized)return a;a.displayLevel=this._tileInfo.scaleToZoom(b.scale);a.requiredLevel=this._tileInfoView.getClosestInfoForScale(b.scale).level;
a.renderer=this._renderer;return a};f.prototype.renderChildren=function(b){var d=this;if(0!==this.children.length&&this.isInitialized&&b&&b.state){var f=l.default.toWGLDrawPhases(b.drawPhase);if(!(0<f.length&&f[0]===k.WGLDrawPhase.LABEL)){this.sortChildren(function(a,b){return a.key.level-b.key.level});for(var f=this.children.length,g=1;g<=f;g++){var h=this.children[g-1];h.attached&&(h.stencilData.reference=g,h.stencilData.mask=255)}this._updateTilesTransform(b.state,this._tileInfoView.getClosestInfoForScale(b.state.scale).level,
this.children);f=b.context;f.setDepthWriteEnabled(!0);this._renderer.setStateParams(b.state,b.pixelRatio,b.displayLevel);this._renderer.drawClippingMasks(f,this.children);f.setStencilWriteMask(0);f.setBlendFunctionSeparate(1,771,1,771);f.setStencilOp(7680,7680,7681);f.setDepthFunction(515);f.setBlendingEnabled(!1);f.setStencilTestEnabled(!0);f.setDepthTestEnabled(!0);f.setDepthWriteEnabled(!0);b.drawphase=0;a.prototype.renderChildren.call(this,b);f.setDepthWriteEnabled(!1);f.setBlendingEnabled(!0);
b.drawphase=1;a.prototype.renderChildren.call(this,b);b.drawphase=2;a.prototype.renderChildren.call(this,b);f.setStencilTestEnabled(!1);f.setDepthTestEnabled(!1);if(c("esri-vector-tiles-debug"))for(g=0,h=this.children;g<h.length;g++){var e=h[g];e.attached&&e.visible&&this._renderer.renderTileInfo(f,e)}0<this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(a,c){a.resolve(d._hitTest(b,c[0],c[1]))}),this._pointToCallbacks.clear());this._renderer.needsRedraw()&&this.requestRender()}}};
f.prototype.removeAllChildren=function(){for(var b=0;b<this.children.length;b++)this.children[b].dispose();a.prototype.removeAllChildren.call(this)};f.prototype._hitTest=function(a,b,c){var d=this._tileInfoView.getClosestInfoForScale(a.state.scale).level,f=[0,0];a.state.toMap(f,[b,c]);var g=a.state.clone(),h=g.viewpoint.clone(),k=h.targetGeometry;k.x=f[0];k.y=f[1];h.targetGeometry=k;g.viewpoint=h;g.size=[3,3];this._renderer.setStateParams(g,a.pixelRatio,a.displayLevel);return(a=this._renderer.hitTest({drawPhase:0,
pixelRatio:a.pixelRatio,stationary:a.stationary,opacity:a.opacity,context:a.context,displayLevel:a.displayLevel,requiredLevel:a.requiredLevel,renderer:a.renderer,layerOpacity:a.layerOpacity,state:g,drawphase:3,painter:null},b,c,this.children,d,3,this._updateTilesTransform.bind(this)))&&0!==a.length?a[0]:null};f.prototype._updateTilesTransform=function(a,b,c){var d=1/a.width,f=1/a.height,g=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(b).resolution,a.resolution,a.rotation,this._tileInfo.size[1],
4096,a.width,a.height,this._defaultTransform);for(var h=0;h<c.length;h++){var k=c[h];a.toScreen(g,k.coords);g[1]=a.height-g[1];k.tileTransform.displayCoord[0]=2*g[0]*d-1;k.tileTransform.displayCoord[1]=2*g[1]*f-1;k.key.level===b&&4096===k.coordRange?k.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(k.key.level).resolution,a.resolution,a.rotation,this._tileInfo.size[1],k.coordRange,a.width,a.height,k.tileTransform.transform)}};f.prototype._calculateRelativeViewProjMat=
function(a,b,c,d,f,g,k,e){var l=.125;512!==d&&4096!==f&&(l=d/f);a=a/b*l;this._tileCoordinateScale.set([a,a,1]);if(g!==this._displayWidth||k!==this._displayHeight)this._displayScale.set([2/g,-2/k,1]),this._displayWidth=g,this._displayHeight=k;h.identity(e);h.scale(e,e,this._tileCoordinateScale);h.rotate(e,e,-c*m.C_DEG_TO_RAD,this._orientationVec);h.scale(e,e,this._displayScale);h.transpose(e,e)};return f}(f)})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(a){var e=
{scalar:{},SIMD:{},create:function(){var b=new a.ARRAY_TYPE(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},clone:function(b){var c=new a.ARRAY_TYPE(16);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=
c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},fromValues:function(b,c,d,h,g,f,k,e,m,n,p,q,t,r,u,v){var l=new a.ARRAY_TYPE(16);l[0]=b;l[1]=c;l[2]=d;l[3]=h;l[4]=g;l[5]=f;l[6]=k;l[7]=e;l[8]=m;l[9]=n;l[10]=p;l[11]=q;l[12]=t;l[13]=r;l[14]=u;l[15]=v;return l},set:function(a,c,d,h,g,f,k,e,m,n,p,q,t,r,u,v,w){a[0]=c;a[1]=d;a[2]=h;a[3]=g;a[4]=f;a[5]=k;a[6]=e;a[7]=m;a[8]=n;a[9]=p;a[10]=q;a[11]=t;a[12]=r;a[13]=u;a[14]=v;a[15]=w;return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};e.scalar.transpose=function(a,c){if(a===c){var b=c[1],h=c[2],g=c[3],f=c[6],k=c[7],e=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=h;a[9]=f;a[11]=c[14];a[12]=g;a[13]=k;a[14]=e}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],
a[14]=c[11],a[15]=c[15];return a};e.SIMD.transpose=function(a,c){var b,h,g,f,k,e;b=SIMD.Float32x4.load(c,0);h=SIMD.Float32x4.load(c,4);g=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);f=SIMD.Float32x4.shuffle(b,h,0,1,4,5);k=SIMD.Float32x4.shuffle(g,c,0,1,4,5);e=SIMD.Float32x4.shuffle(f,k,0,2,4,6);f=SIMD.Float32x4.shuffle(f,k,1,3,5,7);SIMD.Float32x4.store(a,0,e);SIMD.Float32x4.store(a,4,f);f=SIMD.Float32x4.shuffle(b,h,2,3,6,7);k=SIMD.Float32x4.shuffle(g,c,2,3,6,7);b=SIMD.Float32x4.shuffle(f,
k,0,2,4,6);h=SIMD.Float32x4.shuffle(f,k,1,3,5,7);SIMD.Float32x4.store(a,8,b);SIMD.Float32x4.store(a,12,h);return a};e.transpose=a.USE_SIMD?e.SIMD.transpose:e.scalar.transpose;e.scalar.invert=function(a,c){var b=c[0],h=c[1],g=c[2],f=c[3],k=c[4],e=c[5],m=c[6],n=c[7],p=c[8],q=c[9],t=c[10],r=c[11],u=c[12],v=c[13],w=c[14];c=c[15];var A=b*e-h*k,z=b*m-g*k,x=b*n-f*k,y=h*m-g*e,C=h*n-f*e,D=g*n-f*m,E=p*v-q*u,I=p*w-t*u,H=p*c-r*u,Q=q*w-t*v,U=q*c-r*v,G=t*c-r*w,R=A*G-z*U+x*Q+y*H-C*I+D*E;if(!R)return null;R=1/R;
a[0]=(e*G-m*U+n*Q)*R;a[1]=(g*U-h*G-f*Q)*R;a[2]=(v*D-w*C+c*y)*R;a[3]=(t*C-q*D-r*y)*R;a[4]=(m*H-k*G-n*I)*R;a[5]=(b*G-g*H+f*I)*R;a[6]=(w*x-u*D-c*z)*R;a[7]=(p*D-t*x+r*z)*R;a[8]=(k*U-e*H+n*E)*R;a[9]=(h*H-b*U-f*E)*R;a[10]=(u*C-v*x+c*A)*R;a[11]=(q*x-p*C-r*A)*R;a[12]=(e*I-k*Q-m*E)*R;a[13]=(b*Q-h*I+g*E)*R;a[14]=(v*z-u*y-w*A)*R;a[15]=(p*y-q*z+t*A)*R;return a};e.SIMD.invert=function(a,c){var b,h,g,f,k,e,m,n;k=SIMD.Float32x4.load(c,0);e=SIMD.Float32x4.load(c,4);m=SIMD.Float32x4.load(c,8);n=SIMD.Float32x4.load(c,
12);c=SIMD.Float32x4.shuffle(k,e,0,1,4,5);h=SIMD.Float32x4.shuffle(m,n,0,1,4,5);b=SIMD.Float32x4.shuffle(c,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,c,1,3,5,7);c=SIMD.Float32x4.shuffle(k,e,2,3,6,7);f=SIMD.Float32x4.shuffle(m,n,2,3,6,7);g=SIMD.Float32x4.shuffle(c,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,c,1,3,5,7);c=SIMD.Float32x4.mul(g,f);c=SIMD.Float32x4.swizzle(c,1,0,3,2);k=SIMD.Float32x4.mul(h,c);e=SIMD.Float32x4.mul(b,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,c),
k);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);c=SIMD.Float32x4.mul(h,g);c=SIMD.Float32x4.swizzle(c,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),k);n=SIMD.Float32x4.mul(b,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,c));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),f);c=SIMD.Float32x4.swizzle(c,1,0,3,2);g=SIMD.Float32x4.swizzle(g,
2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,c),k);m=SIMD.Float32x4.mul(b,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(g,c));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);c=SIMD.Float32x4.mul(b,h);c=SIMD.Float32x4.swizzle(c,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),m);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,c),n);c=SIMD.Float32x4.swizzle(c,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,c),m);n=SIMD.Float32x4.sub(n,
SIMD.Float32x4.mul(g,c));c=SIMD.Float32x4.mul(b,f);c=SIMD.Float32x4.swizzle(c,1,0,3,2);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(g,c));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),m);c=SIMD.Float32x4.swizzle(c,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,c),e);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(h,c));c=SIMD.Float32x4.mul(b,g);c=SIMD.Float32x4.swizzle(c,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),e);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(h,c));c=SIMD.Float32x4.swizzle(c,2,
3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(f,c));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),n);b=SIMD.Float32x4.mul(b,k);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,2,3,0,1),b);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,1,0,3,2),b);c=SIMD.Float32x4.reciprocalApproximation(b);b=SIMD.Float32x4.sub(SIMD.Float32x4.add(c,c),SIMD.Float32x4.mul(b,SIMD.Float32x4.mul(c,c)));b=SIMD.Float32x4.swizzle(b,0,0,0,0);if(!b)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,k));SIMD.Float32x4.store(a,
4,SIMD.Float32x4.mul(b,e));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(b,m));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(b,n));return a};e.invert=a.USE_SIMD?e.SIMD.invert:e.scalar.invert;e.scalar.adjoint=function(a,c){var b=c[0],h=c[1],g=c[2],f=c[3],k=c[4],e=c[5],m=c[6],n=c[7],p=c[8],q=c[9],t=c[10],r=c[11],u=c[12],v=c[13],w=c[14];c=c[15];a[0]=e*(t*c-r*w)-q*(m*c-n*w)+v*(m*r-n*t);a[1]=-(h*(t*c-r*w)-q*(g*c-f*w)+v*(g*r-f*t));a[2]=h*(m*c-n*w)-e*(g*c-f*w)+v*(g*n-f*m);a[3]=-(h*(m*r-n*t)-e*(g*r-f*t)+q*(g*
n-f*m));a[4]=-(k*(t*c-r*w)-p*(m*c-n*w)+u*(m*r-n*t));a[5]=b*(t*c-r*w)-p*(g*c-f*w)+u*(g*r-f*t);a[6]=-(b*(m*c-n*w)-k*(g*c-f*w)+u*(g*n-f*m));a[7]=b*(m*r-n*t)-k*(g*r-f*t)+p*(g*n-f*m);a[8]=k*(q*c-r*v)-p*(e*c-n*v)+u*(e*r-n*q);a[9]=-(b*(q*c-r*v)-p*(h*c-f*v)+u*(h*r-f*q));a[10]=b*(e*c-n*v)-k*(h*c-f*v)+u*(h*n-f*e);a[11]=-(b*(e*r-n*q)-k*(h*r-f*q)+p*(h*n-f*e));a[12]=-(k*(q*w-t*v)-p*(e*w-m*v)+u*(e*t-m*q));a[13]=b*(q*w-t*v)-p*(h*w-g*v)+u*(h*t-g*q);a[14]=-(b*(e*w-m*v)-k*(h*w-g*v)+u*(h*m-g*e));a[15]=b*(e*t-m*q)-k*
(h*t-g*q)+p*(h*m-g*e);return a};e.SIMD.adjoint=function(a,c){var b,h,g,f,k,e,m,n;b=SIMD.Float32x4.load(c,0);h=SIMD.Float32x4.load(c,4);g=SIMD.Float32x4.load(c,8);f=SIMD.Float32x4.load(c,12);e=SIMD.Float32x4.shuffle(b,h,0,1,4,5);k=SIMD.Float32x4.shuffle(g,f,0,1,4,5);c=SIMD.Float32x4.shuffle(e,k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,e,1,3,5,7);e=SIMD.Float32x4.shuffle(b,h,2,3,6,7);h=SIMD.Float32x4.shuffle(g,f,2,3,6,7);b=SIMD.Float32x4.shuffle(e,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,e,1,3,5,7);e=SIMD.Float32x4.mul(b,
h);e=SIMD.Float32x4.swizzle(e,1,0,3,2);g=SIMD.Float32x4.mul(k,e);f=SIMD.Float32x4.mul(c,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,e),g);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,e),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);e=SIMD.Float32x4.mul(k,b);e=SIMD.Float32x4.swizzle(e,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,e),g);n=SIMD.Float32x4.mul(c,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(h,e));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,
e),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);e=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,3,0,1),h);e=SIMD.Float32x4.swizzle(e,1,0,3,2);b=SIMD.Float32x4.swizzle(b,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,e),g);m=SIMD.Float32x4.mul(c,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(b,e));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,e),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);e=SIMD.Float32x4.mul(c,k);e=SIMD.Float32x4.swizzle(e,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,
e),m);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),n);e=SIMD.Float32x4.swizzle(e,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,e),m);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(b,e));e=SIMD.Float32x4.mul(c,h);e=SIMD.Float32x4.swizzle(e,1,0,3,2);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(b,e));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),m);e=SIMD.Float32x4.swizzle(e,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,e),f);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(k,e));e=SIMD.Float32x4.mul(c,b);
e=SIMD.Float32x4.swizzle(e,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,e),f);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(k,e));e=SIMD.Float32x4.swizzle(e,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(h,e));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),n);SIMD.Float32x4.store(a,0,g);SIMD.Float32x4.store(a,4,f);SIMD.Float32x4.store(a,8,m);SIMD.Float32x4.store(a,12,n);return a};e.adjoint=a.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint;e.determinant=function(a){var b=a[0],d=a[1],h=a[2],g=a[3],f=a[4],
k=a[5],e=a[6],m=a[7],n=a[8],p=a[9],q=a[10],t=a[11],r=a[12],u=a[13],v=a[14];a=a[15];return(b*k-d*f)*(q*a-t*v)-(b*e-h*f)*(p*a-t*u)+(b*m-g*f)*(p*v-q*u)+(d*e-h*k)*(n*a-t*r)-(d*m-g*k)*(n*v-q*r)+(h*m-g*e)*(n*u-p*r)};e.SIMD.multiply=function(a,c,d){var b=SIMD.Float32x4.load(c,0),g=SIMD.Float32x4.load(c,4),f=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var k=SIMD.Float32x4.load(d,0),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,
1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),c))));SIMD.Float32x4.store(a,0,k);k=SIMD.Float32x4.load(d,4);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),c))));SIMD.Float32x4.store(a,
4,k);k=SIMD.Float32x4.load(d,8);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),c))));SIMD.Float32x4.store(a,8,k);d=SIMD.Float32x4.load(d,12);b=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,
1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(a,12,b);return a};e.scalar.multiply=function(a,c,d){var b=c[0],g=c[1],f=c[2],k=c[3],e=c[4],m=c[5],n=c[6],p=c[7],q=c[8],t=c[9],r=c[10],u=c[11],v=c[12],w=c[13],A=c[14];c=c[15];var z=d[0],x=d[1],y=d[2],C=d[3];a[0]=z*b+x*e+y*q+C*v;a[1]=z*g+x*m+y*t+C*w;a[2]=z*f+x*n+y*r+C*A;a[3]=z*k+x*p+y*u+C*c;z=d[4];x=d[5];y=d[6];C=d[7];a[4]=z*b+x*e+y*q+
C*v;a[5]=z*g+x*m+y*t+C*w;a[6]=z*f+x*n+y*r+C*A;a[7]=z*k+x*p+y*u+C*c;z=d[8];x=d[9];y=d[10];C=d[11];a[8]=z*b+x*e+y*q+C*v;a[9]=z*g+x*m+y*t+C*w;a[10]=z*f+x*n+y*r+C*A;a[11]=z*k+x*p+y*u+C*c;z=d[12];x=d[13];y=d[14];C=d[15];a[12]=z*b+x*e+y*q+C*v;a[13]=z*g+x*m+y*t+C*w;a[14]=z*f+x*n+y*r+C*A;a[15]=z*k+x*p+y*u+C*c;return a};e.multiply=a.USE_SIMD?e.SIMD.multiply:e.scalar.multiply;e.mul=e.multiply;e.scalar.translate=function(a,c,d){var b=d[0],g=d[1];d=d[2];var f,k,e,m,n,p,q,t,r,u,v,w;c===a?(a[12]=c[0]*b+c[4]*g+
c[8]*d+c[12],a[13]=c[1]*b+c[5]*g+c[9]*d+c[13],a[14]=c[2]*b+c[6]*g+c[10]*d+c[14],a[15]=c[3]*b+c[7]*g+c[11]*d+c[15]):(f=c[0],k=c[1],e=c[2],m=c[3],n=c[4],p=c[5],q=c[6],t=c[7],r=c[8],u=c[9],v=c[10],w=c[11],a[0]=f,a[1]=k,a[2]=e,a[3]=m,a[4]=n,a[5]=p,a[6]=q,a[7]=t,a[8]=r,a[9]=u,a[10]=v,a[11]=w,a[12]=f*b+n*g+r*d+c[12],a[13]=k*b+p*g+u*d+c[13],a[14]=e*b+q*g+v*d+c[14],a[15]=m*b+t*g+w*d+c[15]);return a};e.SIMD.translate=function(a,c,d){var b=SIMD.Float32x4.load(c,0),g=SIMD.Float32x4.load(c,4),f=SIMD.Float32x4.load(c,
8),k=SIMD.Float32x4.load(c,12);d=SIMD.Float32x4(d[0],d[1],d[2],0);c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11]);b=SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,0,0,0,0));g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(d,1,1,1,1));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(d,2,2,2,2));c=SIMD.Float32x4.add(b,SIMD.Float32x4.add(g,SIMD.Float32x4.add(f,k)));SIMD.Float32x4.store(a,12,c);return a};e.translate=a.USE_SIMD?
e.SIMD.translate:e.scalar.translate;e.scalar.scale=function(a,c,d){var b=d[0],g=d[1];d=d[2];a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*g;a[5]=c[5]*g;a[6]=c[6]*g;a[7]=c[7]*g;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};e.SIMD.scale=function(a,c,d){var b;d=SIMD.Float32x4(d[0],d[1],d[2],0);b=SIMD.Float32x4.load(c,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,0,0,0,0)));b=SIMD.Float32x4.load(c,
4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,1,1,1,1)));b=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,2,2,2,2)));a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};e.scale=a.USE_SIMD?e.SIMD.scale:e.scalar.scale;e.rotate=function(b,c,d,h){var g=h[0],f=h[1];h=h[2];var k=Math.sqrt(g*g+f*f+h*h),e,m,n,p,q,t,r,u,v,w,A,z,x,y,C,D,E,I,H,Q;if(Math.abs(k)<a.EPSILON)return null;k=1/k;g*=k;f*=k;h*=k;e=Math.sin(d);m=Math.cos(d);
n=1-m;d=c[0];k=c[1];p=c[2];q=c[3];t=c[4];r=c[5];u=c[6];v=c[7];w=c[8];A=c[9];z=c[10];x=c[11];y=g*g*n+m;C=f*g*n+h*e;D=h*g*n-f*e;E=g*f*n-h*e;I=f*f*n+m;H=h*f*n+g*e;Q=g*h*n+f*e;g=f*h*n-g*e;f=h*h*n+m;b[0]=d*y+t*C+w*D;b[1]=k*y+r*C+A*D;b[2]=p*y+u*C+z*D;b[3]=q*y+v*C+x*D;b[4]=d*E+t*I+w*H;b[5]=k*E+r*I+A*H;b[6]=p*E+u*I+z*H;b[7]=q*E+v*I+x*H;b[8]=d*Q+t*g+w*f;b[9]=k*Q+r*g+A*f;b[10]=p*Q+u*g+z*f;b[11]=q*Q+v*g+x*f;c!==b&&(b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);return b};e.scalar.rotateX=function(a,c,d){var b=
Math.sin(d);d=Math.cos(d);var g=c[4],f=c[5],k=c[6],e=c[7],m=c[8],n=c[9],p=c[10],q=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=g*d+m*b;a[5]=f*d+n*b;a[6]=k*d+p*b;a[7]=e*d+q*b;a[8]=m*d-g*b;a[9]=n*d-f*b;a[10]=p*d-k*b;a[11]=q*d-e*b;return a};e.SIMD.rotateX=function(a,c,d){var b=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);
var g=SIMD.Float32x4.load(c,4);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,d),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,d),SIMD.Float32x4.mul(g,b)));return a};e.rotateX=a.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX;e.scalar.rotateY=function(a,c,d){var b=Math.sin(d);d=Math.cos(d);var g=c[0],f=c[1],k=c[2],e=c[3],m=c[8],n=c[9],p=c[10],q=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=
c[13],a[14]=c[14],a[15]=c[15]);a[0]=g*d-m*b;a[1]=f*d-n*b;a[2]=k*d-p*b;a[3]=e*d-q*b;a[8]=g*b+m*d;a[9]=f*b+n*d;a[10]=k*b+p*d;a[11]=e*b+q*d;return a};e.SIMD.rotateY=function(a,c,d){var b=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var g=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,d),SIMD.Float32x4.mul(c,b)));
SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,b),SIMD.Float32x4.mul(c,d)));return a};e.rotateY=a.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY;e.scalar.rotateZ=function(a,c,d){var b=Math.sin(d);d=Math.cos(d);var g=c[0],f=c[1],k=c[2],e=c[3],m=c[4],n=c[5],p=c[6],q=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=g*d+m*b;a[1]=f*d+n*b;a[2]=k*d+p*b;a[3]=e*d+q*b;a[4]=m*d-g*b;a[5]=n*d-f*b;a[6]=p*d-k*b;a[7]=q*d-e*b;return a};e.SIMD.rotateZ=
function(a,c,d){var b=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var g=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,d),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,d),SIMD.Float32x4.mul(g,b)));return a};e.rotateZ=a.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ;
e.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};e.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromRotation=function(b,c,d){var h=d[0],g=d[1];d=d[2];var f=Math.sqrt(h*h+g*g+d*d),k;if(Math.abs(f)<a.EPSILON)return null;f=1/f;h*=f;g*=f;d*=f;f=Math.sin(c);c=Math.cos(c);
k=1-c;b[0]=h*h*k+c;b[1]=g*h*k+d*f;b[2]=d*h*k-g*f;b[3]=0;b[4]=h*g*k-d*f;b[5]=g*g*k+c;b[6]=d*g*k+h*f;b[7]=0;b[8]=h*d*k+g*f;b[9]=g*d*k-h*f;b[10]=d*d*k+c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};e.fromXRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=b;a[7]=0;a[8]=0;a[9]=-b;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromYRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=0;a[2]=-b;a[3]=0;a[4]=0;a[5]=1;a[6]=
0;a[7]=0;a[8]=b;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromZRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=b;a[2]=0;a[3]=0;a[4]=-b;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromRotationTranslation=function(a,c,d){var b=c[0],g=c[1],f=c[2],k=c[3],e=b+b,m=g+g,n=f+f;c=b*e;var p=b*m,b=b*n,q=g*m,g=g*n,f=f*n,e=k*e,m=k*m,k=k*n;a[0]=1-(q+f);a[1]=p+k;a[2]=b-m;a[3]=0;a[4]=p-k;a[5]=1-(c+f);a[6]=g+e;a[7]=0;a[8]=
b+m;a[9]=g-e;a[10]=1-(c+q);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};e.getTranslation=function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};e.getRotation=function(a,c){var b=c[0]+c[5]+c[10],h=0;0<b?(h=2*Math.sqrt(b+1),a[3]=.25*h,a[0]=(c[6]-c[9])/h,a[1]=(c[8]-c[2])/h,a[2]=(c[1]-c[4])/h):c[0]>c[5]&c[0]>c[10]?(h=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/h,a[0]=.25*h,a[1]=(c[1]+c[4])/h,a[2]=(c[8]+c[2])/h):c[5]>c[10]?(h=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/h,a[0]=(c[1]+
c[4])/h,a[1]=.25*h,a[2]=(c[6]+c[9])/h):(h=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/h,a[0]=(c[8]+c[2])/h,a[1]=(c[6]+c[9])/h,a[2]=.25*h);return a};e.fromRotationTranslationScale=function(a,c,d,h){var b=c[0],f=c[1],k=c[2],e=c[3],m=b+b,n=f+f,p=k+k;c=b*m;var q=b*n,b=b*p,t=f*n,f=f*p,k=k*p,m=e*m,n=e*n,e=e*p,p=h[0],r=h[1];h=h[2];a[0]=(1-(t+k))*p;a[1]=(q+e)*p;a[2]=(b-n)*p;a[3]=0;a[4]=(q-e)*r;a[5]=(1-(c+k))*r;a[6]=(f+m)*r;a[7]=0;a[8]=(b+n)*h;a[9]=(f-m)*h;a[10]=(1-(c+t))*h;a[11]=0;a[12]=d[0];a[13]=d[1];
a[14]=d[2];a[15]=1;return a};e.fromRotationTranslationScaleOrigin=function(a,c,d,h,g){var b=c[0],k=c[1],e=c[2],m=c[3],n=b+b,p=k+k,q=e+e;c=b*n;var t=b*p,b=b*q,r=k*p,k=k*q,e=e*q,n=m*n,p=m*p,m=m*q,q=h[0],u=h[1];h=h[2];var v=g[0],w=g[1];g=g[2];a[0]=(1-(r+e))*q;a[1]=(t+m)*q;a[2]=(b-p)*q;a[3]=0;a[4]=(t-m)*u;a[5]=(1-(c+e))*u;a[6]=(k+n)*u;a[7]=0;a[8]=(b+p)*h;a[9]=(k-n)*h;a[10]=(1-(c+r))*h;a[11]=0;a[12]=d[0]+v-(a[0]*v+a[4]*w+a[8]*g);a[13]=d[1]+w-(a[1]*v+a[5]*w+a[9]*g);a[14]=d[2]+g-(a[2]*v+a[6]*w+a[10]*g);
a[15]=1;return a};e.fromQuat=function(a,c){var b=c[0],h=c[1],g=c[2];c=c[3];var f=b+b,k=h+h,e=g+g,b=b*f,m=h*f,h=h*k,n=g*f,p=g*k,g=g*e,f=c*f,k=c*k;c*=e;a[0]=1-h-g;a[1]=m+c;a[2]=n-k;a[3]=0;a[4]=m-c;a[5]=1-b-g;a[6]=p+f;a[7]=0;a[8]=n+k;a[9]=p-f;a[10]=1-b-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.frustum=function(a,c,d,h,g,f,k){var b=1/(d-c),e=1/(g-h),n=1/(f-k);a[0]=2*f*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*e;a[6]=0;a[7]=0;a[8]=(d+c)*b;a[9]=(g+h)*e;a[10]=(k+f)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=
k*f*2*n;a[15]=0;return a};e.perspective=function(a,c,d,h,g){c=1/Math.tan(c/2);var b=1/(h-g);a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+h)*b;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*h*b;a[15]=0;return a};e.perspectiveFromFieldOfView=function(a,c,d,h){var b=Math.tan(c.upDegrees*Math.PI/180),f=Math.tan(c.downDegrees*Math.PI/180),k=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var e=2/(k+c),m=2/(b+f);a[0]=e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
m;a[6]=0;a[7]=0;a[8]=-((k-c)*e*.5);a[9]=(b-f)*m*.5;a[10]=h/(d-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*d/(d-h);a[15]=0;return a};e.ortho=function(a,c,d,h,g,f,k){var b=1/(c-d),e=1/(h-g),n=1/(f-k);a[0]=-2*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(c+d)*b;a[13]=(g+h)*e;a[14]=(k+f)*n;a[15]=1;return a};e.lookAt=function(b,c,d,h){var g,f,k,l,m,n,p,q,t=c[0],r=c[1];c=c[2];k=h[0];l=h[1];f=h[2];p=d[0];h=d[1];g=d[2];if(Math.abs(t-p)<a.EPSILON&&Math.abs(r-h)<a.EPSILON&&
Math.abs(c-g)<a.EPSILON)return e.identity(b);d=t-p;h=r-h;p=c-g;q=1/Math.sqrt(d*d+h*h+p*p);d*=q;h*=q;p*=q;g=l*p-f*h;f=f*d-k*p;k=k*h-l*d;(q=Math.sqrt(g*g+f*f+k*k))?(q=1/q,g*=q,f*=q,k*=q):k=f=g=0;l=h*k-p*f;m=p*g-d*k;n=d*f-h*g;(q=Math.sqrt(l*l+m*m+n*n))?(q=1/q,l*=q,m*=q,n*=q):n=m=l=0;b[0]=g;b[1]=l;b[2]=d;b[3]=0;b[4]=f;b[5]=m;b[6]=h;b[7]=0;b[8]=k;b[9]=n;b[10]=p;b[11]=0;b[12]=-(g*t+f*r+k*c);b[13]=-(l*t+m*r+n*c);b[14]=-(d*t+h*r+p*c);b[15]=1;return b};e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+
", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};e.add=function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+
d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];a[4]=c[4]+d[4];a[5]=c[5]+d[5];a[6]=c[6]+d[6];a[7]=c[7]+d[7];a[8]=c[8]+d[8];a[9]=c[9]+d[9];a[10]=c[10]+d[10];a[11]=c[11]+d[11];a[12]=c[12]+d[12];a[13]=c[13]+d[13];a[14]=c[14]+d[14];a[15]=c[15]+d[15];return a};e.subtract=function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];a[4]=c[4]-d[4];a[5]=c[5]-d[5];a[6]=c[6]-d[6];a[7]=c[7]-d[7];a[8]=c[8]-d[8];a[9]=c[9]-d[9];a[10]=c[10]-d[10];a[11]=c[11]-d[11];a[12]=c[12]-d[12];a[13]=c[13]-d[13];a[14]=c[14]-
d[14];a[15]=c[15]-d[15];return a};e.sub=e.subtract;e.multiplyScalar=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12]*d;a[13]=c[13]*d;a[14]=c[14]*d;a[15]=c[15]*d;return a};e.multiplyScalarAndAdd=function(a,c,d,h){a[0]=c[0]+d[0]*h;a[1]=c[1]+d[1]*h;a[2]=c[2]+d[2]*h;a[3]=c[3]+d[3]*h;a[4]=c[4]+d[4]*h;a[5]=c[5]+d[5]*h;a[6]=c[6]+d[6]*h;a[7]=c[7]+d[7]*h;a[8]=c[8]+d[8]*h;a[9]=c[9]+
d[9]*h;a[10]=c[10]+d[10]*h;a[11]=c[11]+d[11]*h;a[12]=c[12]+d[12]*h;a[13]=c[13]+d[13]*h;a[14]=c[14]+d[14]*h;a[15]=c[15]+d[15]*h;return a};e.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};e.equals=function(b,c){var d=b[0],h=b[1],g=b[2],f=b[3],k=b[4],e=b[5],m=b[6],n=b[7],p=b[8],q=b[9],t=b[10],r=b[11],
u=b[12],v=b[13],w=b[14];b=b[15];var A=c[0],z=c[1],x=c[2],y=c[3],C=c[4],D=c[5],E=c[6],I=c[7],H=c[8],Q=c[9],U=c[10],G=c[11],R=c[12],X=c[13],K=c[14];c=c[15];return Math.abs(d-A)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-z)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(g-x)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(f-y)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(k-C)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(C))&&Math.abs(e-D)<=a.EPSILON*Math.max(1,
Math.abs(e),Math.abs(D))&&Math.abs(m-E)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(n-I)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(p-H)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(H))&&Math.abs(q-Q)<=a.EPSILON*Math.max(1,Math.abs(q),Math.abs(Q))&&Math.abs(t-U)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(U))&&Math.abs(r-G)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(G))&&Math.abs(u-R)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(v-X)<=a.EPSILON*Math.max(1,Math.abs(v),
Math.abs(X))&&Math.abs(w-K)<=a.EPSILON*Math.max(1,Math.abs(w),Math.abs(K))&&Math.abs(b-c)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))};return e})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var a={EPSILON:1E-6};a.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;a.RANDOM=Math.random;a.ENABLE_SIMD=!1;a.SIMD_AVAILABLE=a.ARRAY_TYPE===Float32Array&&"SIMD"in this;a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE;a.setMatrixArrayType=function(b){a.ARRAY_TYPE=
b};var e=Math.PI/180;a.toRadian=function(a){return a*e};a.equals=function(b,c){return Math.abs(b-c)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))};return a})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(a){var e={create:function(){var b=new a.ARRAY_TYPE(3);b[0]=0;b[1]=0;b[2]=0;return b},clone:function(b){var c=new a.ARRAY_TYPE(3);c[0]=b[0];c[1]=b[1];c[2]=b[2];return c},fromValues:function(b,c,d){var h=new a.ARRAY_TYPE(3);h[0]=b;h[1]=c;h[2]=d;return h},
copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},set:function(a,c,d,h){a[0]=c;a[1]=d;a[2]=h;return a},add:function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a},subtract:function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];return a}};e.sub=e.subtract;e.multiply=function(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];a[2]=c[2]*d[2];return a};e.mul=e.multiply;e.divide=function(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];a[2]=c[2]/d[2];return a};e.div=e.divide;e.ceil=function(a,c){a[0]=
Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);return a};e.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);return a};e.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);a[2]=Math.min(c[2],d[2]);return a};e.max=function(a,c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);a[2]=Math.max(c[2],d[2]);return a};e.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=Math.round(c[2]);return a};e.scale=function(a,c,d){a[0]=
c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;return a};e.scaleAndAdd=function(a,c,d,h){a[0]=c[0]+d[0]*h;a[1]=c[1]+d[1]*h;a[2]=c[2]+d[2]*h;return a};e.distance=function(a,c){var b=c[0]-a[0],h=c[1]-a[1];a=c[2]-a[2];return Math.sqrt(b*b+h*h+a*a)};e.dist=e.distance;e.squaredDistance=function(a,c){var b=c[0]-a[0],h=c[1]-a[1];a=c[2]-a[2];return b*b+h*h+a*a};e.sqrDist=e.squaredDistance;e.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};e.len=e.length;e.squaredLength=function(a){var b=a[0],d=
a[1];a=a[2];return b*b+d*d+a*a};e.sqrLen=e.squaredLength;e.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};e.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};e.normalize=function(a,c){var b=c[0],h=c[1],g=c[2],b=b*b+h*h+g*g;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b);return a};e.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]};e.cross=function(a,c,d){var b=c[0],g=c[1];c=c[2];var f=d[0],k=d[1];d=d[2];a[0]=g*d-c*k;a[1]=c*f-b*d;a[2]=b*k-g*f;return a};
e.lerp=function(a,c,d,h){var b=c[0],f=c[1];c=c[2];a[0]=b+h*(d[0]-b);a[1]=f+h*(d[1]-f);a[2]=c+h*(d[2]-c);return a};e.hermite=function(a,c,d,h,g,f){var b=f*f,e=b*(2*f-3)+1,m=b*(f-2)+f,n=b*(f-1);f=b*(3-2*f);a[0]=c[0]*e+d[0]*m+h[0]*n+g[0]*f;a[1]=c[1]*e+d[1]*m+h[1]*n+g[1]*f;a[2]=c[2]*e+d[2]*m+h[2]*n+g[2]*f;return a};e.bezier=function(a,c,d,h,g,f){var b=1-f,e=b*b,m=f*f,n=e*b,e=3*f*e,b=3*m*b;f*=m;a[0]=c[0]*n+d[0]*e+h[0]*b+g[0]*f;a[1]=c[1]*n+d[1]*e+h[1]*b+g[1]*f;a[2]=c[2]*n+d[2]*e+h[2]*b+g[2]*f;return a};
e.random=function(b,c){c=c||1;var d=2*a.RANDOM()*Math.PI,h=2*a.RANDOM()-1,g=Math.sqrt(1-h*h)*c;b[0]=Math.cos(d)*g;b[1]=Math.sin(d)*g;b[2]=h*c;return b};e.transformMat4=function(a,c,d){var b=c[0],g=c[1];c=c[2];var f=d[3]*b+d[7]*g+d[11]*c+d[15],f=f||1;a[0]=(d[0]*b+d[4]*g+d[8]*c+d[12])/f;a[1]=(d[1]*b+d[5]*g+d[9]*c+d[13])/f;a[2]=(d[2]*b+d[6]*g+d[10]*c+d[14])/f;return a};e.transformMat3=function(a,c,d){var b=c[0],g=c[1];c=c[2];a[0]=b*d[0]+g*d[3]+c*d[6];a[1]=b*d[1]+g*d[4]+c*d[7];a[2]=b*d[2]+g*d[5]+c*d[8];
return a};e.transformQuat=function(a,c,d){var b=c[0],g=c[1],f=c[2];c=d[0];var k=d[1],e=d[2];d=d[3];var m=d*b+k*f-e*g,n=d*g+e*b-c*f,p=d*f+c*g-k*b,b=-c*b-k*g-e*f;a[0]=m*d+b*-c+n*-e-p*-k;a[1]=n*d+b*-k+p*-c-m*-e;a[2]=p*d+b*-e+m*-k-n*-c;return a};e.rotateX=function(a,c,d,h){var b=[],f=[];b[0]=c[0]-d[0];b[1]=c[1]-d[1];b[2]=c[2]-d[2];f[0]=b[0];f[1]=b[1]*Math.cos(h)-b[2]*Math.sin(h);f[2]=b[1]*Math.sin(h)+b[2]*Math.cos(h);a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};e.rotateY=function(a,c,d,h){var b=
[],f=[];b[0]=c[0]-d[0];b[1]=c[1]-d[1];b[2]=c[2]-d[2];f[0]=b[2]*Math.sin(h)+b[0]*Math.cos(h);f[1]=b[1];f[2]=b[2]*Math.cos(h)-b[0]*Math.sin(h);a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};e.rotateZ=function(a,c,d,h){var b=[],f=[];b[0]=c[0]-d[0];b[1]=c[1]-d[1];b[2]=c[2]-d[2];f[0]=b[0]*Math.cos(h)-b[1]*Math.sin(h);f[1]=b[0]*Math.sin(h)+b[1]*Math.cos(h);f[2]=b[2];a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};e.forEach=function(){var a=e.create();return function(b,d,h,g,f,k){d||(d=3);
h||(h=0);for(g=g?Math.min(g*d+h,b.length):b.length;h<g;h+=d)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,k),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}();e.angle=function(a,c){a=e.fromValues(a[0],a[1],a[2]);c=e.fromValues(c[0],c[1],c[2]);e.normalize(a,a);e.normalize(c,c);c=e.dot(a,c);return 1<c?0:Math.acos(c)};e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};e.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]};e.equals=function(b,c){var d=b[0],h=b[1];b=b[2];var g=c[0],
f=c[1];c=c[2];return Math.abs(d-g)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(h-f)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(b-c)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))};return e})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(a,e,b,c){var d;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=
3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"})(d||(d={}));return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._childrenSet=new Set;b._childrenToAttach=[];b._childrenToDetach=[];b._renderPhase=d.DONE;b.children=[];return b}b(c,a);Object.defineProperty(c.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});c.prototype.detach=function(a){var b=this.children.concat(this._childrenToDetach);a=this.prepareChildrenRenderParameters(a);
for(var c=0;c<b.length;c++){var d=b[c];d.attached&&(this.detachChild(d,a),d.attached=!1,d.parent=null)}};c.prototype.doRender=function(a){var b=this.prepareChildrenRenderParameters(a);this._renderPhase=d.BEFORE;this.beforeRenderChildren(a,b);this._renderPhase=d.ATTACHING;this.attachChildren(b);this._renderPhase=d.DETACHING;for(var c=this._childrenToDetach;0<c.length;){var f=c.shift();this.detachChild(f,b);f.attached=!1;f.parent=null}this._renderPhase=d.RENDERING;this.renderChildren(b);this._renderPhase=
d.AFTER;this.afterRenderChildren(a,b);this._renderPhase=d.DONE};c.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};c.prototype.addChildAt=function(a,b){void 0===b&&(b=this.numChildren);if(!a||this.contains(a))return a;var c=a.parent;c&&c!==this&&c.removeChild(a);b>=this.numChildren?this.children.push(a):this.children.splice(b,0,a);this._childrenSet.add(a);b=this._childrenToDetach.indexOf(a);-1<b&&this._childrenToDetach.splice(b,1);this._childrenToAttach.push(a);this._renderPhase>=
d.RENDERING&&this.requestRender();return a};c.prototype.contains=function(a){return this._childrenSet.has(a)};c.prototype.getChildIndex=function(a){return this.children.indexOf(a)};c.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};c.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};c.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};c.prototype.removeChildAt=
function(a){if(0>a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=d.RENDERING&&this.requestRender();else{var b=this._childrenToAttach.indexOf(a);-1<b&&this._childrenToAttach.splice(b,1)}return a};c.prototype.requestChildRender=function(a){a&&a.parent===this&&this._renderPhase>=d.RENDERING&&this.requestRender()};c.prototype.setChildIndex=function(a,b){var c=this.getChildIndex(a);-1<c&&
(this.children.splice(c,1),this.children.splice(b,0,a),this._renderPhase>=d.RENDERING&&this.requestRender())};c.prototype.sortChildren=function(a){this._renderPhase>d.RENDERING&&this.requestRender();return this.children.sort(a)};c.prototype.attachChildren=function(a){var b=this._childrenToAttach;if(0!==b.length)for(var c=0,d=!1;!d;)d=b[c],this.attachChild(d,a)?(d.attached=!0,d.parent=this,b.splice(c,1)):++c,d=b.length===c};c.prototype.renderChildren=function(a){for(var b=this.children,c=b.length,
d=0;d<c;d++){var f=b[d];f.attached&&this.renderChild(f,a)}};c.prototype.beforeRenderChildren=function(a,b){};c.prototype.attachChild=function(a,b){return a.attach(b)};c.prototype.detachChild=function(a,b){a.detach(b)};c.prototype.renderChild=function(a,b){a.processRender(b)};c.prototype.afterRenderChildren=function(a,b){};return c}(c)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],function(a,e,
b,c){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._renderRequestedCalled=!1;b._attached=!1;b._opacity=1;b.renderRequested=!1;b._visible=!0;return b}b(c,a);Object.defineProperty(c.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&((this._attached=a)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});c.prototype.attach=function(a){return!0};c.prototype.detach=function(a){};c.prototype.processRender=function(a){this._renderRequestedCalled=!1;this.doRender(a);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};c.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};c.prototype.dispose=function(){};return c}(c.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(a,e,b,c,d){Object.defineProperty(e,"__esModule",{value:!0});a=function(){function a(){}a.prototype.on=function(a,b){return c.after(this,"on"+a,b,!0)};a.prototype.once=function(a,b){return d.once(this,a,b)};a.prototype.emit=function(a){d.emit(this,a,this)};a.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return a}();e.Evented=a;e.EventedMixin=function(a){return function(a){function f(){return null!==
a&&a.apply(this,arguments)||this}b(f,a);f.prototype.on=function(a,b){return c.after(this,"on"+a,b,!0)};f.prototype.once=function(a,b){return d.once(this,a,b)};f.prototype.emit=function(a,b){d.emit(this,a,b)};f.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return f}(a)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(e.WGLGeometryType||(e.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(e.WGLGeometryTransactionStatus||(e.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(e.WGLDrawPhase||(e.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(e.VVType||(e.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(e.WGLVVFlag||(e.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(e.WGLVVTarget||(e.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(e.CapType||(e.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(e.JoinType||(e.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(e.EsriSymbolType||(e.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(e.EsriSymbolTypeKebab||(e.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v){Object.defineProperty(e,"__esModule",{value:!0});a=function(){function a(){this._initialized=!1}a.prototype.registerPass=function(a,b){this._initialize();for(var c=0;c<b.length;c++)this._passMap.set(b[c],a);return this};a.prototype.getPaintPassTs=function(a){this._initialize();return this._passMap.has(a)?[this._passMap.get(a)]:[]};a.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return a}();e.WGLPainterOptions=
a;var w=new Uint8Array(4*k.C_HITTEST_SEARCH_SIZE*k.C_HITTEST_SEARCH_SIZE),A=new Uint32Array(w.buffer);a=function(){function a(){this._hlPainter=new u;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new f}a.allGeometryPhases=function(){return[h.WGLDrawPhase.FILL,
h.WGLDrawPhase.LINE,h.WGLDrawPhase.MARKER,h.WGLDrawPhase.TEXT]};a.toWGLDrawPhases=function(a){for(var b=[],c,d=0;d<h.WGLDrawPhase.NUM_DRAW_PHASES;d++)c=1<<d,c&a&&b.push(c);return b};Object.defineProperty(a.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(a){return a.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(a){return a.forEach(function(a){return a.dispose()})}),this._brushes.clear())};a.prototype.initialize=function(a){this.materialManager.initialize(a)};a.prototype.update=function(a,b){this._state=a;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/a.width,this._extrudeScaleVector[1]=-2/a.height,d.identity(this._extrudeMatrix),d.rotate(this._extrudeMatrix,this._extrudeMatrix,-a.rotation*g.C_DEG_TO_RAD,this._extrudeRotateVector),d.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),d.transpose(this._extrudeMatrix,this._extrudeMatrix),d.identity(this._extrudeNoRotationMatrix),d.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),d.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};a.prototype.getBrushes=function(a){if(!this._brushes){var b=new n.default,c=new t.default,d=new q.default,f=new r.default,g=new p.default,k=new l.default,e=new m.default;this._brushes=new Map;this._brushes.set(h.WGLDrawPhase.FILL,[b]);this._brushes.set(h.WGLDrawPhase.MARKER,
[c]);this._brushes.set(h.WGLDrawPhase.LINE,[d]);this._brushes.set(h.WGLDrawPhase.TEXT,[f]);this._brushes.set(h.WGLDrawPhase.LABEL,[g]);this._brushes.set(h.WGLDrawPhase.LABEL_ALPHA,[g]);this._brushes.set(h.WGLDrawPhase.HITTEST,[b,c,d,f]);this._brushes.set(h.WGLDrawPhase.HIGHLIGHT,[b,c,d,f]);this._brushes.set(h.WGLDrawPhase.CLIP,[e]);this._brushes.set(h.WGLDrawPhase.DEBUG,[k])}if(!this._brushes.has(a))throw Error("WGLPainter: Tried to get brush for unknown phase: "+a);return this._brushes.get(a)};a.prototype.bindTextureManager=
function(a){this.textureManager=a};a.prototype.draw=function(a,b,c,d){c[0]===h.WGLDrawPhase.LABEL_ALPHA&&c[0]===h.WGLDrawPhase.LABEL||this._drawClippingRects(a,b);var f=a.context;f.setBlendingEnabled(!0);f.setStencilWriteMask(0);f.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(a,b,c,d);this._debugTiles(a,b)};a.prototype.setHighlightOptions=function(a){this._hlPainter.setHighlightOptions(a)};a.prototype.highlight=function(a,b){var c=a.context,d=c.getViewport();this._hlPainter.setup(c,d.width,
d.height);this._hlPainter.startMaskDraw(c);this._drawClippingRects(a,b);c.setBlendingEnabled(!0);c.setStencilWriteMask(0);c.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(a,b,[h.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(c)};a.prototype.hitTest=function(a,b){var c=k.C_HITTEST_SEARCH_SIZE,d=[0,0],f=[0,0],g=a.state;g.toMap(d,[0,0]);g.toMap(f,[c,c]);if(0===b.filter(function(a){return!(d[0]>a.bounds[2]||f[0]<a.bounds[0]||d[1]<a.bounds[1]||f[1]>a.bounds[3])}).length)return[];g=a.context;this._hittestFBO||
(this._hittestFBO=v.create(g,{colorTarget:0,depthStencilTarget:3,width:c,height:c}));var e=g.getViewport(),m=g.getBoundFramebufferObject();g.bindFramebuffer(this._hittestFBO);g.setViewport(0,0,c,c);this._drawClippingRects(a,b);var l=g.gl;g.setClearColor(1,1,1,1);g.clear(l.COLOR_BUFFER_BIT);g.setBlendingEnabled(!1);g.setStencilWriteMask(0);this._drawPhases(a,b,[h.WGLDrawPhase.HITTEST]);g.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,c,c,6408,5121,w);a=c*c;b=new Set;for(c=0;c<a;c++)l=A[c],
4294967295!==l&&b.add(l);g.bindFramebuffer(m);g.setViewport(e.x,e.y,e.width,e.height);var n=[];b.forEach(function(a){n.push(a)});return n};a.prototype._getPaintPass=function(a){this._passes||(this._passes=new Map);if(!this._passes.has(a))try{this._passes.set(a,new a)}catch(y){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+a+",\n"+y);}return this._passes.get(a)};a.prototype._getPaintPasses=function(a,b){var c=this;return b.getPaintPassTs(a).map(function(a){return c._getPaintPass(a)})};
a.prototype._drawPhases=function(a,c,d,f){a.context.setStencilTestEnabled(!0);for(var g=0;g<d.length;g++){var h=d[g],k=f?this._getPaintPasses(h,f):[],h=b({},a,{drawPhase:h});k.forEach(function(b){return b.preRender(a,a.rendererInfo)});for(var e=0,m=c;e<m.length;e++)m[e].doRender(h);k.reverse().forEach(function(b){return b.postRender(a,a.rendererInfo)})}a.context.setStencilTestEnabled(!1)};a.prototype._debugTiles=function(a,b){c("esri-feature-tiles-debug")&&this._drawPhases(a,b,[h.WGLDrawPhase.DEBUG])};
a.prototype._drawClippingRects=function(a,b){if(0!==b.length){var c=a.context;c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(7680,7680,7681);c.setClearStencil(0);c.clear(c.gl.STENCIL_BUFFER_BIT);c.setStencilWriteMask(255);for(var c=0,d=b.length;c<b.length;c++,d--){var f=b[c];f.attached&&(f.stencilRef=d)}this._drawPhases(a,b,[h.WGLDrawPhase.CLIP]);a.context.setColorMask(!0,!0,!0,!0)}};return a}();
e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(a,e){function b(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(e,"__esModule",{value:!0});e.C_INFINITY=Number.POSITIVE_INFINITY;e.C_PI=Math.PI;e.C_2PI=2*e.C_PI;e.C_PI_BY_2=e.C_PI/2;e.C_RAD_TO_256=128/e.C_PI;e.C_256_TO_RAD=e.C_PI/128;e.C_DEG_TO_256=256/360;e.C_DEG_TO_RAD=e.C_PI/180;e.C_SQRT2=1.414213562;e.C_SQRT2_INV=1/e.C_SQRT2;var c=1/Math.LN2;e.positiveMod=b;e.radToByte=
function(a){return b(a*e.C_RAD_TO_256,256)};e.degToByte=function(a){return b(a*e.C_DEG_TO_256,256)};e.log2=function(a){return Math.log(a)*c};e.sqr=function(a){return a*a};e.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};e.interpolate=function(a,b,c){return a*(1-c)+b*c};e.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(a,e,b,c,d,h,g,f,k,l){return function(){function a(){this._programRep=new Map;this.isInitialize=!1}a.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(a){return a.dispose()}),this._programRep.clear())};a.prototype.initialize=function(a){if(!this.isInitialize){var b=new l("label",["labelVS","labelFS"],[],g,a);b.addDefine("ID","ID",[!0,!0],"ID");b.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");b.addDefine("SDF","SDF",[!1,!1],"SDF");b.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");b.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");b.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");b.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");b.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");b.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");b.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");b.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");b.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");b.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var c=new l("text",["textVS","textFS"],[],k,a);c.addDefine("ID","ID",[!0,!0],"ID");c.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");c.addDefine("SDF","SDF",[!1,!1],"SDF");c.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");c.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");c.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");c.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");c.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");c.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");c.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");c.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");c.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");c.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var e=new l("icon",["iconVS","iconFS"],
[],h,a);e.addDefine("ID","ID",[!0,!0],"ID");e.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");e.addDefine("SDF","SDF",[!0,!0],"SDF");e.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");e.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");e.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");e.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");e.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");e.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");e.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");e.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");e.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");e.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var m=new l("fill",["fillVS","fillFS"],[],d,a);m.addDefine("ID","ID",[!0,!0],"ID");m.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");m.addDefine("SDF","SDF",
[!1,!1],"SDF");m.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");m.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");m.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");m.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");m.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");m.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");m.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");m.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");a=new l("line",["lineVS","lineFS"],[],f,a);a.addDefine("ID","ID",[!0,!0],"ID");a.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");a.addDefine("SDF","SDF",[!0,!0],"SDF");a.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");a.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");a.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");a.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");a.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");a.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");a.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");a.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");a.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");a.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=b;this._textShaderVariations=c;this._fillShaderVariations=m;this._iconShaderVariations=e;this._lineShaderVariations=a;this.isInitialize=!0}};a.prototype.getProgram=function(a,d,f){a|=d===b.WGLDrawPhase.HITTEST?8:0;a|=d===b.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[a])return this._programRep[a];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
d=c.getMaterialVariations(a);var g;switch(d.geometryType){case b.WGLGeometryType.MARKER:g=this._iconShaderVariations.getProgram(d.variations,null,null,f);break;case b.WGLGeometryType.TEXT:g=this._textShaderVariations.getProgram(d.variations,null,null,f);break;case b.WGLGeometryType.LABEL:g=this._labelShaderVariations.getProgram(d.variations,null,null,f);break;case b.WGLGeometryType.FILL:g=this._fillShaderVariations.getProgram(d.variations,null,null,f);break;case b.WGLGeometryType.LINE:g=this._lineShaderVariations.getProgram(d.variations,
null,null,f)}g&&(this._programRep[a]=g);return g};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(a,e,b,c,d){function h(a){var b=[];b[0]=a.sdf?!0:!1;b[1]=a.vvSizeMinMaxValue?!0:!1;b[2]=a.vvSizeScaleStops?!0:!1;b[3]=a.vvSizeFieldStops?!0:!1;b[4]=a.vvSizeUnitValue?!0:!1;b[5]=a.vvColor?!0:!1;b[6]=a.vvRotation?!0:!1;b[7]=a.vvOpacity?!0:!1;b[8]=a.visibility?!0:!1;b[9]=a.pattern?
!0:!1;b[10]=a.heatmap?!0:!1;return b.reduce(function(a,b,c){b&&(a|=1<<c+2);return a},0)}function g(a){if(a.geometryType===b.WGLGeometryType.UNKNOWN)return-1;var c=h(a)<<3;return a.geometryType+c}Object.defineProperty(e,"__esModule",{value:!0});e.createTextMaterialInfo=function(a,h,e){var f=new c.default,k=new d;k.geometryType=e;k.sdf=!0;k.pattern=!1;k.visibility=!1;k.heatmap=!1;f.texBindingInfo.push(new c.TexBindingInfo(2,a.page,"u_texture"));0===h?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=
k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(h&b.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(h&b.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(h&b.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(h&b.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(h&b.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(h&b.WGLVVFlag.COLOR),k.vvRotation=0!==(h&b.WGLVVFlag.ROTATION));f.materialKey=g(k);f.materialKeyInfo=k;return f};e.createMaterialInfo=function(a,h,e){var f=new c.default,
k=new d;k.geometryType=h;a?(a=a.spriteMosaicItem,k.sdf=a.sdf,k.pattern=!0,f.texBindingInfo.push(new c.TexBindingInfo(1,a.page,"u_texture"))):(k.sdf=!1,k.pattern=!1);0===e?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(e&b.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(e&b.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(e&b.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(e&b.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=
0!==(e&b.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(e&b.WGLVVFlag.COLOR),k.vvRotation=0!==(e&b.WGLVVFlag.ROTATION));k.visibility=!1;f.materialKey=g(k);f.materialKeyInfo=k;return f};e.getMaterialKey=g;e.getMaterialVariations=function(a){var b=a&7;a>>=3;return{geometryType:b,variations:[0!==(a&1),0!==(a&2),0!==(a&4),0!==(a&8),0!==(a&16),0!==(a&32),0!==(a&64),0!==(a&128),0!==(a&256),0!==(a&512),0!==(a&1024),0!==(a&2048),0!==(a&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(a,e,b,c,d,h,g){Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function a(a,b,c){this.unit=a;this.pageId=b;this.semantic=c}a.prototype.clone=function(){return new a(this.unit,this.pageId,this.semantic)};a.prototype.serialize=function(a){a.writeInt32(this.unit);a.writeInt32(this.pageId);return a};a.deserialize=function(b){var c=b.readInt32();b=b.readInt32();return new a(c,b,"u_texture")};return a}();e.TexBindingInfo=f;var k=function(){function a(a,b){this.name=a;this.value=
b}a.prototype.clone=function(){return new a(this.name,this.value)};a.prototype.serialize=function(a){a.writeInt32(this.value);return a};a.deserialize=function(b){b=b.readInt32();return new a("u_my_param",b)};return a}();e.MaterialParam=k;a=function(){function a(){this.texBindingInfo=[];this.materialParams=[]}a.fromSprite=function(d,g,k){var e=new a,m=new h;m.geometryType=g;d?(m.sdf=d.sdf,m.pattern=!0,e.texBindingInfo.push(new f(1,d.page,"u_texture"))):(m.sdf=!1,m.pattern=!1);0===k?m.vvOpacity=m.vvSizeMinMaxValue=
m.vvSizeScaleStops=m.vvSizeFieldStops=m.vvSizeUnitValue=m.vvColor=m.vvRotation=!1:(m.vvOpacity=0!==(k&b.WGLVVFlag.OPACITY),m.vvSizeMinMaxValue=0!==(k&b.WGLVVFlag.SIZE_MINMAX_VALUE),m.vvSizeScaleStops=0!==(k&b.WGLVVFlag.SIZE_SCALE_STOPS),m.vvSizeFieldStops=0!==(k&b.WGLVVFlag.SIZE_FIELD_STOPS),m.vvSizeUnitValue=0!==(k&b.WGLVVFlag.SIZE_UNIT_VALUE),m.vvColor=0!==(k&b.WGLVVFlag.COLOR),m.vvRotation=0!==(k&b.WGLVVFlag.ROTATION));m.visibility=!1;e.materialKey=c.getMaterialKey(m);e.materialKeyInfo=m;return e};
a.fromGlyph=function(d,g,k){var e=new a,m=new h;m.geometryType=g;m.sdf=!0;m.pattern=!1;m.visibility=!1;m.heatmap=!1;e.texBindingInfo.push(new f(2,d.page,"u_texture"));0===k?m.vvOpacity=m.vvSizeMinMaxValue=m.vvSizeScaleStops=m.vvSizeFieldStops=m.vvSizeUnitValue=m.vvColor=m.vvRotation=!1:(m.vvOpacity=0!==(k&b.WGLVVFlag.OPACITY),m.vvSizeMinMaxValue=0!==(k&b.WGLVVFlag.SIZE_MINMAX_VALUE),m.vvSizeScaleStops=0!==(k&b.WGLVVFlag.SIZE_SCALE_STOPS),m.vvSizeFieldStops=0!==(k&b.WGLVVFlag.SIZE_FIELD_STOPS),m.vvSizeUnitValue=
0!==(k&b.WGLVVFlag.SIZE_UNIT_VALUE),m.vvColor=0!==(k&b.WGLVVFlag.COLOR),m.vvRotation=0!==(k&b.WGLVVFlag.ROTATION));e.materialKey=c.getMaterialKey(m);e.materialKeyInfo=m;return e};a.prototype.copy=function(a){this.materialParams=a.materialParams.map(function(a){return a.clone()});this.texBindingInfo=a.texBindingInfo.map(function(a){return a.clone()});a.materialKeyInfo&&(this.materialKeyInfo=new h,this.materialKeyInfo.copy(a.materialKeyInfo));this.materialKey=a.materialKey};a.prototype.serialize=function(a){a.writeInt32(this.materialKey);
g.serializeList(a,this.texBindingInfo);g.serializeList(a,this.materialParams);return a};a.deserialize=function(b){var c=new a;c.materialKey=b.readInt32();c.texBindingInfo=g.deserializeList(b,f);c.materialParams=g.deserializeList(b,k);c.materialKeyInfo=new h;d(c.materialKeyInfo,c.materialKey);return c};return a}();e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(a,e){return function(a,c){a.geometryType=
c&7;c>>=3;a.sdf=0!==(c&4);a.vvSizeMinMaxValue=0!==(c&8);a.vvSizeScaleStops=0!==(c&16);a.vvSizeFieldStops=0!==(c&32);a.vvSizeUnitValue=0!==(c&64);a.vvColor=0!==(c&128);a.vvRotation=0!==(c&256);a.vvOpacity=0!==(c&512);a.visibility=0!==(c&1024);a.pattern=0!==(c&2048);a.heatmap=0!==(c&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(a,e){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(a){this.geometryType=a.geometryType;this.sdf=a.sdf;this.vvSizeMinMaxValue=a.vvSizeMinMaxValue;this.vvSizeScaleStops=a.vvSizeScaleStops;this.vvSizeFieldStops=a.vvSizeFieldStops;this.vvSizeUnitValue=a.vvSizeUnitValue;this.vvColor=a.vvColor;this.vvRotation=a.vvRotation;this.vvOpacity=a.vvOpacity;this.visibility=a.visibility;this.pattern=a.pattern;
this.heatmap=a.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});e.serializeList=function(a,c){if(null===c)a.writeInt32(0);else{a.writeInt32(c.length);for(var b=0;b<c.length;b++)c[b].serialize(a);return a}};e.deserializeList=function(a,c,d){for(var b=a.readInt32(),b=Array(b),g=0;g<b.length;g++)b[g]=c.deserialize(a,d);return b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(a,e,b,c){a=new c;c.parse(b,a);return a})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(a,e,b){return function(){function a(a){if(a)for(var b in a)this[b]=a[b]}a.parse=function(a,c){a=b.parse(a).getElementsByTagName("snippet");for(var d=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,f=/[\$\s]+/g,h=/\(([^\(\)]*)\)/,e=0;e<a.length;e++){for(var m=
a[e].getAttribute("name"),n=a[e].textContent;;){var p=n.match(d);if(null==p)break;var q=p[0].replace(f,""),t=q.match(h),r=void 0;t&&(r=t[1].split(",").map(function(a){return a.trim()}));q=q.replace(h,"");r=c._instantiate(q,r);n=n.replace(p[0],r)}c[m]=n}};a.prototype._instantiate=function(a,b){a=this[a];for(b||(b=[]);;){var c=a.match(/\$(\d+)/);if(null==c)break;var d=parseInt(c[1],10);a=a.replace(c[0],b[d])}return a};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require",
"exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(a,e,b,c){a=new c;c.parse(b,a);return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml","../../../../webgl/ShaderSnippets"],function(a,e,b,c){a=new c;c.parse(b,a);return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml",
"../../../../webgl/ShaderSnippets"],function(a,e,b,c){a=new c;c.parse(b,a);return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(a,e,b,c){a=new c;c.parse(b,a);return a})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(a,e,b,c,d){function h(a){return a.reduce(function(a,
b,c){b&&(a|=1<<c);return a},0)}return function(){function a(a,b,c,d,g,h){"string"===typeof a?this._initParams(a,b,c,d,g,h):this._initObject({programNamePrefix:a.programNamePrefix,shaderSnippetPrefixes:a.shaderSnippetPrefixes,baseDefines:a.baseDefines,snippets:a.snippets,rctx:a.rctx,vertexAttribLocs:a.vertexAttribLocs})}a.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(a){return a.dispose()}),this._programCache.clear())};a.prototype._initObject=function(a){this._initParams(a.programNamePrefix,
a.shaderSnippetPrefixes,a.baseDefines,a.snippets,a.rctx,a.vertexAttribLocs)};a.prototype._initParams=function(a,b,d,g,h,e){this._defaultSnippets=g;this._defaultRctx=h;this._defaultVertexAttribLocs=e;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new c(a,b,d)};a.prototype.addDefine=function(a,b,c,d){this._shaderSourceVariator.addDefine(a,b,c,d)};a.prototype.addBinaryShaderSnippetSuffix=function(a,b,c){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(a,b,c)};
a.prototype.addNaryShaderSnippetSuffix=function(a,b){this._shaderSourceVariator.addNaryShaderSnippetSuffix(a,b)};a.prototype.getProgram=function(a,c,g,e){c=c||this._defaultSnippets;g=g||this._defaultRctx;e=e||this._defaultVertexAttribLocs;if(!c)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!g)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!e)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");
var f=h(a);if(this._programCache.has(f))return this._programCache.get(f);a=this._shaderSourceVariator.getShaderVariation(a);var k,m;k=a.shaderSnippetNames[0];m=c[k];d.assert(null!=m,"shader snippet '"+k+"' does not exist");k=a.shaderSnippetNames[1];c=c[k];d.assert(null!=c,"shader snippet '"+k+"' does not exist");g=new b(g,m,c,e,a.defines);this._programCache.set(f,g);return g};a.prototype.getProgramByKey=function(a){if(this._programCache.has(a))return this._programCache.get(a);if(!this._variationInfo[a])return null;
var c=this._variationInfo[a],f=this._defaultSnippets,g=this._defaultRctx,h=this._defaultVertexAttribLocs,e,q;e=c.shaderSnippetNames[0];q=f[e];d.assert(null!=q,"shader snippet '"+e+"' does not exist");e=c.shaderSnippetNames[1];f=f[e];d.assert(null!=f,"shader snippet '"+e+"' does not exist");c=new b(g,q,f,h,c.defines);this._programCache.set(a,c);return c};a.prototype.getProgramInfo=function(a){var b=this._shaderSourceVariator.getShaderVariation(a);a=h(a);this._variationInfo[a]||(this._variationInfo[a]=
b);return{name:b.programName,key:a}};return a}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(a,e,b,c){return function(){function a(c,d,f,e,l){void 0===l&&(l={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3=
{};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=c;this._vertexShaderSource=d;this._fragmentShaderSource=f;if(Array.isArray(l))for(d=0;d<l.length;d++)this._defines[l[d]]="1";else this._defines=l;this._id=a._nextId++;this._locations=e;b("esri-webgl-debug")&&c.instanceCounter.incrementCount(3)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.getDefine=function(a){return this._defines[a]};a.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);
this._context=null}};a.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);var a=this._context.gl,b=a.createProgram();a.attachShader(b,this._vShader);a.attachShader(b,this._fShader);for(var c in this._locations)a.bindAttribLocation(b,this._locations[c],c);a.linkProgram(b);a.getProgramParameter(b,a.LINK_STATUS);this._glName=b;this._initialized=!0}};a.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&
(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};a.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};a.prototype.getAttribLocation=function(a){this.initialize();void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};a.prototype.setUniform1i=function(a,b){var c=this._nameToUniform1[a];if(void 0===
c||b!==c)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),b),this._nameToUniform1[a]=b};a.prototype.setUniform1f=function(a,b){var c=this._nameToUniform1[a];if(void 0===c||b!==c)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),b),this._nameToUniform1[a]=b};a.prototype.setUniform1fv=function(b,c){var d=this._nameToUniform2[b];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(b),
c),void 0===d?this._nameToUniform2[b]=new Float32Array(c):d.set(c))};a.prototype.setUniform2f=function(a,b,c){var d=this._nameToUniform2[a];if(void 0===d||b!==d[0]||c!==d[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),b,c),void 0===d?this._nameToUniform2[a]=new Float32Array([b,c]):(d[0]=b,d[1]=c)};a.prototype.setUniform2fv=function(b,c){var d=this._nameToUniform2[b];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(b),
c),void 0===d?this._nameToUniform2[b]=new Float32Array(c):d.set(c))};a.prototype.setUniform3f=function(a,b,c,d){var f=this._nameToUniform3[a];if(void 0===f||b!==f[0]||c!==f[1]||d!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),b,c,d),void 0===f?this._nameToUniform3[a]=new Float32Array([b,c,d]):(f[0]=b,f[1]=c,f[2]=d)};a.prototype.setUniform3fv=function(b,c){var d=this._nameToUniform3[b];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(b),
c),void 0===d?this._nameToUniform3[b]=new Float32Array(c):d.set(c))};a.prototype.setUniform4f=function(a,b,c,d,e){var f=this._nameToUniform4[a];if(void 0===f||b!==f[0]||c!==f[1]||d!==f[2]||e!==f[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(a),b,c,d,e),void 0===f?this._nameToUniform4[a]=new Float32Array([b,c,d,e]):(f[0]=b,f[1]=c,f[2]=d,f[3]=e)};a.prototype.setUniform4fv=function(b,c){var d=this._nameToUniform4[b];void 0!==d&&a._arraysEqual(c,d)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(b),c),void 0===d?this._nameToUniform4[b]=new Float32Array(c):d.set(c))};a.prototype.setUniformMatrix3fv=function(b,c,d){void 0===d&&(d=!1);var f=this._nameToUniformMatrix3[b];void 0!==f&&(9===f.length?a._matrix3Equal(f,c):a._arraysEqual(c,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(b),d,c),void 0===f?this._nameToUniformMatrix3[b]=new Float32Array(c):f.set(c))};a.prototype.setUniformMatrix4fv=function(b,
c,d){void 0===d&&(d=!1);var f=this._nameToUniformMatrix4[b];void 0!==f&&(16===f.length?a._matrix4Equal(f,c):a._arraysEqual(c,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(b),d,c),void 0===f?this._nameToUniformMatrix4[b]=new Float32Array(c):f.set(c))};a._padToThree=function(a){var b=a.toString();1E3>a&&(b=("  "+a).slice(-3));return b};a.prototype._addLineNumbers=function(b){var c=2;return b.replace(/\n/g,function(){return"\n"+a._padToThree(c++)+":"})};
a.prototype._loadShader=function(a){var b=35633===a,d=b?this._vertexShaderSource:this._fragmentShaderSource,e="",h;for(h in this._defines)e+="#define "+h+" "+this._defines[h]+"\n";d=e+d;"webgl2"===this._context.contextVersion&&(d=c.transpileShader(d,b?"vertex":"fragment"));b=this._context.gl;a=b.createShader(a);b.shaderSource(a,d);b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS);return a};a._matrix4Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&
a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};a._matrix3Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};a._arraysEqual=function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require",
"exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(a,e,b,c){function d(a){return a.map(function(a){return"eof"!==a.type?a.data:""}).join("")}function h(a,b,c,d){d=d||c;for(var f=0;f<a.length;f++){var g=a[f];if("ident"===g.type&&g.data===c)return d in b?b[d]++:b[d]=0,h(a,b,d+"_"+b[d],d)}return c}function g(a,b,c){void 0===c&&(c="afterVersion");var d={data:"\n",type:"whitespace"},f=function(b){return b<a.length?/[^\r\n]$/.test(a[b].data):!1},g=function(a){for(var b=-1,d=0,f=-1,
g=0;g<a.length;g++){var e=a[g];"preprocessor"===e.type&&(e.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++d:e.data.match(/\#endif\s*.*/)&&--d);("afterVersion"===c||"afterPrecision"===c)&&"preprocessor"===e.type&&/^#version/.test(e.data)&&(f=Math.max(f,g));if("afterPrecision"===c&&"keyword"===e.type&&"precision"===e.data){a:{for(e=g;e<a.length;e++){var h=a[e];if("operator"===h.type&&";"===h.data)break a}e=null}if(null===e)throw Error("precision statement not followed by any semicolons!");f=Math.max(f,e)}b<
f&&0===d&&(b=g)}return b+1}(a);f(g-1)&&a.splice(g++,0,d);for(var e=0;e<b.length;e++){var h=b[e];a.splice(g++,0,h)}f(g-1)&&f(g)&&a.splice(g,0,d)}Object.defineProperty(e,"__esModule",{value:!0});var f=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];e.transpileShader=function(a,e){a=c(a);var k;a:{k="100";var l="300 es";void 0===k&&(k="100");void 0===l&&(l="300 es");for(var p=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,q=0;q<a.length;q++){var t=a[q];
if("preprocessor"===t.type){var r=p.exec(t.data);if(r)if(p=r[1].replace(/\s\s+/g," "),p===l){k=p;break a}else if(p===k){t.data="#version "+l;break a}else throw Error("unknown glsl version: "+p);}}a.splice(0,0,{type:"preprocessor",data:"#version "+l},{type:"whitespace",data:"\n"});k=null}if("300 es"===k)throw Error("shader is already glsl 300 es");p=t=null;q={};r={};for(k=0;k<a.length;++k)switch(l=a[k],l.type){case "keyword":"vertex"===e&&"attribute"===l.data?l.data="in":"varying"===l.data&&(l.data=
"vertex"===e?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(l.data.trim())&&(l.data=l.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===e&&"gl_FragColor"===l.data){if(!t){var t=h(a,q,"fragColor"),u=void 0;void 0===u&&(u="lowp");g(a,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:u},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}l.data=
t}else"fragment"===e&&"gl_FragDepthEXT"===l.data&&(p||(p=h(a,q,"gl_FragDepth")),l.data=p);break;case "ident":if(0<=b.indexOf(l.data)){if(u="vertex"===e)a:{for(u=k-1;0<=u;u--){var v=a[u];if("whitespace"!==v.type&&"block-comment"!==v.type)if("keyword"===v.type){if("attribute"===v.data||"in"===v.data){u=!0;break a}}else break}u=!1}if(u)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");l.data in r||(r[l.data]=h(a,q,l.data));l.data=r[l.data]}}for(k=a.length-1;0<=
k;--k)l=a[k],"preprocessor"===l.type&&((e=l.data.match(/\#extension\s+(.*)\:/))&&e[1]&&0<=f.indexOf(e[1].trim())&&(e=a[k+1],a.splice(k,e&&"whitespace"===e.type?2:1)),(e=l.data.match(/\#ifdef\s+(.*)/))&&e[1]&&0<=f.indexOf(e[1].trim())&&(l.data="#if 1"),(e=l.data.match(/\#ifndef\s+(.*)/))&&e[1]&&0<=f.indexOf(e[1].trim())&&(l.data="#if 0"));return d(a)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(a,e){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(a){"use strict;";return function(e){var b=a(),c=[],c=c.concat(b(e));return c=c.concat(b(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(a,e,b){"use strict;";var c="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function d(a){a.length&&
v.push({type:c[q],data:a,position:z,line:w,column:A})}function h(){u=u.length?[]:u;if("/"===r&&"*"===t)return z=p+n-1,q=0,r=t,n+1;if("/"===r&&"/"===t)return z=p+n-1,q=1,r=t,n+1;if("#"===t)return q=2,z=p+n,n;if(/\s/.test(t))return q=9,z=p+n,n;x=/\d/.test(t);y=/[^\w_]/.test(t);z=p+n;q=x?4:y?3:9999;return n}function g(){if(("\r"===t||"\n"===t)&&"\\"!==r)return d(u.join("")),q=999,n;u.push(t);r=t;return n+1}function f(){if("."===r&&/\d/.test(t))return q=5,n;if("/"===r&&"*"===t)return q=0,n;if("/"===r&&
"/"===t)return q=1,n;if("."===t&&u.length){for(;k(u););q=5;return n}if(";"===t||")"===t||"("===t){if(u.length)for(;k(u););d(t);q=999;return n+1}var a=2===u.length&&"\x3d"!==t;if(/[\w_\d\s]/.test(t)||a){for(;k(u););q=999;return n}u.push(t);r=t;return n+1}function k(a){var b=0,c,f;do{c=e.indexOf(a.slice(0,a.length+b).join(""));f=e[c];if(-1===c){if(0<b--+a.length)continue;f=a.slice(0,1).join("")}d(f);z+=f.length;u=u.slice(f.length);return u.length}while(1)}function l(){if("."===t||/[eE]/.test(t))return u.push(t),
q=5,r=t,n+1;if("x"===t&&1===u.length&&"0"===u[0])return q=11,u.push(t),r=t,n+1;if(/[^\d]/.test(t))return d(u.join("")),q=999,n;u.push(t);r=t;return n+1}function m(){"f"===t&&(u.push(t),r=t,n+=1);if(/[eE]/.test(t)||"-"===t&&/[eE]/.test(r))return u.push(t),r=t,n+1;if(/[^\d]/.test(t))return d(u.join("")),q=999,n;u.push(t);r=t;return n+1}var n=0,p=0,q=999,t,r,u=[],v=[],w=1,A=0,z=0,x=!1,y=!1,C="",D;return function(c){v=[];if(null!==c){c=c.replace?c.replace(/\r\n/g,"\n"):c;n=0;C+=c;for(D=C.length;t=C[n],
n<D;){c=n;switch(q){case 0:"/"===t&&"*"===r?(u.push(t),d(u.join("")),q=999):(u.push(t),r=t);n+=1;break;case 1:n=g();break;case 2:n=g();break;case 3:n=f();break;case 4:n=l();break;case 11:/[^a-fA-F0-9]/.test(t)?(d(u.join("")),q=999):(u.push(t),r=t,n+=1);break;case 5:n=m();break;case 9999:if(/[^\d\w_]/.test(t)){var e=u.join("");q=-1<a.indexOf(e)?8:-1<b.indexOf(e)?7:6;d(u.join(""));q=999}else u.push(t),r=t,n+=1;break;case 9:/[^\s]/g.test(t)?(d(u.join("")),q=999):(u.push(t),r=t,n+=1);break;case 999:n=
h()}if(c!==n)switch(C[c]){case "\n":A=0;++w;break;default:++A}}p+=n;C=C.slice(n);return v}u.length&&d(u.join(""));q=10;d("(eof)");return v}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(a,e,b,c){return function(){function a(a,b,d){var f;"string"===typeof a?f=a:(f=a.programNamePrefix,b=a.shaderSnippetPrefixes,d=a.baseDefines);c.assert(b,"you must specify shader snippet prefixes");c.assert(2===b.length,"you must specify shader snippet prefixes for vertex and fragment shaders");d&&0!==d.length||(d=[]);this.programNamePrefix=f;this.shaderSnippetPrefixes=
b;this.baseDefines=d;this.variables=[];this.sealed=!1}a.prototype.addDefine=function(a,b,d,e){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");c.assert(a,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",a],shaderNameSuffixes:e||a,defineStr:b,affectsShaderTypes:d||[!0,!0]})};a.prototype.addBinaryShaderSnippetSuffix=function(a,b,d){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
c.assert(a,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",a],shaderSnippetSuffixes:["",b],affectsShaderTypes:d||[!0,!0]})};a.prototype.addNaryShaderSnippetSuffix=function(a,b){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var d=a.map(function(a){c.assert(null!=a.value,"value must always be specified");return a.value});this.variables.push({values:d,programNameSuffixes:a.map(function(a,b){return null!=a.programNameSuffix?
a.programNameSuffix:d[b]}),shaderSnippetSuffixes:a.map(function(a,b){return null!=a.shaderSnippetSuffix?a.shaderSnippetSuffix:d[b]}),affectsShaderTypes:b||[!0,!0]})};a.prototype.getShaderVariation=function(a){c.assert(a.length===this.variables.length,"you must specify a value for each variable");for(var d=this.programNamePrefix,f=b.clone(this.shaderSnippetPrefixes),e=b.clone(this.shaderSnippetPrefixes),h=b.clone(this.baseDefines),m=0;m<this.variables.length;m++){var n=this.variables[m],p=a[m],q=void 0;
n.values?(q=n.values.indexOf(p),c.assert(0<=q,"invalid value "+p+" for variable "+m)):q=p?1:0;d+=n.programNameSuffixes[q];for(p=0;2>p;p++)n.affectsShaderTypes[p]&&(n.shaderSnippetSuffixes&&(f[p]+=n.shaderSnippetSuffixes[q],e[p]+=n.shaderSnippetSuffixes[q]),n.defineStr&&q&&(h.push(n.defineStr),e[p]+=n.shaderNameSuffixes))}return{programName:d,shaderSnippetNames:f,shaderNames:e,defines:h}};return a}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/Error"],function(a,e,b,c){return function(){function a(){}a.vertexCount=function(b,c){return b.vertexBuffers[c].size/a.getStride(b.layout[c])};a.getStride=function(a){return a[0].stride};a.getBytesPerElement=function(a){switch(a){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};a.addDescriptor=function(b,c,d,e,l,m){var f=a.getBytesPerElement(e);if(0<b.length){var g=
b[0].stride,h=g+f*d;b.forEach(function(a){return a.stride=h});b.push({name:c,count:d,type:e,offset:g,stride:h,normalized:l,divisor:m})}else b.push({name:c,count:d,type:e,offset:0,stride:f*d,normalized:l,divisor:m})};a.assertCompatibleVertexAttributeLocations=function(a,b){return a.locations===b.locations};a.hasAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return!0;return!1};a.findAttribute=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return a[c];return null};a.copyFramebufferToTexture=
function(a,b,c,d,e){void 0===e&&(e=0);var f=a.getBoundFramebufferObject(),g=a.getBoundTexture(0);a.bindFramebuffer(b);a.bindTexture(c,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,e,c.descriptor.pixelFormat,d[0],d[1],d[2],d[3],0);a.gl.flush();a.bindFramebuffer(f);a.bindTexture(g,0)};a.assert=function(a,b){if(!a)throw new c(b);};a.setBaseInstanceOffset=function(a,c){var d={},g;for(g in a)d[g]=a[g].map(function(a){return a.divisor?b({},a,{baseInstance:c}):a});return d};a.bindVertexBufferLayout=function(a,
b,c,d,e){var f=a.gl,g=a.capabilities.instancing;a.bindBuffer(c);d.forEach(function(a){var c=b[a.name],d=(e?e:0+a.baseInstance?a.baseInstance:0)*a.stride;if(4>=a.count)f.vertexAttribPointer(c,a.count,a.type,a.normalized,a.stride,a.offset+d),f.enableVertexAttribArray(c),a.divisor&&0<a.divisor&&g&&g.vertexAttribDivisor(c,a.divisor);else if(9===a.count)for(var h=0;3>h;h++)f.vertexAttribPointer(c+h,3,a.type,a.normalized,a.stride,a.offset+12*h+d),f.enableVertexAttribArray(c+h),a.divisor&&0<a.divisor&&g&&
g.vertexAttribDivisor(c+h,a.divisor);else if(16===a.count)for(h=0;4>h;h++)f.vertexAttribPointer(c+h,4,a.type,a.normalized,a.stride,a.offset+16*h+d),f.enableVertexAttribArray(c+h),a.divisor&&0<a.divisor&&g&&g.vertexAttribDivisor(c+h,a.divisor)})};a.unbindVertexBufferLayout=function(a,b,c,d){var f=a.gl;a.bindBuffer(c);d.forEach(function(a){var c=b[a.name];if(4>=a.count)f.disableVertexAttribArray(c);else if(9===a.count)for(a=0;3>a;a++)f.disableVertexAttribArray(c+a);else if(16===a.count)for(a=0;4>a;a++)f.disableVertexAttribArray(c+
a)});a.unbindBuffer(34962)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(a,e,b,c,d,h,g,f,k,l){function m(a){return a.map(function(a){return a.name})}function n(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.name]=d.strideInBytes}return b}function p(a,
b){switch(a){case k.WGLGeometryType.MARKER:return b?e.C_ICON_VERTEX_NAMES_VV:e.C_ICON_VERTEX_NAMES;case k.WGLGeometryType.FILL:return b?e.C_FILL_VERTEX_NAMES_VV:e.C_FILL_VERTEX_NAMES;case k.WGLGeometryType.LINE:return b?e.C_LINE_VERTEX_NAMES_VV:e.C_LINE_VERTEX_NAMES;case k.WGLGeometryType.TEXT:return b?e.C_TEXT_VERTEX_NAMES_VV:e.C_TEXT_VERTEX_NAMES;case k.WGLGeometryType.LABEL:return e.C_LABEL_VERTEX_NAMES}return null}function q(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function t(a){if(a=q(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function r(a){if(a=q(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function u(a){if(a=q(a.type)){switch(a){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function v(a){if(a=q(a.type)){switch(a){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function w(a){return a&&a.length||0}function A(a){return"string"===typeof a}Object.defineProperty(e,"__esModule",{value:!0});var z=d.getLogger("esri.views.2d.engine.webgl.Utils");e.C_HITTEST_SEARCH_SIZE=4;e.C_VBO_GEOMETRY="geometry";e.C_VBO_PERINSTANCE="per_instance";e.C_VBO_PERINSTANCE_VV="per_instance_vv";e.C_VBO_VISIBILITY="visibility";e.C_VBO_VISIBILITY_RANGE=
"visibilityRange";e.C_ICON_VERTEX_DEF=[{name:e.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];e.C_ICON_VERTEX_DEF_VV=[{name:e.C_VBO_GEOMETRY,strideInBytes:40,divisor:0}];e.C_ICON_HEATMAP=[{name:e.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];e.C_FILL_VERTEX_DEF=[{name:e.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];e.C_FILL_VERTEX_DEF_VV=[{name:e.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];e.C_LINE_VERTEX_DEF=[{name:e.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];e.C_LINE_VERTEX_DEF_VV=[{name:e.C_VBO_GEOMETRY,
strideInBytes:44,divisor:0}];e.C_TEXT_VERTEX_DEF=[{name:e.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:e.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];e.C_TEXT_VERTEX_DEF_VV=[{name:e.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:e.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];e.C_LABEL_VERTEX_DEF=[{name:e.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:e.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:e.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];e.C_ICON_VERTEX_NAMES=m(e.C_ICON_VERTEX_DEF);
e.C_ICON_VERTEX_NAMES_VV=m(e.C_ICON_VERTEX_DEF_VV);e.C_FILL_VERTEX_NAMES=m(e.C_FILL_VERTEX_DEF);e.C_FILL_VERTEX_NAMES_VV=m(e.C_FILL_VERTEX_DEF_VV);e.C_LINE_VERTEX_NAMES=m(e.C_LINE_VERTEX_DEF);e.C_LINE_VERTEX_NAMES_VV=m(e.C_LINE_VERTEX_DEF_VV);e.C_TEXT_VERTEX_NAMES=m(e.C_TEXT_VERTEX_DEF);e.C_TEXT_VERTEX_NAMES_VV=m(e.C_TEXT_VERTEX_DEF_VV);e.C_LABEL_VERTEX_NAMES=m(e.C_LABEL_VERTEX_DEF);e.C_ICON_STRIDE_SPEC=n(e.C_ICON_VERTEX_DEF);e.C_ICON_STRIDE_SPEC_VV=n(e.C_ICON_VERTEX_DEF_VV);e.C_ICON_STRIDE_SPEC_HEATMAP=
n(e.C_ICON_HEATMAP);e.C_FILL_STRIDE_SPEC=n(e.C_FILL_VERTEX_DEF);e.C_FILL_STRIDE_SPEC_VV=n(e.C_FILL_VERTEX_DEF_VV);e.C_LINE_STRIDE_SPEC=n(e.C_LINE_VERTEX_DEF);e.C_LINE_STRIDE_SPEC_VV=n(e.C_LINE_VERTEX_DEF_VV);e.C_TEXT_STRIDE_SPEC=n(e.C_TEXT_VERTEX_DEF);e.C_TEXT_STRIDE_SPEC_VV=n(e.C_TEXT_VERTEX_DEF_VV);e.C_LABEL_STRIDE_SPEC=n(e.C_LABEL_VERTEX_DEF);e.getStrides=function(a,b,c){void 0===c&&(c=!1);switch(a){case k.WGLGeometryType.MARKER:return b?e.C_ICON_STRIDE_SPEC_VV:c?e.C_ICON_STRIDE_SPEC_HEATMAP:e.C_ICON_STRIDE_SPEC;
case k.WGLGeometryType.FILL:return b?e.C_FILL_STRIDE_SPEC_VV:e.C_FILL_STRIDE_SPEC;case k.WGLGeometryType.LINE:return b?e.C_LINE_STRIDE_SPEC_VV:e.C_LINE_STRIDE_SPEC;case k.WGLGeometryType.TEXT:return b?e.C_TEXT_STRIDE_SPEC_VV:e.C_TEXT_STRIDE_SPEC;case k.WGLGeometryType.LABEL:return e.C_LABEL_STRIDE_SPEC}return null};e.getNamedBuffers=p;e.getSymbolGeometryType=function(a){return t(a)?k.WGLGeometryType.MARKER:u(a)?k.WGLGeometryType.LINE:r(a)?k.WGLGeometryType.FILL:v(a)?k.WGLGeometryType.TEXT:k.WGLGeometryType.UNKNOWN};
e.normalizeSymbolType=q;e.isMarkerSymbol=t;e.isFillSymbol=r;e.isLineSymbol=u;e.isPictureSymbol=function(a){if(a=q(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};e.isTextSymbol=v;e.getTextProperties=function(a){return l.TextProperties.pool.acquire(a.color?f.copyAndPremultiply(a.color):[255,255,255,255],a.haloColor?f.copyAndPremultiply(a.haloColor):[255,255,255,255],h.pt2px(a.haloSize),h.pt2px(a.font.size),a.angle*Math.PI/180,a.xoffset/a.font.size,
a.yoffset/a.font.size,"left"===a.horizontalAlignment?0:"right"===a.horizontalAlignment?1:.5,"top"===a.verticalAlignment?0:"bottom"===a.verticalAlignment?1:.5)};e.isSameUniformValue=function(a,b){return!1};e.isSameMaterialInfo=function(a,b){if(a.materialKey!==b.materialKey||w(a.texBindingInfo)!==w(b.texBindingInfo)||w(a.materialParams)!==w(b.materialParams))return!1;for(var c=a.texBindingInfo.length,d=0;d<c;++d){var f=a.texBindingInfo[d],g=b.texBindingInfo[d];if(f.unit!==g.unit||f.pageId!==g.pageId||
f.semantic!==g.semantic)return!1}a=a.materialParams.length;for(d=0;d<a;)return!1;return!0};e.serializeString=function(a,b,c){for(var d=0,f=a.length,g=0;g<f;++g)b&&(b[c+d]=a.charCodeAt(g)),++d;b&&(b[c+d]=0);++d;return d};e.deserializeString=function(a,b,c){var d=0;a.s="";for(var f=!0;f;){var g=b[c+d];++d;0!==g?a.s+=String.fromCharCode(g):f=!1}return d};e.isDefined=function(a){return null!==a&&void 0!==a};e.isNumber=function(a){return"number"===typeof a};e.isString=A;e.isStringOrNull=function(a){return null==
a||A(a)};e.lerp=function(a,b,c){return a+(b-a)*c};a=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(b)};a.prototype.getKeys=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();e.KeysGetter=a;a=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};
return a}();e.ValuesGetter=a;e.getCapType=function(a){switch(a){case "butt":return k.CapType.BUTT;case "round":return k.CapType.ROUND;case "square":return k.CapType.SQUARE;default:return z.error("Cannot interpret unknown cap: "+a),k.CapType.UNKNOWN}};e.getJoinType=function(a){switch(a){case "miter":return k.JoinType.MITER;case "bevel":return k.JoinType.BEVEL;case "round":return k.JoinType.ROUND;default:return z.error("Cannot interpret unknown join: "+a),k.JoinType.UNKNOWN}};e.getVVType=function(a){switch(a){case "opacity":return k.VVType.OPACITY;
case "color":return k.VVType.COLOR;case "rotation":return k.VVType.ROTATION;case "size":return k.VVType.SIZE;default:return z.error("Cannot interpret unknown vv: "+a),null}};e.createArcadeFunction=function(a,d){var f=a.spatialReference,e=a.layer,h=g.createFunction(a.valueExpression),k=new c;return function(a,c){k.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);a=c&&new b({viewingMode:c.viewingMode,scale:c.scale});a=g.executeFunction(h,{vars:{$feature:k,$view:a||{}},spatialReference:f});
return d?d(a):a}};e.copyMeshData=function(a,b,c,d,f,g,e){for(var h in g)for(var k=g[h].stride,m=g[h].data,l=c[h].data,n=k*f.vertexCount/4,p=k*a/4,v=k*f.vertexFrom/4,k=0;k<n;++k)l[k+p]=m[k+v];c=f.indexCount;for(k=0;k<c;++k)d[k+b]=e[k+f.indexFrom]-f.vertexFrom+a};e.C_VBO_INFO=(x={},x[e.C_VBO_GEOMETRY]=35044,x[e.C_VBO_VISIBILITY]=35044,x[e.C_VBO_VISIBILITY_RANGE]=35048,x);e.createGeometryData=function(a,b,c){for(var d=[],f=0;5>f;++f){for(var g={},e=0,h=p(f,a);e<h.length;e++){var k=h[e];g[k]={data:c(f,
k)}}d.push({data:b(f),buffers:g})}return d};var x})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(a,e,b){return b})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(a,e,b,c,d){return function(){function a(b){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=b instanceof a?b.attributes:void 0===b?{}:null===b?{}:b}a.prototype.field=
function(a){var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];throw Error("Field not Found");};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Dictionary is Immutable");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==
this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return!1};a.prototype.keys=function(){var a=[],b;for(b in this.attributes)a.push(b);return a=a.sort()};a.prototype.castToText=function(){var a="",f;for(f in this.attributes){""!==a&&(a+=",");var e=this.attributes[f];null==e?a+=JSON.stringify(f)+":null":c.isBoolean(e)||c.isNumber(e)||c.isString(e)?a+=JSON.stringify(f)+":"+JSON.stringify(e):e instanceof d?a+=JSON.stringify(f)+":"+c.toStringExplicit(e):e instanceof
b?a+=JSON.stringify(f)+":"+c.toStringExplicit(e):e instanceof Array?a+=JSON.stringify(f)+":"+c.toStringExplicit(e):e instanceof Date?a+=JSON.stringify(f)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(a+=JSON.stringify(f)+":"+e.castToText())}return"{"+a+"}"};return a}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(a,e){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};
a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],b=0;b<this.length();b++)a.push(this.get(b));return a};return a}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../kernel ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline".split(" "),function(a,e,b,c,d,h,g,f,k,
l,m,n,p,q,t){function r(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function u(a){return a instanceof W||a instanceof h||a instanceof F}function v(a){return"string"===typeof a||a instanceof String}function w(a){return"boolean"===typeof a}function A(a){return"number"===typeof a}function z(a){return a instanceof Array}function x(a){return a instanceof Date}function y(a,c){if(!1===isNaN(a)){if(void 0===c||null===c||""===c)return a.toString();
c=r(c,"\u2030","");c=r(c,"\u00a4","");return b.format(a,{pattern:c})}return a.toString()}function C(a,b){a=d(a);return void 0===b||null===b||""===b?a.format():a.format(D(b))}function D(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function E(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function I(a,b){if(a===b||null===a&&b===e.voidOperation||null===b&&a===e.voidOperation)return!0;if(x(a)&&x(b))return a.getTime()===
b.getTime();if(a instanceof f||a instanceof k)return a.equalityTest(b);if(a instanceof p&&b instanceof p){var c=void 0,d=void 0;e.isVersion4?(c=a.cache._arcadeCacheId,d=b.cache._arcadeCacheId):(c=a.getCacheValue("_arcadeCacheId"),d=b.getCacheValue("_arcadeCacheId"));if(void 0!==c&&null!==c)return c===d}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId||a._underlyingGraphic===
b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function H(a,b){if(v(a))return a;if(null===a)return"";if(A(a))return y(a,b);if(w(a))return a.toString();if(x(a))return C(a,b);if(a instanceof m)return JSON.stringify(a.toJson());if(z(a)){b=[];for(var c=0;c<a.length;c++)b[c]=U(a[c]);return"["+b.join(",")+"]"}if(a instanceof g){b=[];for(c=0;c<a.length();c++)b[c]=U(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():
u(a)?"object, Function":""}function Q(a,b){if(v(a))return a;if(null===a)return"";if(A(a))return y(a,b);if(w(a))return a.toString();if(x(a))return C(a,b);if(a instanceof m)return a instanceof l?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+
X(a.spatialReference)+"}":X(a.toJson(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(z(a)){b=[];for(var c=0;c<a.length;c++)b[c]=U(a[c]);return"["+b.join(",")+"]"}if(a instanceof g){b=[];for(c=0;c<a.length();c++)b[c]=U(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():u(a)?"object, Function":""}function U(a){if(null!==a){if(w(a)||A(a)||v(a))return JSON.stringify(a);
if(a instanceof m||a instanceof g||a instanceof Array)return Q(a);if(a instanceof Date)return JSON.stringify(C(a,""));if(null!==a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}function G(a,c){return A(a)?a:null===a||""===a?0:x(a)?NaN:w(a)?a?1:0:z(a)||""===a||void 0===a?NaN:void 0!==c&&v(a)?(c=r(c,"\u2030",""),c=r(c,"\u00a4",""),b.parse(a,{pattern:c})):a===e.voidOperation?0:Number(a)}function R(a,b){var c;b.fields.some(function(b){b.name===a&&(c=b.domain);return!!c});
return c}function X(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(b.cmp),f=[];return function fa(a){a&&a.toJson&&"function"===typeof a.toJson&&(a=a.toJson());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);var b,g;if(Array.isArray(a)){g="[";for(b=0;b<a.length;b++)b&&(g+=
","),g+=fa(a[b])||"null";return g+"]"}if(null===a)return"null";if(-1!==f.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var e=f.push(a)-1,h=Object.keys(a).sort(d&&d(a));g="";for(b=0;b<h.length;b++){var k=h[b],m=fa(a[k]);m&&(g&&(g+=","),g+=JSON.stringify(k)+":"+m)}f.splice(e,1);return"{"+g+"}"}}(a)}Object.defineProperty(e,"__esModule",{value:!0});a=function(){return function(a){this.value=a}}();var K=function(){return function(a){this.value=
a}}(),W=function(){return function(a){this.fn=a}}(),F=function(){return function(a){this.fn=a}}();e.NativeFunction=W;e.ImplicitResult=K;e.ReturnResult=a;e.SizzleFunction=F;e.isVersion4=0===c.version.indexOf("4.");e.voidOperation={type:"VOID"};e.breakResult={type:"BREAK"};e.continueResult={type:"CONTINUE"};e.multiReplace=r;e.isFunctionParameter=u;e.isSimpleType=function(a){return v(a)||A(a)||x(a)||w(a)||null===a||a===e.voidOperation||"number"===typeof a?!0:!1};e.defaultUndefined=function(a,b){return void 0===
a?b:a};e.isString=v;e.isBoolean=w;e.isNumber=A;e.isArray=z;e.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};e.isImmutableArray=function(a){return a instanceof g};e.isDate=x;e.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};e.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?
c:c&3|8).toString(16)})};e.formatNumber=y;e.formatDate=C;e.standardiseDateFormat=D;e.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===e.voidOperation)return E(null,null,c);if(A(b))return E(0,b,c);if(v(b)||w(b))return E(0,G(b),c);if(x(b))return E(0,b.getTime(),c)}if(a===e.voidOperation){if(null===b||b===e.voidOperation)return E(null,null,c);if(A(b))return E(0,b,c);if(v(b)||w(b))return E(0,G(b),c);if(x(b))return E(0,b.getTime(),c)}else if(A(a)){if(A(b))return E(a,b,c);if(w(b))return E(a,
G(b),c);if(null===b||b===e.voidOperation)return E(a,0,c);if(v(b))return E(a,G(b),c);if(x(b))return E(a,b.getTime(),c)}else if(v(a)){if(v(b))return E(H(a),H(b),c);if(x(b))return E(G(a),b.getTime(),c);if(A(b))return E(G(a),b,c);if(null===b||b===e.voidOperation)return E(G(a),0,c);if(w(b))return E(G(a),G(b),c)}else if(x(a)){if(x(b))return E(a,b,c);if(null===b||b===e.voidOperation)return E(a.getTime(),0,c);if(A(b))return E(a.getTime(),b,c);if(w(b)||v(b))return E(a.getTime(),G(b),c)}else if(w(a)){if(w(b))return E(a,
b,c);if(A(b))return E(G(a),G(b),c);if(x(b))return E(G(a),b.getTime(),c);if(null===b||b===e.voidOperation)return E(G(a),0,c);if(v(b))return E(G(a),G(b),c)}return!I(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0};e.equalityTest=I;e.toString=H;e.toNumberArray=function(a){var b=[];if(!1===z(a))return null;if(a instanceof g){for(var c=0;c<a.length();c++)b[c]=G(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=G(a[c]);return b};e.toStringExplicit=Q;e.toNumber=G;e.toDate=function(a,b){return x(a)?a:v(a)&&(a=d(a,
[void 0===b||null===b||""===b?d.ISO_8601:b]),a.isValid())?a.toDate():null};e.toDateM=function(a,b){return x(a)?d(a):v(a)&&(a=d(a,[void 0===b||null===b||""===b?d.ISO_8601:b]),a.isValid())?a:null};e.toBoolean=function(a){if(w(a))return a;if(v(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(A(a))return 0===a||isNaN(a)?!1:!0;return!1};e.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};e.fixNullGeometry=
function(a){return null===a?null:a instanceof p?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof q?0===a.rings.length?null:a:a instanceof t?0===a.paths.length?null:a:a instanceof n?0===a.points.length?null:a:a instanceof l?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};e.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?H(b):G(b);for(var d=0;d<a.domain.codedValues.length;d++){var f=a.domain.codedValues[d];
f.code===b&&(c=f)}return null===c?null:c.name};e.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=H(b);for(var d=0;d<a.domain.codedValues.length;d++){var f=a.domain.codedValues[d];f.name===b&&(c=f)}return null===c?null:c.code};e.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var f=null,g=0;g<b.fields.length;g++){var e=b.fields[g];e.name.toLowerCase()===a.toString().toLowerCase()&&(f=e)}if(null===f)return null;var h,k;d||(d=c&&b.typeIdField&&
c._field(b.typeIdField));null!=d&&b.types.some(function(a){return a.id===d?((h=a.domains&&a.domains[f.name])&&"inherited"===h.type&&(h=R(f.name,b),k=!0),!0):!1});k||h||(h=R(a,b));return{field:f,domain:h}};e.stableStringify=X;e.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&d.declaredClass&&"esri.arcade.Feature"===d.declaredClass?b.push(d.geometry()):b.push(d)}return b}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],
function(a,e,b){return b})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(a,e,b,c){Object.defineProperty(e,"__esModule",{value:!0});var d={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,
pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};e.load=function(a,g,f){a=b.locale;var e=a in d;if(!e){var h=a.split("-");1<h.length&&h[0]in d&&(a=h[0],e=!0)}e?g(["moment/locale/"+a],function(){f(c)}):f(c)}})},"moment/moment":function(){(function(a,e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define(e):a.moment=e()})(this,function(){function a(){return Mb.apply(null,arguments)}
function e(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function b(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function c(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function d(a){return void 0===a}function h(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function g(a){return a instanceof Date||"[object Date]"===
Object.prototype.toString.call(a)}function f(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function k(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function l(a,b){for(var c in b)k(b,c)&&(a[c]=b[c]);k(b,"toString")&&(a.toString=b.toString);k(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function m(a,b,c,d){return ca(a,b,c,d,!0).utc()}function n(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,
userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function p(a){if(null==a._isValid){var b=n(a),c=Nb.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&
Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function q(a){var b=m(NaN);null!=a?l(n(b),a):n(b).userInvalidated=!0;return b}function t(a,b){var c,f,g;d(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);d(b._i)||(a._i=b._i);d(b._f)||(a._f=b._f);d(b._l)||(a._l=b._l);d(b._strict)||(a._strict=b._strict);d(b._tzm)||(a._tzm=b._tzm);d(b._isUTC)||(a._isUTC=b._isUTC);d(b._offset)||(a._offset=b._offset);d(b._pf)||(a._pf=n(b));d(b._locale)||(a._locale=b._locale);if(0<Bb.length)for(c=
0;c<Bb.length;c++)f=Bb[c],g=b[f],d(g)||(a[f]=g);return a}function r(b){t(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Cb&&(Cb=!0,a.updateOffset(this),Cb=!1)}function u(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function v(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function w(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=v(a));return b}function A(a,b,c){var d=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0,e;for(e=0;e<
d;e++)(c&&a[e]!==b[e]||!c&&w(a[e])!==w(b[e]))&&g++;return g+f}function z(b,c){var d=!0;return l(function(){null!=a.deprecationHandler&&a.deprecationHandler(null,b);if(d){for(var f=[],g,e=0;e<arguments.length;e++){g="";if("object"===typeof arguments[e]){g+="\n["+e+"] ";for(var h in arguments[0])g+=h+": "+arguments[0][h]+", ";g=g.slice(0,-2)}else g=arguments[e];f.push(g)}Array.prototype.slice.call(f).join("");d=!1}return c.apply(this,arguments)},c)}function x(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,
c);Ob[b]||(Ob[b]=!0)}function y(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function C(a,c){var d=l({},a),f;for(f in c)k(c,f)&&(b(a[f])&&b(c[f])?(d[f]={},l(d[f],a[f]),l(d[f],c[f])):null!=c[f]?d[f]=c[f]:delete d[f]);for(f in a)k(a,f)&&!k(c,f)&&b(a[f])&&(d[f]=l({},d[f]));return d}function D(a){null!=a&&this.set(a)}function E(a,b){var c=a.toLowerCase();lb[c]=lb[c+"s"]=lb[b]=a}function I(a){return"string"===typeof a?lb[a]||lb[a.toLowerCase()]:void 0}function H(a){var b=
{},c,d;for(d in a)k(a,d)&&(c=I(d))&&(b[c]=a[d]);return b}function Q(a){var b=[],c;for(c in a)b.push({unit:c,priority:wa[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function U(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function G(a,b,c,d){var f=d;"string"===typeof d&&(f=function(){return this[d]()});a&&(jb[a]=f);b&&(jb[b[0]]=function(){return U(f.apply(this,arguments),b[1],b[2])});c&&(jb[c]=function(){return this.localeData().ordinal(f.apply(this,
arguments),a)})}function R(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function X(a){var b=a.match(Pb),c,d;c=0;for(d=b.length;c<d;c++)b[c]=jb[b[c]]?jb[b[c]]:R(b[c]);return function(c){var f="",g;for(g=0;g<d;g++)f+=y(b[g])?b[g].call(c,a):b[g];return f}}function K(a,b){if(!a.isValid())return a.localeData().invalidDate();b=W(b,a.localeData());Db[b]=Db[b]||X(b);return Db[b](a)}function W(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(qb.lastIndex=0;0<=d&&qb.test(a);)a=
a.replace(qb,c),qb.lastIndex=0,--d;return a}function F(a,b,c){Eb[a]=y(b)?b:function(a,d){return a&&c?c:b}}function ea(a,b){return k(Eb,a)?Eb[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return L(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,f){return b||c||d||f}))}function L(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function S(a,b){var c,d=b;"string"===typeof a&&(a=[a]);h(b)&&(d=function(a,c){c[b]=w(a)});for(c=0;c<a.length;c++)Fb[a[c]]=d}
function ra(a,b){S(a,function(a,c,d,f){d._w=d._w||{};b(a,d._w,d,f)})}function la(a){return 0===a%4&&0!==a%100||0===a%400}function fa(b,c){return function(d){return null!=d?(Ea(this,b,d),a.updateOffset(this,c),this):ba(this,b)}}function ba(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Ea(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&la(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),ua(c,a.month()));else a._d["set"+(a._isUTC?"UTC":
"")+b](c)}function ua(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?la(a+(b-c)/12)?29:28:31-c%7%2}function Sa(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=w(b);else if(b=a.localeData().monthsParse(b),!h(b))return a;c=Math.min(a.date(),ua(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function bb(b){return null!=b?(Sa(this,b),a.updateOffset(this,!0),this):ba(this,"Month")}function xa(){function a(a,b){return b.length-a.length}
var b=[],c=[],d=[],f,g;for(f=0;12>f;f++)g=m([2E3,f]),b.push(this.monthsShort(g,"")),c.push(this.months(g,"")),d.push(this.months(g,"")),d.push(this.monthsShort(g,""));b.sort(a);c.sort(a);d.sort(a);for(f=0;12>f;f++)b[f]=L(b[f]),c[f]=L(c[f]);for(f=0;24>f;f++)d[f]=L(d[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function ya(a,b,c,d,f,g,e){b=
new Date(a,b,c,d,f,g,e);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function Ca(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Na(a,b,c){c=7+b-c;return-((7+Ca(a,0,c).getUTCDay()-b)%7)+c-1}function Xa(a,b,c,d,f){c=(7+c-d)%7;d=Na(a,d,f);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(la(b)?366:365)+d):d>(la(a)?366:365)?(b=a+1,a=d-(la(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function na(a,b,c){var d=Na(a.year(),
b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+Fa(a,b,c)):d>Fa(a.year(),b,c)?(b=d-Fa(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function Fa(a,b,c){var d=Na(a,b,c);b=Na(a+1,b,c);return((la(a)?366:365)-d+b)/7}function Ya(a,b,c){var d,f;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=m([2E3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),
this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();if(c)b="dddd"===b?qa.call(this._weekdaysParse,a):"ddd"===b?qa.call(this._shortWeekdaysParse,a):qa.call(this._minWeekdaysParse,a);else if("dddd"===b){b=qa.call(this._weekdaysParse,a);if(-1!==b)return b;b=qa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=qa.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=qa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;
b=qa.call(this._weekdaysParse,a);if(-1!==b)return b;b=qa.call(this._minWeekdaysParse,a)}else{b=qa.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=qa.call(this._weekdaysParse,a);if(-1!==b)return b;b=qa.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function Da(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],f=[],g,e,h,k;for(g=0;7>g;g++)e=m([2E3,1]).day(g),h=this.weekdaysMin(e,""),k=this.weekdaysShort(e,""),e=this.weekdays(e,""),b.push(h),c.push(k),d.push(e),f.push(h),f.push(k),
f.push(e);b.sort(a);c.sort(a);d.sort(a);f.sort(a);for(g=0;7>g;g++)c[g]=L(c[g]),d[g]=L(d[g]),f[g]=L(f[g]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function pa(){return this.hours()%12||12}function oa(a,b){G(a,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),b)})}function Aa(a,b){return b._meridiemParse}function Ta(a){return a?a.toLowerCase().replace("_","-"):a}function Ja(a){var b=null;if(!sa[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=mb._abbr,require("./locale/"+a),Ba(b)}catch(Vc){}return sa[a]}function Ba(a,b){a&&(a=d(b)?va(a):Ka(a,b))&&(mb=a);return mb._abbr}function Ka(a,b){if(null!==b){var c;c=Qb;b.abbr=a;if(null!=sa[a])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=sa[a]._config;else if(null!=b.parentLocale)if(null!=sa[b.parentLocale])c=sa[b.parentLocale]._config;else if(c=Ja(b.parentLocale),null!=c)c=c._config;else return nb[b.parentLocale]||(nb[b.parentLocale]=[]),nb[b.parentLocale].push({name:a,config:b}),null;sa[a]=new D(C(c,b));nb[a]&&nb[a].forEach(function(a){Ka(a.name,a.config)});Ba(a);return sa[a]}delete sa[a];return null}function va(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return mb;if(!e(a)){if(b=Ja(a))return b;a=[a]}a:{b=
0;for(var c,d,f,g;b<a.length;){g=Ta(a[b]).split("-");c=g.length;for(d=(d=Ta(a[b+1]))?d.split("-"):null;0<c;){if(f=Ja(g.slice(0,c).join("-"))){a=f;break a}if(d&&d.length>=c&&A(g,d,!0)>=c-1)break;c--}b++}a=mb}return a}function Ua(a){var b;(b=a._a)&&-2===n(a).overflow&&(b=0>b[Za]||11<b[Za]?Za:1>b[Va]||b[Va]>ua(b[Oa],b[Za])?Va:0>b[ta]||24<b[ta]||24===b[ta]&&(0!==b[Pa]||0!==b[$a]||0!==b[fb])?ta:0>b[Pa]||59<b[Pa]?Pa:0>b[$a]||59<b[$a]?$a:0>b[fb]||999<b[fb]?fb:-1,n(a)._overflowDayOfYear&&(b<Oa||b>Va)&&(b=
Va),n(a)._overflowWeeks&&-1===b&&(b=jc),n(a)._overflowWeekday&&-1===b&&(b=kc),n(a).overflow=b);return a}function Ga(a,b,c){return null!=a?a:null!=b?b:c}function Ha(b){var c,d=[],f;if(!b._d){f=new Date(a.now());f=b._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()];if(b._w&&null==b._a[Va]&&null==b._a[Za]){var g,e,h,k,m,l;g=b._w;if(null!=g.GG||null!=g.W||null!=g.E){if(m=1,l=4,e=Ga(g.GG,b._a[Oa],na(ia(),1,4).year),h=Ga(g.W,1),k=Ga(g.E,1),1>k||7<k)c=
!0}else if(m=b._locale._week.dow,l=b._locale._week.doy,h=na(ia(),m,l),e=Ga(g.gg,b._a[Oa],h.year),h=Ga(g.w,h.week),null!=g.d){if(k=g.d,0>k||6<k)c=!0}else if(null!=g.e){if(k=g.e+m,0>g.e||6<g.e)c=!0}else k=m;1>h||h>Fa(e,m,l)?n(b)._overflowWeeks=!0:null!=c?n(b)._overflowWeekday=!0:(c=Xa(e,h,k,m,l),b._a[Oa]=c.year,b._dayOfYear=c.dayOfYear)}if(null!=b._dayOfYear){c=Ga(b._a[Oa],f[Oa]);if(b._dayOfYear>(la(c)?366:365)||0===b._dayOfYear)n(b)._overflowDayOfYear=!0;c=Ca(c,0,b._dayOfYear);b._a[Za]=c.getUTCMonth();
b._a[Va]=c.getUTCDate()}for(c=0;3>c&&null==b._a[c];++c)b._a[c]=d[c]=f[c];for(;7>c;c++)b._a[c]=d[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[ta]&&0===b._a[Pa]&&0===b._a[$a]&&0===b._a[fb]&&(b._nextDay=!0,b._a[ta]=0);b._d=(b._useUTC?Ca:ya).apply(null,d);d=b._useUTC?b._d.getUTCDay():b._d.getDay();null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[ta]=24);b._w&&"undefined"!==typeof b._w.d&&b._w.d!==d&&(n(b).weekdayMismatch=!0)}}function La(a){var b,c;b=a._i;var d=lc.exec(b)||
mc.exec(b),f,g,e,h;if(d){n(a).iso=!0;b=0;for(c=rb.length;b<c;b++)if(rb[b][1].exec(d[1])){g=rb[b][0];f=!1!==rb[b][2];break}if(null==g)a._isValid=!1;else{if(d[3]){b=0;for(c=Gb.length;b<c;b++)if(Gb[b][1].exec(d[3])){e=(d[2]||" ")+Gb[b][0];break}if(null==e){a._isValid=!1;return}}if(f||null==e){if(d[4])if(nc.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=g+(e||"")+(h||"");ma(a)}else a._isValid=!1}}else a._isValid=!1}function M(a){var b=oc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g,
" ").trim());if(b){var c=b[3],d=b[2],f=b[5],g=b[6],e=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,Rb.indexOf(c),parseInt(d,10),parseInt(f,10),parseInt(g,10)];e&&c.push(parseInt(e,10));a:{if(e=b[1])if(e=Sb.indexOf(e),d=(new Date(c[0],c[1],c[2])).getDay(),e!==d){n(a).weekdayMismatch=!0;e=a._isValid=!1;break a}e=!0}e&&(a._a=c,(e=b[8])?b=pc[e]:b[9]?b=0:(b=parseInt(b[10],10),e=b%100,b=(b-e)/100*60+e),a._tzm=b,a._d=Ca.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),n(a).rfc2822=
!0)}else a._isValid=!1}function za(b){var c=qc.exec(b._i);null!==c?b._d=new Date(+c[1]):(La(b),!1===b._isValid&&(delete b._isValid,M(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b))))}function ma(b){if(b._f===a.ISO_8601)La(b);else if(b._f===a.RFC_2822)M(b);else{b._a=[];n(b).empty=!0;var c=""+b._i,d,f,g,e,h,m=c.length,l=0;g=W(b._f,b._locale).match(Pb)||[];for(d=0;d<g.length;d++){e=g[d];if(f=(c.match(ea(e,b))||[])[0])h=c.substr(0,c.indexOf(f)),0<h.length&&n(b).unusedInput.push(h),
c=c.slice(c.indexOf(f)+f.length),l+=f.length;if(jb[e]){if(f?n(b).empty=!1:n(b).unusedTokens.push(e),h=b,null!=f&&k(Fb,e))Fb[e](f,h._a,h,e)}else b._strict&&!f&&n(b).unusedTokens.push(e)}n(b).charsLeftOver=m-l;0<c.length&&n(b).unusedInput.push(c);12>=b._a[ta]&&!0===n(b).bigHour&&0<b._a[ta]&&(n(b).bigHour=void 0);n(b).parsedDateParts=b._a.slice(0);n(b).meridiem=b._meridiem;c=b._a;d=ta;m=b._locale;g=b._a[ta];l=b._meridiem;null!=l&&(null!=m.meridiemHour?g=m.meridiemHour(g,l):null!=m.isPM&&((m=m.isPM(l))&&
12>g&&(g+=12),m||12!==g||(g=0)));c[d]=g;Ha(b);Ua(b)}}function Y(a){if(!a._d){var b=H(a._i);a._a=f([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Ha(a)}}function Ma(a){var b=a._i,c=a._f;a._locale=a._locale||va(a._l);if(null===b||void 0===c&&""===b)return q({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(u(b))return new r(Ua(b));if(g(b))a._d=b;else if(e(c)){var d,f,h;if(0===a._f.length)n(a).invalidFormat=!0,a._d=new Date(NaN);
else{for(b=0;b<a._f.length;b++)if(c=0,d=t({},a),null!=a._useUTC&&(d._useUTC=a._useUTC),d._f=a._f[b],ma(d),p(d)&&(c+=n(d).charsLeftOver,c+=10*n(d).unusedTokens.length,n(d).score=c,null==h||c<h))h=c,f=d;l(a,f||d)}}else c?ma(a):Ra(a);p(a)||(a._d=null);return a}function Ra(c){var k=c._i;d(k)?c._d=new Date(a.now()):g(k)?c._d=new Date(k.valueOf()):"string"===typeof k?za(c):e(k)?(c._a=f(k.slice(0),function(a){return parseInt(a,10)}),Ha(c)):b(k)?Y(c):h(k)?c._d=new Date(k):a.createFromInputFallback(c)}function ca(a,
d,f,g,h){var k={};if(!0===f||!1===f)g=f,f=void 0;if(b(a)&&c(a)||e(a)&&0===a.length)a=void 0;k._isAMomentObject=!0;k._useUTC=k._isUTC=h;k._l=f;k._i=a;k._f=d;k._strict=g;a=new r(Ua(Ma(k)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function ia(a,b,c,d){return ca(a,b,c,d,!1)}function N(a,b){var c,d;1===b.length&&e(b[0])&&(b=b[0]);if(!b.length)return ia();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}function ha(a){for(var b in a)if(-1===qa.call(ob,b)||null!=
a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=0;c<ob.length;++c)if(a[ob[c]]){if(b)return!1;parseFloat(a[ob[c]])!==w(a[ob[c]])&&(b=!0)}return!0}function B(a){a=H(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,f=a.week||0,g=a.day||0,e=a.hour||0,h=a.minute||0,k=a.second||0,m=a.millisecond||0;this._isValid=ha(a);this._milliseconds=+m+1E3*k+6E4*h+36E5*e;this._days=+g+7*f;this._months=+d+3*c+12*b;this._data={};this._locale=va();this._bubble()}function Z(a){return a instanceof B}function aa(a){return 0>a?-1*
Math.round(-1*a):Math.round(a)}function ga(a,b){G(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+U(~~(a/60),2)+b+U(~~a%60,2)})}function T(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(rc)||["-",0,0];b=+(60*a[1])+w(a[2]);return 0===b?0:"+"===a[0]?b:-b}function V(b,c){return c._isUTC?(c=c.clone(),b=(u(b)||g(b)?b.valueOf():ia(b).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+b),a.updateOffset(c,!1),c):ia(b).local()}function J(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function Qa(a,b){var c=a,d=null;Z(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:h(a)?(c={},b?c[b]=a:c.milliseconds=a):(d=sc.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:w(d[Va])*c,h:w(d[ta])*c,m:w(d[Pa])*c,s:w(d[$a])*c,ms:w(aa(1E3*d[fb]))*c}):(d=tc.exec(a))?(c="-"===d[1]?-1:1,c={y:gb(d[2],c),M:gb(d[3],c),w:gb(d[4],c),d:gb(d[5],c),h:gb(d[6],c),m:gb(d[7],c),s:gb(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=ia(c.from),c=ia(c.to),d.isValid()&&c.isValid()?
(c=V(c,d),d.isBefore(c)?c=Tb(d,c):(c=Tb(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new B(c);Z(a)&&k(a,"_locale")&&(c._locale=a._locale);return c}function gb(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function Tb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function Ub(a,b){return function(c,d){var f;null===d||isNaN(+d)||(x(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f);c=Qa("string"===typeof c?+c:c,d);hb(this,c,a);return this}}function hb(b,c,d,f){var g=c._milliseconds,e=aa(c._days);c=aa(c._months);b.isValid()&&(f=null==f?!0:f,c&&Sa(b,ba(b,"Month")+c*d),e&&Ea(b,"Date",ba(b,"Date")+e*d),g&&b._d.setTime(b._d.valueOf()+
g*d),f&&a.updateOffset(b,e||c))}function Hb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function Vb(a){if(void 0===a)return this._locale._abbr;a=va(a);null!=a&&(this._locale=a);return this}function Wb(){return this._locale}function sb(a,b){G(0,[a,a.length],0,b)}function tb(a,b,c,d,f){var g;if(null==a)return na(this,d,f).year;g=Fa(a,d,f);b>g&&(b=
g);a=Xa(a,b,c,d,f);a=Ca(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function uc(a,b){b[fb]=w(1E3*("0."+a))}function Xb(a){return a}function ub(a,b,c,d){var f=va();b=m().set(d,b);return f[c](b,a)}function Yb(a,b,c){h(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return ub(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=ub(a,b,c,"month");return d}function Ib(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);h(b)&&(c=b,b=void 0);b=b||"";var f=
va();a=a?f._week.dow:0;if(null!=c)return ub(b,(c+a)%7,d,"day");f=[];for(c=0;7>c;c++)f[c]=ub(b,(c+a)%7,d,"day");return f}function Zb(a,b,c,d){b=Qa(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function $b(a){return 0>a?Math.floor(a):Math.ceil(a)}function cb(a){return function(){return this.as(a)}}function ib(a){return function(){return this.isValid()?this._data[a]:NaN}}function vc(a,b,c,d,f){return f.relativeTime(b||1,!!c,a,d)}function kb(a){return(0<
a)-(0>a)||+a}function vb(){if(!this.isValid())return this.localeData().invalidDate();var a=Jb(this._milliseconds)/1E3,b=Jb(this._days),c=Jb(this._months),d,f;d=v(a/60);f=v(d/60);a%=60;d%=60;var g=v(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",e=this.asSeconds();if(!e)return"P0D";var h=0>e?"-":"",k=kb(this._months)!==kb(e)?"-":"",m=kb(this._days)!==kb(e)?"-":"",e=kb(this._milliseconds)!==kb(e)?"-":"";return h+"P"+(g?k+g+"Y":"")+(c?k+c+"M":"")+(b?m+b+"D":"")+(f||d||a?"T":"")+(f?e+f+"H":"")+
(d?e+d+"M":"")+(a?e+a+"S":"")}var Mb,Nb;Nb=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Bb=a.momentProperties=[],Cb=!1,Ob={};a.suppressDeprecationWarnings=!1;a.deprecationHandler=null;var ac;ac=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)k(a,b)&&c.push(b);return c};var lb={},wa={},Pb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
qb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Db={},jb={},bc=/\d/,Ia=/\d\d/,cc=/\d{3}/,Kb=/\d{4}/,wb=/[+-]?\d{6}/,ka=/\d\d?/,dc=/\d\d\d\d?/,ec=/\d\d\d\d\d\d?/,xb=/\d{1,3}/,Lb=/\d{1,4}/,yb=/[+-]?\d{1,6}/,wc=/\d+/,zb=/[+-]?\d+/,xc=/Z|[+-]\d\d:?\d\d/gi,Ab=/Z|[+-]\d\d(?::?\d\d)?/gi,pb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Eb={},Fb={},Oa=0,Za=1,Va=2,ta=3,Pa=4,$a=5,fb=6,jc=7,kc=8;G("Y",0,
0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});G(0,["YY",2],0,function(){return this.year()%100});G(0,["YYYY",4],0,"year");G(0,["YYYYY",5],0,"year");G(0,["YYYYYY",6,!0],0,"year");E("year","y");wa.year=1;F("Y",zb);F("YY",ka,Ia);F("YYYY",Lb,Kb);F("YYYYY",yb,wb);F("YYYYYY",yb,wb);S(["YYYYY","YYYYYY"],Oa);S("YYYY",function(b,c){c[Oa]=2===b.length?a.parseTwoDigitYear(b):w(b)});S("YY",function(b,c){c[Oa]=a.parseTwoDigitYear(b)});S("Y",function(a,b){b[Oa]=parseInt(a,10)});a.parseTwoDigitYear=
function(a){return w(a)+(68<w(a)?1900:2E3)};var fc=fa("FullYear",!0),qa;qa=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};G("M",["MM",2],"Mo",function(){return this.month()+1});G("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});G("MMMM",0,0,function(a){return this.localeData().months(this,a)});E("month","M");wa.month=8;F("M",ka);F("MM",ka,Ia);F("MMM",function(a,b){return b.monthsShortRegex(a)});F("MMMM",
function(a,b){return b.monthsRegex(a)});S(["M","MM"],function(a,b){b[Za]=w(a)-1});S(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[Za]=d:n(c).invalidMonth=a});var gc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Rb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");G("w",["ww",2],"wo","week");G("W",["WW",2],"Wo","isoWeek");E("week","w");E("isoWeek","W");wa.week=5;wa.isoWeek=5;F("w",ka);F("ww",ka,Ia);F("W",ka);F("WW",ka,Ia);ra(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,
1)]=w(a)});G("d",0,"do","day");G("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});G("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});G("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});G("e",0,0,"weekday");G("E",0,0,"isoWeekday");E("day","d");E("weekday","e");E("isoWeekday","E");wa.day=11;wa.weekday=11;wa.isoWeekday=11;F("d",ka);F("e",ka);F("E",ka);F("dd",function(a,b){return b.weekdaysMinRegex(a)});F("ddd",function(a,b){return b.weekdaysShortRegex(a)});
F("dddd",function(a,b){return b.weekdaysRegex(a)});ra(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:n(c).invalidWeekday=a});ra(["d","e","E"],function(a,b,c,d){b[d]=w(a)});var Sb="Sun Mon Tue Wed Thu Fri Sat".split(" ");G("H",["HH",2],0,"hour");G("h",["hh",2],0,pa);G("k",["kk",2],0,function(){return this.hours()||24});G("hmm",0,0,function(){return""+pa.apply(this)+U(this.minutes(),2)});G("hmmss",0,0,function(){return""+pa.apply(this)+U(this.minutes(),
2)+U(this.seconds(),2)});G("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)});G("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)});oa("a",!0);oa("A",!1);E("hour","h");wa.hour=13;F("a",Aa);F("A",Aa);F("H",ka);F("h",ka);F("k",ka);F("HH",ka,Ia);F("hh",ka,Ia);F("kk",ka,Ia);F("hmm",dc);F("hmmss",ec);F("Hmm",dc);F("Hmmss",ec);S(["H","HH"],ta);S(["k","kk"],function(a,b,c){a=w(a);b[ta]=24===a?0:a});S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=
a});S(["h","hh"],function(a,b,c){b[ta]=w(a);n(c).bigHour=!0});S("hmm",function(a,b,c){var d=a.length-2;b[ta]=w(a.substr(0,d));b[Pa]=w(a.substr(d));n(c).bigHour=!0});S("hmmss",function(a,b,c){var d=a.length-4,f=a.length-2;b[ta]=w(a.substr(0,d));b[Pa]=w(a.substr(d,2));b[$a]=w(a.substr(f));n(c).bigHour=!0});S("Hmm",function(a,b,c){c=a.length-2;b[ta]=w(a.substr(0,c));b[Pa]=w(a.substr(c))});S("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[ta]=w(a.substr(0,c));b[Pa]=w(a.substr(c,2));b[$a]=w(a.substr(d))});
var yc=fa("Hours",!0),Qb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Rb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Sb,meridiemParse:/[ap]\.?m?\.?/i},sa={},nb={},mb,lc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
mc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nc=/Z|[+-]\d\d(?::?\d\d)?/,rb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Gb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qc=/^\/?Date\((\-?\d+)/i,oc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,pc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};a.createFromInputFallback=z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});a.ISO_8601=function(){};
a.RFC_2822=function(){};var zc=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=ia.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:q()}),Ac=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=ia.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:q()}),ob="year quarter month week day hour minute second millisecond".split(" ");
ga("Z",":");ga("ZZ","");F("Z",Ab);F("ZZ",Ab);S(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=T(Ab,a)});var rc=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var sc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,tc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Qa.fn=B.prototype;Qa.invalid=function(){return Qa(NaN)};var Bc=Ub(1,"add"),Cc=Ub(-1,"subtract");a.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var hc=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});G(0,["gg",2],0,function(){return this.weekYear()%100});G(0,["GG",2],0,function(){return this.isoWeekYear()%100});sb("gggg","weekYear");sb("ggggg","weekYear");sb("GGGG","isoWeekYear");sb("GGGGG","isoWeekYear");E("weekYear",
"gg");E("isoWeekYear","GG");wa.weekYear=1;wa.isoWeekYear=1;F("G",zb);F("g",zb);F("GG",ka,Ia);F("gg",ka,Ia);F("GGGG",Lb,Kb);F("gggg",Lb,Kb);F("GGGGG",yb,wb);F("ggggg",yb,wb);ra(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=w(a)});ra(["gg","GG"],function(b,c,d,f){c[f]=a.parseTwoDigitYear(b)});G("Q",0,"Qo","quarter");E("quarter","Q");wa.quarter=7;F("Q",bc);S("Q",function(a,b){b[Za]=3*(w(a)-1)});G("D",["DD",2],"Do","date");E("date","D");wa.date=9;F("D",ka);F("DD",ka,Ia);F("Do",function(a,
b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});S(["D","DD"],Va);S("Do",function(a,b){b[Va]=w(a.match(ka)[0])});var ic=fa("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear");E("dayOfYear","DDD");wa.dayOfYear=4;F("DDD",xb);F("DDDD",cc);S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=w(a)});G("m",["mm",2],0,"minute");E("minute","m");wa.minute=14;F("m",ka);F("mm",ka,Ia);S(["m","mm"],Pa);var Dc=fa("Minutes",!1);G("s",["ss",2],0,"second");E("second","s");wa.second=
15;F("s",ka);F("ss",ka,Ia);S(["s","ss"],$a);var Ec=fa("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)});G(0,["SS",2],0,function(){return~~(this.millisecond()/10)});G(0,["SSS",3],0,"millisecond");G(0,["SSSS",4],0,function(){return 10*this.millisecond()});G(0,["SSSSS",5],0,function(){return 100*this.millisecond()});G(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});G(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});G(0,["SSSSSSSS",8],0,function(){return 1E5*
this.millisecond()});G(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});E("millisecond","ms");wa.millisecond=16;F("S",xb,bc);F("SS",xb,Ia);F("SSS",xb,cc);var db;for(db="SSSS";9>=db.length;db+="S")F(db,wc);for(db="S";9>=db.length;db+="S")S(db,uc);var Fc=fa("Milliseconds",!1);G("z",0,0,"zoneAbbr");G("zz",0,0,"zoneName");var O=r.prototype;O.add=Bc;O.calendar=function(b,c){b=b||ia();var d=V(b,this).startOf("day"),d=a.calendarFormat(this,d)||"sameElse";c=c&&(y(c[d])?c[d].call(this,b):c[d]);
return this.format(c||this.localeData().calendar(d,this,ia(b)))};O.clone=function(){return new r(this)};O.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=V(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=I(b);switch(b){case "year":b=Hb(this,a)/12;break;case "month":b=Hb(this,a);break;case "quarter":b=Hb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=
(this-a-d)/6048E5;break;default:b=this-a}return c?b:v(b)};O.endOf=function(a){a=I(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};O.format=function(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);b=K(this,b);return this.localeData().postformat(b)};O.from=function(a,b){return this.isValid()&&(u(a)&&a.isValid()||ia(a).isValid())?Qa({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};
O.fromNow=function(a){return this.from(ia(),a)};O.to=function(a,b){return this.isValid()&&(u(a)&&a.isValid()||ia(a).isValid())?Qa({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};O.toNow=function(a){return this.to(ia(),a)};O.get=function(a){a=I(a);return y(this[a])?this[a]():this};O.invalidAt=function(){return n(this).overflow};O.isAfter=function(a,b){a=u(a)?a:ia(a);if(!this.isValid()||!a.isValid())return!1;b=I(d(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>
a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};O.isBefore=function(a,b){a=u(a)?a:ia(a);if(!this.isValid()||!a.isValid())return!1;b=I(d(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};O.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};O.isSame=function(a,b){a=u(a)?a:ia(a);if(!this.isValid()||!a.isValid())return!1;b=I(b||"millisecond");
if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};O.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};O.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};O.isValid=function(){return p(this)};O.lang=hc;O.locale=Vb;O.localeData=Wb;O.max=Ac;O.min=zc;O.parsingFlags=function(){return l({},n(this))};O.set=function(a,b){if("object"===typeof a){a=H(a);b=Q(a);
for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=I(a),y(this[a]))return this[a](b);return this};O.startOf=function(a){a=I(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};
O.subtract=Cc;O.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};O.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};O.toDate=function(){return new Date(this.valueOf())};O.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?
K(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):y(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",K(b,"Z")):K(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};O.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=
this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};O.toJSON=function(){return this.isValid()?this.toISOString():null};O.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};O.unix=function(){return Math.floor(this.valueOf()/1E3)};O.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};O.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};
O.year=fc;O.isLeapYear=function(){return la(this.year())};O.weekYear=function(a){return tb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};O.isoWeekYear=function(a){return tb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};O.quarter=O.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};O.month=bb;O.daysInMonth=function(){return ua(this.year(),this.month())};O.week=O.weeks=function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")};O.isoWeek=O.isoWeeks=function(a){var b=na(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};O.weeksInYear=function(){var a=this.localeData()._week;return Fa(this.year(),a.dow,a.doy)};O.isoWeeksInYear=function(){return Fa(this.year(),1,4)};O.date=ic;O.day=O.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),
a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};O.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};O.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};O.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-
this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};O.hour=O.hours=yc;O.minute=O.minutes=Dc;O.second=O.seconds=Ec;O.millisecond=O.milliseconds=Fc;O.utcOffset=function(b,c,d){var f=this._offset||0,g;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"===typeof b){if(b=T(Ab,b),null===b)return this}else 16>Math.abs(b)&&!d&&(b*=60);!this._isUTC&&c&&(g=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=b;this._isUTC=!0;null!=g&&this.add(g,"m");f!==b&&(!c||
this._changeInProgress?hb(this,Qa(b-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?f:15*-Math.round(this._d.getTimezoneOffset()/15)};O.utc=function(a){return this.utcOffset(0,a)};O.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};O.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,
!0);else if("string"===typeof this._i){var a=T(xc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};O.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?ia(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};O.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};O.isLocal=function(){return this.isValid()?!this._isUTC:!1};O.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};O.isUtc=
J;O.isUTC=J;O.zoneAbbr=function(){return this._isUTC?"UTC":""};O.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};O.dates=z("dates accessor is deprecated. Use date instead.",ic);O.months=z("months accessor is deprecated. Use month instead",bb);O.years=z("years accessor is deprecated. Use year instead",fc);O.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),
this.utcOffset(a,b),this):-this.utcOffset()});O.isDSTShifted=z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!d(this._isDSTShifted))return this._isDSTShifted;var a={};t(a,this);a=Ma(a);if(a._a){var b=a._isUTC?m(a._a):ia(a._a);this._isDSTShifted=this.isValid()&&0<A(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ja=D.prototype;ja.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;
return y(a)?a.call(b,c):a};ja.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};ja.invalidDate=function(){return this._invalidDate};ja.ordinal=function(a){return this._ordinal.replace("%d",a)};ja.preparse=Xb;ja.postformat=Xb;ja.relativeTime=function(a,b,c,d){var f=this._relativeTime[c];return y(f)?f(a,b,c,d):f.replace(/%d/i,
a)};ja.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return y(a)?a(b):a.replace(/%s/i,b)};ja.set=function(a){var b,c;for(c in a)b=a[c],y(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ja.months=function(a,b){return a?e(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||gc).test(b)?"format":"standalone"][a.month()]:e(this._months)?
this._months:this._months.standalone};ja.monthsShort=function(a,b){return a?e(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[gc.test(b)?"format":"standalone"][a.month()]:e(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ja.monthsParse=function(a,b,c){var d,f;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=m([2E3,d]),this._shortMonthsParse[d]=
this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();if(c)b="MMM"===b?qa.call(this._shortMonthsParse,a):qa.call(this._longMonthsParse,a);else if("MMM"===b){b=qa.call(this._shortMonthsParse,a);if(-1!==b)break a;b=qa.call(this._longMonthsParse,a)}else{b=qa.call(this._longMonthsParse,a);if(-1!==b)break a;b=qa.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=
[]);for(d=0;12>d;d++)if(f=m([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};
ja.monthsRegex=function(a){if(this._monthsParseExact)return k(this,"_monthsRegex")||xa.call(this),a?this._monthsStrictRegex:this._monthsRegex;k(this,"_monthsRegex")||(this._monthsRegex=pb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};ja.monthsShortRegex=function(a){if(this._monthsParseExact)return k(this,"_monthsRegex")||xa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;k(this,"_monthsShortRegex")||(this._monthsShortRegex=pb);return this._monthsShortStrictRegex&&
a?this._monthsShortStrictRegex:this._monthsShortRegex};ja.week=function(a){return na(a,this._week.dow,this._week.doy).week};ja.firstDayOfYear=function(){return this._week.doy};ja.firstDayOfWeek=function(){return this._week.dow};ja.weekdays=function(a,b){return a?e(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:e(this._weekdays)?this._weekdays:this._weekdays.standalone};ja.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:
this._weekdaysMin};ja.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};ja.weekdaysParse=function(a,b,c){var d,f;if(this._weekdaysParseExact)return Ya.call(this,a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++)if(f=m([2E3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(f,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=
new RegExp("^"+this.weekdaysShort(f,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(f,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d};
ja.weekdaysRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||Da.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;k(this,"_weekdaysRegex")||(this._weekdaysRegex=pb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};ja.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||Da.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;k(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
pb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ja.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||Da.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;k(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=pb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ja.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};ja.meridiem=function(a,b,
c){return 11<a?c?"pm":"PM":c?"am":"AM"};Ba("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===w(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=z("moment.lang is deprecated. Use moment.locale instead.",Ba);a.langData=z("moment.langData is deprecated. Use moment.localeData instead.",va);var ab=Math.abs,Gc=cb("ms"),Hc=cb("s"),Ic=cb("m"),Jc=cb("h"),Kc=cb("d"),Lc=cb("w"),Mc=cb("M"),Nc=cb("y"),Oc=ib("milliseconds"),Pc=ib("seconds"),Qc=ib("minutes"),
Rc=ib("hours"),Sc=ib("days"),Tc=ib("months"),Uc=ib("years"),eb=Math.round,Wa={ss:44,s:45,m:45,h:22,d:26,M:11},Jb=Math.abs,da=B.prototype;da.isValid=function(){return this._isValid};da.abs=function(){var a=this._data;this._milliseconds=ab(this._milliseconds);this._days=ab(this._days);this._months=ab(this._months);a.milliseconds=ab(a.milliseconds);a.seconds=ab(a.seconds);a.minutes=ab(a.minutes);a.hours=ab(a.hours);a.months=ab(a.months);a.years=ab(a.years);return this};da.add=function(a,b){return Zb(this,
a,b,1)};da.subtract=function(a,b){return Zb(this,a,b,-1)};da.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=I(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*
b)+c;default:throw Error("Unknown unit "+a);}};da.asMilliseconds=Gc;da.asSeconds=Hc;da.asMinutes=Ic;da.asHours=Jc;da.asDays=Kc;da.asWeeks=Lc;da.asMonths=Mc;da.asYears=Nc;da.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*w(this._months/12):NaN};da._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*$b(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=v(a/1E3);d.seconds=
a%60;a=v(a/60);d.minutes=a%60;a=v(a/60);d.hours=a%24;b+=v(a/24);a=v(4800*b/146097);c+=a;b-=$b(146097*a/4800);a=v(c/12);d.days=b;d.months=c%12;d.years=a;return this};da.clone=function(){return Qa(this)};da.get=function(a){a=I(a);return this.isValid()?this[a+"s"]():NaN};da.milliseconds=Oc;da.seconds=Pc;da.minutes=Qc;da.hours=Rc;da.days=Sc;da.weeks=function(){return v(this.days()/7)};da.months=Tc;da.years=Uc;da.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var d=Qa(this).abs(),f=eb(d.as("s")),g=eb(d.as("m")),e=eb(d.as("h")),h=eb(d.as("d")),k=eb(d.as("M")),d=eb(d.as("y")),f=f<=Wa.ss&&["s",f]||f<Wa.s&&["ss",f]||1>=g&&["m"]||g<Wa.m&&["mm",g]||1>=e&&["h"]||e<Wa.h&&["hh",e]||1>=h&&["d"]||h<Wa.d&&["dd",h]||1>=k&&["M"]||k<Wa.M&&["MM",k]||1>=d&&["y"]||["yy",d];f[2]=c;f[3]=0<+this;f[4]=b;c=vc.apply(null,f);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};da.toISOString=vb;da.toString=vb;da.toJSON=vb;da.locale=Vb;da.localeData=Wb;da.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
vb);da.lang=hc;G("X",0,0,"unix");G("x",0,0,"valueOf");F("x",zb);F("X",/[+-]?\d+(\.\d{1,3})?/);S("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});S("x",function(a,b,c){c._d=new Date(w(a))});a.version="2.22.1";Mb=ia;a.fn=O;a.min=function(){var a=[].slice.call(arguments,0);return N("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return N("isAfter",a)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=m;a.unix=function(a){return ia(1E3*a)};a.months=function(a,b){return Yb(a,
b,"months")};a.isDate=g;a.locale=Ba;a.invalid=q;a.duration=Qa;a.isMoment=u;a.weekdays=function(a,b,c){return Ib(a,b,c,"weekdays")};a.parseZone=function(){return ia.apply(null,arguments).parseZone()};a.localeData=va;a.isDuration=Z;a.monthsShort=function(a,b){return Yb(a,b,"monthsShort")};a.weekdaysMin=function(a,b,c){return Ib(a,b,c,"weekdaysMin")};a.defineLocale=Ka;a.updateLocale=function(a,b){if(null!=b){var c,d=Qb;c=Ja(a);null!=c&&(d=c._config);b=C(d,b);b=new D(b);b.parentLocale=sa[a];sa[a]=b;Ba(a)}else null!=
sa[a]&&(null!=sa[a].parentLocale?sa[a]=sa[a].parentLocale:null!=sa[a]&&delete sa[a]);return sa[a]};a.locales=function(){return ac(sa)};a.weekdaysShort=function(a,b,c){return Ib(a,b,c,"weekdaysShort")};a.normalizeUnits=I;a.relativeTimeRounding=function(a){return void 0===a?eb:"function"===typeof a?(eb=a,!0):!1};a.relativeTimeThreshold=function(a,b){if(void 0===Wa[a])return!1;if(void 0===b)return Wa[a];Wa[a]=b;"s"===a&&(Wa.ss=b-1);return!0};a.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};a.prototype=O;a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return a})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(a,e){return function(){return function(a,c){this.context=
this.definition=null;this.definition=a;this.context=c}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(a,e,b,c,d){return function(a){function c(b,c,d,g,e){b=a.call(this,b)||this;b._lazyPath=[];b._hasZ=!1;b._hasM=!1;b._hasZ=d;b._hasM=g;b._spRef=c;b._cacheId=e;return b}b(c,a);c.prototype.get=function(a){if(void 0===this._lazyPath[a]){var b=this._elements[a];if(void 0===b)return;this._lazyPath[a]=
new d(b,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};c.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()};c.prototype.getUniqueHash=function(){return this._cacheId.toString()};return c}(c)})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(e,b){function c(){this.constructor=e}a(e,b);e.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ../kernel ./ImmutableArray ../geometry/Point".split(" "),function(a,e,b,c,d,h){var g=0===c.version.indexOf("4.");return function(a){function c(b,c,d,f,g,e){b=a.call(this,b)||this;b._lazyPt=[];b._hasZ=!1;b._hasM=!1;b._spRef=c;b._hasZ=d;b._hasM=f;b._cacheId=
g;b._partId=e;return b}b(c,a);c.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var c=this._hasZ,d=this._hasM,f=null,f=c&&!d?new h(b[0],b[1],b[2],void 0,this._spRef):d&&c?new h(b[0],b[1],void 0,b[2],this._spRef):c&&d?new h(b[0],b[1],b[2],b[3],this._spRef):new h(b[0],b[1],this._spRef);g?f.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():f.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+
"-"+a.toString());this._lazyPt[a]=f}return this._lazyPt[a]};c.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()};c.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return c}(d)})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(a,e,b){b.prototype.repurposeFromGraphicLikeObject=function(a,b,e){void 0===e&&(e=null);
null===b&&(b={});this.attributes=b;this.geometry=a;this._datesfixed=(this._layer=e)?!1:!0};return b})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils".split(" "),function(a,e,b,c,d,h,g,f,k){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this.immutable=this._datesfixed=
!0}a.createFromGraphic=function(b){var c=new a;c._geometry=b.geometry;c.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(c._layer=b._sourceLayer,c._datesfixed=!1):b._layer?(c._layer=b._layer,c._datesfixed=!1):b.layer&&(c._layer=b.layer,c._datesfixed=!1);return c};a.createFromArcadeFeature=function(b){var c=new a;c._datesfixed=b._datesfixed;c.attributes=b.attributes;c._geometry=b._geometry;b._layer&&(c._layer=b._layer);return c};a.createFromArcadeDictionary=function(b){var d=
new a;d.attributes=b.field("attributes");null!==d.attributes?d.attributes instanceof c?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=b.field("geometry");null!==d._geometry&&(d._geometry instanceof c?d._geometry=a.parseGeometryFromDictionary(d._geometry):d._geometry instanceof g||(d._geometry=null));return d};a.createFromGraphicLikeObject=function(b,c,d){void 0===d&&(d=null);var f=new a;null===c&&(c={});f.attributes=c;f._geometry=
b;f._layer=d;f._layer&&(f._datesfixed=!1);return f};a.prototype.repurposeFromGraphicLikeObject=function(a,b,c){void 0===c&&(c=null);null===b&&(b={});this.attributes=b;this._geometry=a;this._datesfixed=(this._layer=c)?!1:!0};a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var c=this.attributes[b];null==c?a+=JSON.stringify(b)+":null":h.isBoolean(c)||h.isNumber(c)||h.isString(c)?a+=JSON.stringify(b)+":"+JSON.stringify(c):c instanceof g?a+=JSON.stringify(b)+":"+
h.toStringExplicit(c):c instanceof d?a+=JSON.stringify(b)+":"+h.toStringExplicit(c):c instanceof Array?a+=JSON.stringify(b)+":"+h.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(b)+":"+c.castToText())}return'{"geometry":'+(null===this.geometry()?"null":h.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=
this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&this._fixDateFields(a);this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=b({},this.attributes);for(var c=0;c<a.length;c++){var d=this.attributes[a[c]];if(null!==d)if(void 0===d)for(var f in this.attributes){if(f.toLowerCase()===a[c]){d=this.attributes[f];null===d||d instanceof Date||(this.attributes[f]=new Date(d));break}}else d instanceof Date||(this.attributes[a[c]]=new Date(d))}};
a.prototype.geometry=function(){return null===this._geometry||this._geometry instanceof g?this._geometry:this._geometry=k.fromJson(this._geometry)};a.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;
for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===h.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");
var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=
this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return k.fromJson(b)};
a.fixPathArrays=function(a,b,c){var f=[];if(a instanceof Array)for(var g=0;g<a.length;g++)f.push(this.fixPointArrays(a[g],b,c));else if(a instanceof d)for(g=0;g<a.length();g++)f.push(this.fixPointArrays(a.get(g),b,c));return f};a.fixPointArrays=function(a,b,c){var g=[];if(a instanceof Array)for(var e=0;e<a.length;e++){var h=a[e];h instanceof f?b&&c?g.push([h.x,h.y,h.z,h.m]):b?g.push([h.x,h.y,h.z]):c?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):g.push(h)}else if(a instanceof d)for(e=0;e<a.length();e++)h=
a.get(e),h instanceof f?b&&c?g.push([h.x,h.y,h.z,h.m]):b?g.push([h.x,h.y,h.z]):c?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):g.push(h);return g};a.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var f={},g;for(g in b.attributes){var e=b.attributes[g];e instanceof c&&(e=a.convertDictionaryToJson(e));d?f[g.toLowerCase()]=e:f[g]=e}return f};a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(h.isSimpleType(d))b[c]=d;else throw Error("Illegal Argument");
}return b};a.fromJson=function(b){var c=null;null!==b.geometry&&void 0!==b.geometry&&(c=k.fromJson(b.geometry));var d={};if(null!==b.attributes&&void 0!==b.attributes)for(var f in b.attributes){var g=b.attributes[f];if(h.isString(g)||h.isNumber(g)||h.isBoolean(g)||h.isDate(g))d[f]=g;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(c,d,null)};a.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=h.getDomain(a,this._layer,this,
c);if(void 0===b)try{b=this.field(a)}catch(q){return null}return h.getDomainValue(c,b)};a.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=h.getDomain(a,this._layer,this,c);return h.getDomainCode(a,b)};return a}()})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(a){for(var e,b=1,c=arguments.length;b<c;b++){e=arguments[b];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}return a}})},
"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(a,e,b,c,d,h,g,f,k){function l(a,b,c){var d=a.rings||a.paths,f,g,e,h,k,l,m,n;f=0;for(g=d.length;f<g;f++)for(k=d[f],e=0,h=k.length;e<h;e++)l=k[e],0<e?(m+=l[0],n+=l[1]):(m=l[0],n=l[1]),l[0]=b(m),l[1]=c(n);return a}var m={esriGeometryPoint:function(a,b,c){a.x=b(a.x);a.y=c(a.y);return a},esriGeometryPolyline:l,esriGeometryPolygon:l,esriGeometryEnvelope:function(a,
b,c){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax);return a},esriGeometryMultipoint:function(a,b,c){var d=a.points,f,g,e,h,k;f=0;for(g=d.length;f<g;f++)e=d[f],0<f?(h+=e[0],k+=e[1]):(h=e[0],k=e[1]),e[0]=b(h),e[1]=c(k);return a}},n={esriGeometryPoint:function(a,b,c){a.x=b(a.x);a.y=c(a.y);return a}},p={createInstance:function(a,b){a=new a;b&&c.mixin(a,b);return a},fromJson:function(a){if(void 0!==a.x&&void 0!==a.y)return new d(a);if(void 0!==a.paths)return new h(a);if(void 0!==
a.rings)return new g(a);if(void 0!==a.points)return new f(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new k(a)},getJsonType:function(a){return a instanceof d?"esriGeometryPoint":a instanceof h?"esriGeometryPolyline":a instanceof g?"esriGeometryPolygon":a instanceof k?"esriGeometryEnvelope":a instanceof f?"esriGeometryMultipoint":null},getGeometryType:function(a){return"esriGeometryPoint"===a?d:"esriGeometryPolyline"===a?h:"esriGeometryPolygon"===a?g:"esriGeometryEnvelope"===
a?k:"esriGeometryMultipoint"===a?f:null},supportsLazyUnquantization:function(a){return"esriGeometryPoint"===a||"esriGeometryPolyline"===a||"esriGeometryPolygon"===a||"esriGeometryMultipoint"===a},unquantizeFunction:function(a,b){if(a&&b){var c=b.translate[0],d=b.translate[1],f=b.scale[0],g=b.scale[1],e=function(a){return a*f+c},h=function(a){return d-a*g},k=m[a];return function(a){return a?k(a,e,h):null}}},unquantize:function(a,b,c){if(b=p.unquantizeFunction(b,c)){var d=a.length;for(c=0;c<d;c++)b(a[c].geometry)}},
quantizeFunction:function(a,b){if(a&&"esriGeometryPoint"===a&&b){var c=b.translate[0],d=b.translate[1],f=b.scale[0],g=b.scale[1],e=function(a){return Math.round((a-c)/f)},h=function(a){return Math.round((d-a)/g)},k=n[a];return function(a){return a?k(a,e,h):null}}},quantize:function(a,b,c){if(b=p.quantizeFunction(b,c)){var d=a.length;for(c=0;c<d;c++)b(a[c].geometry)}}};a.mixin(a.getObject("geometry",!0,b),p);return p})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],
function(a,e){function b(a){return a?72*a/e.DPI:0}Object.defineProperty(e,"__esModule",{value:!0});var c=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;e.DPI=96;e.pt2px=function(a){return a?a/72*e.DPI:0};e.px2pt=b;e.toPt=function(a){if("string"===typeof a){if(c.test(a)){var d=a.match(c),g=Number(d[1]),d=d[3]&&d[3].toLowerCase();a="-"===a.charAt(0);g="px"===d?b(g):g;return a?-g:g}return null}return a}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils",
"esri/arcade/Dictionary"],function(a,e,b,c){Object.defineProperty(e,"__esModule",{value:!0});e.createSyntaxTree=function(a){return b.createSyntaxTree(a)};e.createFunction=function(a,c){return b.createFunction(a,c)};e.createExecContext=function(a,c){return b.createExecContext(a,c)};e.executeFunction=function(a,c){return b.executeFunction(a,c)};e.extractFieldNames=function(a){return b.extractFieldNames(a)};e.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new c({viewingMode:a.viewingMode,
scale:a.scale}),sr:a.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(a,e,b,c){a.setObject("renderer.arcadeUtils",c,b);return c})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(a,e,b,c,d,h){var g={vars:{$feature:"any",$view:"any"}},f=/^\$feature\./i,k={_getSyntaxTree:function(a,b){return"string"===
typeof a?k.createSyntaxTree(a,b):a},createSyntaxTree:function(b,c){c=c||a.clone(g);var f;try{f=b?d.parseScript(b,c):null}catch(p){f=null}return f},createFunction:function(b,c){c=c||a.clone(g);b=k._getSyntaxTree(b,c);var f;try{f=b?d.compileScript(b,c):null}catch(p){f=null}return f},createExecContext:function(a,b){return{vars:{$feature:a?h.createFromGraphic(a):new h,$view:b&&b.view},spatialReference:b&&b.sr}},evalSyntaxTree:function(a,b){var c;try{c=d.executeScript(a,b,b.spatialReference)}catch(p){c=
null}return c},executeFunction:function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(p){c=null}return c},extractFieldNames:function(a,b){a=k._getSyntaxTree(a,b);a=d.extractFieldLiterals(a);var c=[];e.forEach(a,function(a){f.test(a)&&(a=a.replace(f,""),c.push(a))});c.sort();return e.filter(c,function(a,b){return 0===b||c[b-1]!==a})},dependsOnView:function(a){return d.referencesMember(a,"$view")},hasGeometryOperations:function(a){return(a=k._getSyntaxTree(a))?d.scriptUsesGeometryEngine(a):
!1},enableGeometryOperations:function(){return d.enableGeometrySupport()}};a.setObject("renderer.expressionUtils",k,c);return k})},"esri/arcade/arcade":function(){define("require exports dojo/Deferred dojo/has ./arcadeCompiler ./arcadeRuntime ./parser".split(" "),function(a,e,b,c,d,h,g){Object.defineProperty(e,"__esModule",{value:!0});var f="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
e.compileScript=function(a,b){return c("csp-restrictions")?function(b,c){return h.executeScript(a,b,c)}:d.compileScript(a,b)};e.extend=function(a){h.extend(a);d.extend(a)};e.parseScript=function(a){return g.parseScript(a)};e.validateScript=function(a,b){return g.validateScript(a,b,"simple")};e.scriptCheck=function(a,b,c){return g.scriptCheck(a,b,c,"full")};e.parseAndExecuteScript=function(a,b,c){return h.executeScript(g.parseScript(a),b,c)};e.executeScript=function(a,b,c){return h.executeScript(a,
b,c)};e.referencesMember=function(a,b){return h.referencesMember(a,b)};e.referencesFunction=function(a,b){return h.referencesFunction(a,b)};e.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return g.extractFieldLiterals(a,b)};e.scriptUsesGeometryEngine=function(a){a=h.findFunctionCalls(a);for(var b=0;b<a.length;b++)if(-1<f.indexOf(a[b]))return!0;return!1};e.enableGeometrySupport=function(){var c=new b;a(["esri/geometry/geometryEngine","./functions/geomsync"],function(a,b){b.setGeometryEngine(a);
c.resolve(!0)},function(a){c.reject(a)});return c.promise}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),function(a,
e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v,w,A,z){function x(a,b,c){try{return c(a,null,b)}catch(Sa){throw Sa;}}function y(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return H(a,b);case "VariableDeclaration":for(var c=[],d=0;d<b.declarations.length;d++)c.push(y(a,b.declarations[d]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return I(a,b);case "FunctionDeclaration":var d=b.id.name.toLowerCase(),g={applicationCache:void 0===
a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,symbols:a.symbols,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<g.depthCounter)throw Error("Exceeded maximum function depth");for(var e="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",h=0;h<b.params.length;h++){var k=b.params[h].name.toLowerCase(),l=W(k,a);g.localScope._SymbolsMap[k]=
l;e+="lscope['"+l+"']\x3darguments["+h.toString()+"];\n"}e+=I(g,b.body)+"\n return lastStatement; }, runtimeCtx))";e+="\n lastStatement \x3d lc.voidOperation; \n";void 0!==a.globalScope[d]?c="gscope['"+d+"']\x3d"+e:void 0!==a.globalScope._SymbolsMap[d]?c="gscope['"+a.globalScope._SymbolsMap[d]+"']\x3d"+e:(l=W(d,a),a.globalScope._SymbolsMap[d]=l,c="gscope['"+l+"']\x3d"+e);return c;case "ReturnStatement":var m;m=null===b.argument?"return lc.voidOperation;":"return "+y(a,b.argument)+";";return m;case "IfStatement":if("AssignmentExpression"===
b.test.type||"UpdateExpression"===b.test.type)throw Error(f.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var n=y(a,b.test),v=F(a),p="var "+v+" \x3d "+n+";\n if ("+v+" \x3d\x3d\x3d true) {\n"+E(a,b.consequent)+"\n }\n",p=null!==b.alternate?p+("else if ("+v+"\x3d\x3d\x3dfalse)   { \n"+E(a,b.alternate)+"}\n"):p+("else if ("+v+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return p+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
case "ExpressionStatement":var w;w="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+y(a,b.expression)+" \n ":"lastStatement \x3d "+y(a,b.expression)+";";return w;case "AssignmentExpression":return D(a,b);case "UpdateExpression":return C(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=y(a,b.init));var u=F(a),q=F(a),c=c+("var "+u+" \x3d true;")+"\n do { ";
null!==b.update&&(c+=" if ("+u+"\x3d\x3d\x3dfalse) {\n "+y(a,b.update)+"  \n}\n "+u+"\x3dfalse; \n");null!==b.test&&(c+="var "+q+" \x3d "+y(a,b.test)+";",c+="if ("+q+"\x3d\x3d\x3dfalse) { break; } else if ("+q+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=y(a,b.body);null!==b.update&&(c+="\n "+y(a,b.update));return c+("\n"+u+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var t=F(a),A=F(a),
r=F(a),z="var "+t+" \x3d "+y(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(z+=y(a,b.left));var x="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,x=x.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[x]?c="lscope['"+x+"']":void 0!==a.localScope._SymbolsMap[x]&&(c="lscope['"+a.localScope._SymbolsMap[x]+"']"));""===c&&(void 0!==a.globalScope[x]?c="gscope['"+x+"']":void 0!==a.globalScope._SymbolsMap[x]&&(c="gscope['"+a.globalScope._SymbolsMap[x]+"']"));
z=z+("if ("+t+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+t+") || lc.isString("+t+")) {")+("var "+A+"\x3d"+t+".length; \n")+("for(var "+r+"\x3d0; "+r+"\x3c"+A+"; "+r+"++) {\n");z+=c+"\x3d"+r+";\n";z+=y(a,b.body);z+="\n}\n";z+=" lastStatement \x3d lc.voidOperation; \n";z+=" \n}\n";z+="else if (lc.isImmutableArray("+t+")) {";z=z+("var "+A+"\x3d"+t+".length(); \n")+("for(var "+r+"\x3d0; "+r+"\x3c"+A+"; "+r+"++) {\n");z+=c+"\x3d"+r+";\n";z+=y(a,b.body);z+=
"\n}\n";z+=" lastStatement \x3d lc.voidOperation; \n";z+=" \n}\n";z+="else if (( "+t+" instanceof lang.Dictionary) || ( "+t+" instanceof lang.Feature)) {";z=z+("var "+A+"\x3d"+t+".keys(); \n")+("for(var "+r+"\x3d0; "+r+"\x3c"+A+".length; "+r+"++) {\n");z+=c+"\x3d"+A+"["+r+"];\n";z+=y(a,b.body);z+="\n}\n";z+=" lastStatement \x3d lc.voidOperation; \n";z+=" \n}\n";return z+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return U(a,b);case "MemberExpression":var Q;try{c=void 0,c=
!0===b.computed?y(a,b.property):"'"+b.property.name+"'",Q="lang.member("+y(a,b.object)+","+c+")"}catch(ma){throw ma;}return Q;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(f.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var ba=b.callee.name.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[ba]?
c="lscope['"+ba+"']":void 0!==a.localScope._SymbolsMap[ba]&&(c="lscope['"+a.localScope._SymbolsMap[ba]+"']"));""===c&&(void 0!==a.globalScope[ba]?c="gscope['"+ba+"']":void 0!==a.globalScope._SymbolsMap[ba]&&(c="gscope['"+a.globalScope._SymbolsMap[ba]+"']"));if(""!==c)for(d="[",g=0;g<b.arguments.length;g++)0<g&&(d+=", "),d+=y(a,b.arguments[g]);else throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ma){throw ma;}return"lang.callfunc("+c+","+(d+"]")+",runtimeCtx)";case "UnaryExpression":var G;
try{G="lang.unary("+y(a,b.argument)+",'"+b.operator+"')"}catch(ma){throw ma;}return G;case "BinaryExpression":var P;try{P="lang.binary("+y(a,b.left)+","+y(a,b.right)+",'"+b.operator+"')"}catch(ma){throw ma;}return P;case "LogicalExpression":var Ea;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(f.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(f.nodeErrorMessage(b.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)Ea="(lang.logicalCheck("+y(a,b.left)+") "+b.operator+" lang.logicalCheck("+y(a,b.right)+"))";else throw Error(f.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(ma){throw ma;}return Ea;case "ConditionalExpression":throw Error(f.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(d=0;d<b.elements.length;d++)"Literal"===b.elements[d].type?c.push(y(a,b.elements[d])):
c.push("lang.aCheck("+y(a,b.elements[d])+",'ArrayExpression')");e="["+c.join(",")+"]"}catch(ma){throw ma;}return e;case "ObjectExpression":c="lang.dictionary([";for(d=0;d<b.properties.length;d++){var h=b.properties[d],ea="Identifier"===h.key.type?"'"+h.key.name+"'":y(a,h.key),L=y(a,h.value);0<d&&(c+=",");c+="lang.strCheck("+ea+",'ObjectExpression'),lang.aCheck("+L+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(f.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));default:throw Error(f.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(ma){throw ma;}}function C(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=y(a,b.argument.object),d=!0===b.argument.computed?y(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function D(a,b){var c=y(a,b.right),d=null,f="";if("MemberExpression"===b.left.type)return d=
y(a,b.left.object),f=!0===b.left.computed?y(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+f+",'"+b.operator+"',"+c+");";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function E(a,b){return"BlockStatement"===b.type?y(a,b):"ReturnStatement"===b.type?y(a,b):"BreakStatement"===b.type?y(a,b):"ContinueStatement"===b.type?y(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+y(a,b)+";":
"ExpressionStatement"===b.type?y(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+y(a,b)+";":y(a,b)}function I(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(y(a,b.body[d])+" \n"):"BreakStatement"===b.body[d].type?c+(y(a,b.body[d])+" \n"):"ContinueStatement"===b.body[d].type?c+(y(a,b.body[d])+" \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+y(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+y(a,b.body[d])+
"; \n"):c+(y(a,b.body[d])+" \n");return c}function H(a,b){var c=null===b.init?null:y(a,b.init);c===g.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+";";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+";";var d=W(b,a);a.localScope._SymbolsMap[b]=d;return"lscope['"+d+"']\x3d"+c+";"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+";";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+
a.globalScope._SymbolsMap[b]+"']\x3d"+c+";";d=W(b,a);a.globalScope._SymbolsMap[b]=d;return"gscope['"+d+"']\x3d"+c+";"}function Q(a,c,e){c=c.toLowerCase();switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(e=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(e=!1),e&&(L++,c=a.spatialReference._arcadeCacheId=L)),a=new b({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),
void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(L++,c=L,g.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new d(a.rings,a.spatialReference,
!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(L++,c=L,g.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new d(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=
g.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(L++,c=L,g.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new h(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(f.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function U(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+
a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(f.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Sa){throw Sa;}}function G(a){return null===a?"":g.isArray(a)||g.isImmutableArray(a)?"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof b?"Dictionary":a instanceof c?"Feature":a instanceof v?"Point":
a instanceof w?"Polygon":a instanceof A?"Polyline":a instanceof u?"Multipoint":a instanceof t?"Extent":g.isFunctionParameter(a)?"Function":a===g.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function R(a,b,c,d){try{if(g.equalityTest(b[c],d))return b[c+1];var f=b.length-c;return 1===f?b[c]:2===f?null:3===f?b[c+2]:R(a,b,c+2,d)}catch(xa){throw xa;}}function X(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var f=b[c+2];if(!1===g.isBoolean(f))throw Error("WHEN needs boolean test conditions");
return X(a,b,c+2,f)}catch(xa){throw xa;}}function K(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var f=K(a.slice(0,d),b);a=K(a.slice(d,c),b);for(c=[];0<f.length||0<a.length;)0<f.length&&0<a.length?(d=b(f[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(f[0]),f=f.slice(1)):(c.push(a[0]),a=a.slice(1))):0<f.length?(c.push(f[0]),f=f.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function W(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function F(a){a.symbols.symbolCounter++;
return"_Tvar"+a.symbols.symbolCounter.toString()}function ea(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var f in b)d[f]=1;for(f in c)d[f]=1;for(f in a)d[f]=1;return d}function P(a){}Object.defineProperty(e,"__esModule",{value:!0});var L=0,S={};k.registerFunctions(S,x);q.registerFunctions(S,x);n.registerFunctions(S,x);l.registerFunctions(S,x);p.registerFunctions(S,x);m.registerFunctions(S,x);S["typeof"]=function(a,b){return x(a,b,function(a,b,c){g.pcCheck(c,
1,1);a=G(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};S.iif=function(a,b){try{return x(a,b,function(a,b,c){g.pcCheck(c,3,3);if(!1===g.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(ua){throw ua;}};S.decode=function(a,b){try{return x(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");return R(a,
d,1,d[0])})}catch(ua){throw ua;}};S.when=function(a,b){try{return x(a,b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===g.isBoolean(b))throw Error("WHEN needs boolean test conditions");return X(a,d,0,b)})}catch(ua){throw ua;}};S.top=function(a,b){return x(a,b,function(a,b,c){g.pcCheck(c,2,2);if(g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};S.first=function(a,b){return x(a,b,function(a,b,c){g.pcCheck(c,1,1);return g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};S.sort=function(a,b){return x(a,b,function(a,b,c){g.pcCheck(c,1,2);b=c[0];g.isImmutableArray(b)&&(b=b.toArray());if(!1===g.isArray(b))throw Error("Illegal Argument");if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");
b=K(b,function(b,d){return fa.callfunc(c[1],[b,d],a)})}else{if(0===b.length)return[];for(var d={},f=0;f<b.length;f++){var e=G(b[f]);""!==e&&(d[e]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);var f=0,e="",h;for(h in d)f++,e=h;b=1<f||"String"===e?K(b,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||void 0===
b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):"Number"===e?K(b,function(a,b){return a-b}):"Boolean"===e?K(b,function(a,b){return a===b?0:b?-1:1}):"Date"===e?K(b,function(a,b){return b-a}):b.slice(0)}return b})};for(var ra in S)S[ra]=new g.NativeFunction(S[ra]);var la=function(){};la.prototype=S;e.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:function(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(y(a,b.arguments[d]));return c},
standardFunction:x};e.extend=function(a){for(var b={mode:"sync",compiled:!0,functions:{},signatures:[],standardFunction:x},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var d in b.functions)S[d]=new g.NativeFunction(b.functions[d]),la.prototype[d]=S[d];for(c=0;c<b.signatures.length;c++)f.addFunctionDeclaration(b.signatures[c],"f")};e.executeScript=function(a,b,c){return a(b,c)};e.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return f.findFieldLiterals(a,b)};e.validateScript=function(a,
b){return f.validateScript(a,b,"simple")};e.referencesMember=function(a,b){return f.referencesMember(a,b)};e.referencesFunction=function(a,b){return f.referencesFunction(a,b)};var fa={error:function(a,b,c){throw Error(f.nodeErrorMessage(a,b,c));},functionDepthchecker:function(a,b){return function(){b.depthCounte++;if(64<b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounte--;return c}},aCheck:function(a,b){if(g.isFunctionParameter(a))throw Error(f.nodeErrorMessage({type:b},
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===g.voidOperation?null:a},Dictionary:b,Feature:c,dictionary:function(a){for(var c={},d=0;d<a.length;d+=2){if(g.isFunctionParameter(a[d+1]))throw Error("Illegal Argument");if(!1===g.isString(a[d]))throw Error("Illegal Argument");c[a[d].toString()]=a[d+1]===g.voidOperation?null:a[d+1]}a=new b(c);a.immutable=!1;return a},strCheck:function(a,b){if(!1===g.isString(a))throw Error("Illegal Argument");return a},unary:function(a,b){if(g.isBoolean(a)){if("!"===
b)return!a;if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);throw Error(f.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);throw Error(f.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===g.isBoolean(a))throw Error(f.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return a},logical:function(a,b,c){if(g.isBoolean(a)&&
g.isBoolean(b))switch(c){case "||":return a||b;case "\x26\x26":return a&&b;default:throw Error(f.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(f.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(a,b,c){switch(c){case "\x3d\x3d":return g.equalityTest(a,b);case "\x3d":return g.equalityTest(a,b);case "!\x3d":return!g.equalityTest(a,b);case "\x3c":return g.greaterThanLessThan(a,b,c);case "\x3e":return g.greaterThanLessThan(a,b,c);case "\x3c\x3d":return g.greaterThanLessThan(a,
b,c);case "\x3e\x3d":return g.greaterThanLessThan(a,b,c);case "+":return g.isString(a)||g.isString(b)?g.toString(a)+g.toString(b):g.toNumber(a)+g.toNumber(b);case "-":return g.toNumber(a)-g.toNumber(b);case "*":return g.toNumber(a)*g.toNumber(b);case "/":return g.toNumber(a)/g.toNumber(b);case "%":return g.toNumber(a)%g.toNumber(b);default:throw Error(f.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,b,c){switch(b){case "\x3d":return a===g.voidOperation?
null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%g.toNumber(a);default:throw Error(f.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,c,d){var f=g.toNumber(a[b]);a[b]="++"===c?f+1:f-1;return!1===d?f:"++"===c?f+
1:f-1},memberupdate:function(a,d,f,e){var h;if(g.isArray(a))if(g.isNumber(d)){0>d&&(d=a.length+d);if(0>d||d>=a.length)throw Error("Assignment outside of array bounds");h=g.toNumber(a[d]);a[d]="++"===f?h+1:h-1}else throw Error("Invalid Parameter");else if(a instanceof b){if(!1===g.isString(d))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(d))h=g.toNumber(a.field(d)),a.setField(d,"++"===f?h+1:h-1);else throw Error("Invalid Parameter");}else if(a instanceof c){if(!1===g.isString(d))throw Error("Feature accessor must be a string");
if(!0===a.hasField(d))h=g.toNumber(a.field(d)),a.setField(d,"++"===f?h+1:h-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===e?h:"++"===f?h+1:h-1},assignmember:function(a,d,f,e){if(g.isArray(a))if(g.isNumber(d)){0>d&&(d=a.length+d);if(0>d||d>a.length)throw Error("Assignment outside of array bounds");if(d===a.length&&"\x3d"!==f)throw Error("Invalid Parameter");a[d]=this.assign(e,f,a[d])}else throw Error("Invalid Parameter");
else if(a instanceof b){if(!1===g.isString(d))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(d))a.setField(d,this.assign(e,f,a.field(d)));else{if("\x3d"!==f)throw Error("Invalid Parameter");a.setField(d,this.assign(e,f,null))}}else if(a instanceof c){if(!1===g.isString(d))throw Error("Feature accessor must be a string");if(!0===a.hasField(d))a.setField(d,this.assign(e,f,a.field(d)));else{if("\x3d"!==f)throw Error("Invalid Parameter");a.setField(d,this.assign(e,f,null))}}else{if(g.isImmutableArray(a))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}},member:function(a,d){if(null===a)throw Error(f.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(a instanceof b||a instanceof c){if(g.isString(d))return a.field(d)}else if(a instanceof r){if(g.isString(d))return Q(a,d,"MemberExpression")}else if(g.isArray(a)){if(g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=a.length+d);if(d>=a.length||0>d)throw Error(f.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[d]}}else if(g.isString(a)){if(g.isNumber(d)&&
isFinite(d)&&Math.floor(d)===d){0>d&&(d=a.length+d);if(d>=a.length||0>d)throw Error(f.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[d]}}else if(g.isImmutableArray(a)&&g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=a.length()+d);if(d>=a.length()||0>d)throw Error(f.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a.get(d)}throw Error(f.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof g.NativeFunction?
a.fn(c,b):a instanceof g.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};e.compileScript=function(a,d){void 0===d&&(d=null);null===d&&(d={vars:{},customfunctions:{}});d={globalScope:ea(d.vars,S,d.customfunctions),localScope:null,console:P,symbols:{symbolCounter:0}};a=y(d,a.body[0].body);""===a&&(a="lc.voidOperation;");d={lc:g,lang:fa,postProcess:function(a){a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");
if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(g.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,d){d||(d=new z({wkid:102100}));var f=a.vars,g=a.customfunctions,e=new la;f||(f={});g||(g={});var h=new b({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;e._SymbolsMap={textformatting:1,infinity:1,pi:1};e.textformatting=h;e.infinity=Number.POSITIVE_INFINITY;e.pi=Math.PI;for(var k in g)e[k]=
g[k],e._SymbolsMap[k]=1;for(k in f)e._SymbolsMap[k]=1,e[k]=f[k]&&"esri.Graphic"===f[k].declaredClass?c.createFromGraphic(f[k]):f[k];return{spatialReference:d,globalScope:e,localScope:null,console:a.console?a.console:P,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?null:a.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(d)}})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(a,e){function b(a,b,c,d){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function c(a,c,d){if(null!==d.localScope&&void 0!==d.localScope[a.toLowerCase()]){var f=d.localScope[a.toLowerCase()];if("FormulaFunction"===f.type||"any"===f.type)return void 0===f.signature&&(f.signature={min:"0",max:"*"}),b(f.signature,
a,c,d)}return void 0!==d.globalScope[a.toLowerCase()]&&(f=d.globalScope[a.toLowerCase()],"FormulaFunction"===f.type||"any"===f.type)?(void 0===f.signature&&(f.signature={min:"0",max:"*"}),b(f.signature,a,c,d)):-1}function d(a,b){void 0===b&&(b=!0);var c=p(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?p(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?p(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==
a.init?d(a.init,!1):"";case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)if(c=d(a.declarations[f],b),""!==c)return c;return"";case "ForInStatement":c=d(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return p(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return p(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return p(a,"SYNTAX","LEFTNOTVAR");c=d(a.right,b);if(""!==c)break;c=d(a.body,b);if(""!==c)break;
return"";case "ForStatement":if(null!==a.test&&(c=d(a.test,b),""!==c))break;if(null!==a.init&&(c=d(a.init,b),""!==c))break;if(null!==a.update&&(c=d(a.update,b),""!==c))break;if(null!==a.body&&(c=d(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=d(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=d(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=d(a.alternate,!1),""!==c))break;return"";
case "BlockStatement":for(var g=[],f=0;f<a.body.length;f++)"EmptyStatement"!==a.body[f].type&&g.push(a.body[f]);a.body=g;for(f=0;f<a.body.length;f++)if(c=d(a.body[f],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?p(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?p(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):d(a.body,!1);case "ReturnStatement":return null!==a.argument?d(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==
a.argument.type?p(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):d(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return p(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=d(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return d(a.right,!1);case "ExpressionStatement":return d(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=
d(a.object,b);if(""!==c)break;return!0===a.computed?d(a.property,b):"";case "Literal":return"";case "ThisExpression":return p(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return p(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(f=0;f<a.arguments.length;f++)if(c=d(a.arguments[f],b),""!==c)return c;return"";case "UnaryExpression":c=d(a.argument,b);break;case "BinaryExpression":c=d(a.left,b);if(""!==c)break;c=d(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=d(a.left,b);if(""!==c)break;c=d(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return p(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return p(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(f=0;f<a.elements.length&&(c=d(a.elements[f],b),""===c);f++);break;case "Array":return p(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(f=
0;f<a.properties.length&&(c="",null!==a.properties[f].key&&("Literal"!==a.properties[f].key.type&&"Identifier"!==a.properties[f].key.type&&(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[f].key.type&&(g=a.properties[f].key.value,"string"===typeof g||g instanceof String||(c=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=d(a.properties[f],b)),""===c);f++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return p(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==
a.key.type&&(c=d(a.key,b),""!==c))break;c=d(a.value,b)}return c}catch(y){throw y;}}function h(a,b){var d=p(a,"SYNTAX","UNREOGNISED"),f=null,g="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return p(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");a.id.name.toLowerCase();var e=null===a.init?"":h(a.init,b);if(""!==e)return e;null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"};return"";
case "FunctionDeclaration":f=l(a.id.name.toLowerCase(),a,b);g=m(a,b);if(""!==g)return g;if(null!==b.localScope)return p(a,"SYNTAX","GLOBALFUNCTIONSONLY");f.isnative=!1;b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]};return"";case "VariableDeclaration":for(var d="",k=0;k<a.declarations.length&&(d=h(a.declarations[k],b),""===d);k++);break;case "IfStatement":d=h(a.test,b);if(""!==d)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return p(a.test,
"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(d=h(a.consequent,b),""!==d))break;if(null!==a.alternate&&(d=h(a.alternate,b),""!==d))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(k=0;k<a.body.length;k++)if(d=h(a.body[k],b),""!==d)return d;return"";case "ReturnStatement":return null!==a.argument?h(a.argument,b):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return p(a,"SYNTAX","ONLY1VAR");if(null!==
a.left.declarations[0].init)return p(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return p(a,"SYNTAX","LEFTNOTVAR");d=h(a.left,b);if(""!==d)break;d=h(a.right,b);if(""!==d)break;d=h(a.body,b);if(""!==d)break;return"";case "ForStatement":if(null!==a.init&&(d=h(a.init,b),""!==d))break;if(null!==a.test&&(d=h(a.test,b),""!==d))break;if(null!==a.body&&(d=h(a.body,b),""!==d))break;if(null!==a.update&&(d=h(a.update,b),""!==d))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";
case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return p(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var n=!1;if("MemberExpression"===a.argument.type)return h(a.argument,b);null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(n=!0);void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(n=!0);return!1===n?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==
a.left.type)return p(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var v=h(a.right,b);if(""!==v)return v;n=!1;if("MemberExpression"===a.left.type)return v=h(a.left,b),""!==v?v:"";null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(n=!0);void 0!==b.globalScope[a.left.name.toLowerCase()]&&(n=!0);return!1===n?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return h(a.expression,b);case "Identifier":var w=a.name.toLowerCase();if(null!==b.localScope&&void 0!==
b.localScope[w])return"";d=void 0!==b.globalScope[w]?"":p(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":d=h(a.object,b);if(""!==d)break;return!0===a.computed?h(a.property,b):"";case "Literal":return"";case "ThisExpression":d=p(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return p(a,"SYNTAX","ONLYNODESSUPPORTED");d="";for(k=0;k<a.arguments.length;k++)if(d=h(a.arguments[k],b),""!==d)return d;var u=c(a.callee.name,a.arguments,b);-1===u&&(d=p(a,
"SYNTAX","NOTFOUND"));-2===u&&(d=p(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":d=h(a.argument,b);break;case "BinaryExpression":d=h(a.left,b);if(""!==d)break;d=h(a.right,b);if(""!==d)break;return"";case "LogicalExpression":d=h(a.left,b);if(""!==d)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return p(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");d=h(a.right,b);if(""!==d)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===
a.right.type?p(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return p(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(k=0;k<a.elements.length&&(d=h(a.elements[k],b),""===d);k++);break;case "ObjectExpression":d="";for(k=0;k<a.properties.length;k++){d="";if(null!==a.properties[k].key&&("Literal"!==a.properties[k].key.type&&"Identifier"!==a.properties[k].key.type&&(d=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[k].key.type)){var q=
a.properties[k].key.value;"string"===typeof q||q instanceof String||(d=p(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=h(a.properties[k],b));if(""!==d)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return p(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(d=h(a.key,b),""!==d))break;d=h(a.value,b);break;case "Array":return p(a,"SYNTAX","NOTSUPPORTED")}return d}catch(U){throw U;}}function g(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?g(a.init,b):c;case "FunctionDeclaration":return g(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(g(a.declarations[d],b))return!0;return c;case "IfStatement":return g(a.test,b)||null!==a.consequent&&g(a.consequent,b)||null!==a.alternate&&g(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(g(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?g(a.argument,b):c;case "UpdateExpression":return g(a.argument,
b);case "AssignmentExpression":return(c=g(a.right,b))?c:g(a.left,b);case "ExpressionStatement":return g(a.expression,b);case "ForInStatement":return(c=g(a.left,b))||(c=g(a.right,b))?c:c=g(a.body,b);case "ForStatement":if(null!==a.init&&(c=g(a.init,b))||null!==a.test&&(c=g(a.test,b))||null!==a.body&&(c=g(a.body,b)))return c;null!==a.update&&(c=g(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===
a.name.toLowerCase();case "MemberExpression":if(c=g(a.object,b))return c;!0===a.computed&&(c=g(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)g(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)g(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return g(a.argument,b);case "BinaryExpression":return(c=g(a.left,b))?c:c=g(a.right,b);case "LogicalExpression":return(c=g(a.left,
b))?c:c=g(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)g(a.properties[d],b)&&(c=!0);return c;case "Property":return c=g(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(x){throw x;}}function f(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?f(a.init,b):c;case "FunctionDeclaration":return f(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(f(a.declarations[d],b))return!0;
return c;case "IfStatement":return f(a.test,b)||null!==a.consequent&&f(a.consequent,b)||null!==a.alternate&&f(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(f(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?f(a.argument,b):c;case "UpdateExpression":return f(a.argument,b);case "AssignmentExpression":return f(a.left,b)?!0:f(a.right,b);case "ExpressionStatement":return f(a.expression,b);case "ForInStatement":return(c=
f(a.left,b))||(c=f(a.right,b))?c:c=f(a.body,b);case "ForStatement":if(null!==a.init&&(c=f(a.init,b))||null!==a.test&&(c=f(a.test,b))||null!==a.body&&(c=f(a.body,b)))return c;null!==a.update&&(c=f(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=f(a.object,b))return c;!0===a.computed&&(c=f(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===
b.toLowerCase())return!0;for(d=0;d<a.arguments.length;d++)f(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)f(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return f(a.argument,b);case "BinaryExpression":return(c=f(a.left,b))?c:c=f(a.right,b);case "LogicalExpression":return(c=f(a.left,b))?c:c=f(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(d=0;d<a.properties.length;d++)f(a.properties[d],b)&&(c=!0);return c;case "Property":return c=
f(a.value,b);case "Array":return c;default:return c}}catch(x){throw x;}}function k(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?k(a.init,b):c;case "FunctionDeclaration":return k(a.body,b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)d=k(a.declarations[f],b),c=c.concat(d);return c;case "ForInStatement":return d=k(a.left,b),c=c.concat(d),d=k(a.right,b),c=c.concat(d),d=k(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=k(a.init,
b),c=c.concat(d)),null!==a.test&&(d=k(a.test,b),c=c.concat(d)),null!==a.body&&(d=k(a.body,b),c=c.concat(d)),null!==a.update&&(d=k(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=k(a.test,b),c=c.concat(d),null!==a.consequent&&(d=k(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=k(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(f=0;f<a.body.length;f++)d=k(a.body[f],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?k(a.argument,
b):c;case "UpdateExpression":return k(a.argument,b);case "AssignmentExpression":return c=k(a.left,b),c=c.concat(k(a.right,b));case "ExpressionStatement":return k(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&
c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(y){}return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(f=0;f<a.arguments.length;f++)d=k(a.arguments[f],b),c=c.concat(d);return c;case "ArrayExpression":for(f=0;f<a.elements.length;f++)d=k(a.elements[f],b),c=c.concat(d);return c;case "UnaryExpression":return k(a.argument,b);case "ObjectExpression":for(f=0;f<a.properties.length;f++)d=k(a.properties[f],b),c=c.concat(d);return c;
case "Property":return k(a.value,b);case "BinaryExpression":return d=k(a.left,b),c=c.concat(d),d=k(a.right,b),c=c.concat(d);case "LogicalExpression":return d=k(a.left,b),c=c.concat(d),d=k(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(y){throw y;}}function l(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}function m(a,b){b={globalScope:b.globalScope,
localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return h(a.body,b)}function n(a,b,c,d){var f={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};f.infinity={type:"any"};f.textformatting={type:"any"};f.pi={type:"any"};for(var g in b)if("simple"!==d||"simple"===d&&"a"===b[g].av)f[g]={type:"FormulaFunction",signature:{min:b[g].min,max:b[g].max}},"simple"!==d&&(void 0!==b[g].fmin&&(f[g].signature.min=b[g].fmin),void 0!==b[g].fmax&&(f[g].signature.max=
b[g].fmax));for(b=0;b<c.length;b++)g=c[b],f[g.name]={type:"FormulaFunction",signature:g};for(g in a)f[g]=a[g],f[g].type="any";return f}function p(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;
case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;
case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=
" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+=
"Cannot find member property. ";d+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;
case "ThisExpression":d+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";
break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+=
"Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(x){throw x;}return d}function q(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:p(a,b,c)}}function t(a,b,c,d,f){void 0===f&&(f=!0);b={globalScope:b.globalScope,localScope:{}};for(f=
0;f<a.params.length;f++)b.localScope[a.params[f].name.toLowerCase()]={type:"any"};r(a.body,b,c,d,!1)}function r(a,b,d,f,g){void 0===g&&(g=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var e=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){f.push(q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?f.push(q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===b.localScope?b.globalScope[a.id.name.toLowerCase()]=
{type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":r(a.init,b,d,f,g);break;case "FunctionDeclaration":!1===g&&f.push(q(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&f.push(q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));e=l("",a,b);t(a,b,d,f,g);null!==b.localScope&&f.push(q(a,"SYNTAX","GLOBALFUNCTIONSONLY"));e.isnative=!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]});break;case "VariableDeclaration":for(var h=
0;h<a.declarations.length;h++)r(a.declarations[h],b,d,f,g);break;case "IfStatement":null!==a.test&&(r(a.test,b,d,f,g),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||f.push(q(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&r(a.consequent,b,d,f,g);null!==a.alternate&&r(a.alternate,b,d,f,g);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(h=0;h<a.body.length;h++)r(a.body[h],b,d,f,g);break;case "ReturnStatement":null!==
a.argument&&r(a.argument,b,d,f,g);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&f.push(q(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&f.push(q(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&f.push(q(a,"SYNTAX","LEFTNOTVAR"));r(a.left,b,d,f,g);r(a.right,b,d,f,g);r(a.body,b,d,f,g);break;case "ForStatement":null!==a.init&&r(a.init,b,d,f,g);null!==a.test&&r(a.test,b,d,f,g);null!==a.body&&r(a.body,b,d,f,g);null!==a.update&&r(a.update,
b,d,f,g);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?f.push(q(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(e=!1,!1===d&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(e=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(e=!0),!1===e&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+
a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&r(a.argument,b,d,f,g));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&f.push(q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:f.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}r(a.right,b,d,f,g);e=!1;"Identifier"===a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&
(e=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(e=!0),!1===d&&!1===e&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&r(a.left,b,d,f,g);break;case "ExpressionStatement":r(a.expression,b,d,f,g);break;case "Identifier":var k=a.name.toLowerCase();if(null!==b.localScope&&void 0!==b.localScope[k])break;void 0===b.globalScope[k]&&!1===d&&f.push(q(a,"SYNTAX","VARIABLENOTFOUND"));
break;case "MemberExpression":r(a.object,b,d,f,g);!0===a.computed&&r(a.property,b,d,f,g);break;case "Literal":return"";case "ThisExpression":f.push(q(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&f.push(q(a,"SYNTAX","ONLYNODESSUPPORTED"));for(h=0;h<a.arguments.length;h++)r(a.arguments[h],b,d,f,g);var m=c(a.callee.name,a.arguments,b);!1===d&&-1===m&&f.push(q(a,"SYNTAX","NOTFOUND"));-2===m&&f.push(q(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":r(a.argument,
b,d,f,g);break;case "BinaryExpression":r(a.left,b,d,f,g);r(a.right,b,d,f,g);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:f.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:f.push(q(a,"SYNTAX","OPERATORNOTRECOGNISED"))}r(a.left,b,d,f,g);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||
f.push(q(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));r(a.right,b,d,f,g);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||f.push(q(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(q(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(h=0;h<a.elements.length;h++)r(a.elements[h],b,d,f,g);break;case "Array":f.push(q(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(h=0;h<a.properties.length;h++)r(a.properties[h],
b,d,f,g);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&f.push(q(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&r(a.key,b,d,f,g);r(a.value,b,d,f,g);break;default:f.push(q(a,"SYNTAX","UNRECOGNISED"))}}catch(I){f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function u(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?u(a.init,b):c;case "FunctionDeclaration":return u(a.body,
b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)d=u(a.declarations[f],b),c=c.concat(d);return c;case "ForInStatement":return d=u(a.left,b),c=c.concat(d),d=u(a.right,b),c=c.concat(d),d=u(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=u(a.init,b),c=c.concat(d)),null!==a.test&&(d=u(a.test,b),c=c.concat(d)),null!==a.body&&(d=u(a.body,b),c=c.concat(d)),null!==a.update&&(d=u(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=u(a.test,b),c=c.concat(d),null!==
a.consequent&&(d=u(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=u(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(f=0;f<a.body.length;f++)d=u(a.body[f],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?u(a.argument,b):c;case "UpdateExpression":return u(a.argument,b);case "AssignmentExpression":return c=u(a.left,b),c=c.concat(u(a.right,b));case "ExpressionStatement":return u(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;
case "Compound":return c;case "Identifier":return c;case "MemberExpression":return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(f=0;f<a.arguments.length;f++)d=u(a.arguments[f],b),c=c.concat(d);c.push(a.callee.name.toLowerCase());return c;case "ArrayExpression":for(f=0;f<a.elements.length;f++)d=u(a.elements[f],b),c=c.concat(d);return c;case "UnaryExpression":return u(a.argument,b);case "ObjectExpression":for(f=0;f<a.properties.length;f++)d=u(a.properties[f],b),
c=c.concat(d);return c;case "Property":return u(a.value,b);case "BinaryExpression":return d=u(a.left,b),c=c.concat(d),d=u(a.right,b),c=c.concat(d);case "LogicalExpression":return d=u(a.left,b),c=c.concat(d),d=u(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(y){throw y;}}Object.defineProperty(e,"__esModule",{value:!0});e.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",
max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",
max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",
max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},count:{min:"0",max:"*",av:"a"},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",
max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},constrain:{min:"3",max:"3",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},
variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},boolean:{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},typeof:{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},disjoint:{min:"2",max:"2",av:"a"},intersects:{min:"2",max:"2",av:"a"},touches:{min:"2",
max:"2",av:"a"},crosses:{min:"2",max:"2",av:"a"},within:{min:"2",max:"2",av:"a"},contains:{min:"2",max:"2",av:"a"},overlaps:{min:"2",max:"2",av:"a"},equals:{min:"2",max:"2",av:"a"},relate:{min:"3",max:"3",av:"a"},intersection:{min:"2",max:"2",av:"a"},union:{min:"1",max:"2",av:"a"},difference:{min:"2",max:"2",av:"a"},symmetricdifference:{min:"2",max:"2",av:"a"},clip:{min:"2",max:"2",av:"a"},cut:{min:"2",max:"2",av:"a"},area:{min:"1",max:"2",av:"a"},areageodetic:{min:"1",max:"2",av:"a"},length:{min:"1",
max:"2",av:"a"},lengthgeodetic:{min:"1",max:"2",av:"a"},distance:{min:"2",max:"3",av:"a"},densify:{min:"2",max:"3",av:"a"},densifygeodetic:{min:"2",max:"3",av:"a"},generalize:{min:"2",max:"4",av:"a"},buffer:{min:"2",max:"3",av:"a"},buffergeodetic:{min:"2",max:"3",av:"a"},offset:{min:"2",max:"6",av:"a"},rotate:{min:"2",max:"3",av:"a"},issimple:{min:"1",max:"1",av:"a"},simplify:{min:"1",max:"1",av:"a"},centroid:{min:"1",max:"1",av:"a"},multiparttosinglepart:{min:"1",max:"1",av:"a"},setgeometry:{min:"2",
max:"2",av:"a"}};e.addFunctionDeclaration=function(a,b){var c=e.functionDecls[a.name.toLowerCase()];void 0===c?e.functionDecls[a.name.toLowerCase()]={min:a.min,max:a.max,av:b}:"a"===c.av&&"f"===b?(void 0!==c.fmin&&delete c.fmin,void 0!==c.fmax&&delete c.fmax,c.fmin=a.min,c.fmax=a.max):"f"===c.av&&"a"===b?(void 0===c.fmin&&(c.fmin=c.min),void 0===c.fmax&&(c.fmax=c.max),c.min=a.min,c.max=a.max,c.av="a"):"f"===b?(c.fmin=a.min,c.fmax=a.max):"a"===b&&(c.min=a.min,c.max=a.max)};e.checkFunctionSignature=
b;e.findFunction=c;e.validateLanguageNode=d;e.testValidityOfExpression=h;e.referencesMemberImpl=g;e.referencesMember=function(a,b){return!0===g(a.body[0].body,b.toLowerCase())?!0:!1};e.referencesFunctionImpl=f;e.referencesFunction=function(a,b){return!0===f(a.body[0].body,b)?!0:!1};e.findFieldLiteralsImpl=k;e.findFieldLiterals=function(a,b){return k(a.body[0].body,b)};e.extractFunctionDeclaration=l;e.validateFunction=m;e.constructGlobalScope=n;e.validateScript=function(a,b,c){void 0===c&&(c="full");
b={globalScope:n(b.vars,e.functionDecls,b.customFunctions,c),localScope:null};return h(a.body[0].body,b)};e.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":d(a.body[0].body)};e.nodeErrorMessage=p;e.makeError=q;e.extractAllIssuesInFunction=t;e.extractAllIssues=r;e.checkScript=function(a,b,c,d){void 0===d&&(d="full");var f=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},
customFunctions:[]};b={globalScope:n(b.vars,e.functionDecls,b.customFunctions,d),localScope:null};try{r(a.body[0].body,b,c,f)}catch(y){}return f};e.findFunctionCallsImpl=u;e.findFunctionCalls=function(a,b){return u(a.body[0].body,b)}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(a,e,b,c){function d(a){return null===a?a:isNaN(a.getTime())?null:a}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(a,g){a.today=
function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,0,0);return new Date})};a.timestamp=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);
return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=function(a,d){return g(a,d,function(a,d,f){c.pcCheck(f,1,1);a=c.toDate(f[0]);return null===a?null:b.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getDate()})};
a.month=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getHours()})};a.second=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=
function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);a=c.toDate(d[0]);return null===a?NaN:a.getDay()})};a.date=function(a,e){return g(a,e,function(a,f,g){c.pcCheck(g,0,7);if(3===g.length)return d(new Date(c.toNumber(g[0]),c.toNumber(g[1]),c.toNumber(g[2]),
0,0,0,0));if(4===g.length)return d(new Date(c.toNumber(g[0]),c.toNumber(g[1]),c.toNumber(g[2]),c.toNumber(g[3]),0,0,0));if(5===g.length)return d(new Date(c.toNumber(g[0]),c.toNumber(g[1]),c.toNumber(g[2]),c.toNumber(g[3]),c.toNumber(g[4]),0,0));if(6===g.length)return d(new Date(c.toNumber(g[0]),c.toNumber(g[1]),c.toNumber(g[2]),c.toNumber(g[3]),c.toNumber(g[4]),c.toNumber(g[5]),0));if(7===g.length)return d(new Date(c.toNumber(g[0]),c.toNumber(g[1]),c.toNumber(g[2]),c.toNumber(g[3]),c.toNumber(g[4]),
c.toNumber(g[5]),c.toNumber(g[6])));if(2===g.length){a=c.toString(g[1]);if(""===a)return null;a=c.standardiseDateFormat(a);g=b(c.toString(g[0]),a,!0);return!0===g.isValid()?g.toDate():null}if(1===g.length){if(c.isString(g[0])&&""===g[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=c.toNumber(g[0]);return!1===isNaN(a)?d(new Date(a)):c.toDate(g[0])}if(0===g.length)return new Date})};a.datediff=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,2,3);a=c.toDateM(d[0]);b=c.toDateM(d[1]);
if(null===a||null===b)return NaN;switch(c.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,
"years",!0);default:return a.diff(b)}})};a.dateadd=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,2,3);a=c.toDateM(d[0]);if(null===a)return null;b="milliseconds";switch(c.toString(d[2]).toLowerCase()){case "days":case "day":case "d":b="days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;
case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(c.toNumber(d[1]),b);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n){Object.defineProperty(e,"__esModule",
{value:!0});e.registerFunctions=function(a,e){a.polygon=function(a,f){return e(a,f,function(f,g,e){d.pcCheck(e,1,1);f=null;if(e[0]instanceof b){if(f=d.fixSpatialReference(c.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===f instanceof l)throw Error("Illegal Parameter");}else f=e[0]instanceof l?n.fromJson(e[0].toJson()):d.fixSpatialReference(new l(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(f)})};a.polyline=function(a,f){return e(a,f,function(f,g,e){d.pcCheck(e,1,1);f=null;if(e[0]instanceof b){if(f=d.fixSpatialReference(c.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===f instanceof m)throw Error("Illegal Parameter");}else f=e[0]instanceof m?n.fromJson(e[0].toJson()):d.fixSpatialReference(new m(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(f)})};a.point=function(a,f){return e(a,f,function(f,g,e){d.pcCheck(e,1,1);f=null;if(e[0]instanceof b){if(f=d.fixSpatialReference(c.parseGeometryFromDictionary(e[0]),a.spatialReference),!1===f instanceof k)throw Error("Illegal Parameter");}else f=e[0]instanceof k?n.fromJson(e[0].toJson()):d.fixSpatialReference(new k(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(f)})};a.multipoint=function(a,g){return e(a,g,function(g,e,h){d.pcCheck(h,1,1);g=null;if(h[0]instanceof b){if(g=d.fixSpatialReference(c.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===g instanceof f)throw Error("Illegal Parameter");}else g=h[0]instanceof f?n.fromJson(h[0].toJson()):d.fixSpatialReference(new f(JSON.parse(h[0])),a.spatialReference);if(null!==g&&!1===g.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(g)})};a.extent=function(a,g){return e(a,g,function(g,e,p){p=d.autoCastFeatureToGeometry(p);d.pcCheck(p,1,1);g=null;p[0]instanceof b?g=d.fixSpatialReference(c.parseGeometryFromDictionary(p[0]),a.spatialReference):p[0]instanceof k?(g={xmin:p[0].x,ymin:p[0].y,xmax:p[0].x,ymax:p[0].y,spatialReference:p[0].spatialReference.toJson()},p[0].hasZ?(g.zmin=p[0].z,g.zmax=p[0].z):p[0].hasM&&(g.mmin=p[0].m,g.mmax=p[0].m),g=n.fromJson(g)):g=p[0]instanceof l?n.fromJson(p[0].getExtent().toJson()):
p[0]instanceof m?n.fromJson(p[0].getExtent().toJson()):p[0]instanceof f?n.fromJson(p[0].getExtent().toJson()):p[0]instanceof h?n.fromJson(p[0].toJson()):d.fixSpatialReference(new h(JSON.parse(p[0])),a.spatialReference);if(null!==g&&!1===g.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(g)})};a.geometry=function(a,f){return e(a,f,function(f,g,e){d.pcCheck(e,1,1);f=null;
f=e[0]instanceof c?d.fixSpatialReference(e[0].geometry(),a.spatialReference):e[0]instanceof b?d.fixSpatialReference(c.parseGeometryFromDictionary(e[0]),a.spatialReference):d.fixSpatialReference(n.fromJson(JSON.parse(e[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(f)})};a.setgeometry=function(a,b){return e(a,b,function(a,
b,f){d.pcCheck(f,2,2);if(f[0]instanceof c){if(!0===f[0].immutable)throw Error("Feature is Immutable");if(f[1]instanceof g||null===f[1])f[0]._geometry=f[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return d.voidOperation})};a.feature=function(a,f){return e(a,f,function(f,e,h){if(0===h.length)throw Error("Missing Parameters");f=null;if(1===h.length)if(d.isString(h[0]))f=c.fromJson(JSON.parse(h[0]));else if(h[0]instanceof c)f=c.createFromArcadeFeature(h[0]);else if(h[0]instanceof
g)f=c.createFromGraphicLikeObject(h[0],null,null);else if(h[0]instanceof b)f=h[0].hasField("geometry")?h[0].field("geometry"):null,e=h[0].hasField("attributes")?h[0].field("attributes"):null,null!==f&&f instanceof b&&(f=c.parseGeometryFromDictionary(f)),null!==e&&(e=c.parseAttributesFromDictionary(e)),f=c.createFromGraphicLikeObject(f,e,null);else throw Error("Illegal Argument");else{if(2===h.length){e=f=null;if(null!==h[0])if(h[0]instanceof g)f=h[0];else if(f instanceof b)f=c.parseGeometryFromDictionary(h[0]);
else throw Error("Illegal Argument");if(null!==h[1])if(h[1]instanceof b)e=c.parseAttributesFromDictionary(h[1]);else throw Error("Illegal Argument");}else{f=null;e={};if(null!==h[0])if(h[0]instanceof g)f=h[0];else if(f instanceof b)f=c.parseGeometryFromDictionary(h[0]);else throw Error("Illegal Argument");for(var k=1;k<h.length;k+=2){var m=d.toString(h[k]),l=h[k+1];if(null===l||void 0===l||d.isString(l)||isNaN(l)||d.isDate(l)||d.isNumber(l)||d.isBoolean(l)){if(d.isFunctionParameter(l)||!1===d.isSimpleType(l))throw Error("Illegal Argument");
e[m]=l===d.voidOperation?null:l}else throw Error("Illegal Argument");}}f=c.createFromGraphicLikeObject(f,e,null)}f._geometry=d.fixSpatialReference(f.geometry(),a.spatialReference);f.immutable=!1;return f})};a.dictionary=function(a,c){return e(a,c,function(a,c,f){if(0===f.length)throw Error("Missing Parameters");if(0!==f.length%2)throw Error("Missing Parameters");a={};for(c=0;c<f.length;c+=2){var g=d.toString(f[c]),e=f[c+1];if(null===e||void 0===e||d.isString(e)||isNaN(e)||d.isDate(e)||d.isNumber(e)||
d.isBoolean(e)||d.isArray(e)||d.isImmutableArray(e)){if(d.isFunctionParameter(e))throw Error("Illegal Argument");a[g]=e===d.voidOperation?null:e}else throw Error("Illegal Argument");}f=new b(a);f.immutable=!1;return f})};a.haskey=function(a,f){return e(a,f,function(a,f,g){d.pcCheck(g,2,2);a=d.toString(g[1]);if(g[0]instanceof c||g[0]instanceof b)return g[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,b){return e(a,b,function(a,b,c){d.pcCheck(c,2,2);a=c[1];if(d.isArray(c[0])){for(b=
0;b<c[0].length;b++)if(d.equalityTest(a,c[0][b]))return b;return-1}if(d.isImmutableArray(c[0])){var f=c[0].length();for(b=0;b<f;b++)if(d.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p){function q(a){return u?a.clone():p.fromJson(a.toJson())}function t(a){return 0===b.version.indexOf("4.")?m.fromExtent(a):new m({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(e,"__esModule",{value:!0});var r=null,u=0===b.version.indexOf("4.");e.setGeometryEngine=function(a){r=a};e.registerFunctions=function(a,b){function e(a){d.pcCheck(a,2,2);if(!(a[0]instanceof
f&&a[1]instanceof f||a[0]instanceof f&&null===a[1]||a[1]instanceof f&&null===a[0]||null===a[0]&&null===a[1]))throw Error("Illegal Argument");}a.disjoint=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!0:r.disjoint(c[0],c[1])})};a.intersects=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:r.intersects(c[0],c[1])})};a.touches=function(a,c){return b(a,c,function(a,b,c){c=
d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:r.touches(c[0],c[1])})};a.crosses=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:r.crosses(c[0],c[1])})};a.within=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:r.within(c[0],c[1])})};a.contains=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||
null===c[1]?!1:r.contains(c[0],c[1])})};a.overlaps=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?!1:r.overlaps(c[0],c[1])})};a.equals=function(a,c){return b(a,c,function(a,b,c){d.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof f&&c[1]instanceof f?r.equals(c[0],c[1]):d.isDate(c[0])&&d.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};a.relate=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,
3,3);if(c[0]instanceof f&&c[1]instanceof f)return r.relate(c[0],c[1],d.toString(c[2]));if(c[0]instanceof f&&null===c[1]||c[1]instanceof f&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};a.intersection=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]||null===c[1]?null:r.intersect(c[0],c[1])})};a.union=function(a,c){return b(a,c,function(b,c,g){g=d.autoCastFeatureToGeometry(g);b=[];if(0===g.length)throw Error("Function called with wrong number of Parameters");
if(1===g.length)if(d.isArray(g[0]))for(g=d.autoCastFeatureToGeometry(g[0]),c=0;c<g.length;c++){if(null!==g[c])if(g[c]instanceof f)b.push(g[c]);else throw Error("Illegal Argument");}else if(d.isImmutableArray(g[0]))for(g=d.autoCastFeatureToGeometry(g[0].toArray()),c=0;c<g.length;c++){if(null!==g[c])if(g[c]instanceof f)b.push(g[c]);else throw Error("Illegal Argument");}else{if(g[0]instanceof f)return d.fixSpatialReference(q(g[0]),a.spatialReference);if(null===g[0])return null;throw Error("Illegal Argument");
}else for(c=0;c<g.length;c++)if(null!==g[c])if(g[c]instanceof f)b.push(g[c]);else throw Error("Illegal Argument");return 0===b.length?null:r.union(b)})};a.difference=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null!==c[0]&&null===c[1]?q(c[0]):null===c[0]?null:r.difference(c[0],c[1])})};a.symmetricdifference=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);e(c);return null===c[0]&&null===c[1]?null:null===c[0]?q(c[1]):null===c[1]?
q(c[0]):r.symmetricDifference(c[0],c[1])})};a.clip=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,2,2);if(!(c[1]instanceof g)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof f))throw Error("Illegal Argument");return null===c[1]?null:r.clip(c[0],c[1])})};a.cut=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,2,2);if(!(c[1]instanceof n)&&null!==c[1])throw Error("Illegal Argument");
if(null===c[0])return[];if(!(c[0]instanceof f))throw Error("Illegal Argument");return null===c[1]?[q(c[0])]:r.cut(c[0],c[1])})};a.area=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);d.pcCheck(g,1,2);if(null===g[0])return 0;if(!(g[0]instanceof f))throw Error("Illegal Argument");return r.planarArea(g[0],c.convertSquareUnitsToCode(d.defaultUndefined(g[1],-1)))})};a.areageodetic=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);d.pcCheck(g,1,2);if(null===
g[0])return 0;if(!(g[0]instanceof f))throw Error("Illegal Argument");return r.geodesicArea(g[0],c.convertSquareUnitsToCode(d.defaultUndefined(g[1],-1)))})};a.length=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);d.pcCheck(g,1,2);if(null===g[0])return 0;if(!(g[0]instanceof f))throw Error("Illegal Argument");return r.planarLength(g[0],c.convertLinearUnitsToCode(d.defaultUndefined(g[1],-1)))})};a.lengthgeodetic=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);
d.pcCheck(g,1,2);if(null===g[0])return 0;if(!(g[0]instanceof f))throw Error("Illegal Argument");return r.geodesicLength(g[0],c.convertLinearUnitsToCode(d.defaultUndefined(g[1],-1)))})};a.distance=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);d.pcCheck(g,2,3);if(!(g[0]instanceof f))throw Error("Illegal Argument");if(!(g[1]instanceof f))throw Error("Illegal Argument");return r.distance(g[0],g[1],c.convertLinearUnitsToCode(d.defaultUndefined(g[2],-1)))})};a.densify=function(a,
e){return b(a,e,function(a,b,e){e=d.autoCastFeatureToGeometry(e);d.pcCheck(e,2,3);if(null===e[0])return null;if(!(e[0]instanceof f))throw Error("Illegal Argument");a=d.toNumber(e[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return e[0]instanceof m||e[0]instanceof n?r.densify(e[0],a,c.convertLinearUnitsToCode(d.defaultUndefined(e[2],-1))):e[0]instanceof g?r.densify(t(e[0]),a,c.convertLinearUnitsToCode(d.defaultUndefined(e[2],-1))):e[0]})};a.densifygeodetic=
function(a,e){return b(a,e,function(a,b,e){e=d.autoCastFeatureToGeometry(e);d.pcCheck(e,2,3);if(null===e[0])return null;if(!(e[0]instanceof f))throw Error("Illegal Argument");a=d.toNumber(e[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return e[0]instanceof m||e[0]instanceof n?r.geodesicDensify(e[0],a,c.convertLinearUnitsToCode(d.defaultUndefined(e[2],-1))):e[0]instanceof g?r.geodesicDensify(t(e[0]),a,c.convertLinearUnitsToCode(d.defaultUndefined(e[2],-1))):
e[0]})};a.generalize=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);d.pcCheck(g,2,4);if(null===g[0])return null;if(!(g[0]instanceof f))throw Error("Illegal Argument");a=d.toNumber(g[1]);if(isNaN(a))throw Error("Illegal Argument");return r.generalize(g[0],a,d.toBoolean(d.defaultUndefined(g[2],!0)),c.convertLinearUnitsToCode(d.defaultUndefined(g[3],-1)))})};a.buffer=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);d.pcCheck(g,2,3);if(null===g[0])return null;
if(!(g[0]instanceof f))throw Error("Illegal Argument");a=d.toNumber(g[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?q(g[0]):r.buffer(g[0],a,c.convertLinearUnitsToCode(d.defaultUndefined(g[2],-1)))})};a.buffergeodetic=function(a,g){return b(a,g,function(a,b,g){g=d.autoCastFeatureToGeometry(g);d.pcCheck(g,2,3);if(null===g[0])return null;if(!(g[0]instanceof f))throw Error("Illegal Argument");a=d.toNumber(g[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?q(g[0]):r.geodesicBuffer(g[0],
a,c.convertLinearUnitsToCode(d.defaultUndefined(g[2],-1)))})};a.offset=function(a,f){return b(a,f,function(a,b,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,2,6);if(null===f[0])return null;if(!(f[0]instanceof m||f[0]instanceof n))throw Error("Illegal Argument");a=d.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");b=d.toNumber(d.defaultUndefined(f[4],10));if(isNaN(b))throw Error("Illegal Argument");var g=d.toNumber(d.defaultUndefined(f[5],0));if(isNaN(g))throw Error("Illegal Argument");
return r.offset(f[0],a,c.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1)),d.toString(d.defaultUndefined(f[3],"round")).toLowerCase(),b,g)})};a.rotate=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,2,3);a=c[0];if(null===a)return null;if(!(a instanceof f))throw Error("Illegal Argument");a instanceof g&&(a=m.fromExtent(a));b=d.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");c=d.defaultUndefined(c[2],null);if(null===c)return r.rotate(a,b);if(c instanceof
l)return r.rotate(a,b,c);throw Error("Illegal Argument");})};a.centroid=function(a,c){return b(a,c,function(b,c,e){e=d.autoCastFeatureToGeometry(e);d.pcCheck(e,1,1);if(null===e[0])return null;if(!(e[0]instanceof f))throw Error("Illegal Argument");return e[0]instanceof l?d.fixSpatialReference(q(e[0]),a.spatialReference):e[0]instanceof m?u?e[0].centroid:e[0].getCentroid():e[0]instanceof n?h.centroidPolyline(e[0]):e[0]instanceof k?h.centroidMultiPoint(e[0]):e[0]instanceof g?u?e[0].center:e[0].getExtent().getCenter():
null})};a.multiparttosinglepart=function(a,c){return b(a,c,function(b,c,e){e=d.autoCastFeatureToGeometry(e);d.pcCheck(e,1,1);c=[];if(null===e[0])return null;if(!(e[0]instanceof f))throw Error("Illegal Argument");if(e[0]instanceof l||e[0]instanceof g)return[d.fixSpatialReference(q(e[0]),a.spatialReference)];b=r.simplify(e[0]);if(b instanceof m){c=[];var h=[];for(e=0;e<b.rings.length;e++)if(b.isClockwise(b.rings[e])){var t=p.fromJson({rings:[b.rings[e]],hasZ:u?b.hasZ:!1,hasM:u?b.hasM:!1,spatialReference:b.spatialReference.toJson()});
c.push(t)}else h.push({ring:b.rings[e],pt:b.getPoint(e,0)});for(b=0;b<h.length;b++)for(e=0;e<c.length;e++)if(c[e].contains(h[b].pt)){c[e].addRing(h[b].ring);break}return c}if(b instanceof n){c=[];for(e=0;e<b.paths.length;e++)h=p.fromJson({paths:[b.paths[e]],hasZ:u?b.hasZ:!1,hasM:u?b.hasM:!1,spatialReference:b.spatialReference.toJson()}),c.push(h);return c}if(e[0]instanceof k){b=d.fixSpatialReference(q(e[0]),a.spatialReference);for(e=0;e<b.points.length;e++)c.push(b.getPoint(e));return c}return null})};
a.issimple=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,1,1);if(null===c[0])return!0;if(c[0]instanceof f)return r.isSimple(c[0]);throw Error("Illegal Argument");})};a.simplify=function(a,c){return b(a,c,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,1,1);if(null===c[0])return null;if(c[0]instanceof f)return r.simplify(c[0]);throw Error("Illegal Argument");})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.errback=function(a){return function(b){a.reject(b)}};e.callback=function(a,b){return function(){try{a.apply(null,arguments)}catch(h){b.reject(h)}}};e.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
e.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new b({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};e.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
e.sameGeomType=function(a,b){return a===b||"point"===a&&"esriGeometryPoint"===b||"polyline"===a&&"esriGeometryPolyline"===b||"polygon"===a&&"esriGeometryPolygon"===b||"extent"===a&&"esriGeometryEnvelope"===b||"multipoint"===a&&"esriGeometryMultipoint"===b||"point"===b&&"esriGeometryPoint"===a||"polyline"===b&&"esriGeometryPolyline"===a||"polygon"===b&&"esriGeometryPolygon"===a||"extent"===b&&"esriGeometryEnvelope"===a||"multipoint"===b&&"esriGeometryMultipoint"===a?!0:!1}})},"esri/arcade/functions/centroid":function(){define(["require",
"exports","../../kernel","../../geometry/Point"],function(a,e,b,c){function d(a,b,c){var d={x:0,y:0};b&&(d.z=0);c&&(d.m=0);for(var f=0,g=a[0],e=0;e<a.length;e++){var k=a[e],t;a:if(k.length!==g.length)t=!1;else{for(t=0;t<k.length;t++)if(k[t]!==g[t]){t=!1;break a}t=!0}if(!1===t){t=h(g,k,b);var r=k,u=b,v=c,w={x:(g[0]+r[0])/2,y:(g[1]+r[1])/2};u&&(w.z=(g[2]+r[2])/2);u&&v?w.m=(g[3]+r[3])/2:v&&(w.m=(g[2]+r[2])/2);g=w;g.x*=t;g.y*=t;d.x+=g.x;d.y+=g.y;b&&(g.z*=t,d.z+=g.z);c&&(g.m*=t,d.m+=g.m);f+=t;g=k}}0<f?
(d.x/=f,d.y/=f,b&&(d.z/=f),c&&(d.m/=f)):(d.x=a[0][0],d.y=a[0][1],b&&(d.z=a[0][2]),c&&b?d.m=a[0][3]:c&&(d.m=a[0][2]));return d}function h(a,b,c){var d=b[0]-a[0];a=b[1]-a[1];return c?(b=b[2]-b[2],Math.sqrt(d*d+a*a+b*b)):Math.sqrt(d*d+a*a)}Object.defineProperty(e,"__esModule",{value:!0});b.version.indexOf("4.");e.centroidPolyline=function(a){for(var b={x:0,y:0,spatialReference:a.spatialReference.toJson()},g={x:0,y:0,spatialReference:a.spatialReference.toJson()},e=0,m=0,n=0;n<a.paths.length;n++)if(0!==
a.paths[n].length){var p;p=a.paths[n];var q=!0===a.hasZ;if(1>=p.length)p=0;else{for(var t=0,r=1;r<p.length;r++)t+=h(p[r-1],p[r],q);p=t}0===p?(q=d(a.paths[n],!0===a.hasZ,!0===a.hasM),b.x+=q.x,b.y+=q.y,!0===a.hasZ&&(b.z+=q.z),!0===a.hasM&&(b.m+=q.m),++e):(q=d(a.paths[n],!0===a.hasZ,!0===a.hasM),g.x+=q.x*p,g.y+=q.y*p,!0===a.hasZ&&(g.z+=q.z*p),!0===a.hasM&&(g.m+=q.m*p),m+=p)}return 0<m?(g.x/=m,g.y/=m,!0===a.hasZ&&(g.z/=m),!0===a.hasM&&(g.m/=m),new c(g)):0<e?(b.x/=e,b.y/=e,!0===a.hasZ&&(g.z/=e),!0===a.hasM&&
(b.m/=e),new c(b)):null};e.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var b=0,d=0,g=0,e=0,h=0;h<a.points.length;h++){var p=a.getPoint(h);!0===p.hasZ&&(g+=p.z);!0===p.hasM&&(e+=p.m);b+=p.x;d+=p.y;e+=p.m}b={x:b/a.points.length,y:d/a.points.length,spatialReference:null};b.spatialReference=a.spatialReference.toJson();!0===a.hasZ&&(b.z=g/a.points.length);!0===a.hasM&&(b.m=e/a.points.length);return new c(b)}})},"esri/arcade/functions/maths":function(){define(["require","exports",
"dojo/number","../languageUtils"],function(a,e,b,c){function d(a,b,c){if("undefined"===typeof c||0===+c)return Math[a](b);b=+b;c=+c;if(isNaN(b)||"number"!==typeof c||0!==c%1)return NaN;b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+c:c))}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(a,g){function f(a,b,d){a=c.toNumber(a);return isNaN(a)?a:isNaN(b)||isNaN(d)||b>d?NaN:a<b?b:a>d?d:a}a.number=function(a,
d){return g(a,d,function(a,d,f){c.pcCheck(f,1,2);a=f[0];return c.isNumber(a)?a:null===a?0:c.isDate(a)||c.isBoolean(a)?Number(a):c.isArray(a)?NaN:""===a||void 0===a?Number(a):c.isString(a)?void 0!==f[1]?(f=c.multiReplace(f[1],"\u2030",""),f=c.multiReplace(f,"\u00a4",""),b.parse(a,{pattern:f})):Number(a.trim()):Number(a)})};a.abs=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.abs(c.toNumber(d[0]))})};a.acos=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.acos(c.toNumber(d[0]))})};
a.asin=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.asin(c.toNumber(d[0]))})};a.atan=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.atan(c.toNumber(d[0]))})};a.atan2=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,2,2);return Math.atan2(c.toNumber(d[0]),c.toNumber(d[1]))})};a.ceil=function(a,b){return g(a,b,function(a,b,f){c.pcCheck(f,1,2);return 2===f.length?(a=c.toNumber(f[1]),isNaN(a)&&(a=0),d("ceil",c.toNumber(f[0]),-1*a)):Math.ceil(c.toNumber(f[0]))})};
a.round=function(a,b){return g(a,b,function(a,b,f){c.pcCheck(f,1,2);return 2===f.length?(a=c.toNumber(f[1]),isNaN(a)&&(a=0),d("round",c.toNumber(f[0]),-1*a)):Math.round(c.toNumber(f[0]))})};a.floor=function(a,b){return g(a,b,function(a,b,f){c.pcCheck(f,1,2);return 2===f.length?(a=c.toNumber(f[1]),isNaN(a)&&(a=0),d("floor",c.toNumber(f[0]),-1*a)):Math.floor(c.toNumber(f[0]))})};a.cos=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.cos(c.toNumber(d[0]))})};a.isnan=function(a,
b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};a.exp=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.exp(c.toNumber(d[0]))})};a.log=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.log(c.toNumber(d[0]))})};a.pow=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,2,2);return Math.pow(c.toNumber(d[0]),c.toNumber(d[1]))})};a.random=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,0,0);return Math.random()})};
a.sin=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.sin(c.toNumber(d[0]))})};a.sqrt=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.sqrt(c.toNumber(d[0]))})};a.tan=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return Math.tan(c.toNumber(d[0]))})};a.defaultvalue=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,
1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};a["boolean"]=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,1,1);return c.toBoolean(d[0])})};a.constrain=function(a,b){return g(a,b,function(a,b,d){c.pcCheck(d,3,3);a=c.toNumber(d[1]);b=c.toNumber(d[2]);if(c.isArray(d[0])){var g=[],e=0;for(d=d[0];e<d.length;e++)g.push(f(d[e],a,b));return g}if(c.isImmutableArray(d[0])){g=[];for(e=0;e<d[0].length();e++)g.push(f(d[0].get(e),a,b));return g}return f(d[0],a,b)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(a,e,b,c){function d(a,d,f,e){if(1===e.length){if(b.isArray(e[0]))return c.calculateStat(a,e[0],-1);if(b.isImmutableArray(e[0]))return c.calculateStat(a,e[0].toArray(),-1)}return c.calculateStat(a,e,-1)}Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(a,c){a.stdev=function(a,b){return c(a,b,function(a,b,c){return d("stdev",a,b,c)})};a.variance=function(a,b){return c(a,b,function(a,b,c){return d("variance",a,b,c)})};
a.average=function(a,b){return c(a,b,function(a,b,c){return d("mean",a,b,c)})};a.mean=function(a,b){return c(a,b,function(a,b,c){return d("mean",a,b,c)})};a.sum=function(a,b){return c(a,b,function(a,b,c){return d("sum",a,b,c)})};a.min=function(a,b){return c(a,b,function(a,b,c){return d("min",a,b,c)})};a.max=function(a,b){return c(a,b,function(a,b,c){return d("max",a,b,c)})};a.distinct=function(a,b){return c(a,b,function(a,b,c){return d("distinct",a,b,c)})};a.count=function(a,d){return c(a,d,function(a,
c,d){b.pcCheck(d,1,1);if(b.isArray(d[0])||b.isString(d[0]))return d[0].length;if(b.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(a,e,b){function c(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length}function d(a){for(var b=c(a),d=0,e=0;e<a.length;e++)d+=Math.pow(b-a[e],2);return d/a.length}Object.defineProperty(e,"__esModule",{value:!0});
e.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};e.calculateStat=function(a,g,f){void 0===f&&(f=1E3);switch(a.toLowerCase()){case "distinct":a:{a=f;f=[];for(var e={},h=[],m=0;m<g.length;m++){if(void 0!==g[m]&&null!==g[m]&&g[m]!==b.voidOperation){var n=
g[m];if(b.isNumber(n)||b.isString(n))void 0===e[n]&&(f.push(n),e[n]=1);else{for(var p=!1,q=0;q<h.length;q++)!0===b.equalityTest(h[q],n)&&(p=!0);!1===p&&(h.push(n),f.push(n))}}if(f.length>=a&&-1!==a){g=f;break a}}g=f}return g;case "avg":case "mean":return c(b.toNumberArray(g));case "min":return Math.min.apply(Math,b.toNumberArray(g));case "sum":g=b.toNumberArray(g);for(f=a=0;f<g.length;f++)a+=g[f];return a;case "max":return Math.max.apply(Math,b.toNumberArray(g));case "stdev":case "stddev":return Math.sqrt(d(b.toNumberArray(g)));
case "var":case "variance":return d(b.toNumberArray(g));case "count":return g.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Feature","../languageUtils"],function(a,e,b,c){Object.defineProperty(e,"__esModule",{value:!0});e.registerFunctions=function(a,e){a.trim=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,1,1);return c.toString(d[0]).trim()})};a.upper=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,1,1);return c.toString(d[0]).toUpperCase()})};
a.proper=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,1,2);a=1;2===d.length&&"firstword"===c.toString(d[1]).toLowerCase()&&(a=2);b=/\s/;d=c.toString(d[0]);for(var f="",g=!0,e=0;e<d.length;e++){var h=d[e];b.test(h)?1===a&&(g=!0):h.toUpperCase()!==h.toLowerCase()&&(g?(h=h.toUpperCase(),g=!1):h=h.toLowerCase());f+=h}return f})};a.lower=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,1,1);return c.toString(d[0]).toLowerCase()})};a.guid=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,
0,1);if(0<d.length)switch(c.toString(d[0]).toLowerCase()){case "digits":return c.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return c.generateUUID();case "digits-hyphen-parentheses":return"("+c.generateUUID()+")"}return"{"+c.generateUUID()+"}"})};a.console=function(a,b){return e(a,b,function(b,d,f){0!==f.length&&(1===f.length?a.console(c.toString(f[0])):a.console(c.toString(f)));return c.voidOperation})};a.mid=function(a,b){return e(a,b,function(a,
b,d){c.pcCheck(d,2,3);a=c.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===d.length)return c.toString(d[0]).substr(a);b=c.toNumber(d[2]);if(isNaN(b))return"";0>b&&(b=0);return c.toString(d[0]).substr(a,b)})};a.find=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,2,3);a=0;if(2<d.length){a=c.toNumber(c.defaultUndefined(d[2],0));if(isNaN(a))return-1;0>a&&(a=0)}return c.toString(d[1]).indexOf(c.toString(d[0]),a)})};a.left=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,2,2);a=c.toNumber(d[1]);
if(isNaN(a))return"";0>a&&(a=0);return c.toString(d[0]).substr(0,a)})};a.right=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,2,2);a=c.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);return c.toString(d[0]).substr(-1*a,a)})};a.split=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,2,4);a=c.toNumber(c.defaultUndefined(d[2],-1));b=c.toBoolean(c.defaultUndefined(d[3],!1));-1===a||null===a||!0===b?d=c.toString(d[0]).split(c.toString(d[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),d=c.toString(d[0]).split(c.toString(d[1]),
a));if(!1===b)return d;b=[];for(var f=0;f<d.length&&!(-1!==a&&b.length>=a);f++)""!==d[f]&&void 0!==d[f]&&b.push(d[f]);return b})};a.text=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,1,2);return c.toStringExplicit(d[0],d[1])})};a.concatenate=function(a,b){return e(a,b,function(a,b,d){a=[];if(1>d.length)return"";if(c.isArray(d[0])){b=c.defaultUndefined(d[2],"");for(var f=0;f<d[0].length;f++)a[f]=c.toStringExplicit(d[0][f],b);return 1<d.length?a.join(d[1]):a.join("")}if(c.isImmutableArray(d[0])){b=
c.defaultUndefined(d[2],"");for(f=0;f<d[0].length();f++)a[f]=c.toStringExplicit(d[0].get(f),b);return 1<d.length?a.join(d[1]):a.join("")}for(f=0;f<d.length;f++)a[f]=c.toStringExplicit(d[f]);return a.join("")})};a.reverse=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,1,1);if(c.isArray(d[0]))return a=d[0].slice(0),a.reverse(),a;if(c.isImmutableArray(d[0]))return a=d[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,b){return e(a,b,function(a,b,d){c.pcCheck(d,
3,4);a=c.toString(d[0]);b=c.toString(d[1]);var f=c.toString(d[2]);return(4===d.length?c.toBoolean(d[3]):1)?c.multiReplace(a,b,f):a.replace(b,f)})};a.domainname=function(a,d){return e(a,d,function(a,d,f){c.pcCheck(f,2,4);if(f[0]instanceof b)return f[0].domainValueLookup(c.toString(f[1]),f[2],void 0===f[3]?void 0:c.toNumber(f[3]));throw Error("Invalid Parameter");})};a.domaincode=function(a,d){return e(a,d,function(a,d,f){c.pcCheck(f,3,4);if(f[0]instanceof b)return f[0].domainCodeLookup(c.toString(f[1]),
f[2],void 0===f[3]?void 0:c.toNumber(f[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v,w,A,z,x){function y(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(D(a,b.arguments[d]));return c}function C(a,b,c){try{return c(a,b,y(a,b))}catch(ya){throw ya;}}function D(a,g){try{switch(g.type){case "EmptyStatement":return f.voidOperation;case "VariableDeclarator":var e=null===g.init?null:D(a,g.init);e===f.voidOperation&&(e=null);var h=g.id.name.toLowerCase();null!==a.localScope?a.localScope[h]={value:e,valueset:!0,node:g.init}:a.globalScope[h]=
{value:e,valueset:!0,node:g.init};return f.voidOperation;case "VariableDeclaration":for(var l=0;l<g.declarations.length;l++)D(a,g.declarations[l]);return f.voidOperation;case "BlockStatement":var m;a:{for(var n=f.voidOperation,l=0;l<g.body.length;l++)if(n=D(a,g.body[l]),n instanceof f.ReturnResult||n===f.breakResult||n===f.continueResult){m=n;break a}m=n}return m;case "FunctionDeclaration":var p=g.id.name.toLowerCase();a.globalScope[p]={valueset:!0,node:null,value:new d(g,a)};return f.voidOperation;
case "ReturnStatement":var q;if(null===g.argument)q=new f.ReturnResult(f.voidOperation);else{var u=D(a,g.argument);q=new f.ReturnResult(u)}return q;case "IfStatement":var t;if("AssignmentExpression"===g.test.type||"UpdateExpression"===g.test.type)throw Error(k.nodeErrorMessage(g.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var r=D(a,g.test);if(!0===r)t=D(a,g.consequent);else if(!1===r)t=null!==g.alternate?D(a,g.alternate):f.voidOperation;else throw Error(k.nodeErrorMessage(g,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return t;case "ExpressionStatement":var w;if("AssignmentExpression"===g.expression.type||"UpdateExpression"===g.expression.type)w=D(a,g.expression);else{var v=D(a,g.expression);w=v===f.voidOperation?f.voidOperation:new f.ImplicitResult(v)}return w;case "AssignmentExpression":var H;var y=D(a,g.right),l=null,x="";if("MemberExpression"===g.left.type){l=D(a,g.left.object);x=!0===g.left.computed?D(a,g.left.property):g.left.property.name;if(f.isArray(l))if(f.isNumber(x)){0>x&&(x=l.length+x);if(0>x||x>l.length)throw Error("Assignment outside of array bounds");
if(x===l.length&&"\x3d"!==g.operator)throw Error("Invalid Parameter");l[x]=I(y,g.operator,l[x],g)}else throw Error("Invalid Parameter");else if(l instanceof b){if(!1===f.isString(x))throw Error("Dictionary accessor must be a string");if(!0===l.hasField(x))l.setField(x,I(y,g.operator,l.field(x),g));else{if("\x3d"!==g.operator)throw Error("Invalid Parameter");l.setField(x,I(y,g.operator,null,g))}}else if(l instanceof c){if(!1===f.isString(x))throw Error("Feature accessor must be a string");if(!0===
l.hasField(x))l.setField(x,I(y,g.operator,l.field(x),g));else{if("\x3d"!==g.operator)throw Error("Invalid Parameter");l.setField(x,I(y,g.operator,null,g))}}else{if(f.isImmutableArray(l))throw Error("Array is Immutable");throw Error("Invalid Parameter");}H=f.voidOperation}else if(l=g.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[l])a.localScope[l]={value:I(y,g.operator,a.localScope[l].value,g),valueset:!0,node:g.right},H=f.voidOperation;else if(void 0!==a.globalScope[l])a.globalScope[l]=
{value:I(y,g.operator,a.globalScope[l].value,g),valueset:!0,node:g.right},H=f.voidOperation;else throw Error("Variable not recognised");return H;case "UpdateExpression":var A;var z,l=null,x="";if("MemberExpression"===g.argument.type){l=D(a,g.argument.object);x=!0===g.argument.computed?D(a,g.argument.property):g.argument.property.name;if(f.isArray(l))if(f.isNumber(x)){0>x&&(x=l.length+x);if(0>x||x>=l.length)throw Error("Assignment outside of array bounds");z=f.toNumber(l[x]);l[x]="++"===g.operator?
z+1:z-1}else throw Error("Invalid Parameter");else if(l instanceof b){if(!1===f.isString(x))throw Error("Dictionary accessor must be a string");if(!0===l.hasField(x))z=f.toNumber(l.field(x)),l.setField(x,"++"===g.operator?z+1:z-1);else throw Error("Invalid Parameter");}else if(l instanceof c){if(!1===f.isString(x))throw Error("Feature accessor must be a string");if(!0===l.hasField(x))z=f.toNumber(l.field(x)),l.setField(x,"++"===g.operator?z+1:z-1);else throw Error("Invalid Parameter");}else{if(f.isImmutableArray(l))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}A=!1===g.prefix?z:"++"===g.operator?z+1:z-1}else if(l=g.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[l])z=f.toNumber(a.localScope[l].value),a.localScope[l]={value:"++"===g.operator?z+1:z-1,valueset:!0,node:g},A=!1===g.prefix?z:"++"===g.operator?z+1:z-1;else if(void 0!==a.globalScope[l])z=f.toNumber(a.globalScope[l].value),a.globalScope[l]={value:"++"===g.operator?z+1:z-1,valueset:!0,node:g},A=!1===g.prefix?z:"++"===g.operator?z+1:z-1;else throw Error("Variable not recognised");
return A;case "BreakStatement":return f.breakResult;case "ContinueStatement":return f.continueResult;case "ForStatement":null!==g.init&&D(a,g.init);x={testResult:!0,lastAction:f.voidOperation};do b:{H=a;y=g;A=x;if(null!==y.test){A.testResult=D(H,y.test);if(!1===A.testResult)break b;if(!0!==A.testResult)throw Error(k.nodeErrorMessage(y,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}A.lastAction=D(H,y.body);A.lastAction===f.breakResult?A.testResult=!1:A.lastAction instanceof f.ReturnResult?A.testResult=
!1:null!==y.update&&D(H,y.update)}while(!0===x.testResult);l=x.lastAction instanceof f.ReturnResult?x.lastAction:f.voidOperation;return l;case "ForInStatement":return E(a,g);case "Identifier":return X(a,g);case "MemberExpression":return Q(a,g);case "Literal":return g.value;case "ThisExpression":throw Error(k.nodeErrorMessage(g,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return K(a,g);case "UnaryExpression":return U(a,g);case "BinaryExpression":return G(a,g);case "LogicalExpression":return R(a,
g);case "ConditionalExpression":throw Error(k.nodeErrorMessage(g,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(l=[],x=0;x<g.elements.length;x++){var P=D(a,g.elements[x]);if(f.isFunctionParameter(P))throw Error(k.nodeErrorMessage(g,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));P===f.voidOperation?l.push(null):l.push(P)}}catch(La){throw La;}return l;case "ObjectExpression":l={};for(x=0;x<g.properties.length;x++){var C=D(a,g.properties[x]);if(f.isFunctionParameter(C.value))throw Error("Illegal Argument");
if(!1===f.isString(C.key))throw Error("Illegal Argument");l[C.key.toString()]=C.value===f.voidOperation?null:C.value}var ea=new b(l);ea.immutable=!1;return ea;case "Property":return{key:"Identifier"===g.key.type?g.key.name:D(a,g.key),value:D(a,g.value)};case "Array":throw Error(k.nodeErrorMessage(g,"RUNTIME","NOTSUPPORTED"));default:throw Error(k.nodeErrorMessage(g,"RUNTIME","UNREOGNISED"));}}catch(La){throw La;}}function E(a,d){var g=D(a,d.right);"VariableDeclaration"===d.left.type&&D(a,d.left);
var e=null,h="VariableDeclaration"===d.left.type?d.left.declarations[0].id.name:d.left.name;null!==a.localScope&&void 0!==a.localScope[h]&&(e=a.localScope[h]);null===e&&void 0!==a.globalScope[h]&&(e=a.globalScope[h]);if(null===e)throw Error(k.nodeErrorMessage(d,"RUNTIME","VARIABLENOTDECLARED"));if(f.isArray(g)||f.isString(g)){for(var g=g.length,l=0;l<g&&(e.value=l,h=D(a,d.body),h!==f.breakResult);l++)if(h instanceof f.ReturnResult)return h;return f.voidOperation}if(f.isImmutableArray(g)){for(l=0;l<
g.length()&&(e.value=l,h=D(a,d.body),h!==f.breakResult);l++)if(h instanceof f.ReturnResult)return h;return f.voidOperation}if(g instanceof b||g instanceof c)for(g=g.keys(),l=0;l<g.length&&(e.value=g[l],h=D(a,d.body),h!==f.breakResult);l++){if(h instanceof f.ReturnResult)return h}else return f.voidOperation}function I(a,b,c,d){switch(b){case "\x3d":return a===f.voidOperation?null:a;case "/\x3d":return f.toNumber(c)/f.toNumber(a);case "*\x3d":return f.toNumber(c)*f.toNumber(a);case "-\x3d":return f.toNumber(c)-
f.toNumber(a);case "+\x3d":return f.isString(c)||f.isString(a)?f.toString(c)+f.toString(a):f.toNumber(c)+f.toNumber(a);case "%\x3d":return f.toNumber(c)%f.toNumber(a);default:throw Error(k.nodeErrorMessage(d,"RUNTIME","OPERATORNOTRECOGNISED"));}}function H(a,c,d,e){c=c.toLowerCase();switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&
(d=!1),d&&(fa++,c=a.spatialReference._arcadeCacheId=fa)),a=new b({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=f.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===
c&&(fa++,c=fa,f.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new h(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=f.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(fa++,c=fa,f.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",
c)),a=new h(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=f.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(fa++,c=fa,f.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new g(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function Q(a,d){try{var g=
D(a,d.object);if(null===g)throw Error(k.nodeErrorMessage(d,"RUNTIME","NOTFOUND"));if(!1===d.computed){if(g instanceof b||g instanceof c)return g.field(d.property.name);if(g instanceof u)return H(g,d.property.name,a,d);throw Error(k.nodeErrorMessage(d,"RUNTIME","INVALIDTYPE"));}var e=D(a,d.property);if(g instanceof b||g instanceof c){if(f.isString(e))return g.field(e)}else if(g instanceof u){if(f.isString(e))return H(g,e,a,d)}else if(f.isArray(g)){if(f.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>
e&&(e=g.length+e);if(e>=g.length||0>e)throw Error(k.nodeErrorMessage(d,"RUNTIME","OUTOFBOUNDS"));return g[e]}}else if(f.isString(g)){if(f.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=g.length+e);if(e>=g.length||0>e)throw Error(k.nodeErrorMessage(d,"RUNTIME","OUTOFBOUNDS"));return g[e]}}else if(f.isImmutableArray(g)&&f.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=g.length()+e);if(e>=g.length()||0>e)throw Error(k.nodeErrorMessage(d,"RUNTIME","OUTOFBOUNDS"));return g.get(e)}throw Error(k.nodeErrorMessage(d,
"RUNTIME","INVALIDTYPE"));}catch(Ca){throw Ca;}}function U(a,b){try{var c=D(a,b.argument);if(f.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*f.toNumber(c);if("+"===b.operator)return 1*f.toNumber(c);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*f.toNumber(c);if("+"===b.operator)return 1*f.toNumber(c);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ya){throw ya;}}function G(a,b){try{var c=
[D(a,b.left),D(a,b.right)],d=c[0],g=c[1];switch(b.operator){case "\x3d\x3d":return f.equalityTest(d,g);case "\x3d":return f.equalityTest(d,g);case "!\x3d":return!f.equalityTest(d,g);case "\x3c":return f.greaterThanLessThan(d,g,b.operator);case "\x3e":return f.greaterThanLessThan(d,g,b.operator);case "\x3c\x3d":return f.greaterThanLessThan(d,g,b.operator);case "\x3e\x3d":return f.greaterThanLessThan(d,g,b.operator);case "+":return f.isString(d)||f.isString(g)?f.toString(d)+f.toString(g):f.toNumber(d)+
f.toNumber(g);case "-":return f.toNumber(d)-f.toNumber(g);case "*":return f.toNumber(d)*f.toNumber(g);case "/":return f.toNumber(d)/f.toNumber(g);case "%":return f.toNumber(d)%f.toNumber(g);default:throw Error(k.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Na){throw Na;}}function R(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(k.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||
"UpdateExpression"===b.right.type)throw Error(k.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=D(a,b.left);if(f.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var d=D(a,b.right);if(f.isBoolean(d))return d;throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;d=D(a,b.right);if(f.isBoolean(d))return d;throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));
}else throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(Ca){throw Ca;}}function X(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d])return c=a.localScope[d],!0!==c.valueset&&(c.value=D(a,c.node),c.valueset=!0),c.value;if(void 0!==a.globalScope[d])return c=a.globalScope[d],!0!==c.valueset&&(c.value=D(a,c.node),c.valueset=!0),c.value;throw Error(k.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Ca){throw Ca;}}function K(a,b){try{if("Identifier"!==
b.callee.type)throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];if(c.value instanceof f.NativeFunction)return c.value.fn(a,b);if(c.value instanceof d)return S(a,b,c.value.definition);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof
f.NativeFunction)return c.value.fn(a,b);if(c.value instanceof d)return S(a,b,c.value.definition);throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(ya){throw ya;}}function W(a){return null==a?"":f.isArray(a)||f.isImmutableArray(a)?"Array":f.isDate(a)?"Date":f.isString(a)?"String":f.isBoolean(a)?"Boolean":f.isNumber(a)?"Number":a instanceof b?"Dictionary":a instanceof c?"Feature":a instanceof w?"Point":a instanceof A?"Polygon":
a instanceof z?"Polyline":a instanceof v?"Multipoint":a instanceof r?"Extent":f.isFunctionParameter(a)?"Function":a===f.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function F(a,b,c,d){try{var g=D(a,b.arguments[c]);if(f.equalityTest(g,d))return D(a,b.arguments[c+1]);var e=b.arguments.length-c;return 1===e?D(a,b.arguments[c]):2===e?null:3===e?D(a,b.arguments[c+2]):F(a,b,c+2,d)}catch(Xa){throw Xa;}}function ea(a,b,c,d){try{if(!0===d)return D(a,b.arguments[c+1]);if(3===
b.arguments.length-c)return D(a,b.arguments[c+2]);var g=D(a,b.arguments[c+2]);if(!1===f.isBoolean(g))throw Error("WHEN needs boolean test conditions");return ea(a,b,c+2,g)}catch(Na){throw Na;}}function P(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var f=P(a.slice(0,d),b);a=P(a.slice(d,c),b);for(c=[];0<f.length||0<a.length;)0<f.length&&0<a.length?(d=b(f[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(f[0]),f=f.slice(1)):(c.push(a[0]),a=a.slice(1))):0<f.length?(c.push(f[0]),
f=f.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function L(a,b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var g=0;g<c.length;g++)b.localScope[a.params[g].name.toLowerCase()]={value:c[g],valueset:!0,node:null};var e=D(b,d);if(e instanceof f.ReturnResult)return e.value;if(e===f.breakResult)throw Error("Cannot Break from a Function");if(e===f.continueResult)throw Error("Cannot Continue from a Function");return e instanceof
f.ImplicitResult?e.value:e}catch(Xa){throw Xa;}}function S(a,b,c){return C(a,b,function(b,d,f){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return L(c,b,f)})}function ra(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,
spatialReference:a.context.spatialReference,console:a.context.console,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return L(a.definition,b,arguments)}}function la(a){}Object.defineProperty(e,"__esModule",{value:!0});var fa=0,ba={};l.registerFunctions(ba,C);t.registerFunctions(ba,C);p.registerFunctions(ba,C);m.registerFunctions(ba,C);q.registerFunctions(ba,C);n.registerFunctions(ba,C);ba["typeof"]=
function(a,b){return C(a,b,function(a,b,c){f.pcCheck(c,1,1);a=W(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};ba.iif=function(a,b){try{f.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=D(a,b.arguments[0]);if(!1===f.isBoolean(c))throw Error("IF Function must have a boolean test condition");return!0===c?D(a,b.arguments[1]):D(a,b.arguments[2])}catch(ya){throw ya;}};ba.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return D(a,
b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=D(a,b.arguments[0]);return F(a,b,1,c)}catch(ya){throw ya;}};ba.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=D(a,b.arguments[0]);if(!1===f.isBoolean(c))throw Error("WHEN needs boolean test conditions");return ea(a,b,0,c)}catch(ya){throw ya;}};ba.top=function(a,b){return C(a,b,function(a,
b,c){f.pcCheck(c,2,2);if(f.isArray(c[0]))return f.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,f.toNumber(c[1]));if(f.isImmutableArray(c[0]))return f.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,f.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};ba.first=function(a,b){return C(a,b,function(a,b,c){f.pcCheck(c,1,1);return f.isArray(c[0])?0===c[0].length?null:c[0][0]:f.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};ba.sort=function(a,b){return C(a,
b,function(a,b,c){f.pcCheck(c,1,2);a=c[0];f.isImmutableArray(a)&&(a=a.toArray());if(!1===f.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===f.isFunctionParameter(c[1]))throw Error("Illegal Argument");var d=ra(c[1]);a=P(a,function(a,b){return d(a,b)})}else{if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var g=W(a[b]);""!==g&&(c[g]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);
b=0;var g="",e;for(e in c)b++,g=e;a=1<b||"String"===g?P(a,function(a,b){if(null===a||void 0===a||a===f.voidOperation)return null===b||void 0===b||b===f.voidOperation?0:1;if(null===b||void 0===b||b===f.voidOperation)return-1;a=f.toString(a);b=f.toString(b);return a<b?-1:a===b?0:1}):"Number"===g?P(a,function(a,b){return a-b}):"Boolean"===g?P(a,function(a,b){return a===b?0:b?-1:1}):"Date"===g?P(a,function(a,b){return b-a}):a.slice(0)}return a})};for(var Ea in ba)ba[Ea]={value:new f.NativeFunction(ba[Ea]),
valueset:!0,node:null};var ua=function(){};ua.prototype=ba;ua.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ua.prototype.pi={value:Math.PI,valueset:!0,node:null};e.functionHelper={fixSpatialReference:f.fixSpatialReference,parseArguments:y,standardFunction:C};e.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:C,evaluateIdentifier:X,arcadeCustomFunctionHandler:ra},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var d in b.functions)ba[d]=
{value:new f.NativeFunction(b.functions[d]),valueset:!0,node:null},ua.prototype[d]=ba[d];for(c=0;c<b.signatures.length;c++)k.addFunctionDeclaration(b.signatures[c],"f")};e.executeScript=function(a,g,e){e||(e=new x(102100));var h=g.vars,k=g.customfunctions,l=new ua;h||(h={});k||(k={});var m=new b({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});m.immutable=!1;l.textformatting={value:m,valueset:!0,node:null};for(var n in k)l[n]={value:new f.NativeFunction(k[n]),
native:!0,valueset:!0,node:null};for(n in h)l[n]=h[n]&&"esri.Graphic"===h[n].declaredClass?{value:c.createFromGraphic(h[n]),valueset:!0,node:null}:{value:h[n],valueset:!0,node:null};a=D({spatialReference:e,globalScope:l,localScope:null,console:g.console?g.console:la,depthCounter:1,applicationCache:void 0===g.applicationCache?null:g.applicationCache},a.body[0].body);a instanceof f.ReturnResult&&(a=a.value);a instanceof f.ImplicitResult&&(a=a.value);a===f.voidOperation&&(a=null);if(a===f.breakResult)throw Error("Cannot return BREAK");
if(a===f.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof d)throw Error("Cannot return FUNCTION");if(a instanceof f.NativeFunction)throw Error("Cannot return FUNCTION");return a};e.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return k.findFieldLiterals(a,b)};e.validateScript=function(a,b){return k.validateScript(a,b,"simple")};e.referencesMember=function(a,b){return k.referencesMember(a,b)};e.referencesFunction=function(a,b){return k.referencesFunction(a,b)};e.findFunctionCalls=
function(a){return k.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(a,e,b,c){Object.defineProperty(e,"__esModule",{value:!0});e.parseScript=function(a){a=c.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");
var d=b.validateLanguage(a);if(""!==d)throw Error(d);return a};e.scriptCheck=function(a,e,g,f){var d=[];try{var h=c.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),m=h.errors;if(0<m.length)for(var n=0;n<m.length;n++)d.push({line:m[n].lineNumber,character:m[n].column,reason:m[n].description});var p=b.checkScript(h,e,g,f);for(e=0;e<p.length;e++)d.push(p[e])}catch(q){try{"Unexpected token }"===q.description?(q.index=("function _() { "+a+"\n}").length-1,d.push({line:q.lineNumber,character:q.column,
reason:"Unexpected end of script"})):d.push({line:q.lineNumber,character:q.column,reason:q.description})}catch(t){}}return d};e.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return b.findFieldLiterals(a,c)};e.validateScript=function(a,c,g){void 0===g&&(g="full");return b.validateScript(a,c,g)};e.referencesMember=function(a,c){return b.referencesMember(a,c)};e.referencesFunction=function(a,c){return b.referencesFunction(a,c)}})},"esri/arcade/lib/esprima":function(){(function(a,e){"function"===
typeof define&&define.amd?define(["exports"],e):"undefined"!==typeof exports?e(exports):e(a.esprima={})})(this,function(a){function e(a,b){if(!a)throw Error("ASSERT: "+b);}function b(a){return 48<=a&&57>=a}function c(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function d(a){return 0<="01234567".indexOf(a)}function h(a){return 10===a||13===a||8232===a||8233===a}function g(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&ia.NonAsciiIdentifierStart.test(String.fromCharCode(a))}
function f(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&ia.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function k(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function l(a,b,c,d,f){e("number"===typeof c,"Comment must have valid position");V.lastCommentStart>=
c||(V.lastCommentStart=c,a={type:a,value:b},J.range&&(a.range=[c,d]),J.loc&&(a.loc=f),J.comments.push(a),J.attachComment&&(J.leadingComments.push(a),J.trailingComments.push(a)))}function m(a){var b,c,d;b=B-a;for(c={start:{line:Z,column:B-aa-a}};B<ga;)if(d=N.charCodeAt(B),++B,h(d)){J.comments&&(a=N.slice(b+a,B-1),c.end={line:Z,column:B-aa-1},l("Line",a,b,B-1,c));13===d&&10===N.charCodeAt(B)&&++B;++Z;aa=B;return}J.comments&&(a=N.slice(b+a,B),c.end={line:Z,column:B-aa},l("Line",a,b,B,c))}function n(){var a,
b;for(b=0===B;B<ga;)if(a=N.charCodeAt(B),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++B;else if(h(a))++B,13===a&&10===N.charCodeAt(B)&&++B,++Z,aa=B,b=!0;else if(47===a)if(a=N.charCodeAt(B+1),47===a)++B,++B,m(2),b=!0;else if(42===a){++B;++B;a:{var c=a=void 0,d=void 0,d=void 0;J.comments&&(a=B-2,c={start:{line:Z,column:B-aa-2}});for(;B<ga;)if(d=N.charCodeAt(B),h(d))13===d&&10===N.charCodeAt(B+
1)&&++B,++Z,++B,aa=B,B>=ga&&K();else{if(42===d&&47===N.charCodeAt(B+1)){++B;++B;J.comments&&(d=N.slice(a+2,B-2),c.end={line:Z,column:B-aa},l("Block",d,a,B,c));break a}++B}K()}}else break;else if(b&&45===a)if(45===N.charCodeAt(B+1)&&62===N.charCodeAt(B+2))B+=3,m(3);else break;else if(60===a)if("!--"===N.slice(B+1,B+4))++B,++B,++B,++B,m(4);else break;else break}function p(a){var b,d,f=0;b="u"===a?4:2;for(a=0;a<b;++a)if(B<ga&&c(N[B]))d=N[B++],f=16*f+"0123456789abcdef".indexOf(d.toLowerCase());else return"";
return String.fromCharCode(f)}function q(){var a,b;a=N.charCodeAt(B++);b=String.fromCharCode(a);92===a&&(117!==N.charCodeAt(B)&&K(),++B,(a=p("u"))&&"\\"!==a&&g(a.charCodeAt(0))||K(),b=a);for(;B<ga;){a=N.charCodeAt(B);if(!f(a))break;++B;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==N.charCodeAt(B)&&K(),++B,(a=p("u"))&&"\\"!==a&&f(a.charCodeAt(0))||K(),b+=a)}return b}function t(){var a=B,b=N.charCodeAt(B),c,d=N[B];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++B,
J.tokenize&&(40===b?J.openParenToken=J.tokens.length:123===b&&(J.openCurlyToken=J.tokens.length)),{type:M.Punctuator,value:String.fromCharCode(b),lineNumber:Z,lineStart:aa,start:a,end:B};default:if(c=N.charCodeAt(B+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return B+=2,{type:M.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:Z,lineStart:aa,start:a,end:B};case 33:case 61:return B+=2,61===N.charCodeAt(B)&&++B,{type:M.Punctuator,
value:N.slice(a,B),lineNumber:Z,lineStart:aa,start:a,end:B}}}b=N.substr(B,4);if("\x3e\x3e\x3e\x3d"===b)return B+=4,{type:M.Punctuator,value:b,lineNumber:Z,lineStart:aa,start:a,end:B};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return B+=3,{type:M.Punctuator,value:b,lineNumber:Z,lineStart:aa,start:a,end:B};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return B+=2,{type:M.Punctuator,value:b,lineNumber:Z,lineStart:aa,start:a,end:B};if(0<=
"\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++B,{type:M.Punctuator,value:d,lineNumber:Z,lineStart:aa,start:a,end:B};K()}function r(){var a,f,h;h=N[B];e(b(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");f=B;a="";if("."!==h){a=N[B++];h=N[B];if("0"===a){if("x"===h||"X"===h){++B;for(a="";B<ga&&c(N[B]);)a+=N[B++];0===a.length&&K();g(N.charCodeAt(B))&&K();return{type:M.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:Z,lineStart:aa,start:f,end:B}}if("b"===
h||"B"===h){++B;for(h="";B<ga;){a=N[B];if("0"!==a&&"1"!==a)break;h+=N[B++]}0===h.length&&K();B<ga&&(a=N.charCodeAt(B),(g(a)||b(a))&&K());return{type:M.NumericLiteral,value:parseInt(h,2),lineNumber:Z,lineStart:aa,start:f,end:B}}if("o"===h||"O"===h){d(h)?(h=!0,a="0"+N[B++]):(h=!1,++B,a="");for(;B<ga&&d(N[B]);)a+=N[B++];h||0!==a.length||K();(g(N.charCodeAt(B))||b(N.charCodeAt(B)))&&K();return{type:M.NumericLiteral,value:parseInt(a,8),octal:h,lineNumber:Z,lineStart:aa,start:f,end:B}}}for(;b(N.charCodeAt(B));)a+=
N[B++];h=N[B]}if("."===h){for(a+=N[B++];b(N.charCodeAt(B));)a+=N[B++];h=N[B]}if("e"===h||"E"===h){a+=N[B++];h=N[B];if("+"===h||"-"===h)a+=N[B++];if(b(N.charCodeAt(B)))for(;b(N.charCodeAt(B));)a+=N[B++];else K()}g(N.charCodeAt(B))&&K();return{type:M.NumericLiteral,value:parseFloat(a),lineNumber:Z,lineStart:aa,start:f,end:B}}function u(){T=null;n();G("Regular Expression language structures not supported")}function v(){n();u()}function w(){var a;a=J.tokens[J.tokens.length-1];if(!a)return v();if("Punctuator"===
a.type){if("]"===a.value)return t();if(")"===a.value)return a=J.tokens[J.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?t():v();if("}"===a.value){if(J.tokens[J.openCurlyToken-3]&&"Keyword"===J.tokens[J.openCurlyToken-3].type){if(a=J.tokens[J.openCurlyToken-4],!a)return t()}else if(J.tokens[J.openCurlyToken-4]&&"Keyword"===J.tokens[J.openCurlyToken-4].type){if(a=J.tokens[J.openCurlyToken-
5],!a)return v()}else return t();if(0<=ma.indexOf(a.value))return t()}return v()}return"Keyword"===a.type&&"this"!==a.value?v():t()}function A(){var a;n();if(B>=ga)return{type:M.EOF,lineNumber:Z,lineStart:aa,start:B,end:B};a=N.charCodeAt(B);if(g(a)){var l;a=B;if(92===N.charCodeAt(B))l=q();else a:{var m;for(l=B++;B<ga;){m=N.charCodeAt(B);if(92===m){B=l;l=q();break a}if(f(m))++B;else break}l=N.slice(l,B)}return{type:1===l.length?M.Identifier:k(l)?M.Keyword:"null"===l.toLowerCase()?M.NullLiteral:"true"===
l.toLowerCase()||"false"===l.toLowerCase()?M.BooleanLiteral:M.Identifier,value:l,lineNumber:Z,lineStart:aa,start:a,end:B}}if(40===a||41===a||59===a)return t();if(39===a||34===a){var u="",v,H,x;m=!1;var y,Q;y=Z;Q=aa;a=N[B];e("'"===a||'"'===a,"String literal must starts with a quote");l=B;for(++B;B<ga;)if(v=N[B++],v===a){a="";break}else if("\\"===v)if((v=N[B++])&&h(v.charCodeAt(0)))++Z,"\r"===v&&"\n"===N[B]&&++B,aa=B;else switch(v){case "u":case "x":if("{"===N[B]){++B;H=v=void 0;v=N[B];H=0;for("}"===
v&&K();B<ga;){v=N[B++];if(!c(v))break;H=16*H+"0123456789abcdef".indexOf(v.toLowerCase())}(1114111<H||"}"!==v)&&K();v=65535>=H?String.fromCharCode(H):String.fromCharCode((H-65536>>10)+55296,(H-65536&1023)+56320);u+=v}else x=B,(H=p(v))?u+=H:(B=x,u+=v);break;case "n":u+="\n";break;case "r":u+="\r";break;case "t":u+="\t";break;case "b":u+="\b";break;case "f":u+="\f";break;case "v":u+="\x0B";break;default:d(v)?(H="01234567".indexOf(v),0!==H&&(m=!0),B<ga&&d(N[B])&&(m=!0,H=8*H+"01234567".indexOf(N[B++]),
0<="0123".indexOf(v)&&B<ga&&d(N[B])&&(H=8*H+"01234567".indexOf(N[B++]))),u+=String.fromCharCode(H)):u+=v}else if(h(v.charCodeAt(0)))break;else u+=v;""!==a&&K();return{type:M.StringLiteral,value:u,octal:m,startLineNumber:y,startLineStart:Q,lineNumber:Z,lineStart:aa,start:l,end:B}}return 46===a?b(N.charCodeAt(B+1))?r():t():b(a)?r():J.tokenize&&47===a?w():t()}function z(){var a,b,c;n();a={start:{line:Z,column:B-aa}};b=A();a.end={line:Z,column:B-aa};b.type!==M.EOF&&(c=N.slice(b.start,b.end),a={type:za[b.type],
value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),J.tokens.push(a));return b}function x(){var a;a=T;B=a.end;Z=a.lineNumber;aa=a.lineStart;T="undefined"!==typeof J.tokens?z():A();B=a.end;Z=a.lineNumber;aa=a.lineStart;return a}function y(){var a,b,c;a=B;b=Z;c=aa;T="undefined"!==typeof J.tokens?z():A();B=a;Z=b;aa=c}function C(){this.line=Z;this.column=B-aa}function D(){this.start=new C;this.end=null}function E(a){this.start=a.type===M.StringLiteral?
{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function I(){B=T.start;T.type===M.StringLiteral?(Z=T.startLineNumber,aa=T.startLineStart):(Z=T.lineNumber,aa=T.lineStart);J.range&&(this.range=[B,0]);J.loc&&(this.loc=new D)}function H(a){J.range&&(this.range=[a.start,0]);J.loc&&(this.loc=new E(a))}function Q(){var a,b,c,d;a=B;b=Z;c=aa;n();d=Z!==b;B=a;Z=b;aa=c;return d}function U(a,b,c){var d=Error("Line "+a+": "+c);d.index=b;d.lineNumber=
a;d.column=b-aa+1;d.description=c;return d}function G(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){e(c<b.length,"Message reference must be in range");return b[c]});throw U(Z,B,c);}function R(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){e(c<b.length,"Message reference must be in range");return b[c]});c=U(Z,B,c);if(J.errors)J.errors.push(c);else throw c;}function X(a,b){var c=ca.UnexpectedToken;a&&(c=b?b:a.type===
M.EOF?ca.UnexpectedEOS:a.type===M.Identifier?ca.UnexpectedIdentifier:a.type===M.NumericLiteral?ca.UnexpectedNumber:a.type===M.StringLiteral?ca.UnexpectedString:ca.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?U(a.lineNumber,a.start,c):U(Z,B,c)}function K(a,b){throw X(a,b);}function W(a,b){a=X(a,b);if(J.errors)J.errors.push(a);else throw a;}function F(a){var b=x();b.type===M.Punctuator&&b.value===a||K(b)}function ea(){var a;J.errors?(a=T,a.type===M.Punctuator&&
","===a.value?x():a.type===M.Punctuator&&";"===a.value?(x(),W(a)):W(a,ca.UnexpectedToken)):F(",")}function P(a){var b=x();b.type===M.Keyword&&b.value.toLowerCase()===a.toLowerCase()||K(b)}function L(a){return T.type===M.Punctuator&&T.value===a}function S(a){return T.type===M.Keyword&&T.value.toLowerCase()===a.toLowerCase()}function ra(){var a;59===N.charCodeAt(B)||L(";")?x():(a=Z,n(),Z===a&&(T.type===M.EOF||L("}")||K(T)))}function la(a){return a.type===Y.Identifier||a.type===Y.MemberExpression}function fa(a,
b){var c,d=new I;b=ha;c=Ka();ha=b;return d.finishFunctionExpression(null,a,[],c)}function ba(){var a,b;a=ha;ha=!0;b=Ua();b=fa(b.params);ha=a;return b}function Ea(){var a,b=new I;a=x();return a.type===M.StringLiteral||a.type===M.NumericLiteral?(ha&&a.octal&&W(a,ca.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ua(){var a,b,c,d=new I;a=T;if(a.type===M.Identifier)return b=Ea(),"get"!==a.value||L(":")||L("(")?"set"!==a.value||L(":")||L("(")?L(":")?(x(),a=pa(),d.finishProperty("init",
b,a,!1,!1)):L("(")?(a=ba(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=Ea(),F("("),a=T,a.type!==M.Identifier?(F(")"),W(a),a=fa([])):(c=[Aa()],F(")"),a=fa(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=Ea(),F("("),F(")"),a=fa([]),d.finishProperty("get",b,a,!1,!1));if(a.type===M.EOF||a.type===M.Punctuator)K(a);else{b=Ea();if(L(":"))return x(),a=pa(),d.finishProperty("init",b,a,!1,!1);if(L("("))return a=ba(),d.finishProperty("init",b,a,!0,!1);K(x())}}function Sa(a){var b=[],
c,d,f={},g=String,e=new I;for(!0!==a&&F("{");!L("}");)a=ua(),c=a.key.type===Y.Identifier?a.key.name:g(a.key.value),d="init"===a.kind?Ra.Data:"get"===a.kind?Ra.Get:Ra.Set,c="$"+c,Object.prototype.hasOwnProperty.call(f,c)?(f[c]===Ra.Data?ha&&d===Ra.Data?R(ca.StrictDuplicateProperty):d!==Ra.Data&&R(ca.AccessorDataProperty):d===Ra.Data?R(ca.AccessorDataProperty):f[c]&d&&R(ca.AccessorGetSet),f[c]|=d):f[c]=d,b.push(a),L("}")||ea();F("}");return e.finishObjectExpression(b)}function bb(){var a,b,c,d;if(L("("))return F("("),
L(")")?(x(),b=Ma.ArrowParameterPlaceHolder):(++V.parenthesisCount,b=oa(),F(")")),b;if(L("[")){b=[];var f=new I;for(F("[");!L("]");)L(",")?(x(),b.push(null)):(b.push(pa()),L("]")||F(","));x();return f.finishArrayExpression(b)}if(L("{"))return Sa();a=T.type;d=new I;if(a===M.Identifier)c=d.finishIdentifier(x().value);else if(a===M.StringLiteral||a===M.NumericLiteral)ha&&T.octal&&W(T,ca.StrictOctalLiteral),c=d.finishLiteral(x());else if(a===M.Keyword){if(S("function")){d=null;var g;c=[];var e=[],h,k=
new I;P("function");L("(")||(d=Aa());g=Ua(b);c=g.params;e=g.defaults;a=g.stricted;b=g.firstRestricted;g.message&&(f=g.message);h=ha;g=Ka();ha&&b&&K(b,f);ha&&a&&W(a,f);ha=h;return k.finishFunctionExpression(d,c,e,g)}S("this")?(x(),c=d.finishThisExpression()):K(x())}else a===M.BooleanLiteral?(b=x(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===M.NullLiteral?(b=x(),b.value=null,c=d.finishLiteral(b)):L("/")||L("/\x3d")?(c="undefined"!==typeof J.tokens?d.finishLiteral(v()):d.finishLiteral(u()),
y()):K(x());return c}function xa(){var a=[];F("(");if(!L(")"))for(;B<ga;){a.push(pa());if(L(")"))break;ea()}F(")");return a}function ya(){F(".");var a,b=new I;a=x();a.type===M.Identifier||a.type===M.Keyword||a.type===M.BooleanLiteral||a.type===M.NullLiteral||K(a);return b.finishIdentifier(a.value)}function Ca(){var a;F("[");a=oa();F("]");return a}function Na(){var a,b,c=new I;P("new");var d;e(V.allowIn,"callee of new expression always allow in keyword.");d=T;for(a=S("new")?Na():bb();;)if(L("["))b=
Ca(),a=(new H(d)).finishMemberExpression("[",a,b);else if(L("."))b=ya(),a=(new H(d)).finishMemberExpression(".",a,b);else break;b=L("(")?xa():[];return c.finishNewExpression(a,b)}function Xa(){var a,b,c=T,d,f=V.allowIn;b=T;V.allowIn=!0;for(a=S("new")?Na():bb();;)if(L("."))d=ya(),a=(new H(b)).finishMemberExpression(".",a,d);else if(L("("))d=xa(),a=(new H(b)).finishCallExpression(a,d);else if(L("["))d=Ca(),a=(new H(b)).finishMemberExpression("[",a,d);else break;V.allowIn=f;T.type!==M.Punctuator||!L("++")&&
!L("--")||Q()||(la(a)||R(ca.InvalidLHSInAssignment),b=x(),a=(new H(c)).finishPostfixExpression(b.value,a));return a}function na(){var a,b,c;T.type!==M.Punctuator&&T.type!==M.Keyword?b=Xa():L("++")||L("--")?(c=T,a=x(),b=na(),la(b)||R(ca.InvalidLHSInAssignment),b=(new H(c)).finishUnaryExpression(a.value,b)):L("+")||L("-")||L("~")||L("!")?(c=T,a=x(),b=na(),b=(new H(c)).finishUnaryExpression(a.value,b)):S("delete")||S("void")||S("typeof")?(c=T,a=x(),b=na(),b=(new H(c)).finishUnaryExpression(a.value,b),
ha&&"delete"===b.operator&&b.argument.type===Y.Identifier&&R(ca.StrictDelete)):b=Xa();return b}function Fa(a,b){var c=0;if(a.type!==M.Punctuator&&a.type!==M.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=
8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Ya(){var a,b,c,d,f,g;a=T;b=na();if(b===Ma.ArrowParameterPlaceHolder)return b;c=T;d=Fa(c,V.allowIn);if(0===d)return b;c.prec=d;x();a=[a,T];g=na();for(f=[b,c,g];0<(d=Fa(T,V.allowIn));){for(;2<f.length&&d<=f[f.length-2].prec;)g=f.pop(),c=f.pop().value,b=f.pop(),a.pop(),b=(new H(a[a.length-1])).finishBinaryExpression(c,b,g),f.push(b);c=x();c.prec=d;f.push(c);a.push(T);b=na();f.push(b)}d=f.length-1;b=f[d];for(a.pop();1<
d;)b=(new H(a.pop())).finishBinaryExpression(f[d-1].value,f[d-2],b),d-=2;return b}function Da(a){var b,c,d,f,g,e,h;f=[];g=[];e=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===Y.Identifier)f.push(d),g.push(null),va(h,d,d.name);else if(d.type===Y.AssignmentExpression)f.push(d.left),g.push(d.right),++e,va(h,d.left,d.left.name);else return null;h.message===ca.StrictParamDupe&&(a=ha?h.stricted:h.firstRestricted,K(a,h.message));0===e&&(g=[]);return{params:f,defaults:g,rest:null,stricted:h.stricted,
firstRestricted:h.firstRestricted,message:h.message}}function pa(){var a,b,c,d,f;a=V.parenthesisCount;b=f=T;var g,e;e=T;c=Ya();c!==Ma.ArrowParameterPlaceHolder&&L("?")&&(x(),g=V.allowIn,V.allowIn=!0,b=pa(),V.allowIn=g,F(":"),g=pa(),c=(new H(e)).finishConditionalExpression(c,b,g));if(c===Ma.ArrowParameterPlaceHolder||L("\x3d\x3e"))if(V.parenthesisCount===a||V.parenthesisCount===a+1)if(c.type===Y.Identifier?d=Da([c]):c.type===Y.AssignmentExpression?d=Da([c]):c.type===Y.SequenceExpression?d=Da(c.expressions):
c===Ma.ArrowParameterPlaceHolder&&(d=Da([])),d)return a=d,f=new H(f),F("\x3d\x3e"),d=ha,c=L("{")?Ka():pa(),ha&&a.firstRestricted&&K(a.firstRestricted,a.message),ha&&a.stricted&&W(a.stricted,a.message),ha=d,f.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==Y.BlockStatement);T.type!==M.Punctuator?a=!1:(a=T.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===
a);a&&(la(c)||R(ca.InvalidLHSInAssignment),b=x(),a=pa(),c=(new H(f)).finishAssignmentExpression(b.value,c,a));return c}function oa(){var a,b=T;a=pa();if(L(",")){for(a=[a];B<ga&&L(",");)x(),a.push(pa());a=(new H(b)).finishSequenceExpression(a)}return a}function Aa(){var a,b=new I;a=x();a.type!==M.Identifier&&K(a);return b.finishIdentifier(a.value)}function Ta(a){var b=null,c,d=new I;c=Aa();"const"===a?(F("\x3d"),b=pa()):L("\x3d")&&(x(),b=pa());return d.finishVariableDeclarator(c,b)}function Ja(a){var b=
[];do{b.push(Ta(a));if(!L(","))break;x()}while(B<ga);return b}function Ba(a){var b=T.type,c,d;b===M.EOF&&K(T);if(b===M.Punctuator&&"{"===T.value){if(a){F("{");var f=T;a=B;c=Z;d=aa;x();b=L(":");T=f;B=a;Z=c;aa=d;if((T.type===M.Identifier||T.type===M.StringLiteral)&&b)return Sa(!0);a=new I;for(c=[];B<ga&&!L("}");){d=Ha();if("undefined"===typeof d)break;c.push(d)}F("}");return a.finishBlockStatement(c)}return Sa()}a=new I;if(b===M.Punctuator)switch(T.value){case ";":return a=new I,F(";"),a.finishEmptyStatement();
case "(":return c=oa(),ra(),a.finishExpressionStatement(c)}else if(b===M.Keyword)switch(T.value.toLowerCase()){case "break":return c=null,P("break"),59===N.charCodeAt(B)?(x(),V.inIteration||V.inSwitch||G(ca.IllegalBreak),a=a.finishBreakStatement(null)):Q()?(V.inIteration||V.inSwitch||G(ca.IllegalBreak),a=a.finishBreakStatement(null)):(T.type===M.Identifier&&(c=Aa(),d="$"+c.name,Object.prototype.hasOwnProperty.call(V.labelSet,d)||G(ca.UnknownLabel,c.name)),ra(),null!==c||V.inIteration||V.inSwitch||
G(ca.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,P("continue"),59===N.charCodeAt(B)?(x(),V.inIteration||G(ca.IllegalContinue),a=a.finishContinueStatement(null)):Q()?(V.inIteration||G(ca.IllegalContinue),a=a.finishContinueStatement(null)):(T.type===M.Identifier&&(c=Aa(),d="$"+c.name,Object.prototype.hasOwnProperty.call(V.labelSet,d)||G(ca.UnknownLabel,c.name)),ra(),null!==c||V.inIteration||G(ca.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var e,h,k;h=
V.allowIn;e=b=f=null;P("for");F("(");if(L(";"))x();else{if(S("var")){V.allowIn=!1;var l=new I;e=x();k=Ja();e=l.finishVariableDeclaration(k,e.value);V.allowIn=h;1===e.declarations.length&&S("in")&&(x(),c=e,d=oa(),e=null)}else V.allowIn=!1,e=oa(),V.allowIn=h,S("in")&&(la(e)||R(ca.InvalidLHSInForIn),x(),c=e,d=oa(),e=null);"undefined"===typeof c&&F(";")}"undefined"===typeof c&&(L(";")||(b=oa()),F(";"),L(")")||(f=oa()));F(")");k=V.inIteration;V.inIteration=!0;h=Ba(!0);V.inIteration=k;return"undefined"===
typeof c?a.finishForStatement(e,b,f,h):a.finishForInStatement(c,d,h);case "function":return Ga(a);case "if":return P("if"),F("("),c=oa(),F(")"),d=Ba(!0),S("else")?(x(),b=Ba(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,P("return"),V.inFunctionBody||R(ca.IllegalReturn),32===N.charCodeAt(B)&&g(N.charCodeAt(B+1))?(c=oa(),ra(),a=a.finishReturnStatement(c)):Q()?a=a.finishReturnStatement(null):(L(";")||L("}")||T.type===M.EOF||(c=oa()),ra(),a=a.finishReturnStatement(c)),a;case "var":return P("var"),
c=Ja(),ra(),a.finishVariableDeclaration(c,"var")}c=oa();if(c.type===Y.Identifier&&L(":"))return x(),b="$"+c.name,Object.prototype.hasOwnProperty.call(V.labelSet,b)&&G(ca.Redeclaration,"Label",c.name),V.labelSet[b]=!0,d=Ba(!1),delete V.labelSet[b],a.finishLabeledStatement(c,d);ra();return a.finishExpressionStatement(c)}function Ka(){var a,b=[],c,d,f,g,e,h=new I;for(F("{");B<ga&&T.type===M.StringLiteral;){c=T;a=Ha();b.push(a);if(a.expression.type!==Y.Literal)break;a=N.slice(c.start+1,c.end-1);"use strict"===
a?(ha=!0,d&&W(d,ca.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=V.labelSet;d=V.inIteration;f=V.inSwitch;g=V.inFunctionBody;e=V.parenthesizedCount;V.labelSet={};V.inIteration=!1;V.inSwitch=!1;V.inFunctionBody=!0;for(V.parenthesizedCount=0;B<ga&&!L("}");){a=Ha();if("undefined"===typeof a)break;b.push(a)}F("}");V.labelSet=c;V.inIteration=d;V.inSwitch=f;V.inFunctionBody=g;V.parenthesizedCount=e;return h.finishBlockStatement(b)}function va(a,b,c){c="$"+c;ha?Object.prototype.hasOwnProperty.call(a.paramSet,
c)&&(a.stricted=b,a.message=ca.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ca.StrictParamDupe);a.paramSet[c]=!0}function Ua(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};F("(");if(!L(")"))for(a.paramSet={};B<ga;){var b=a,c=void 0,d=void 0,f=void 0,c=T,d=Aa();va(b,c,c.value);L("\x3d")&&(x(),f=pa(),++b.defaultCount);b.params.push(d);b.defaults.push(f);if(L(")"))break;F(",")}F(")");0===a.defaultCount&&(a.defaults=
[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ga(){var a,b=[],c=[],d,f,g,e,h,k=new I;P("function");a=Aa();d=Ua(g);b=d.params;c=d.defaults;f=d.stricted;g=d.firstRestricted;d.message&&(e=d.message);h=ha;d=Ka();ha&&g&&K(g,e);ha&&f&&W(f,e);ha=h;return k.finishFunctionDeclaration(a,b,c,d)}function Ha(){if(T.type===M.Keyword)return"function"===T.value.toLowerCase()?Ga():Ba(!1);if(T.type!==M.EOF)return Ba(!1)}function La(){var a,
b,c,d=[];for(a=0;a<J.tokens.length;++a)b=J.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),J.range&&(c.range=b.range),J.loc&&(c.loc=b.loc),d.push(c);J.tokens=d}var M,za,ma,Y,Ma,Ra,ca,ia,N,ha,B,Z,aa,ga,T,V,J;M={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};za={};za[M.BooleanLiteral]="Boolean";za[M.EOF]="\x3cend\x3e";za[M.Identifier]="Identifier";za[M.Keyword]="Keyword";
za[M.NullLiteral]="Null";za[M.NumericLiteral]="Numeric";za[M.Punctuator]="Punctuator";za[M.StringLiteral]="String";za[M.RegularExpression]="RegularExpression";ma="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");Y={AssignmentExpression:"AssignmentExpression",
ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ma={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};Ra={Data:1,Get:2,Set:4};ca={UnexpectedToken:"Unexpected token %0",
UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",
NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",
StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",
StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};ia={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
H.prototype=I.prototype={processComment:function(){var a,b,c,d=J.bottomRightStack,f,g,e=d[d.length-1];if(!(this.type===Y.Program&&0<this.body.length)){if(0<J.trailingComments.length){c=[];for(f=J.trailingComments.length-1;0<=f;--f)g=J.trailingComments[f],g.range[0]>=this.range[1]&&(c.unshift(g),J.trailingComments.splice(f,1));J.trailingComments=[]}else e&&e.trailingComments&&e.trailingComments[0].range[0]>=this.range[1]&&(c=e.trailingComments,delete e.trailingComments);if(e)for(;e&&e.range[0]>=this.range[0];)a=
e,e=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<J.leadingComments.length)for(b=[],f=J.leadingComments.length-1;0<=f;--f)g=J.leadingComments[f],g.range[1]<=this.range[0]&&(b.unshift(g),J.leadingComments.splice(f,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){J.range&&(this.range[1]=B);J.loc&&(this.loc.end=
new C,J.source&&(this.loc.source=J.source));J.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=Y.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=Y.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?Y.LogicalExpression:Y.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=Y.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=Y.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=Y.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=Y.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
Y.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=Y.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=Y.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=Y.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=Y.ForInStatement;this.left=a;this.right=b;this.body=c;
this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=Y.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=Y.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=Y.Identifier;this.name=
a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=Y.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=Y.Literal;this.value=a.value;this.raw=N.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=Y.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
Y.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=Y.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=Y.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,f){this.type=Y.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=f;this.finish();return this},finishReturnStatement:function(a){this.type=Y.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?Y.UpdateExpression:Y.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=Y.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=Y.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};a.version="2.0.0-dev";a.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));N=a;B=0;Z=0<N.length?1:0;aa=0;ga=N.length;T=null;V={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};J={};b=b||{};b.tokens=!0;J.tokens=[];J.tokenize=!0;J.openParenToken=-1;J.openCurlyToken=-1;J.range="boolean"===typeof b.range&&b.range;J.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(J.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(J.errors=
[]);try{y();if(T.type===M.EOF)return J.tokens;for(x();T.type!==M.EOF;)try{x()}catch(hb){if(J.errors){J.errors.push(hb);break}else throw hb;}La();d=J.tokens;"undefined"!==typeof J.comments&&(d.comments=J.comments);"undefined"!==typeof J.errors&&(d.errors=J.errors)}catch(hb){throw hb;}finally{J={}}return d};a.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));N=a;B=0;Z=0<N.length?1:0;aa=0;ga=N.length;T=null;V={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};J={};"undefined"!==typeof b&&(J.range="boolean"===typeof b.range&&b.range,J.loc="boolean"===typeof b.loc&&b.loc,J.attachComment="boolean"===typeof b.attachComment&&b.attachComment,J.loc&&null!==b.source&&void 0!==b.source&&(J.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(J.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(J.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(J.errors=[]),J.attachComment&&(J.range=!0,J.comments=
[],J.bottomRightStack=[],J.trailingComments=[],J.leadingComments=[]));try{var f;n();y();f=new I;ha=!1;var g;a=[];for(var e,h,k;B<ga;){e=T;if(e.type!==M.StringLiteral)break;g=Ha();a.push(g);if(g.expression.type!==Y.Literal)break;h=N.slice(e.start+1,e.end-1);"use strict"===h?(ha=!0,k&&W(k,ca.StrictOctalLiteral)):!k&&e.octal&&(k=e)}for(;B<ga;){g=Ha();if("undefined"===typeof g)break;a.push(g)}c=f.finishProgram(a);"undefined"!==typeof J.comments&&(c.comments=J.comments);"undefined"!==typeof J.tokens&&
(La(),c.tokens=J.tokens);"undefined"!==typeof J.errors&&(c.errors=J.errors)}catch(tb){throw tb;}finally{J={}}return c};a.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in Y)Y.hasOwnProperty(a)&&(b[a]=Y[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(a,e,b){function c(a,b){Array.isArray(b)?(a[0]=b[0],a[1]=b[1],a[2]=b[2],
a[3]=b[3]):(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a);return a}function d(a,b,c){void 0===b&&(b=0);void 0===c&&(c=!1);var d=a[b+3];a[b+0]*=d;a[b+1]*=d;a[b+2]*=d;c||(a[b+3]*=255);return a}Object.defineProperty(e,"__esModule",{value:!0});e.white=[255,255,255,1];var h=[0,0,0,0];e.premultiplyAlpha=d;e.copyAndPremultiply=function(a){return d(c([],a))};e.premultiplyAlphaUint32=function(a){d(c(h,a));return b.i8888to32(h[0],h[1],h[2],h[3])};e.premultiplyAlphaRGBA=function(a){var c=a.a;return b.i8888to32(a.r*c,
a.g*c,a.b*c,255*c)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});var b=new Float32Array(1),c=new Uint32Array(b.buffer);e.nextHighestPowerOfTwo=function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a};e.toUint32=function(a){b[0]=a;return c[0]};e.i1616to32=function(a,b){return 65535&a|b<<16};e.i8888to32=function(a,b,c,f){return a&255|(b&255)<<8|(c&255)<<16|f<<24};e.i8816to32=
function(a,b,c){return a&255|(b&255)<<8|c<<16};e.numTo32=function(a){return a|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});a=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}a.prototype.acquire=function(a,b,c,f,e,l,m,n,p){this.color=
a;this.haloColor=b;this.haloSize=c;this.size=f;this.angle=e;this.offsetX=l;this.offsetY=m;this.hAnchor=n;this.vAnchor=p};a.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=new b(a);return a}();e.TextProperties=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function d(){var b=a.call(this)||this;b._initialized=!1;b._maxWidth=0;b._color=new Float32Array([1,0,0,1]);return b}b(d,a);d.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};d.prototype.draw=function(a,b){a=a.context;if(b.status!==g.TileStatus.INITIALIZED){this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);
this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);a.setLineWidth(2);a.drawArrays(3,0,4);a.bindVAO();var c=this._getTexture(a,b);c&&(a.bindVAO(this._tileInfoVertexArrayObject),a.bindProgram(this._tileInfoProgram),a.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),
this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),a.drawArrays(5,0,4),a.bindVAO())}};d.prototype._initialize=function(a){if(this._initialized)return!0;var b={a_pos:0},c=new k(a,h.backgroundVS,h.backgroundFS,b),d=new k(a,h.tileInfoVS,h.tileInfoFS,b),g={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,
normalized:!1,divisor:0}]},e=new Int8Array([0,0,1,0,1,1,0,1]),e=f.createVertex(a,35044,e),e=new m(a,b,g,{geometry:e}),l=new Int8Array([0,0,1,0,0,1,1,1]),l=f.createVertex(a,35044,l);a=new m(a,b,g,{geometry:l});this._outlineProgram=c;this._tileInfoProgram=d;this._outlineVertexArrayObject=e;this._tileInfoVertexArrayObject=a;return this._initialized=!0};d.prototype._getTexture=function(a,b){if(b.texture)return b.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",
"canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var d=b.key.id,f=this._canvas.getContext("2d");f.font="24px sans-serif";f.textAlign="left";f.textBaseline="middle";var g=f.measureText(d),g=Math.pow(2,Math.ceil(c.log2(g.width+2)));g>this._maxWidth&&(this._maxWidth=g);f.clearRect(0,0,this._maxWidth,32);f.fillStyle="blue";f.fillText(d,0,16);b.texture=new l(a,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},
this._canvas);return b.texture};return d}(d.default);e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});a=function(){return function(){}}();e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),
function(a,e,b,c,d,h,g){a=new g;g.parse(b,a);g.parse(c,a);g.parse(d,a);g.parse(h,a);return a})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});a=e.TileStatus||(e.TileStatus={});a[a.INITIALIZED=0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=3]="MODIFIED";a[a.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports",
"dojo/has"],function(a,e,b){return function(){function a(c,e,g,f,k){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=c;this._bufferType=e;this._usage=g;this._id=a._nextId++;this._glName=this._context.gl.createBuffer();b("esri-webgl-debug")&&c.instanceCounter.incrementCount(1);f&&this.setData(f,k)}a.createIndex=function(b,c,g,f){return new a(b,34963,c,g,f)};a.createVertex=function(b,c,g){return new a(b,34962,c,g)};Object.defineProperty(a.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),
this._context=null)};a.prototype.setData=function(a,b){if(a){if("number"===typeof a){if(34963===this._bufferType&&b)switch(this._indexType=b,this._size=a,b){case 5123:a*=2;break;case 5125:a*=4}}else b=a.byteLength,a instanceof Uint16Array&&(b/=2,this._indexType=5123),a instanceof Uint32Array&&(b/=4,this._indexType=5125),this._size=b,ArrayBuffer.isView(a)&&(a=a.buffer);b=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,
a,this._usage);this._context.bindVAO(b)}};a.prototype.setSubData=function(a,b,c,f){void 0===b&&(b=0);void 0===c&&(c=0);if(a){var d=f,g=a.byteLength;a instanceof Uint16Array&&(g/=2,b*=2,c*=2,d*=2);a instanceof Uint32Array&&(g/=4,b*=4,c*=4,d*=4);void 0===f&&(f=g-1);f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);g=this._context.gl;a=ArrayBuffer.isView(a)?a.buffer:a;g.bufferSubData(this._bufferType,b,a.slice(c,d));this._context.bindVAO(f)}};a._nextId=0;return a}()})},
"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(a,e,b){return function(){function a(c,e,g){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=c;this._desc={pixelFormat:e.pixelFormat,internalFormat:e.internalFormat,dataType:e.dataType,target:e.target?e.target:3553,samplingMode:e.samplingMode?e.samplingMode:9729,wrapMode:e.wrapMode?e.wrapMode:10497,
maxAnisotropy:e.maxAnisotropy,flipped:void 0!==e.flipped?e.flipped:!1,hasMipmap:void 0!==e.hasMipmap?e.hasMipmap:!1,level:void 0!==e.level?e.level:0,unpackAlignment:e.unpackAlignment?e.unpackAlignment:4,width:e.width,height:e.height,preMultiplyAlpha:void 0!==e.preMultiplyAlpha?e.preMultiplyAlpha:!1};this._id=++a._nextId;b("esri-webgl-debug")&&c.instanceCounter.incrementCount(0);this.setData(g)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var c=this._context.gl;this._boundToUnits.forEach(function(b){a._context.bindTexture(null,b)});c.deleteTexture(this._glName);this._glName=null}b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);
this._context=null}};a.prototype.resize=function(a,b){var c=this._desc;if(c.width!==a||c.height!==b)c.width=a,c.height=b,this.setData(null)};a.prototype.setData=function(b){var c=this._context.gl;this._glName||(this._glName=c.createTexture());void 0===b&&(b=null);null===b&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var d=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var f=this._desc;a._validateTexture(f);c.pixelStorei(c.UNPACK_ALIGNMENT,f.unpackAlignment);
c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,f.flipped?1:0);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f.preMultiplyAlpha);if(b instanceof ImageData||b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof HTMLVideoElement)c.texImage2D(c.TEXTURE_2D,f.level,f.internalFormat?f.internalFormat:f.pixelFormat,f.pixelFormat,f.dataType,b),void 0===this._desc.width&&(this._desc.width=b.width),void 0===this._desc.height&&(this._desc.height=b.height);else{var e=f.internalFormat?f.internalFormat:
f.pixelFormat,l=f.pixelFormat;c.DEPTH24_STENCIL8&&e===c.DEPTH_STENCIL&&(e=c.DEPTH24_STENCIL8);c.texImage2D(c.TEXTURE_2D,f.level,e,f.width,f.height,0,l,f.dataType,b)}f.hasMipmap&&this.generateMipmap();a._applySamplingMode(c,this._desc);a._applyWrapMode(c,this._desc);a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(d,0)};a.prototype.updateData=function(a,b,c,f,e,l){var d=this._context.gl,g=this._desc,h=this._context.getBoundTexture(0);this._context.bindTexture(this,
0);l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?d.texSubImage2D(d.TEXTURE_2D,a,b,c,g.pixelFormat,g.dataType,l):d.texSubImage2D(d.TEXTURE_2D,a,b,c,f,e,g.pixelFormat,g.dataType,l);this._context.bindTexture(h,0)};a.prototype.generateMipmap=function(){var b=this._desc;b.hasMipmap||(b.hasMipmap=!0,a._validateTexture(b));9729===b.samplingMode?(this._samplingModeDirty=!0,b.samplingMode=9985):9728===b.samplingMode&&(this._samplingModeDirty=
!0,b.samplingMode=9984);b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var c=this._context.gl;c.generateMipmap(c.TEXTURE_2D);this._context.bindTexture(b,0)};a.prototype.setSamplingMode=function(b){b!==this._desc.samplingMode&&(this._desc.samplingMode=b,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(b){b!==this._desc.wrapMode&&(this._desc.wrapMode=b,a._validateTexture(this._desc),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var b=
this._context.gl,c=this._desc;this._samplingModeDirty&&(a._applySamplingMode(b,c),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(b,c),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(a,b){b?this._boundToUnits.add(a):this._boundToUnits.delete(a)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=function(b){a._isPowerOfTwo(b.width)&&a._isPowerOfTwo(b.height)};a._applySamplingMode=function(a,b){var c=b.samplingMode;if(9985===c||9987===c)c=9729;else if(9984===
c||9986===c)c=9728;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.samplingMode)};a._applyWrapMode=function(a,b){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,b.wrapMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,b.wrapMode)};a._applyAnisotropicFilteringParameters=function(a,b){if(null!=b.maxAnisotropy){var c=a.capabilities.textureFilterAnisotropic;c&&(a=a.gl,a.texParameterf(a.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY,b.maxAnisotropy))}};a._nextId=
0;return a}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(a,e,b,c){return function(){function a(c,d,f,e,l){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=c;this._layout=f;this._buffers=e;this._locations=d;l&&(this._indexBuffer=l);this._id=a._nextId++;b("esri-webgl-debug")&&c.instanceCounter.incrementCount(2)}Object.defineProperty(a.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){var a=this;return Object.keys(this._buffers).reduce(function(b,
c){return b+a._buffers[c].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.dispose=function(a){void 0===a&&(a=!0);if(this._context){var c=this._context.capabilities.vao;c&&this._glName&&(c.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(a){for(var d in this._buffers)this._buffers[d].dispose(),delete this._buffers[d];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){var a=this._context.capabilities.vao;if(a){var b=a.createVertexArray();a.bindVertexArray(b);this._bindLayout();a.bindVertexArray(null);
this._glName=b}this._initialized=!0}};a.prototype.bind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};a.prototype._bindLayout=function(){var a=this._buffers,b=!!this._context.capabilities.vao,d=this._layout,e=this._indexBuffer,l=this._context.gl,m;for(m in a)c.bindVertexBufferLayout(this._context,this._locations,a[m],d[m]);e&&(b?l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,e.glName):this._context.bindBuffer(e))};
a.prototype.unbind=function(){this.initialize();var a=this._context.capabilities.vao;a?a.bindVertexArray(null):this._unbindLayout()};a.prototype._unbindLayout=function(){var a=this._buffers,b=this._layout,d;for(d in a)c.unbindVertexBufferLayout(this._context,this._locations,a[d],b[d]);(a=this._indexBuffer)&&this._context.unbindBuffer(a.bufferType)};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f,k){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function d(){var b=a.call(this)||this;b._color=c.create();b._initialized=!1;b._color.set([1,0,0,1]);return b}b(d,a);d.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};d.prototype.draw=function(a,b){a=a.context;this._initialized||this._initialize(a);
a.setStencilFunctionSeparate(1032,519,b.stencilRef,255);a.bindVAO(this._solidVertexArrayObject);a.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);a.drawArrays(5,0,4);a.bindVAO()};d.prototype._initialize=
function(a){if(this._initialized)return!0;var b={a_pos:0},c=new f(a,h.backgroundVS,h.backgroundFS,b);if(!c)return!1;var d=new Int8Array([0,0,1,0,0,1,1,1]),d=g.createVertex(a,35044,d);a=new k(a,b,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:d});this._solidProgram=c;this._solidVertexArrayObject=a;return this._initialized=!0};return d}(d.default);e.default=a})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(a){var e=
{create:function(){var b=new a.ARRAY_TYPE(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0;return b},clone:function(b){var c=new a.ARRAY_TYPE(4);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];return c},fromValues:function(b,c,d,e){var g=new a.ARRAY_TYPE(4);g[0]=b;g[1]=c;g[2]=d;g[3]=e;return g},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a},set:function(a,c,d,e,g){a[0]=c;a[1]=d;a[2]=e;a[3]=g;return a},add:function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];return a},subtract:function(a,
c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];return a}};e.sub=e.subtract;e.multiply=function(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];a[2]=c[2]*d[2];a[3]=c[3]*d[3];return a};e.mul=e.multiply;e.divide=function(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];a[2]=c[2]/d[2];a[3]=c[3]/d[3];return a};e.div=e.divide;e.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);a[3]=Math.ceil(c[3]);return a};e.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=
Math.floor(c[2]);a[3]=Math.floor(c[3]);return a};e.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);a[2]=Math.min(c[2],d[2]);a[3]=Math.min(c[3],d[3]);return a};e.max=function(a,c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);a[2]=Math.max(c[2],d[2]);a[3]=Math.max(c[3],d[3]);return a};e.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=Math.round(c[2]);a[3]=Math.round(c[3]);return a};e.scale=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*
d;return a};e.scaleAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;a[3]=c[3]+d[3]*e;return a};e.distance=function(a,c){var b=c[0]-a[0],e=c[1]-a[1],g=c[2]-a[2];a=c[3]-a[3];return Math.sqrt(b*b+e*e+g*g+a*a)};e.dist=e.distance;e.squaredDistance=function(a,c){var b=c[0]-a[0],e=c[1]-a[1],g=c[2]-a[2];a=c[3]-a[3];return b*b+e*e+g*g+a*a};e.sqrDist=e.squaredDistance;e.length=function(a){var b=a[0],d=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+d*d+e*e+a*a)};e.len=e.length;e.squaredLength=
function(a){var b=a[0],d=a[1],e=a[2];a=a[3];return b*b+d*d+e*e+a*a};e.sqrLen=e.squaredLength;e.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=-c[3];return a};e.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];a[3]=1/c[3];return a};e.normalize=function(a,c){var b=c[0],e=c[1],g=c[2];c=c[3];var f=b*b+e*e+g*g+c*c;0<f&&(f=1/Math.sqrt(f),a[0]=b*f,a[1]=e*f,a[2]=g*f,a[3]=c*f);return a};e.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};e.lerp=function(a,c,d,e){var b=
c[0],f=c[1],h=c[2];c=c[3];a[0]=b+e*(d[0]-b);a[1]=f+e*(d[1]-f);a[2]=h+e*(d[2]-h);a[3]=c+e*(d[3]-c);return a};e.random=function(b,c){c=c||1;b[0]=a.RANDOM();b[1]=a.RANDOM();b[2]=a.RANDOM();b[3]=a.RANDOM();e.normalize(b,b);e.scale(b,b,c);return b};e.transformMat4=function(a,c,d){var b=c[0],g=c[1],f=c[2];c=c[3];a[0]=d[0]*b+d[4]*g+d[8]*f+d[12]*c;a[1]=d[1]*b+d[5]*g+d[9]*f+d[13]*c;a[2]=d[2]*b+d[6]*g+d[10]*f+d[14]*c;a[3]=d[3]*b+d[7]*g+d[11]*f+d[15]*c;return a};e.transformQuat=function(a,c,d){var b=c[0],g=
c[1],f=c[2],e=d[0],l=d[1],m=d[2];d=d[3];var n=d*b+l*f-m*g,p=d*g+m*b-e*f,q=d*f+e*g-l*b,b=-e*b-l*g-m*f;a[0]=n*d+b*-e+p*-m-q*-l;a[1]=p*d+b*-l+q*-e-n*-m;a[2]=q*d+b*-m+n*-l-p*-e;a[3]=c[3];return a};e.forEach=function(){var a=e.create();return function(b,d,e,g,f,k){d||(d=4);e||(e=0);for(g=g?Math.min(g*d+e,b.length):b.length;e<g;e+=d)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],a[3]=b[e+3],f(a,a,k),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2],b[e+3]=a[3];return b}}();e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+
a[3]+")"};e.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};e.equals=function(b,c){var d=b[0],e=b[1],g=b[2];b=b[3];var f=c[0],k=c[1],l=c[2];c=c[3];return Math.abs(d-f)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(e-k)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(g-l)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(b-c)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))};return e})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b._isInitialized=!1;b._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};b._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};b._spritesTextureSize=new Float32Array(2);return b}b(f,a);f.prototype.dispose=function(){};f.prototype.getGeometryType=function(){return c.WGLGeometryType.FILL};f.prototype.drawGeometry=
function(a,b,c,d){d=a.context;var f=a.painter,e=a.rendererInfo,g=a.requiredLevel,h=a.stationary,k=c.indexCount,l=c.indexFrom;this._initialize();var m=c.materialInfo.materialKeyInfo,n=m.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(n=a.painter.materialManager.getProgram(c.materialInfo.materialKey,a.drawPhase,n)){d.bindProgram(n);var p=this._getVAO(d,b,m.hasVV());d.bindVAO(p);if(0<c.materialInfo.texBindingInfo.length){c=c.materialInfo.texBindingInfo[0];var p=c.pageId,y=a.painter.textureManager.sprites;
this._spritesTextureSize[0]=y.getWidth(p);this._spritesTextureSize[1]=y.getHeight(p);n.setUniform1f("u_zoomFactor",1/Math.pow(2,g-b.key.level)/a.pixelRatio);f.textureManager.bindSpritePage(d,p,c.unit,h?9728:9729);n.setUniform1i(c.semantic,c.unit);n.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}n.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);n.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);n.setUniform1f("u_opacity",1);m.vvColor&&(n.setUniform1fv("u_vvColorValues",
e.vvColorValues),n.setUniform4fv("u_vvColors",e.vvColors));m.vvOpacity&&(n.setUniform1fv("u_vvOpacityValues",e.vvOpacityValues),n.setUniform1fv("u_vvOpacities",e.vvOpacities));d.drawElements(4,k,5125,4*l);d.bindVAO(null)}};f.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};f.prototype._getVAO=function(a,b,c){if(b.fillGeometry.vao)return b.fillGeometry.vao;var f=b.fillGeometry.vertexBufferMap[d.C_VBO_GEOMETRY],e=b.fillGeometry.indexBuffer;if(!f||!e)return null;b.fillGeometry.vao=c?new g(a,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:f},e):new g(a,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:f},e);return b.fillGeometry.vao};return f}(h.default);e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(a,e,b,c,d){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,
a);c.prototype.draw=function(a,b){var c=this;if(b.canDisplay){var f=this.getGeometryType(),e=b.getDisplayList(a.drawPhase),g=b.getGeometry(f);g&&d.forEachIter(e.ofType(f),function(d){return c.drawGeometry(a,b,d,g)})}};return c}(c.default);e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});e.forEachIter=function(a,c){for(;;){var b=a.next();if(b.done)break;c(b.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(a,e,b,c,d,h,g){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};b._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};b._glyphsTextureSize=new Float32Array(2);return b}b(f,a);f.prototype.dispose=function(){};f.prototype.drawGeometry=function(a,b,d,f){if(a.requiredLevel===b.key.level){f=a.context;var e=a.painter,g=a.drawPhase,h=d.materialInfo,k=d.indexCount;d=d.indexFrom;var l=this._attributeLocations,m=a.drawPhase===c.WGLDrawPhase.LABEL_ALPHA,n=h.materialKey;
m&&(n|=8);if(g=e.materialManager.getProgram(n,g,l))f.setStencilTestEnabled(!1),f.bindProgram(g),l=this._getVAO(f,b),f.bindVAO(l),m?(f.setBlendingEnabled(!1),g.setUniform1f("u_fadeStep",a.labelStep)):(h=h.texBindingInfo[0],e.textureManager.bindGlyphsPage(f,h.pageId,h.unit),g.setUniform1i(h.semantic,h.unit)),h=e.textureManager.glyphs,this._glyphsTextureSize[0]=h.width/4,this._glyphsTextureSize[1]=h.height/4,e=e.extrudeNoRotationMatrix,f.bindTexture(a.labelFBO.colorTexture,3),g.setUniform1i("u_referenceTex",
3),g.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),g.setUniformMatrix4fv("u_extrudeMatrix",e),g.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),g.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),g.setUniform1f("u_pixelRatio",a.pixelRatio),g.setUniform1f("u_opacity",1),g.setUniform1f("u_zoomLevel",10*a.displayLevel),g.setUniform1f("u_mapRotation",a.state.rotation),g.setUniform1f("u_mapAligned",0),g.setUniform2fv("u_screenSize",a.state.size),f.drawElements(4,
k,5125,4*d),f.bindVAO(null),f.setStencilTestEnabled(!0),f.setBlendingEnabled(!0)}};f.prototype.getGeometryType=function(){return c.WGLGeometryType.LABEL};f.prototype._getVAO=function(a,b){if((b=b.labelGeometry)&&b.vao)return b.vao;var c=b.vertexBufferMap[d.C_VBO_GEOMETRY],f=b.vertexBufferMap[d.C_VBO_VISIBILITY_RANGE],e=b.indexBuffer;if(!c||!e||!f)return null;b.vao=new g(a,this._attributeLocations,this._vertexAttributeLayout,{geometry:c,visibility:b.vertexBufferMap[d.C_VBO_VISIBILITY],visibilityRange:f},
e);return b.vao};return f}(h.default);e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(a,e,b,c,d,h,g){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};b._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};b._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};b._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};b._spritesTextureSize=new Float32Array(2);return b}b(f,a);f.prototype.dispose=function(){};f.prototype.getGeometryType=function(){return c.WGLGeometryType.LINE};f.prototype.drawGeometry=function(a,b,c,d){d=a.context;var f=a.painter,e=a.rendererInfo,g=a.requiredLevel,h=a.drawPhase,k=c.indexFrom,l=c.indexCount,m=c.materialInfo;c=m.materialKeyInfo;var n=c.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(h=f.materialManager.getProgram(m.materialKey,
h,n)){d.bindProgram(h);n=this._getVAO(d,b,c.hasVV());d.bindVAO(n);n=1/a.pixelRatio;if(0<m.texBindingInfo.length){var m=m.texBindingInfo[0],p=m.pageId,y=f.textureManager.sprites;this._spritesTextureSize[0]=y.getWidth(p);this._spritesTextureSize[1]=y.getHeight(p);f.textureManager.bindSpritePage(d,p,m.unit);h.setUniform1i(m.semantic,m.unit);h.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}a=Math.pow(2,g-b.key.level)/a.pixelRatio;h.setUniform1f("u_zoomFactor",a);h.setUniformMatrix4fv("u_transformMatrix",
b.tileTransform.transform);h.setUniformMatrix4fv("u_extrudeMatrix",f.extrudeMatrix);h.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);h.setUniform1f("u_opacity",1);h.setUniform1f("u_blur",0+n);h.setUniform1f("u_antialiasing",n);h.setUniform1f("u_zoomFactor",a);c.vvSizeMinMaxValue&&h.setUniform4fv("u_vvSizeMinMaxValue",e.vvSizeMinMaxValue);c.vvSizeScaleStops&&h.setUniform1f("u_vvSizeScaleStopsValue",e.vvSizeScaleStopsValue);c.vvSizeFieldStops&&(h.setUniform1fv("u_vvSizeFieldStopsValues",
e.vvSizeFieldStopsValues),h.setUniform1fv("u_vvSizeFieldStopsSizes",e.vvSizeFieldStopsSizes));c.vvSizeUnitValue&&h.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",e.vvSizeUnitValueToPixelsRatio);c.vvColor&&(h.setUniform1fv("u_vvColorValues",e.vvColorValues),h.setUniform4fv("u_vvColors",e.vvColors));c.vvOpacity&&(h.setUniform1fv("u_vvOpacityValues",e.vvOpacityValues),h.setUniform1fv("u_vvOpacities",e.vvOpacities));d.setFaceCullingEnabled(!0);d.setFrontFace(2305);d.setCullFace(1029);d.drawElements(4,
l,5125,4*k);d.setFaceCullingEnabled(!1);d.bindVAO(null)}};f.prototype._getVAO=function(a,b,c){if(b.lineGeometry.vao)return b.lineGeometry.vao;var f=b.lineGeometry.vertexBufferMap[d.C_VBO_GEOMETRY],e=b.lineGeometry.indexBuffer;if(!f||!e)return null;b.lineGeometry.vao=c?new g(a,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:f},e):new g(a,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:f},e);return b.lineGeometry.vao};return f}(h.default);e.default=
a})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(a,e,b,c,d,h,g,f){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b._iconAttributeLocations={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,
a_sizeAndOutlineWidth:5};b._iconAttributeLocationsVV={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_vv:6};b._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_weight:6};b._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_id",
count:4,type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:24,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};b._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:40,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:40,
normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:40,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:40,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:40,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:40,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:24,stride:40,normalized:!1,divisor:0}]};b._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,
type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:28,normalized:!1,divisor:0},{name:"a_weight",count:1,
type:5126,offset:24,stride:28,normalized:!1,divisor:0}]};b._spritesTextureSize=new Float32Array(2);return b}b(e,a);e.prototype.dispose=function(){};e.prototype.getGeometryType=function(){return c.WGLGeometryType.MARKER};e.prototype.drawGeometry=function(a,b,c,d){d=a.context;var f=a.painter,e=a.rendererInfo,g=a.drawPhase;a=c.indexCount;var h=c.indexFrom,k=c.materialInfo;c=k.materialKeyInfo;var l=c.heatmap,m=c.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(g=f.materialManager.getProgram(k.materialKey,
g,m))d.bindProgram(g),m=this._getVAO(d,b,c.hasVV(),l),d.bindVAO(m),l?(k=this._getIntensityTexture(d,e.heatmapParameters),d.bindTexture(k,1),g.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(e.heatmapParameters.radius),this._spritesTextureSize[1]=Math.round(e.heatmapParameters.radius)):(l=k.texBindingInfo[0],k=l.pageId,f.textureManager.bindSpritePage(d,k,l.unit),g.setUniform1i(l.semantic,l.unit),l=f.textureManager.sprites,this._spritesTextureSize[0]=l.getWidth(k)/4,this._spritesTextureSize[1]=
l.getHeight(k)/4),f=e.vvMaterialParameters.vvRotationEnabled&&"geographic"===e.vvMaterialParameters.vvRotationType?f.extrudeMatrix:f.extrudeNoRotationMatrix,g.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),g.setUniformMatrix4fv("u_extrudeMatrix",f),g.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),g.setUniform2fv("u_mosaicSize",this._spritesTextureSize),g.setUniform1f("u_opacity",1),c.vvSizeMinMaxValue&&g.setUniform4fv("u_vvSizeMinMaxValue",e.vvSizeMinMaxValue),
c.vvSizeScaleStops&&g.setUniform1f("u_vvSizeScaleStopsValue",e.vvSizeScaleStopsValue),c.vvSizeFieldStops&&(g.setUniform1fv("u_vvSizeFieldStopsValues",e.vvSizeFieldStopsValues),g.setUniform1fv("u_vvSizeFieldStopsSizes",e.vvSizeFieldStopsSizes)),c.vvSizeUnitValue&&g.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",e.vvSizeUnitValueToPixelsRatio),c.vvColor&&(g.setUniform1fv("u_vvColorValues",e.vvColorValues),g.setUniform4fv("u_vvColors",e.vvColors)),c.vvOpacity&&(g.setUniform1fv("u_vvOpacityValues",
e.vvOpacityValues),g.setUniform1fv("u_vvOpacities",e.vvOpacities)),c.vvRotation&&g.setUniform1f("u_vvRotationType","geographic"===e.vvMaterialParameters.vvRotationType?0:1),d.drawElements(4,a,5125,4*h),d.bindVAO(null)};e.prototype._getVAO=function(a,b,c,e){if(b.iconGeometry.vao)return b.iconGeometry.vao;var g=b.iconGeometry.vertexBufferMap[d.C_VBO_GEOMETRY],h=b.iconGeometry.indexBuffer;if(!g||!h)return null;b.iconGeometry.vao=c?new f(a,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,
{geometry:g},h):e?new f(a,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:g},h):new f(a,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:g},h);return b.iconGeometry.vao};e.prototype._getIntensityTexture=function(a,b){if(b.intensityKernel&&!b.refreshIntensityKernel)return b.intensityKernel;b.intensityKernel&&(b.intensityKernel.dispose(),b.intensityKernel=null);for(var c=b.radius,d=b.kernelSize,f=b.blurRadius,e=c*c,h=[],k=-1;++k<d;)h[k]=Math.exp(-Math.pow(k-
f,2)/(2*e))/(c/2*Math.sqrt(2*Math.PI));for(var c=[],l,m=0;m<d;m++)for(e=h[m],k=0;k<d;k++)l=m*d+k,f=h[k],c[4*l+0]=e*f,c[4*l+1]=0,c[4*l+2]=0,c[4*l+3]=1;a=new g(a,{target:3553,pixelFormat:6408,internalFormat:a.capabilities.colorBufferFloat.RGBA32F,dataType:5126,samplingMode:a.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:d,height:d},new Float32Array(c));b.intensityKernel=a;b.refreshIntensityKernel=!1;return a};return e}(h.default);e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g){Object.defineProperty(e,"__esModule",{value:!0});a=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};b._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};b._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};b._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,
type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};b._glyphsTextureSize=new Float32Array(2);
return b}b(f,a);f.prototype.dispose=function(){};f.prototype.getGeometryType=function(){return c.WGLGeometryType.TEXT};f.prototype.drawGeometry=function(a,b,c,d){d=a.context;var f=a.painter,e=a.rendererInfo,g=c.materialInfo,h=c.indexCount;c=c.indexFrom;var k=g.materialKeyInfo,l=k.vvSizeMinMaxValue||k.vvSizeScaleStops||k.vvSizeFieldStops||k.vvSizeUnitValue||k.vvColor||k.vvRotation||k.vvOpacity;if(a=f.materialManager.getProgram(g.materialKey,a.drawPhase,l?this._attributeLocationsVV:this._attributeLocations))d.bindProgram(a),
l=this._getVAO(d,b,l,this.getGeometryType()),d.bindVAO(l),g=g.texBindingInfo[0],f.textureManager.bindGlyphsPage(d,g.pageId,g.unit),a.setUniform1i(g.semantic,g.unit),g=f.textureManager.glyphs,this._glyphsTextureSize[0]=g.width/4,this._glyphsTextureSize[1]=g.height/4,f=e.vvMaterialParameters.vvRotationEnabled&&"geographic"===e.vvMaterialParameters.vvRotationType?f.extrudeMatrix:f.extrudeNoRotationMatrix,a.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),a.setUniformMatrix4fv("u_extrudeMatrix",
f),a.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),a.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),a.setUniform1f("u_pixelRatio",1),a.setUniform1f("u_opacity",1),k.vvSizeMinMaxValue&&a.setUniform4fv("u_vvSizeMinMaxValue",e.vvSizeMinMaxValue),k.vvSizeScaleStops&&a.setUniform1f("u_vvSizeScaleStopsValue",e.vvSizeScaleStopsValue),k.vvSizeFieldStops&&(a.setUniform1fv("u_vvSizeFieldStopsValues",e.vvSizeFieldStopsValues),a.setUniform1fv("u_vvSizeFieldStopsSizes",e.vvSizeFieldStopsSizes)),
k.vvSizeUnitValue&&a.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",e.vvSizeUnitValueToPixelsRatio),k.vvColor&&(a.setUniform1fv("u_vvColorValues",e.vvColorValues),a.setUniform4fv("u_vvColors",e.vvColors)),k.vvOpacity&&(a.setUniform1fv("u_vvOpacityValues",e.vvOpacityValues),a.setUniform1fv("u_vvOpacities",e.vvOpacities)),k.vvRotation&&a.setUniform1f("u_vvRotationType","geographic"===e.vvMaterialParameters.vvRotationType?0:1),d.drawElements(4,h,5125,4*c),d.bindVAO(null)};f.prototype._getVAO=function(a,
b,c,f){if((b=b.getGeometry(f))&&b.vao)return b.vao;f=b.vertexBufferMap[d.C_VBO_GEOMETRY];var e=b.vertexBufferMap[d.C_VBO_VISIBILITY],h=b.indexBuffer;if(!f||!h)return null;b.vao=c?new g(a,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:f,visibility:e},h):new g(a,this._attributeLocations,this._vertexAttributeLayout,{geometry:f,visibility:e},h);return b.vao};return f}(h.default);e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require",
"exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],function(a,e,b,c,d){return function(){function a(){this._hlRenderer=new c;this._hlSurfaces=new d;this._height=this._width=void 0}a.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};a.prototype.setup=function(a,b,c){var d=b%4,f=c%4;b+=2>d?-d:4-d;c+=2>f?-f:4-f;this._width=b;this._height=c;this._boundFBO=a.getBoundFramebufferObject();
b=Math.round(.75*b);c=Math.round(.75*c);this._hlRenderer.setup(a,b,c);this._hlSurfaces.setup(a,b,c)};a.prototype.setHighlightOptions=function(a){this._hlRenderer.setHighlightOptions({fillColor:a.fillColor,outlineColor:a.outlineColor,outlineWidth:.75*a.outlineWidth,outerHaloWidth:.75*a.outerHaloWidth,innerHaloWidth:.75*a.innerHaloWidth,outlinePosition:.75*a.outlinePosition})};a.prototype.startMaskDraw=function(a){a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);a.setClearColor(0,0,0,0);a.setClearStencil(0);
a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT);a.setViewport(0,0,.75*this._width,.75*this._height)};a.prototype.draw=function(a){a.setStencilTestEnabled(!1);a.setBlendingEnabled(!1);a.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);a.setClearColor(0,0,0,0);a.clear(a.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(a,this._hlSurfaces.sharedBlur1Tex);b("esri-feature-highlight-debug")?(a.bindFramebuffer(null),a.clear(a.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex)):
(a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex),a.bindFramebuffer(this._boundFBO),a.setBlendingEnabled(!0),a.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(a,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g){var f=[void 0,void 0,void 0,1],k=[3,4],l=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function a(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}a.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};a.prototype.preBlur=function(a,b){a.bindTexture(b,k[0]);a.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",l);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};a.prototype.finalBlur=function(a,b){a.bindTexture(b,k[0]);a.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",m);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};a.prototype.renderHighlight=function(a,b){a.bindTexture(b,k[0]);a.bindTexture(this._resources.shadeTex,k[1]);a.bindProgram(this._resources.highlightProgram);a.bindVAO(this._resources.quadVAO);a.drawArrays(5,0,4);a.bindVAO()};a.prototype._initialize=function(a,e,l){this._width=e;this._height=
l;e=new c(a,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);l=new g(a,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:e});var m=(new d("hl",["texturedVS","highlightFS"],[],b,a,{a_position:0,a_texcoord:1})).getProgram([]),n=(new d("hl",["texturedVS","blurFS"],[],b,a,{a_position:0,a_texcoord:1})).getProgram([]);
m.setUniform1i("u_texture",k[0]);m.setUniform1i("u_shade",k[1]);m.setUniform4fv("u_sigmas",f);n.setUniform1i("u_texture",k[0]);n.setUniform4fv("u_sigmas",f);a=new h(a,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:e,quadVAO:l,highlightProgram:m,blurProgram:n,shadeTex:a}};a.prototype.setHighlightOptions=function(a){function b(a,b,c){k[0]=(1-c)*a[0]+c*b[0];k[1]=(1-c)*a[1]+c*b[1];k[2]=(1-c)*a[2]+c*b[2];k[3]=(1-c)*a[3]+c*
b[3]}this._highlightOptions=a;if(this._resources){for(var c=a.outlinePosition-a.outlineWidth/2-a.outerHaloWidth,d=a.outlinePosition-a.outlineWidth/2,f=a.outlinePosition+a.outlineWidth/2,e=a.outlinePosition+a.outlineWidth/2+a.innerHaloWidth,g=new Uint8Array(1024),h,k=[void 0,void 0,void 0,void 0],l=0;256>l;++l)h=c+l/255*(e-c),h<c?(g[4*l+0]=0,g[4*l+1]=0,g[4*l+2]=0,g[4*l+3]=0):h<d?b([0,0,0,0],a.outlineColor,(h-c)/(d-c)):h<f?(k[0]=a.outlineColor[0],k[1]=a.outlineColor[1],k[2]=a.outlineColor[2],k[3]=a.outlineColor[3]):
h<e?b(a.outlineColor,a.fillColor,(h-f)/(e-f)):(g[4*l+0]=a.fillColor[0],g[4*l+1]=a.fillColor[1],g[4*l+2]=a.fillColor[2],g[4*l+3]=a.fillColor[3]),g[4*l+0]=255*k[0]*k[3],g[4*l+1]=255*k[1]*k[3],g[4*l+2]=255*k[2]*k[3],g[4*l+3]=255*k[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[c,e]);this._resources.shadeTex.updateData(0,0,0,256,1,g)}};a.prototype.setup=function(a,b,c){this._resources?(this._width=b,this._height=c):(this._initialize(a,b,c),this.setHighlightOptions(this._highlightOptions))};
return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(a,e,b,c){a=new c;c.parse(b,a);return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(a,e,b,c){function d(a,d,f){d=new c(a,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:d,height:f,samplingMode:9729});a=b.createWithAttachments(a,d,{colorTarget:0,depthStencilTarget:2});return[d,a]}return function(){function a(){this._height=this._width=void 0;this._resources=null}a.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};a.prototype._initialize=function(a,
b,c){this._width=b;this._height=c;var f=d(a,b,c),e=f[0],f=f[1];a=d(a,b,c);this._resources={sharedBlur1Tex:e,sharedBlur1Fbo:f,sharedBlur2Tex:a[0],sharedBlur2Fbo:a[1]}};a.prototype.setup=function(a,b,c){!this._resources||this._width===b&&this._height===c||this.dispose();this._resources||this._initialize(a,b,c)};Object.defineProperty(a.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(a,e,b,c,d){return function(){function a(e,
f,h,l){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=e;this._desc={colorTarget:f.colorTarget,depthStencilTarget:f.depthStencilTarget,width:f.width,height:f.height,multisampled:f.multisampled};this._id=a._nextId++;b("esri-webgl-debug")&&e.instanceCounter.incrementCount(4);h&&(e=void 0,h instanceof d?(this._colorAttachment=h,e=h.descriptor):(e=h,this._colorAttachment=new d(this._context,e)),a._validateTextureDimensions(e,
this._desc));if(l instanceof c){if(2===f.depthStencilTarget)this._stencilAttachment=l;else if(1===f.depthStencilTarget||3===f.depthStencilTarget)this._depthAttachment=l;a._validateBufferDimensions(l.descriptor,this._desc)}else l&&(f=void 0,l instanceof d?(this._depthStencilTexture=l,f=this._depthStencilTexture.descriptor):(f=l,this._depthStencilTexture=new d(this._context,f)),a._validateTextureDimensions(f,this._desc))}a.create=function(b,c){return new a(b,c)};a.createWithAttachments=function(b,c,
d,e){return new a(b,d,c,e)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof d?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};a.prototype.attachColorTexture=function(b){if(b){a._validateTextureDimensions(b.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b.glName,0)}this._colorAttachment=b}};a.prototype.detachColorTexture=
function(){var a=void 0;if(this._colorAttachment instanceof d){a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)}this._colorAttachment=null}return a};a.prototype.attachDepthStencilTexture=function(b){if(b){a._validateTextureDimensions(b.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,b.glName,0)}this._depthStencilTexture=b}};a.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return a};
a.prototype.attachDepthStencilBuffer=function(b){if(b){var c=b.descriptor;a._validateBufferDimensions(c,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===c.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,b.glName));this._depthAttachment=b}};a.prototype.detachDepthStencilBuffer=function(){var a=
this._context.gl,b=this._depthAttachment;b&&this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,1===this._desc.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,null));this._depthAttachment=null;return b};a.prototype.copyToTexture=function(a,b,c,d,e,h,p){var f=this._context;f.bindTexture(p);f.bindFramebuffer(this);f.gl.copyTexSubImage2D(3553,0,e,h,a,b,c,d)};a.prototype.readPixels=function(a,b,c,d,e,h,p){this._context.bindFramebuffer(this);
this._context.gl.readPixels(a,b,c,d,e,h,p)};a.prototype.resize=function(b,c){var f=this._desc;if(f.width!==b||f.height!==c)if(this._initialized)f.width=b,f.height=c,this._colorAttachment instanceof d?(e=this._colorAttachment,f=e.descriptor,f.width=b,f.height=c,this._colorAttachment.dispose(),this._colorAttachment=new d(this._context,f),a._validateTextureDimensions(e.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(f=this._depthStencilTexture.descriptor,
f.width=b,f.height=c,this._depthStencilTexture.dispose(),this._depthStencilTexture=new d(this._context,f)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{f.width=b;f.height=c;if(this._colorAttachment instanceof d){var e=this._colorAttachment;e.resize(b,c)}this._depthStencilTexture&&this._depthStencilTexture.resize(b,c)}};a.prototype.initialize=function(){if(this._initialized)return!1;
var a=this._context.gl;this._glName&&a.deleteFramebuffer(this._glName);var b=a.createFramebuffer(),e=this._desc;a.bindFramebuffer(a.FRAMEBUFFER,b);if(!this._colorAttachment)if(0===e.colorTarget)this._colorAttachment=new d(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});else{var h=new c(this._context,{internalFormat:32854,width:e.width,height:e.height});a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,
h.glName);this._colorAttachment=h}this._colorAttachment instanceof d&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._colorAttachment.glName,0);switch(e.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new c(this._context,{internalFormat:1===e.depthStencilTarget?33189:34041,width:e.width,height:e.height}));a.framebufferRenderbuffer(a.FRAMEBUFFER,1===e.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new c(this._context,{internalFormat:36168,width:e.width,height:e.height}));a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new d(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.TEXTURE_2D,this._depthStencilTexture.glName,0)}a.checkFramebufferStatus(a.FRAMEBUFFER);this._glName=b;return this._initialized=!0};a.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof d){var a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)}a.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(a=this._colorAttachment,b=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(a));this._colorAttachment=null};a.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,1===this._desc.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT,
a.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.STENCIL_ATTACHMENT,a.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};a._validateBufferDimensions=function(a,b){void 0!==b.width&&0<=b.width&&void 0!==b.height&&0<=b.height||(b.width=a.width,b.height=a.height)};a._validateTextureDimensions=function(a,b){void 0!==b.width&&0<=b.width&&void 0!==b.height&&0<=b.height||(b.width=a.width,b.height=a.height)};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(a,e,b){return function(){function a(c,e){this._context=
c;this._desc=e;this._glName=null;this._id=-1;c=this._context.gl;b("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++a._nextId;this._glName=c.createRenderbuffer();this._context.bindRenderbuffer(this);c.renderbufferStorage(c.RENDERBUFFER,e.internalFormat,e.width,e.height)}Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});a.prototype.resize=function(a,b){var c=this._context.gl,d=this._desc;if(d.width!==a||d.height!==b)d.width=a,d.height=b,this._context.bindRenderbuffer(this),c.renderbufferStorage(c.RENDERBUFFER,d.internalFormat,d.width,d.height)};a.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./CircleRenderer ./FadeRecorder ./FillRenderer ./LineRenderer ./SymbolRenderer ./TileInfoRenderer ../../webgl/FramebufferObject".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n){return function(){function a(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,
1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0}a.prototype.initialize=function(a,b,c){void 0===c&&(c=!0);this._SpriteMosaic=a;this._glyphMosaic=b;this._ignoreSpeed=!c;this._backgroundRenderer=new d;this._lineRenderer=new k;this._fillRenderer=new f;this._symbolRenderer=new l;this._circleRenderer=new h;this._tileInfoRenderer=new m;this._fadeRecorder=new g.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=
new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])};a.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null);this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=
null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null)};a.prototype.setStateParams=function(a,d,f){this._fadeRecorder.recordLevel(f);this._state=a;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/a.width,this._extrudeScaleVector[1]=-2/a.height,b.identity(this._extrudeMatrix),b.rotate(this._extrudeMatrix,
this._extrudeMatrix,-a.rotation*c.C_DEG_TO_RAD,this._extrudeRotateVector),b.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),b.transpose(this._extrudeMatrix,this._extrudeMatrix),b.identity(this._extrudeNoRotationMatrix),b.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),b.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=
this._state.rotation};a.prototype.drawClippingMasks=function(a,b){if(0!==b.length){a.setDepthWriteEnabled(!1);a.setDepthTestEnabled(!1);a.setStencilTestEnabled(!0);a.setBlendingEnabled(!1);a.setColorMask(!1,!1,!1,!1);a.setStencilOp(7680,7680,7681);a.setStencilWriteMask(255);a.setClearStencil(0);a.clear(a.gl.STENCIL_BUFFER_BIT);for(var c=0;c<b.length;c++){var d=b[c];d.attached&&d.visible&&(a.setStencilFunctionSeparate(1032,519,d.stencilData.reference,d.stencilData.mask),this._backgroundRenderer.renderSolidColor(a,
{u_matrix:d.tileTransform.transform,u_normalized_origin:d.tileTransform.displayCoord,u_coord_range:d.coordRange,u_depth:0,u_color:this._backgroundColor}))}a.setColorMask(!0,!0,!0,!0);a.setBlendingEnabled(!0)}};a.prototype.renderDebug=function(a,b){var c=b.key;this._backgroundColor.set([c.col%2,c.row%2,0===c.col%2&&0===c.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(a,{u_matrix:b.tileTransform.transform,u_normalized_origin:b.tileTransform.displayCoord,u_coord_range:b.coordRange,u_depth:0,
u_color:this._backgroundColor})};a.prototype.renderBucket=function(a,b,c,d,f,e,g,h){if(!(void 0!==g.minzoom&&g.minzoom>c||void 0!==g.maxzoom&&g.maxzoom<=c))switch(b.type){case 0:2!==f&&this._renderBackground(a,b,c,f,e,g,h);break;case 1:2!==f&&this._renderFill(a,b,c,f,e,g,h);break;case 2:1!==f&&3!==f||this._renderLine(a,b,c,f,e,g,h);break;case 3:2!==f&&3!==f||this._renderSymbol(a,b,c,f,d,e,g,h);break;case 4:2!==f&&3!==f||this._renderCircle(a,b,c,f,d,e,g,h)}};a.prototype.renderTileInfo=function(a,b){this._tileInfoRenderer.render(a,
b)};a.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};a.prototype.hitTest=function(a,b,c,d,f,e,g){var h=[0,0],k=[0,0],l=a.state;l.toMap(h,[0,0]);l.toMap(k,[e,e]);b=d.filter(function(a){return!(h[0]>a.bounds[2]||k[0]<a.bounds[0]||h[1]<a.bounds[3]||k[1]>a.bounds[1])});if(0===b.length)return[];b.sort(function(a,b){return a.key.level-b.key.level});c=b.length;for(d=1;d<=c;d++){var m=b[d-1];m.attached&&(m.stencilData.reference=d,m.stencilData.mask=255)}g(l,f,b);f=a.context;this._hittestFBO||
(this._hittestFBO=n.create(f,{colorTarget:0,depthStencilTarget:3,width:e,height:e}));g=f.getViewport();l=f.getBoundFramebufferObject();f.bindFramebuffer(this._hittestFBO);f.setViewport(0,0,e,e);d=f.gl;f.setDepthWriteEnabled(!0);f.setStencilWriteMask(255);f.setClearColor(1,1,1,1);f.setClearDepth(1);f.setClearStencil(0);f.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT|d.STENCIL_BUFFER_BIT);f.setDepthWriteEnabled(!1);this.drawClippingMasks(f,b);f.setBlendingEnabled(!1);f.setStencilWriteMask(0);f.setStencilOp(7680,
7680,7681);f.setDepthFunction(515);f.setDepthTestEnabled(!0);f.setDepthWriteEnabled(!0);f.setStencilTestEnabled(!0);for(d=0;d<c;d++)m=b[d],m.attached&&m.doRender(a);f.setStencilTestEnabled(!1);f.setDepthTestEnabled(!1);this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*e*e),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer));this._hittestFBO.readPixels(0,0,e,e,6408,5121,this._readbackBuffer);a=new Set;e*=e;b=this._readbackBuffer32[Math.round(e/2)];4294967295!==b&&a.add(b);
for(d=0;d<e;d++)b=this._readbackBuffer32[d],4294967295!==b&&a.add(b);f.bindFramebuffer(l);f.setViewport(g.x,g.y,g.width,g.height);var p=[];a.forEach(function(a){p.push(a)});return p};a.prototype._renderBackground=function(a,b,c,d,f,e,g){this._backgroundRenderer.render(a,b,c,d,f,e,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,g)};a.prototype._renderLine=function(a,b,c,d,f,e,g){this._lineRenderer.render(a,b,c,d,this._state,f,e,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,
g)};a.prototype._renderFill=function(a,b,c,d,f,e,g){this._fillRenderer.render(a,b,c,this._state.rotation,d,f,e,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,g)};a.prototype._renderCircle=function(a,b,c,d,f,e,g,h){var k=!0;f===e.key.level&&(k=!1);a.setStencilTestEnabled(k);this._circleRenderer.render(a,b,c,d,this._state.rotation,e,g,this._extrudeMatrix,h)};a.prototype._renderSymbol=function(a,b,c,d,f,e,g,h){var k=!0;f===e.key.level&&(k=!1);a.setStencilTestEnabled(k);this._symbolRenderer.render(a,
b,c,d,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),e,g,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,h)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../MemoryBuffer ./rendererUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l){return function(){function a(){this._solidAttributeLocations={a_pos:0};this._attributeLocations={a_pos:0,a_id:1};this._patternMatrix=b.create();this._color=c.create();this._rendererInitialized=this._solidrendererInitialized=!1;this._color.set([1,0,0,1])}a.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=
null)};a.prototype.renderSolidColor=function(a,b){this._solidrendererInitialized||this._initializeSolidRenderer(a);a.bindVAO(this._solidVertexArrayObject);var c=this._shaderVariations.getProgram([!1,!1],void 0,void 0,this._solidAttributeLocations);a.bindProgram(c);c.setUniformMatrix4fv("u_transformMatrix",b.u_matrix);c.setUniform2fv("u_normalized_origin",b.u_normalized_origin);c.setUniform1f("u_coord_range",b.u_coord_range||4096);c.setUniform1f("u_depth",b.u_depth||0);c.setUniform4fv("u_color",b.u_color||
this._color);a.drawArrays(5,0,4);a.bindVAO()};a.prototype.render=function(a,c,d,f,e,g,k,l,m){this._rendererInitialized||this._initialize(a);var n=g.getPaintValue("background-color",d);m*=g.getPaintValue("background-opacity",d);var p=g.getPaintValue("background-pattern",d),u=void 0!==p,q=n[3]*m,t=u||1>q;if(!t||0!==f)if(t||1!==f){t=3===f;f=this._shaderVariations.getProgram([u,t],void 0,void 0,this._attributeLocations);a.bindVAO(this._vertexArrayObject);a.bindProgram(f);f.setUniform1f("u_coord_range",
e.coordRange);f.setUniform1f("u_depth",g.z||0);f.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform);f.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);if(u){g=k.getMosaicItemPosition(p,!0);if(!g)return;d=512*Math.pow(2,Math.floor(d)-e.key.level)*l;b.identity(this._patternMatrix);e=d/g.size[1];this._patternMatrix[0]=d/g.size[0];this._patternMatrix[4]=e;k.bind(a,9729,0);f.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);f.setUniform1f("u_opacity",m);f.setUniform2f("u_pattern_tl",
g.tl[0],g.tl[1]);f.setUniform2f("u_pattern_br",g.br[0],g.br[1]);f.setUniform1i("u_texture",0)}else this._color[0]=q*n[0],this._color[1]=q*n[1],this._color[2]=q*n[2],this._color[3]=q,f.setUniform4fv("u_color",this._color);t&&(c=h.int32To4Bytes(c.layerID),f.setUniform4f("u_id",c[0],c[1],c[2],c[3]));a.drawArrays(5,0,4);a.bindVAO()}};a.prototype._initializeSolidRenderer=function(a){if(this._solidrendererInitialized)return!0;if(!this._shaderVariations){var b=new k("background",["backgroundVS","backgroundFS"],
[],g,a);b.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");b.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=b}b=new Int8Array([0,0,1,0,0,1,1,1]);b=f.createVertex(a,35044,b);this._solidVertexArrayObject=new l(a,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:b});return this._solidrendererInitialized=!0};a.prototype._initialize=function(a){if(this._rendererInitialized)return!0;if(!this._shaderVariations){var b=new k("background",
["backgroundVS","backgroundFS"],[],g,a);b.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");b.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=b}b=[];b.push(d.i1616to32(0,0));b.push(d.i1616to32(1,0));b.push(d.i1616to32(0,1));b.push(d.i1616to32(1,1));b=new Uint32Array(b);b=f.createVertex(a,35044,b);this._vertexArrayObject=new l(a,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:b});return this._rendererInitialized=!0};return a}()})},
"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],function(a){var e={create:function(){var b=new a.ARRAY_TYPE(9);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},fromMat4:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[4];a[4]=c[5];a[5]=c[6];a[6]=c[8];a[7]=c[9];a[8]=c[10];return a},clone:function(b){var c=new a.ARRAY_TYPE(9);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];return c},copy:function(a,
c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a},fromValues:function(b,c,d,e,g,f,k,l,m){var h=new a.ARRAY_TYPE(9);h[0]=b;h[1]=c;h[2]=d;h[3]=e;h[4]=g;h[5]=f;h[6]=k;h[7]=l;h[8]=m;return h},set:function(a,c,d,e,g,f,k,l,m,n){a[0]=c;a[1]=d;a[2]=e;a[3]=g;a[4]=f;a[5]=k;a[6]=l;a[7]=m;a[8]=n;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,c){if(a===c){var b=c[1],e=c[2],g=c[5];
a[1]=c[3];a[2]=c[6];a[3]=b;a[5]=c[7];a[6]=e;a[7]=g}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a},invert:function(a,c){var b=c[0],e=c[1],g=c[2],f=c[3],k=c[4],l=c[5],m=c[6],n=c[7];c=c[8];var p=c*k-l*n,q=-c*f+l*m,t=n*f-k*m,r=b*p+e*q+g*t;if(!r)return null;r=1/r;a[0]=p*r;a[1]=(-c*e+g*n)*r;a[2]=(l*e-g*k)*r;a[3]=q*r;a[4]=(c*b-g*m)*r;a[5]=(-l*b+g*f)*r;a[6]=t*r;a[7]=(-n*b+e*m)*r;a[8]=(k*b-e*f)*r;return a},adjoint:function(a,c){var b=c[0],e=c[1],g=
c[2],f=c[3],k=c[4],l=c[5],m=c[6],n=c[7];c=c[8];a[0]=k*c-l*n;a[1]=g*n-e*c;a[2]=e*l-g*k;a[3]=l*m-f*c;a[4]=b*c-g*m;a[5]=g*f-b*l;a[6]=f*n-k*m;a[7]=e*m-b*n;a[8]=b*k-e*f;return a},determinant:function(a){var b=a[3],d=a[4],e=a[5],g=a[6],f=a[7],k=a[8];return a[0]*(k*d-e*f)+a[1]*(-k*b+e*g)+a[2]*(f*b-d*g)},multiply:function(a,c,d){var b=c[0],e=c[1],f=c[2],k=c[3],l=c[4],m=c[5],n=c[6],p=c[7];c=c[8];var q=d[0],t=d[1],r=d[2],u=d[3],v=d[4],w=d[5],A=d[6],z=d[7];d=d[8];a[0]=q*b+t*k+r*n;a[1]=q*e+t*l+r*p;a[2]=q*f+t*
m+r*c;a[3]=u*b+v*k+w*n;a[4]=u*e+v*l+w*p;a[5]=u*f+v*m+w*c;a[6]=A*b+z*k+d*n;a[7]=A*e+z*l+d*p;a[8]=A*f+z*m+d*c;return a}};e.mul=e.multiply;e.translate=function(a,c,d){var b=c[0],e=c[1],f=c[2],k=c[3],l=c[4],m=c[5],n=c[6],p=c[7];c=c[8];var q=d[0];d=d[1];a[0]=b;a[1]=e;a[2]=f;a[3]=k;a[4]=l;a[5]=m;a[6]=q*b+d*k+n;a[7]=q*e+d*l+p;a[8]=q*f+d*m+c;return a};e.rotate=function(a,c,d){var b=c[0],e=c[1],f=c[2],k=c[3],l=c[4],m=c[5],n=c[6],p=c[7];c=c[8];var q=Math.sin(d);d=Math.cos(d);a[0]=d*b+q*k;a[1]=d*e+q*l;a[2]=
d*f+q*m;a[3]=d*k-q*b;a[4]=d*l-q*e;a[5]=d*m-q*f;a[6]=n;a[7]=p;a[8]=c;return a};e.scale=function(a,c,d){var b=d[0];d=d[1];a[0]=b*c[0];a[1]=b*c[1];a[2]=b*c[2];a[3]=d*c[3];a[4]=d*c[4];a[5]=d*c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a};e.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=c[0];a[7]=c[1];a[8]=1;return a};e.fromRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=b;a[2]=0;a[3]=-b;a[4]=c;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};e.fromScaling=function(a,
c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=c[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};e.fromMat2d=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=0;a[3]=c[2];a[4]=c[3];a[5]=0;a[6]=c[4];a[7]=c[5];a[8]=1;return a};e.fromQuat=function(a,c){var b=c[0],e=c[1],g=c[2];c=c[3];var f=b+b,k=e+e,l=g+g,b=b*f,m=e*f,e=e*k,n=g*f,p=g*k,g=g*l,f=c*f,k=c*k;c*=l;a[0]=1-e-g;a[3]=m-c;a[6]=n+k;a[1]=m+c;a[4]=1-b-g;a[7]=p-f;a[2]=n-k;a[5]=p+f;a[8]=1-b-e;return a};e.normalFromMat4=function(a,c){var b=c[0],e=c[1],g=c[2],f=c[3],k=c[4],l=c[5],
m=c[6],n=c[7],p=c[8],q=c[9],t=c[10],r=c[11],u=c[12],v=c[13],w=c[14];c=c[15];var A=b*l-e*k,z=b*m-g*k,x=b*n-f*k,y=e*m-g*l,C=e*n-f*l,D=g*n-f*m,E=p*v-q*u,I=p*w-t*u,p=p*c-r*u,H=q*w-t*v,q=q*c-r*v,t=t*c-r*w,r=A*t-z*q+x*H+y*p-C*I+D*E;if(!r)return null;r=1/r;a[0]=(l*t-m*q+n*H)*r;a[1]=(m*p-k*t-n*I)*r;a[2]=(k*q-l*p+n*E)*r;a[3]=(g*q-e*t-f*H)*r;a[4]=(b*t-g*p+f*I)*r;a[5]=(e*p-b*q-f*E)*r;a[6]=(v*D-w*C+c*y)*r;a[7]=(w*x-u*D-c*z)*r;a[8]=(u*C-v*x+c*A)*r;return a};e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};e.add=function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];a[4]=c[4]+d[4];a[5]=c[5]+d[5];a[6]=c[6]+d[6];a[7]=c[7]+d[7];a[8]=c[8]+d[8];return a};e.subtract=function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=
c[3]-d[3];a[4]=c[4]-d[4];a[5]=c[5]-d[5];a[6]=c[6]-d[6];a[7]=c[7]-d[7];a[8]=c[8]-d[8];return a};e.sub=e.subtract;e.multiplyScalar=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*d;return a};e.multiplyScalarAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;a[3]=c[3]+d[3]*e;a[4]=c[4]+d[4]*e;a[5]=c[5]+d[5]*e;a[6]=c[6]+d[6]*e;a[7]=c[7]+d[7]*e;a[8]=c[8]+d[8]*e;return a};e.exactEquals=function(a,c){return a[0]===
c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};e.equals=function(b,c){var d=b[0],e=b[1],g=b[2],f=b[3],k=b[4],l=b[5],m=b[6],n=b[7],p=b[8],q=c[0],t=c[1],r=c[2],u=c[3],v=c[4],w=c[5];b=b[6];var A=c[7];c=c[8];return Math.abs(d-q)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(e-t)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(g-r)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(r))&&Math.abs(f-u)<=a.EPSILON*Math.max(1,Math.abs(f),
Math.abs(u))&&Math.abs(k-v)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(v))&&Math.abs(l-w)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(m-b)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(b))&&Math.abs(n-A)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(p-c)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(c))};return e})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(a,e){return function(){function a(a){this._array=[];this._stride=
a}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=
function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,b){return 65535&a|b<<16};a.i8888to32=function(a,b,e,g){return a&255|(b&255)<<8|(e&255)<<16|g<<24};a.i8816to32=function(a,b,e){return a&255|(b&255)<<8|e<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/rendererUtils":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});var b=new Uint32Array(1),c=
new Uint8Array(b.buffer);e.int32To4Bytes=function(a){b[0]=a|0;return[c[0],c[1],c[2],c[3]]}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports dojo/text!../../2d/engine/webgl/shaders/tileInfo.xml dojo/text!./shaders/backgroundShaders.xml dojo/text!./shaders/circleShaders.xml dojo/text!./shaders/fillShaders.xml dojo/text!./shaders/iconShaders.xml dojo/text!./shaders/lineShaders.xml dojo/text!./shaders/outlineShaders.xml dojo/text!./shaders/textShaders.xml ../../webgl/ShaderSnippets".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m){a=new m;m.parse(c,a);m.parse(b,a);m.parse(h,a);m.parse(k,a);m.parse(f,a);m.parse(g,a);m.parse(l,a);m.parse(d,a);return a})},"esri/layers/vectorTiles/views/vectorTiles/renderers/CircleRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(a,e,b,c,
d,h,g,f,k,l){return function(){function a(){this._attributeLocations={a_pos:0,a_color:1,a_stroke_color:2,a_data:3};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=c.create();this._color=d.create();this._strokeColor=d.create()}a.prototype.dispose=function(){};a.prototype.render=function(a,c,d,f,e,k,l,m,A){if(0!==c.triangleElementCount){this._initialized||this._initialize(a);var n=l.hasDataDrivenRadius?1:l.getPaintValue("circle-radius",d),p=l.hasDataDrivenColor?[1,1,1,1]:l.getPaintValue("circle-color",
d),u=l.hasDataDrivenOpacity?1:l.getPaintValue("circle-opacity",d),q=l.hasDataDrivenStrokeWidth?1:l.getPaintValue("circle-stroke-width",d),t=l.hasDataDrivenStrokeColor?[1,1,1,1]:l.getPaintValue("circle-stroke-color",d),r=l.hasDataDrivenStrokeOpacity?1:l.getPaintValue("circle-stroke-opacity",d),w=l.hasDataDrivenBlur?0:l.getPaintValue("circle-blur",d),u=u*p[3]*A;this._color[0]=u*p[0];this._color[1]=u*p[1];this._color[2]=u*p[2];this._color[3]=u;u=r*t[3]*A;this._strokeColor[0]=u*t[0];this._strokeColor[1]=
u*t[1];this._strokeColor[2]=u*t[2];this._strokeColor[3]=u;A=k.tileTransform.transform;p=l.getPaintValue("circle-translate",d);if(0!==p[0]||0!==p[1])b.copy(this._viewProjMat,k.tileTransform.transform),A=p[0],p=p[1],r=t=0,r=(1<<k.key.level)/Math.pow(2,d)*(k.coordRange/512),1===l.getPaintValue("circle-translate-anchor",d)?(e*=-h.C_DEG_TO_RAD,d=Math.sin(e),e=Math.cos(e),t=r*(A*e-p*d),r*=A*d+p*e):(t=r*A,r*=p),this._offsetVector[0]=t,this._offsetVector[1]=r,this._offsetVector[2]=0,b.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector),A=this._viewProjMat;if(d=this._getCircleVAO(a,k))a.bindVAO(d),d=3===f,f=this._shaderVariations.getProgram([d],void 0,void 0,this._attributeLocations),a.bindProgram(f),f.setUniformMatrix4fv("u_transformMatrix",A),f.setUniformMatrix4fv("u_extrudeMatrix",m),f.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),f.setUniform1f("u_depth",l.z),f.setUniform1f("u_radius",n),f.setUniform4fv("u_color",this._color),f.setUniform1f("u_blur",w),f.setUniform1f("u_stroke_width",
q),f.setUniform4fv("u_stroke_color",this._strokeColor),f.setUniform1f("u_antialiasingWidth",1.2),d&&(k=g.int32To4Bytes(c.layerID),f.setUniform4f("u_id",k[0],k[1],k[2],k[3])),a.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart),a.bindVAO()}};a.prototype._initialize=function(a){if(this._initialized)return!0;a=new k("circle",["circleVS","circleFS"],[],f,a);a.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=a;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};a.prototype._getCircleVAO=function(a,b){if(b.circleVertexArrayObject)return b.circleVertexArrayObject;var c=b.circleVertexBuffer,d=b.circleIndexBuffer;if(!c||!d)return null;b.circleVertexArrayObject=
new l(a,this._attributeLocations,this._vertexAttributes,{geometry:c},d);return b.circleVertexArrayObject};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});(function(){return function(a,b){this.level=a;this.now=b}})();a=function(){return function(a,b,e,g){this.fadeSpeed=a;this.minfadeLevel=b;this.maxfadeLevel=e;this.fadeChange=g}}();e.FadeProperties=
a;a=function(){function a(a){void 0===a&&(a=300);this._levelSnapshots=[];this._duration=a}a.prototype.recordLevel=function(a){var c=b(),d=this._levelSnapshots;0===d.length&&(d.push({level:a,now:0}),d.push({level:a,now:0}));2!==d.length&&d[0].level===a||d.push({level:a,now:c})};a.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var a=this._duration,b=this._levelSnapshots,c=b.length,f=b[c-1],e=-1;c>e+1&&b[e+1].now+a<f.now;)e++;for(0>e&&(e=0);e<c;e++)if(b[e].level!==f.level)return!0;
return!1};a.prototype.getFadeValues=function(a){void 0===a&&(a=!1);for(var c=this._duration,d=b(),f=this._levelSnapshots;3<f.length&&f[1].now+c<d;)f.shift();f[1].now+c<d&&(f[0].level=f[1].level);var e=f[0].level,l=f[f.length-1],m=l.level,n=Math.min(e,m),e=Math.max(e,m),f=(l.level-f[1].level)/((l.now-f[1].now)/c);return a?{fadeSpeed:0,minfadeLevel:n,maxfadeLevel:e,fadeChange:0}:{fadeSpeed:f,minfadeLevel:n,maxfadeLevel:e,fadeChange:(d-l.now)/c*f}};return a}();e.FadeRecorder=a})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m){var n=1/65536;return function(){function a(){this._fillAttributeLocations={a_pos:0};this._fillAttributeLocationsDD={a_pos:0,a_color:1};this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._outlineAttributeLocationsDD={a_pos:0,a_offset:1,a_xnormal:2,a_color:3};this._initialized=!1;this._viewProjMat=c.create();this._offsetVector=d.create();this._patternMatrix=b.create();this._color=h.create();this._outlineColor=h.create()}a.prototype.dispose=function(){};
a.prototype.render=function(a,b,d,e,h,k,l,m,p,y,C){if(0!==b.triangleElementCount){this._initialized||this._initialize(a);var u=void 0!==l.getPaintValue("fill-pattern",d),q=l.hasDataDrivenColor?[1,1,1,1]:l.getPaintValue("fill-color",d),t=l.hasDataDrivenOpacity?1:l.getPaintValue("fill-opacity",d),r=t*q[3]*C;this._color[0]=r*q[0];this._color[1]=r*q[1];this._color[2]=r*q[2];this._color[3]=r;var q=3===h,w;q&&(w=f.int32To4Bytes(b.layerID));var r=k.tileTransform.transform,v=k.coordRange/512,x=l.getPaintValue("fill-translate",
d);if(0!==x[0]||0!==x[1]){c.copy(this._viewProjMat,k.tileTransform.transform);var r=x[0],x=x[1],A=0,z=0,v=(1<<k.key.level)/Math.pow(2,d)*v;1===l.getPaintValue("fill-translate-anchor",d)?(A=-g.C_DEG_TO_RAD*e,e=Math.sin(A),z=Math.cos(A),A=v*(r*z-x*e),z=v*(r*e+x*z)):(A=v*r,z=v*x);this._offsetVector[0]=A;this._offsetVector[1]=z;this._offsetVector[2]=0;c.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);r=this._viewProjMat}this._drawFill(a,b,d,h,k,l,m,r,y,C,q,w);if(l.getPaintValue("fill-antialias",
d)&&!u&&0<b.outlineElementCount&&(1===h||3===h)){h=l.hasDataDrivenOutline;if(l.outlineUsesFillColor){if(1!==this._color[3])return;this._outlineColor[0]=this._color[0];this._outlineColor[1]=this._color[1];this._outlineColor[2]=this._color[2];this._outlineColor[3]=this._color[3]}else d=l.hasDataDrivenOutlineColor?[1,1,1,1]:l.getPaintValue("fill-outline-color",d),C*=t*d[3],this._outlineColor[0]=C*d[0],this._outlineColor[1]=C*d[1],this._outlineColor[2]=C*d[2],this._outlineColor[3]=C;y=.75/y;if(C=this._getOutlineVAO(a,
k,h))a.bindVAO(C),C=this._outlineShaderVariations.getProgram([h,q],void 0,void 0,h?this._outlineAttributeLocationsDD:this._outlineAttributeLocations),a.bindProgram(C),C.setUniformMatrix4fv("u_transformMatrix",r),C.setUniformMatrix4fv("u_extrudeMatrix",p),C.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),C.setUniform1f("u_depth",l.z+n),C.setUniform1f("u_outline_width",y),C.setUniform4fv("u_color",this._outlineColor),q&&C.setUniform4f("u_id",w[0],w[1],w[2],w[3]),a.drawElements(4,b.outlineElementCount,
5125,12*b.outlineElementStart),a.bindVAO()}}};a.prototype._initialize=function(a){if(this._initialized)return!0;var b=new l("fill",["fillVS","fillFS"],[],k,a);b.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");b.addDefine("DD","DD",[!0,!1],"DD");b.addDefine("ID","ID",[!0,!0],"ID");this._fillShaderVariations=b;this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,
stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]};a=new l("outline",["outlineVS","outlineFS"],[],k,a);a.addDefine("DD","DD",[!0,!1],"DD");a.addDefine("ID","ID",[!0,!0],"ID");this._outlineShaderVariations=a;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,
stride:8,normalized:!1,divisor:0}]};this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]};return this._initialized=!0};a.prototype._drawFill=function(a,c,d,f,e,g,h,k,l,m,p,D){var u=g.getPaintValue("fill-pattern",
d),q=void 0!==u,t=g.hasDataDrivenOpacity?1:m*g.getPaintValue("fill-opacity",d),r=g.hasDataDrivenColor?[1,1,1,1]:g.getPaintValue("fill-color",d);m*=t*r[3];this._color[0]=m*r[0];this._color[1]=m*r[1];this._color[2]=m*r[2];this._color[3]=m;r=g.hasDataDrivenFill;t=!1;!q&&(r?0:1===m)&&(t=!0);if(!q||0!==f)if(!t||1!==f)if(q||t||0!==f)if(f=this._getFillVAO(a,e,r))a.bindVAO(f),f=this._fillShaderVariations.getProgram([q,r,p],void 0,void 0,r?this._fillAttributeLocationsDD:this._fillAttributeLocations),a.bindProgram(f),
q&&(u=h.getMosaicItemPosition(u,!0))&&(d=e.coordRange/512/Math.pow(2,Math.round(d)-e.key.level)/l,b.identity(this._patternMatrix),l=1/(u.size[1]*d),this._patternMatrix[0]=1/(u.size[0]*d),this._patternMatrix[4]=l,h.bind(a,9729,u.page,1),f.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),f.setUniform2f("u_pattern_tl",u.tl[0],u.tl[1]),f.setUniform2f("u_pattern_br",u.br[0],u.br[1]),f.setUniform1i("u_texture",1)),f.setUniformMatrix4fv("u_transformMatrix",k),f.setUniform2fv("u_normalized_origin",
e.tileTransform.displayCoord),f.setUniform1f("u_depth",g.z+n),f.setUniform4fv("u_color",this._color),p&&f.setUniform4f("u_id",D[0],D[1],D[2],D[3]),a.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart),a.bindVAO()};a.prototype._getFillVAO=function(a,b,c){if(c){if(b.fillDDVertexArrayObject)return b.fillDDVertexArrayObject;c=b.fillDDVertexBuffer;var d=b.fillIndexBuffer;if(!c||!d)return null;b.fillDDVertexArrayObject=new m(a,this._fillAttributeLocationsDD,this._fillVertexAttributesDD,
{geometry:c},d);return b.fillDDVertexArrayObject}if(b.fillVertexArrayObject)return b.fillVertexArrayObject;c=b.fillVertexBuffer;d=b.fillIndexBuffer;if(!c||!d)return null;b.fillVertexArrayObject=new m(a,this._fillAttributeLocations,this._fillVertexAttributes,{geometry:c},d);return b.fillVertexArrayObject};a.prototype._getOutlineVAO=function(a,b,c){if(c){if(b.outlineDDVertexArrayObject)return b.outlineDDVertexArrayObject;c=b.outlineDDVertexBuffer;var d=b.outlineIndexBuffer;if(!c||!d)return null;b.outlineDDVertexArrayObject=
new m(a,this._outlineAttributeLocationsDD,this._outlineVertexAttributesDD,{geometry:c},d);return b.outlineDDVertexArrayObject}if(b.outlineVertexArrayObject)return b.outlineVertexArrayObject;c=b.outlineVertexBuffer;d=b.outlineIndexBuffer;if(!c||!d)return null;b.outlineVertexArrayObject=new m(a,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:c},d);return b.outlineVertexArrayObject};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec2 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m){return function(){function a(){this._attributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._attributeLocationsDD={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=d.create();this._color=h.create();this._dashArray=c.create()}a.prototype.dispose=function(){};a.prototype.render=function(a,c,d,e,h,k,l,m,n,x,y){if(0!==c.triangleElementCount){this._initialized||
this._initialize(a);var p=k.tileTransform.transform,u=k.coordRange/512,q=l.getPaintValue("line-translate",d);if(0!==q[0]||0!==q[1]){b.copy(this._viewProjMat,k.tileTransform.transform);var p=q[0],q=q[1],t=0,r=0,r=(1<<k.key.level)/Math.pow(2,d)*u;h=h.rotation;if(1===l.getPaintValue("line-translate-anchor",d)){t=-g.C_DEG_TO_RAD*h;h=Math.sin(t);var w=Math.cos(t),t=r*(p*w-q*h),r=r*(p*h+q*w)}else t=r*p,r*=q;this._offsetVector[0]=t;this._offsetVector[1]=r;this._offsetVector[2]=0;b.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector);p=this._viewProjMat}q=l.getPaintValue("line-pattern",d);r=void 0!==q;x=1/x;h=l.getPaintValue("line-blur",d);var w=l.hasDataDrivenColor?[1,1,1,1]:l.getPaintValue("line-color",d),v=l.hasDataDrivenOpacity?1:l.getPaintValue("line-opacity",d),t=l.hasDataDrivenWidth?1:l.getPaintValue("line-width",d);y*=v*w[3];this._color[0]=y*w[0];this._color[1]=y*w[1];this._color[2]=y*w[2];this._color[3]=y;y=l.hasDataDrivenLine;e=3===e;var z;e&&(z=f.int32To4Bytes(c.layerID));if(w=
this._getLineVAO(a,k,y)){a.bindVAO(w);y=this._shaderVariations.getProgram([r,y,e],void 0,void 0,y?this._attributeLocationsDD:this._attributeLocations);a.bindProgram(y);y.setUniformMatrix4fv("u_transformMatrix",p);y.setUniformMatrix4fv("u_extrudeMatrix",n);y.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord);y.setUniform1f("u_depth",l.z);y.setUniform1f("u_blur",h);y.setUniform1f("u_antialiasing",x);y.setUniform4fv("u_color",this._color);y.setUniform1f("u_width",t);e&&y.setUniform4f("u_id",
z[0],z[1],z[2],z[3]);if(r){if(d=m.getMosaicItemPosition(q,!0))m.bind(a,9729,d.page,1),y.setUniform2f("u_pattern_tl",d.tl[0],d.br[1]),y.setUniform2f("u_pattern_br",d.br[0],d.tl[1]),y.setUniform2f("u_spriteSize",u*d.size[0],d.size[1]),y.setUniform1i("u_texture",1)}else m=l.getPaintValue("line-dasharray",d),2>m.length&&(m=[1,-1]),this._dashArray[0]=u*m[0],this._dashArray[1]=u*m[1],y.setUniform2fv("u_dasharray",this._dashArray);a.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart);a.bindVAO()}}};
a.prototype._initialize=function(a){if(this._initialized)return!0;a=new l("line",["lineVS","lineFS"],[],k,a);a.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");a.addDefine("DD","DD",[!0,!1],"DD");a.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=a;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,
offset:8,stride:12,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]};return this._initialized=
!0};a.prototype._getLineVAO=function(a,b,c){if(c){if(b.lineDDVertexArrayObject)return b.lineDDVertexArrayObject;c=b.lineDDVertexBuffer;var d=b.lineIndexBuffer;if(!c||!d)return null;b.lineDDVertexArrayObject=new m(a,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:c},d);return b.lineDDVertexArrayObject}if(b.lineVertexArrayObject)return b.lineVertexArrayObject;c=b.lineVertexBuffer;d=b.lineIndexBuffer;if(!c||!d)return null;b.lineVertexArrayObject=new m(a,this._attributeLocations,this._vertexAttributes,
{geometry:c},d);return b.lineVertexArrayObject};return a}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(a){var e={create:function(){var b=new a.ARRAY_TYPE(2);b[0]=0;b[1]=0;return b},clone:function(b){var c=new a.ARRAY_TYPE(2);c[0]=b[0];c[1]=b[1];return c},fromValues:function(b,c){var d=new a.ARRAY_TYPE(2);d[0]=b;d[1]=c;return d},copy:function(a,c){a[0]=c[0];a[1]=c[1];return a},set:function(a,c,d){a[0]=c;a[1]=d;return a},add:function(a,c,d){a[0]=c[0]+
d[0];a[1]=c[1]+d[1];return a},subtract:function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];return a}};e.sub=e.subtract;e.multiply=function(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];return a};e.mul=e.multiply;e.divide=function(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];return a};e.div=e.divide;e.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);return a};e.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);return a};e.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);return a};
e.max=function(a,c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);return a};e.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);return a};e.scale=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;return a};e.scaleAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;return a};e.distance=function(a,c){var b=c[0]-a[0];a=c[1]-a[1];return Math.sqrt(b*b+a*a)};e.dist=e.distance;e.squaredDistance=function(a,c){var b=c[0]-a[0];a=c[1]-a[1];return b*b+a*a};e.sqrDist=e.squaredDistance;e.length=
function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};e.len=e.length;e.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};e.sqrLen=e.squaredLength;e.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};e.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];return a};e.normalize=function(a,c){var b=c[0],e=c[1],b=b*b+e*e;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b);return a};e.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};e.cross=function(a,c,d){c=c[0]*d[1]-c[1]*d[0];a[0]=a[1]=0;a[2]=c;return a};
e.lerp=function(a,c,d,e){var b=c[0];c=c[1];a[0]=b+e*(d[0]-b);a[1]=c+e*(d[1]-c);return a};e.random=function(b,c){c=c||1;var d=2*a.RANDOM()*Math.PI;b[0]=Math.cos(d)*c;b[1]=Math.sin(d)*c;return b};e.transformMat2=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[2]*c;a[1]=d[1]*b+d[3]*c;return a};e.transformMat2d=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[2]*c+d[4];a[1]=d[1]*b+d[3]*c+d[5];return a};e.transformMat3=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[3]*c+d[6];a[1]=d[1]*b+d[4]*c+d[7];return a};
e.transformMat4=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[4]*c+d[12];a[1]=d[1]*b+d[5]*c+d[13];return a};e.forEach=function(){var a=e.create();return function(b,d,e,g,f,k){d||(d=2);e||(e=0);for(g=g?Math.min(g*d+e,b.length):b.length;e<g;e+=d)a[0]=b[e],a[1]=b[e+1],f(a,a,k),b[e]=a[0],b[e+1]=a[1];return b}}();e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};e.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]};e.equals=function(b,c){var d=b[0];b=b[1];var e=c[0];c=c[1];return Math.abs(d-
e)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(e))&&Math.abs(b-c)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))};return e})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer","./SDFRenderer"],function(a,e,b,c){return function(){function a(){this._iconRenderer=new b;this._sdfRenderer=new c}a.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),
this._sdfRenderer=null)};a.prototype.render=function(a,b,c,d,e,m,n,p,q,t,r,u,v,w){b.hasData()&&(0<b.markerPerPageElementsMap.size&&this._iconRenderer.render(a,b,c,d,e,m,n,p,q,r,u,w),0<b.glyphPerPageElementsMap.size&&this._sdfRenderer.render(a,b,c,d,e,m,n,p,t,r,u,v,w))};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l){return function(){function a(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=c.create();this._extrudeMat=b.create();this._color=d.create()}a.prototype.dispose=function(){};a.prototype.render=function(a,c,d,f,e,k,l,m,A,z,x,y){var n=this;
this._initialized||this._initialize(a);var p=m.hasDataDrivenIconSize?1:m.getLayoutValue("icon-size",d),u=m.hasDataDrivenIconColor?[1,1,1,1]:m.getPaintValue("icon-color",d),q=m.hasDataDrivenIconOpacity?1:m.getPaintValue("icon-opacity",d);y*=u[3]*q;this._color[0]=y*u[0];this._color[1]=y*u[1];this._color[2]=y*u[2];this._color[3]=y;u=m.getLayoutValue("icon-rotation-alignment",d);2===u&&(u=1===m.getLayoutValue("symbol-placement",d)?0:1);var t=0===u;y=c.isSDF;q=m.hasDataDrivenIcon;f=3===f;var u=h.degToByte(e),
r=l.tileTransform.transform,w=m.getPaintValue("icon-translate",d);if(0!==w[0]||0!==w[1]){b.copy(this._viewProjMat,l.tileTransform.transform);var r=w[0],w=w[1],v=0,R=0,R=(1<<l.key.level)/Math.pow(2,d)*(l.coordRange/512);if(1===m.getPaintValue("icon-translate-anchor",d)){v=-h.C_DEG_TO_RAD*e;e=Math.sin(v);var X=Math.cos(v),v=R*(r*X-w*e),R=R*(r*e+w*X)}else v=R*r,R*=w;this._offsetVector[0]=v;this._offsetVector[1]=R;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
r=this._viewProjMat}t?b.copy(this._extrudeMat,z):b.copy(this._extrudeMat,x);if(z=this._getIconVAO(a,l,q)){a.bindVAO(z);var K=this._shaderVariations.getProgram([y,q,f],void 0,void 0,q?this._attributeLocationsDD:this._attributeLocations);a.bindProgram(K);y&&(z=m.getPaintValue("icon-halo-color",d),x=m.getPaintValue("icon-halo-width",d),K.setUniform4f("u_outlineColor",z[0],z[1],z[2],z[3]),K.setUniform1f("u_outlineSize",x));K.setUniformMatrix4fv("u_transformMatrix",r);K.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);K.setUniform2fv("u_normalized_origin",l.tileTransform.displayCoord);K.setUniform1f("u_depth",m.z);K.setUniform1f("u_mapRotation",u);K.setUniform1f("u_keepUpright",0);K.setUniform1f("u_level",10*d);K.setUniform1f("u_fadeSpeed",10*k.fadeSpeed);K.setUniform1f("u_minfadeLevel",10*k.minfadeLevel);K.setUniform1f("u_maxfadeLevel",10*k.maxfadeLevel);K.setUniform1f("u_fadeChange",10*(d+k.fadeChange));K.setUniform1i("u_texture",1);K.setUniform1f("u_size",p);K.setUniform4fv("u_color",this._color);
f&&(d=g.int32To4Bytes(c.layerID),K.setUniform4f("u_id",d[0],d[1],d[2],d[3]));c.markerPerPageElementsMap.forEach(function(b,c){n._spritesTextureSize[0]=A.getWidth(c)/4;n._spritesTextureSize[1]=A.getHeight(c)/4;K.setUniform2fv("u_mosaicSize",n._spritesTextureSize);A.bind(a,9729,c,1);a.drawElements(4,b[1],5125,12*b[0])});a.bindVAO()}};a.prototype._initialize=function(a){if(this._initialized)return!0;a=new k("icon",["iconVS","iconFS"],[],f,a);a.addDefine("SDF","SDF",[!0,!0],"SDF");a.addDefine("DD","DD",
[!0,!1],"DD");a.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=a;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,
stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};a.prototype._getIconVAO=function(a,
b,c){if(c){if(b.iconDDVertexArrayObject)return b.iconDDVertexArrayObject;c=b.iconDDVertexBuffer;var d=b.iconIndexBuffer;if(!c||!d)return null;b.iconDDVertexArrayObject=new l(a,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:c},d);return b.iconDDVertexArrayObject}if(b.iconVertexArrayObject)return b.iconVertexArrayObject;c=b.iconVertexBuffer;d=b.iconIndexBuffer;if(!c||!d)return null;b.iconVertexArrayObject=new l(a,this._attributeLocations,this._vertexAttributes,{geometry:c},d);return b.iconVertexArrayObject};
return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(a,e,b,c,d,h,g,f,k,l,m){var n=1/65536;return function(){function a(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};
this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._initialized=!1;this._viewProjMat=c.create();this._offsetVector=d.create();this._extrudeMat=c.create();this._haloColor=h.create();this._sdfColor=h.create();this._scaleVec=d.create()}a.prototype.dispose=function(){};a.prototype.render=function(a,d,e,h,k,l,m,p,x,y,C,D,E){var u=this;if(!b("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(a);var q=g.degToByte(k),t=p.getLayoutValue("text-rotation-alignment",
e);2===t&&(t=1===p.getLayoutValue("symbol-placement",e)?0:1);var r=0===t,t=p.getLayoutValue("text-keep-upright",e)&&r;h=3===h;D=.8*3/D;var w=p.hasDataDrivenTextSize?1:p.getLayoutValue("text-size",e),v=p.hasDataDrivenTextColor?[1,1,1,1]:p.getPaintValue("text-color",e),z=p.hasDataDrivenTextOpacity?1:p.getPaintValue("text-opacity",e),A=v[3]*z*E;this._sdfColor[0]=A*v[0];this._sdfColor[1]=A*v[1];this._sdfColor[2]=A*v[2];this._sdfColor[3]=A;this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([x.width/
4,x.height/4]));v=m.tileTransform.transform;A=p.getPaintValue("text-translate",e);if(0!==A[0]||0!==A[1]){c.copy(this._viewProjMat,m.tileTransform.transform);var v=A[0],A=A[1],W=0,F=0,F=(1<<m.key.level)/Math.pow(2,e)*(m.coordRange/512);if(1===p.getPaintValue("text-translate-anchor",e)){W=-g.C_DEG_TO_RAD*k;k=Math.sin(W);var ea=Math.cos(W),W=F*(v*ea-A*k),F=F*(v*k+A*ea)}else W=F*v,F*=A;this._offsetVector[0]=W;this._offsetVector[1]=F;this._offsetVector[2]=0;c.translate(this._viewProjMat,this._viewProjMat,
this._offsetVector);v=this._viewProjMat}r?c.copy(this._extrudeMat,y):c.copy(this._extrudeMat,C);this._scaleVec[0]=1/24;this._scaleVec[1]=1/24;this._scaleVec[2]=1;c.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);y=p.hasDataDrivenText;if(C=this._getSDFVAO(a,m,y)){a.bindVAO(C);var P=this._shaderVariations.getProgram([y,h],void 0,void 0,y?this._attributeLocationsDD:this._attributeLocations);a.bindProgram(P);P.setUniformMatrix4fv("u_transformMatrix",v);P.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);P.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord);P.setUniform1f("u_depth",p.z+n);P.setUniform2fv("u_mosaicSize",this._glyphTextureSize);P.setUniform1f("u_mapRotation",q);P.setUniform1f("u_keepUpright",t?1:0);P.setUniform1f("u_level",10*e);P.setUniform1f("u_fadeSpeed",10*l.fadeSpeed);P.setUniform1f("u_minfadeLevel",10*l.minfadeLevel);P.setUniform1f("u_maxfadeLevel",10*l.maxfadeLevel);P.setUniform1f("u_fadeChange",10*(e+l.fadeChange));P.setUniform1i("u_texture",
0);P.setUniform1f("u_size",w);P.setUniform1f("u_antialiasingWidth",D);h&&(l=f.int32To4Bytes(d.layerID),P.setUniform4f("u_id",l[0],l[1],l[2],l[3]));d.glyphPerPageElementsMap.forEach(function(b,c){x.bind(a,9729,c,0);var d=p.getPaintValue("text-halo-color",e);c=p.getPaintValue("text-halo-width",e);if(0<d[3]&&0<c){var f=d[3]*z*E;u._haloColor[0]=f*d[0];u._haloColor[1]=f*d[1];u._haloColor[2]=f*d[2];u._haloColor[3]=f;d=3*p.getPaintValue("text-halo-blur",e);c*=3;P.setUniform4fv("u_color",u._haloColor);P.setUniform1f("u_halo",
1);P.setUniform1f("u_edgeDistance",c);P.setUniform1f("u_edgeBlur",d);a.drawElements(4,b[1],5125,12*b[0])}0<u._sdfColor[3]&&(P.setUniform4fv("u_color",u._sdfColor),P.setUniform1f("u_halo",0),P.setUniform1f("u_edgeDistance",0),P.setUniform1f("u_edgeBlur",0),a.drawElements(4,b[1],5125,12*b[0]))});a.bindVAO()}}};a.prototype._initialize=function(a){if(this._initialized)return!0;a=new l("text",["textVS","textFS"],[],k,a);a.addDefine("DD","DD",[!0,!1],"DD");a.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=
a;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,
type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};a.prototype._getSDFVAO=function(a,b,c){if(c){if(b.textDDVertexArrayObject)return b.textDDVertexArrayObject;
c=b.textDDVertexBuffer;var d=b.textIndexBuffer;if(!c||!d)return null;b.textDDVertexArrayObject=new m(a,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:c},d);return b.textDDVertexArrayObject}if(b.textVertexArrayObject)return b.textVertexArrayObject;c=b.textVertexBuffer;d=b.textIndexBuffer;if(!c||!d)return null;b.textVertexArrayObject=new m(a,this._attributeLocations,this._vertexAttributes,{geometry:c},d);return b.textVertexArrayObject};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../GeometryUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/Program ../../webgl/Texture ../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f){return function(){function a(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}a.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),
this._tileInfoVertexArrayObject=null)};a.prototype.render=function(a,b){this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",b.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",
this._color);a.setLineWidth(2);a.drawArrays(3,0,4);a.bindVAO();var c=this._getTexture(a,b);c&&(a.bindVAO(this._tileInfoVertexArrayObject),a.bindProgram(this._tileInfoProgram),a.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",b.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),a.drawArrays(5,0,4),a.bindVAO())};a.prototype._initialize=function(a){if(this._initialized)return!0;var b={a_pos:0},e=new h(a,c.backgroundVS,c.backgroundFS,b),g=new h(a,c.tileInfoVS,c.tileInfoFS,b),k={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},l=new Int8Array([0,0,1,0,1,1,0,1]),l=d.createVertex(a,35044,l),l=new f(a,b,k,{geometry:l}),r=new Int8Array([0,0,1,0,0,
1,1,1]),r=d.createVertex(a,35044,r);a=new f(a,b,k,{geometry:r});this._outlineProgram=e;this._tileInfoProgram=g;this._outlineVertexArrayObject=l;this._tileInfoVertexArrayObject=a;return this._initialized=!0};a.prototype._getTexture=function(a,c){if(c.texture)return c.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));
var d=c.key.id,f=this._canvas.getContext("2d");f.font="24px sans-serif";f.textAlign="left";f.textBaseline="middle";var e=f.measureText(d),e=Math.pow(2,Math.ceil(b.log2(e.width+2)));e>this._maxWidth&&(this._maxWidth=e);f.clearRect(0,0,this._maxWidth,32);f.fillStyle=c.key.level>c.refKey.level?"red":"blue";f.fillText(d,0,16);c.texture=new g(a,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return c.texture};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/ObjectPool ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec2 ../../geometry/support/spatialReferenceUtils ../2d/engine/DisplayObject ../2d/tiling/enums ../2d/tiling/TileKey ./RenderBucket ../webgl/BufferObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n){var p="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(a){function f(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];c=a.call(this)||this;c._renderBuckets=[];c._vectorTileData=
null;c._symbolUpdateData=null;c.status=k.TileStatus.INITIALIZED;c.coords=[0,0];c.bounds=[0,0,0,0];c.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};c.stencilData={mask:0,reference:0};c.status=k.TileStatus.INITIALIZED;c.tileTransform.transform=d.create();c.tileTransform.displayCoord=h.create();0<b.length&&(f=c.acquire).call.apply(f,[c].concat(b));return c;var f}b(f,a);f.prototype.reset=function(){l.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.coords[1]=
0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.height=this.width=this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this._symbolUpdateData=null;this.status=k.TileStatus.INITIALIZED};f.prototype.acquire=function(a,b,c,d,f){this.key=a;this.refKey=b;b=c.lodAt(a.level).resolution;
var e=c.size[0]*b,h=c.origin,k=a.col*e,l=a.row*e,m=c.spatialReference,n=0;m&&(m._isWrappable?m._isWrappable():m.isWrappable)&&(m=g.getInfo(m),n=m.valid[1]-m.valid[0]);k=h.x+k+a.world*n;h=h.y-l;this.coords[0]=k;this.coords[1]=h;this.bounds[0]=k;this.bounds[1]=h;this.bounds[2]=k+e;this.bounds[3]=h-e;this.widthInPixels=c.size[1];this.coordRange=4096;this.resolution=b;this.rotation=f;this.styleLayers=d;this.id=a.id};f.prototype.setData=function(a,b){this._vectorTileData=a;this.client=b;a&&a.bufferDataInfo||
(this.status=k.TileStatus.NO_DATA)};f.prototype.updateSymbolData=function(a){a&&(this._symbolUpdateData=a,this.requestRender())};f.prototype.dispose=function(){this.fillVertexArrayObject&&(this.fillVertexArrayObject.dispose(),this.fillVertexArrayObject=null);this.fillDDVertexArrayObject&&(this.fillDDVertexArrayObject.dispose(),this.fillDDVertexArrayObject=null);this.outlineVertexArrayObject&&(this.outlineVertexArrayObject.dispose(),this.outlineVertexArrayObject=null);this.outlineDDVertexArrayObject&&
(this.outlineDDVertexArrayObject.dispose(),this.outlineDDVertexArrayObject=null);this.lineVertexArrayObject&&(this.lineVertexArrayObject.dispose(),this.lineVertexArrayObject=null);this.lineDDVertexArrayObject&&(this.lineDDVertexArrayObject.dispose(),this.lineDDVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&
(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this.circleVertexArrayObject&&(this.circleVertexArrayObject.dispose(),this.circleVertexArrayObject=null);this.fillVertexBuffer&&(this.fillVertexBuffer.dispose(),this.fillVertexBuffer=null);this.fillDDVertexBuffer&&(this.fillDDVertexBuffer.dispose(),this.fillDDVertexBuffer=null);this.fillIndexBuffer&&(this.fillIndexBuffer.dispose(),
this.fillIndexBuffer=null);this.outlineVertexBuffer&&(this.outlineVertexBuffer.dispose(),this.outlineVertexBuffer=null);this.outlineDDVertexBuffer&&(this.outlineDDVertexBuffer.dispose(),this.outlineDDVertexBuffer=null);this.outlineIndexBuffer&&(this.outlineIndexBuffer.dispose(),this.outlineIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineDDVertexBuffer&&(this.lineDDVertexBuffer.dispose(),this.lineDDVertexBuffer=null);this.lineIndexBuffer&&
(this.lineIndexBuffer.dispose(),this.lineIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textIndexBuffer&&
(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.circleVertexBuffer&&(this.circleVertexBuffer.dispose(),this.circleVertexBuffer=null);this.circleIndexBuffer&&(this.circleIndexBuffer.dispose(),this.circleIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=k.TileStatus.INITIALIZED};f.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(a,
b){return a+b.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};f.prototype.getGpuMemoryUsage=function(){var a=this,b=p.reduce(function(b,c){return a[c]?b+a[c].size:b},0);this.texture&&(b+=this.texture.descriptor.width*this.texture.descriptor.height*4);return b};f.prototype.attach=function(a){if(this.status!==k.TileStatus.INITIALIZED)return!0;if(0===this._renderBuckets.length)for(var b=new Uint32Array(this._vectorTileData.bucketDataInfo),
c=b.length,d=0;d<c;){var f=b[d],e=b[d+1];if(0===e)e=new m.BackgroundRenderBucket,e.layerID=f,this._renderBuckets.push(e),d+=2;else if(1===e)e=new m.FillRenderBucket,e.layerID=f,e.triangleElementStart=b[d+2],e.triangleElementCount=b[d+3],e.outlineElementStart=b[d+4],e.outlineElementCount=b[d+5],this._renderBuckets.push(e),d+=6;else if(2===e)e=new m.LineRenderBucket,e.layerID=f,e.triangleElementStart=b[d+2],e.triangleElementCount=b[d+3],this._renderBuckets.push(e),d+=4;else if(3===e){e=new m.SymbolRenderBucket;
e.layerID=f;e.isSDF=0!==b[d+2];var g=d+3,f=b[g];g++;if(0<f)for(var h=void 0,l=void 0,p=void 0,q=0;q<f;q++)h=b[g],l=b[g+1],p=b[g+2],e.markerPerPageElementsMap.set(h,[l,p]),g+=3;var t=b[g];g++;if(0<t)for(p=l=h=void 0,q=0;q<t;q++)h=b[g],l=b[g+1],p=b[g+2],e.glyphPerPageElementsMap.set(h,[l,p]),g+=3;this._renderBuckets.push(e);d+=5+3*f+3*t}else 4===e&&(e=new m.CircleRenderBucket,e.layerID=f,e.triangleElementStart=b[d+2],e.triangleElementCount=b[d+3],this._renderBuckets.push(e),d+=4)}a=a.context;b=new Uint32Array(this._vectorTileData.bufferDataInfo);
c=b.length;for(e=d=0;e<c;e+=2,d++)if(!(0>=b[e+1]||0===this._vectorTileData.bufferData[d].byteLength))switch(b[e]){case 1:this.fillVertexBuffer?this.fillVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.fillVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 2:this.fillDDVertexBuffer?this.fillDDVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.fillDDVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 3:this.fillIndexBuffer?
this.fillIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.fillIndexBuffer=n.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 4:this.outlineVertexBuffer?this.outlineVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.outlineVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 5:this.outlineDDVertexBuffer?this.outlineDDVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.outlineDDVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);
break;case 6:this.outlineIndexBuffer?this.outlineIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.outlineIndexBuffer=n.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 7:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.lineVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 8:this.lineDDVertexBuffer?this.lineDDVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.lineDDVertexBuffer=n.createVertex(a,
35044,this._vectorTileData.bufferData[d]);break;case 9:this.lineIndexBuffer?this.lineIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.lineIndexBuffer=n.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 10:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.iconVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 11:this.iconDDVertexBuffer?this.iconDDVertexBuffer.setData(this._vectorTileData.bufferData[d]):
this.iconDDVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 12:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.iconIndexBuffer=n.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 13:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.textVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 14:this.textDDVertexBuffer?this.textDDVertexBuffer.setData(this._vectorTileData.bufferData[d]):
this.textDDVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 15:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[d]):this.textIndexBuffer=n.createIndex(a,35044,this._vectorTileData.bufferData[d]);break;case 16:this.circleVertexBuffer?this.circleVertexBuffer.setData(this._vectorTileData.bufferData[d]):this.circleVertexBuffer=n.createVertex(a,35044,this._vectorTileData.bufferData[d]);break;case 17:this.circleIndexBuffer?this.circleIndexBuffer.setData(this._vectorTileData.bufferData[d]):
this.circleIndexBuffer=n.createIndex(a,35044,this._vectorTileData.bufferData[d])}this._vectorTileData=null;this.status=k.TileStatus.READY;return!0};f.prototype.detach=function(b){this.client&&this.status!==k.TileStatus.INVALID&&this.status!==k.TileStatus.INITIALIZED&&this.client.invoke("destructTileData",this.id);this.dispose();a.prototype.detach.call(this,b)};f.prototype.doRender=function(a){if(this.visible&&this.status===k.TileStatus.READY){var b=a.context,c=a.renderer;if(b&&c){var d=a.drawphase;
this._symbolUpdateData&&this._updateSymbolData(a);b.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var f=this.styleLayers,e=void 0!==a.layerOpacity?a.layerOpacity:1;if(0!==e){var g,h=this._renderBuckets.length,l=0;if(0===d)for(l=h-1;0<=l;l--)g=this._renderBuckets[l],3!==g.type&&4!==g.type&&g.hasData()&&c.renderBucket(b,g,a.displayLevel,a.requiredLevel,d,this,f.layers[g.layerID],e);else for(l=0;l<h;l++)g=this._renderBuckets[l],g.hasData()&&c.renderBucket(b,g,a.displayLevel,
a.requiredLevel,d,this,f.layers[g.layerID],e)}}}};f.prototype._updateSymbolData=function(a){if(!this._symbolUpdateData.bucketDataInfo)return!0;var b=new Uint32Array(this._symbolUpdateData.bucketDataInfo),c=b.length;if(0===c)return this._symbolUpdateData=null,!0;if(this.status!==k.TileStatus.READY)return this.requestRender(),!1;a=a.context;for(var d=new Uint32Array(this._symbolUpdateData.bufferDataInfo),f=d.length,e=0,g=0;g<f;g+=2,e++)switch(d[g]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),
this.iconVertexBuffer=null);this.iconVertexBuffer=n.createVertex(a,35044,this._symbolUpdateData.bufferData[e]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=n.createVertex(a,35044,this._symbolUpdateData.bufferData[e]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=n.createIndex(a,35044,this._symbolUpdateData.bufferData[e]);break;case 13:this.textVertexBuffer&&
(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=n.createVertex(a,35044,this._symbolUpdateData.bufferData[e]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=n.createVertex(a,35044,this._symbolUpdateData.bufferData[e]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=n.createIndex(a,35044,this._symbolUpdateData.bufferData[e])}a=
this._renderBuckets.length;for(d=0;d<a;d++)this._renderBuckets[d]instanceof m.SymbolRenderBucket&&(f=this._renderBuckets[d],f.markerPerPageElementsMap.clear(),f.glyphPerPageElementsMap.clear());for(a=0;a<c;){f=b[a];e=-1;g=this._renderBuckets.length;for(d=0;d<g;d++)if(this._renderBuckets[d].layerID===f){e=d;break}d=this._renderBuckets[e];d||(d=new m.SymbolRenderBucket,d.layerID=f,d.isSDF=0!==b[a+2],this._renderBuckets.push(d));var h=a+3,f=b[h];h++;if(0<f)for(var l=g=e=void 0,p=0;p<f;p++)e=b[h],g=b[h+
1],l=b[h+2],d.markerPerPageElementsMap.set(e,[g,l]),h+=3;var q=b[h];h++;if(0<q)for(l=g=e=void 0,p=0;p<q;p++)e=b[h],g=b[h+1],l=b[h+2],d.glyphPerPageElementsMap.set(e,[g,l]),h+=3;a+=5+3*f+3*q}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&
(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this._symbolUpdateData=null;return!0};f.pool=new c(f);return f}(f)})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(a,e,b){return function(){function a(a,b,c,f){this.set(a,b,c,f)}a.from=function(b,c,e,f){return a.pool.acquire(b,c,e,f)};a.getId=function(a,b,c,f){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+c+"/"+
f};Object.defineProperty(a.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,b,c,f){null==a?this.world=this.col=this.row=this.level=0:"object"===
typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),b=a[1],c=a[2],f=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(b),this.col=parseFloat(c),this.world=parseFloat(f)):(this.level=+a,this.row=+b,this.col=+c,this.world=+f||0);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getChildKeys=function(){var b=this.level+1,c=this.row<<1,e=this.col<<1,f=this.world;
return[a.pool.acquire(b,c,e,f),a.pool.acquire(b,c,e+1,f),a.pool.acquire(b,c+1,e,f),a.pool.acquire(b,c+1,e+1,f)]};a.prototype._compare=function(a){return this.row<a.row?-1:this.row>a.row?1:this.col<a.col?-1:this.col>a.col?1:0};a.sort=function(b){return b.map(function(b){return a.from(b)}).sort(function(a,b){return a._compare(b)}).map(function(a){return a.id})};a.pool=new b(a,!0,null,25,50);return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(a,e,b,c){Object.defineProperty(e,"__esModule",{value:!0});a=function(){return function(a){this.type=a}}();e.RenderBucket=a;c=function(a){function c(){var b=a.call(this,2)||this;b.triangleElementStart=0;b.triangleElementCount=0;return b}b(c,a);c.prototype.hasData=function(){return 0<this.triangleElementCount};return c}(a);e.LineRenderBucket=c;c=function(a){function c(){var b=a.call(this,1)||this;b.triangleElementStart=
0;b.triangleElementCount=0;b.outlineElementStart=0;b.outlineElementCount=0;return b}b(c,a);c.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return c}(a);e.FillRenderBucket=c;c=function(a){function c(){var b=a.call(this,3)||this;b.markerPerPageElementsMap=new Map;b.glyphPerPageElementsMap=new Map;b.isSDF=!1;return b}b(c,a);c.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};return c}(a);e.SymbolRenderBucket=
c;c=function(a){function c(){var b=a.call(this,4)||this;b.triangleElementStart=0;b.triangleElementCount=0;return b}b(c,a);c.prototype.hasData=function(){return 0<this.triangleElementCount};return c}(a);e.CircleRenderBucket=c;a=function(a){function c(){return a.call(this,0)||this}b(c,a);c.prototype.hasData=function(){return!0};return c}(a);e.BackgroundRenderBucket=a})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports dojo/Deferred dojo/has dojo/promise/all ../../request ../../core/LRUCache ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../2d/tiling/TileKey ./GeometryUtils ./GlyphMosaic ./GlyphSource ./SpriteMosaic ./SpriteSource ./TileIndex ./VectorTileDisplayObject module".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v,w){var A=new g(10),z=new Map;return function(){function e(a,b,c,d,f){void 0===d&&(d=!1);this.devicePixelRatio=c;this.allowUpdates=d;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=a;this._styleRepository=a.styleRepository;this._requestUpdate=b}e.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)};Object.defineProperty(e.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0});e.prototype.start=function(){var f=this;this.stop();var e=this._styleRepository,g=new r(e.sprite,this.devicePixelRatio);g.devicePixelRatio=this.devicePixelRatio;var h=g.load().then(function(){f._spriteMosaic=new t(1024,1024,250);f._spriteMosaic.setSpriteSource(g);c("stable-symbol-rendering")&&f._spriteMosaic.preloadSpriteItems()}),
m=new q(e.glyphs);this._glyphMosaic=new p(1024,1024,m);var n=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),u=l.open(k.getAbsMid("./WorkerTileHandler",a,w),{client:this}).then(function(a){f._connection=a}),v=new b(function(a){h.isFulfilled()||h.cancel();n.isFulfilled()||n.cancel();u.isFulfilled()||u.cancel()});d([h,n,u]).then(function(a){d(f._connection.broadcast("setLayers",e.styleJSON)).then(function(){v.resolve()})});return this._broadcastPromise=v.promise};e.prototype.stop=function(){this._broadcastPromise&&
!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(a){return a.cancel()});this._ongoingRequests.forEach(function(a){return a.cancel()});this._connection&&(this._connection.close(),this._connection=null)};e.prototype.updateTile=function(a,b){var c=this;if(!this.allowUpdates)return f.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return f.reject(Error("no connection"));b=Math.round(n.degToByte(b.state.rotation));if(a.rotation===
b)return f.resolve(null);var d,e=a.key;this._updateQueue.has(e.id)&&(d=this._updateQueue.get(e.id),d.cancel());a.rotation=b;d=this._connection.invoke("update",{key:a.id,rotation:b},null,{client:a.client}).then(function(b){a.updateSymbolData(b);return b}).always(function(){c._updateQueue["delete"](e.id)});this._updateQueue.set(a.id,d);return d};e.prototype.getVectorTileWithLRC=function(a,b,c,d){var f=this;void 0===d&&(d=0);var e=new m(a,b,c,0);return this.getRefKey(e).then(function(a){var b=new v(e,
a,f._vectorTileLayer.tileInfo,f._styleRepository,0);if(a)return f.getTileData(b.key,0).then(function(a){b.setData(a.tileData,a.client);return b});b.setData(null,null);return b})};e.prototype.getTileData=function(a,b){var c=this;return this._broadcastPromise.isFulfilled()&&this._connection?this.getRefKey(a).then(function(d){if(!d)return f.resolve(null);var e=Math.round(n.degToByte(b));return c._getTileData(c._connection,a,d,e).then(function(a){return a&&a.tileData?{tileData:a.tileData,client:a.client}:
f.reject("No data")})}):f.reject(Error("no connection"))};e.prototype.getRefKey=function(a){return this._tileIndex?this._tileIndex.dataKey(a):f.resolve(a)};e.prototype.fetchTileData=function(a){a=m.pool.acquire(a);var b=this._vectorTileLayer.getTileUrl(a.level,a.row,a.col);m.pool.release(a);return h(b,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){return{result:a.data,transferList:[a.data]}})};e.prototype.getSprites=function(a){return this._spriteMosaic.getSpriteItems(a)};
e.prototype.getGlyphs=function(a){return this._glyphMosaic.getGlyphItems(a.tileID,a.font,a.codePoints)};e.prototype.getStyleRepository=function(){return this._styleRepository};e.prototype.getTileIndex=function(){return this._tileIndex};e.prototype._getTileData=function(a,b,c,d){var e=this,g={client:null};if(a=this._ongoingRequests.get(b.id))return a;a=this._connection.invoke("getTile",{key:b.id,refKey:c.id,rotation:d,cacheTile:this.allowUpdates},null,g).then(function(a){e._ongoingRequests["delete"](b.id);
return{tileData:a,client:g.client}}).catch(function(a){e._ongoingRequests["delete"](b.id);e._connection.invoke("destructTileData",b.id,null,g);return f.reject(a)});this._ongoingRequests.set(b.id,a);return a};e.prototype._fetchTileMap=function(a){var b=this;if(this._vectorTileLayer.capabilities.operations.supportsTileMap&&this._vectorTileLayer.tilemapCache)return this._tileIndex=new u(this._vectorTileLayer.tilemapCache),f.resolve();if(!a)return f.resolve();if(A.has(a))return this._tileIndex=A.use(a),
f.resolve();if(z.has(a))return z.get(a).then(function(a){b._tileIndex=new u(a.data)});var c=h(a,{callbackParamName:"callback",responseType:"json"});c.then(function(c){b._tileIndex=new u(c.data);z["delete"](a);A.insert(a,b._tileIndex)});z.set(a,c);return c};return e}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(a,e){return function(){function a(a){this._cache={};this._lruQueue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
a}a.prototype.has=function(a){return void 0!==this._cache[a]};a.prototype.insert=function(a,b){null!==this.use(a)?this._cache[a]=b:(this._collect(),this._cache[a]=b,this._lruQueue.unshift(a))};a.prototype.use=function(a){var b=this._cache[a];if(!b)return null;this._lruQueue.splice(this._lruQueue.indexOf(a),1);this._lruQueue.unshift(a);return b};a.prototype.print=function(){for(var a=0,b=this._lruQueue;a<b.length;a++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var a=
this._lruQueue.pop(),b=this._cache[a];b&&b.release&&b.release();delete this._cache[a]}};return a}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(a,e,b){function c(a,e){if(Array.isArray(e)){var d=new b;a(e,function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];d.resolve(a)});return d.promise}return c(a,[e]).then(function(a){return a[0]})}Object.defineProperty(e,"__esModule",{value:!0});e.when=c;e.getAbsMid=function(a,
b,c){return b.toAbsMid?b.toAbsMid(a):c.id.replace(/\/[^\/]*$/gi,"/")+a}})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});for(var c in b)e.hasOwnProperty(c)||(e[c]=b[c])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(a,e,b,c,d,h,
g,f,k){function l(){if(r)return r;for(var a=m+n,b=[],d=function(a){var c=k.create(a).then(function(b){return t[a]=b});b.push(c)},f=0;f<a;f++)d(f);return r=c(b).then(function(){})}Object.defineProperty(e,"__esModule",{value:!0});e.Connection=g;e.RemoteClient=f;(g=navigator.hardwareConcurrency)||(g=b("safari")&&b("mac")||b("trident")?8:2);var m=b("esri-workers-debug")?1:Math.max(1,Math.ceil(g/2)),n=b("esri-workers-debug")?1:Math.max(1,Math.floor(g/2)),p=d.getLogger("esri.core.workers"),q=0,t=[];e.initialize=
function(){l()};e.open=function(b,c,d){void 0===c&&(c={});if(Array.isArray(b))return new e.Connection(b.map(function(a){return new e.RemoteClient(a,c.client)}));if("string"!==typeof b){p.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var f=b;b=c;c={client:f,strategy:d?"dedicated":"distributed"}}var g=c.strategy||"distributed";return"local"===g?h.create(function(c){a([b],function(a){c(e.RemoteClient.connect(a))})}).then(function(a){return new e.Connection([new e.RemoteClient(a,
c.client)])}):l().then(function(){if("dedicated"===g){var a=m+q++;q%=n;return t[a].open(b).then(function(a){return new e.Connection([new e.RemoteClient(a,c.client)])})}return h.all(t.map(function(a){return a.open(b)})).then(function(a){return new e.Connection(a.map(function(a){return new e.RemoteClient(a,c.client)}))})})};e.terminate=function(){for(var a=0;a<t.length;a++)t[a]&&t[a].terminate();t.length=0};var r})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports",
"../promiseUtils"],function(a,e,b){return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,b,c){for(var d=[],e=0,g=this._clients;e<g.length;e++)d.push(g[e].invoke(a,b,c));return d};a.prototype.close=function(){for(var a=0,b=this._clients;a<b.length;a++)b[a].close();this._clients=[]};a.prototype.invoke=function(a,c,e,f){var d=f&&f.client;if(!this._clients||!this._clients.length)return b.reject(Error("Connection closed"));null!=d&&-1!==this._clients.indexOf(d)||
this._clients.some(function(a){return a.isBusy()?!1:(d=a,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,d=this._clients[this._clientIdx]);a=d.invoke(a,c,e);f&&(f.client=d);return a};a.prototype.openPorts=function(){return b.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(a,e,b,c,d,h){function g(a,b){a["delete"](b)}
var f=h.MessageType.CLOSE,k=h.MessageType.CANCEL,l=h.MessageType.INVOKE,m=h.MessageType.RESPONSE,n=h.MessageType.OPEN_PORT,p=function(){function a(a){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=a;this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a){a.type===h.MessageType.CANCEL?this._cancelledJobIds.add(a.jobId):(this._invokeMessages.push(a),null===this._timer&&(this._timer=setTimeout(this._process,0)))};a.prototype.clear=function(){this._invokeMessages.length=
0;this._cancelledJobIds.clear();this._timer=null};a.prototype._process=function(){this._timer=null;for(var a=0,b=this._invokeMessages;a<b.length;a++){var c=b[a];this._cancelledJobIds.has(c.jobId)||this._invoke(c)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return a}();return function(){function a(a,b,c){this._outJobs=new Map;this._inJobs=new Map;this._queue=new p(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=b;this._port=a;this._port.addEventListener("message",
this._onMessage);this._port.start();this._channel=c}a.connect=function(b){var c=new MessageChannel;b="function"===typeof b?new b:"default"in b&&"function"===typeof b.default?new b.default:b;b.remoteClient=new a(c.port1,b,c);return c.port2};a.prototype.close=function(){this._post({type:f});this._close()};a.prototype.isBusy=function(){return 0<this._outJobs.size};a.prototype.invoke=function(a,f,e){var m=this;if(!this._port)return d.reject(new c("remote-client:port-closed","Can't invoke(), port is closed"));
var n=h.newJobId(),p=new b(function(){g(m._outJobs,n);m._post({type:k,jobId:n})});this._outJobs.set(n,p);this._post({type:l,jobId:n,methodName:a},f,e);return p.promise};a.prototype.openPort=function(){var a=this,c=h.newJobId(),d=new b(function(){g(a._outJobs,c);a._post({type:k,jobId:c})});this._outJobs.set(c,d);this._post({type:n,jobId:c});return d.promise};a.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();
this._outJobs.forEach(function(a){a.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};a.prototype._onMessage=function(a){if(a=h.receiveMessage(a))switch(a.type){case m:this._onResponse(a);break;case l:this._queue.push(a);break;case k:this._onCancel(a);break;case f:this._close();break;case n:this._onOpenPort(a)}};a.prototype._onCancel=function(a){var b=this._inJobs,c=a.jobId,d=b.get(c);this._queue.push(a);d&&(g(b,c),d.cancel())};a.prototype._onInvoke=
function(a){var b=this,c=a.methodName,f=a.jobId;a=a.data;var e=this._inJobs,k=this._client,l=k[c],n;try{if(!l&&c&&-1!==c.indexOf("."))for(var p=c.split("."),q=0;q<p.length-1;q++)k=k[p[q]],l=k[p[q+1]];if("function"!==typeof l)throw new TypeError(c+" is not a function");n=l.call(k,a,this)}catch(D){this._post({type:m,jobId:f,error:h.toInvokeError(D)});return}d.isThenable(n)?(e.set(f,n),n.then(function(a){e.has(f)&&(g(e,f),b._post({type:m,jobId:f},a))}).catch(function(a){e.has(f)&&(g(e,f),a&&"cancel"===
a.dojoType||b._post({type:m,jobId:f,error:h.toInvokeError(a||{message:"Error encountered at method "+c})}))})):this._post({type:m,jobId:f},n)};a.prototype._onOpenPort=function(b){var c=new MessageChannel;new a(c.port1,this._client);this._post({type:m,jobId:b.jobId},c.port2,[c.port2])};a.prototype._onResponse=function(a){var b=a.jobId,d=a.error;a=a.data;var f=this._outJobs;if(f.has(b)){var e=f.get(b);g(f,b);d?e.reject(c.fromJSON(JSON.parse(d))):e.resolve(a)}};a.prototype._post=function(a,b,c){return h.postMessage(this._port,
a,b,c)};return a}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(a,e,b){function c(a){return a&&"object"===typeof a&&("result"in a||"transferList"in a)}Object.defineProperty(e,"__esModule",{value:!0});(function(a){a[a.HANDSHAKE=0]="HANDSHAKE";a[a.CONFIGURE=1]="CONFIGURE";a[a.CONFIGURED=2]="CONFIGURED";a[a.OPEN=3]="OPEN";a[a.OPENED=4]="OPENED";a[a.RESPONSE=5]="RESPONSE";a[a.INVOKE=6]="INVOKE";a[a.CANCEL=7]="CANCEL";a[a.CLOSE=8]="CLOSE";
a[a.OPEN_PORT=9]="OPEN_PORT"})(e.MessageType||(e.MessageType={}));var d=0;e.newJobId=function(){return d++};e.isTranferableResult=c;e.toInvokeError=function(a){return a?a.toJSON?JSON.stringify(a):JSON.stringify({name:a.name,message:a.message,details:a.details,stack:a.stack}):null};e.postMessage=function(a,d,f,e){2===arguments.length||void 0===f&&void 0===e?a.postMessage(d):(b("esri-workers-supports-transfer-arraybuffer")||(e?(e=e.filter(function(a){return!(a instanceof ArrayBuffer)}),e.length||(e=
null)):c(f)&&f.transferList&&(f.transferList=f.transferList.filter(function(a){return!(a instanceof ArrayBuffer)}),f.transferList.length||(f.transferList=null))),e?(d.data=f,a.postMessage(d,e)):c(f)?(d.data=f.result,f.transferList?a.postMessage(d,f.transferList):a.postMessage(d)):(d.data=f,a.postMessage(d)))};e.receiveMessage=function(a){return a?(a=a.data)?"string"===typeof a?JSON.parse(a):a:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(a,e,b,c,d,h,g,f,k){var l=h.getLogger("esri.core.workers"),m=f.MessageType.CANCEL,n=f.MessageType.INVOKE,p=f.MessageType.OPEN,q=f.MessageType.OPENED,t=f.MessageType.RESPONSE;return function(){function a(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();l.error(a)})}a.create=function(b){return k.createWorker().then(function(c){return new a(c,b)})};a.prototype.terminate=
function(){this.worker.terminate()};a.prototype.open=function(a){var c=this,d=f.newJobId(),e=new b(function(a){c._outJobs["delete"](d);c._post({type:m,jobId:d})});this._outJobs.set(d,e);this._post({type:p,jobId:d,modulePath:a});return e.promise};a.prototype._onMessage=function(a){if(a=f.receiveMessage(a))switch(a.type){case q:case t:this._onResponse(a);break;case m:this._onCancel(a);break;case n:this._onInvoke(a)}};a.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&a.cancel()};a.prototype._onInvoke=
function(a){var b=this,d=a.methodName,e=a.jobId;a=a.data;var h=this._inJobs,k=c.workerMessages[d],l;try{if("function"!==typeof k)throw new TypeError(d+" is not a function");l=k.call(null,a)}catch(C){this._post({type:t,jobId:e,error:f.toInvokeError(C)});return}g.isThenable(l)?(h.set(e,l),l.then(function(a){h["delete"](e);b._post({type:t,jobId:e},a)}).catch(function(a){h["delete"](e);a||(a={message:"Error encountered at method"+d});a.dojoType&&"cancel"===a.dojoType||b._post({type:t,jobId:e,error:f.toInvokeError(a)})})):
this._post({type:t,jobId:e},l)};a.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var f=this._outJobs.get(b);f&&(this._outJobs["delete"](b),c?f.reject(d.fromJSON(JSON.parse(c))):f.resolve(a))};a.prototype._post=function(a,b,c){return f.postMessage(this.worker,a,b,c)};return a}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(a,e,b,c){return function(){function a(){}Object.defineProperty(a,"id",{get:function(){return b.id?
c:null},enumerable:!0,configurable:!0});a.workerMessages={};return a}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.findCredential=function(a){return b.findCredential(a)}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(a,e,b,c){a=new a;e.id=c.safeMixin(a,b);return e.id})},
"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r){e=e([t],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(a){d.mixin(this,
a);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(a,d,f){this._nls||(this._nls=r.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var e=this._loginDialog,h=f&&f.error,k=f&&f.token,l=new c(function(){e.onCancel()});if(e.open)return a=Error("BUSY"),a.code="IdentityManager.1",a.log=!!b.isDebug,l.errback(a),l;p.hide(e.errMsg_);h&&403==h.code&&k&&(g.set(e.errMsg_,"innerHTML",this._nls.forbidden),p.show(e.errMsg_));e.dfd_=
l;e.serverInfo_=d;e.resUrl_=a;e.admin_=f&&f.isAdmin;g.set(e.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"});g.set(e.serverLink_,{title:d.server,innerHTML:(-1!==d.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":d.server)+" "});e.txtPwd_.set("value","");e.show();return l},_createLoginDialog:function(){var c=this._nls,d=n.substitute(c,this._dialogContent),d=n.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},d),e=new l({title:c.title,content:d,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(a){a.charOrCode===f.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),b=this.txtPwd_.get("value"),d=this.dfd_,f=this;if(this.form_.validate()&&a&&b){this.btnSubmit_.set("label",c.lblSigning);var e=m.id.findCredential(f.resUrl_,a),h=function(b){f.btnSubmit_.set("label",
c.lblOk);f.btnSubmit_.set("disabled",!1);p.hide(f.errMsg_);f.hide();l._DialogLevelManager.hide(f);var g=f.serverInfo_;f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;var h,k,m=e,u;b&&(h=b.token,k=n.isDefined(b.expires)?Number(b.expires):null,u=!!b.ssl,m?(m.userId=a,m.token=h,m.expires=k,m.validity=b.validity,m.ssl=u,m.creationTime=(new Date).getTime()):m=new q({userId:a,server:g.server,token:h,expires:k,ssl:u,isAdmin:f.admin_,validity:b.validity}));d.callback(m)};e&&!e._enqueued?h():(f.btnSubmit_.set("disabled",
!0),f.generateDfd_=m.id.generateToken(this.serverInfo_,{username:a,password:b},{isAdmin:this.admin_}).addCallback(h).addErrback(function(a){f.btnSubmit_.set("disabled",!1);f.generateDfd_=null;f.btnSubmit_.set("label",c.lblOk);g.set(f.errMsg_,"innerHTML",a&&a.code?c.invalidUser:c.noAuthService);p.show(f.errMsg_)}))}},cancel_:function(){e.generateDfd_&&e.generateDfd_.cancel();var a=e.dfd_,c=e.resUrl_,d=e.serverInfo_;e.btnSubmit_.set("disabled",!1);e.dfd_=e.serverInfo_=e.generateDfd_=e.resUrl_=null;
p.hide(e.errMsg_);l._DialogLevelManager.hide(e);e.esriIdMgr_.onDialogCancel({resourceUrl:c,serverInfo:d});c=Error("ABORTED");c.code="IdentityManager.2";c.log=!!b.isDebug;a.errback(c)}}),d=e.domNode;e.form_=k.byNode(a.query(".esriIdForm",d)[0]);e.txtUser_=k.byNode(a.query(".esriIdUser",d)[0]);e.txtPwd_=k.byNode(a.query(".esriIdPwd",d)[0]);e.btnSubmit_=k.byNode(a.query(".esriIdSubmit",d)[0]);e.btnCancel_=k.byNode(a.query(".esriIdCancel",d)[0]);e.resLink_=a.query(".resLink",d)[0];e.serverLink_=a.query(".serverLink",
d)[0];e.errMsg_=a.query(".esriErrorMsg",d)[0];e.connect(e.txtUser_,"onKeyPress",e.keypressed_);e.connect(e.txtPwd_,"onKeyPress",e.keypressed_);e.connect(e.btnSubmit_,"onClick",e.execute_);e.connect(e.btnCancel_,"onClick",e.onCancel);e.connect(e,"onCancel",e.cancel_);return e}});return m.IdentityManagerDialog=m.IdentityManager=e})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v,w,A,z,x,y,C,D,E,I,H,Q,U,G){function R(){}var X=new d;X.resolve(!0);x=c("dijit._DialogBase"+(r("dojo-bidi")?"_NoBidi":""),[C,E,I,D],{templateString:G,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:x.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=m.getLocalization("dijit","common");p.mixin(this,a);this.inherited(arguments)},postCreate:function(){k.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);b.after(this,"onExecute",p.hitch(this,"hide"),!0);b.after(this,"onCancel",p.hitch(this,"hide"),!0);q(this.closeButtonNode,
u.press,function(a){a.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&W.isTop(this)&&(this._getFocusItems(),z.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();z.focus(this._firstFocusItem)},_endDrag:function(){var a=f.position(this.domNode),b=v.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==r("ie")?A:w)(a,{handle:this.titleBar}),b.after(this._moveable,"onMoveStop",p.hitch(this,"_endDrag"),!0)):g.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":e.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:p.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!g.contains(this.ownerDocumentBody,"dojoMove")){var a=
this.domNode,b=v.getBox(this.ownerDocument),c=this._relativePosition,d=f.position(a);k.set(a,{left:Math.floor(b.l+(c?Math.min(c.x,b.w-d.w):(b.w-d.w)/2))+"px",top:Math.floor(b.t+(c?Math.min(c.y,b.h-d.h):(b.h-d.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==n.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(z.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||
a.shiftKey||(z.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==n.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return X.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),W.hide(this));var a=v.get(this.ownerDocument);this._modalconnects.push(q(a,"scroll",p.hitch(this,"resize",null)));this._modalconnects.push(q(this.domNode,
"keydown",p.hitch(this,"_onKey")));k.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new d(p.hitch(this,function(){b.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,R);a=this._fadeInDeferred.promise;b=l.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:p.hitch(this,function(){W.show(this,this.underlayAttrs)}),onEnd:p.hitch(this,function(){this.autofocus&&W.isTop(this)&&(this._getFocusItems(),
z.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return X.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new d(p.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,R);this._fadeOutDeferred.then(p.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=l.fadeOut({node:this.domNode,duration:this.duration,
onEnd:p.hitch(this,function(){this.domNode.style.display="none";W.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),e.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&k.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=v.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var c=f.position(this.domNode);c.w>=b.w||c.h>=b.h?(a={w:Math.min(c.w,b.w),h:Math.min(c.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){f.setMarginBox(this.domNode,
a);b=[];this.titleBar&&b.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,region:"bottom"});c={domNode:this.containerNode,region:"center"};b.push(c);var d=U.marginBox2contentBox(this.domNode,a);U.layoutChildren(this.domNode,d,b);this._singleChild?(b=U.marginBox2contentBox(this.containerNode,c),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();r("touch")||a||this._position()}},
_layoutChildren:function(){e.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();W.hide(this);this.inherited(arguments)}});r("dojo-bidi")&&(x=c("dijit._DialogBase",x,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var K=c("dijit.Dialog",[Q,x],{});K._DialogBase=x;var W=K._DialogLevelManager={_beginZIndex:950,show:function(a,b){F[F.length-1].focus=z.curNode;var c=F[F.length-1].dialog?F[F.length-1].zIndex+2:K._DialogLevelManager._beginZIndex;k.set(a.domNode,"zIndex",c);H.show(b,c-1);F.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(F[F.length-1].dialog==a){F.pop();var b=F[F.length-
1];1==F.length?H.hide():H.show(b.underlayAttrs,b.zIndex-1);if(a.refocus&&(a=b.focus,!b.dialog||a&&h.isDescendant(a,b.dialog.domNode)||(b.dialog._getFocusItems(),a=b.dialog._firstFocusItem),a))try{a.focus()}catch(L){}}else b=e.indexOf(e.map(F,function(a){return a.dialog}),a),-1!=b&&F.splice(b,1)},isTop:function(a){return F[F.length-1].dialog==a}},F=K._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];z.watch("curNode",function(a,b,c){a=F[F.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&c.ownerDocument==
a.ownerDocument){do if(c==a.domNode||g.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});r("dijit-legacy-requires")&&t(0,function(){a(["dijit/TooltipDialog"])});return K})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(a,e){var b=e.prototype.onMove;return a("dojo.dnd.TimedMoveable",e,{timeout:40,constructor:function(a,b){b||(b={});b.timeout&&"number"==typeof b.timeout&&0<=b.timeout&&(this.timeout=b.timeout)},onMoveStop:function(a){a._timer&&
(clearTimeout(a._timer),b.call(this,a,a._leftTop));e.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,d){a._leftTop=d;if(!a._timer){var c=this;a._timer=setTimeout(function(){a._timer=null;b.call(c,a,a._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(a,e,b,c,d,h){return e("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var c=
[];a.forEach(b||this.getChildren(),function(a){"value"in a?c.push(a):c=c.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return c},reset:function(){a.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var b=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var c=a.disabled||!a.validate||a.validate();c||b||(h.scrollIntoView(a.containerNode||a.domNode),a.focus(),b=!0);return c}),function(a){return a})},
setValues:function(a){b.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(b){var d={};a.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(d[a.name]||(d[a.name]=[])).push(a)});for(var e in d)if(d.hasOwnProperty(e)){var g=d[e],h=c.getObject(e,!1,b);void 0!==h&&(h=[].concat(h),"boolean"==typeof g[0].checked?a.forEach(g,function(b){b.set("value",-1!=a.indexOf(h,b._get("value")))}):g[0].multiple?
g[0].set("value",h):a.forEach(g,function(a,b){a.set("value",h[b])}))}},getValues:function(){b.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};a.forEach(this._getDescendantFormWidgets(),function(a){var d=a.name;if(d&&!a.disabled){var f=a.get("value");"boolean"==typeof a.checked?/Radio/.test(a.declaredClass)?!1!==f?c.setObject(d,f,b):(f=c.getObject(d,!1,b),void 0===f&&c.setObject(d,null,b)):
(a=c.getObject(d,!1,b),a||(a=[],c.setObject(d,a,b)),!1!==f&&a.push(f)):(a=c.getObject(d,!1,b),"undefined"!=typeof a?c.isArray(a)?a.push(f):c.setObject(d,[a,f],b):c.setObject(d,f,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=a.map(this._descendants,function(a){return a.get("state")||""});return 0<=a.indexOf(b,"Error")?"Error":0<=a.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=
this._getDescendantFormWidgets();a.forEach(this._descendants,function(a){a._started||a.startup()});b||this._onChildChange()},_onChildChange:function(a){a&&"state"!=a&&"disabled"!=a||this._set("state",this._getState());a&&"value"!=a&&"disabled"!=a&&"checked"!=a||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=
this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var a=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,
e){return a("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=e._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n){var p=a("dijit.DialogUnderlay",[f,k],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){c.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(h(this.domNode,"keydown",e.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=g.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new l(this.domNode);var a=g.get(this.ownerDocument);this._modalConnects=[m.on("resize",e.hitch(this,"layout")),h(a,"scroll",
e.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});p.show=function(a,b){var c=p._singleton;!c||c._destroyed?c=n._underlay=p._singleton=new p(a):a&&c.set(a);d.set(c.domNode,"zIndex",b);c.open||c.show()};p.hide=function(){var a=
p._singleton;a&&!a._destroyed&&a.hide()};return p})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r){return k("dijit.layout.ContentPane",[b,c,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:a._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,
b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=m.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=e.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=t.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,a);this.errorMessage=h.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!e.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){f.forEach(this.getChildren(),
function(a){a._started||a._destroyed||!e.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!e.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(b){a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",b)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new l(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,
"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new l(e.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new l(e.hitch(this,"cancel"));this.onLoadDeferred.then(e.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};e.isObject(this.ioArgs)&&e.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||q.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(x){a._onError("Content",
x)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(v){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(u){}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;f.forEach(this.getChildren(),function(b){b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(f.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||p.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);this.destroyDescendants();var c=this._contentSetter;c&&c instanceof g._ContentSetter||(c=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:e.hitch(this,
this._onError),onContentError:e.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(y){}})}));var d=e.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(e.isObject(a)&&a.domNode?a.domNode:a,d),f=this;return r(d&&d.then?d:c.parseDeferred,function(){delete f._contentSetterParams;
b||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c||a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(a,e,b,c,d,h,g,f,k,l){return e("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(k.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],c=!1;g("\x3e *",this.containerNode).some(function(b){var d=
f.byNode(b);d&&d.resize?a.push(d):!/script|link|style/i.test(b.nodeName)&&b.offsetHeight&&(c=!0)});this._singleChild=1!=a.length||c?null:a[0];b.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
a&&c.setMarginBox(this.domNode,a);var d=this.containerNode;d===this.domNode?(b=b||{},h.mixin(b,a||{}),"h"in b&&"w"in b||(b=h.mixin(c.getMarginBox(d),b)),this._contentBox=l.marginBox2contentBox(d,b)):this._contentBox=c.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||c.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,d=0;b=
a[d++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,c=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!b.contains(a,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(a,e,b,c,d){function h(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function g(a,c){var f=a.resize?a.resize(c):b.setMarginBox(a.domNode,c);f?d.mixin(a,f):(d.mixin(a,b.getMarginBox(a.domNode)),d.mixin(a,c))}var f={marginBox2contentBox:function(a,d){var f=c.getComputedStyle(a),e=b.getMarginExtents(a,f),g=b.getPadBorderExtents(a,f);return{l:c.toPixelValue(a,f.paddingLeft),t:c.toPixelValue(a,f.paddingTop),w:d.w-
(e.w+g.w),h:d.h-(e.h+g.h)}},layoutChildren:function(b,c,f,n,p){c=d.mixin({},c);e.add(b,"dijitLayoutContainer");f=a.filter(f,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(a.filter(f,function(a){return"center"==a.region||"client"==a.layoutAlign}));a.forEach(f,function(a){var b=a.domNode,d=a.region||a.layoutAlign;if(!d)throw Error("No region setting for "+a.id);var f=b.style;f.left=c.l+"px";f.top=c.t+"px";f.position="absolute";e.add(b,"dijitAlign"+h(d));b={};n&&n==a.id&&(b["top"==
a.region||"bottom"==a.region?"h":"w"]=p);"leading"==d&&(d=a.isLeftToRight()?"left":"right");"trailing"==d&&(d=a.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(b.w=c.w,g(a,b),c.h-=a.h,"top"==d?c.t+=a.h:f.top=c.t+c.h+"px"):"left"==d||"right"==d?(b.h=c.h,g(a,b),c.w-=a.w,"left"==d?c.l+=a.w:f.left=c.l+c.w+"px"):"client"!=d&&"center"!=d||g(a,c)})}};d.setObject("dijit.layout.utils",f);return f})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(a,e,b,c,d,h,g){var f=0,k={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:h.empty,_setNodeContent:function(a,b){h.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=h.toDom(b,a.ownerDocument)),!b.nodeType&&e.isArrayLike(b))for(var c=b.length,d=0;d<b.length;d=c==b.length?d+1:0)h.place(b[d],a,"last");else h.place(b,a,"last");return a},_ContentSetter:c("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:a._scopeName,startup:!0,constructor:function(a,b){e.mixin(this,a||{});b=this.node=d.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",f++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+
": setContent given no node");try{a=k._setNodeContent(a,this.content)}catch(n){var b=this.onContentError(n);try{a.innerHTML=b}catch(p){}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(b.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);h.empty(this.node)},onBegin:function(){var a=this.content;if(e.isString(a)&&(this.cleanContent&&
(a=k._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b=
{},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var c={};b.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=g.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+d.id)})}catch(p){this._onError("Content",p,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=
this["on"+a+"Error"].call(this,b);c||a&&k._setNodeContent(this.node,a,!0)}}),set:function(a,b,c){void 0==b&&(b="");"number"==typeof b&&(b=b.toString());return c?(new k._ContentSetter(e.mixin(c,{content:b,node:a}))).set():k._setNodeContent(a,b,!0)}};e.setObject("dojo.html",k);return k})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r){function u(a){return eval("("+a+")")}function v(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<A){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=A}return b}function w(c,d){d||(d=a);var f=d._dojoParserCtorMap||(d._dojoParserCtorMap={}),e=c.join();if(!f[e]){for(var g=[],h=0,k=c.length;h<k;h++){var l=c[h];g[g.length]=f[l]=f[l]||b.getObject(l)||~l.indexOf("/")&&d(l)}c=g.shift();f[e]=g.length?c.createSubclass?
c.createSubclass(g):c.extend.apply(c,g):c}return f[e]}new Date("X");var A=0;k.after(b,"extend",function(){A++},!0);var z={_clearCache:function(){A++;_ctorMap={}},_functionFromScript:function(a,b){var d="",f="",e=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");e=(e||"").split(/\s*,\s*/);b&&b.length&&c.forEach(b.split(/\s*,\s*/),function(a){d+="with("+a+"){";f+="}"});return new Function(e,d+a.innerHTML+f)},instantiate:function(a,b,d){b=b||{};d=d||{};var f=(d.scope||e._scopeName)+
"Type",g="data-"+(d.scope||e._scopeName)+"-",h=g+"type",k=g+"mixins",l=[];c.forEach(a,function(a){var c=f in b?b[f]:a.getAttribute(h)||a.getAttribute(f);if(c){var d=a.getAttribute(k),c=d?[c].concat(d.split(/\s*,\s*/)):[c];l.push({node:a,types:c})}});return this._instantiate(l,b,d)},_instantiate:function(a,b,d,f){function e(a){b._started||d.noStart||c.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=c.map(a,function(a){var c=a.ctor||w(a.types,d.contextRequire);
if(!c)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(c,a.node,b,d,a.scripts,a.inherited)},this);return f?l(a).then(e):e(a)},construct:function(a,d,g,h,l,n){function H(a){D&&b.setObject(D,a);for(A=0;A<S.length;A++)k[S[A].advice||"after"](a,S[A].method,b.hitch(a,S[A].func),!0);for(A=0;A<C.length;A++)C[A].call(a);for(A=0;A<la.length;A++)a.watch(la[A].prop,la[A].func);for(A=0;A<fa.length;A++)t(a,fa[A].event,fa[A].func);return a}var r=a&&a.prototype;h=h||{};
var w={};h.defaults&&b.mixin(w,h.defaults);n&&b.mixin(w,n);var x;p("dom-attributes-explicit")?x=d.attributes:p("dom-attributes-specified-flag")?x=c.filter(d.attributes,function(a){return a.specified}):(n=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),x=c.map(n.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):
d.getAttributeNode(b).value}}));var y=h.scope||e._scopeName;n="data-"+y+"-";var E={};"dojo"!==y&&(E[n+"props"]="data-dojo-props",E[n+"type"]="data-dojo-type",E[n+"mixins"]="data-dojo-mixins",E[y+"type"]="dojotype",E[n+"id"]="data-dojo-id");for(var A=0,z,y=[],D,I;z=x[A++];){var P=z.name,L=P.toLowerCase();z=z.value;switch(E[L]||L){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":I=z;break;case "data-dojo-id":case "jsid":D=z;break;case "data-dojo-attach-point":case "dojoattachpoint":w.dojoAttachPoint=
z;break;case "data-dojo-attach-event":case "dojoattachevent":w.dojoAttachEvent=z;break;case "class":w["class"]=d.className;break;case "style":w.style=d.style&&d.style.cssText;break;default:if(P in r||(P=v(a)[L]||P),P in r)switch(typeof r[P]){case "string":w[P]=z;break;case "number":w[P]=z.length?Number(z):NaN;break;case "boolean":w[P]="false"!=z.toLowerCase();break;case "function":""===z||-1!=z.search(/[^\w\.]+/i)?w[P]=new Function(z):w[P]=b.getObject(z,!1)||new Function(z);y.push(P);break;default:L=
r[P],w[P]=L&&"length"in L?z?z.split(/\s*,\s*/):[]:L instanceof Date?""==z?new Date(""):"now"==z?new Date:m.fromISOString(z):L instanceof f?e.baseUrl+z:u(z)}else w[P]=z}}for(x=0;x<y.length;x++)E=y[x].toLowerCase(),d.removeAttribute(E),d[E]=null;if(I)try{I=u.call(h.propsThis,"{"+I+"}"),b.mixin(w,I)}catch(ba){throw Error(ba.toString()+" in data-dojo-props\x3d'"+I+"'");}b.mixin(w,g);l||(l=a&&(a._noScript||r._noScript)?[]:q("\x3e script[type^\x3d'dojo/']",d));var S=[],C=[],la=[],fa=[];if(l)for(A=0;A<l.length;A++)E=
l[A],d.removeChild(E),g=E.getAttribute(n+"event")||E.getAttribute("event"),h=E.getAttribute(n+"prop"),I=E.getAttribute(n+"method"),y=E.getAttribute(n+"advice"),x=E.getAttribute("type"),E=this._functionFromScript(E,n),g?"dojo/connect"==x?S.push({method:g,func:E}):"dojo/on"==x?fa.push({event:g,func:E}):w[g]=E:"dojo/aspect"==x?S.push({method:I,advice:y,func:E}):"dojo/watch"==x?la.push({prop:h,func:E}):C.push(E);a=(l=a.markupFactory||r.markupFactory)?l(w,d,a):new a(w,d);return a.then?a.then(H):H(a)},
scan:function(b,d){function f(a){if(!a.inherited){a.inherited={};var b=a.node,c=f(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(q)||c.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var g=[],h=[],k={},l=(d.scope||e._scopeName)+"Type",m="data-"+(d.scope||e._scopeName)+"-",p=m+"type",q=m+"textdir",m=m+"mixins",t=b.firstChild,u=d.inherited;if(!u){var r=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&
r(a.parentNode,b)},u={dir:r(b,"dir"),lang:r(b,"lang"),textDir:r(b,q)},v;for(v in u)u[v]||delete u[v]}v={inherited:u};for(var x,y;;)if(t)if(1!=t.nodeType)t=t.nextSibling;else if(x&&"script"==t.nodeName.toLowerCase())(u=t.getAttribute("type"))&&/^dojo\/\w/i.test(u)&&x.push(t),t=t.nextSibling;else if(y)t=t.nextSibling;else if(u=t.getAttribute(p)||t.getAttribute(l),b=t.firstChild,u||b&&(3!=b.nodeType||b.nextSibling)){y=null;if(u){var P=t.getAttribute(m);x=P?[u].concat(P.split(/\s*,\s*/)):[u];try{y=w(x,
d.contextRequire)}catch(S){}y||c.forEach(x,function(a){~a.indexOf("/")&&!k[a]&&(k[a]=!0,h[h.length]=a)});P=y&&!y.prototype._noScript?[]:null;v={types:x,ctor:y,parent:v,node:t,scripts:P};v.inherited=f(v);g.push(v)}else v={node:t,scripts:x,parent:v};x=P;y=t.stopParser||y&&y.prototype.stopParser&&!d.template;t=b}else t=t.nextSibling;else{if(!v||!v.node)break;t=v.node.nextSibling;y=!1;v=v.parent;x=v.scripts}var A=new n;h.length?(d.contextRequire||a)(h,function(){A.resolve(c.filter(g,function(a){if(!a.ctor)try{a.ctor=
w(a.types,d.contextRequire)}catch(fa){}for(var b=a.parent;b&&!b.types;)b=b.parent;var c=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(c&&c.stopParser&&!d.template);a.instantiate=!b||b.instantiate&&b.instantiateChildren;return a.instantiate}))}):A.resolve(g);return A.promise},_require:function(c,d){c=u("{"+c.innerHTML+"}");var f=[],e=[],g=new n;d=d&&d.contextRequire||a;for(var h in c)f.push(h),e.push(c[h]);d(e,function(){for(var a=0;a<f.length;a++)b.setObject(f[a],arguments[a]);g.resolve(arguments)});
return g.promise},_scanAmd:function(a,b){var c=new n,d=c.promise;c.resolve(!0);var f=this;q("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return f._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,c){!a||"string"==typeof a||"nodeType"in a||(c=a,a=c.rootNode);var d=a?h.byId(a):g.body();c=c||{};var f=c.template?{template:!0}:{},e=[],k=this;a=this._scanAmd(d,c).then(function(){return k.scan(d,c)}).then(function(a){return k._instantiate(a,f,c,!0)}).then(function(a){return e=
e.concat(a)}).otherwise(function(a){throw a;});b.mixin(e,a);return e}};e.parser=z;d.parseOnLoad&&r(100,z,"parse");return z})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(a,e,b,c){a=a(c.Credential,{});return b.Credential=a})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/on dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v,w,A,z,x){var y={},C=function(a){var b=(new g(a.owningSystemUrl)).host;a=(new g(a.server)).host;var c=/.+\.arcgis\.com$/i;return c.test(b)&&c.test(a)},D=function(a,b){return!!(C(a)&&b&&c.some(b,function(b){return b.test(a.server)}))},E,I=a(A,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=b.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash();m(window,"pageshow",b.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,
tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],
_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,
/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var b=this.serverInfos;b?(a=c.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):this.serverInfos=a;c.forEach(a,function(a){a.owningSystemUrl&&this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var b=q.defaults.io.corsEnabledServers,c=this._getOrigin(a.tokenServiceUrl);u.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,
""));u.canUseXhr(c)||b.push(c.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=c.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=b.concat(a)):this.oAuthInfos=a},registerToken:function(a){var c=this._sanitizeUrl(a.server),d=this.findServerInfo(c),f=!0,e;d||(d=new r,d.server=this._getServerInstanceRoot(c),d.tokenServiceUrl=this._getTokenSvcUrl(c),d.hasPortal=!0,this.registerServers([d]));(e=this.findCredential(c,a.userId))?
(b.mixin(e,a),f=!1):(e=new E({userId:a.userId,server:d.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:this._isServerRsrc(c)?"server":"portal"}),e.resources=[c],this.credentials.push(e));e.onTokenChange(!1);f||e.refreshServerTokens()},toJson:function(){return t.fixJson({serverInfos:c.map(this.serverInfos,function(a){return a.toJson()}),oAuthInfos:c.map(this.oAuthInfos,function(a){return a.toJson()}),credentials:c.map(this.credentials,function(a){return a.toJson()})})},initialize:function(a){if(a){b.isString(a)&&
(a=h.fromJson(a));var d=a.serverInfos,f=a.oAuthInfos;a=a.credentials;if(d){var e=[];c.forEach(d,function(a){a.server&&a.tokenServiceUrl&&e.push(a.declaredClass?a:new r(a))});e.length&&this.registerServers(e)}if(f){var g=[];c.forEach(f,function(a){a.appId&&g.push(a.declaredClass?a:new x(a))});g.length&&this.registerOAuthInfos(g)}a&&c.forEach(a,function(a){a.userId&&a.server&&a.token&&a.expires&&a.expires>(new Date).getTime()&&(a=a.declaredClass?a:new E(a),a.onTokenChange(),this.credentials.push(a))},
this)}},findServerInfo:function(a){var b;a=this._sanitizeUrl(a);c.some(this.serverInfos,function(c){this._hasSameServerInstance(c.server,a)&&(b=c);return!!b},this);return b},findOAuthInfo:function(a){var b;a=this._sanitizeUrl(a);c.some(this.oAuthInfos,function(c){this._hasSameServerInstance(c.portalUrl,a)&&(b=c);return!!b},this);return b},findCredential:function(a,b){var d,f;a=this._sanitizeUrl(a);f=this._isServerRsrc(a)?"server":"portal";b?c.some(this.credentials,function(c){this._hasSameServerInstance(c.server,
a)&&b===c.userId&&c.scope===f&&(d=c);return!!d},this):c.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===f&&(d=b);return!!d},this);return d},getCredential:function(a,c){var f,g,h=!0;t.isDefined(c)&&(b.isObject(c)?(f=!!c.token,g=c.error,h=!1!==c.prompt):f=c);a=this._sanitizeUrl(a);var l=new d(v._dfdCanceller),m=this._isAdminResource(a),n=f&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;if((f=f?this.findCredential(a):null)&&
g&&498===g.code)f.destroy(),n&&n.token===c.token&&k("esri_auth",null,{expires:-1,path:"/",domain:document.domain});else if(n||f)return a=Error("You are currently signed in as: '"+(n&&n.email||f&&f.userId)+"'. You do not have access to this resource: "+a),a.code="IdentityManagerBase.1",a.httpCode=g&&g.httpCode,a.messageCode=g?g.messageCode:null,a.subcode=g?g.subcode:null,a.details=g?g.details:null,a.log=!!e.isDebug,l.errback(a),l;if(g=this._findCredential(a,c))return l.callback(g),l;g=this.findServerInfo(a);
if(g)!g.hasServer&&this._isServerRsrc(a)&&(g._restInfoDfd=this._getTokenSvcUrl(a,!0),g.hasServer=!0);else{n=this._getTokenSvcUrl(a);if(!n)return a=Error("Unknown resource - could not find token service endpoint."),a.code="IdentityManagerBase.2",a.log=!!e.isDebug,l.errback(a),l;g=new r;g.server=this._getServerInstanceRoot(a);b.isString(n)?(g.tokenServiceUrl=n,g.hasPortal=!0):(g._restInfoDfd=n,g.hasServer=!0);this.registerServers([g])}h&&g.hasPortal&&void 0===g._selfReq&&!this._findOAuthInfo(a)&&(g._selfReq=
{owningTenant:c&&c.owningTenant,selfDfd:this._getPortalSelf(g.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)});return this._enqueue(a,g,c,l,m)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,c,d){var f,
h,k,l,m,n,q=this._rePortalTokenSvc.test(a.tokenServiceUrl),t=new g(window.location.href.toLowerCase()),r=this._getEsriAuthCookie(),v,H=!c;l=a.shortLivedTokenValidity;var x;c&&(x=p.id.tokenValidity||l||p.id.defaultTokenValidity,x>l&&(x=l));d&&(f=d.isAdmin,h=d.serverUrl,k=d.token,n=d.ssl,a.customParameters=d.customParameters);f?l=a.adminTokenServiceUrl:(l=a.tokenServiceUrl,m=new g(l.toLowerCase()),r&&(v=(v=r.auth_tier)&&v.toLowerCase()),("web"===v||a.webTierAuth)&&d&&d.serverUrl&&!n&&"http"===t.scheme&&
(u.hasSameOrigin(t.uri,l,!0)||"https"===m.scheme&&t.host===m.host&&"7080"===t.port&&"7443"===m.port)&&(l=l.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),H&&q&&(l=l.replace(/\/rest/i,"")));f=b.mixin({url:l,content:b.mixin({request:"getToken",username:c&&c.username,password:c&&c.password,serverUrl:h,token:k,expiration:x,referer:f||q?window.location.host:null,client:f?"referer":null,f:"json"},a.customParameters),handleAs:"json",callbackParamName:H?"callback":void 0},d&&d.ioArgs);d={usePost:!H,
disableIdentityLookup:!0,useProxy:this._useProxy(a,d)};q||(f.withCredentials=!1);q=w(f,d);q.addCallback(function(b){if(!b||!b.token)return b=Error("Unable to generate token"),b.code="IdentityManagerBase.3",b.log=!!e.isDebug,b;var d=a.server;y[d]||(y[d]={});c&&(y[d][c.username]=c.password);b.validity=x;return b});q.addErrback(function(a){});return q},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){var b=new d;this.getCredential(a,{prompt:!1}).then(function(a){return a.token?w({url:a.server+
("portal"===a.scope?"/sharing/rest":"/rest/services"),content:{f:"json",token:a.token},callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(){return a}).otherwise(function(b){if(498===b.code)throw a.destroy(),b=Error("User is not signed in."),b.code="IdentityManagerBase.6",b.log=!!e.isDebug,b;return a}):a}).then(function(a){b.resolve(a)}).otherwise(function(a){b.reject(a)});return b},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=
a},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();c.forEach(a,function(a){a.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=l.queryToObject(a),b=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=h.fromJson(a.state),this._oAuthHash=
a,b=!0):a.error&&a.error_description&&"access_denied"===a.error&&(b=!0);b&&(!f("ie")||8<f("ie"))&&(window.location.hash="")}},_pageShowHandler:function(a){a.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=!!e.isDebug,this._errbackFunc(a))},_findCredential:function(a,b){var d=-1,f,e,g,h=b&&b.token;b=b&&b.resource;var k=this._isServerRsrc(a)?"server":"portal",l=c.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,
a)&&b.scope===k},this);a=b||a;if(l.length)if(1===l.length)if(b=l[0],e=(f=(g=this.findServerInfo(b.server))&&g.owningSystemUrl)&&this.findCredential(f,b.userId),d=this._getIdenticalSvcIdx(a,b),h)-1!==d&&(b.resources.splice(d,1),this._removeResource(a,e));else return-1===d&&b.resources.push(a),this._addResource(a,e),b;else{var m,n;c.some(l,function(b){n=this._getIdenticalSvcIdx(a,b);return-1!==n?(m=b,e=(f=(g=this.findServerInfo(m.server))&&g.owningSystemUrl)&&this.findCredential(f,m.userId),d=n,!0):
!1},this);if(h)m&&(m.resources.splice(d,1),this._removeResource(a,e));else if(m)return this._addResource(a,e),m}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);b||c.some(this.oAuthInfos,function(c){this._isIdProvider(c.portalUrl,a)&&(b=c);return!!b},this);return b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))},_useProxy:function(a,b){return b&&
b.isAdmin&&!u.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!u.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new g(a);return a.scheme+"://"+a.host+(t.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=b.indexOf("/admin"));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&
(c=b.length-1);return-1<c?a.substring(0,c):a},_hasSameServerInstance:function(a,b){"/"===a.substr(-1)&&(a=a.slice(0,-1));a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=this._normalizeAGOLorgDomain(a);b=this._normalizeAGOLorgDomain(b);a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b},_normalizeAGOLorgDomain:function(a){var b=/^https?:\/\/.+\.maps\.arcgis\.com/i,c=/^https?:\/\/.+\.mapsdevext\.arcgis\.com/i,d=/^https?:\/\/.+\.mapsqa\.arcgis\.com/i;b.test(a)?a=a.replace(b,
"https://www.arcgis.com"):c.test(a)?a=a.replace(c,"https://devext.arcgis.com"):d.test(a)&&(a=a.replace(d,"https://qaext.arcgis.com"));return a},_sanitizeUrl:function(a){var b=(q.defaults.io.proxyUrl||"").toLowerCase(),c=b?a.toLowerCase().indexOf(b+"?"):-1;-1!==c&&(a=a.substring(c+b.length+1));a=u.normalize(a);return u.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||
this._isAdminResource(a)},_isIdenticalService:function(a,b){var c;this._isRESTService(a)&&this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),c=a===b,c||(c=/(.*)\/(MapServer|FeatureServer).*/ig,c=a.replace(c,"$1")===b.replace(c,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||!this._isPortalDomain(a)||(c=!0);return c},_isPortalDomain:function(a){a=a.toLowerCase();var d=(new g(a)).authority,f=this._portalConfig,
e=-1!==d.indexOf(this._agolSuffix);!e&&f&&(e=this._hasSameServerInstance(this._getServerInstanceRoot(f.restBaseUrl),a));e||(!this._arcgisUrl&&(f=b.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new g(f)).authority),this._arcgisUrl&&(e=this._arcgisUrl.toLowerCase()===d));e||(e=c.some(this._portals,function(b){return this._hasSameServerInstance(b,a)},this));return e=e||this._agsPortal.test(a)},_isIdProvider:function(a,b){var d=-1,f=-1;c.forEach(this._gwDomains,function(c,e){-1===d&&c.regex.test(a)&&
(d=e);-1===f&&c.regex.test(b)&&(f=e)});var e=!1;if(-1<d&&-1<f)if(0===d||4===d){if(0===f||4===f)e=!0}else if(1===d){if(1===f||2===f)e=!0}else 2===d?2===f&&(e=!0):3===d&&3===f&&(e=!0);if(!e){var g=this.findServerInfo(b),h=g&&g.owningSystemUrl;h&&C(g)&&this._isPortalDomain(h)&&this._isIdProvider(a,h)&&(e=!0)}return e},_isPublic:function(a){a=this._sanitizeUrl(a);return c.some(this._publicUrls,function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var d=-1;c.some(b.resources,function(b,c){return this._isIdenticalService(a,
b)?(d=c,!0):!1},this);return d},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,d;if((b=this._isRESTService(a))||this._isAdminResource(a))return d=a.toLowerCase().indexOf(b?this._agsRest:"/admin/"),b=a.substring(0,d)+"/admin/generateToken",a=a.substring(0,d)+"/rest/info",d=w({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),d.adminUrl_=b,d;if(this._isPortalDomain(a)){var f="";c.some(this._gwDomains,
function(b){b.regex.test(a)&&(f=b.tokenServiceUrl);return!!f});f||c.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(f=b+this._gwTokenUrl);return!!f},this);f||(d=a.toLowerCase().indexOf("/sharing"),-1!==d&&(f=a.substring(0,d)+this._gwTokenUrl));f||(f=this._getOrigin(a)+this._gwTokenUrl);f&&(b=(new g(a)).port,/^http:\/\//i.test(a)&&"7080"===b&&(f=f.replace(/:7080/i,":7443")),f=f.replace(/http:/i,"https:"));return f}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return w({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a=null;if(k.isSupported()){var b=this._getAllCookies("esri_auth"),c;for(c=0;c<
b.length;c++){var d=h.fromJson(b[c]);if(d.portalApp){a=d;break}}}a&&(b=null,a.expires&&("number"===typeof a.expires?b=a.expires:"string"===typeof a.expires&&(b=Date.parse(a.expires)),isNaN(b)&&(b=null),a.expires=b),b&&b<(new Date).getTime()&&(a=null));return a},_getAllCookies:function(a){var b=[],c=document.cookie.match(new RegExp("(?:^|; )"+n.escapeString(a)+"\x3d([^;]*)","g"));if(c)for(a=0;a<c.length;a++){var d=c[a],f=d.indexOf("\x3d");-1<f&&(d=d.substring(f+1),b.push(decodeURIComponent(d)))}return b},
_doPortalSignIn:function(a){if(k.isSupported()){var b=this._getEsriAuthCookie(),c=this._portalConfig,d=window.location.href,f=this.findServerInfo(a);if(this.useSignInPage&&(c||this._isPortalDomain(d)||b)&&(f?f.hasPortal||f.owningSystemUrl&&this._isPortalDomain(f.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(d,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||u.hasSameOrigin(d,a,!0)))return!0}return!1},_checkProtocol:function(a,
c,d,f){var g=!0;f=f?c.adminTokenServiceUrl:c.tokenServiceUrl;0!==b.trim(f).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||q.defaults.io.useCors&&(u.canUseXhr(f)||u.canUseXhr(u.getProxyUrl(!0).path))||(g=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:c}):!1,g||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.code="IdentityManagerBase.4",a.log=!!e.isDebug,d(a)));return g},_enqueue:function(a,
b,c,f,e,g){f||(f=new d(v._dfdCanceller));f.resUrl_=a;f.sinfo_=b;f.options_=c;f.admin_=e;f.refresh_=g;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(f)):this._xoReqs.push(f):this._doSignIn(f);return f},_doSignIn:function(a){this._busy=a;this._rejectOnPersistedPageShow=!1;var d=this,f=function(b){var f=a.options_&&a.options_.resource,e=a.resUrl_,g=a.refresh_,h=!1;
-1===c.indexOf(d.credentials,b)&&(g&&-1!==c.indexOf(d.credentials,g)?(g.userId=b.userId,g.token=b.token,g.expires=b.expires,g.validity=b.validity,g.ssl=b.ssl,g.creationTime=b.creationTime,h=!0,b=g):d.credentials.push(b));b.resources||(b.resources=[]);b.resources.push(f||e);b.scope=d._isServerRsrc(e)?"server":"portal";b.onTokenChange();var f=d._soReqs,k={};d._soReqs=[];c.forEach(f,function(a){if(!this._isIdenticalService(e,a.resUrl_)){var c=this._getSuffix(a.resUrl_);k[c]||(k[c]=!0,b.resources.push(a.resUrl_))}},
d);a.callback(b);c.forEach(f,function(a){this._hasSameServerInstance(this._getServerInstanceRoot(e),a.resUrl_)?a.callback(b):this._soReqs.push(a)},d);d._busy=a.resUrl_=a.sinfo_=a.refresh_=null;if(!h)d.onCredentialCreate({credential:b});d._soReqs.length?d._doSignIn(d._soReqs.shift()):d._xoReqs.length&&d._doSignIn(d._xoReqs.shift())},g=function(b){a.errback(b);d._busy=a.resUrl_=a.sinfo_=a.refresh_=null;d._soReqs.length?d._doSignIn(d._soReqs.shift()):d._xoReqs.length&&d._doSignIn(d._xoReqs.shift())},
h=function(b,c,h,k){var l=a.sinfo_,m=!a.options_||!1!==a.options_.prompt,n=l.hasPortal&&d._findOAuthInfo(a.resUrl_);d._doPortalSignIn(a.resUrl_)?(b=d._getEsriAuthCookie(),n=d._portalConfig,b?f(new E({userId:b.email,server:l.server,token:b.token,expires:b.expires})):m?(m="",b=window.location.href,m=d.signInPage?d.signInPage:n?n.baseUrl+n.signin:d._isIdProvider(b,a.resUrl_)?d._getOrigin(b)+"/home/signin.html":l.tokenServiceUrl.replace(d._rePortalTokenSvc,"")+"/home/signin.html",m=m.replace(/http:/i,
"https:"),n&&!1===n.useSSL&&(m=m.replace(/https:/i,"http:")),0===b.toLowerCase().replace("https","http").indexOf(m.toLowerCase().replace("https","http"))?(l=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),l.code="IdentityManagerBase.5",l.log=!!e.isDebug,g(l)):(d._rejectOnPersistedPageShow=!0,d._redirectFunc?d._redirectFunc({signInPage:m,returnUrlParamName:"returnUrl",returnUrl:b,resourceUrl:a.resUrl_,serverInfo:l}):window.location=
m+"?returnUrl\x3d"+window.escape(b))):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=!!e.isDebug,g(l))):b?f(new E({userId:b,server:l.server,token:h,expires:t.isDefined(k)?Number(k):null,ssl:!!c})):n?(b=n._oAuthCred,b||(c=new z(n,window.localStorage),h=new z(n,window.sessionStorage),c.isValid()&&h.isValid()?c.expires>h.expires?(b=c,h.destroy()):(b=h,c.destroy()):b=c.isValid()?c:h,n._oAuthCred=b),b.isValid()?f(new E({userId:b.userId,server:l.server,token:b.token,expires:b.expires,
ssl:b.ssl,_oAuthCred:b})):d._oAuthHash&&d._oAuthHash.state.portalUrl===n.portalUrl?(m=d._oAuthHash,l=new E({userId:m.username,server:l.server,token:m.access_token,expires:(new Date).getTime()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,_oAuthCred:b}),b.storage=m.persist?window.localStorage:window.sessionStorage,b.token=l.token,b.expires=l.expires,b.userId=l.userId,b.ssl=l.ssl,b.save(),d._oAuthHash=null,f(l)):m?a._pendingDfd=d.oAuthSignIn(a.resUrl_,l,n,a.options_).addCallbacks(f,
g):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=!!e.isDebug,g(l))):m?d._checkProtocol(a.resUrl_,l,g,a.admin_)&&(m=a.options_,a.admin_&&(m=m||{},m.isAdmin=!0),a._pendingDfd=d.signIn(a.resUrl_,l,m).addCallbacks(f,g)):(l=Error("User is not signed in."),l.code="IdentityManagerBase.6",l.log=!!e.isDebug,g(l))},k=function(){var b=a.sinfo_,e=b.owningSystemUrl,h=a.options_,k,l,m,n;h&&(k=h.token,l=h.error,m=h.prompt);(n=d._findCredential(e,{token:k,resource:a.resUrl_}))||c.some(d.credentials,
function(a){this._isIdProvider(e,a.server)&&(n=a);return!!n},d);n?(h=d.findCredential(a.resUrl_,n.userId))?f(h):D(b,d._legacyFed)?(h=n.toJson(),h.server=b.server,h.resources=null,f(new E(h))):(a._pendingDfd=d.generateToken(d.findServerInfo(n.server),null,{serverUrl:a.resUrl_,token:n.token,ssl:n.ssl})).addCallbacks(function(c){f(new E({userId:n.userId,server:b.server,token:c.token,expires:t.isDefined(c.expires)?Number(c.expires):null,ssl:!!c.ssl,isAdmin:a.admin_,validity:c.validity}))},g):(d._busy=
null,k&&(a.options_.token=null),(a._pendingDfd=d.getCredential(e.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:b.owningTenant,token:k,error:l,prompt:m})).addCallbacks(function(b){d._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){g(a)}))};this._errbackFunc=g;var l=a.sinfo_.owningSystemUrl,m=this._isServerRsrc(a.resUrl_),n=a.sinfo_._restInfoDfd;n?n.addCallbacks(function(c){var f=a.sinfo_;f.adminTokenServiceUrl=f._restInfoDfd.adminUrl_;f._restInfoDfd=null;f.tokenServiceUrl=
b.getObject("authInfo.tokenServicesUrl",!1,c)||b.getObject("authInfo.tokenServiceUrl",!1,c)||b.getObject("tokenServiceUrl",!1,c);f.shortLivedTokenValidity=b.getObject("authInfo.shortLivedTokenValidity",!1,c);f.currentVersion=c.currentVersion;f.owningTenant=c.owningTenant;(c=f.owningSystemUrl=c.owningSystemUrl)&&d._portals.push(c);m&&c?k():h()},function(){a.sinfo_._restInfoDfd=null;var b=Error("Unknown resource - could not find token service endpoint.");b.code="IdentityManagerBase.2";b.log=!!e.isDebug;
g(b)}):m&&l?k():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(b){var c={},f,e,g,h;b&&(f=b.user&&b.user.username,c.username=f,c.allSSL=b.allSSL,e=b.supportsOAuth,g=b.currentVersion,"multitenant"===b.portalMode&&(h=b.customBaseUrl));a.sinfo_.webTierAuth=!!f;return f&&d.normalizeWebTierAuth?d.generateToken(a.sinfo_,null,{ssl:c.allSSL}).addBoth(function(a){c.portalToken=a&&a.token;c.tokenExpiration=a&&a.expires;return c}):!f&&e&&4.4<=parseFloat(g)&&!d._doPortalSignIn(a.resUrl_)?d._generateOAuthInfo({portalUrl:a.sinfo_.server,
customBaseUrl:h,owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return c}):c}).always(function(b){a.sinfo_._selfReq=null;b?h(b.username,b.allSSL,b.portalToken,b.tokenExpiration):h()}):h()},_generateOAuthInfo:function(a){var b=this,c,f=a.portalUrl,e=a.customBaseUrl,g=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){c=window.location.href;var h=c.indexOf("?");-1<h&&(c=c.slice(0,h));h=c.search(/\/(apps|home)\//);c=-1<h?c.slice(0,
h):null}a&&c?(this._hasTestedIfAppIsOnPortal=!0,a=w({url:c+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){b.defaultOAuthInfo=new x({appId:"arcgisonline",popup:!0,popupCallbackUrl:c+"/home/oauth-callback.html"})})):(a=new d,a.resolve(),a=a.promise);return a.then(function(){if(b.defaultOAuthInfo)return f=f.replace(/^http:/i,"https:"),w({url:f+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:g,client_id:b.defaultOAuthInfo.appId,redirect_uri:u.getAbsoluteUrl(b.defaultOAuthInfo.popupCallbackUrl),
f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(a){if(a.valid){var c=b.defaultOAuthInfo.clone();c.portalUrl=a.urlKey&&e?"https://"+a.urlKey+"."+e:f;b.oAuthInfos.push(c)}})})}});E=a(A,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(a){b.mixin(this,a);this.resources=this.resources||[];t.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var a=this,b=this.resources&&this.resources[0],d=p.id.findServerInfo(this.server),
f=d&&d.owningSystemUrl,e=!!f&&"server"===this.scope,g=e&&D(d,p.id._legacyFed),h=e&&p.id.findServerInfo(f),k,l=(k=d.webTierAuth)&&p.id.normalizeWebTierAuth,m=y[this.server],m=m&&m[this.userId],n={username:this.userId,password:m},q;if(!k||l)if(e&&!h&&c.some(p.id.serverInfos,function(a){p.id._isIdProvider(f,a.server)&&(h=a);return!!h}),k=h&&p.id.findCredential(h.server,this.userId),!e||k)if(g)k.refreshToken();else{if(e)q={serverUrl:b,token:k&&k.token,ssl:k&&k.ssl};else if(l)n=null,q={ssl:this.ssl};else if(m)this.isAdmin&&
(q={isAdmin:!0});else{var u;b&&(b=p.id._sanitizeUrl(b),this._enqueued=1,u=p.id._enqueue(b,d,null,null,this.isAdmin,this),u.addCallback(function(){a._enqueued=0;a.refreshServerTokens()}).addErrback(function(){a._enqueued=0}));return u}return p.id.generateToken(e?h:d,e?null:n,q).addCallback(function(b){a.token=b.token;a.expires=t.isDefined(b.expires)?Number(b.expires):null;a.creationTime=(new Date).getTime();a.validity=b.validity;a.onTokenChange();a.refreshServerTokens()}).addErrback(function(){})}},
refreshServerTokens:function(){"portal"===this.scope&&c.forEach(p.id.credentials,function(a){var b=p.id.findServerInfo(a.server),c=b&&b.owningSystemUrl;a!==this&&a.userId===this.userId&&c&&"server"===a.scope&&(p.id._hasSameServerInstance(this.server,c)||p.id._isIdProvider(c,this.server))&&(D(b,p.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.onTokenChange()):a.refreshToken())},this)},onTokenChange:function(a){clearTimeout(this._refreshTimer);
var b=this.server&&p.id.findServerInfo(this.server),c=(b=b&&b.owningSystemUrl)&&p.id.findServerInfo(b);!1!==a&&(!b||"portal"===this.scope||c&&c.webTierAuth&&!p.id.normalizeWebTierAuth)&&(t.isDefined(this.expires)||t.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=c.indexOf(p.id.credentials,
this);-1<a&&p.id.credentials.splice(a,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var a=t.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b.slice());return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,
c=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>c&&(c=0);this._refreshTimer=setTimeout(b.hitch(this,this.refreshToken),c>a?c-a:c)}});I.Credential=E;return p.IdentityManagerBase=I})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(a,e){a.cookie=function(a,c,d){var b=document.cookie,g;if(1==arguments.length)g=(g=b.match(new RegExp("(?:^|; )"+e.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(g[1]):void 0;else{d=d||{};b=d.expires;if("number"==
typeof b){var f=new Date;f.setTime(f.getTime()+864E5*b);b=d.expires=f}b&&b.toUTCString&&(d.expires=b.toUTCString());c=encodeURIComponent(c);var b=a+"\x3d"+c,k;for(k in d)b+="; "+k,f=d[k],!0!==f&&(b+="\x3d"+f);document.cookie=b}return g};a.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};
return a.cookie})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(a,e,b,c,d){a=a(null,{declaredClass:"esri.ServerInfo",constructor:function(a){e.mixin(this,a)},toJson:function(){return d.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,
hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return c.ServerInfo=a})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(a,e,b,c){e=e(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(a,b){this.oAuthInfo=a;this.storage=b;this._init()},isValid:function(){var a=!1;if(this.oAuthInfo&&this.token&&this.userId){var b=(new Date).getTime();
this.expires>b&&(this.expires-b)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(a=!0)}return a},save:function(){if(this.storage){var a=this._load(),b=this.oAuthInfo;if(b&&b.authNamespace&&b.portalUrl){var e=a[b.authNamespace];e||(e=a[b.authNamespace]={});e[b.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",c.stringify(a))}catch(f){}}}},destroy:function(){var a=this._load(),b=this.oAuthInfo;if(b&&b.authNamespace&&b.portalUrl&&
this.storage){var e=a[b.authNamespace];if(e){delete e[b.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",c.stringify(a))}catch(f){}}}b&&(this.oAuthInfo=b._oAuthCred=null)},_init:function(){var a=this._load(),b=this.oAuthInfo;b&&b.authNamespace&&b.portalUrl&&(a=a[b.authNamespace])&&(a=a[b.portalUrl])&&(this.expires=a.expires,this.ssl=a.ssl,this.token=a.token,this.userId=a.userId)},_load:function(){var a={};if(this.storage){var b=this.storage.getItem("esriJSAPIOAuth");if(b)try{a=c.parse(b)}catch(g){}}return a}});
return a.OAuthCredential=e})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(a,e,b,c,d){var h=b(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(a){c.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status"},a)},_oAuthCred:null,
toJson:function(){return e.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures})},clone:function(){return new h(this.toJson())}});c.setObject("arcgis.OAuthInfo",h,a);return h})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(a,e,b,c,d,h,g,f){return a("dijit.form.Form",[d,h,g,f],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){e.set(this.domNode,
"encType",a);c("ie")&&(this.domNode.encoding=a);this._set("encType",a)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);a.stopPropagation();a.preventDefault();return!1},_onSubmit:function(a){var c=this.constructor.prototype;if(this.execute!=
c.execute||this.onExecute!=c.onExecute)b.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,b,c,d){var g=this._oAuthDfd=new f;g.resUrl_=a;g.sinfo_=b;g.oinfo_=c;var h=!d||!1!==d.oAuthPopupConfirmation;if(!c.popup||!h)return this._doOAuthSignIn(a,b,c),g;this._nls||(this._nls=m.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;b=d&&d.error;d=d&&d.token;e.hide(a.errMsg_);b&&403==b.code&&d&&(l.set(a.errMsg_,"innerHTML",this._nls.forbidden),e.show(a.errMsg_));a.show();
return g},setOAuthResponseHash:function(b){var c=this._oAuthDfd;this._oAuthDfd=null;if(c&&b)if(clearInterval(this._oAuthIntervalId),"#"===b.charAt(0)&&(b=b.substring(1)),b=n.queryToObject(b),b.error)b=Error("access_denied"===b.error?"ABORTED":"OAuth: "+b.error+" - "+b.error_description),b.code="IdentityManagerBase.2",b.log=!!g.isDebug,c.errback(b);else{var d=c.oinfo_._oAuthCred,f=new a({userId:b.username,server:c.sinfo_.server,token:b.access_token,expires:(new Date).getTime()+1E3*Number(b.expires_in),
ssl:"true"===b.ssl,_oAuthCred:d});d.storage=b.persist?window.localStorage:window.sessionStorage;d.token=f.token;d.expires=f.expires;d.userId=f.userId;d.ssl=f.ssl;d.save();c.callback(f)}},_createOAuthDialog:function(){var a=this._nls,c=b.substitute(a,this._oAuthDialogContent),f=new d({title:a.title,content:c,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=f.esriIdMgr_._oAuthDfd;f.hide_();f.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=
f.esriIdMgr_._oAuthDfd;f.esriIdMgr_._oAuthDfd=null;f.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!g.isDebug;a.errback(b)},hide_:function(){e.hide(f.errMsg_);f.hide();d._DialogLevelManager.hide(f)}}),a=f.domNode;f.btnSubmit_=h.byNode(k.query(".esriIdSubmit",a)[0]);f.btnCancel_=h.byNode(k.query(".esriIdCancel",a)[0]);f.errMsg_=k.query(".esriErrorMsg",a)[0];f.connect(f.btnSubmit_,"onClick",f.execute_);f.connect(f.btnCancel_,"onClick",f.onCancel);f.connect(f,"onCancel",f.cancel_);
return f},_doOAuthSignIn:function(a,b,d){var f=this,e={client_id:d.appId,response_type:"token",state:q.stringify({portalUrl:d.portalUrl}),expiration:d.expiration,locale:d.locale,redirect_uri:d.popup?c.getAbsoluteUrl(d.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};d.forceLogin&&(e.force_login=!0);var h=d.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",k=h+"?"+n.objectToQuery(e);if(d.popup){var l;7===p("ie")?(l=window.open(d.popupCallbackUrl,"esriJSAPIOAuth",d.popupWindowFeatures),
l.location=k):l=window.open(k,"esriJSAPIOAuth",d.popupWindowFeatures);l?(l.focus(),this._oAuthDfd.oAuthWin_=l,this._oAuthIntervalId=setInterval(function(){if(l.closed){clearInterval(f._oAuthIntervalId);var a=f._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!g.isDebug;a.errback(b)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=!!g.isDebug,this._oAuthDfd.errback(a))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:e,
authorizeUrl:h,resourceUrl:a,serverInfo:b,oAuthInfo:d}):window.location=k}}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(a,e,b,c,d,h,g,f,k,l,m,n,p){function q(a){return f.create(function(f){function e(h){if(h=n.receiveMessage(h))switch(h.type){case z:h=a;var l=d.workers.loaderUrl||
m.DEFAULT_LOADER_URL,p;null!=d["default"]?(p=b({},d),delete p["default"],p=JSON.parse(JSON.stringify(p))):p=JSON.parse(JSON.stringify(d));var q=d.workers.loaderConfig,q=m.default({baseUrl:q.baseUrl,locale:c.locale,has:b({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":k("esri-secure-context"),"esri-workers-supports-transfer-arraybuffer":k("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},q.has),map:b({},q.map),paths:b({},
q.paths),packages:q.packages||[]});h.postMessage({type:A,configure:{esriConfig:p,loaderUrl:l,loaderConfig:q}});break;case w:a.removeEventListener("message",e),a.removeEventListener("error",g),f(a)}}function g(b){b.preventDefault();a.removeEventListener("message",e);a.removeEventListener("error",g);u.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new p;a.addEventListener("message",e);a.addEventListener("error",g)}a.addEventListener("message",e);a.addEventListener("error",
g)})}Object.defineProperty(e,"__esModule",{value:!0});var t=l.normalize(a.toUrl("./worker.js")),r=!l.hasSameOrigin(t,location.href),u=g.getLogger("esri.core.workers"),v=null,w=n.MessageType.CONFIGURED,A=n.MessageType.CONFIGURE,z=n.MessageType.HANDSHAKE;e.createWorker=function(){if(!k("esri-workers"))return q(new p);if(!r){var a=void 0;try{a=new Worker(t)}catch(y){u.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new p}return q(a)}v||(v=h(t,{responseType:"text"}));
return v.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).catch(function(a){u.warn("Failed to create Worker. Fallback to execute module in main thread",a);return new p}).then(function(a){return q(a)})}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(a,e,b,c,d){function h(){var a={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,
supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},b=document.createElement("canvas");if(!b)return a;var c=d.createContext(b,{failIfMajorPerformanceCaveat:!0},"webgl");!c&&(c=d.createContext(b,{},"webgl"))&&(a.majorPerformanceCaveat=!0);if(!c)return a;b=c.getParameter(c.VERSION);if(!b)return a;if(b=b.match(/^WebGL\s+([\d.]*)/))a.version=parseFloat(b[1]),a.available=.94<=a.version,b=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT),a.supportsHighPrecisionFragment=
b&&0<b.precision,a.supportsVertexShaderSamplers=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),a.supportsElementIndexUint=null!==c.getExtension("OES_element_index_uint"),a.supportsStandardDerivatives=null!==c.getExtension("OES_standard_derivatives");return a}function g(){var a={available:!1,version:0},b=document.createElement("canvas");if(!b)return a;b=d.createContext(b,{},"webgl2");if(!b)return a;a.available=!0;b=b.getParameter(b.VERSION);if(!b)return a;if(b=b.match(/^WebGL\s+([\d.]*)/))a.version=
parseFloat(b[1]);return a}(function(){var a=navigator.userAgent,d=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),a=a.match(/iPhone/i);d&&b.add("esri-mobile",d);a&&b.add("esri-iPhone",a);b.add("esri-phonegap",!!c.cordova);b.add("esri-cors",b("esri-phonegap")||"XMLHttpRequest"in c&&"withCredentials"in new XMLHttpRequest);b.add("esri-geolocation",function(){return!!navigator.geolocation});b.add("esri-canvas-svg-support",function(){return!(b("trident")||b("ie"))});b.add("esri-secure-context",
function(){if("isSecureContext"in c)return c.isSecureContext;if(c.location&&c.location.origin)return 0===c.location.origin.indexOf("https:")});b.add("esri-wasm","WebAssembly"in c);b("host-webworker")||(b.add("esri-workers","Worker"in c),b.add("esri-script-sandbox",function(){return"MessageChannel"in c&&"HTMLIFrameElement"in c&&"sandbox"in HTMLIFrameElement.prototype}),b.add("esri-url-encodes-apostrophe",function(){var a=c.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")}),f||
(f=h()),b.add("esri-webgl",f.available),b.add("esri-webgl-high-precision-fragment",f.supportsHighPrecisionFragment),b.add("esri-webgl-vertex-shader-samplers",f.supportsVertexShaderSamplers),b.add("esri-webgl-element-index-uint",f.supportsElementIndexUint),b.add("esri-webgl-standard-derivatives",f.supportsStandardDerivatives),b.add("esri-webgl-major-performance-caveat",f.majorPerformanceCaveat),b.add("esri-featurelayer-webgl-labeling",!0),k||(k=g()),b.add("esri-webgl2",k.available))})();var f=null,
k=null;return b})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(a,e){function b(a,b,c){void 0===b&&(b={});var d;switch(c){case "webgl":d=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":d=["webgl2"];break;default:d=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var f=0;f<d.length;f++){var e=d[f];try{c=a.getContext(e,b)}catch(p){}if(c)break}return c}function c(a,b){(a=a.parentNode)&&(a.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
b+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(e,"__esModule",{value:!0});e.createContextOrErrorHTML=function(a,f,e){void 0===f&&(f={});if(!window.WebGLRenderingContext)return c(a,d),null;f=b(a,f,e);return f?f:(c(a,h),null)};e.createContext=b;var d='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',h='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(a,e,b,c,d){Object.defineProperty(e,"__esModule",{value:!0});e.DEFAULT_LOADER_URL=d.makeAbsolute(d.removeQueryParameters(a.toUrl("./worker-init.js")));e.DEFAULT_CONFIG={baseUrl:function(){var b=d.removeQueryParameters(a.toUrl("dojo/x.js"));return d.makeAbsolute(b.slice(0,b.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},
{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};e.default=
function(c){var g={async:c.async,isDebug:c.isDebug,locale:c.locale,baseUrl:c.baseUrl,has:b({},c.has),map:b({},c.map),packages:c.packages&&c.packages.concat()||[],paths:b({},c.paths)};c.hasOwnProperty("async")||(g.async=!0);c.hasOwnProperty("isDebug")||(g.isDebug=!1);c.baseUrl||(g.baseUrl=e.DEFAULT_CONFIG.baseUrl);e.DEFAULT_CONFIG.packages.forEach(function(c){a:{for(var f=g.packages,e=0;e<f.length;e++)if(f[e].name===c.name)break a;c=b({},c);e=d.removeQueryParameters(a.toUrl(c.name+"/x.js"));e=e.slice(0,
e.length-5);c.location=d.makeAbsolute(e);f.push(c)}});c=g.map=g.map||{};for(var f=0,h=Object.keys(e.DEFAULT_CONFIG.map);f<h.length;f++){var l=h[f];c[l]||(c[l]=e.DEFAULT_CONFIG.map[l])}return g}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(a,e,b,c,d){var h=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=
function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),g=c.MutationObserver||c.WebKitMutationObserver,f=function(){var a;if(c.process&&c.process.nextTick)a=function(a){c.process.nextTick(a)};else if(c.Promise)a=function(a){c.Promise.resolve().then(a)};else if(g){var b=[],d=document.createElement("div");(new g(function(){for(;0<b.length;)b.shift()()})).observe(d,{attributes:!0});a=function(a){b.push(a);d.setAttribute("queueStatus","1")}}return a}();return function(){function c(){this._dispatcher=
new h;this._isInitialized=!1;this._workerPostMessage({type:d.MessageType.HANDSHAKE})}c.prototype.terminate=function(){};Object.defineProperty(c.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&
this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});c.prototype.postMessage=function(a,b){var c=this;f(function(){c._workerMessageHandler(new MessageEvent("message",{data:a}))})};c.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};c.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};c.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,
b,c)};c.prototype._workerPostMessage=function(a,b){var c=this;f(function(){c.dispatchEvent(new MessageEvent("message",{data:a}))})};c.prototype._workerMessageHandler=function(c){var f=this;if(c=d.receiveMessage(c)){var e=c.jobId;switch(c.type){case d.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:d.MessageType.CONFIGURED});break;case d.MessageType.OPEN:c=c.modulePath,b("esri-webpack")?a(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline",
"esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",c],function(a,b,c,g,h,k,l,m){switch(m){case "esri/views/vectorTiles/WorkerTileHandler":break;case "esri/views/2d/layers/features/Pipeline":b=c;break;case "esri/views/3d/layers/PointCloudWorker":b=g;break;case "esri/views/3d/layers/SceneLayerWorker":b=h;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":b=
k;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":b=l;break;default:b=m}a=a.connect(b);f._workerPostMessage({type:d.MessageType.OPENED,jobId:e,data:a})}):a(["esri/core/workers/RemoteClient",c],function(a,b){a=a.connect(b);f._workerPostMessage({type:d.MessageType.OPENED,jobId:e,data:a})})}}};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/has ../../core/promiseUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),
function(a,e,b,c,d,h,g){var f;b("stable-symbol-rendering")&&(f=new Set);return function(){function a(a,b,c){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=a;this.height=b;this._glyphSource=c;this._binPack=new h(a-4,b-4);this._glyphData.push(new Uint8Array(a*b));this._dirties.push(!0);this._textures.push(void 0)}a.prototype.getGlyphItems=function(a,e,g){var k=this,l=[],m=this._glyphSource,
n=new Set;a=1/256;for(var u=0;u<g.length;u++)n.add(Math.floor(g[u]*a));var v=[];n.forEach(function(a){if(256>=a){var b=e+a;k._rangePromises.has(b)?v.push(k._rangePromises.get(b)):(a=m.getRange(e,a).always(function(){k._rangePromises["delete"](b)}),k._rangePromises.set(b,a),v.push(a))}});return c.all(v).then(function(a){a=k._glyphIndex[e];a||(a={},k._glyphIndex[e]=a);var c;if(b("stable-symbol-rendering")){f.clear();for(var p=0;p<g.length;p++)c=g[p],f.add(c);var q=[];n.forEach(function(a){q.push(a)});
q.sort();c=[];for(p=0;p<q.length;p++)for(var t=q[p],u=0;256>u;++u)c.push(256*t+u)}else c=g;p=0;for(t=c;p<t.length;p++)if(c=t[p],u=a[c]){if(!b("stable-symbol-rendering")||f.has(c))l[c]={rect:u.rect,metrics:u.metrics,page:u.page}}else{var r=m.getGlyph(e,c);if(r&&r.metrics){var u=r.metrics,v=void 0;if(0===u.width)v=new d(0,0,0,0);else{var w=u.width+6,H=u.height+6,Q=w%4?4-w%4:4,U=H%4?4-H%4:4;1===Q&&(Q=5);1===U&&(U=5);v=k._binPack.allocate(w+Q,H+U);v.isEmpty&&(k._dirties[k._currentPage]||(k._glyphData[k._currentPage]=
null),k._currentPage=k._glyphData.length,k._glyphData.push(new Uint8Array(k.width*k.height)),k._dirties.push(!0),k._textures.push(void 0),k._binPack=new h(k.width-4,k.height-4),v=k._binPack.allocate(w+Q,H+U));var Q=k._glyphData[k._currentPage],r=r.bitmap,G=U=void 0;if(r)for(var R=0;R<H;R++)for(var U=w*R,G=k.width*(v.y+R+1)+v.x,X=0;X<w;X++)Q[G+X+1]=r[U+X]}a[c]={rect:v,metrics:u,tileIDs:null,page:k._currentPage};if(!b("stable-symbol-rendering")||f.has(c))l[c]={rect:v,metrics:u,page:k._currentPage};
k._dirties[k._currentPage]=!0}}return l})};a.prototype.removeGlyphs=function(a){for(var b in this._glyphIndex){var c=this._glyphIndex[b];if(c){var d=void 0,f;for(f in c)if(d=c[f],d.tileIDs["delete"](a),0===d.tileIDs.size){for(var e=this._glyphData[d.page],g=d.rect,h=void 0,k=void 0,l=0;l<g.height;l++)for(h=this.width*(g.y+l)+g.x,k=0;k<g.width;k++)e[h+k]=0;delete c[f];this._dirties[d.page]=!0}}}};a.prototype.bind=function(a,b,c,d){void 0===d&&(d=0);this._textures[c]||(this._textures[c]=new g(a,{pixelFormat:6406,
dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var f=this._textures[c];f.setSamplingMode(b);this._dirties[c]&&f.setData(this._glyphData[c]);a.bindTexture(f,d);this._dirties[c]=!1};a.prototype.dispose=function(){this._binPack=null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require","exports"],function(a,e){return function(){function a(a,
b,e,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===e&&(e=0);void 0===g&&(g=0);this.x=a;this.y=b;this.width=e;this.height=g}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require","exports","./Rect"],function(a,e,b){return function(){function a(a,c){this._height=this._width=0;this._free=[];this._width=a;this._height=c;this._free.push(new b(0,
0,a,c))}Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});a.prototype.allocate=function(a,c){if(a>this._width||c>this._height)return new b;for(var d=null,f=-1,e=0;e<this._free.length;++e){var h=this._free[e];a<=h.width&&c<=h.height&&(null===d||h.y<=d.y&&h.x<=d.x)&&(d=h,f=e)}if(null===d)return new b;this._free.splice(f,1);d.width<
d.height?(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,c)),d.height>c&&this._free.push(new b(d.x,d.y+c,d.width,d.height-c))):(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,d.height)),d.height>c&&this._free.push(new b(d.x,d.y+c,a,d.height-c)));return new b(d.x,d.y,a,c)};a.prototype.release=function(a){for(var b=0;b<this._free.length;++b){var c=this._free[b];if(c.y===a.y&&c.height===a.height&&c.x+c.width===a.x)c.width+=a.width;else if(c.x===a.x&&c.width===a.width&&c.y+c.height===a.y)c.height+=
a.height;else if(a.y===c.y&&a.height===c.height&&a.x+a.width===c.x)c.x=a.x,c.width+=a.width;else if(a.x===c.x&&a.width===c.width&&a.y+a.height===c.y)c.y=a.y,c.height+=a.height;else continue;this._free.splice(b,1);this.release(a)}this._free.push(a)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports","../../request","../../core/pbf","../../core/promiseUtils"],function(a,e,b,c,d){var h=function(){function a(a){this._metrics=[];this._bitmaps=
[];if(a)for(;a.next();)switch(a.tag()){case 1:for(var b=a.getMessage();b.next();)switch(b.tag()){case 3:for(var c=b.getMessage(),d=void 0,f=void 0,e=void 0,g=void 0,h=void 0,k=void 0,v=void 0;c.next();)switch(c.tag()){case 1:d=c.getUInt32();break;case 2:f=c.getBytes();break;case 3:e=c.getUInt32();break;case 4:g=c.getUInt32();break;case 5:h=c.getSInt32();break;case 6:k=c.getSInt32();break;case 7:v=c.getUInt32();break;default:c.skip()}d&&(this._metrics[d]={width:e,height:g,left:h,top:k,advance:v},this._bitmaps[d]=
f);break;default:b.skip()}break;default:a.skip()}}a.prototype.getMetrics=function(a){return this._metrics[a]};a.prototype.getBitmap=function(a){return this._bitmaps[a]};return a}(),g=function(){function a(){this._ranges=[]}a.prototype.getRange=function(a){return this._ranges[a]};a.prototype.addRange=function(a,b){this._ranges[a]=b};return a}();return function(){function a(a){this._glyphInfo={};this._baseURL=a}a.prototype.getRange=function(a,f){var e=this._getFontStack(a);if(e.getRange(f))return d.resolve();
var g=256*f,k=g+255;a=this._baseURL.replace("{fontstack}",a).replace("{range}",g+"-"+k);return b(a,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){e.addRange(f,new h(new c(new Uint8Array(a.data),new DataView(a.data))))}).catch(function(){e.addRange(f,new h)})};a.prototype.getGlyph=function(a,b){if(a=this._getFontStack(a)){var c=Math.floor(b/256);if(!(256<c)&&(a=a.getRange(c)))return{metrics:a.getMetrics(b),bitmap:a.getBitmap(b)}}};a.prototype._getFontStack=function(a){var b=
this._glyphInfo[a];b||(b=this._glyphInfo[a]=new g);return b};return a}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(a,e){return function(){function a(a,b,e,g){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=e||0;this._end=g||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;
var b=this._decodeVarint();this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>
this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=
function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);
return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),
b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);return b};a.prototype.getMessage=function(){var b=this._getLength(),d=this._pos,d=new a(this._data,this._dataView,d,d+b);this._skip(b);return d};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");
this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,b=this._pos,e=0,g;if(10<=this._end-b){if(g=a[b++],e|=g&127,0!==(g&128)&&(g=a[b++],e|=(g&127)<<7,0!==(g&128)&&(g=a[b++],e|=(g&127)<<14,0!==(g&128)&&(g=a[b++],e|=(g&127)<<21,0!==(g&128)&&(g=a[b++],e+=268435456*(g&127),0!==(g&128)&&(g=a[b++],e+=34359738368*(g&127),0!==(g&128)&&(g=a[b++],e+=4398046511104*(g&127),0!==(g&128)&&(g=a[b++],e+=562949953421312*(g&127),0!==(g&128)&&(g=a[b++],e+=72057594037927936*(g&127),0!==(g&128)&&(g=a[b++],
e+=0x7fffffffffffffff*(g&127),0!==(g&128)))))))))))throw Error("Varint too long!");}else{for(var f=1;b!==this._end;){g=a[b];if(0===(g&128))break;++b;e+=(g&127)*f;f*=128}if(b===this._end)throw Error("Varint overrun!");++b;e+=g*f}this._pos=b;return e};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,
e){var c="",d="";for(e=Math.min(this._end,e);b<e;++b){var h=a[b];h&128?d+="%"+h.toString(16):(c+=decodeURIComponent(d)+String.fromCharCode(h),d="")}d.length&&(c+=decodeURIComponent(d));return c};a.prototype._toBytes=function(a,b,e){e=Math.min(this._end,e);return new Uint8Array(a.buffer,b,e-b)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),function(a,e,b,c,d,h){return function(){function a(a,
b,c){void 0===c&&(c=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;this._pageWidth=a;this._pageHeight=b;0<c&&(this._maxItemSize=c);this._binPack=new d(a-4,b-4)}a.prototype.getWidth=function(a){return a>=this._size.length?-1:this._size[a][0]};a.prototype.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]};a.prototype.setSpriteSource=function(a){this.dispose();
this.pixelRatio=a.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new d(this._pageWidth-4,this._pageHeight-4);var b=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=b;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=a};a.prototype.getSpriteItem=function(a,b){void 0===b&&(b=!1);var c=this._mosaicRects[a];if(c)return c;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;
c=this._sprites.getSpriteInfo(a);if(!c||!c.width||!c.height||0>c.width||0>c.height)return null;var d=c.width,f=c.height,e=this._allocateImage(d,f),g=e[0],h=e[1];if(0>=g.width)return null;this._copy(g,c,h,e[2],b);c={rect:g,width:d,height:f,anchorX:0,anchorY:0,sdf:c.sdf,pixelRatio:c.pixelRatio,page:h};return this._mosaicRects[a]=c};a.prototype.preloadSpriteItems=function(){for(var a=0,b=this._sprites.spriteNames;a<b.length;a++)this.getSpriteItem(b[a],!0)};a.prototype.getSpriteItems=function(a){for(var b=
{},c=0;c<a.length;c++){var d=a[c];b[d]=this.getSpriteItem(d)}return b};a.prototype.getMosaicItemPosition=function(a,b){b=(a=this.getSpriteItem(a,b))&&a.rect;if(!b)return null;b.width=a.width;b.height=a.height;return{size:[a.width,a.height],tl:[(b.x+2)/this._size[a.page][0],(b.y+2)/this._size[a.page][1]],br:[(b.x+2+a.width)/this._size[a.page][0],(b.y+2+a.height)/this._size[a.page][1]],page:a.page}};a.prototype.bind=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);this._textures[c]||(this._textures[c]=
new h(a,{pixelFormat:6408,dataType:5121,width:this._size[c][0],height:this._size[c][1]},new Uint8Array(this._mosaicsData[c].buffer)));var f=this._textures[c];f.setSamplingMode(b);this._dirties[c]&&f.setData(new Uint8Array(this._mosaicsData[c].buffer));a.bindTexture(f,d);this._dirties[c]=!1};a._copyBits=function(a,b,c,d,e,g,h,t,r,u,v){var f=d*b+c;h=t*g+h;if(v)for(h-=g,v=-1;v<=u;v++,f=((v+u)%u+d)*b+c,h+=g)for(t=-1;t<=r;t++)e[h+t]=a[f+(t+r)%r];else for(v=0;v<u;v++){for(t=0;t<r;t++)e[h+t]=a[f+t];f+=b;
h+=g}};a.prototype._copy=function(b,c,d,e,g,h){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(d>=this._mosaicsData.length)){var f=new Uint32Array(h?h.buffer:this._sprites.image.buffer);a._copyBits(f,h?c.width:this._sprites.width,c.x,c.y,this._mosaicsData[d],e[0],b.x+2,b.y+2,c.width,c.height,g);this._dirties[d]=!0}};a.prototype._allocateImage=function(a,e){a+=2;e+=2;var f=Math.max(a,e);if(this._maxItemSize&&this._maxItemSize<f){var f=Math.pow(2,Math.ceil(b.log2(a))),g=Math.pow(2,Math.ceil(b.log2(e)));
a=new c(0,0,a,e);this._mosaicsData.push(new Uint32Array(f*g));this._dirties.push(!0);this._size.push([f,g]);this._textures.push(void 0);return[a,this._mosaicsData.length-1,[f,g]]}f=a%4?4-a%4:4;g=e%4?4-e%4:4;1===f&&(f=5);1===g&&(g=5);f=this._binPack.allocate(a+f,e+g);return 0>=f.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),
this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new d(this._pageWidth-4,this._pageHeight-4),this._allocateImage(a,e)):[f,this._currentPage,[this._pageWidth,this._pageHeight]]};a.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../kernel ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),
function(a,e,b,c,d,h,g,f,k){return function(){function a(a,b){this.baseURL=a;this.devicePixelRatio=b;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(a.prototype,"spriteNames",{get:function(){var a=[],b;for(b in this._spritesData)a.push(b);a.sort();return a},enumerable:!0,configurable:!0});a.prototype.getSpriteInfo=function(a){return this._spritesData[a]};a.prototype.load=function(){var a=this;this.loadStatus="loading";
return this.baseURL?this._loadSprites().then(function(){a.loadStatus="loaded";return a}).catch(function(b){a.loadStatus="failed";return a}):f.resolve(this)};a.prototype._loadSprites=function(){var a=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var b=this.baseURL,c=this._isRetina?"@2x":"";return g(b+c+".json",{callbackParamName:"callback",responseType:"json"}).then(function(e){var g=Object.keys(e.data);if(!g||0===g.length||1===g.length&&"_ssl"===g[0])return f.resolve(null);a._spritesData=e.data;
var l=new d,m=new Image;m.crossOrigin="anonymous";m.onload=function(){m.onload=null;a.width=m.width;a.height=m.height;var b=document.createElement("canvas");b.width=m.width;b.height=m.height;b=b.getContext("2d");b.drawImage(m,0,0,m.width,m.height);for(var b=b.getImageData(0,0,m.width,m.height),b=new Uint8Array(b.data),c,d=0;d<b.length;d+=4)c=b[d+3]/255,b[d]*=c,b[d+1]*=c,b[d+2]*=c;a.image=b;l.resolve()};e=""+b+c+".png";h.id&&(g=h.id.findCredential(e))&&g.token&&(e+="?token\x3d"+g.token);m.src=k.addProxy(e);
return l})};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../../core/promiseUtils","../../layers/support/TilemapCache","../2d/tiling/TileKey"],function(a,e,b,c,d){return function(){function a(a){if(a instanceof c)this._tilemapCache=a;else if(a&&"index"in a)this._tilemap=a.index;else throw Error("Invalid tilemap!");}a.prototype.dataKey=function(a){if(this._tilemapCache){var b=a.level,c=a.row,e=a.col,g=new d(a);return this._tilemapCache.fetchAvailabilityUpsample(b,
c,e,g).then(function(){return g}).catch(function(a){if(a&&"cancel"===a.dojoType)throw a;g.level=b;g.row=c;g.col=e;return g})}return this._getIndexedDataKey(a)};a.prototype.forEach=function(a,b,c,d,e){this._callback=e;this._maxLevel=b+a;this._forEach(this._tilemap,b,c,d)};a.prototype._forEach=function(a,b,c,d){0!==a&&(this._callback(b,c,d),b!==this._maxLevel&&"object"===typeof a&&(this._forEach(a[0],b+1,2*c,2*d),this._forEach(a[1],b+1,2*c,2*d+1),this._forEach(a[2],b+1,2*c+1,2*d),this._forEach(a[3],
b+1,2*c+1,2*d+1)))};a.prototype._getIndexedDataKey=function(a){var c=[a];if(0>a.level||0>a.row||0>a.col||0<a.row>>a.level||0<a.col>>a.level)return b.resolve(null);for(;0!==a.level;)a=new d(a.level-1,a.row>>1,a.col>>1,a.world),c.push(a);a=this._tilemap;var e=c.pop(),g,h;if(1===a)return b.resolve(e);for(;c.length;)if(g=c.pop(),h=(g.col&1)+((g.row&1)<<1),a)if(0===a[h]){e=null;break}else if(1===a[h]){e=g;break}else e=g,a=a[h];return b.resolve(e)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v,w,A,z){function x(a){return{state:a.state,pixelRatio:a.pixelRatio,stationary:a.stationary}}var y={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;b._clipData=new Float32Array(8);b._upperLeft=q.create();b._upperRight=q.create();b._lowerLeft=q.create();b._lowerRight=q.create();b._mat2=p.create();b._clipRendererInitialized=!1;b._contextVersion=null;b._labelFader=new g.default(b);
return b}b(e,a);Object.defineProperty(e.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});e.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};e.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};e.prototype.setElement=function(a){this.element=a};e.prototype.useContextVersion=function(a){this._renderingContext||(this._contextVersion=a)};e.prototype.attach=
function(b){if(this.attached)return!0;this._resizeCanvas(b);var c=u.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new A(c);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=x(b);this._painter||(this._painter=new l.default,this._painter.initialize(this._renderingContext));return a.prototype.attach.call(this,b)};e.prototype.detach=function(b){a.prototype.detach.call(this,
b);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};e.prototype.renderChildren=function(a){var b=this.children;a.drawPhase=k.WGLDrawPhase.FILL|k.WGLDrawPhase.LINE|k.WGLDrawPhase.MARKER|k.WGLDrawPhase.TEXT;for(var d=b.length,f=0;f<d;f++){var e=b[f];e.attached&&this.renderChild(e,a)}if(c("esri-featurelayer-webgl-labeling")){var g=a.context,h=g.getBoundFramebufferObject();g.bindFramebuffer(this._labelsFBO2);f=a.stationary;g.setClearColor(0,
0,0,f?0:1);g.clear(g.gl.COLOR_BUFFER_BIT);if(f)for(a.drawPhase=k.WGLDrawPhase.LABEL_ALPHA,a.labelFBO=this._labelsFBO1,a.labelStep=this._labelFader.step(),f=0;f<d;f++)e=b[f],e.attached&&this.renderChild(e,a);else this._labelFader.reset();g.bindFramebuffer(h);a.labelFBO=this._labelsFBO2;a.drawPhase=k.WGLDrawPhase.LABEL;for(f=0;f<d;f++)e=b[f],e.attached&&this.renderChild(e,a);a=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=a}};e.prototype.beforeRenderChildren=function(a,b){a=b.context;
var d=b.state,f=b.pixelRatio;if(b=this._painter){a.enforceState();b.update(d,f);var e=d.width;b=d.height;var g=d.rotation,e=Math.round(e*f);b=Math.round(b*f);this._boundFBO=a.getBoundFramebufferObject();!c("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===e&&this._labelsFBO1.height===b||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=v.createWithAttachments(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:e,height:b},{colorTarget:0,depthStencilTarget:0}),a.bindFramebuffer(this._labelsFBO1),a.setDepthWriteEnabled(!0),a.setStencilWriteMask(255),a.setClearColor(0,0,0,0),a.setClearDepth(1),a.setClearStencil(0),a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.DEPTH_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT),a.setDepthWriteEnabled(!1),a.bindFramebuffer(this._boundFBO),this._labelsFBO2=v.createWithAttachments(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,
width:e,height:b},{colorTarget:0,depthStencilTarget:0}));if(d.spatialReference&&(d.spatialReference._isWrappable?d.spatialReference._isWrappable():d.spatialReference.isWrappable)){var h=n.toRadian(g),k=Math.abs(Math.cos(h)),l=Math.abs(Math.sin(h)),m=Math.round(d.worldScreenWidth);if(Math.round(e*k+b*l)<=m)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===e&&this._clipFBO.height===b||(this._clipFBO=new v(a,{colorTarget:0,depthStencilTarget:3,width:e,height:b}));var t=.5*e,u=.5*b,d=1/e,r=
1/b,f=.5*m*f,w=.5*(e*l+b*k),e=this._upperLeft,k=this._upperRight,l=this._lowerLeft,m=this._lowerRight;q.set(e,-f,-w);q.set(k,f,-w);q.set(l,-f,w);q.set(m,f,w);p.identity(this._mat2);p.translate(this._mat2,this._mat2,[t,u]);0!==g&&p.rotate(this._mat2,this._mat2,h);q.transformMat2d(e,e,this._mat2);q.transformMat2d(k,k,this._mat2);q.transformMat2d(l,l,this._mat2);q.transformMat2d(m,m,this._mat2);g=this._clipData;g.set([2*l[0]*d-1,2*(b-l[1])*r-1,2*m[0]*d-1,2*(b-m[1])*r-1,2*e[0]*d-1,2*(b-e[1])*r-1,2*k[0]*
d-1,2*(b-k[1])*r-1]);this._clipRendererInitialized||this._initializeClipRenderer(a);this._clipVBO.setData(g);this._boundFBO=a.getBoundFramebufferObject();a.bindFramebuffer(this._clipFBO);a.setDepthWriteEnabled(!0);a.setStencilWriteMask(255);a.setClearColor(0,0,0,0);a.setClearDepth(1);a.setClearStencil(0);a.clear(a.gl.COLOR_BUFFER_BIT|a.gl.DEPTH_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT);a.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};e.prototype.afterRenderChildren=function(a,b){this._clipFrame&&
this._clipRendererInitialized&&(a=this._renderingContext,a.bindFramebuffer(this._boundFBO),this._boundFBO=null,a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),a.setStencilFunction(514,
1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,9728,1),a.setStencilTestEnabled(!1))};e.prototype.doRender=function(b){var c=this.element.style;this.visible?(c.display="block",c.opacity=""+this.opacity,this._resizeCanvas(b),a.prototype.doRender.call(this,b),this._cachedRenderParams=x(b)):c.display="none"};e.prototype.takeScreenshot=function(a){void 0===a&&(a={});var b=a.pixelRatio||1;this._cachedRenderParams.pixelRatio=b;var c=Math.round(b*this._cachedRenderParams.state.width),f=Math.round(b*
this._cachedRenderParams.state.height),e=0,g=0,h=c,k=f,l=c,m=f;if(l=a.area)e=Math.round(b*l.x),g=Math.round(b*l.y),h=Math.round(b*l.width),k=Math.round(b*l.height);void 0!==a.width&&void 0!==a.height?(l=a.width/a.height,k*l<h?(l*=k,e+=Math.floor((h-l)/2),h=Math.floor(l)):(l=h/l,g+=Math.floor((k-l)/2),k=Math.floor(l)),l=a.width,m=a.height):(l=h,m=k);b=document.createElement("canvas");b.width=l;b.height=m;var n=b.getContext("2d"),p=new Uint8Array(h*k*4),q=this._renderingContext,u=v.create(q,{colorTarget:1,
depthStencilTarget:3,width:c,height:f});q.bindFramebuffer(u);q.setViewport(0,0,c,f);var r=this._cachedRenderParams,w=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT|w.STENCIL_BUFFER_BIT);r.context=this._renderingContext;r.painter=this._painter;this.beforeRenderChildren(r,r);if(void 0!==a.rotation&&null!==a.rotation){var w=r.state,
x=w.clone();x.viewpoint.rotation=a.rotation;r.state=x;this.renderChildren(r);r.state=w}else this.renderChildren(r);this.afterRenderChildren(r,r);u.readPixels(e,f-(g+k),h,k,6408,5121,p);q.bindFramebuffer();q=n.getImageData(0,0,l,m);if(0!==e||0!==g||h!==c||k!==f||l!==c||m!==f)t.resampleHermite(p,h,k,q.data,l,m,!0);else{g=k-1;k=0;u=4*h;for(x=w=e=f=c=h=r=void 0;k<g;){w=k*u;x=g*u;for(r=0;r<u;r+=4)h=p[w+r],c=p[w+r+1],f=p[w+r+2],e=p[w+r+3],p[w+r]=p[x+r],p[w+r+1]=p[x+r+1],p[w+r+2]=p[x+r+2],p[w+r+3]=p[x+r+
3],p[x+r]=h,p[x+r+1]=c,p[x+r+2]=f,p[x+r+3]=e;k++;g--}h=q.data;c=p.length;for(g=0;g<c;g++)h[g]=p[g]}p=q.data;k=p.length;for(g=0;g<k;g+=4)e=p[g+3],0<e&&(f=e/255,h=Math.floor(p[g+0]/f),c=Math.floor(p[g+1]/f),f=Math.floor(p[g+2]/f),p[g+0]=255>=h?h:255,p[g+1]=255>=c?c:255,p[g+2]=255>=f?f:255);n.putImageData(q,0,0);n=y[a.format?a.format.toLowerCase():"png"];p=1;void 0!==a.quality&&(p=a.quality/100);a=b.toDataURL(n,p);return d.resolve({dataURL:a,x:0,y:0,width:l,height:m})};e.prototype.prepareChildrenRenderParameters=
function(a){if(!this.attached||!this._renderingContext)return null;a=x(a);var b=this._renderingContext,c=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);a.context=b;a.painter=this._painter;return a};e.prototype.attachChild=function(a,b){return a.attach(b)};e.prototype.detachChild=
function(a,b){return a.detach(b)};e.prototype.renderChild=function(a,b){return a.processRender(b)};e.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,d=a.state,f=a.pixelRatio;a=Math.round(d.width*f);f=Math.round(d.height*f);if(b.width!==a||b.height!==f)b.width=a,b.height=f;c.width=d.width+"px";c.height=d.height+"px"};e.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new f;var b={a_pos:0},c=new w(a,m.stencilVS,m.stencilFS,b);
if(!c)return!1;var d=r.createVertex(a,35040,32),e=new Uint16Array([0,1,2,2,1,3]),e=r.createIndex(a,35044,e);a=new z(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:d},e);this._clipStencilProgram=c;this._clipVBO=d;this._clipVAO=a;return this._clipRendererInitialized=!0};return e}(h)})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});a=function(){function a(a,
b){void 0===b&&(b=250);this.duration=b;this._startTime=this._lastTime=0;this._parent=a}a.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};a.prototype.step=function(){var a=performance.now();if(0===this._lastTime)return this._lastTime=a,this._parent.requestRender(),0;var b=a-this._lastTime;this._lastTime=a;a-this._startTime<2*this.duration&&this._parent.requestRender();return b/this.duration};return a}();e.default=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),
function(a,e,b,c,d,h){return function(){function a(){this._initialized=!1}a.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};a.prototype.render=function(a,b,c,d){a&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),b.setSamplingMode(c),a.bindTexture(b,0),this._program.setUniform1i("u_tex",
0),this._program.setUniform1f("u_opacity",d),a.drawArrays(5,0,4),a.bindVAO())};a.prototype._initialize=function(a){if(this._initialized)return!0;var f={a_pos:0,a_tex:1},e=new d(a,b.bitblitVS,b.bitblitFS,f);if(!e)return!1;var g=new Int8Array(16);g[0]=-1;g[1]=-1;g[2]=0;g[3]=0;g[4]=1;g[5]=-1;g[6]=1;g[7]=0;g[8]=-1;g[9]=1;g[10]=0;g[11]=1;g[12]=1;g[13]=1;g[14]=1;g[15]=1;a=new h(a,f,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,
stride:4,normalized:!1,divisor:0}]},{geometry:c.createVertex(a,35044,g)});this._program=e;this._vertexArrayObject=a;return this._initialized=!0};return a}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!a)var a=1E-6;if(!e)var e="undefined"!==typeof Float32Array?Float32Array:Array;if(!b)var b=Math.random;var c={GLMAT_EPSILON:a,GLMAT_ARRAY_TYPE:e,GLMAT_RANDOM:b,setMatrixArrayType:function(a){c.GLMAT_ARRAY_TYPE=a}},d=Math.PI/180,h=180/Math.PI;c.toRadian=
function(a){return a*d};c.toDegree=function(a){return a*h};c.setMatrixArrayType(Array);return c})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(a){var e=a.GLMAT_ARRAY_TYPE;a={create:function(){var a=new e(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new e(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,c){var b=c[0],e=c[1],g=c[2],f=c[3],k=c[4];c=c[5];var l=b*f-e*g;if(!l)return null;l=1/l;a[0]=f*l;a[1]=-e*l;a[2]=-g*l;a[3]=b*l;a[4]=(g*c-f*k)*l;a[5]=(e*k-b*c)*l;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,c,d){var b=c[0],e=c[1],f=c[2],k=c[3],l=c[4];c=c[5];var m=d[0],n=d[1],p=d[2],q=d[3],t=d[4];d=d[5];a[0]=b*m+f*n;a[1]=e*m+k*n;a[2]=b*p+f*q;a[3]=e*p+k*q;a[4]=b*t+f*d+l;a[5]=
e*t+k*d+c;return a}};a.mul=a.multiply;a.rotate=function(a,c,d){var b=c[0],e=c[1],f=c[2],k=c[3],l=c[4];c=c[5];var m=Math.sin(d);d=Math.cos(d);a[0]=b*d+f*m;a[1]=e*d+k*m;a[2]=b*-m+f*d;a[3]=e*-m+k*d;a[4]=l;a[5]=c;return a};a.scale=function(a,c,d){var b=c[1],e=c[2],f=c[3],k=c[4],l=c[5],m=d[0];d=d[1];a[0]=c[0]*m;a[1]=b*m;a[2]=e*d;a[3]=f*d;a[4]=k;a[5]=l;return a};a.translate=function(a,c,d){var b=c[0],e=c[1],f=c[2],k=c[3],l=c[4];c=c[5];var m=d[0];d=d[1];a[0]=b;a[1]=e;a[2]=f;a[3]=k;a[4]=b*m+f*d+l;a[5]=e*
m+k*d+c;return a};a.fromRotation=function(a,c){var b=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=b;a[2]=-b;a[3]=c;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=c[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=c[0];a[5]=c[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],
2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return a})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(a){var e=a.GLMAT_ARRAY_TYPE,b=a.GLMAT_RANDOM,c={create:function(){var a=new e(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new e(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new e(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+
c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};c.sub=c.subtract;c.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};c.mul=c.multiply;c.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};c.div=c.divide;c.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};c.scaleAndAdd=
function(a,b,c,f){a[0]=b[0]+c[0]*f;a[1]=b[1]+c[1]*f;return a};c.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};c.dist=c.distance;c.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,
b){a[0]=1/b[0];a[1]=1/b[1];return a};c.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};c.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,c,f){var d=b[0];b=b[1];a[0]=d+f*(c[0]-d);a[1]=b+f*(c[1]-b);return a};c.random=function(a,c){c=c||1;var d=2*b()*Math.PI;a[0]=Math.cos(d)*c;a[1]=Math.sin(d)*c;return a};c.transformMat2=function(a,b,c){var d=b[0];
b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};c.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};c.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};c.forEach=function(){var a=c.create();return function(b,c,d,e,l,m){c||(c=2);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;d<
e;d+=c)a[0]=b[d],a[1]=b[d+1],l(a,a,m),b[d]=a[0],b[d+1]=a[1];return b}}();c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return c})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.adjustScreenshotSettings=function(a,d){a=b({format:"png",quality:100},a);var c,e;a.includePadding?(c=d.width,e=d.height):(c=d.width-d.padding.left-d.padding.right,e=
d.height-d.padding.top-d.padding.bottom);var f=c/e;void 0!==a.width&&void 0===a.height?a.height=a.width/f:void 0!==a.height&&void 0===a.width&&(a.width=f*a.height);void 0!==a.height&&(a.height=Math.floor(a.height));void 0!==a.width&&(a.width=Math.floor(a.width));a.area||a.includePadding||(a.area={x:d.padding.left,y:d.padding.top,width:c,height:e});return a};e.resampleHermite=function(a,b,e,g,f,k,l){void 0===l&&(l=!0);var c=b/f;e/=k;for(var d=Math.ceil(c/2),h=Math.ceil(e/2),q=0;q<k;q++)for(var t=0;t<
f;t++){for(var r=4*(t+(l?k-q-1:q)*f),u=0,v=0,w=0,A=0,z=0,x=0,y=0,C=(q+.5)*e,D=Math.floor(q*e);D<(q+1)*e;D++)for(var E=Math.abs(C-(D+.5))/h,I=(t+.5)*c,E=E*E,H=Math.floor(t*c);H<(t+1)*c;H++){var Q=Math.abs(I-(H+.5))/d,u=Math.sqrt(E+Q*Q);-1<=u&&1>=u&&(u=2*u*u*u-3*u*u+1,0<u&&(Q=4*(H+D*b),y+=u*a[Q+3],w+=u,255>a[Q+3]&&(u=u*a[Q+3]/250),A+=u*a[Q],z+=u*a[Q+1],x+=u*a[Q+2],v+=u))}g[r]=A/v;g[r+1]=z/v;g[r+2]=x/v;g[r+3]=y/w}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),
function(a,e,b,c,d,h,g){return function(){function a(a,c){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=
1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=
null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=h.default(a)?"webgl2":"webgl";this.gl=a;a instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=g.loadCapabilities(a,c);a=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:a[0],y:a[1],width:a[2],height:a[3]};a=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:a?this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};b("esri-webgl-debug")&&(this.instanceCounter=new d);this.enforceState()}Object.defineProperty(a.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parameters",{get:function(){return this._parameters},
enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};b("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};a.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};a.prototype.setBlendColor=function(a,b,c,d){if(a!==this._blendColorState.r||b!==this._blendColorState.g||c!==
this._blendColorState.b||d!==this._blendColorState.a)this.gl.blendColor(a,b,c,d),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=c,this._blendColorState.a=d};a.prototype.setBlendFunction=function(a,b){if(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b};a.prototype.setBlendFunctionSeparate=
function(a,b,c,d){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==c||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==d)this.gl.blendFuncSeparate(a,b,c,d),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=d};a.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=
a)};a.prototype.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b};a.prototype.setColorMask=function(a,b,c,d){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==c||this._colorMaskState.a!==d)this.gl.colorMask(a,b,c,d),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=c,this._colorMaskState.a=
d};a.prototype.setClearColor=function(a,b,c,d){if(this._clearColor.r!==a||this._clearColor.g!==b||this._clearColor.b!==c||this._clearColor.a!==d)this.gl.clearColor(a,b,c,d),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=c,this._clearColor.a=d};a.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};a.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==
a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};a.prototype.setPolygonOffset=function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b)};a.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};a.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=
a)};a.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};a.prototype.setScissorRect=function(a,b,c,d){if(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==c||this._scissorRect.height!==d)this.gl.scissor(a,b,c,d),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=c,this._scissorRect.height=d};a.prototype.setDepthTestEnabled=
function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};a.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};a.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};a.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)};a.prototype.setDepthRange=
function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b};a.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};a.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};a.prototype.setStencilFunction=function(a,b,c){if(this._stencilFunction.func!==
a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==c)this.gl.stencilFunc(a,b,c),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=c};a.prototype.setStencilFunctionSeparate=function(a,b,c,d){if(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==c||this._stencilFunction.mask!==d)this.gl.stencilFuncSeparate(a,b,c,d),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=
c,this._stencilFunction.mask=d};a.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};a.prototype.setStencilOp=function(a,b,c){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==c)this.gl.stencilOp(a,b,c),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=c};a.prototype.setStencilOpSeparate=function(a,b,c,d){if(this._stencilOperation.face!==
a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==c||this._stencilOperation.zPass!==d)this.gl.stencilOpSeparate(a,b,c,d),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=c,this._stencilOperation.zPass=d};a.prototype.setLineWidth=function(a){var b=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return b};a.prototype.setActiveTexture=function(a){var b=this._activeTextureUnit;0<=a&&a!==
this._activeTextureUnit&&(this.gl.activeTexture(c.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a);return b};a.prototype.clear=function(a){a&&this.gl.clear(a)};a.prototype.drawArrays=function(a,b,c){this.gl.drawArrays(a,b,c)};a.prototype.drawElements=function(a,b,c,d){5123===c?this.gl.drawElements(a,b,c,d):5125===c&&this.gl.drawElements(a,b,c,d)};Object.defineProperty(a.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});a.prototype.setViewport=function(a,
b,c,d){var e=this._viewport;if(e.x!==a||e.y!==b||e.width!==c||e.height!==d)e.x=a,e.y=b,e.width=c,e.height=d,this.gl.viewport(a,b,c,d)};a.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};a.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};a.prototype.bindTexture=function(b,
c){void 0===c&&(c=0);-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var d=this._textureUnitMap[c];this.setActiveTexture(c);null==b||null==b.glName?(null!=d&&(this.gl.bindTexture(d.descriptor.target,null),d.setBoundToUnit(c,!1)),this._textureUnitMap[c]=null):d&&d.id===b.id?b.applyChanges():(this.gl.bindTexture(b.descriptor.target,b.glName),b.setBoundToUnit(c,!0),b.applyChanges(),this._textureUnitMap[c]=b)};a.prototype.bindFramebuffer=
function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};a.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))};a.prototype.bindRenderbuffer=function(a){var b=
this.gl;a||(b.bindRenderbuffer(b.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==a&&(b.bindRenderbuffer(b.RENDERBUFFER,a.glName),this._activeRenderbuffer=a)};a.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=a._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,null,b,this._activeIndexBuffer)};a.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),
this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};a.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};a.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};a.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,
1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};a.prototype.enforceState=function(){var a=this.gl,b=this._capabilities.vao;b&&b.bindVertexArray(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)a.disableVertexAttribArray(d);
this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(b&&this._activeVertexArrayObject){if(b=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(b)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);a.bindRenderbuffer(a.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?
a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(b=0;b<this.parameters.maxTextureImageUnits;b++)a.activeTexture(c.BASE_TEXTURE_UNIT+b),a.bindTexture(3553,
null),(d=this._textureUnitMap[b])&&a.bindTexture(d.descriptor.target,d.glName);a.activeTexture(c.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};a._bindBuffer=function(a,b,c,d){if(!b)return a.bindBuffer(c,null),null;if(d===b)return d;a.bindBuffer(c,b.glName);return b};a._MAX_TEXTURE_IMAGE_UNITS=-1;return a}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,
"__esModule",{value:!0});e.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require","exports"],function(a,e){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(a){switch(a){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;
break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};a.prototype.decrementCount=function(a){switch(a){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},
"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(a,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(a,e,b,c,d,h){function g(a,b,c,e,g){if(e&&
d.default(a))return!0;if(b[c])return!1;for(b=0;b<g.length;b++)if(a.getExtension(g[b]))return!0;return!1}Object.defineProperty(e,"__esModule",{value:!0});e.loadCapabilities=function(a,e){e=e&&e.disabledExtensions||{};var f=c.load(a,e),k=h.load(a,e),n;n=e.compressedTextureS3TC?null:(n=a.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:n.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:n.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:n.COMPRESSED_RGBA_S3TC_DXT3_EXT,
COMPRESSED_RGBA_S3TC_DXT5:n.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var p;p=e.textureFilterAnisotropic?null:(p=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:p.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:p.TEXTURE_MAX_ANISOTROPY_EXT}:null;var q=b.load(a,e),t;if(d.default(a))t=e.colorBufferFloat||!a.getExtension("EXT_color_buffer_float")?null:{R16F:a.R16F,
RG16F:a.RG16F,RGBA16F:a.RGBA16F,R32F:a.R32F,RG32F:a.RG32F,RGBA32F:a.RGBA32F,R11F_G11F_B10F:a.R11F_G11F_B10F};else if(a instanceof WebGLRenderingContext){t=!e.colorBufferFloat&&a.getExtension("EXT_color_buffer_half_float");var r=!e.colorBufferFloat&&a.getExtension("WEBGL_color_buffer_float");t=t||r?{RGBA16F:t?t.RGBA16F_EXT:void 0,RGBA32F:r?r.RGBA32F_EXT:void 0}:null}else t=void 0;r=d.default(a)?{MIN:a.MIN,MAX:a.MAX}:e.blendMinMax?null:(r=a.getExtension("EXT_blend_minmax"))?{MIN:r.MIN_EXT,MAX:r.MAX_EXT}:
null;return{instancing:f,vao:k,compressedTextureS3TC:n,textureFilterAnisotropic:p,disjointTimerQuery:q,colorBufferFloat:t,blendMinMax:r,depthTexture:g(a,e,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:g(a,e,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:g(a,e,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:g(a,e,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:g(a,e,
"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.load=function(a,d){if(d.disjointTimerQuery)return null;var c=a.getExtension("EXT_disjoint_timer_query")||a.getExtension("EXT_disjoint_timer_query_webgl2");return c?b.default(a)?{createQuery:function(){return a.createQuery()},resultAvailable:function(b){return a.getQueryParameter(b,
a.QUERY_RESULT_AVAILABLE)},getResult:function(b){return a.getQueryParameter(b,a.QUERY_RESULT)},disjoint:function(){return a.getParameter(c.GPU_DISJOINT_EXT)},beginTimeElapsed:function(b){return a.beginQuery(c.TIME_ELAPSED_EXT,b)},endTimeElapsed:function(){return a.endQuery(c.TIME_ELAPSED_EXT)},createTimestamp:function(a){return c.queryCounterEXT(a,c.TIMESTAMP_EXT)},timestampBits:function(){return a.getQuery(c.TIMESTAMP_EXT,c.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return c.createQueryEXT()},
resultAvailable:function(a){return c.getQueryObjectEXT(a,c.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(a){return c.getQueryObjectEXT(a,c.QUERY_RESULT_EXT)},disjoint:function(){return a.getParameter(c.GPU_DISJOINT_EXT)},beginTimeElapsed:function(a){return c.beginQueryEXT(c.TIME_ELAPSED_EXT,a)},endTimeElapsed:function(){return c.endQueryEXT(c.TIME_ELAPSED_EXT)},createTimestamp:function(a){return c.queryCounterEXT(a,c.TIMESTAMP_EXT)},timestampBits:function(){return c.getQueryEXT(c.TIMESTAMP_EXT,
c.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.load=function(a,d){return b.default(a)?{drawArraysInstanced:a.drawArraysInstanced.bind(a),drawElementsInstanced:a.drawElementsInstanced.bind(a),vertexAttribDivisor:a.vertexAttribDivisor.bind(a)}:d.angleInstancedArrays?null:(a=a.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:a.drawArraysInstancedANGLE.bind(a),
drawElementsInstanced:a.drawElementsInstancedANGLE.bind(a),vertexAttribDivisor:a.vertexAttribDivisorANGLE.bind(a)}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(a,e,b){Object.defineProperty(e,"__esModule",{value:!0});e.load=function(a,d){return b.default(a)?{createVertexArray:a.createVertexArray.bind(a),deleteVertexArray:a.deleteVertexArray.bind(a),bindVertexArray:a.bindVertexArray.bind(a)}:d.vao?
null:(a=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:a.createVertexArrayOES.bind(a),deleteVertexArray:a.deleteVertexArrayOES.bind(a),bindVertexArray:a.bindVertexArrayOES.bind(a)}:null}})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(a,
e,b,c,d,h,g){var f=new h("0/0/0/0"),k=function(){function a(a,b,c,d,e,f,g,h){this.x=a;this.ymin=b;this.ymax=c;this.invM=d;this.leftAdjust=e;this.rightAdjust=f;this.leftBound=g;this.rightBound=h}a.create=function(b,c){b[1]>c[1]&&(k=[c,b],b=k[0],c=k[1]);k=b[0];b=b[1];var d=c[0];c=c[1];var e=d-k,f=c-b,f=0!==f?e/f:0,g=(Math.ceil(b)-b)*f,h=(Math.floor(b)-b)*f;return new a(k,Math.floor(b),Math.ceil(c),f,0>e?g:h,0>e?h:g,0>e?d:k,0>e?k:d);var k};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=
function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var d=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var e=a.lods.slice();e.sort(function(a,b){return b.scale-a.scale});var f=this._lodInfos=e.map(function(d){return c.create(a,d,b)});e.forEach(function(a,
b){d._infoByLevel[a.level]=f[b];d._infoByScale[a.scale]=f[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}a.prototype.getLODInfoAt=function(a){return this._infoByLevel[a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);f.set(b);return(b=this._infoByLevel[f.level])?b.getTileBounds(a,f,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);f.set(b);return(b=this._infoByLevel[f.level])?b.getTileCoords(a,f,c):a};a.prototype.getTileCoverage=function(a,b){void 0===
b&&(b=192);var c=this.getClosestInfoForScale(a.scale),e=d.pool.acquire(c),f=this._wrap,h;h=Infinity;var m=-Infinity,n,p,z=e.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-b;l[1][0]=l[2][0]=a.size[0]+b;l[2][1]=l[3][1]=a.size[1]+b;for(b=0;b<l.length;b++){var x=l[b];a.toMap(x,x);x[0]=c.getColumnForX(x[0]);x[1]=c.getRowForY(x[1])}a=[];x=3;for(b=0;4>b;b++){if(l[b][1]!==l[x][1]){var y=k.create(l[b],l[x]);h=Math.min(y.ymin,h);m=Math.max(y.ymax,m);void 0===a[y.ymin]&&(a[y.ymin]=[]);a[y.ymin].push(y)}x=b}if(null==
h||null==m||100<m-h)return null;for(x=[];h<m;){null!=a[h]&&(x=x.concat(a[h]));n=Infinity;p=-Infinity;for(b=x.length-1;0<=b;b--)y=x[b],n=Math.min(n,y.getLeftCol()),p=Math.max(p,y.getRightCol());n=Math.floor(n);p=Math.floor(p);if(h>=c.first[1]&&h<=c.last[1])if(f)if(c.size[0]<c.worldSize[0])for(y=Math.floor(p/c.worldSize[0]),b=Math.floor(n/c.worldSize[0]);b<=y;b++)z.push(new g(h,Math.max(c.getFirstColumnForWorld(b),n),Math.min(c.getLastColumnForWorld(b),p)));else z.push(new g(h,n,p));else n>c.last[0]||
p<c.first[0]||(n=Math.max(n,c.first[0]),p=Math.min(p,c.last[0]),z.push(new g(h,n,p)));h+=1;for(b=x.length-1;0<=b;b--)y=x[b],y.ymax>=h?y.incrRow():x.splice(b,1)}return e};a.prototype.getTileIdAtParent=function(a,b){b=h.pool.acquire(b);var c=this._infoByLevel[b.level];if(a.resolution<c.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+c.resolution);return a.resolution===c.resolution?b.id:h.getId(a.level,Math.floor(b.row*
c.resolution/a.resolution+.01),Math.floor(b.col*c.resolution/a.resolution+.01),b.world)};a.prototype.getTileParentId=function(a){a=h.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return h.pool.release(a),null;b=this.getTileIdAtParent(this._lodInfos[b],a);h.pool.release(a);return b};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel[a.level])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};
a.prototype.intersects=function(a,b){var c=h.pool.acquire(b);b=this._infoByLevel[c.level];var d=a.lodInfo;if(d.resolution>b.resolution){var e=h.pool.acquire(this.getTileIdAtParent(d,c)),f=d.denormalizeCol(e.col,e.world);b=a.spans.some(function(a){return a.row===e.row&&a.colFrom<=f&&a.colTo>=f});h.pool.release(c);h.pool.release(e);return b}if(d.resolution<b.resolution){var g=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],
b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=g[0];var k=g[1],l=g[2],g=g[3],m=b.denormalizeCol(c.col,c.world),n=d.getColumnForX(b.getXForColumn(m)),p=d.getRowForY(b.getYForRow(c.row)),m=d.getColumnForX(b.getXForColumn(m+1))-1;b=d.getRowForY(b.getYForRow(c.row+1))-1;h.pool.release(c);return!(n>g||m<l||p>k||b<a)}var C=d.denormalizeCol(c.col,c.world);b=a.spans.some(function(a){return a.row===c.row&&a.colFrom<=C&&a.colTo>=C});h.pool.release(c);return b};a.prototype.normalizeBounds=function(a,
c,d){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];this._wrap&&(c=b.getInfo(this.tileInfo.spatialReference),d=-d*(c.valid[1]-c.valid[0]),a[0]+=d,a[2]+=d);return a};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(a,e,b,c){function d(a,b,c){a[0]=b;a[1]=c;return a}var h=new c("0/0/0/0");return function(){function a(a,b,c,d,e,g,h,t,r,u,v,w){this.level=a;this.resolution=b;this.scale=c;this.origin=d;this.first=e;this.last=g;this.size=h;this.norm=t;this.worldStart=r;this.worldEnd=u;this.worldSize=v;this.wrap=w}a.create=function(c,e,g){var f=b.getInfo(c.spatialReference),h=[c.origin.x,c.origin.y],k=[c.size[0]*e.resolution,c.size[1]*e.resolution],l=[-Infinity,-Infinity],t=[Infinity,Infinity],
r=[Infinity,Infinity];g&&(d(l,Math.max(0,Math.floor((g.xmin-h[0])/k[0])),Math.max(0,Math.floor((h[1]-g.ymax)/k[1]))),d(t,Math.max(0,Math.floor((g.xmax-h[0])/k[0])),Math.max(0,Math.floor((h[1]-g.ymin)/k[1]))),d(r,t[0]-l[0]+1,t[1]-l[1]+1));var u;c.isWrappable?(c=[Math.ceil(Math.round(2*f.origin[1]/e.resolution)/c.size[0]),r[1]],f=[Math.floor((f.origin[0]-h[0])/k[0]),l[1]],g=[c[0]+f[0]-1,t[1]],u=!0):(f=l,g=t,c=r,u=!1);return new a(e.level,e.resolution,e.scale,h,l,t,r,k,f,g,c,u)};a.prototype.normalizeCol=
function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};a.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-
this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);var d=c?h.col:this.denormalizeCol(h.col,h.world),e=h.row;b=this.getXForColumn(d);c=this.getYForRow(e+1);d=this.getXForColumn(d+1);e=this.getYForRow(e);a[0]=b;a[1]=c;a[2]=d;a[3]=e;
return a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);b=c?h.col:this.denormalizeCol(h.col,h.world);Array.isArray(a)?d(a,this.getXForColumn(b),this.getYForRow(h.row)):(a.x=this.getXForColumn(b),a.y=this.getYForRow(h.row));return a};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(a,e,b,c,d){return function(){function a(a){this.lodInfo=a;this.spans=
b.acquire()}a.prototype.release=function(){for(var a=0,c=this.spans;a<c.length;a++)d.pool.release(c[a]);b.release(this.spans)};a.prototype.forEach=function(a,b){var c=this.spans,d=this.lodInfo,e=d.level;if(0!==c.length)for(var f=0;f<c.length;f++)for(var g=c[f],h=g.row,t=g.colTo,g=g.colFrom;g<=t;g++)a.call(b,e,h,d.normalizeCol(g),d.getWorldForColumn(g))};a.pool=new c(a,!0);return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],
function(a,e,b){return function(){function a(a,b,c){this.row=a;this.colFrom=b;this.colTo=c}a.pool=new b(a,!0);return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(a,e,b,c,d){var h=new d(0,0,0,0),g=new Map,f=[],k=[];return function(){function a(a){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.tileIndex=new Map;this.tiles=[];this.acquireTile=
a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;a.cachePolicy&&(this.cachePolicy=a.cachePolicy)}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var b=this,d=this.tileIndex,e=this.tileInfoView.getTileCoverage(a.state);if(e){var l=e.spans,m=e.lodInfo,u=m.level,v=a.state.resolution,w=!a.stationary&&v>this._previousResolution;this._previousResolution=v;d.forEach(function(a){return a.visible=!0});this.tiles.length=0;g.clear();var A=0,
z=0;if(0<l.length)for(var x=0;x<l.length;x++){a=l[x];for(var y=a.row,C=a.colTo,D=a.colFrom;D<=C;D++)A++,a=h.set(u,y,m.normalizeCol(D),m.getWorldForColumn(D)).id,d.has(a)?(v=d.get(a),v.status!==c.TileStatus.INITIALIZED&&z++,v.attached?g.set(a,v):v.attached||w||this._addParentTile(a,g)):(v=this.acquireTile(h),this.tileIndex.set(a,v),w||this._addParentTile(a,g))}var E=z===A;k.length=0;f.length=0;d.forEach(function(a,d){h.set(d);if(!g.has(d)){var l=b.tileInfoView.intersects(e,h);!l||!w&&E?"purge"===b.cachePolicy&&
a.status!==c.TileStatus.MODIFIED&&a.status!==c.TileStatus.READY?f.push(d):(h.level>u||!l)&&f.push(d):a.attached?k.push(d):h.level>u&&f.push(d)}});for(l=0;l<k.length;l++)a=k[l],(v=d.get(a))&&v.attached&&g.set(a,v);for(l=0;l<f.length;l++)a=f[l],v=d.get(a),this.releaseTile(v),d["delete"](a);g.forEach(function(a){return b.tiles.push(a)});d.forEach(function(a){g.has(a.key.id)||(a.visible=!1)});k.length=0;f.length=0;g.clear()}};a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});
b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(c=this.tileIndex.get(a))&&c.attached){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(a,e,b,c){function d(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var h=new Set,
g=[],f=new Map;return function(){function a(a){var c=this;this._keysToRequests=new Map;this.tileInfoView=null;var d=a.strategy&&"scale-first"!==a.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=a.tileInfoView;this._queues=a.tileServers&&0<a.tileServers.length?a.tileServers.map(function(e){return new b({concurrency:a.concurrency||6,process:function(b){b=c._keysToRequests.get(b);return a.process(b,e)},peeker:d})}):[new b({concurrency:a.concurrency||6,
process:function(b){b=c._keysToRequests.get(b);return a.process(b)},peeker:d})]}Object.defineProperty(a.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});a.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear();this._keysToRequests.clear()};a.prototype.find=function(a,
b){var c=this;b=0;for(var d=this._queues;b<d.length;b++){var e=d[b].find(function(b){return a(c._keysToRequests.get(b).key)});if(e)return e}};a.prototype.get=function(a){a="string"===typeof a?a:a.id;for(var b=0,c=this._queues;b<c.length;b++){var d=c[b].get(a);if(d)return d}};a.prototype.getRequest=function(a){return this._keysToRequests.get("string"===typeof a?a:a.id)};a.prototype.has=function(a){return"string"===typeof a?this._keysToRequests.has(a):this._keysToRequests.has(a.id)};a.prototype.isOngoing=
function(a){var b="string"===typeof a?a:a.id;return this.has(b)&&this._queues.some(function(a){return a.isOngoing(b)})};a.prototype.pause=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].pause()};a.prototype.push=function(a){var b=this,c=a.key.id,d=this._queues[a.key.row%this._queues.length].push(c);this._keysToRequests.set(c,a);d.then(function(){b._keysToRequests.delete(c)});d.catch(function(){b._keysToRequests.delete(c)});return d};a.prototype.reset=function(){for(var a=0,b=this._queues;a<
b.length;a++)b[a].reset()};a.prototype.resume=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].resume()};a.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,k=0;k<a.length;k++){var l=this._keysToRequests.get(a[k]),r=this.tileInfoView.getTileScale(l.key);f.has(r)||(f.set(r,[]),c=Math.max(r,c),e=Math.min(r,e));f.get(r).push(l.key);h.add(r)}var u=this.state.scale;f.has(u)||(d(g,h),g.sort(),u=g.reduce(function(a,
b,c,d){return Math.abs(b-u)<Math.abs(a-u)?b:a},g[0]));u=Math.min(u,c);u=Math.max(u,e);a=f.get(u);var v=b.getClosestInfoForScale(u),w=v.getColumnForX(this.state.center[0]),A=v.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=v.denormalizeCol(a.col,a.world),d=v.denormalizeCol(b.col,b.world);return Math.sqrt((w-c)*(w-c)+(A-a.row)*(A-a.row))-Math.sqrt((w-d)*(w-d)+(A-b.row)*(A-b.row))});h.clear();f.clear();return a[0].id};a.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];
for(var b=this.tileInfoView,d=this.state.center,e=[0,0],f=Number.POSITIVE_INFINITY,g=null,h=0;h<a.length;h++){var k=this._keysToRequests.get(a[h]);b.getTileCoords(e,k.key);var l=c.distance(e,d);l<f&&(f=l,g=k.key)}return g.id};return a}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(a,e,b,c,d){return function(){function a(a){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=
null;this.concurrency=1;this.ordered=!1;a.concurrency&&(this.concurrency=a.concurrency);this.ordered=!!a.ordered;this._queue=new c(a.peeker?{peeker:a.peeker}:void 0);this.process=a.process}Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._queue.clear();var a=[];this._processingItems.forEach(function(b){return a.push(b.resultPromise)});this._processingItems.clear();a.forEach(function(a){return a.cancel()});
a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()});this._cancelNext()};a.prototype.find=function(a,b){var c=this,d=void 0;this._apiPromises.forEach(function(e,f){a.call(b,f)&&(d=c._apiPromises.get(f).promise)});return d};a.prototype.get=function(a){return(a=this._apiPromises.get(a))&&a.promise||void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._apiPromises.has(a)};
a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){var c=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;var d=new b(function(b){var d=c._processingItems.get(a);d?d.resultPromise.cancel(b):(c._remove(a),c._scheduleNext())});this._add(a,d);this._scheduleNext();return d.promise};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=
0;b<a.length;b++){var c=a[b];c.resultPromise.isFulfilled()?this._processReset(c):(c.isReset=!0,c.resultPromise.cancel())}};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype._scheduleNext=function(){var a=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=d.schedule(function(){a._scheduledNextHandle=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};
a.prototype._processResult=function(a,b){this._remove(a.item);this._scheduleNext();a.dfd.resolve(b)};a.prototype._processError=function(a,b){a.isReset?this._processReset(a):(this._remove(a.item),this._scheduleNext(),a.dfd.reject(b))};a.prototype._processReset=function(a){this._remove(a.item);this._add(a.item,a.dfd);this._scheduleNext()};a.prototype._processOrdered=function(a,b){var c=this,d=!1;if(a.isReset)this._processReset(a);else{a.result=b;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(a){d||
(a.result?c._itemsToProcess.push(a):d=!0)});a=0;for(b=this._itemsToProcess;a<b.length;a++){var e=b[a];!1===e.result.ok?this._processError(e,e.result.error):this._processResult(e,e.result.value)}this._itemsToProcess.length=0}};a.prototype._process=function(a){var b=this;if(null!=a){var c=this._apiPromises.get(a),d=this.process(a);if(d&&"function"===typeof d.then){var e={item:a,resultPromise:d,result:null,dfd:c,isReset:!1};this._processingItems.set(a,e);this.ordered?d.then(function(a){return b._processOrdered(e,
{ok:!0,value:a})},function(a){return b._processOrdered(e,{ok:!1,error:a})}):d.then(function(a){return b._processResult(e,a)},function(a){return b._processError(e,a)})}else c.resolve(d),this._remove(a)}};a.prototype._add=function(a,b){this._apiPromises.set(a,b);this._queue.push(a)};a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._processingItems.delete(a)};a.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=
null)};return a}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(a,e){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==
this._length)return this._peeker(this._items)};a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==this._length){var a=this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),
1);this._length--};return a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var a=function(a,b){for(var c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,e=0;e<c.length;++e){try{d=a.getContext(c[e],b)}catch(g){}if(d)break}return d};return{create3DContext:a,setupWebGL:function(e,b){function c(a){var b=e.parentNode;b&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return c('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];b=a(e,b);return b?[b]:(c('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){var e;try{e=window.WebGLRenderingContext}catch(c){e=[!1,0]}var b;try{b=a(document.createElement("canvas"))}catch(c){b=[!1,1]}e?b?(e=b,e=[!0,{VERSION:e.getParameter(e.VERSION),SHADING_LANGUAGE_VERSION:e.getParameter(e.SHADING_LANGUAGE_VERSION),VENDOR:e.getParameter(e.VENDOR),RENDERER:e.getParameter(e.RENDERER),
EXTENSIONS:e.getSupportedExtensions(),MAX_TEXTURE_SIZE:e.getParameter(e.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:e.getParameter(e.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):e=[!1,1]:e=[!1,0];return e}}})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec4 a_vertexOffsetAndTex;\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffsetAndTex.xy;\r\n      vec2 a_tex \x3d a_vertexOffsetAndTex.zw;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/backgroundShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n    \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    attribute vec2 a_pos;\r\n\r\n  #ifdef ID\r\n    uniform mediump vec4 u_id;\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump mat3 u_pattern_matrix; // can we use medium precision?\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n\r\n  #ifdef PATTERN\r\n      // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n      // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n      v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      v_id \x3d u_id / 255.0;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef PATTERN\r\n    uniform lowp float u_opacity;\r\n    uniform mediump vec2 u_pattern_tl;\r\n    uniform mediump vec2 u_pattern_br;\r\n    uniform sampler2D u_texture;\r\n\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #else\r\n    uniform lowp vec4 u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    void main() {\r\n  #ifdef PATTERN\r\n      // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n      mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n      // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n      // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n      // we need to only sample from area that has our sprite in the mosaic.\r\n      mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n      // sample the sprite mosaic\r\n      lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n      gl_FragColor \x3d u_opacity * color;\r\n  #else\r\n      gl_FragColor \x3d u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/circleShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"circleVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_stroke_color;\r\n      attribute vec4 a_data;\r\n\r\n      const float sizePrecision \x3d 0.25; // 1/4\r\n      const float blurPrecision \x3d 0.03125; // 1/32\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_radius;\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_stroke_width;\r\n      uniform lowp vec4 u_stroke_color;\r\n\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      void main()\r\n      {\r\n        v_color \x3d a_color * u_color;\r\n        v_stroke_color \x3d a_stroke_color * u_stroke_color;\r\n        v_stroke_width \x3d a_data[1] * sizePrecision * u_stroke_width;\r\n        v_radius \x3d a_data[2] * u_radius;\r\n        v_blur \x3d max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\r\n\r\n        mediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\r\n        v_offset \x3d offset;\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"circleFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        mediump float dist \x3d length(v_offset);\r\n\r\n        mediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\r\n\r\n        lowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\r\n\r\n        gl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump mat3 u_pattern_matrix;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n      #ifdef PATTERN\r\n        // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n        // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n        // (-4k to 8k -1) to texture coordinates.\r\n        v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n      #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n      void main()\r\n      {\r\n      #ifdef PATTERN\r\n        // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n        mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n        // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n        // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n        // we need to only sample from area that has our sprite in the mosaic.\r\n        mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n        // sample the sprite mosaic\r\n        lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n        gl_FragColor \x3d v_color[3] * color;\r\n      #else\r\n        gl_FragColor \x3d v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader devide by the same number\r\n      const float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\r\n\r\n      const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n      const float tileCoordRatio \x3d 1.0 / 8.0;\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle         \x3d a_levelInfo[1];\r\n        mediump float a_minLevel      \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel      \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label had been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        vec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\r\n\r\n        v_size \x3d abs(offset);\r\n\r\n      #ifdef SDF\r\n        offset \x3d (120.0 / 86.0) * offset;\r\n      #endif // SDF\r\n\r\n      #ifdef DD\r\n        mediump float icon_size \x3d a_size * u_size;\r\n      #else\r\n        mediump float icon_size \x3d u_size;\r\n      #endif // DD\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\r\n\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n        v_transparency *\x3d v_color.w;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture; // SDF texture\r\n    #ifdef SDF\r\n      uniform lowp vec4 u_color; // a color to override the one of the vertex\r\n      uniform lowp vec4 u_outlineColor;\r\n      uniform mediump float u_outlineSize;\r\n    #endif // SDF\r\n\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // we need the conversion function from RGBA to float\r\n      $rgba2float\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n\r\n      void main()\r\n      {\r\n      #ifdef SDF\r\n        lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n        // calculate the distance from the edge [-0.5, 0.5]\r\n        float d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\r\n\r\n        // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n        // 1 / 86 represents a single pixel given the size of the SDF is 128 and we add 4 pixels margins to deal with\r\n        // other non SDF types.\r\n        // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\r\n        const float sofetEdgeRatio \x3d 0.248062016; // \x3d\x3d\x3e (32.0 / 86.0) / 1.5;\r\n        float size \x3d max(v_size.x, v_size.y);\r\n        float dist \x3d d * sofetEdgeRatio * size;\r\n\r\n        // set the fragment\'s transparency according to the distance from the edge\r\n        fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n        // count for the outline\r\n        // therefore tint the entire icon area.\r\n        if (u_outlineSize \x3e 0.25) {\r\n          lowp vec4 outlinePixelColor \x3d u_outlineColor;\r\n          // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\r\n          // a single pixel.\r\n          const float outlineLimitRatio \x3d (16.0 / 86.0);\r\n          float clampedOutlineSize \x3d sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\r\n\r\n          outlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\r\n\r\n          // finally combine the outline and the fill colors\r\n          gl_FragColor \x3d v_transparency * mixColors(fillPixelColor, outlinePixelColor);\r\n        }\r\n        else {\r\n          gl_FragColor \x3d v_transparency * fillPixelColor;\r\n        }\r\n      #else // not an SDF\r\n        lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n        gl_FragColor \x3d v_transparency * texColor;\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n      /* The implementation of the renderer is based on the article and implementation of MB described here:\r\n      * https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n      */\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_offsetAndNormal;\r\n      attribute vec2 a_accumulatedDistance;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_antialiasing; // the feather distance at which the line edge fades out\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n      varying mediump vec2 v_normal;\r\n\r\n      // the accumulated distance along the line. We need this information in order to render the dashes.\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      const float scale \x3d 1.0 / 31.0;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_width;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_width;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_lineHalfWidth; // the inset and outset of the line\r\n      varying mediump float v_blur;\r\n\r\n    #ifndef PATTERN\r\n      uniform mediump vec2 u_dasharray;\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n      void main()\r\n      {\r\n        v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n      #ifdef DD\r\n        v_lineHalfWidth \x3d a_width * u_width;\r\n      #else\r\n        v_lineHalfWidth \x3d u_width;\r\n      #endif // DD\r\n\r\n        v_lineHalfWidth +\x3d u_antialiasing;\r\n        v_lineHalfWidth *\x3d 0.5;\r\n\r\n      #ifndef PATTERN\r\n      #ifdef DD\r\n        v_dasharray \x3d u_dasharray * a_width;\r\n      #else\r\n        v_dasharray \x3d u_dasharray * u_width;\r\n      #endif // DD\r\n      #endif\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec2 dist \x3d v_lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n        // transform the vertex\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n        // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n        v_accumulatedDistance \x3d a_accumulatedDistance.x;\r\n\r\n        v_blur \x3d u_blur + u_antialiasing;\r\n\r\n        #ifdef DD\r\n          v_color \x3d a_color * u_color;\r\n        #else\r\n          v_color \x3d u_color;\r\n        #endif // DD\r\n\r\n        #ifdef ID\r\n          v_id \x3d u_id / 255.0;\r\n        #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying mediump vec2 v_normal;\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      varying mediump float v_lineHalfWidth;\r\n      varying lowp vec4 v_color;\r\n\r\n      varying mediump float v_blur;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform mediump vec2 u_spriteSize;\r\n      uniform sampler2D u_texture;\r\n\r\n      // Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\r\n      // accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\r\n      // the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\r\n      // "keep moving" for a few more pixel even when the line has ended or has not started yet.\r\n      const mediump float tileCoordRatio \x3d 8.0;\r\n    #else\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n        // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n        // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n        mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n        // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n        // We need to count for both sides of the line.\r\n        lowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\r\n\r\n      #ifdef PATTERN\r\n        // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n        // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n        mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\r\n\r\n        // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\r\n        // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n        // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n        // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\r\n        //              | -\x3e line-width / 2\r\n        //      - - - - - - - - - - - - - -\r\n        //              | -\x3e line-width / 2\r\n        //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\r\n\r\n        mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\r\n\r\n        // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n        mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n        // get the color from the texture\r\n        lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n        // finally write the fragment value\r\n        gl_FragColor \x3d alpha * v_color[3] * color;\r\n      #else\r\n        // now calculate the dashes given the accumulated distance of the line:\r\n        // start with calculating a normalized position along the line\r\n        lowp float dashPos \x3d  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\r\n\r\n        // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n        // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n        //   | \x3c--- pos along the dash part\r\n        // -------_______-------_______\r\n        // when the dashPos is over the \'gap\' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\r\n        // get clamped to zero.\r\n        // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n        // along the direction of the line.\r\n        lowp float dashAlpha \x3d clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\r\n\r\n        // if we don\'t have a no-data part to the dash then it is a solid line\r\n        dashAlpha \x3d max(sign(-v_dasharray.y), dashAlpha);\r\n        // finally multiply the fragment\'s alpha by the calculated dash-alpha\r\n        alpha *\x3d dashAlpha;\r\n\r\n        // output the fragment color\r\n        gl_FragColor \x3d alpha * v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/outlineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"outlineVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_offset;\r\n      attribute vec2 a_xnormal;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n      uniform mediump float u_outline_width;\r\n\r\n      varying lowp vec2 v_normal;\r\n\r\n      const float scale \x3d 1.0 / 15.0;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_normal \x3d a_xnormal;\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n        // Remove the texture normal bit of the position before scaling it with the\r\n        // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n        // because we\'re extruding the line in pixel space, regardless of the current\r\n        // tile\'s zoom level.\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"outlineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying lowp vec4 v_color;\r\n      varying mediump vec2 v_normal;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // Calculate the distance of the pixel from the line in pixels.\r\n        lowp float dist \x3d abs(v_normal.y);\r\n\r\n        lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO this snippet should only be in views/3d/webgl-engine/materials/internal/Util.xml\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 toFloat \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, toFloat);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n      uniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n      uniform mediump float u_size;\r\n    #ifdef DD\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      varying mediump float v_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n\r\n      // attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying lowp vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader divide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n\r\n      // outline position and appearance\r\n      const mediump float edgePos \x3d 0.75; // defined by the SDF encoding\r\n      uniform mediump float u_edgeDistance;\r\n      uniform mediump float u_edgeBlur;\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      varying mediump float v_edgeDistance; // will factor in the size\r\n      varying mediump float v_edgeWidth; // will factor in the size\r\n\r\n      uniform lowp float u_halo; // needed to avoid using the color attribute for halo\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle        \x3d a_levelInfo[1];\r\n        mediump float a_minLevel    \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // TODO: force clipping the vertex in case that the vertex isn\'t visible\r\n        //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label has been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n      #ifdef DD\r\n        if (u_halo \x3e 0.5)\r\n        {\r\n          v_color \x3d u_color;\r\n        }\r\n        else\r\n        {\r\n          v_color \x3d a_color * u_color;\r\n          // opacity already factored in a_color\r\n        }\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef DD\r\n        v_size \x3d a_size * u_size;\r\n      #else\r\n        v_size \x3d u_size;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_edgeDistance \x3d edgePos - u_edgeDistance / v_size;\r\n        v_edgeWidth \x3d (u_antialiasingWidth + u_edgeBlur) / v_size;\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform lowp sampler2D u_texture;\r\n      uniform mediump float u_edgeDistance;\r\n\r\n      varying lowp vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_edgeWidth;\r\n      varying mediump float v_edgeDistance;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n      // and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n      // http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        mediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"*now":function(a){a(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("esri/layers/VectorTileLayerImpl","dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/geometry/support/spatialReferenceUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/layers/support/TilemapCache ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/VectorTileDisplayObject ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/webgl/webgl-utils".split(" "),function(a,
e,b,c,d,h,g,f,k,l,m,n,p,q,t,r,u,v,w,A,z,x,y,C,D,E,I,H,Q,U,G,R,X){var K=u.ease;g=t.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:"OpenStreetMap_v2 OpenStreetMap_Export_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84".split(" "),_eventMap:{"style-change":["style"]},constructor:function(a,b){this._frame=this._frame.bind(this);this._params=b||{};b&&b.tileServers&&b.tileServers.length&&(this.tileServers=
b.tileServers=b.tileServers.map(function(a){return p.getAbsoluteUrl(a)},this));this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,resolution:1,center:[0,0],worldScreenWidth:0,spatialReference:null,toScreen:function(a,b){var c=this.center[1]+this.resolution*this.height*.5;a[0]=(b[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;a[1]=(c-b[1])/this.resolution;return a},toMap:function(a,b){var c=this.center[1]+this.resolution*this.height*.5;a[0]=this.center[0]-this.resolution*
this.width*.5+b[0]*this.resolution;a[1]=c-b[1]*this.resolution;return a}};this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this.type="vector-tile";this.setStyle(a);this.registerConnectEvents()},setStyle:function(a){return this.loadStyle(a)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(a){if(this.opacity!=
a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_pinching:!1,_refreshTS:null,_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,addTimestampToURL:function(a){var b=this._refreshTS;b&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,"$$$1"+b):a+((-1===a.indexOf("?")?"?":"\x26")+"_ts\x3d"+b));return a},getTileUrl:function(a,b,c){var e=this._url&&this._url.query,f=this.tileServers[b%this.tileServers.length],f=f.replace(/\{z\}/gi,a.toString()).replace(/\{level\}/gi,
a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{row\}/gi,b.toString()).replace(/\{x\}/gi,c.toString()).replace(/\{col\}/gi,c.toString());e&&(f+="?"+d.objectToQuery(e));f=this.addTimestampToURL(f);return p.addProxy(f)},loadStyle:function(a){if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;this._stopDisplay();var b=this._loadingPromise;this._loadingPromise=x.loadMetadata(a).then(function(a){this.url=a.url;this._url=a.parsedUrl;!this._url&&a.styleUrl&&(this._url=
A.urlToObject(a.styleUrl));this.currentStyleInfo={glyphsUrl:a.glyphsUrl,serviceUrl:a.serviceUrl,spriteUrl:a.spriteUrl,styleUrl:a.styleUrl,style:a.style,layerDefinition:a.layerDefinition};this.styleRepository=new C(a.style,a);this._read(a.layerDefinition);this.onStyleChange(this.getStyle())}.bind(this)).then(function(){this.loaded||(this._findCredential(),this.loaded=!0,this.onLoad(this));this.suspended||this._tileHandler||this._startDisplay()}.bind(this)).otherwise(function(a){this._errorHandler(a);
throw a;}.bind(this));b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},takeScreenshot:function(a){return this._stageGL?this._stageGL.takeScreenshot(a):w.reject("No valid GL context!")},_setMap:function(d,e,f){this.inherited(arguments);this._map=d;var g=this._div=b.create("div",null,e);c.set(g,{position:"absolute",width:d.width+"px",height:d.height+"px",
overflow:"visible",opacity:this.opacity});this.attr("data-vectortiles",!0);this._onResizeHandle=d.on("resize",a.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",a.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=this.on("scale-visibility-change",a.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",a.hitch(this,function(){}));d.acquireWebGLContext(this);this._stageGL=new H;this._stageGL.setElement(this._stageGL.createElement());
this._div.appendChild(this._stageGL.element);this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!d.loaded)var h=d.on("load",a.hitch(this,function(){h.remove();this.evaluateSuspension()}));return g},_unsetMap:function(a,c){a.releaseWebGLContext(this);this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;b.destroy(this._div);
this._div=null;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(a){this.version=a.currentVersion||
a.version;this.fullExtent=new h(a.fullExtent);this.initialExtent=new h(a.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new r(a.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();this.tileInfo.scales=this.tileInfo.lods.map(function(a){return a.scale});this.tileInfo.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var e=b[d],f=b[d+
1];if(e<=a)break;if(f===a)return d+1;if(e>a&&f<a)return d+1-(a-f)/(e-f)}return d};this._hasMin||this.setMinScale(a.minScale);this._hasMax||this.setMaxScale(a.maxScale);a.tileMap&&(this.tileIndexUrl=A.join(this.currentStyleInfo.serviceUrl,a.tileMap));if(!this._params.tileServers)if(this.currentStyleInfo.serviceUrl)this.tileServers=a.tiles.map(function(a,b,c){return A.join(this.currentStyleInfo.serviceUrl,a)},this);else{var b=a.tiles;this.currentStyleInfo&&this.currentStyleInfo.serviceUrl&&b.forEach(function(a,
b,c){A.isAbsolute(a)?c[b]=a:c[b]=A.join(this.currentStyleInfo.serviceUrl,a)}.bind(this));this.tileServers=b}b=null;this.currentStyleInfo.serviceUrl&&(this.parsedUrl=A.urlToObject(this.currentStyleInfo.serviceUrl),b=this._getDefaultAttribution(this.parsedUrl.path));b?(this.attributionDataUrl=b,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1);this.capabilities=this._getCapabilities(a);this.tilemapCache=this.capabilities.supportsTileMapIndexing?new y({layer:this}):
null},_getCapabilities:function(a){var b=a.hasOwnProperty("exportTilesAllowed")?a.exportTilesAllowed:!1;a=a.capabilities?-1!==a.capabilities.toLowerCase().indexOf("tilemap"):!1;return{exportTilesAllowed:b,supportsTileMapIndexing:a}},_getDefaultAttribution:function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3])){var b=b[2]||"",c;a=a.toLowerCase();for(var d=0,e=this._mapsWithAttribution.length;d<
e;d++)if(c=this._mapsWithAttribution[d],-1<c.toLowerCase().indexOf(a))return a=window.location.protocol,("http:"===a||"https:"===a?a:"https:")+"//static.arcgis.com/attribution/Vector"+b+"/"+c}},_startDisplay:function(){var a={capabilities:{operations:{supportsTileMap:this.capabilities.supportsTileMapIndexing}},styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,tilemapCache:this.tilemapCache,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};
this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio;this._vectorTileContainer=new D;this._stageGL.addChild(this._vectorTileContainer);this._viewState.spatialReference=this.tileInfo.spatialReference;this._tileInfoView=new Q(this.tileInfo,this.fullExtent);this._tileRequests=new Map;this._tileHandler=new I(a,this._scheduleUpdate.bind(this),window.devicePixelRatio||1,!1,this._tileInfoView);this._viewState.spatialReference=this.spatialReference;this._tileHandlerPromise=
this._tileHandler.start().then(function(){this._fetchQueue=new R({tileInfoView:this._tileInfoView,process:this._getTileData.bind(this)});this._tileStrategy=new U({cachePolicy:"keep",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileHandlerPromise&&
!this._tileHandlerPromise.isFulfilled()&&this._tileHandlerPromise.cancel();this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._tileRequests.forEach(function(a){a.cancel("cancel")}),this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),this._vectorTileContainer=null,this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=
this._tileHandler=this._tileStrategy=null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,ea(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=!1;this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=
this._updateParameters.pixelRatio=window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._viewState.resolution=this._viewState.scale/(39.37*f.getUnitValueForSR(this.spatialReference)*96);var a=0;this._viewState.spatialReference&&this._viewState.spatialReference._isWrappable()&&
(a=z.getInfo(this._viewState.spatialReference),a=a.valid[1]-a.valid[0]);this._viewState.worldScreenWidth=Math.round(a/this._viewState.resolution);this._renderRequested&&(this._renderRequested=!1,this._stageGL.doRender(this._renderParameters));this._updateRequested&&(this._updateRequested=!1,this._fetchQueue.pause(),this._fetchQueue.state=this._updateParameters.state,this._tileStrategy.update(this._updateParameters),this._fetchQueue.resume());this._animation&&(this._scheduleRender(),this._scheduleUpdate());
this._checkUpdating()}},_setViewState:function(b){b=a.mixin(this._viewState,b);b.center.type&&(b.center=[b.center.x,b.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(a,b){b=b.immediate||0===l.defaults.map.zoomDuration;this._animation=null;if(b)this._setViewState(a);else{b=this._viewState;var c=l.defaults.map.zoomDuration,d=W()+16,e=b.center[0],f=b.center[1],g=b.scale,h=Array.isArray(a.center)?a.center[0]:a.center.x,k=Array.isArray(a.center)?a.center[1]:a.center.y,
m=a.scale||b.scale,n=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var a=(W()+16-d)/c;1<=a&&(a=1,this.running=!1);a=K(a);n._setViewState({center:[e+(h-e)*a,f+(k-f)*a],scale:g+(m-g)*a})}}};this._scheduleRender();this._scheduleUpdate()}},_checkUpdating:function(){var a=!0;this._tileRequests.forEach(function(b){a|=b.isFulfilled()});a&&this._tileStrategy&&(a=this._tileStrategy.tiles.every(function(a){return a.attached}));a?this._fireUpdateEnd():this._fireUpdateStart()},
_acquireTile:function(a){var b=G.pool.acquire();b.set(a.level,a.row,a.col,a.world);a=this._tileHandler.getStyleRepository();var c=E.pool.acquire(b,b,this.tileInfo,a,this._tileHandler.glyphMosaic,0);this._tileHandlerPromise.then(function(){var a=this._tileHandler.getRefKey(b).then(function(a){c.refKey=a;return this._fetchQueue.push(b).then(function(a){c.setData(a.tileData,a.workerId,a.connection);c.once("attach",this._scheduleUpdate.bind(this));this._vectorTileContainer.addChild(c)}.bind(this))}.bind(this));
this._tileRequests.set(b.id,a)}.bind(this));return c},_releaseTile:function(a){var b=a.key.id,c=this._tileRequests.get(b);c.isFulfilled()||c.cancel();this._tileRequests["delete"](b);this._vectorTileContainer.removeChild(a);this._scheduleUpdate();a.once("detach",function(){E.pool.release(a)})},_getTileData:function(a){return this._tileHandler.getTileData(a,0)},onStyleChange:function(a){},_opacityChangeHandler:function(a){this._div&&(this._div.style.opacity=a.opacity)},_onResizeHandler:function(a){var b=
this._div&&this._div.style;b&&(b.width=a.width+"px",b.height=a.height+"px",this._setViewState({center:a.extent.getCenter(),width:a.width,height:a.height,size:[a.width,a.height]}))},onResume:function(){var b=this._map;this.inherited(arguments);n.show(this._div);this._setViewState({center:b.extent.getCenter(),scale:b.getScale(),width:b.width,height:b.height,size:[b.width,b.height],spatialReference:b.spatialReference});this._handles=[b.on("pan-end",a.hitch(this,this._onPanEndHandler)),b.on("pan",a.hitch(this,
this._onPanExtentChangeHandler)),b.on("extent-change",a.hitch(this,this._onExtentChangeHandler)),b.on("scale",a.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);n.hide(this._div);this._handles.forEach(function(a){a.remove()});this._handles=null},_onPanEndHandler:function(a){this._panning=!1;this._setViewState({center:a.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(a){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=
null);this._setViewState({center:a.extent.getCenter(),scale:this._map.getScale()})},_onExtentChangeHandler:function(a){var b=this._pinching||a.immediate;this._animateViewState({center:a.extent.getCenter(),scale:a.lod.scale},{immediate:b});this._pinching=!1},_onScaleHandler:function(a){this._animation&&(this._animation.stop(),this._animation=null);var b=this._map;if(b._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:b._zoomAnimDiv.extent.getCenter(),scale:b._zoomAnimDiv.newLod.scale},
{immediate:a.immediate});else{var c=b.navigationManager,d=c._dragOrigin;a=b.extent.getCenter();var e=d.x-.5*b.width,d=d.y-.5*b.height,f=b.extent.getWidth()/b.width,g;c._pinchScale?(this._pinching=!0,c=c._pinchScale,g=f/c,a.x-=e*(g-f),a.y+=d*(g-f),b=b.__LOD.scale/c,this._setViewState({center:a,scale:b})):c._zoomEndExtent&&(this._pinching=!1,c=b.getScale()/b.navigationManager._zoomEndLod.scale,g=f/c,a.x-=e*(g-f),a.y+=d*(g-f),b=b.navigationManager._zoomEndLod.scale,this._animateViewState({center:a,scale:b},
{immediate:!1}))}}});g.ACCESS_TOKEN=null;g.supported=function(){return X.detectWebGL()[0]};var W=function(){var a,b=window.performance||{},c=b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow;if(void 0!==c)return function(){return c.call(b)};a=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-a}}();k=e("ff");m=e("ie");q=e("webkit");e=e("opera");var F=(new Date).getTime(),
ea=window.requestAnimationFrame;ea||(ea=window[(q&&"webkit"||k&&"moz"||e&&"o"||m&&"ms")+"RequestAnimationFrame"])||(ea=function(a){var b=W(),c=Math.max(0,16-(b-F)),d=window.setTimeout(function(){a(W())},c);F=b+c;return d});return g});